(function(Ke,We){typeof exports=="object"&&typeof module<"u"?We(exports):typeof define=="function"&&define.amd?define(["exports"],We):We((Ke=typeof globalThis<"u"?globalThis:Ke||self).Popper={})})(this,function(Ke){"use strict";function We(G){if(G==null)return window;if(G.toString()!=="[object Window]"){var K=G.ownerDocument;return K&&K.defaultView||window}return G}function ct(G){return G instanceof We(G).Element||G instanceof Element}function Oe(G){return G instanceof We(G).HTMLElement||G instanceof HTMLElement}function ne(G){return typeof ShadowRoot<"u"&&(G instanceof We(G).ShadowRoot||G instanceof ShadowRoot)}var p=Math.max,m=Math.min,C=Math.round;function D(){var G=navigator.userAgentData;return G!=null&&G.brands&&Array.isArray(G.brands)?G.brands.map(function(K){return K.brand+"/"+K.version}).join(" "):navigator.userAgent}function v(){return!/^((?!chrome|android).)*safari/i.test(D())}function E(G,K,re){K===void 0&&(K=!1),re===void 0&&(re=!1);var le=G.getBoundingClientRect(),Ee=1,_e=1;K&&Oe(G)&&(Ee=G.offsetWidth>0&&C(le.width)/G.offsetWidth||1,_e=G.offsetHeight>0&&C(le.height)/G.offsetHeight||1);var ke=(ct(G)?We(G):window).visualViewport,pe=!v()&&re,we=(le.left+(pe&&ke?ke.offsetLeft:0))/Ee,Fe=(le.top+(pe&&ke?ke.offsetTop:0))/_e,Ie=le.width/Ee,Pe=le.height/_e;return{width:Ie,height:Pe,top:Fe,right:we+Ie,bottom:Fe+Pe,left:we,x:we,y:Fe}}function M(G){var K=We(G);return{scrollLeft:K.pageXOffset,scrollTop:K.pageYOffset}}function w(G){return G?(G.nodeName||"").toLowerCase():null}function g(G){return((ct(G)?G.ownerDocument:G.document)||window.document).documentElement}function l(G){return E(g(G)).left+M(G).scrollLeft}function u(G){return We(G).getComputedStyle(G)}function h(G){var K=u(G),re=K.overflow,le=K.overflowX,Ee=K.overflowY;return/auto|scroll|overlay|hidden/.test(re+Ee+le)}function d(G,K,re){re===void 0&&(re=!1);var le,Ee,_e=Oe(K),ke=Oe(K)&&function(Pe){var at=Pe.getBoundingClientRect(),qe=C(at.width)/Pe.offsetWidth||1,Je=C(at.height)/Pe.offsetHeight||1;return qe!==1||Je!==1}(K),pe=g(K),we=E(G,ke,re),Fe={scrollLeft:0,scrollTop:0},Ie={x:0,y:0};return(_e||!_e&&!re)&&((w(K)!=="body"||h(pe))&&(Fe=(le=K)!==We(le)&&Oe(le)?{scrollLeft:(Ee=le).scrollLeft,scrollTop:Ee.scrollTop}:M(le)),Oe(K)?((Ie=E(K,!0)).x+=K.clientLeft,Ie.y+=K.clientTop):pe&&(Ie.x=l(pe))),{x:we.left+Fe.scrollLeft-Ie.x,y:we.top+Fe.scrollTop-Ie.y,width:we.width,height:we.height}}function y(G){var K=E(G),re=G.offsetWidth,le=G.offsetHeight;return Math.abs(K.width-re)<=1&&(re=K.width),Math.abs(K.height-le)<=1&&(le=K.height),{x:G.offsetLeft,y:G.offsetTop,width:re,height:le}}function A(G){return w(G)==="html"?G:G.assignedSlot||G.parentNode||(ne(G)?G.host:null)||g(G)}function L(G){return["html","body","#document"].indexOf(w(G))>=0?G.ownerDocument.body:Oe(G)&&h(G)?G:L(A(G))}function R(G,K){var re;K===void 0&&(K=[]);var le=L(G),Ee=le===((re=G.ownerDocument)==null?void 0:re.body),_e=We(le),ke=Ee?[_e].concat(_e.visualViewport||[],h(le)?le:[]):le,pe=K.concat(ke);return Ee?pe:pe.concat(R(A(ke)))}function x(G){return["table","td","th"].indexOf(w(G))>=0}function I(G){return Oe(G)&&u(G).position!=="fixed"?G.offsetParent:null}function U(G){for(var K=We(G),re=I(G);re&&x(re)&&u(re).position==="static";)re=I(re);return re&&(w(re)==="html"||w(re)==="body"&&u(re).position==="static")?K:re||function(le){var Ee=/firefox/i.test(D());if(/Trident/i.test(D())&&Oe(le)&&u(le).position==="fixed")return null;var _e=A(le);for(ne(_e)&&(_e=_e.host);Oe(_e)&&["html","body"].indexOf(w(_e))<0;){var ke=u(_e);if(ke.transform!=="none"||ke.perspective!=="none"||ke.contain==="paint"||["transform","perspective"].indexOf(ke.willChange)!==-1||Ee&&ke.willChange==="filter"||Ee&&ke.filter&&ke.filter!=="none")return _e;_e=_e.parentNode}return null}(G)||K}var $="top",Z="bottom",W="right",se="left",ce="auto",ve=[$,Z,W,se],Se="start",ge="end",B="viewport",z="popper",V=ve.reduce(function(G,K){return G.concat([K+"-"+Se,K+"-"+ge])},[]),J=[].concat(ve,[ce]).reduce(function(G,K){return G.concat([K,K+"-"+Se,K+"-"+ge])},[]),X=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function be(G){var K=new Map,re=new Set,le=[];function Ee(_e){re.add(_e.name),[].concat(_e.requires||[],_e.requiresIfExists||[]).forEach(function(ke){if(!re.has(ke)){var pe=K.get(ke);pe&&Ee(pe)}}),le.push(_e)}return G.forEach(function(_e){K.set(_e.name,_e)}),G.forEach(function(_e){re.has(_e.name)||Ee(_e)}),le}function Ne(G,K){var re=K.getRootNode&&K.getRootNode();if(G.contains(K))return!0;if(re&&ne(re)){var le=K;do{if(le&&G.isSameNode(le))return!0;le=le.parentNode||le.host}while(le)}return!1}function ze(G){return Object.assign({},G,{left:G.x,top:G.y,right:G.x+G.width,bottom:G.y+G.height})}function ie(G,K,re){return K===B?ze(function(le,Ee){var _e=We(le),ke=g(le),pe=_e.visualViewport,we=ke.clientWidth,Fe=ke.clientHeight,Ie=0,Pe=0;if(pe){we=pe.width,Fe=pe.height;var at=v();(at||!at&&Ee==="fixed")&&(Ie=pe.offsetLeft,Pe=pe.offsetTop)}return{width:we,height:Fe,x:Ie+l(le),y:Pe}}(G,re)):ct(K)?function(le,Ee){var _e=E(le,!1,Ee==="fixed");return _e.top=_e.top+le.clientTop,_e.left=_e.left+le.clientLeft,_e.bottom=_e.top+le.clientHeight,_e.right=_e.left+le.clientWidth,_e.width=le.clientWidth,_e.height=le.clientHeight,_e.x=_e.left,_e.y=_e.top,_e}(K,re):ze(function(le){var Ee,_e=g(le),ke=M(le),pe=(Ee=le.ownerDocument)==null?void 0:Ee.body,we=p(_e.scrollWidth,_e.clientWidth,pe?pe.scrollWidth:0,pe?pe.clientWidth:0),Fe=p(_e.scrollHeight,_e.clientHeight,pe?pe.scrollHeight:0,pe?pe.clientHeight:0),Ie=-ke.scrollLeft+l(le),Pe=-ke.scrollTop;return u(pe||_e).direction==="rtl"&&(Ie+=p(_e.clientWidth,pe?pe.clientWidth:0)-we),{width:we,height:Fe,x:Ie,y:Pe}}(g(G)))}function N(G,K,re,le){var Ee=K==="clippingParents"?function(we){var Fe=R(A(we)),Ie=["absolute","fixed"].indexOf(u(we).position)>=0&&Oe(we)?U(we):we;return ct(Ie)?Fe.filter(function(Pe){return ct(Pe)&&Ne(Pe,Ie)&&w(Pe)!=="body"}):[]}(G):[].concat(K),_e=[].concat(Ee,[re]),ke=_e[0],pe=_e.reduce(function(we,Fe){var Ie=ie(G,Fe,le);return we.top=p(Ie.top,we.top),we.right=m(Ie.right,we.right),we.bottom=m(Ie.bottom,we.bottom),we.left=p(Ie.left,we.left),we},ie(G,ke,le));return pe.width=pe.right-pe.left,pe.height=pe.bottom-pe.top,pe.x=pe.left,pe.y=pe.top,pe}function oe(G){return G.split("-")[0]}function ue(G){return G.split("-")[1]}function ae(G){return["top","bottom"].indexOf(G)>=0?"x":"y"}function ye(G){var K,re=G.reference,le=G.element,Ee=G.placement,_e=Ee?oe(Ee):null,ke=Ee?ue(Ee):null,pe=re.x+re.width/2-le.width/2,we=re.y+re.height/2-le.height/2;switch(_e){case $:K={x:pe,y:re.y-le.height};break;case Z:K={x:pe,y:re.y+re.height};break;case W:K={x:re.x+re.width,y:we};break;case se:K={x:re.x-le.width,y:we};break;default:K={x:re.x,y:re.y}}var Fe=_e?ae(_e):null;if(Fe!=null){var Ie=Fe==="y"?"height":"width";switch(ke){case Se:K[Fe]=K[Fe]-(re[Ie]/2-le[Ie]/2);break;case ge:K[Fe]=K[Fe]+(re[Ie]/2-le[Ie]/2)}}return K}function Ye(G){return Object.assign({},{top:0,right:0,bottom:0,left:0},G)}function dt(G,K){return K.reduce(function(re,le){return re[le]=G,re},{})}function ht(G,K){K===void 0&&(K={});var re=K,le=re.placement,Ee=le===void 0?G.placement:le,_e=re.strategy,ke=_e===void 0?G.strategy:_e,pe=re.boundary,we=pe===void 0?"clippingParents":pe,Fe=re.rootBoundary,Ie=Fe===void 0?B:Fe,Pe=re.elementContext,at=Pe===void 0?z:Pe,qe=re.altBoundary,Je=qe!==void 0&&qe,Ze=re.padding,$e=Ze===void 0?0:Ze,ft=Ye(typeof $e!="number"?$e:dt($e,ve)),pt=at===z?"reference":z,st=G.rects.popper,rt=G.elements[Je?pt:at],Xe=N(ct(rt)?rt:rt.contextElement||g(G.elements.popper),we,Ie,ke),Ue=E(G.elements.reference),nt=ye({reference:Ue,element:st,strategy:"absolute",placement:Ee}),Ge=ze(Object.assign({},st,nt)),it=at===z?Ge:Ue,yt={top:Xe.top-it.top+ft.top,bottom:it.bottom-Xe.bottom+ft.bottom,left:Xe.left-it.left+ft.left,right:it.right-Xe.right+ft.right},Dt=G.modifiersData.offset;if(at===z&&Dt){var qt=Dt[Ee];Object.keys(yt).forEach(function(Ht){var jt=[W,Z].indexOf(Ht)>=0?1:-1,$t=[$,Z].indexOf(Ht)>=0?"y":"x";yt[Ht]+=qt[$t]*jt})}return yt}var et={placement:"bottom",modifiers:[],strategy:"absolute"};function je(){for(var G=arguments.length,K=new Array(G),re=0;re<G;re++)K[re]=arguments[re];return!K.some(function(le){return!(le&&typeof le.getBoundingClientRect=="function")})}function ot(G){G===void 0&&(G={});var K=G,re=K.defaultModifiers,le=re===void 0?[]:re,Ee=K.defaultOptions,_e=Ee===void 0?et:Ee;return function(ke,pe,we){we===void 0&&(we=_e);var Fe,Ie,Pe={placement:"bottom",orderedModifiers:[],options:Object.assign({},et,_e),modifiersData:{},elements:{reference:ke,popper:pe},attributes:{},styles:{}},at=[],qe=!1,Je={state:Pe,setOptions:function($e){var ft=typeof $e=="function"?$e(Pe.options):$e;Ze(),Pe.options=Object.assign({},_e,Pe.options,ft),Pe.scrollParents={reference:ct(ke)?R(ke):ke.contextElement?R(ke.contextElement):[],popper:R(pe)};var pt,st,rt=function(Xe){var Ue=be(Xe);return X.reduce(function(nt,Ge){return nt.concat(Ue.filter(function(it){return it.phase===Ge}))},[])}((pt=[].concat(le,Pe.options.modifiers),st=pt.reduce(function(Xe,Ue){var nt=Xe[Ue.name];return Xe[Ue.name]=nt?Object.assign({},nt,Ue,{options:Object.assign({},nt.options,Ue.options),data:Object.assign({},nt.data,Ue.data)}):Ue,Xe},{}),Object.keys(st).map(function(Xe){return st[Xe]})));return Pe.orderedModifiers=rt.filter(function(Xe){return Xe.enabled}),Pe.orderedModifiers.forEach(function(Xe){var Ue=Xe.name,nt=Xe.options,Ge=nt===void 0?{}:nt,it=Xe.effect;if(typeof it=="function"){var yt=it({state:Pe,name:Ue,instance:Je,options:Ge}),Dt=function(){};at.push(yt||Dt)}}),Je.update()},forceUpdate:function(){if(!qe){var $e=Pe.elements,ft=$e.reference,pt=$e.popper;if(je(ft,pt)){Pe.rects={reference:d(ft,U(pt),Pe.options.strategy==="fixed"),popper:y(pt)},Pe.reset=!1,Pe.placement=Pe.options.placement,Pe.orderedModifiers.forEach(function(it){return Pe.modifiersData[it.name]=Object.assign({},it.data)});for(var st=0;st<Pe.orderedModifiers.length;st++)if(Pe.reset!==!0){var rt=Pe.orderedModifiers[st],Xe=rt.fn,Ue=rt.options,nt=Ue===void 0?{}:Ue,Ge=rt.name;typeof Xe=="function"&&(Pe=Xe({state:Pe,options:nt,name:Ge,instance:Je})||Pe)}else Pe.reset=!1,st=-1}}},update:(Fe=function(){return new Promise(function($e){Je.forceUpdate(),$e(Pe)})},function(){return Ie||(Ie=new Promise(function($e){Promise.resolve().then(function(){Ie=void 0,$e(Fe())})})),Ie}),destroy:function(){Ze(),qe=!0}};if(!je(ke,pe))return Je;function Ze(){at.forEach(function($e){return $e()}),at=[]}return Je.setOptions(we).then(function($e){!qe&&we.onFirstUpdate&&we.onFirstUpdate($e)}),Je}}var Ft={passive:!0},Ot={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(G){var K=G.state,re=G.instance,le=G.options,Ee=le.scroll,_e=Ee===void 0||Ee,ke=le.resize,pe=ke===void 0||ke,we=We(K.elements.popper),Fe=[].concat(K.scrollParents.reference,K.scrollParents.popper);return _e&&Fe.forEach(function(Ie){Ie.addEventListener("scroll",re.update,Ft)}),pe&&we.addEventListener("resize",re.update,Ft),function(){_e&&Fe.forEach(function(Ie){Ie.removeEventListener("scroll",re.update,Ft)}),pe&&we.removeEventListener("resize",re.update,Ft)}},data:{}},Yt={name:"popperOffsets",enabled:!0,phase:"read",fn:function(G){var K=G.state,re=G.name;K.modifiersData[re]=ye({reference:K.rects.reference,element:K.rects.popper,strategy:"absolute",placement:K.placement})},data:{}},Bt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Rt(G){var K,re=G.popper,le=G.popperRect,Ee=G.placement,_e=G.variation,ke=G.offsets,pe=G.position,we=G.gpuAcceleration,Fe=G.adaptive,Ie=G.roundOffsets,Pe=G.isFixed,at=ke.x,qe=at===void 0?0:at,Je=ke.y,Ze=Je===void 0?0:Je,$e=typeof Ie=="function"?Ie({x:qe,y:Ze}):{x:qe,y:Ze};qe=$e.x,Ze=$e.y;var ft=ke.hasOwnProperty("x"),pt=ke.hasOwnProperty("y"),st=se,rt=$,Xe=window;if(Fe){var Ue=U(re),nt="clientHeight",Ge="clientWidth";Ue===We(re)&&u(Ue=g(re)).position!=="static"&&pe==="absolute"&&(nt="scrollHeight",Ge="scrollWidth"),Ue=Ue,(Ee===$||(Ee===se||Ee===W)&&_e===ge)&&(rt=Z,Ze-=(Pe&&Ue===Xe&&Xe.visualViewport?Xe.visualViewport.height:Ue[nt])-le.height,Ze*=we?1:-1),(Ee===se||(Ee===$||Ee===Z)&&_e===ge)&&(st=W,qe-=(Pe&&Ue===Xe&&Xe.visualViewport?Xe.visualViewport.width:Ue[Ge])-le.width,qe*=we?1:-1)}var it,yt=Object.assign({position:pe},Fe&&Bt),Dt=Ie===!0?function(qt,Ht){var jt=qt.x,$t=qt.y,mt=Ht.devicePixelRatio||1;return{x:C(jt*mt)/mt||0,y:C($t*mt)/mt||0}}({x:qe,y:Ze},We(re)):{x:qe,y:Ze};return qe=Dt.x,Ze=Dt.y,we?Object.assign({},yt,((it={})[rt]=pt?"0":"",it[st]=ft?"0":"",it.transform=(Xe.devicePixelRatio||1)<=1?"translate("+qe+"px, "+Ze+"px)":"translate3d("+qe+"px, "+Ze+"px, 0)",it)):Object.assign({},yt,((K={})[rt]=pt?Ze+"px":"",K[st]=ft?qe+"px":"",K.transform="",K))}var Xt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(G){var K=G.state,re=G.options,le=re.gpuAcceleration,Ee=le===void 0||le,_e=re.adaptive,ke=_e===void 0||_e,pe=re.roundOffsets,we=pe===void 0||pe,Fe={placement:oe(K.placement),variation:ue(K.placement),popper:K.elements.popper,popperRect:K.rects.popper,gpuAcceleration:Ee,isFixed:K.options.strategy==="fixed"};K.modifiersData.popperOffsets!=null&&(K.styles.popper=Object.assign({},K.styles.popper,Rt(Object.assign({},Fe,{offsets:K.modifiersData.popperOffsets,position:K.options.strategy,adaptive:ke,roundOffsets:we})))),K.modifiersData.arrow!=null&&(K.styles.arrow=Object.assign({},K.styles.arrow,Rt(Object.assign({},Fe,{offsets:K.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:we})))),K.attributes.popper=Object.assign({},K.attributes.popper,{"data-popper-placement":K.placement})},data:{}},It={name:"applyStyles",enabled:!0,phase:"write",fn:function(G){var K=G.state;Object.keys(K.elements).forEach(function(re){var le=K.styles[re]||{},Ee=K.attributes[re]||{},_e=K.elements[re];Oe(_e)&&w(_e)&&(Object.assign(_e.style,le),Object.keys(Ee).forEach(function(ke){var pe=Ee[ke];pe===!1?_e.removeAttribute(ke):_e.setAttribute(ke,pe===!0?"":pe)}))})},effect:function(G){var K=G.state,re={popper:{position:K.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(K.elements.popper.style,re.popper),K.styles=re,K.elements.arrow&&Object.assign(K.elements.arrow.style,re.arrow),function(){Object.keys(K.elements).forEach(function(le){var Ee=K.elements[le],_e=K.attributes[le]||{},ke=Object.keys(K.styles.hasOwnProperty(le)?K.styles[le]:re[le]).reduce(function(pe,we){return pe[we]="",pe},{});Oe(Ee)&&w(Ee)&&(Object.assign(Ee.style,ke),Object.keys(_e).forEach(function(pe){Ee.removeAttribute(pe)}))})}},requires:["computeStyles"]},ni={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(G){var K=G.state,re=G.options,le=G.name,Ee=re.offset,_e=Ee===void 0?[0,0]:Ee,ke=J.reduce(function(Ie,Pe){return Ie[Pe]=function(at,qe,Je){var Ze=oe(at),$e=[se,$].indexOf(Ze)>=0?-1:1,ft=typeof Je=="function"?Je(Object.assign({},qe,{placement:at})):Je,pt=ft[0],st=ft[1];return pt=pt||0,st=(st||0)*$e,[se,W].indexOf(Ze)>=0?{x:st,y:pt}:{x:pt,y:st}}(Pe,K.rects,_e),Ie},{}),pe=ke[K.placement],we=pe.x,Fe=pe.y;K.modifiersData.popperOffsets!=null&&(K.modifiersData.popperOffsets.x+=we,K.modifiersData.popperOffsets.y+=Fe),K.modifiersData[le]=ke}},Gt={left:"right",right:"left",bottom:"top",top:"bottom"};function bt(G){return G.replace(/left|right|bottom|top/g,function(K){return Gt[K]})}var oi={start:"end",end:"start"};function kt(G){return G.replace(/start|end/g,function(K){return oi[K]})}function Wt(G,K){K===void 0&&(K={});var re=K,le=re.placement,Ee=re.boundary,_e=re.rootBoundary,ke=re.padding,pe=re.flipVariations,we=re.allowedAutoPlacements,Fe=we===void 0?J:we,Ie=ue(le),Pe=Ie?pe?V:V.filter(function(Je){return ue(Je)===Ie}):ve,at=Pe.filter(function(Je){return Fe.indexOf(Je)>=0});at.length===0&&(at=Pe);var qe=at.reduce(function(Je,Ze){return Je[Ze]=ht(G,{placement:Ze,boundary:Ee,rootBoundary:_e,padding:ke})[oe(Ze)],Je},{});return Object.keys(qe).sort(function(Je,Ze){return qe[Je]-qe[Ze]})}var tt={name:"flip",enabled:!0,phase:"main",fn:function(G){var K=G.state,re=G.options,le=G.name;if(!K.modifiersData[le]._skip){for(var Ee=re.mainAxis,_e=Ee===void 0||Ee,ke=re.altAxis,pe=ke===void 0||ke,we=re.fallbackPlacements,Fe=re.padding,Ie=re.boundary,Pe=re.rootBoundary,at=re.altBoundary,qe=re.flipVariations,Je=qe===void 0||qe,Ze=re.allowedAutoPlacements,$e=K.options.placement,ft=oe($e),pt=we||(ft===$e||!Je?[bt($e)]:function(Ut){if(oe(Ut)===ce)return[];var Et=bt(Ut);return[kt(Ut),Et,kt(Et)]}($e)),st=[$e].concat(pt).reduce(function(Ut,Et){return Ut.concat(oe(Et)===ce?Wt(K,{placement:Et,boundary:Ie,rootBoundary:Pe,padding:Fe,flipVariations:Je,allowedAutoPlacements:Ze}):Et)},[]),rt=K.rects.reference,Xe=K.rects.popper,Ue=new Map,nt=!0,Ge=st[0],it=0;it<st.length;it++){var yt=st[it],Dt=oe(yt),qt=ue(yt)===Se,Ht=[$,Z].indexOf(Dt)>=0,jt=Ht?"width":"height",$t=ht(K,{placement:yt,boundary:Ie,rootBoundary:Pe,altBoundary:at,padding:Fe}),mt=Ht?qt?W:se:qt?Z:$;rt[jt]>Xe[jt]&&(mt=bt(mt));var hi=bt(mt),vi=[];if(_e&&vi.push($t[Dt]<=0),pe&&vi.push($t[mt]<=0,$t[hi]<=0),vi.every(function(Ut){return Ut})){Ge=yt,nt=!1;break}Ue.set(yt,vi)}if(nt)for(var Jt=function(Ut){var Et=st.find(function(Zt){var Li=Ue.get(Zt);if(Li)return Li.slice(0,Ut).every(function(fi){return fi})});if(Et)return Ge=Et,"break"},Mt=Je?3:1;Mt>0&&Jt(Mt)!=="break";Mt--);K.placement!==Ge&&(K.modifiersData[le]._skip=!0,K.placement=Ge,K.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ut(G,K,re){return p(G,m(K,re))}var vs={name:"preventOverflow",enabled:!0,phase:"main",fn:function(G){var K=G.state,re=G.options,le=G.name,Ee=re.mainAxis,_e=Ee===void 0||Ee,ke=re.altAxis,pe=ke!==void 0&&ke,we=re.boundary,Fe=re.rootBoundary,Ie=re.altBoundary,Pe=re.padding,at=re.tether,qe=at===void 0||at,Je=re.tetherOffset,Ze=Je===void 0?0:Je,$e=ht(K,{boundary:we,rootBoundary:Fe,padding:Pe,altBoundary:Ie}),ft=oe(K.placement),pt=ue(K.placement),st=!pt,rt=ae(ft),Xe=rt==="x"?"y":"x",Ue=K.modifiersData.popperOffsets,nt=K.rects.reference,Ge=K.rects.popper,it=typeof Ze=="function"?Ze(Object.assign({},K.rects,{placement:K.placement})):Ze,yt=typeof it=="number"?{mainAxis:it,altAxis:it}:Object.assign({mainAxis:0,altAxis:0},it),Dt=K.modifiersData.offset?K.modifiersData.offset[K.placement]:null,qt={x:0,y:0};if(Ue){if(_e){var Ht,jt=rt==="y"?$:se,$t=rt==="y"?Z:W,mt=rt==="y"?"height":"width",hi=Ue[rt],vi=hi+$e[jt],Jt=hi-$e[$t],Mt=qe?-Ge[mt]/2:0,Ut=pt===Se?nt[mt]:Ge[mt],Et=pt===Se?-Ge[mt]:-nt[mt],Zt=K.elements.arrow,Li=qe&&Zt?y(Zt):{width:0,height:0},fi=K.modifiersData["arrow#persistent"]?K.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ts=fi[jt],Ts=fi[$t],gt=ut(0,nt[mt],Li[mt]),is=st?nt[mt]/2-Mt-gt-ts-yt.mainAxis:Ut-gt-ts-yt.mainAxis,ss=st?-nt[mt]/2+Mt+gt+Ts+yt.mainAxis:Et+gt+Ts+yt.mainAxis,Pt=K.elements.arrow&&U(K.elements.arrow),Ui=Pt?rt==="y"?Pt.clientTop||0:Pt.clientLeft||0:0,rs=(Ht=Dt?.[rt])!=null?Ht:0,Os=hi+ss-rs,_i=ut(qe?m(vi,hi+is-rs-Ui):vi,hi,qe?p(Jt,Os):Jt);Ue[rt]=_i,qt[rt]=_i-hi}if(pe){var Rs,li=rt==="x"?$:se,bi=rt==="x"?Z:W,pi=Ue[Xe],Ti=Xe==="y"?"height":"width",ns=pi+$e[li],os=pi-$e[bi],as=[$,se].indexOf(ft)!==-1,yi=(Rs=Dt?.[Xe])!=null?Rs:0,hs=as?ns:pi-nt[Ti]-Ge[Ti]-yi+yt.altAxis,Qt=as?pi+nt[Ti]+Ge[Ti]-yi-yt.altAxis:os,Si=qe&&as?function(Vi,qi,vt){var Oi=ut(Vi,qi,vt);return Oi>vt?vt:Oi}(hs,pi,Qt):ut(qe?hs:ns,pi,qe?Qt:os);Ue[Xe]=Si,qt[Xe]=Si-pi}K.modifiersData[le]=qt}},requiresIfExists:["offset"]},Ai={name:"arrow",enabled:!0,phase:"main",fn:function(G){var K,re=G.state,le=G.name,Ee=G.options,_e=re.elements.arrow,ke=re.modifiersData.popperOffsets,pe=oe(re.placement),we=ae(pe),Fe=[se,W].indexOf(pe)>=0?"height":"width";if(_e&&ke){var Ie=function(Ge,it){return Ye(typeof(Ge=typeof Ge=="function"?Ge(Object.assign({},it.rects,{placement:it.placement})):Ge)!="number"?Ge:dt(Ge,ve))}(Ee.padding,re),Pe=y(_e),at=we==="y"?$:se,qe=we==="y"?Z:W,Je=re.rects.reference[Fe]+re.rects.reference[we]-ke[we]-re.rects.popper[Fe],Ze=ke[we]-re.rects.reference[we],$e=U(_e),ft=$e?we==="y"?$e.clientHeight||0:$e.clientWidth||0:0,pt=Je/2-Ze/2,st=Ie[at],rt=ft-Pe[Fe]-Ie[qe],Xe=ft/2-Pe[Fe]/2+pt,Ue=ut(st,Xe,rt),nt=we;re.modifiersData[le]=((K={})[nt]=Ue,K.centerOffset=Ue-Xe,K)}},effect:function(G){var K=G.state,re=G.options.element,le=re===void 0?"[data-popper-arrow]":re;le!=null&&(typeof le!="string"||(le=K.elements.popper.querySelector(le)))&&Ne(K.elements.popper,le)&&(K.elements.arrow=le)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function es(G,K,re){return re===void 0&&(re={x:0,y:0}),{top:G.top-K.height-re.y,right:G.right-K.width+re.x,bottom:G.bottom-K.height+re.y,left:G.left-K.width-re.x}}function Ls(G){return[$,W,Z,se].some(function(K){return G[K]>=0})}var Vt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(G){var K=G.state,re=G.name,le=K.rects.reference,Ee=K.rects.popper,_e=K.modifiersData.preventOverflow,ke=ht(K,{elementContext:"reference"}),pe=ht(K,{altBoundary:!0}),we=es(ke,le),Fe=es(pe,Ee,_e),Ie=Ls(we),Pe=Ls(Fe);K.modifiersData[re]={referenceClippingOffsets:we,popperEscapeOffsets:Fe,isReferenceHidden:Ie,hasPopperEscaped:Pe},K.attributes.popper=Object.assign({},K.attributes.popper,{"data-popper-reference-hidden":Ie,"data-popper-escaped":Pe})}},ji=ot({defaultModifiers:[Ot,Yt,Xt,It]}),ai=[Ot,Yt,Xt,It,ni,tt,vs,Ai,Vt],$i=ot({defaultModifiers:ai});Ke.applyStyles=It,Ke.arrow=Ai,Ke.computeStyles=Xt,Ke.createPopper=$i,Ke.createPopperLite=ji,Ke.defaultModifiers=ai,Ke.detectOverflow=ht,Ke.eventListeners=Ot,Ke.flip=tt,Ke.hide=Vt,Ke.offset=ni,Ke.popperGenerator=ot,Ke.popperOffsets=Yt,Ke.preventOverflow=vs,Object.defineProperty(Ke,"__esModule",{value:!0})});/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(Ke,We){typeof exports=="object"&&typeof module<"u"?module.exports=We(require("@popperjs/core")):typeof define=="function"&&define.amd?define(["@popperjs/core"],We):(Ke=typeof globalThis<"u"?globalThis:Ke||self).bootstrap=We(Ke.Popper)})(this,function(Ke){"use strict";function We(Y){const f=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(Y){for(const O in Y)if(O!=="default"){const q=Object.getOwnPropertyDescriptor(Y,O);Object.defineProperty(f,O,q.get?q:{enumerable:!0,get:()=>Y[O]})}}return f.default=Y,Object.freeze(f)}const ct=We(Ke),Oe=new Map,ne={set(Y,f,O){Oe.has(Y)||Oe.set(Y,new Map);const q=Oe.get(Y);q.has(f)||q.size===0?q.set(f,O):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(q.keys())[0]}.`)},get:(Y,f)=>Oe.has(Y)&&Oe.get(Y).get(f)||null,remove(Y,f){if(!Oe.has(Y))return;const O=Oe.get(Y);O.delete(f),O.size===0&&Oe.delete(Y)}},p="transitionend",m=Y=>(Y&&window.CSS&&window.CSS.escape&&(Y=Y.replace(/#([^\s"#']+)/g,(f,O)=>`#${CSS.escape(O)}`)),Y),C=Y=>{Y.dispatchEvent(new Event(p))},D=Y=>!(!Y||typeof Y!="object")&&(Y.jquery!==void 0&&(Y=Y[0]),Y.nodeType!==void 0),v=Y=>D(Y)?Y.jquery?Y[0]:Y:typeof Y=="string"&&Y.length>0?document.querySelector(m(Y)):null,E=Y=>{if(!D(Y)||Y.getClientRects().length===0)return!1;const f=getComputedStyle(Y).getPropertyValue("visibility")==="visible",O=Y.closest("details:not([open])");if(!O)return f;if(O!==Y){const q=Y.closest("summary");if(q&&q.parentNode!==O||q===null)return!1}return f},M=Y=>!Y||Y.nodeType!==Node.ELEMENT_NODE||!!Y.classList.contains("disabled")||(Y.disabled!==void 0?Y.disabled:Y.hasAttribute("disabled")&&Y.getAttribute("disabled")!=="false"),w=Y=>{if(!document.documentElement.attachShadow)return null;if(typeof Y.getRootNode=="function"){const f=Y.getRootNode();return f instanceof ShadowRoot?f:null}return Y instanceof ShadowRoot?Y:Y.parentNode?w(Y.parentNode):null},g=()=>{},l=Y=>{Y.offsetHeight},u=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,h=[],d=()=>document.documentElement.dir==="rtl",y=Y=>{var f;f=()=>{const O=u();if(O){const q=Y.NAME,de=O.fn[q];O.fn[q]=Y.jQueryInterface,O.fn[q].Constructor=Y,O.fn[q].noConflict=()=>(O.fn[q]=de,Y.jQueryInterface)}},document.readyState==="loading"?(h.length||document.addEventListener("DOMContentLoaded",()=>{for(const O of h)O()}),h.push(f)):f()},A=(Y,f=[],O=Y)=>typeof Y=="function"?Y(...f):O,L=(Y,f,O=!0)=>{if(!O)return void A(Y);const q=(Re=>{if(!Re)return 0;let{transitionDuration:Qe,transitionDelay:St}=window.getComputedStyle(Re);const xt=Number.parseFloat(Qe),Ct=Number.parseFloat(St);return xt||Ct?(Qe=Qe.split(",")[0],St=St.split(",")[0],1e3*(Number.parseFloat(Qe)+Number.parseFloat(St))):0})(f)+5;let de=!1;const xe=({target:Re})=>{Re===f&&(de=!0,f.removeEventListener(p,xe),A(Y))};f.addEventListener(p,xe),setTimeout(()=>{de||C(f)},q)},R=(Y,f,O,q)=>{const de=Y.length;let xe=Y.indexOf(f);return xe===-1?!O&&q?Y[de-1]:Y[0]:(xe+=O?1:-1,q&&(xe=(xe+de)%de),Y[Math.max(0,Math.min(xe,de-1))])},x=/[^.]*(?=\..*)\.|.*/,I=/\..*/,U=/::\d+$/,$={};let Z=1;const W={mouseenter:"mouseover",mouseleave:"mouseout"},se=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ce(Y,f){return f&&`${f}::${Z++}`||Y.uidEvent||Z++}function ve(Y){const f=ce(Y);return Y.uidEvent=f,$[f]=$[f]||{},$[f]}function Se(Y,f,O=null){return Object.values(Y).find(q=>q.callable===f&&q.delegationSelector===O)}function ge(Y,f,O){const q=typeof f=="string",de=q?O:f||O;let xe=J(Y);return se.has(xe)||(xe=Y),[q,de,xe]}function B(Y,f,O,q,de){if(typeof f!="string"||!Y)return;let[xe,Re,Qe]=ge(f,O,q);f in W&&(Re=(Fi=>function(ii){if(!ii.relatedTarget||ii.relatedTarget!==ii.delegateTarget&&!ii.delegateTarget.contains(ii.relatedTarget))return Fi.call(this,ii)})(Re));const St=ve(Y),xt=St[Qe]||(St[Qe]={}),Ct=Se(xt,Re,xe?O:null);if(Ct)return void(Ct.oneOff=Ct.oneOff&&de);const ci=ce(Re,f.replace(x,"")),ti=xe?function(gi,Fi,ii){return function Ds(Ni){const zr=gi.querySelectorAll(Fi);for(let{target:Zi}=Ni;Zi&&Zi!==this;Zi=Zi.parentNode)for(const Wi of zr)if(Wi===Zi)return be(Ni,{delegateTarget:Zi}),Ds.oneOff&&X.off(gi,Ni.type,Fi,ii),ii.apply(Zi,[Ni])}}(Y,O,Re):function(gi,Fi){return function ii(Ds){return be(Ds,{delegateTarget:gi}),ii.oneOff&&X.off(gi,Ds.type,Fi),Fi.apply(gi,[Ds])}}(Y,Re);ti.delegationSelector=xe?O:null,ti.callable=Re,ti.oneOff=de,ti.uidEvent=ci,xt[ci]=ti,Y.addEventListener(Qe,ti,xe)}function z(Y,f,O,q,de){const xe=Se(f[O],q,de);xe&&(Y.removeEventListener(O,xe,!!de),delete f[O][xe.uidEvent])}function V(Y,f,O,q){const de=f[O]||{};for(const[xe,Re]of Object.entries(de))xe.includes(q)&&z(Y,f,O,Re.callable,Re.delegationSelector)}function J(Y){return Y=Y.replace(I,""),W[Y]||Y}const X={on(Y,f,O,q){B(Y,f,O,q,!1)},one(Y,f,O,q){B(Y,f,O,q,!0)},off(Y,f,O,q){if(typeof f!="string"||!Y)return;const[de,xe,Re]=ge(f,O,q),Qe=Re!==f,St=ve(Y),xt=St[Re]||{},Ct=f.startsWith(".");if(xe===void 0){if(Ct)for(const ci of Object.keys(St))V(Y,St,ci,f.slice(1));for(const[ci,ti]of Object.entries(xt)){const gi=ci.replace(U,"");Qe&&!f.includes(gi)||z(Y,St,Re,ti.callable,ti.delegationSelector)}}else{if(!Object.keys(xt).length)return;z(Y,St,Re,xe,de?O:null)}},trigger(Y,f,O){if(typeof f!="string"||!Y)return null;const q=u();let de=null,xe=!0,Re=!0,Qe=!1;f!==J(f)&&q&&(de=q.Event(f,O),q(Y).trigger(de),xe=!de.isPropagationStopped(),Re=!de.isImmediatePropagationStopped(),Qe=de.isDefaultPrevented());const St=be(new Event(f,{bubbles:xe,cancelable:!0}),O);return Qe&&St.preventDefault(),Re&&Y.dispatchEvent(St),St.defaultPrevented&&de&&de.preventDefault(),St}};function be(Y,f={}){for(const[O,q]of Object.entries(f))try{Y[O]=q}catch{Object.defineProperty(Y,O,{configurable:!0,get:()=>q})}return Y}function Ne(Y){if(Y==="true")return!0;if(Y==="false")return!1;if(Y===Number(Y).toString())return Number(Y);if(Y===""||Y==="null")return null;if(typeof Y!="string")return Y;try{return JSON.parse(decodeURIComponent(Y))}catch{return Y}}function ze(Y){return Y.replace(/[A-Z]/g,f=>`-${f.toLowerCase()}`)}const ie={setDataAttribute(Y,f,O){Y.setAttribute(`data-bs-${ze(f)}`,O)},removeDataAttribute(Y,f){Y.removeAttribute(`data-bs-${ze(f)}`)},getDataAttributes(Y){if(!Y)return{};const f={},O=Object.keys(Y.dataset).filter(q=>q.startsWith("bs")&&!q.startsWith("bsConfig"));for(const q of O){let de=q.replace(/^bs/,"");de=de.charAt(0).toLowerCase()+de.slice(1,de.length),f[de]=Ne(Y.dataset[q])}return f},getDataAttribute:(Y,f)=>Ne(Y.getAttribute(`data-bs-${ze(f)}`))};class N{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(f){return f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f}_mergeConfigObj(f,O){const q=D(O)?ie.getDataAttribute(O,"config"):{};return{...this.constructor.Default,...typeof q=="object"?q:{},...D(O)?ie.getDataAttributes(O):{},...typeof f=="object"?f:{}}}_typeCheckConfig(f,O=this.constructor.DefaultType){for(const[de,xe]of Object.entries(O)){const Re=f[de],Qe=D(Re)?"element":(q=Re)==null?`${q}`:Object.prototype.toString.call(q).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(xe).test(Qe))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${de}" provided type "${Qe}" but expected type "${xe}".`)}var q}}class oe extends N{constructor(f,O){super(),(f=v(f))&&(this._element=f,this._config=this._getConfig(O),ne.set(this._element,this.constructor.DATA_KEY,this))}dispose(){ne.remove(this._element,this.constructor.DATA_KEY),X.off(this._element,this.constructor.EVENT_KEY);for(const f of Object.getOwnPropertyNames(this))this[f]=null}_queueCallback(f,O,q=!0){L(f,O,q)}_getConfig(f){return f=this._mergeConfigObj(f,this._element),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}static getInstance(f){return ne.get(v(f),this.DATA_KEY)}static getOrCreateInstance(f,O={}){return this.getInstance(f)||new this(f,typeof O=="object"?O:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(f){return`${f}${this.EVENT_KEY}`}}const ue=Y=>{let f=Y.getAttribute("data-bs-target");if(!f||f==="#"){let O=Y.getAttribute("href");if(!O||!O.includes("#")&&!O.startsWith("."))return null;O.includes("#")&&!O.startsWith("#")&&(O=`#${O.split("#")[1]}`),f=O&&O!=="#"?O.trim():null}return f?f.split(",").map(O=>m(O)).join(","):null},ae={find:(Y,f=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(f,Y)),findOne:(Y,f=document.documentElement)=>Element.prototype.querySelector.call(f,Y),children:(Y,f)=>[].concat(...Y.children).filter(O=>O.matches(f)),parents(Y,f){const O=[];let q=Y.parentNode.closest(f);for(;q;)O.push(q),q=q.parentNode.closest(f);return O},prev(Y,f){let O=Y.previousElementSibling;for(;O;){if(O.matches(f))return[O];O=O.previousElementSibling}return[]},next(Y,f){let O=Y.nextElementSibling;for(;O;){if(O.matches(f))return[O];O=O.nextElementSibling}return[]},focusableChildren(Y){const f=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(O=>`${O}:not([tabindex^="-"])`).join(",");return this.find(f,Y).filter(O=>!M(O)&&E(O))},getSelectorFromElement(Y){const f=ue(Y);return f&&ae.findOne(f)?f:null},getElementFromSelector(Y){const f=ue(Y);return f?ae.findOne(f):null},getMultipleElementsFromSelector(Y){const f=ue(Y);return f?ae.find(f):[]}},ye=(Y,f="hide")=>{const O=`click.dismiss${Y.EVENT_KEY}`,q=Y.NAME;X.on(document,O,`[data-bs-dismiss="${q}"]`,function(de){if(["A","AREA"].includes(this.tagName)&&de.preventDefault(),M(this))return;const xe=ae.getElementFromSelector(this)||this.closest(`.${q}`);Y.getOrCreateInstance(xe)[f]()})},Ye=".bs.alert",dt=`close${Ye}`,ht=`closed${Ye}`;class et extends oe{static get NAME(){return"alert"}close(){if(X.trigger(this._element,dt).defaultPrevented)return;this._element.classList.remove("show");const f=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,f)}_destroyElement(){this._element.remove(),X.trigger(this._element,ht),this.dispose()}static jQueryInterface(f){return this.each(function(){const O=et.getOrCreateInstance(this);if(typeof f=="string"){if(O[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);O[f](this)}})}}ye(et,"close"),y(et);const je='[data-bs-toggle="button"]';class ot extends oe{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(f){return this.each(function(){const O=ot.getOrCreateInstance(this);f==="toggle"&&O[f]()})}}X.on(document,"click.bs.button.data-api",je,Y=>{Y.preventDefault();const f=Y.target.closest(je);ot.getOrCreateInstance(f).toggle()}),y(ot);const Ft=".bs.swipe",Ot=`touchstart${Ft}`,Yt=`touchmove${Ft}`,Bt=`touchend${Ft}`,Rt=`pointerdown${Ft}`,Xt=`pointerup${Ft}`,It={endCallback:null,leftCallback:null,rightCallback:null},ni={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Gt extends N{constructor(f,O){super(),this._element=f,f&&Gt.isSupported()&&(this._config=this._getConfig(O),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return It}static get DefaultType(){return ni}static get NAME(){return"swipe"}dispose(){X.off(this._element,Ft)}_start(f){this._supportPointerEvents?this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX):this._deltaX=f.touches[0].clientX}_end(f){this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX-this._deltaX),this._handleSwipe(),A(this._config.endCallback)}_move(f){this._deltaX=f.touches&&f.touches.length>1?0:f.touches[0].clientX-this._deltaX}_handleSwipe(){const f=Math.abs(this._deltaX);if(f<=40)return;const O=f/this._deltaX;this._deltaX=0,O&&A(O>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(X.on(this._element,Rt,f=>this._start(f)),X.on(this._element,Xt,f=>this._end(f)),this._element.classList.add("pointer-event")):(X.on(this._element,Ot,f=>this._start(f)),X.on(this._element,Yt,f=>this._move(f)),X.on(this._element,Bt,f=>this._end(f)))}_eventIsPointerPenTouch(f){return this._supportPointerEvents&&(f.pointerType==="pen"||f.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const bt=".bs.carousel",oi=".data-api",kt="next",Wt="prev",tt="left",ut="right",vs=`slide${bt}`,Ai=`slid${bt}`,es=`keydown${bt}`,Ls=`mouseenter${bt}`,Vt=`mouseleave${bt}`,ji=`dragstart${bt}`,ai=`load${bt}${oi}`,$i=`click${bt}${oi}`,G="carousel",K="active",re=".active",le=".carousel-item",Ee=re+le,_e={ArrowLeft:ut,ArrowRight:tt},ke={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},pe={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class we extends oe{constructor(f,O){super(f,O),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ae.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===G&&this.cycle()}static get Default(){return ke}static get DefaultType(){return pe}static get NAME(){return"carousel"}next(){this._slide(kt)}nextWhenVisible(){!document.hidden&&E(this._element)&&this.next()}prev(){this._slide(Wt)}pause(){this._isSliding&&C(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?X.one(this._element,Ai,()=>this.cycle()):this.cycle())}to(f){const O=this._getItems();if(f>O.length-1||f<0)return;if(this._isSliding)return void X.one(this._element,Ai,()=>this.to(f));const q=this._getItemIndex(this._getActive());if(q===f)return;const de=f>q?kt:Wt;this._slide(de,O[f])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(f){return f.defaultInterval=f.interval,f}_addEventListeners(){this._config.keyboard&&X.on(this._element,es,f=>this._keydown(f)),this._config.pause==="hover"&&(X.on(this._element,Ls,()=>this.pause()),X.on(this._element,Vt,()=>this._maybeEnableCycle())),this._config.touch&&Gt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const O of ae.find(".carousel-item img",this._element))X.on(O,ji,q=>q.preventDefault());const f={leftCallback:()=>this._slide(this._directionToOrder(tt)),rightCallback:()=>this._slide(this._directionToOrder(ut)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Gt(this._element,f)}_keydown(f){if(/input|textarea/i.test(f.target.tagName))return;const O=_e[f.key];O&&(f.preventDefault(),this._slide(this._directionToOrder(O)))}_getItemIndex(f){return this._getItems().indexOf(f)}_setActiveIndicatorElement(f){if(!this._indicatorsElement)return;const O=ae.findOne(re,this._indicatorsElement);O.classList.remove(K),O.removeAttribute("aria-current");const q=ae.findOne(`[data-bs-slide-to="${f}"]`,this._indicatorsElement);q&&(q.classList.add(K),q.setAttribute("aria-current","true"))}_updateInterval(){const f=this._activeElement||this._getActive();if(!f)return;const O=Number.parseInt(f.getAttribute("data-bs-interval"),10);this._config.interval=O||this._config.defaultInterval}_slide(f,O=null){if(this._isSliding)return;const q=this._getActive(),de=f===kt,xe=O||R(this._getItems(),q,de,this._config.wrap);if(xe===q)return;const Re=this._getItemIndex(xe),Qe=ci=>X.trigger(this._element,ci,{relatedTarget:xe,direction:this._orderToDirection(f),from:this._getItemIndex(q),to:Re});if(Qe(vs).defaultPrevented||!q||!xe)return;const St=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Re),this._activeElement=xe;const xt=de?"carousel-item-start":"carousel-item-end",Ct=de?"carousel-item-next":"carousel-item-prev";xe.classList.add(Ct),l(xe),q.classList.add(xt),xe.classList.add(xt),this._queueCallback(()=>{xe.classList.remove(xt,Ct),xe.classList.add(K),q.classList.remove(K,Ct,xt),this._isSliding=!1,Qe(Ai)},q,this._isAnimated()),St&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return ae.findOne(Ee,this._element)}_getItems(){return ae.find(le,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(f){return d()?f===tt?Wt:kt:f===tt?kt:Wt}_orderToDirection(f){return d()?f===Wt?tt:ut:f===Wt?ut:tt}static jQueryInterface(f){return this.each(function(){const O=we.getOrCreateInstance(this,f);if(typeof f!="number"){if(typeof f=="string"){if(O[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);O[f]()}}else O.to(f)})}}X.on(document,$i,"[data-bs-slide], [data-bs-slide-to]",function(Y){const f=ae.getElementFromSelector(this);if(!f||!f.classList.contains(G))return;Y.preventDefault();const O=we.getOrCreateInstance(f),q=this.getAttribute("data-bs-slide-to");return q?(O.to(q),void O._maybeEnableCycle()):ie.getDataAttribute(this,"slide")==="next"?(O.next(),void O._maybeEnableCycle()):(O.prev(),void O._maybeEnableCycle())}),X.on(window,ai,()=>{const Y=ae.find('[data-bs-ride="carousel"]');for(const f of Y)we.getOrCreateInstance(f)}),y(we);const Fe=".bs.collapse",Ie=`show${Fe}`,Pe=`shown${Fe}`,at=`hide${Fe}`,qe=`hidden${Fe}`,Je=`click${Fe}.data-api`,Ze="show",$e="collapse",ft="collapsing",pt=`:scope .${$e} .${$e}`,st='[data-bs-toggle="collapse"]',rt={parent:null,toggle:!0},Xe={parent:"(null|element)",toggle:"boolean"};class Ue extends oe{constructor(f,O){super(f,O),this._isTransitioning=!1,this._triggerArray=[];const q=ae.find(st);for(const de of q){const xe=ae.getSelectorFromElement(de),Re=ae.find(xe).filter(Qe=>Qe===this._element);xe!==null&&Re.length&&this._triggerArray.push(de)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return rt}static get DefaultType(){return Xe}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let f=[];if(this._config.parent&&(f=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(de=>de!==this._element).map(de=>Ue.getOrCreateInstance(de,{toggle:!1}))),f.length&&f[0]._isTransitioning||X.trigger(this._element,Ie).defaultPrevented)return;for(const de of f)de.hide();const O=this._getDimension();this._element.classList.remove($e),this._element.classList.add(ft),this._element.style[O]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const q=`scroll${O[0].toUpperCase()+O.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ft),this._element.classList.add($e,Ze),this._element.style[O]="",X.trigger(this._element,Pe)},this._element,!0),this._element.style[O]=`${this._element[q]}px`}hide(){if(this._isTransitioning||!this._isShown()||X.trigger(this._element,at).defaultPrevented)return;const f=this._getDimension();this._element.style[f]=`${this._element.getBoundingClientRect()[f]}px`,l(this._element),this._element.classList.add(ft),this._element.classList.remove($e,Ze);for(const O of this._triggerArray){const q=ae.getElementFromSelector(O);q&&!this._isShown(q)&&this._addAriaAndCollapsedClass([O],!1)}this._isTransitioning=!0,this._element.style[f]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ft),this._element.classList.add($e),X.trigger(this._element,qe)},this._element,!0)}_isShown(f=this._element){return f.classList.contains(Ze)}_configAfterMerge(f){return f.toggle=!!f.toggle,f.parent=v(f.parent),f}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const f=this._getFirstLevelChildren(st);for(const O of f){const q=ae.getElementFromSelector(O);q&&this._addAriaAndCollapsedClass([O],this._isShown(q))}}_getFirstLevelChildren(f){const O=ae.find(pt,this._config.parent);return ae.find(f,this._config.parent).filter(q=>!O.includes(q))}_addAriaAndCollapsedClass(f,O){if(f.length)for(const q of f)q.classList.toggle("collapsed",!O),q.setAttribute("aria-expanded",O)}static jQueryInterface(f){const O={};return typeof f=="string"&&/show|hide/.test(f)&&(O.toggle=!1),this.each(function(){const q=Ue.getOrCreateInstance(this,O);if(typeof f=="string"){if(q[f]===void 0)throw new TypeError(`No method named "${f}"`);q[f]()}})}}X.on(document,Je,st,function(Y){(Y.target.tagName==="A"||Y.delegateTarget&&Y.delegateTarget.tagName==="A")&&Y.preventDefault();for(const f of ae.getMultipleElementsFromSelector(this))Ue.getOrCreateInstance(f,{toggle:!1}).toggle()}),y(Ue);const nt="dropdown",Ge=".bs.dropdown",it=".data-api",yt="ArrowUp",Dt="ArrowDown",qt=`hide${Ge}`,Ht=`hidden${Ge}`,jt=`show${Ge}`,$t=`shown${Ge}`,mt=`click${Ge}${it}`,hi=`keydown${Ge}${it}`,vi=`keyup${Ge}${it}`,Jt="show",Mt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ut=`${Mt}.${Jt}`,Et=".dropdown-menu",Zt=d()?"top-end":"top-start",Li=d()?"top-start":"top-end",fi=d()?"bottom-end":"bottom-start",ts=d()?"bottom-start":"bottom-end",Ts=d()?"left-start":"right-start",gt=d()?"right-start":"left-start",is={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},ss={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Pt extends oe{constructor(f,O){super(f,O),this._popper=null,this._parent=this._element.parentNode,this._menu=ae.next(this._element,Et)[0]||ae.prev(this._element,Et)[0]||ae.findOne(Et,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return is}static get DefaultType(){return ss}static get NAME(){return nt}toggle(){return this._isShown()?this.hide():this.show()}show(){if(M(this._element)||this._isShown())return;const f={relatedTarget:this._element};if(!X.trigger(this._element,jt,f).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const O of[].concat(...document.body.children))X.on(O,"mouseover",g);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Jt),this._element.classList.add(Jt),X.trigger(this._element,$t,f)}}hide(){if(M(this._element)||!this._isShown())return;const f={relatedTarget:this._element};this._completeHide(f)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(f){if(!X.trigger(this._element,qt,f).defaultPrevented){if("ontouchstart"in document.documentElement)for(const O of[].concat(...document.body.children))X.off(O,"mouseover",g);this._popper&&this._popper.destroy(),this._menu.classList.remove(Jt),this._element.classList.remove(Jt),this._element.setAttribute("aria-expanded","false"),ie.removeDataAttribute(this._menu,"popper"),X.trigger(this._element,Ht,f)}}_getConfig(f){if(typeof(f=super._getConfig(f)).reference=="object"&&!D(f.reference)&&typeof f.reference.getBoundingClientRect!="function")throw new TypeError(`${nt.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return f}_createPopper(){if(ct===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let f=this._element;this._config.reference==="parent"?f=this._parent:D(this._config.reference)?f=v(this._config.reference):typeof this._config.reference=="object"&&(f=this._config.reference);const O=this._getPopperConfig();this._popper=ct.createPopper(f,this._menu,O)}_isShown(){return this._menu.classList.contains(Jt)}_getPlacement(){const f=this._parent;if(f.classList.contains("dropend"))return Ts;if(f.classList.contains("dropstart"))return gt;if(f.classList.contains("dropup-center"))return"top";if(f.classList.contains("dropdown-center"))return"bottom";const O=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return f.classList.contains("dropup")?O?Li:Zt:O?ts:fi}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:f}=this._config;return typeof f=="string"?f.split(",").map(O=>Number.parseInt(O,10)):typeof f=="function"?O=>f(O,this._element):f}_getPopperConfig(){const f={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ie.setDataAttribute(this._menu,"popper","static"),f.modifiers=[{name:"applyStyles",enabled:!1}]),{...f,...A(this._config.popperConfig,[f])}}_selectMenuItem({key:f,target:O}){const q=ae.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(de=>E(de));q.length&&R(q,O,f===Dt,!q.includes(O)).focus()}static jQueryInterface(f){return this.each(function(){const O=Pt.getOrCreateInstance(this,f);if(typeof f=="string"){if(O[f]===void 0)throw new TypeError(`No method named "${f}"`);O[f]()}})}static clearMenus(f){if(f.button===2||f.type==="keyup"&&f.key!=="Tab")return;const O=ae.find(Ut);for(const q of O){const de=Pt.getInstance(q);if(!de||de._config.autoClose===!1)continue;const xe=f.composedPath(),Re=xe.includes(de._menu);if(xe.includes(de._element)||de._config.autoClose==="inside"&&!Re||de._config.autoClose==="outside"&&Re||de._menu.contains(f.target)&&(f.type==="keyup"&&f.key==="Tab"||/input|select|option|textarea|form/i.test(f.target.tagName)))continue;const Qe={relatedTarget:de._element};f.type==="click"&&(Qe.clickEvent=f),de._completeHide(Qe)}}static dataApiKeydownHandler(f){const O=/input|textarea/i.test(f.target.tagName),q=f.key==="Escape",de=[yt,Dt].includes(f.key);if(!de&&!q||O&&!q)return;f.preventDefault();const xe=this.matches(Mt)?this:ae.prev(this,Mt)[0]||ae.next(this,Mt)[0]||ae.findOne(Mt,f.delegateTarget.parentNode),Re=Pt.getOrCreateInstance(xe);if(de)return f.stopPropagation(),Re.show(),void Re._selectMenuItem(f);Re._isShown()&&(f.stopPropagation(),Re.hide(),xe.focus())}}X.on(document,hi,Mt,Pt.dataApiKeydownHandler),X.on(document,hi,Et,Pt.dataApiKeydownHandler),X.on(document,mt,Pt.clearMenus),X.on(document,vi,Pt.clearMenus),X.on(document,mt,Mt,function(Y){Y.preventDefault(),Pt.getOrCreateInstance(this).toggle()}),y(Pt);const Ui="backdrop",rs="show",Os=`mousedown.bs.${Ui}`,_i={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Rs={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class li extends N{constructor(f){super(),this._config=this._getConfig(f),this._isAppended=!1,this._element=null}static get Default(){return _i}static get DefaultType(){return Rs}static get NAME(){return Ui}show(f){if(!this._config.isVisible)return void A(f);this._append();const O=this._getElement();this._config.isAnimated&&l(O),O.classList.add(rs),this._emulateAnimation(()=>{A(f)})}hide(f){this._config.isVisible?(this._getElement().classList.remove(rs),this._emulateAnimation(()=>{this.dispose(),A(f)})):A(f)}dispose(){this._isAppended&&(X.off(this._element,Os),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const f=document.createElement("div");f.className=this._config.className,this._config.isAnimated&&f.classList.add("fade"),this._element=f}return this._element}_configAfterMerge(f){return f.rootElement=v(f.rootElement),f}_append(){if(this._isAppended)return;const f=this._getElement();this._config.rootElement.append(f),X.on(f,Os,()=>{A(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(f){L(f,this._getElement(),this._config.isAnimated)}}const bi=".bs.focustrap",pi=`focusin${bi}`,Ti=`keydown.tab${bi}`,ns="backward",os={autofocus:!0,trapElement:null},as={autofocus:"boolean",trapElement:"element"};class yi extends N{constructor(f){super(),this._config=this._getConfig(f),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return os}static get DefaultType(){return as}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),X.off(document,bi),X.on(document,pi,f=>this._handleFocusin(f)),X.on(document,Ti,f=>this._handleKeydown(f)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,X.off(document,bi))}_handleFocusin(f){const{trapElement:O}=this._config;if(f.target===document||f.target===O||O.contains(f.target))return;const q=ae.focusableChildren(O);q.length===0?O.focus():this._lastTabNavDirection===ns?q[q.length-1].focus():q[0].focus()}_handleKeydown(f){f.key==="Tab"&&(this._lastTabNavDirection=f.shiftKey?ns:"forward")}}const hs=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Qt=".sticky-top",Si="padding-right",Vi="margin-right";class qi{constructor(){this._element=document.body}getWidth(){const f=document.documentElement.clientWidth;return Math.abs(window.innerWidth-f)}hide(){const f=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Si,O=>O+f),this._setElementAttributes(hs,Si,O=>O+f),this._setElementAttributes(Qt,Vi,O=>O-f)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Si),this._resetElementAttributes(hs,Si),this._resetElementAttributes(Qt,Vi)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(f,O,q){const de=this.getWidth();this._applyManipulationCallback(f,xe=>{if(xe!==this._element&&window.innerWidth>xe.clientWidth+de)return;this._saveInitialAttribute(xe,O);const Re=window.getComputedStyle(xe).getPropertyValue(O);xe.style.setProperty(O,`${q(Number.parseFloat(Re))}px`)})}_saveInitialAttribute(f,O){const q=f.style.getPropertyValue(O);q&&ie.setDataAttribute(f,O,q)}_resetElementAttributes(f,O){this._applyManipulationCallback(f,q=>{const de=ie.getDataAttribute(q,O);de!==null?(ie.removeDataAttribute(q,O),q.style.setProperty(O,de)):q.style.removeProperty(O)})}_applyManipulationCallback(f,O){if(D(f))O(f);else for(const q of ae.find(f,this._element))O(q)}}const vt=".bs.modal",Oi=`hide${vt}`,bs=`hidePrevented${vt}`,Ks=`hidden${vt}`,Ys=`show${vt}`,Qr=`shown${vt}`,en=`resize${vt}`,Ri=`click.dismiss${vt}`,ls=`mousedown.dismiss${vt}`,Ps=`keydown.dismiss${vt}`,Ki=`click${vt}.data-api`,Bs="modal-open",pr="show",ys="modal-static",gr={backdrop:!0,focus:!0,keyboard:!0},mr={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Yi extends oe{constructor(f,O){super(f,O),this._dialog=ae.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new qi,this._addEventListeners()}static get Default(){return gr}static get DefaultType(){return mr}static get NAME(){return"modal"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||this._isTransitioning||X.trigger(this._element,Ys,{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Bs),this._adjustDialog(),this._backdrop.show(()=>this._showElement(f)))}hide(){this._isShown&&!this._isTransitioning&&(X.trigger(this._element,Oi).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(pr),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){X.off(window,vt),X.off(this._dialog,vt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new li({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new yi({trapElement:this._element})}_showElement(f){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const O=ae.findOne(".modal-body",this._dialog);O&&(O.scrollTop=0),l(this._element),this._element.classList.add(pr),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,X.trigger(this._element,Qr,{relatedTarget:f})},this._dialog,this._isAnimated())}_addEventListeners(){X.on(this._element,Ps,f=>{f.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),X.on(window,en,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),X.on(this._element,ls,f=>{X.one(this._element,Ri,O=>{this._element===f.target&&this._element===O.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Bs),this._resetAdjustments(),this._scrollBar.reset(),X.trigger(this._element,Ks)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(X.trigger(this._element,bs).defaultPrevented)return;const f=this._element.scrollHeight>document.documentElement.clientHeight,O=this._element.style.overflowY;O==="hidden"||this._element.classList.contains(ys)||(f||(this._element.style.overflowY="hidden"),this._element.classList.add(ys),this._queueCallback(()=>{this._element.classList.remove(ys),this._queueCallback(()=>{this._element.style.overflowY=O},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const f=this._element.scrollHeight>document.documentElement.clientHeight,O=this._scrollBar.getWidth(),q=O>0;if(q&&!f){const de=d()?"paddingLeft":"paddingRight";this._element.style[de]=`${O}px`}if(!q&&f){const de=d()?"paddingRight":"paddingLeft";this._element.style[de]=`${O}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(f,O){return this.each(function(){const q=Yi.getOrCreateInstance(this,f);if(typeof f=="string"){if(q[f]===void 0)throw new TypeError(`No method named "${f}"`);q[f](O)}})}}X.on(document,Ki,'[data-bs-toggle="modal"]',function(Y){const f=ae.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&Y.preventDefault(),X.one(f,Ys,q=>{q.defaultPrevented||X.one(f,Ks,()=>{E(this)&&this.focus()})});const O=ae.findOne(".modal.show");O&&Yi.getInstance(O).hide(),Yi.getOrCreateInstance(f).toggle(this)}),ye(Yi),y(Yi);const wi=".bs.offcanvas",Is=".data-api",vr=`load${wi}${Is}`,Xs="show",Gs="showing",Hs="hiding",br=".offcanvas.show",cs=`show${wi}`,yr=`shown${wi}`,Sr=`hide${wi}`,Js=`hidePrevented${wi}`,Ss=`hidden${wi}`,wr=`resize${wi}`,Fs=`click${wi}${Is}`,xr=`keydown.dismiss${wi}`,Cr={backdrop:!0,keyboard:!0,scroll:!1},ds={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Nt extends oe{constructor(f,O){super(f,O),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Cr}static get DefaultType(){return ds}static get NAME(){return"offcanvas"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||X.trigger(this._element,cs,{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new qi().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Gs),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Xs),this._element.classList.remove(Gs),X.trigger(this._element,yr,{relatedTarget:f})},this._element,!0))}hide(){this._isShown&&(X.trigger(this._element,Sr).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Hs),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Xs,Hs),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new qi().reset(),X.trigger(this._element,Ss)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const f=!!this._config.backdrop;return new li({className:"offcanvas-backdrop",isVisible:f,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:f?()=>{this._config.backdrop!=="static"?this.hide():X.trigger(this._element,Js)}:null})}_initializeFocusTrap(){return new yi({trapElement:this._element})}_addEventListeners(){X.on(this._element,xr,f=>{f.key==="Escape"&&(this._config.keyboard?this.hide():X.trigger(this._element,Js))})}static jQueryInterface(f){return this.each(function(){const O=Nt.getOrCreateInstance(this,f);if(typeof f=="string"){if(O[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);O[f](this)}})}}X.on(document,Fs,'[data-bs-toggle="offcanvas"]',function(Y){const f=ae.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&Y.preventDefault(),M(this))return;X.one(f,Ss,()=>{E(this)&&this.focus()});const O=ae.findOne(br);O&&O!==f&&Nt.getInstance(O).hide(),Nt.getOrCreateInstance(f).toggle(this)}),X.on(window,vr,()=>{for(const Y of ae.find(br))Nt.getOrCreateInstance(Y).show()}),X.on(window,wr,()=>{for(const Y of ae.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(Y).position!=="fixed"&&Nt.getOrCreateInstance(Y).hide()}),ye(Nt),y(Nt);const Zs={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Er=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),tn=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,sn=(Y,f)=>{const O=Y.nodeName.toLowerCase();return f.includes(O)?!Er.has(O)||!!tn.test(Y.nodeValue):f.filter(q=>q instanceof RegExp).some(q=>q.test(O))},kr={allowList:Zs,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},rn={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ns={entry:"(string|element|function|null)",selector:"(string|element)"};class Qs extends N{constructor(f){super(),this._config=this._getConfig(f)}static get Default(){return kr}static get DefaultType(){return rn}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(f=>this._resolvePossibleFunction(f)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(f){return this._checkContent(f),this._config.content={...this._config.content,...f},this}toHtml(){const f=document.createElement("div");f.innerHTML=this._maybeSanitize(this._config.template);for(const[de,xe]of Object.entries(this._config.content))this._setContent(f,xe,de);const O=f.children[0],q=this._resolvePossibleFunction(this._config.extraClass);return q&&O.classList.add(...q.split(" ")),O}_typeCheckConfig(f){super._typeCheckConfig(f),this._checkContent(f.content)}_checkContent(f){for(const[O,q]of Object.entries(f))super._typeCheckConfig({selector:O,entry:q},Ns)}_setContent(f,O,q){const de=ae.findOne(q,f);de&&((O=this._resolvePossibleFunction(O))?D(O)?this._putElementInTemplate(v(O),de):this._config.html?de.innerHTML=this._maybeSanitize(O):de.textContent=O:de.remove())}_maybeSanitize(f){return this._config.sanitize?function(O,q,de){if(!O.length)return O;if(de&&typeof de=="function")return de(O);const xe=new window.DOMParser().parseFromString(O,"text/html"),Re=[].concat(...xe.body.querySelectorAll("*"));for(const Qe of Re){const St=Qe.nodeName.toLowerCase();if(!Object.keys(q).includes(St)){Qe.remove();continue}const xt=[].concat(...Qe.attributes),Ct=[].concat(q["*"]||[],q[St]||[]);for(const ci of xt)sn(ci,Ct)||Qe.removeAttribute(ci.nodeName)}return xe.body.innerHTML}(f,this._config.allowList,this._config.sanitizeFn):f}_resolvePossibleFunction(f){return A(f,[this])}_putElementInTemplate(f,O){if(this._config.html)return O.innerHTML="",void O.append(f);O.textContent=f.textContent}}const Pi=new Set(["sanitize","allowList","sanitizeFn"]),At="fade",wt="show",Xi=".modal",er="hide.bs.modal",Kt="hover",xi="focus",tr={AUTO:"auto",TOP:"top",RIGHT:d()?"left":"right",BOTTOM:"bottom",LEFT:d()?"right":"left"},ir={allowList:Zs,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Dr={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Bi extends oe{constructor(f,O){if(ct===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(f,O),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ir}static get DefaultType(){return Dr}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),X.off(this._element.closest(Xi),er,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const f=X.trigger(this._element,this.constructor.eventName("show")),O=(w(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(f.defaultPrevented||!O)return;this._disposePopper();const q=this._getTipElement();this._element.setAttribute("aria-describedby",q.getAttribute("id"));const{container:de}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(de.append(q),X.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(q),q.classList.add(wt),"ontouchstart"in document.documentElement)for(const xe of[].concat(...document.body.children))X.on(xe,"mouseover",g);this._queueCallback(()=>{X.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!X.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(wt),"ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))X.off(f,"mouseover",g);this._activeTrigger.click=!1,this._activeTrigger[xi]=!1,this._activeTrigger[Kt]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),X.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(f){const O=this._getTemplateFactory(f).toHtml();if(!O)return null;O.classList.remove(At,wt),O.classList.add(`bs-${this.constructor.NAME}-auto`);const q=(de=>{do de+=Math.floor(1e6*Math.random());while(document.getElementById(de));return de})(this.constructor.NAME).toString();return O.setAttribute("id",q),this._isAnimated()&&O.classList.add(At),O}setContent(f){this._newContent=f,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(f){return this._templateFactory?this._templateFactory.changeContent(f):this._templateFactory=new Qs({...this._config,content:f,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(f){return this.constructor.getOrCreateInstance(f.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(At)}_isShown(){return this.tip&&this.tip.classList.contains(wt)}_createPopper(f){const O=A(this._config.placement,[this,f,this._element]),q=tr[O.toUpperCase()];return ct.createPopper(this._element,f,this._getPopperConfig(q))}_getOffset(){const{offset:f}=this._config;return typeof f=="string"?f.split(",").map(O=>Number.parseInt(O,10)):typeof f=="function"?O=>f(O,this._element):f}_resolvePossibleFunction(f){return A(f,[this._element])}_getPopperConfig(f){const O={placement:f,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:q=>{this._getTipElement().setAttribute("data-popper-placement",q.state.placement)}}]};return{...O,...A(this._config.popperConfig,[O])}}_setListeners(){const f=this._config.trigger.split(" ");for(const O of f)if(O==="click")X.on(this._element,this.constructor.eventName("click"),this._config.selector,q=>{this._initializeOnDelegatedTarget(q).toggle()});else if(O!=="manual"){const q=O===Kt?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),de=O===Kt?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");X.on(this._element,q,this._config.selector,xe=>{const Re=this._initializeOnDelegatedTarget(xe);Re._activeTrigger[xe.type==="focusin"?xi:Kt]=!0,Re._enter()}),X.on(this._element,de,this._config.selector,xe=>{const Re=this._initializeOnDelegatedTarget(xe);Re._activeTrigger[xe.type==="focusout"?xi:Kt]=Re._element.contains(xe.relatedTarget),Re._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},X.on(this._element.closest(Xi),er,this._hideModalHandler)}_fixTitle(){const f=this._element.getAttribute("title");f&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",f),this._element.setAttribute("data-bs-original-title",f),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(f,O){clearTimeout(this._timeout),this._timeout=setTimeout(f,O)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(f){const O=ie.getDataAttributes(this._element);for(const q of Object.keys(O))Pi.has(q)&&delete O[q];return f={...O,...typeof f=="object"&&f?f:{}},f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f.container=f.container===!1?document.body:v(f.container),typeof f.delay=="number"&&(f.delay={show:f.delay,hide:f.delay}),typeof f.title=="number"&&(f.title=f.title.toString()),typeof f.content=="number"&&(f.content=f.content.toString()),f}_getDelegateConfig(){const f={};for(const[O,q]of Object.entries(this._config))this.constructor.Default[O]!==q&&(f[O]=q);return f.selector=!1,f.trigger="manual",f}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(f){return this.each(function(){const O=Bi.getOrCreateInstance(this,f);if(typeof f=="string"){if(O[f]===void 0)throw new TypeError(`No method named "${f}"`);O[f]()}})}}y(Bi);const sr={...Bi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},rr={...Bi.DefaultType,content:"(null|string|element|function)"};class ws extends Bi{static get Default(){return sr}static get DefaultType(){return rr}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(f){return this.each(function(){const O=ws.getOrCreateInstance(this,f);if(typeof f=="string"){if(O[f]===void 0)throw new TypeError(`No method named "${f}"`);O[f]()}})}}y(ws);const Ws=".bs.scrollspy",Mr=`activate${Ws}`,Ar=`click${Ws}`,nn=`load${Ws}.data-api`,us="active",Gi="[href]",zs=".nav-link",on=`${zs}, .nav-item > ${zs}, .list-group-item`,nr={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Lr={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class fs extends oe{constructor(f,O){super(f,O),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return nr}static get DefaultType(){return Lr}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const f of this._observableSections.values())this._observer.observe(f)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(f){return f.target=v(f.target)||document.body,f.rootMargin=f.offset?`${f.offset}px 0px -30%`:f.rootMargin,typeof f.threshold=="string"&&(f.threshold=f.threshold.split(",").map(O=>Number.parseFloat(O))),f}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(X.off(this._config.target,Ar),X.on(this._config.target,Ar,Gi,f=>{const O=this._observableSections.get(f.target.hash);if(O){f.preventDefault();const q=this._rootElement||window,de=O.offsetTop-this._element.offsetTop;if(q.scrollTo)return void q.scrollTo({top:de,behavior:"smooth"});q.scrollTop=de}}))}_getNewObserver(){const f={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(O=>this._observerCallback(O),f)}_observerCallback(f){const O=Re=>this._targetLinks.get(`#${Re.target.id}`),q=Re=>{this._previousScrollData.visibleEntryTop=Re.target.offsetTop,this._process(O(Re))},de=(this._rootElement||document.documentElement).scrollTop,xe=de>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=de;for(const Re of f){if(!Re.isIntersecting){this._activeTarget=null,this._clearActiveClass(O(Re));continue}const Qe=Re.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(xe&&Qe){if(q(Re),!de)return}else xe||Qe||q(Re)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const f=ae.find(Gi,this._config.target);for(const O of f){if(!O.hash||M(O))continue;const q=ae.findOne(decodeURI(O.hash),this._element);E(q)&&(this._targetLinks.set(decodeURI(O.hash),O),this._observableSections.set(O.hash,q))}}_process(f){this._activeTarget!==f&&(this._clearActiveClass(this._config.target),this._activeTarget=f,f.classList.add(us),this._activateParents(f),X.trigger(this._element,Mr,{relatedTarget:f}))}_activateParents(f){if(f.classList.contains("dropdown-item"))ae.findOne(".dropdown-toggle",f.closest(".dropdown")).classList.add(us);else for(const O of ae.parents(f,".nav, .list-group"))for(const q of ae.prev(O,on))q.classList.add(us)}_clearActiveClass(f){f.classList.remove(us);const O=ae.find(`${Gi}.${us}`,f);for(const q of O)q.classList.remove(us)}static jQueryInterface(f){return this.each(function(){const O=fs.getOrCreateInstance(this,f);if(typeof f=="string"){if(O[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);O[f]()}})}}X.on(window,nn,()=>{for(const Y of ae.find('[data-bs-spy="scroll"]'))fs.getOrCreateInstance(Y)}),y(fs);const Ii=".bs.tab",xs=`hide${Ii}`,Tr=`hidden${Ii}`,Cs=`show${Ii}`,an=`shown${Ii}`,Or=`click${Ii}`,Rr=`keydown${Ii}`,hn=`load${Ii}`,ln="ArrowLeft",_s="ArrowRight",js="ArrowUp",or="ArrowDown",Lt="Home",$s="End",Hi="active",Es="fade",ar="show",hr=".dropdown-toggle",Us=`:not(${hr})`,Pr='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ps=`.nav-link${Us}, .list-group-item${Us}, [role="tab"]${Us}, ${Pr}`,cn=`.${Hi}[data-bs-toggle="tab"], .${Hi}[data-bs-toggle="pill"], .${Hi}[data-bs-toggle="list"]`;class Ji extends oe{constructor(f){super(f),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),X.on(this._element,Rr,O=>this._keydown(O)))}static get NAME(){return"tab"}show(){const f=this._element;if(this._elemIsActive(f))return;const O=this._getActiveElem(),q=O?X.trigger(O,xs,{relatedTarget:f}):null;X.trigger(f,Cs,{relatedTarget:O}).defaultPrevented||q&&q.defaultPrevented||(this._deactivate(O,f),this._activate(f,O))}_activate(f,O){f&&(f.classList.add(Hi),this._activate(ae.getElementFromSelector(f)),this._queueCallback(()=>{f.getAttribute("role")==="tab"?(f.removeAttribute("tabindex"),f.setAttribute("aria-selected",!0),this._toggleDropDown(f,!0),X.trigger(f,an,{relatedTarget:O})):f.classList.add(ar)},f,f.classList.contains(Es)))}_deactivate(f,O){f&&(f.classList.remove(Hi),f.blur(),this._deactivate(ae.getElementFromSelector(f)),this._queueCallback(()=>{f.getAttribute("role")==="tab"?(f.setAttribute("aria-selected",!1),f.setAttribute("tabindex","-1"),this._toggleDropDown(f,!1),X.trigger(f,Tr,{relatedTarget:O})):f.classList.remove(ar)},f,f.classList.contains(Es)))}_keydown(f){if(![ln,_s,js,or,Lt,$s].includes(f.key))return;f.stopPropagation(),f.preventDefault();const O=this._getChildren().filter(de=>!M(de));let q;if([Lt,$s].includes(f.key))q=O[f.key===Lt?0:O.length-1];else{const de=[_s,or].includes(f.key);q=R(O,f.target,de,!0)}q&&(q.focus({preventScroll:!0}),Ji.getOrCreateInstance(q).show())}_getChildren(){return ae.find(ps,this._parent)}_getActiveElem(){return this._getChildren().find(f=>this._elemIsActive(f))||null}_setInitialAttributes(f,O){this._setAttributeIfNotExists(f,"role","tablist");for(const q of O)this._setInitialAttributesOnChild(q)}_setInitialAttributesOnChild(f){f=this._getInnerElement(f);const O=this._elemIsActive(f),q=this._getOuterElement(f);f.setAttribute("aria-selected",O),q!==f&&this._setAttributeIfNotExists(q,"role","presentation"),O||f.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(f,"role","tab"),this._setInitialAttributesOnTargetPanel(f)}_setInitialAttributesOnTargetPanel(f){const O=ae.getElementFromSelector(f);O&&(this._setAttributeIfNotExists(O,"role","tabpanel"),f.id&&this._setAttributeIfNotExists(O,"aria-labelledby",`${f.id}`))}_toggleDropDown(f,O){const q=this._getOuterElement(f);if(!q.classList.contains("dropdown"))return;const de=(xe,Re)=>{const Qe=ae.findOne(xe,q);Qe&&Qe.classList.toggle(Re,O)};de(hr,Hi),de(".dropdown-menu",ar),q.setAttribute("aria-expanded",O)}_setAttributeIfNotExists(f,O,q){f.hasAttribute(O)||f.setAttribute(O,q)}_elemIsActive(f){return f.classList.contains(Hi)}_getInnerElement(f){return f.matches(ps)?f:ae.findOne(ps,f)}_getOuterElement(f){return f.closest(".nav-item, .list-group-item")||f}static jQueryInterface(f){return this.each(function(){const O=Ji.getOrCreateInstance(this);if(typeof f=="string"){if(O[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);O[f]()}})}}X.on(document,Or,Pr,function(Y){["A","AREA"].includes(this.tagName)&&Y.preventDefault(),M(this)||Ji.getOrCreateInstance(this).show()}),X.on(window,hn,()=>{for(const Y of ae.find(cn))Ji.getOrCreateInstance(Y)}),y(Ji);const ei=".bs.toast",Br=`mouseover${ei}`,Ir=`mouseout${ei}`,dn=`focusin${ei}`,lr=`focusout${ei}`,un=`hide${ei}`,Hr=`hidden${ei}`,Fr=`show${ei}`,Nr=`shown${ei}`,cr="hide",Vs="show",ks="showing",dr={animation:"boolean",autohide:"boolean",delay:"number"},Wr={animation:!0,autohide:!0,delay:5e3};class gs extends oe{constructor(f,O){super(f,O),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Wr}static get DefaultType(){return dr}static get NAME(){return"toast"}show(){X.trigger(this._element,Fr).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(cr),l(this._element),this._element.classList.add(Vs,ks),this._queueCallback(()=>{this._element.classList.remove(ks),X.trigger(this._element,Nr),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(X.trigger(this._element,un).defaultPrevented||(this._element.classList.add(ks),this._queueCallback(()=>{this._element.classList.add(cr),this._element.classList.remove(ks,Vs),X.trigger(this._element,Hr)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Vs),super.dispose()}isShown(){return this._element.classList.contains(Vs)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(f,O){switch(f.type){case"mouseover":case"mouseout":this._hasMouseInteraction=O;break;case"focusin":case"focusout":this._hasKeyboardInteraction=O}if(O)return void this._clearTimeout();const q=f.relatedTarget;this._element===q||this._element.contains(q)||this._maybeScheduleHide()}_setListeners(){X.on(this._element,Br,f=>this._onInteraction(f,!0)),X.on(this._element,Ir,f=>this._onInteraction(f,!1)),X.on(this._element,dn,f=>this._onInteraction(f,!0)),X.on(this._element,lr,f=>this._onInteraction(f,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(f){return this.each(function(){const O=gs.getOrCreateInstance(this,f);if(typeof f=="string"){if(O[f]===void 0)throw new TypeError(`No method named "${f}"`);O[f](this)}})}}return ye(gs),y(gs),{Alert:et,Button:ot,Carousel:we,Collapse:Ue,Dropdown:Pt,Modal:Yi,Offcanvas:Nt,Popover:ws,ScrollSpy:fs,Tab:Ji,Toast:gs,Tooltip:Bi}});/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */(function(Ke,We){typeof exports=="object"&&typeof module<"u"?module.exports=We():typeof define=="function"&&define.amd?define(We):(Ke=typeof globalThis<"u"?globalThis:Ke||self).Chart=We()})(this,function(){"use strict";var Ke=Object.freeze({__proto__:null,get Colors(){return pa},get Decimation(){return ga},get Filler(){return xa},get Legend(){return Ca},get SubTitle(){return ka},get Title(){return Ea},get Tooltip(){return Aa}});function We(){}const ct=(()=>{let i=0;return()=>i++})();function Oe(i){return i==null}function ne(i){if(Array.isArray&&Array.isArray(i))return!0;const e=Object.prototype.toString.call(i);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function p(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function m(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function C(i,e){return m(i)?i:e}function D(i,e){return i===void 0?e:i}const v=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/e,E=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*e:+i;function M(i,e,t){if(i&&typeof i.call=="function")return i.apply(t,e)}function w(i,e,t,s){let r,n,o;if(ne(i))if(n=i.length,s)for(r=n-1;r>=0;r--)e.call(t,i[r],r);else for(r=0;r<n;r++)e.call(t,i[r],r);else if(p(i))for(o=Object.keys(i),n=o.length,r=0;r<n;r++)e.call(t,i[o[r]],o[r])}function g(i,e){let t,s,r,n;if(!i||!e||i.length!==e.length)return!1;for(t=0,s=i.length;t<s;++t)if(r=i[t],n=e[t],r.datasetIndex!==n.datasetIndex||r.index!==n.index)return!1;return!0}function l(i){if(ne(i))return i.map(l);if(p(i)){const e=Object.create(null),t=Object.keys(i),s=t.length;let r=0;for(;r<s;++r)e[t[r]]=l(i[t[r]]);return e}return i}function u(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function h(i,e,t,s){if(!u(i))return;const r=e[i],n=t[i];p(r)&&p(n)?d(r,n,s):e[i]=l(n)}function d(i,e,t){const s=ne(e)?e:[e],r=s.length;if(!p(i))return i;const n=(t=t||{}).merger||h;let o;for(let a=0;a<r;++a){if(o=s[a],!p(o))continue;const c=Object.keys(o);for(let _=0,S=c.length;_<S;++_)n(c[_],i,o,t)}return i}function y(i,e){return d(i,e,{merger:A})}function A(i,e,t){if(!u(i))return;const s=e[i],r=t[i];p(s)&&p(r)?y(s,r):Object.prototype.hasOwnProperty.call(e,i)||(e[i]=l(r))}const L={"":i=>i,x:i=>i.x,y:i=>i.y};function R(i){const e=i.split("."),t=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(t.push(s),s="");return t}function x(i,e){return(L[e]||(L[e]=function(s){const r=R(s);return n=>{for(const o of r){if(o==="")break;n=n&&n[o]}return n}}(e)))(i)}function I(i){return i.charAt(0).toUpperCase()+i.slice(1)}const U=i=>i!==void 0,$=i=>typeof i=="function",Z=(i,e)=>{if(i.size!==e.size)return!1;for(const t of i)if(!e.has(t))return!1;return!0};function W(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const se=Math.PI,ce=2*se,ve=ce+se,Se=Number.POSITIVE_INFINITY,ge=se/180,B=se/2,z=se/4,V=2*se/3,J=Math.log10,X=Math.sign;function be(i,e,t){return Math.abs(i-e)<t}function Ne(i){const e=Math.round(i);i=be(i,e,i/1e3)?e:i;const t=Math.pow(10,Math.floor(J(i))),s=i/t;return(s<=1?1:s<=2?2:s<=5?5:10)*t}function ze(i){const e=[],t=Math.sqrt(i);let s;for(s=1;s<t;s++)i%s==0&&(e.push(s),e.push(i/s));return t===(0|t)&&e.push(t),e.sort((r,n)=>r-n).pop(),e}function ie(i){return!isNaN(parseFloat(i))&&isFinite(i)}function N(i,e){const t=Math.round(i);return t-e<=i&&t+e>=i}function oe(i,e,t){let s,r,n;for(s=0,r=i.length;s<r;s++)n=i[s][t],isNaN(n)||(e.min=Math.min(e.min,n),e.max=Math.max(e.max,n))}function ue(i){return i*(se/180)}function ae(i){return i*(180/se)}function ye(i){if(!m(i))return;let e=1,t=0;for(;Math.round(i*e)/e!==i;)e*=10,t++;return t}function Ye(i,e){const t=e.x-i.x,s=e.y-i.y,r=Math.sqrt(t*t+s*s);let n=Math.atan2(s,t);return n<-.5*se&&(n+=ce),{angle:n,distance:r}}function dt(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function ht(i,e){return(i-e+ve)%ce-se}function et(i){return(i%ce+ce)%ce}function je(i,e,t,s){const r=et(i),n=et(e),o=et(t),a=et(n-r),c=et(o-r),_=et(r-n),S=et(r-o);return r===n||r===o||s&&n===o||a>c&&_<S}function ot(i,e,t){return Math.max(e,Math.min(t,i))}function Ft(i){return ot(i,-32768,32767)}function Ot(i,e,t,s=1e-6){return i>=Math.min(e,t)-s&&i<=Math.max(e,t)+s}function Yt(i,e,t){t=t||(o=>i[o]<e);let s,r=i.length-1,n=0;for(;r-n>1;)s=n+r>>1,t(s)?n=s:r=s;return{lo:n,hi:r}}const Bt=(i,e,t,s)=>Yt(i,t,s?r=>{const n=i[r][e];return n<t||n===t&&i[r+1][e]===t}:r=>i[r][e]<t),Rt=(i,e,t)=>Yt(i,t,s=>i[s][e]>=t);function Xt(i,e,t){let s=0,r=i.length;for(;s<r&&i[s]<e;)s++;for(;r>s&&i[r-1]>t;)r--;return s>0||r<i.length?i.slice(s,r):i}const It=["push","pop","shift","splice","unshift"];function ni(i,e){i._chartjs?i._chartjs.listeners.push(e):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),It.forEach(t=>{const s="_onData"+I(t),r=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...n){const o=r.apply(this,n);return i._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...n)}),o}})}))}function Gt(i,e){const t=i._chartjs;if(!t)return;const s=t.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),s.length>0||(It.forEach(n=>{delete i[n]}),delete i._chartjs)}function bt(i){const e=new Set(i);return e.size===i.length?i:Array.from(e)}const oi=typeof window>"u"?function(i){return i()}:window.requestAnimationFrame;function kt(i,e){let t=[],s=!1;return function(...r){t=r,s||(s=!0,oi.call(window,()=>{s=!1,i.apply(e,t)}))}}function Wt(i,e){let t;return function(...s){return e?(clearTimeout(t),t=setTimeout(i,e,s)):i.apply(this,s),e}}const tt=i=>i==="start"?"left":i==="end"?"right":"center",ut=(i,e,t)=>i==="start"?e:i==="end"?t:(e+t)/2,vs=(i,e,t,s)=>i===(s?"left":"right")?t:i==="center"?(e+t)/2:e;function Ai(i,e,t){const s=e.length;let r=0,n=s;if(i._sorted){const{iScale:o,_parsed:a}=i,c=o.axis,{min:_,max:S,minDefined:b,maxDefined:k}=o.getUserBounds();b&&(r=ot(Math.min(Bt(a,c,_).lo,t?s:Bt(e,c,o.getPixelForValue(_)).lo),0,s-1)),n=k?ot(Math.max(Bt(a,o.axis,S,!0).hi+1,t?0:Bt(e,c,o.getPixelForValue(S),!0).hi+1),r,s)-r:s-r}return{start:r,count:n}}function es(i){const{xScale:e,yScale:t,_scaleRanges:s}=i,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!s)return i._scaleRanges=r,!0;const n=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==t.min||s.ymax!==t.max;return Object.assign(s,r),n}class Ls{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,r){const n=t.listeners[r],o=t.duration;n.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(s-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=oi.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const n=s.items;let o,a=n.length-1,c=!1;for(;a>=0;--a)o=n[a],o._active?(o._total>s.duration&&(s.duration=o._total),o.tick(e),c=!0):(n[a]=n[n.length-1],n.pop());c&&(r.draw(),this._notify(r,s,e,"progress")),n.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),t+=n.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Vt=new Ls;/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function ji(i){return i+.5|0}const ai=(i,e,t)=>Math.max(Math.min(i,t),e);function $i(i){return ai(ji(2.55*i),0,255)}function G(i){return ai(ji(255*i),0,255)}function K(i){return ai(ji(i/2.55)/100,0,1)}function re(i){return ai(ji(100*i),0,100)}const le={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ee=[..."0123456789ABCDEF"],_e=i=>Ee[15&i],ke=i=>Ee[(240&i)>>4]+Ee[15&i],pe=i=>(240&i)>>4==(15&i);function we(i){var e=(t=>pe(t.r)&&pe(t.g)&&pe(t.b)&&pe(t.a))(i)?_e:ke;return i?"#"+e(i.r)+e(i.g)+e(i.b)+((t,s)=>t<255?s(t):"")(i.a,e):void 0}const Fe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ie(i,e,t){const s=e*Math.min(t,1-t),r=(n,o=(n+i/30)%12)=>t-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Pe(i,e,t){const s=(r,n=(r+i/60)%6)=>t-t*e*Math.max(Math.min(n,4-n,1),0);return[s(5),s(3),s(1)]}function at(i,e,t){const s=Ie(i,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)s[r]*=1-e-t,s[r]+=e;return s}function qe(i){const e=i.r/255,t=i.g/255,s=i.b/255,r=Math.max(e,t,s),n=Math.min(e,t,s),o=(r+n)/2;let a,c,_;return r!==n&&(_=r-n,c=o>.5?_/(2-r-n):_/(r+n),a=function(S,b,k,T,H){return S===H?(b-k)/T+(b<k?6:0):b===H?(k-S)/T+2:(S-b)/T+4}(e,t,s,_,r),a=60*a+.5),[0|a,c||0,o]}function Je(i,e,t,s){return(Array.isArray(e)?i(e[0],e[1],e[2]):i(e,t,s)).map(G)}function Ze(i,e,t){return Je(Ie,i,e,t)}function $e(i){return(i%360+360)%360}function ft(i){const e=Fe.exec(i);let t,s=255;if(!e)return;e[5]!==t&&(s=e[6]?$i(+e[5]):G(+e[5]));const r=$e(+e[2]),n=+e[3]/100,o=+e[4]/100;return t=e[1]==="hwb"?function(a,c,_){return Je(at,a,c,_)}(r,n,o):e[1]==="hsv"?function(a,c,_){return Je(Pe,a,c,_)}(r,n,o):Ze(r,n,o),{r:t[0],g:t[1],b:t[2],a:s}}const pt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},st={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let rt;function Xe(i){rt||(rt=function(){const t={},s=Object.keys(st),r=Object.keys(pt);let n,o,a,c,_;for(n=0;n<s.length;n++){for(c=_=s[n],o=0;o<r.length;o++)a=r[o],_=_.replace(a,pt[a]);a=parseInt(st[c],16),t[_]=[a>>16&255,a>>8&255,255&a]}return t}(),rt.transparent=[0,0,0,0]);const e=rt[i.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Ue=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,nt=i=>i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,Ge=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function it(i,e,t){if(i){let s=qe(i);s[e]=Math.max(0,Math.min(s[e]+s[e]*t,e===0?360:1)),s=Ze(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function yt(i,e){return i&&Object.assign(e||{},i)}function Dt(i){var e={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(e={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(e.a=G(i[3]))):(e=yt(i,{r:0,g:0,b:0,a:1})).a=G(e.a),e}function qt(i){return i.charAt(0)==="r"?function(e){const t=Ue.exec(e);let s,r,n,o=255;if(t){if(t[7]!==s){const a=+t[7];o=t[8]?$i(a):ai(255*a,0,255)}return s=+t[1],r=+t[3],n=+t[5],s=255&(t[2]?$i(s):ai(s,0,255)),r=255&(t[4]?$i(r):ai(r,0,255)),n=255&(t[6]?$i(n):ai(n,0,255)),{r:s,g:r,b:n,a:o}}}(i):ft(i)}class Ht{constructor(e){if(e instanceof Ht)return e;const t=typeof e;let s;var r,n,o;t==="object"?s=Dt(e):t==="string"&&(o=(r=e).length,r[0]==="#"&&(o===4||o===5?n={r:255&17*le[r[1]],g:255&17*le[r[2]],b:255&17*le[r[3]],a:o===5?17*le[r[4]]:255}:o!==7&&o!==9||(n={r:le[r[1]]<<4|le[r[2]],g:le[r[3]]<<4|le[r[4]],b:le[r[5]]<<4|le[r[6]],a:o===9?le[r[7]]<<4|le[r[8]]:255})),s=n||Xe(e)||qt(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=yt(this._rgb);return e&&(e.a=K(e.a)),e}set rgb(e){this._rgb=Dt(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${K(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0;var e}hexString(){return this._valid?we(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=qe(e),s=t[0],r=re(t[1]),n=re(t[2]);return e.a<255?`hsla(${s}, ${r}%, ${n}%, ${K(e.a)})`:`hsl(${s}, ${r}%, ${n}%)`}(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,r=e.rgb;let n;const o=t===n?.5:t,a=2*o-1,c=s.a-r.a,_=((a*c==-1?a:(a+c)/(1+a*c))+1)/2;n=1-_,s.r=255&_*s.r+n*r.r+.5,s.g=255&_*s.g+n*r.g+.5,s.b=255&_*s.b+n*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=function(s,r,n){const o=Ge(K(s.r)),a=Ge(K(s.g)),c=Ge(K(s.b));return{r:G(nt(o+n*(Ge(K(r.r))-o))),g:G(nt(a+n*(Ge(K(r.g))-a))),b:G(nt(c+n*(Ge(K(r.b))-c))),a:s.a+n*(r.a-s.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Ht(this.rgb)}alpha(e){return this._rgb.a=G(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=ji(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return it(this._rgb,2,e),this}darken(e){return it(this._rgb,2,-e),this}saturate(e){return it(this._rgb,1,e),this}desaturate(e){return it(this._rgb,1,-e),this}rotate(e){return function(t,s){var r=qe(t);r[0]=$e(r[0]+s),r=Ze(r),t.r=r[0],t.g=r[1],t.b=r[2]}(this._rgb,e),this}}function jt(i){if(i&&typeof i=="object"){const e=i.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function $t(i){return jt(i)?i:new Ht(i)}function mt(i){return jt(i)?i:new Ht(i).saturate(.5).darken(.1).hexString()}const hi=["x","y","borderWidth","radius","tension"],vi=["color","borderColor","backgroundColor"],Jt=new Map;function Mt(i,e,t){return function(s,r){r=r||{};const n=s+JSON.stringify(r);let o=Jt.get(n);return o||(o=new Intl.NumberFormat(s,r),Jt.set(n,o)),o}(e,t).format(i)}const Ut={values:i=>ne(i)?i:""+i,numeric(i,e,t){if(i===0)return"0";const s=this.chart.options.locale;let r,n=i;if(t.length>1){const _=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(_<1e-4||_>1e15)&&(r="scientific"),n=function(S,b){let k=b.length>3?b[2].value-b[1].value:b[1].value-b[0].value;return Math.abs(k)>=1&&S!==Math.floor(S)&&(k=S-Math.floor(S)),k}(i,t)}const o=J(Math.abs(n)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Mt(i,s,c)},logarithmic(i,e,t){if(i===0)return"0";const s=t[e].significand||i/Math.pow(10,Math.floor(J(i)));return[1,2,3,5,10,15].includes(s)||e>.8*t.length?Ut.numeric.call(this,i,e,t):""}};var Et={formatters:Ut};const Zt=Object.create(null),Li=Object.create(null);function fi(i,e){if(!e)return i;const t=e.split(".");for(let s=0,r=t.length;s<r;++s){const n=t[s];i=i[n]||(i[n]=Object.create(null))}return i}function ts(i,e,t){return typeof e=="string"?d(fi(i,e),t):d(fi(i,""),e)}class Ts{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>mt(r.backgroundColor),this.hoverBorderColor=(s,r)=>mt(r.borderColor),this.hoverColor=(s,r)=>mt(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return ts(this,e,t)}get(e){return fi(this,e)}describe(e,t){return ts(Li,e,t)}override(e,t){return ts(Zt,e,t)}route(e,t,s,r){const n=fi(this,e),o=fi(this,s),a="_"+t;Object.defineProperties(n,{[a]:{value:n[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[a],_=o[r];return p(c)?Object.assign({},_,c):D(c,_)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}}var gt=new Ts({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),i.set("animations",{colors:{type:"color",properties:vi},numbers:{type:"number",properties:hi}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Et.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}]);function is(){return typeof window<"u"&&typeof document<"u"}function ss(i){let e=i.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Pt(i,e,t){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*e.parentNode[t])):s=i,s}const Ui=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function rs(i,e){return Ui(i).getPropertyValue(e)}const Os=["top","right","bottom","left"];function _i(i,e,t){const s={};t=t?"-"+t:"";for(let r=0;r<4;r++){const n=Os[r];s[n]=parseFloat(i[e+"-"+n+t])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Rs=(i,e,t)=>(i>0||e>0)&&(!t||!t.shadowRoot);function li(i,e){if("native"in i)return i;const{canvas:t,currentDevicePixelRatio:s}=e,r=Ui(t),n=r.boxSizing==="border-box",o=_i(r,"padding"),a=_i(r,"border","width"),{x:c,y:_,box:S}=function(P,F){const j=P.touches,te=j&&j.length?j[0]:P,{offsetX:ee,offsetY:Q}=te;let he,fe,me=!1;if(Rs(ee,Q,P.target))he=ee,fe=Q;else{const Ce=F.getBoundingClientRect();he=te.clientX-Ce.left,fe=te.clientY-Ce.top,me=!0}return{x:he,y:fe,box:me}}(i,t),b=o.left+(S&&a.left),k=o.top+(S&&a.top);let{width:T,height:H}=e;return n&&(T-=o.width+a.width,H-=o.height+a.height),{x:Math.round((c-b)/T*t.width/s),y:Math.round((_-k)/H*t.height/s)}}const bi=i=>Math.round(10*i)/10;function pi(i,e,t,s){const r=Ui(i),n=_i(r,"margin"),o=Pt(r.maxWidth,i,"clientWidth")||Se,a=Pt(r.maxHeight,i,"clientHeight")||Se,c=function(b,k,T){let H,P;if(k===void 0||T===void 0){const F=b&&ss(b);if(F){const j=F.getBoundingClientRect(),te=Ui(F),ee=_i(te,"border","width"),Q=_i(te,"padding");k=j.width-Q.width-ee.width,T=j.height-Q.height-ee.height,H=Pt(te.maxWidth,F,"clientWidth"),P=Pt(te.maxHeight,F,"clientHeight")}else k=b.clientWidth,T=b.clientHeight}return{width:k,height:T,maxWidth:H||Se,maxHeight:P||Se}}(i,e,t);let{width:_,height:S}=c;if(r.boxSizing==="content-box"){const b=_i(r,"border","width"),k=_i(r,"padding");_-=k.width+b.width,S-=k.height+b.height}return _=Math.max(0,_-n.width),S=Math.max(0,s?_/s:S-n.height),_=bi(Math.min(_,o,c.maxWidth)),S=bi(Math.min(S,a,c.maxHeight)),_&&!S&&(S=bi(_/2)),(e!==void 0||t!==void 0)&&s&&c.height&&S>c.height&&(S=c.height,_=bi(Math.floor(S*s))),{width:_,height:S}}function Ti(i,e,t){const s=e||1,r=Math.floor(i.height*s),n=Math.floor(i.width*s);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const o=i.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),(i.currentDevicePixelRatio!==s||o.height!==r||o.width!==n)&&(i.currentDevicePixelRatio=s,o.height=r,o.width=n,i.ctx.setTransform(s,0,0,s,0,0),!0)}const ns=function(){let i=!1;try{const e={get passive(){return i=!0,!1}};is()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return i}();function os(i,e){const t=rs(i,e),s=t&&t.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function as(i){return!i||Oe(i.size)||Oe(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function yi(i,e,t,s,r){let n=e[r];return n||(n=e[r]=i.measureText(r).width,t.push(r)),n>s&&(s=n),s}function hs(i,e,t,s){let r=(s=s||{}).data=s.data||{},n=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(r=s.data={},n=s.garbageCollect=[],s.font=e),i.save(),i.font=e;let o=0;const a=t.length;let c,_,S,b,k;for(c=0;c<a;c++)if(b=t[c],b==null||ne(b)){if(ne(b))for(_=0,S=b.length;_<S;_++)k=b[_],k==null||ne(k)||(o=yi(i,r,n,o,k))}else o=yi(i,r,n,o,b);i.restore();const T=n.length/2;if(T>t.length){for(c=0;c<T;c++)delete r[n[c]];n.splice(0,T)}return o}function Qt(i,e,t){const s=i.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*s)/s+r}function Si(i,e){(e||i)&&((e=e||i.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,i.width,i.height),e.restore())}function Vi(i,e,t,s){qi(i,e,t,s,null)}function qi(i,e,t,s,r){let n,o,a,c,_,S,b,k;const T=e.pointStyle,H=e.rotation,P=e.radius;let F=(H||0)*ge;if(T&&typeof T=="object"&&(n=T.toString(),n==="[object HTMLImageElement]"||n==="[object HTMLCanvasElement]"))return i.save(),i.translate(t,s),i.rotate(F),i.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),void i.restore();if(!(isNaN(P)||P<=0)){switch(i.beginPath(),T){default:r?i.ellipse(t,s,r/2,P,0,0,ce):i.arc(t,s,P,0,ce),i.closePath();break;case"triangle":S=r?r/2:P,i.moveTo(t+Math.sin(F)*S,s-Math.cos(F)*P),F+=V,i.lineTo(t+Math.sin(F)*S,s-Math.cos(F)*P),F+=V,i.lineTo(t+Math.sin(F)*S,s-Math.cos(F)*P),i.closePath();break;case"rectRounded":_=.516*P,c=P-_,o=Math.cos(F+z)*c,b=Math.cos(F+z)*(r?r/2-_:c),a=Math.sin(F+z)*c,k=Math.sin(F+z)*(r?r/2-_:c),i.arc(t-b,s-a,_,F-se,F-B),i.arc(t+k,s-o,_,F-B,F),i.arc(t+b,s+a,_,F,F+B),i.arc(t-k,s+o,_,F+B,F+se),i.closePath();break;case"rect":if(!H){c=Math.SQRT1_2*P,S=r?r/2:c,i.rect(t-S,s-c,2*S,2*c);break}F+=z;case"rectRot":b=Math.cos(F)*(r?r/2:P),o=Math.cos(F)*P,a=Math.sin(F)*P,k=Math.sin(F)*(r?r/2:P),i.moveTo(t-b,s-a),i.lineTo(t+k,s-o),i.lineTo(t+b,s+a),i.lineTo(t-k,s+o),i.closePath();break;case"crossRot":F+=z;case"cross":b=Math.cos(F)*(r?r/2:P),o=Math.cos(F)*P,a=Math.sin(F)*P,k=Math.sin(F)*(r?r/2:P),i.moveTo(t-b,s-a),i.lineTo(t+b,s+a),i.moveTo(t+k,s-o),i.lineTo(t-k,s+o);break;case"star":b=Math.cos(F)*(r?r/2:P),o=Math.cos(F)*P,a=Math.sin(F)*P,k=Math.sin(F)*(r?r/2:P),i.moveTo(t-b,s-a),i.lineTo(t+b,s+a),i.moveTo(t+k,s-o),i.lineTo(t-k,s+o),F+=z,b=Math.cos(F)*(r?r/2:P),o=Math.cos(F)*P,a=Math.sin(F)*P,k=Math.sin(F)*(r?r/2:P),i.moveTo(t-b,s-a),i.lineTo(t+b,s+a),i.moveTo(t+k,s-o),i.lineTo(t-k,s+o);break;case"line":o=r?r/2:Math.cos(F)*P,a=Math.sin(F)*P,i.moveTo(t-o,s-a),i.lineTo(t+o,s+a);break;case"dash":i.moveTo(t,s),i.lineTo(t+Math.cos(F)*(r?r/2:P),s+Math.sin(F)*P);break;case!1:i.closePath()}i.fill(),e.borderWidth>0&&i.stroke()}}function vt(i,e,t){return t=t||.5,!e||i&&i.x>e.left-t&&i.x<e.right+t&&i.y>e.top-t&&i.y<e.bottom+t}function Oi(i,e){i.save(),i.beginPath(),i.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),i.clip()}function bs(i){i.restore()}function Ks(i,e,t,s,r){if(!e)return i.lineTo(t.x,t.y);if(r==="middle"){const n=(e.x+t.x)/2;i.lineTo(n,e.y),i.lineTo(n,t.y)}else r==="after"!=!!s?i.lineTo(e.x,t.y):i.lineTo(t.x,e.y);i.lineTo(t.x,t.y)}function Ys(i,e,t,s){if(!e)return i.lineTo(t.x,t.y);i.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?t.cp2x:t.cp1x,s?t.cp2y:t.cp1y,t.x,t.y)}function Qr(i,e,t,s,r){if(r.strikethrough||r.underline){const n=i.measureText(s),o=e-n.actualBoundingBoxLeft,a=e+n.actualBoundingBoxRight,c=t-n.actualBoundingBoxAscent,_=t+n.actualBoundingBoxDescent,S=r.strikethrough?(c+_)/2:_;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(o,S),i.lineTo(a,S),i.stroke()}}function en(i,e){const t=i.fillStyle;i.fillStyle=e.color,i.fillRect(e.left,e.top,e.width,e.height),i.fillStyle=t}function Ri(i,e,t,s,r,n={}){const o=ne(e)?e:[e],a=n.strokeWidth>0&&n.strokeColor!=="";let c,_;for(i.save(),i.font=r.string,function(S,b){b.translation&&S.translate(b.translation[0],b.translation[1]),Oe(b.rotation)||S.rotate(b.rotation),b.color&&(S.fillStyle=b.color),b.textAlign&&(S.textAlign=b.textAlign),b.textBaseline&&(S.textBaseline=b.textBaseline)}(i,n),c=0;c<o.length;++c)_=o[c],n.backdrop&&en(i,n.backdrop),a&&(n.strokeColor&&(i.strokeStyle=n.strokeColor),Oe(n.strokeWidth)||(i.lineWidth=n.strokeWidth),i.strokeText(_,t,s,n.maxWidth)),i.fillText(_,t,s,n.maxWidth),Qr(i,t,s,_,n),s+=Number(r.lineHeight);i.restore()}function ls(i,e){const{x:t,y:s,w:r,h:n,radius:o}=e;i.arc(t+o.topLeft,s+o.topLeft,o.topLeft,1.5*se,se,!0),i.lineTo(t,s+n-o.bottomLeft),i.arc(t+o.bottomLeft,s+n-o.bottomLeft,o.bottomLeft,se,B,!0),i.lineTo(t+r-o.bottomRight,s+n),i.arc(t+r-o.bottomRight,s+n-o.bottomRight,o.bottomRight,B,0,!0),i.lineTo(t+r,s+o.topRight),i.arc(t+r-o.topRight,s+o.topRight,o.topRight,0,-B,!0),i.lineTo(t+o.topLeft,s)}function Ps(i,e=[""],t,s,r=()=>i[0]){const n=t||i;s===void 0&&(s=Xs("_fallback",i));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:n,_fallback:s,_getTarget:r,override:a=>Ps([a,...i],e,n,s)};return new Proxy(o,{deleteProperty:(a,c)=>(delete a[c],delete a._keys,delete i[0][c],!0),get:(a,c)=>gr(a,c,()=>function(_,S,b,k){let T;for(const H of S)if(T=Xs(pr(H,_),b),T!==void 0)return ys(_,T)?Is(b,k,_,T):T}(c,e,i,a)),getOwnPropertyDescriptor:(a,c)=>Reflect.getOwnPropertyDescriptor(a._scopes[0],c),getPrototypeOf:()=>Reflect.getPrototypeOf(i[0]),has:(a,c)=>Gs(a).includes(c),ownKeys:a=>Gs(a),set(a,c,_){const S=a._storage||(a._storage=r());return a[c]=S[c]=_,delete a._keys,!0}})}function Ki(i,e,t,s){const r={_cacheable:!1,_proxy:i,_context:e,_subProxy:t,_stack:new Set,_descriptors:Bs(i,s),setContext:n=>Ki(i,n,t,s),override:n=>Ki(i.override(n),e,t,s)};return new Proxy(r,{deleteProperty:(n,o)=>(delete n[o],delete i[o],!0),get:(n,o,a)=>gr(n,o,()=>function(c,_,S){const{_proxy:b,_context:k,_subProxy:T,_descriptors:H}=c;let P=b[_];return $(P)&&H.isScriptable(_)&&(P=function(F,j,te,ee){const{_proxy:Q,_context:he,_subProxy:fe,_stack:me}=te;if(me.has(F))throw new Error("Recursion detected: "+Array.from(me).join("->")+"->"+F);me.add(F);let Ce=j(he,fe||ee);return me.delete(F),ys(F,Ce)&&(Ce=Is(Q._scopes,Q,F,Ce)),Ce}(_,P,c,S)),ne(P)&&P.length&&(P=function(F,j,te,ee){const{_proxy:Q,_context:he,_subProxy:fe,_descriptors:me}=te;if(he.index!==void 0&&ee(F))return j[he.index%j.length];if(p(j[0])){const Ce=j,Ae=Q._scopes.filter(De=>De!==Ce);j=[];for(const De of Ce){const He=Is(Ae,Q,F,De);j.push(Ki(He,he,fe&&fe[F],me))}}return j}(_,P,c,H.isIndexable)),ys(_,P)&&(P=Ki(P,k,T&&T[_],H)),P}(n,o,a)),getOwnPropertyDescriptor:(n,o)=>n._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o),getPrototypeOf:()=>Reflect.getPrototypeOf(i),has:(n,o)=>Reflect.has(i,o),ownKeys:()=>Reflect.ownKeys(i),set:(n,o,a)=>(i[o]=a,delete n[o],!0)})}function Bs(i,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=i;return{allKeys:r,scriptable:t,indexable:s,isScriptable:$(t)?t:()=>t,isIndexable:$(s)?s:()=>s}}const pr=(i,e)=>i?i+I(e):e,ys=(i,e)=>p(e)&&i!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function gr(i,e,t){if(Object.prototype.hasOwnProperty.call(i,e)||e==="constructor")return i[e];const s=t();return i[e]=s,s}function mr(i,e,t){return $(i)?i(e,t):i}const Yi=(i,e)=>i===!0?e:typeof i=="string"?x(e,i):void 0;function wi(i,e,t,s,r){for(const n of e){const o=Yi(t,n);if(o){i.add(o);const a=mr(o._fallback,t,r);if(a!==void 0&&a!==t&&a!==s)return a}else if(o===!1&&s!==void 0&&t!==s)return null}return!1}function Is(i,e,t,s){const r=e._rootScopes,n=mr(e._fallback,t,s),o=[...i,...r],a=new Set;a.add(s);let c=vr(a,o,t,n||t,s);return c!==null&&(n===void 0||n===t||(c=vr(a,o,n,c,s),c!==null))&&Ps(Array.from(a),[""],r,n,()=>function(_,S,b){const k=_._getTarget();S in k||(k[S]={});const T=k[S];return ne(T)&&p(b)?b:T||{}}(e,t,s))}function vr(i,e,t,s,r){for(;t;)t=wi(i,e,t,s,r);return t}function Xs(i,e){for(const t of e){if(!t)continue;const s=t[i];if(s!==void 0)return s}}function Gs(i){let e=i._keys;return e||(e=i._keys=function(t){const s=new Set;for(const r of t)for(const n of Object.keys(r).filter(o=>!o.startsWith("_")))s.add(n);return Array.from(s)}(i._scopes)),e}function Hs(i,e,t,s){const{iScale:r}=i,{key:n="r"}=this._parsing,o=new Array(s);let a,c,_,S;for(a=0,c=s;a<c;++a)_=a+t,S=e[_],o[a]={r:r.parse(x(S,n),_)};return o}const br=Number.EPSILON||1e-14,cs=(i,e)=>e<i.length&&!i[e].skip&&i[e],yr=i=>i==="x"?"y":"x";function Sr(i,e,t,s){const r=i.skip?e:i,n=e,o=t.skip?e:t,a=dt(n,r),c=dt(o,n);let _=a/(a+c),S=c/(a+c);_=isNaN(_)?0:_,S=isNaN(S)?0:S;const b=s*_,k=s*S;return{previous:{x:n.x-b*(o.x-r.x),y:n.y-b*(o.y-r.y)},next:{x:n.x+k*(o.x-r.x),y:n.y+k*(o.y-r.y)}}}function Js(i,e="x"){const t=yr(e),s=i.length,r=Array(s).fill(0),n=Array(s);let o,a,c,_=cs(i,0);for(o=0;o<s;++o)if(a=c,c=_,_=cs(i,o+1),c){if(_){const S=_[e]-c[e];r[o]=S!==0?(_[t]-c[t])/S:0}n[o]=a?_?X(r[o-1])!==X(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}(function(S,b,k){const T=S.length;let H,P,F,j,te,ee=cs(S,0);for(let Q=0;Q<T-1;++Q)te=ee,ee=cs(S,Q+1),te&&ee&&(be(b[Q],0,br)?k[Q]=k[Q+1]=0:(H=k[Q]/b[Q],P=k[Q+1]/b[Q],j=Math.pow(H,2)+Math.pow(P,2),j<=9||(F=3/Math.sqrt(j),k[Q]=H*F*b[Q],k[Q+1]=P*F*b[Q])))})(i,r,n),function(S,b,k="x"){const T=yr(k),H=S.length;let P,F,j,te=cs(S,0);for(let ee=0;ee<H;++ee){if(F=j,j=te,te=cs(S,ee+1),!j)continue;const Q=j[k],he=j[T];F&&(P=(Q-F[k])/3,j[`cp1${k}`]=Q-P,j[`cp1${T}`]=he-P*b[ee]),te&&(P=(te[k]-Q)/3,j[`cp2${k}`]=Q+P,j[`cp2${T}`]=he+P*b[ee])}}(i,n,e)}function Ss(i,e,t){return Math.max(Math.min(i,t),e)}function wr(i,e,t,s,r){let n,o,a,c;if(e.spanGaps&&(i=i.filter(_=>!_.skip)),e.cubicInterpolationMode==="monotone")Js(i,r);else{let _=s?i[i.length-1]:i[0];for(n=0,o=i.length;n<o;++n)a=i[n],c=Sr(_,a,i[Math.min(n+1,o-(s?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,_=a}e.capBezierPoints&&function(_,S){let b,k,T,H,P,F=vt(_[0],S);for(b=0,k=_.length;b<k;++b)P=H,H=F,F=b<k-1&&vt(_[b+1],S),H&&(T=_[b],P&&(T.cp1x=Ss(T.cp1x,S.left,S.right),T.cp1y=Ss(T.cp1y,S.top,S.bottom)),F&&(T.cp2x=Ss(T.cp2x,S.left,S.right),T.cp2y=Ss(T.cp2y,S.top,S.bottom)))}(i,t)}const Fs=i=>i===0||i===1,xr=(i,e,t)=>-Math.pow(2,10*(i-=1))*Math.sin((i-e)*ce/t),Cr=(i,e,t)=>Math.pow(2,-10*i)*Math.sin((i-e)*ce/t)+1,ds={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>1-Math.cos(i*B),easeOutSine:i=>Math.sin(i*B),easeInOutSine:i=>-.5*(Math.cos(se*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>Fs(i)?i:i<.5?.5*Math.pow(2,10*(2*i-1)):.5*(2-Math.pow(2,-10*(2*i-1))),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Fs(i)?i:xr(i,.075,.3),easeOutElastic:i=>Fs(i)?i:Cr(i,.075,.3),easeInOutElastic(i){return Fs(i)?i:i<.5?.5*xr(2*i,.1125,.45):.5+.5*Cr(2*i-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let e=1.70158;return(i/=.5)<1?i*i*((1+(e*=1.525))*i-e)*.5:.5*((i-=2)*i*((1+(e*=1.525))*i+e)+2)},easeInBounce:i=>1-ds.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?.5*ds.easeInBounce(2*i):.5*ds.easeOutBounce(2*i-1)+.5};function Nt(i,e,t,s){return{x:i.x+t*(e.x-i.x),y:i.y+t*(e.y-i.y)}}function Zs(i,e,t,s){return{x:i.x+t*(e.x-i.x),y:s==="middle"?t<.5?i.y:e.y:s==="after"?t<1?i.y:e.y:t>0?e.y:i.y}}function Er(i,e,t,s){const r={x:i.cp2x,y:i.cp2y},n={x:e.cp1x,y:e.cp1y},o=Nt(i,r,t),a=Nt(r,n,t),c=Nt(n,e,t),_=Nt(o,a,t),S=Nt(a,c,t);return Nt(_,S,t)}const tn=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,sn=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function kr(i,e){const t=(""+i).match(tn);if(!t||t[1]==="normal")return 1.2*e;switch(i=+t[2],t[3]){case"px":return i;case"%":i/=100}return e*i}const rn=i=>+i||0;function Ns(i,e){const t={},s=p(e),r=s?Object.keys(e):e,n=p(i)?s?o=>D(i[o],i[e[o]]):o=>i[o]:()=>i;for(const o of r)t[o]=rn(n(o));return t}function Qs(i){return Ns(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Pi(i){return Ns(i,["topLeft","topRight","bottomLeft","bottomRight"])}function At(i){const e=Qs(i);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function wt(i,e){i=i||{},e=e||gt.font;let t=D(i.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let s=D(i.style,e.style);s&&!(""+s).match(sn)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:D(i.family,e.family),lineHeight:kr(D(i.lineHeight,e.lineHeight),t),size:t,style:s,weight:D(i.weight,e.weight),string:""};return r.string=as(r),r}function Xi(i,e,t,s){let r,n,o,a=!0;for(r=0,n=i.length;r<n;++r)if(o=i[r],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e),a=!1),t!==void 0&&ne(o)&&(o=o[t%o.length],a=!1),o!==void 0))return s&&!a&&(s.cacheable=!1),o}function er(i,e,t){const{min:s,max:r}=i,n=E(e,(r-s)/2),o=(a,c)=>t&&a===0?0:a+c;return{min:o(s,-Math.abs(n)),max:o(r,n)}}function Kt(i,e){return Object.assign(Object.create(i),e)}function xi(i,e,t){return i?function(s,r){return{x:n=>s+s+r-n,setWidth(n){r=n},textAlign:n=>n==="center"?n:n==="right"?"left":"right",xPlus:(n,o)=>n-o,leftForLtr:(n,o)=>n-o}}(e,t):{x:s=>s,setWidth(s){},textAlign:s=>s,xPlus:(s,r)=>s+r,leftForLtr:(s,r)=>s}}function tr(i,e){let t,s;e!=="ltr"&&e!=="rtl"||(t=i.canvas.style,s=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),i.prevTextDirection=s)}function ir(i,e){e!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",e[0],e[1]))}function Dr(i){return i==="angle"?{between:je,compare:ht,normalize:et}:{between:Ot,compare:(e,t)=>e-t,normalize:e=>e}}function Bi({start:i,end:e,count:t,loop:s,style:r}){return{start:i%t,end:e%t,loop:s&&(e-i+1)%t==0,style:r}}function sr(i,e,t){if(!t)return[i];const{property:s,start:r,end:n}=t,o=e.length,{compare:a,between:c,normalize:_}=Dr(s),{start:S,end:b,loop:k,style:T}=function(fe,me,Ce){const{property:Ae,start:De,end:He}=Ce,{between:Be,normalize:Me}=Dr(Ae),Te=me.length;let Le,Ve,{start:_t,end:lt,loop:zt}=fe;if(zt){for(_t+=Te,lt+=Te,Le=0,Ve=Te;Le<Ve&&Be(Me(me[_t%Te][Ae]),De,He);++Le)_t--,lt--;_t%=Te,lt%=Te}return lt<_t&&(lt+=Te),{start:_t,end:lt,loop:zt,style:fe.style}}(i,e,t),H=[];let P,F,j,te=!1,ee=null;const Q=()=>te||c(r,j,P)&&a(r,j)!==0,he=()=>!te||a(n,P)===0||c(n,j,P);for(let fe=S,me=S;fe<=b;++fe)F=e[fe%o],F.skip||(P=_(F[s]),P!==j&&(te=c(P,r,n),ee===null&&Q()&&(ee=a(P,r)===0?fe:me),ee!==null&&he()&&(H.push(Bi({start:ee,end:fe,loop:k,count:o,style:T})),ee=null),me=fe,j=P));return ee!==null&&H.push(Bi({start:ee,end:b,loop:k,count:o,style:T})),H}function rr(i,e){const t=[],s=i.segments;for(let r=0;r<s.length;r++){const n=sr(s[r],i.points,e);n.length&&t.push(...n)}return t}function ws(i,e){const t=i.points,s=i.options.spanGaps,r=t.length;if(!r)return[];const n=!!i._loop,{start:o,end:a}=function(c,_,S,b){let k=0,T=_-1;if(S&&!b)for(;k<_&&!c[k].skip;)k++;for(;k<_&&c[k].skip;)k++;for(k%=_,S&&(T+=k);T>k&&c[T%_].skip;)T--;return T%=_,{start:k,end:T}}(t,r,n,s);return s===!0?Ws(i,[{start:o,end:a,loop:n}],t,e):Ws(i,function(c,_,S,b){const k=c.length,T=[];let H,P=_,F=c[_];for(H=_+1;H<=S;++H){const j=c[H%k];j.skip||j.stop?F.skip||(b=!1,T.push({start:_%k,end:(H-1)%k,loop:b}),_=P=j.stop?H:null):(P=H,F.skip&&(_=H)),F=j}return P!==null&&T.push({start:_%k,end:P%k,loop:b}),T}(t,o,a<o?a+r:a,!!i._fullLoop&&o===0&&a===r-1),t,e)}function Ws(i,e,t,s){return s&&s.setContext&&t?function(r,n,o,a){const c=r._chart.getContext(),_=Mr(r.options),{_datasetIndex:S,options:{spanGaps:b}}=r,k=o.length,T=[];let H=_,P=n[0].start,F=P;function j(te,ee,Q,he){const fe=b?-1:1;if(te!==ee){for(te+=k;o[te%k].skip;)te-=fe;for(;o[ee%k].skip;)ee+=fe;te%k!=ee%k&&(T.push({start:te%k,end:ee%k,loop:Q,style:he}),H=he,P=ee%k)}}for(const te of n){P=b?P:te.start;let ee,Q=o[P%k];for(F=P+1;F<=te.end;F++){const he=o[F%k];ee=Mr(a.setContext(Kt(c,{type:"segment",p0:Q,p1:he,p0DataIndex:(F-1)%k,p1DataIndex:F%k,datasetIndex:S}))),Ar(ee,H)&&j(P,F-1,te.loop,H),Q=he,H=ee}P<F-1&&j(P,F-1,te.loop,H)}return T}(i,e,t,s):e}function Mr(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function Ar(i,e){if(!e)return!1;const t=[],s=function(r,n){return jt(n)?(t.includes(n)||t.push(n),t.indexOf(n)):n};return JSON.stringify(i,s)!==JSON.stringify(e,s)}var nn=Object.freeze({__proto__:null,HALF_PI:B,INFINITY:Se,PI:se,PITAU:ve,QUARTER_PI:z,RAD_PER_DEG:ge,TAU:ce,TWO_THIRDS_PI:V,_addGrace:er,_alignPixel:Qt,_alignStartEnd:ut,_angleBetween:je,_angleDiff:ht,_arrayUnique:bt,_attachContext:Ki,_bezierCurveTo:Ys,_bezierInterpolation:Er,_boundSegment:sr,_boundSegments:rr,_capitalize:I,_computeSegments:ws,_createResolver:Ps,_decimalPlaces:ye,_deprecated:function(i,e,t,s){e!==void 0&&console.warn(i+': "'+t+'" is deprecated. Please use "'+s+'" instead')},_descriptors:Bs,_elementsEqual:g,_factorize:ze,_filterBetween:Xt,_getParentNode:ss,_getStartAndCountOfVisiblePoints:Ai,_int16Range:Ft,_isBetween:Ot,_isClickEvent:W,_isDomSupported:is,_isPointInArea:vt,_limitValue:ot,_longestText:hs,_lookup:Yt,_lookupByKey:Bt,_measureText:yi,_merger:h,_mergerIf:A,_normalizeAngle:et,_parseObjectDataRadialScale:Hs,_pointInLine:Nt,_readValueToProps:Ns,_rlookupByKey:Rt,_scaleRangesChanged:es,_setMinAndMaxByKey:oe,_splitKey:R,_steppedInterpolation:Zs,_steppedLineTo:Ks,_textX:vs,_toLeftRightCenter:tt,_updateBezierControlPoints:wr,addRoundedRectPath:ls,almostEquals:be,almostWhole:N,callback:M,clearCanvas:Si,clipArea:Oi,clone:l,color:$t,createContext:Kt,debounce:Wt,defined:U,distanceBetweenPoints:dt,drawPoint:Vi,drawPointLegend:qi,each:w,easingEffects:ds,finiteOrDefault:C,fontString:function(i,e,t){return e+" "+i+"px "+t},formatNumber:Mt,getAngleFromPoint:Ye,getHoverColor:mt,getMaximumSize:pi,getRelativePosition:li,getRtlAdapter:xi,getStyle:rs,isArray:ne,isFinite:m,isFunction:$,isNullOrUndef:Oe,isNumber:ie,isObject:p,isPatternOrGradient:jt,listenArrayEvents:ni,log10:J,merge:d,mergeIf:y,niceNum:Ne,noop:We,overrideTextDirection:tr,readUsedSize:os,renderText:Ri,requestAnimFrame:oi,resolve:Xi,resolveObjectKey:x,restoreTextDirection:ir,retinaScale:Ti,setsEqual:Z,sign:X,splineCurve:Sr,splineCurveMonotone:Js,supportsEventListenerOptions:ns,throttled:kt,toDegrees:ae,toDimension:E,toFont:wt,toFontString:as,toLineHeight:kr,toPadding:At,toPercentage:v,toRadians:ue,toTRBL:Qs,toTRBLCorners:Pi,uid:ct,unclipArea:bs,unlistenArrayEvents:Gt,valueOrDefault:D});function us(i,e,t,s){const{controller:r,data:n,_sorted:o}=i,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&n.length){const c=a._reversePixels?Rt:Bt;if(!s)return c(n,e,t);if(r._sharedOptions){const _=n[0],S=typeof _.getRange=="function"&&_.getRange(e);if(S){const b=c(n,e,t-S),k=c(n,e,t+S);return{lo:b.lo,hi:k.hi}}}}return{lo:0,hi:n.length-1}}function Gi(i,e,t,s,r){const n=i.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=n.length;a<c;++a){const{index:_,data:S}=n[a],{lo:b,hi:k}=us(n[a],e,o,r);for(let T=b;T<=k;++T){const H=S[T];H.skip||s(H,_,T)}}}function zs(i,e,t,s,r){const n=[];return!r&&!i.isPointInArea(e)||Gi(i,t,e,function(o,a,c){(r||vt(o,i.chartArea,0))&&o.inRange(e.x,e.y,s)&&n.push({element:o,datasetIndex:a,index:c})},!0),n}function on(i,e,t,s,r,n){let o=[];const a=function(_){const S=_.indexOf("x")!==-1,b=_.indexOf("y")!==-1;return function(k,T){const H=S?Math.abs(k.x-T.x):0,P=b?Math.abs(k.y-T.y):0;return Math.sqrt(Math.pow(H,2)+Math.pow(P,2))}}(t);let c=Number.POSITIVE_INFINITY;return Gi(i,t,e,function(_,S,b){const k=_.inRange(e.x,e.y,r);if(s&&!k)return;const T=_.getCenterPoint(r);if(!(n||i.isPointInArea(T))&&!k)return;const H=a(e,T);H<c?(o=[{element:_,datasetIndex:S,index:b}],c=H):H===c&&o.push({element:_,datasetIndex:S,index:b})}),o}function nr(i,e,t,s,r,n){return n||i.isPointInArea(e)?t!=="r"||s?on(i,e,t,s,r,n):function(o,a,c,_){let S=[];return Gi(o,c,a,function(b,k,T){const{startAngle:H,endAngle:P}=b.getProps(["startAngle","endAngle"],_),{angle:F}=Ye(b,{x:a.x,y:a.y});je(F,H,P)&&S.push({element:b,datasetIndex:k,index:T})}),S}(i,e,t,r):[]}function Lr(i,e,t,s,r){const n=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Gi(i,t,e,(c,_,S)=>{c[o](e[t],r)&&(n.push({element:c,datasetIndex:_,index:S}),a=a||c.inRange(e.x,e.y,r))}),s&&!a?[]:n}var fs={evaluateInteractionItems:Gi,modes:{index(i,e,t,s){const r=li(e,i),n=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?zs(i,r,n,s,o):nr(i,r,n,!1,s,o),c=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(_=>{const S=a[0].index,b=_.data[S];b&&!b.skip&&c.push({element:b,datasetIndex:_.index,index:S})}),c):[]},dataset(i,e,t,s){const r=li(e,i),n=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?zs(i,r,n,s,o):nr(i,r,n,!1,s,o);if(a.length>0){const c=a[0].datasetIndex,_=i.getDatasetMeta(c).data;a=[];for(let S=0;S<_.length;++S)a.push({element:_[S],datasetIndex:c,index:S})}return a},point:(i,e,t,s)=>zs(i,li(e,i),t.axis||"xy",s,t.includeInvisible||!1),nearest(i,e,t,s){const r=li(e,i),n=t.axis||"xy",o=t.includeInvisible||!1;return nr(i,r,n,t.intersect,s,o)},x:(i,e,t,s)=>Lr(i,li(e,i),"x",t.intersect,s),y:(i,e,t,s)=>Lr(i,li(e,i),"y",t.intersect,s)}};const Ii=["left","top","right","bottom"];function xs(i,e){return i.filter(t=>t.pos===e)}function Tr(i,e){return i.filter(t=>Ii.indexOf(t.pos)===-1&&t.box.axis===e)}function Cs(i,e){return i.sort((t,s)=>{const r=e?s:t,n=e?t:s;return r.weight===n.weight?r.index-n.index:r.weight-n.weight})}function an(i,e){const t=function(c){const _={};for(const S of c){const{stack:b,pos:k,stackWeight:T}=S;if(!b||!Ii.includes(k))continue;const H=_[b]||(_[b]={count:0,placed:0,weight:0,size:0});H.count++,H.weight+=T}return _}(i),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let n,o,a;for(n=0,o=i.length;n<o;++n){a=i[n];const{fullSize:c}=a.box,_=t[a.stack],S=_&&a.stackWeight/_.weight;a.horizontal?(a.width=S?S*s:c&&e.availableWidth,a.height=r):(a.width=s,a.height=S?S*r:c&&e.availableHeight)}return t}function Or(i,e,t,s){return Math.max(i[t],e[t])+Math.max(i[s],e[s])}function Rr(i,e){i.top=Math.max(i.top,e.top),i.left=Math.max(i.left,e.left),i.bottom=Math.max(i.bottom,e.bottom),i.right=Math.max(i.right,e.right)}function hn(i,e,t,s){const{pos:r,box:n}=t,o=i.maxPadding;if(!p(r)){t.size&&(i[r]-=t.size);const b=s[t.stack]||{size:0,count:1};b.size=Math.max(b.size,t.horizontal?n.height:n.width),t.size=b.size/b.count,i[r]+=t.size}n.getPadding&&Rr(o,n.getPadding());const a=Math.max(0,e.outerWidth-Or(o,i,"left","right")),c=Math.max(0,e.outerHeight-Or(o,i,"top","bottom")),_=a!==i.w,S=c!==i.h;return i.w=a,i.h=c,t.horizontal?{same:_,other:S}:{same:S,other:_}}function ln(i,e){const t=e.maxPadding;function s(r){const n={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{n[o]=Math.max(e[o],t[o])}),n}return s(i?["left","right"]:["top","bottom"])}function _s(i,e,t,s){const r=[];let n,o,a,c,_,S;for(n=0,o=i.length,_=0;n<o;++n){a=i[n],c=a.box,c.update(a.width||e.w,a.height||e.h,ln(a.horizontal,e));const{same:b,other:k}=hn(e,t,a,s);_|=b&&r.length,S=S||k,c.fullSize||r.push(a)}return _&&_s(r,e,t,s)||S}function js(i,e,t,s,r){i.top=t,i.left=e,i.right=e+s,i.bottom=t+r,i.width=s,i.height=r}function or(i,e,t,s){const r=t.padding;let{x:n,y:o}=e;for(const a of i){const c=a.box,_=s[a.stack]||{count:1,placed:0,weight:1},S=a.stackWeight/_.weight||1;if(a.horizontal){const b=e.w*S,k=_.size||c.height;U(_.start)&&(o=_.start),c.fullSize?js(c,r.left,o,t.outerWidth-r.right-r.left,k):js(c,e.left+_.placed,o,b,k),_.start=o,_.placed+=b,o=c.bottom}else{const b=e.h*S,k=_.size||c.width;U(_.start)&&(n=_.start),c.fullSize?js(c,n,r.top,k,t.outerHeight-r.bottom-r.top):js(c,n,e.top+_.placed,k,b),_.start=n,_.placed+=b,n=c.right}}e.x=n,e.y=o}var Lt={addBox(i,e){i.boxes||(i.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},i.boxes.push(e)},removeBox(i,e){const t=i.boxes?i.boxes.indexOf(e):-1;t!==-1&&i.boxes.splice(t,1)},configure(i,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(i,e,t,s){if(!i)return;const r=At(i.options.layout.padding),n=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=function(P){const F=function(Ce){const Ae=[];let De,He,Be,Me,Te,Le;for(De=0,He=(Ce||[]).length;De<He;++De)Be=Ce[De],{position:Me,options:{stack:Te,stackWeight:Le=1}}=Be,Ae.push({index:De,box:Be,pos:Me,horizontal:Be.isHorizontal(),weight:Be.weight,stack:Te&&Me+Te,stackWeight:Le});return Ae}(P),j=Cs(F.filter(Ce=>Ce.box.fullSize),!0),te=Cs(xs(F,"left"),!0),ee=Cs(xs(F,"right")),Q=Cs(xs(F,"top"),!0),he=Cs(xs(F,"bottom")),fe=Tr(F,"x"),me=Tr(F,"y");return{fullSize:j,leftAndTop:te.concat(Q),rightAndBottom:ee.concat(me).concat(he).concat(fe),chartArea:xs(F,"chartArea"),vertical:te.concat(ee).concat(me),horizontal:Q.concat(he).concat(fe)}}(i.boxes),c=a.vertical,_=a.horizontal;w(i.boxes,P=>{typeof P.beforeLayout=="function"&&P.beforeLayout()});const S=c.reduce((P,F)=>F.box.options&&F.box.options.display===!1?P:P+1,0)||1,b=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:n,availableHeight:o,vBoxMaxWidth:n/2/S,hBoxMaxHeight:o/2}),k=Object.assign({},r);Rr(k,At(s));const T=Object.assign({maxPadding:k,w:n,h:o,x:r.left,y:r.top},r),H=an(c.concat(_),b);_s(a.fullSize,T,b,H),_s(c,T,b,H),_s(_,T,b,H)&&_s(c,T,b,H),function(P){const F=P.maxPadding;function j(te){const ee=Math.max(F[te]-P[te],0);return P[te]+=ee,ee}P.y+=j("top"),P.x+=j("left"),j("right"),j("bottom")}(T),or(a.leftAndTop,T,b,H),T.x+=T.w,T.y+=T.h,or(a.rightAndBottom,T,b,H),i.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},w(a.chartArea,P=>{const F=P.box;Object.assign(F,i.chartArea),F.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class $s{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,r){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):s)}}isAttached(e){return!0}updateConfig(e){}}class Hi extends $s{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Es="$chartjs",ar={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hr=i=>i===null||i==="",Us=!!ns&&{passive:!0};function Pr(i,e,t){i&&i.canvas&&i.canvas.removeEventListener(e,t,Us)}function ps(i,e){for(const t of i)if(t===e||t.contains(e))return!0}function cn(i,e,t){const s=i.canvas,r=new MutationObserver(n=>{let o=!1;for(const a of n)o=o||ps(a.addedNodes,s),o=o&&!ps(a.removedNodes,s);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function Ji(i,e,t){const s=i.canvas,r=new MutationObserver(n=>{let o=!1;for(const a of n)o=o||ps(a.removedNodes,s),o=o&&!ps(a.addedNodes,s);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const ei=new Map;let Br=0;function Ir(){const i=window.devicePixelRatio;i!==Br&&(Br=i,ei.forEach((e,t)=>{t.currentDevicePixelRatio!==i&&e()}))}function dn(i,e,t){const s=i.canvas,r=s&&ss(s);if(!r)return;const n=kt((a,c)=>{const _=r.clientWidth;t(a,c),_<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{const c=a[0],_=c.contentRect.width,S=c.contentRect.height;_===0&&S===0||n(_,S)});return o.observe(r),function(a,c){ei.size||window.addEventListener("resize",Ir),ei.set(a,c)}(i,n),o}function lr(i,e,t){t&&t.disconnect(),e==="resize"&&function(s){ei.delete(s),ei.size||window.removeEventListener("resize",Ir)}(i)}function un(i,e,t){const s=i.canvas,r=kt(n=>{i.ctx!==null&&t(function(o,a){const c=ar[o.type]||o.type,{x:_,y:S}=li(o,a);return{type:c,chart:a,native:o,x:_!==void 0?_:null,y:S!==void 0?S:null}}(n,i))},i);return function(n,o,a){n&&n.addEventListener(o,a,Us)}(s,e,r),r}class Hr extends $s{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(function(r,n){const o=r.style,a=r.getAttribute("height"),c=r.getAttribute("width");if(r[Es]={initial:{height:a,width:c,style:{display:o.display,height:o.height,width:o.width}}},o.display=o.display||"block",o.boxSizing=o.boxSizing||"border-box",hr(c)){const _=os(r,"width");_!==void 0&&(r.width=_)}if(hr(a))if(r.style.height==="")r.height=r.width/(n||2);else{const _=os(r,"height");_!==void 0&&(r.height=_)}}(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[Es])return!1;const s=t[Es].initial;["height","width"].forEach(n=>{const o=s[n];Oe(o)?t.removeAttribute(n):t.setAttribute(n,o)});const r=s.style||{};return Object.keys(r).forEach(n=>{t.style[n]=r[n]}),t.width=t.width,delete t[Es],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),n={attach:cn,detach:Ji,resize:dn}[t]||un;r[t]=n(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),r=s[t];r&&(({attach:lr,detach:lr,resize:lr}[t]||Pr)(e,t,r),s[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,r){return pi(e,t,s,r)}isAttached(e){const t=e&&ss(e);return!(!t||!t.isConnected)}}function Fr(i){return!is()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?Hi:Hr}var Nr=Object.freeze({__proto__:null,BasePlatform:$s,BasicPlatform:Hi,DomPlatform:Hr,_detectPlatform:Fr});const cr="transparent",Vs={boolean:(i,e,t)=>t>.5?e:i,color(i,e,t){const s=$t(i||cr),r=s.valid&&$t(e||cr);return r&&r.valid?r.mix(s,t).hexString():e},number:(i,e,t)=>i+(e-i)*t};class ks{constructor(e,t,s,r){const n=t[s];r=Xi([e.to,r,n,e.from]);const o=Xi([e.from,n,r]);this._active=!0,this._fn=e.fn||Vs[e.type||typeof o],this._easing=ds[e.easing]||ds.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const r=this._target[this._prop],n=s-this._start,o=this._duration-n;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=n,this._loop=!!e.loop,this._to=Xi([e.to,t,r,e.from]),this._from=Xi([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,r=this._prop,n=this._from,o=this._loop,a=this._to;let c;if(this._active=n!==a&&(o||t<s),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=n:(c=t/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(n,a,c))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][t]()}}class dr{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!p(e))return;const t=Object.keys(gt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const n=e[r];if(!p(n))return;const o={};for(const a of t)o[a]=n[a];(ne(n.properties)&&n.properties||[r]).forEach(a=>{a!==r&&s.has(a)||s.set(a,o)})})}_animateOptions(e,t){const s=t.options,r=function(o,a){if(!a)return;let c=o.options;return c?(c.$shared&&(o.options=c=Object.assign({},c,{$shared:!1,$animations:{}})),c):void(o.options=a)}(e,s);if(!r)return[];const n=this._createAnimations(r,s);return s.$shared&&function(o,a){const c=[],_=Object.keys(a);for(let S=0;S<_.length;S++){const b=o[_[S]];b&&b.active()&&c.push(b.wait())}return Promise.all(c)}(e.options.$animations,s).then(()=>{e.options=s},()=>{}),n}_createAnimations(e,t){const s=this._properties,r=[],n=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let c;for(c=o.length-1;c>=0;--c){const _=o[c];if(_.charAt(0)==="$")continue;if(_==="options"){r.push(...this._animateOptions(e,t));continue}const S=t[_];let b=n[_];const k=s.get(_);if(b){if(k&&b.active()){b.update(k,S,a);continue}b.cancel()}k&&k.duration?(n[_]=b=new ks(k,e,_,S),r.push(b)):e[_]=S}return r}update(e,t){if(this._properties.size===0)return void Object.assign(e,t);const s=this._createAnimations(e,t);return s.length?(Vt.add(this._chart,s),!0):void 0}}function Wr(i,e){const t=i&&i.options||{},s=t.reverse,r=t.min===void 0?e:0,n=t.max===void 0?e:0;return{start:s?n:r,end:s?r:n}}function gs(i,e){const t=[],s=i._getSortedDatasetMetas(e);let r,n;for(r=0,n=s.length;r<n;++r)t.push(s[r].index);return t}function Y(i,e,t,s={}){const r=i.keys,n=s.mode==="single";let o,a,c,_;if(e!==null){for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===t){if(s.all)continue;break}_=i.values[c],m(_)&&(n||e===0||X(e)===X(_))&&(e+=_)}return e}}function f(i,e){const t=i&&i.options.stacked;return t||t===void 0&&e.stack!==void 0}function O(i,e,t){const s=i[e]||(i[e]={});return s[t]||(s[t]={})}function q(i,e,t,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const n=i[r.index];if(t&&n>0||!t&&n<0)return r.index}return null}function de(i,e){const{chart:t,_cachedMeta:s}=i,r=t._stacks||(t._stacks={}),{iScale:n,vScale:o,index:a}=s,c=n.axis,_=o.axis,S=function(T,H,P){return`${T.id}.${H.id}.${P.stack||P.type}`}(n,o,s),b=e.length;let k;for(let T=0;T<b;++T){const H=e[T],{[c]:P,[_]:F}=H;k=(H._stacks||(H._stacks={}))[_]=O(r,S,P),k[a]=F,k._top=q(k,o,!0,s.type),k._bottom=q(k,o,!1,s.type),(k._visualValues||(k._visualValues={}))[a]=F}}function xe(i,e){const t=i.scales;return Object.keys(t).filter(s=>t[s].axis===e).shift()}function Re(i,e){const t=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){e=e||i._parsed;for(const r of e){const n=r._stacks;if(!n||n[s]===void 0||n[s][t]===void 0)return;delete n[s][t],n[s]._visualValues!==void 0&&n[s]._visualValues[t]!==void 0&&delete n[s]._visualValues[t]}}}const Qe=i=>i==="reset"||i==="none",St=(i,e)=>e?i:Object.assign({},i);class xt{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=f(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Re(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),r=(b,k,T,H)=>b==="x"?k:b==="r"?H:T,n=t.xAxisID=D(s.xAxisID,xe(e,"x")),o=t.yAxisID=D(s.yAxisID,xe(e,"y")),a=t.rAxisID=D(s.rAxisID,xe(e,"r")),c=t.indexAxis,_=t.iAxisID=r(c,n,o,a),S=t.vAxisID=r(c,o,n,a);t.xScale=this.getScaleForId(n),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(_),t.vScale=this.getScaleForId(S)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Gt(this._data,this),e._stacked&&Re(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(p(t)){const r=this._cachedMeta;this._data=function(n,o){const{iScale:a,vScale:c}=o,_=a.axis==="x"?"x":"y",S=c.axis==="x"?"x":"y",b=Object.keys(n),k=new Array(b.length);let T,H,P;for(T=0,H=b.length;T<H;++T)P=b[T],k[T]={[_]:P,[S]:n[P]};return k}(t,r)}else if(s!==t){if(s){Gt(s,this);const r=this._cachedMeta;Re(r),r._parsed=[]}t&&Object.isExtensible(t)&&ni(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const n=t._stacked;t._stacked=f(t.vScale,t),t.stack!==s.stack&&(r=!0,Re(t),t.stack=s.stack),this._resyncElements(e),(r||n!==t._stacked)&&de(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:r}=this,{iScale:n,_stacked:o}=s,a=n.axis;let c,_,S,b=e===0&&t===r.length||s._sorted,k=e>0&&s._parsed[e-1];if(this._parsing===!1)s._parsed=r,s._sorted=!0,S=r;else{S=ne(r[e])?this.parseArrayData(s,r,e,t):p(r[e])?this.parseObjectData(s,r,e,t):this.parsePrimitiveData(s,r,e,t);const T=()=>_[a]===null||k&&_[a]<k[a];for(c=0;c<t;++c)s._parsed[c+e]=_=S[c],b&&(T()&&(b=!1),k=_);s._sorted=b}o&&de(this,S)}parsePrimitiveData(e,t,s,r){const{iScale:n,vScale:o}=e,a=n.axis,c=o.axis,_=n.getLabels(),S=n===o,b=new Array(r);let k,T,H;for(k=0,T=r;k<T;++k)H=k+s,b[k]={[a]:S||n.parse(_[H],H),[c]:o.parse(t[H],H)};return b}parseArrayData(e,t,s,r){const{xScale:n,yScale:o}=e,a=new Array(r);let c,_,S,b;for(c=0,_=r;c<_;++c)S=c+s,b=t[S],a[c]={x:n.parse(b[0],S),y:o.parse(b[1],S)};return a}parseObjectData(e,t,s,r){const{xScale:n,yScale:o}=e,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,_=new Array(r);let S,b,k,T;for(S=0,b=r;S<b;++S)k=S+s,T=t[k],_[S]={x:n.parse(x(T,a),k),y:o.parse(x(T,c),k)};return _}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const r=this.chart,n=this._cachedMeta,o=t[e.axis];return Y({keys:gs(r,!0),values:t._stacks[e.axis]._visualValues},o,n.index,{mode:s})}updateRangeFromParsed(e,t,s,r){const n=s[t.axis];let o=n===null?NaN:n;const a=r&&s._stacks[t.axis];r&&a&&(r.values=a,o=Y(r,n,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const s=this._cachedMeta,r=s._parsed,n=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),c=((P,F,j)=>P&&!F.hidden&&F._stacked&&{keys:gs(j,!0),values:null})(t,s,this.chart),_={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:S,max:b}=function(P){const{min:F,max:j,minDefined:te,maxDefined:ee}=P.getUserBounds();return{min:te?F:Number.NEGATIVE_INFINITY,max:ee?j:Number.POSITIVE_INFINITY}}(a);let k,T;function H(){T=r[k];const P=T[a.axis];return!m(T[e.axis])||S>P||b<P}for(k=0;k<o&&(H()||(this.updateRangeFromParsed(_,e,T,c),!n));++k);if(n){for(k=o-1;k>=0;--k)if(!H()){this.updateRangeFromParsed(_,e,T,c);break}}return _}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let r,n,o;for(r=0,n=t.length;r<n;++r)o=t[r][e.axis],m(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,r=t.vScale,n=this.getParsed(e);return{label:s?""+s.getLabelForValue(n[s.axis]):"",value:r?""+r.getLabelForValue(n[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(s){let r,n,o,a;return p(s)?(r=s.top,n=s.right,o=s.bottom,a=s.left):r=n=o=a=s,{top:r,right:n,bottom:o,left:a,disabled:s===!1}}(D(this.options.clip,function(s,r,n){if(n===!1)return!1;const o=Wr(s,n),a=Wr(r,n);return{top:a.end,right:o.end,bottom:a.start,left:o.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,r=s.data||[],n=t.chartArea,o=[],a=this._drawStart||0,c=this._drawCount||r.length-a,_=this.options.drawActiveElementsOnTop;let S;for(s.dataset&&s.dataset.draw(e,n,a,c),S=a;S<a+c;++S){const b=r[S];b.hidden||(b.active&&_?o.push(b):b.draw(e,n))}for(S=0;S<o.length;++S)o[S].draw(e,n)}getStyle(e,t){const s=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const r=this.getDataset();let n;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];n=o.$context||(o.$context=function(a,c,_){return Kt(a,{active:!1,dataIndex:c,parsed:void 0,raw:void 0,element:_,index:c,mode:"default",type:"data"})}(this.getContext(),e,o)),n.parsed=this.getParsed(e),n.raw=r.data[e],n.index=n.dataIndex=e}else n=this.$context||(this.$context=function(o,a){return Kt(o,{active:!1,dataset:void 0,datasetIndex:a,index:a,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),n.dataset=r,n.index=n.datasetIndex=this.index;return n.active=!!t,n.mode=s,n}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const r=t==="active",n=this._cachedDataOpts,o=e+"-"+t,a=n[o],c=this.enableOptionSharing&&U(s);if(a)return St(a,c);const _=this.chart.config,S=_.datasetElementScopeKeys(this._type,e),b=r?[`${e}Hover`,"hover",e,""]:[e,""],k=_.getOptionScopes(this.getDataset(),S),T=Object.keys(gt.elements[e]),H=_.resolveNamedOptions(k,T,()=>this.getContext(s,r,t),b);return H.$shared&&(H.$shared=c,n[o]=Object.freeze(St(H,c))),H}_resolveAnimations(e,t,s){const r=this.chart,n=this._cachedDataOpts,o=`animation-${t}`,a=n[o];if(a)return a;let c;if(r.options.animation!==!1){const S=this.chart.config,b=S.datasetAnimationScopeKeys(this._type,t),k=S.getOptionScopes(this.getDataset(),b);c=S.createResolver(k,this.getContext(e,s,t))}const _=new dr(r,c&&c.animations);return c&&c._cacheable&&(n[o]=Object.freeze(_)),_}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Qe(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),r=this._sharedOptions,n=this.getSharedOptions(s),o=this.includeOptions(t,n)||n!==r;return this.updateSharedOptions(n,t,s),{sharedOptions:n,includeOptions:o}}updateElement(e,t,s,r){Qe(r)?Object.assign(e,s):this._resolveAnimations(t,r).update(e,s)}updateSharedOptions(e,t,s){e&&!Qe(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,r){e.active=r;const n=this.getStyle(t,r);this._resolveAnimations(t,s,r).update(e,{options:!r&&this.getSharedOptions(n)||n})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[a,c,_]of this._syncList)this[a](c,_);this._syncList=[];const r=s.length,n=t.length,o=Math.min(n,r);o&&this.parse(0,o),n>r?this._insertElements(r,n-r,e):n<r&&this._removeElements(n,r-n)}_insertElements(e,t,s=!0){const r=this._cachedMeta,n=r.data,o=e+t;let a;const c=_=>{for(_.length+=t,a=_.length-1;a>=o;a--)_[a]=_[a-t]};for(c(n),a=e;a<o;++a)n[a]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,t),s&&this.updateElements(n,e,t,"reset")}updateElements(e,t,s,r){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,t);s._stacked&&Re(s,r)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,r]=e;this[t](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Ct{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return ie(this.x)&&ie(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const r={};return e.forEach(n=>{r[n]=s[n]&&s[n].active()?s[n]._to:this[n]}),r}}function ci(i,e){const t=i.options.ticks,s=function(b){const k=b.options.offset,T=b._tickSize(),H=b._length/T+(k?0:1),P=b._maxLength/T;return Math.floor(Math.min(H,P))}(i),r=Math.min(t.maxTicksLimit||s,s),n=t.major.enabled?function(b){const k=[];let T,H;for(T=0,H=b.length;T<H;T++)b[T].major&&k.push(T);return k}(e):[],o=n.length,a=n[0],c=n[o-1],_=[];if(o>r)return function(b,k,T,H){let P,F=0,j=T[0];for(H=Math.ceil(H),P=0;P<b.length;P++)P===j&&(k.push(b[P]),F++,j=T[F*H])}(e,_,n,o/r),_;const S=function(b,k,T){const H=function(j){const te=j.length;let ee,Q;if(te<2)return!1;for(Q=j[0],ee=1;ee<te;++ee)if(j[ee]-j[ee-1]!==Q)return!1;return Q}(b),P=k.length/T;if(!H)return Math.max(P,1);const F=ze(H);for(let j=0,te=F.length-1;j<te;j++){const ee=F[j];if(ee>P)return ee}return Math.max(P,1)}(n,e,r);if(o>0){let b,k;const T=o>1?Math.round((c-a)/(o-1)):null;for(ti(e,_,S,Oe(T)?0:a-T,a),b=0,k=o-1;b<k;b++)ti(e,_,S,n[b],n[b+1]);return ti(e,_,S,c,Oe(T)?e.length:c+T),_}return ti(e,_,S),_}function ti(i,e,t,s,r){const n=D(s,0),o=Math.min(D(r,i.length),i.length);let a,c,_,S=0;for(t=Math.ceil(t),r&&(a=r-s,t=a/Math.floor(a/t)),_=n;_<0;)S++,_=Math.round(n+S*t);for(c=Math.max(n,0);c<o;c++)c===_&&(e.push(i[c]),S++,_=Math.round(n+S*t))}const gi=(i,e,t)=>e==="top"||e==="left"?i[e]+t:i[e]-t,Fi=(i,e)=>Math.min(e||i,i);function ii(i,e){const t=[],s=i.length/e,r=i.length;let n=0;for(;n<r;n+=s)t.push(i[Math.floor(n)]);return t}function Ds(i,e,t){const s=i.ticks.length,r=Math.min(e,s-1),n=i._startPixel,o=i._endPixel,a=1e-6;let c,_=i.getPixelForTick(r);if(!(t&&(c=s===1?Math.max(_-n,o-_):e===0?(i.getPixelForTick(1)-_)/2:(_-i.getPixelForTick(r-1))/2,_+=r<e?c:-c,_<n-a||_>o+a)))return _}function Ni(i){return i.drawTicks?i.tickLength:0}function zr(i,e){if(!i.display)return 0;const t=wt(i.font,e),s=At(i.padding);return(ne(i.text)?i.text.length:1)*t.lineHeight+s.height}function Zi(i,e,t){let s=tt(i);return(t&&e!=="right"||!t&&e==="right")&&(s=(r=>r==="left"?"right":r==="right"?"left":r)(s)),s}class Wi extends Ct{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:r}=this;return e=C(e,Number.POSITIVE_INFINITY),t=C(t,Number.NEGATIVE_INFINITY),s=C(s,Number.POSITIVE_INFINITY),r=C(r,Number.NEGATIVE_INFINITY),{min:C(e,s),max:C(t,r),minDefined:m(e),maxDefined:m(t)}}getMinMax(e){let t,{min:s,max:r,minDefined:n,maxDefined:o}=this.getUserBounds();if(n&&o)return{min:s,max:r};const a=this.getMatchingVisibleMetas();for(let c=0,_=a.length;c<_;++c)t=a[c].controller.getMinMax(this,e),n||(s=Math.min(s,t.min)),o||(r=Math.max(r,t.max));return s=o&&s>r?r:s,r=n&&s>r?s:r,{min:C(s,C(r,s)),max:C(r,C(s,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){M(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:r,grace:n,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=er(this,n,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=a<this.ticks.length;this._convertTicksToLabels(c?ii(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=ci(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,s=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,s=!s),this._startPixel=e,this._endPixel=t,this._reversePixels=s,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){M(this.options.afterUpdate,[this])}beforeSetDimensions(){M(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){M(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),M(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){M(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,r,n;for(s=0,r=e.length;s<r;s++)n=e[s],n.label=M(t.callback,[n.value,s,e],this)}afterTickToLabelConversion(){M(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){M(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=Fi(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,n=t.maxRotation;let o,a,c,_=r;if(!this._isVisible()||!t.display||r>=n||s<=1||!this.isHorizontal())return void(this.labelRotation=r);const S=this._getLabelSizes(),b=S.widest.width,k=S.highest.height,T=ot(this.chart.width-b,0,this.maxWidth);o=e.offset?this.maxWidth/s:T/(s-1),b+6>o&&(o=T/(s-(e.offset?.5:1)),a=this.maxHeight-Ni(e.grid)-t.padding-zr(e.title,this.chart.options.font),c=Math.sqrt(b*b+k*k),_=ae(Math.min(Math.asin(ot((S.highest.height+6)/o,-1,1)),Math.asin(ot(a/c,-1,1))-Math.asin(ot(k/c,-1,1)))),_=Math.max(r,Math.min(n,_))),this.labelRotation=_}afterCalculateLabelRotation(){M(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){M(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:r,grid:n}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const c=zr(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=Ni(n)+c):(e.height=this.maxHeight,e.width=Ni(n)+c),s.display&&this.ticks.length){const{first:_,last:S,widest:b,highest:k}=this._getLabelSizes(),T=2*s.padding,H=ue(this.labelRotation),P=Math.cos(H),F=Math.sin(H);if(a){const j=s.mirror?0:F*b.width+P*k.height;e.height=Math.min(this.maxHeight,e.height+j+T)}else{const j=s.mirror?0:P*b.width+F*k.height;e.width=Math.min(this.maxWidth,e.width+j+T)}this._calculatePadding(_,S,F,P)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,r){const{ticks:{align:n,padding:o},position:a}=this.options,c=this.labelRotation!==0,_=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const S=this.getPixelForTick(0)-this.left,b=this.right-this.getPixelForTick(this.ticks.length-1);let k=0,T=0;c?_?(k=r*e.width,T=s*t.height):(k=s*e.height,T=r*t.width):n==="start"?T=t.width:n==="end"?k=e.width:n!=="inner"&&(k=e.width/2,T=t.width/2),this.paddingLeft=Math.max((k-S+o)*this.width/(this.width-S),0),this.paddingRight=Math.max((T-b+o)*this.width/(this.width-b),0)}else{let S=t.height/2,b=e.height/2;n==="start"?(S=0,b=e.height):n==="end"&&(S=t.height,b=0),this.paddingTop=S+o,this.paddingBottom=b+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){M(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,s;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,s=e.length;t<s;t++)Oe(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=ii(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:r,_longestTextCache:n}=this,o=[],a=[],c=Math.floor(t/Fi(t,s));let _,S,b,k,T,H,P,F,j,te,ee,Q=0,he=0;for(_=0;_<t;_+=c){if(k=e[_].label,T=this._resolveTickFontOptions(_),r.font=H=T.string,P=n[H]=n[H]||{data:{},gc:[]},F=T.lineHeight,j=te=0,Oe(k)||ne(k)){if(ne(k))for(S=0,b=k.length;S<b;++S)ee=k[S],Oe(ee)||ne(ee)||(j=yi(r,P.data,P.gc,j,ee),te+=F)}else j=yi(r,P.data,P.gc,j,k),te=F;o.push(j),a.push(te),Q=Math.max(j,Q),he=Math.max(te,he)}(function(Ae,De){w(Ae,He=>{const Be=He.gc,Me=Be.length/2;let Te;if(Me>De){for(Te=0;Te<Me;++Te)delete He.data[Be[Te]];Be.splice(0,Me)}})})(n,t);const fe=o.indexOf(Q),me=a.indexOf(he),Ce=Ae=>({width:o[Ae]||0,height:a[Ae]||0});return{first:Ce(0),last:Ce(t-1),widest:Ce(fe),highest:Ce(me),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Ft(this._alignToPixels?Qt(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=function(r,n,o){return Kt(r,{tick:o,index:n,type:"tick"})}(this.getContext(),e,s))}return this.$context||(this.$context=Kt(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=ue(this.labelRotation),s=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),n=this._getLabelSizes(),o=e.autoSkipPadding||0,a=n?n.widest.width+o:0,c=n?n.highest.height+o:0;return this.isHorizontal()?c*s>a*r?a/s:c/r:c*r<a*s?c/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,r=this.options,{grid:n,position:o,border:a}=r,c=n.offset,_=this.isHorizontal(),S=this.ticks.length+(c?1:0),b=Ni(n),k=[],T=a.setContext(this.getContext()),H=T.display?T.width:0,P=H/2,F=function(Le){return Qt(s,Le,H)};let j,te,ee,Q,he,fe,me,Ce,Ae,De,He,Be;if(o==="top")j=F(this.bottom),fe=this.bottom-b,Ce=j-P,De=F(e.top)+P,Be=e.bottom;else if(o==="bottom")j=F(this.top),De=e.top,Be=F(e.bottom)-P,fe=j+P,Ce=this.top+b;else if(o==="left")j=F(this.right),he=this.right-b,me=j-P,Ae=F(e.left)+P,He=e.right;else if(o==="right")j=F(this.left),Ae=e.left,He=F(e.right)-P,he=j+P,me=this.left+b;else if(t==="x"){if(o==="center")j=F((e.top+e.bottom)/2+.5);else if(p(o)){const Le=Object.keys(o)[0],Ve=o[Le];j=F(this.chart.scales[Le].getPixelForValue(Ve))}De=e.top,Be=e.bottom,fe=j+P,Ce=fe+b}else if(t==="y"){if(o==="center")j=F((e.left+e.right)/2);else if(p(o)){const Le=Object.keys(o)[0],Ve=o[Le];j=F(this.chart.scales[Le].getPixelForValue(Ve))}he=j-P,me=he-b,Ae=e.left,He=e.right}const Me=D(r.ticks.maxTicksLimit,S),Te=Math.max(1,Math.ceil(S/Me));for(te=0;te<S;te+=Te){const Le=this.getContext(te),Ve=n.setContext(Le),_t=a.setContext(Le),lt=Ve.lineWidth,zt=Ve.color,di=_t.dash||[],ui=_t.dashOffset,mi=Ve.tickWidth,Ei=Ve.tickColor,ki=Ve.tickBorderDash||[],Di=Ve.tickBorderDashOffset;ee=Ds(this,te,c),ee!==void 0&&(Q=Qt(s,ee,lt),_?he=me=Ae=He=Q:fe=Ce=De=Be=Q,k.push({tx1:he,ty1:fe,tx2:me,ty2:Ce,x1:Ae,y1:De,x2:He,y2:Be,width:lt,color:zt,borderDash:di,borderDashOffset:ui,tickWidth:mi,tickColor:Ei,tickBorderDash:ki,tickBorderDashOffset:Di}))}return this._ticksLength=S,this._borderValue=j,k}_computeLabelItems(e){const t=this.axis,s=this.options,{position:r,ticks:n}=s,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:_,padding:S,mirror:b}=n,k=Ni(s.grid),T=k+S,H=b?-S:T,P=-ue(this.labelRotation),F=[];let j,te,ee,Q,he,fe,me,Ce,Ae,De,He,Be,Me="middle";if(r==="top")fe=this.bottom-H,me=this._getXAxisLabelAlignment();else if(r==="bottom")fe=this.top+H,me=this._getXAxisLabelAlignment();else if(r==="left"){const Le=this._getYAxisLabelAlignment(k);me=Le.textAlign,he=Le.x}else if(r==="right"){const Le=this._getYAxisLabelAlignment(k);me=Le.textAlign,he=Le.x}else if(t==="x"){if(r==="center")fe=(e.top+e.bottom)/2+T;else if(p(r)){const Le=Object.keys(r)[0],Ve=r[Le];fe=this.chart.scales[Le].getPixelForValue(Ve)+T}me=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")he=(e.left+e.right)/2-T;else if(p(r)){const Le=Object.keys(r)[0],Ve=r[Le];he=this.chart.scales[Le].getPixelForValue(Ve)}me=this._getYAxisLabelAlignment(k).textAlign}t==="y"&&(c==="start"?Me="top":c==="end"&&(Me="bottom"));const Te=this._getLabelSizes();for(j=0,te=a.length;j<te;++j){ee=a[j],Q=ee.label;const Le=n.setContext(this.getContext(j));Ce=this.getPixelForTick(j)+n.labelOffset,Ae=this._resolveTickFontOptions(j),De=Ae.lineHeight,He=ne(Q)?Q.length:1;const Ve=He/2,_t=Le.color,lt=Le.textStrokeColor,zt=Le.textStrokeWidth;let di,ui=me;if(o?(he=Ce,me==="inner"&&(ui=j===te-1?this.options.reverse?"left":"right":j===0?this.options.reverse?"right":"left":"center"),Be=r==="top"?_==="near"||P!==0?-He*De+De/2:_==="center"?-Te.highest.height/2-Ve*De+De:-Te.highest.height+De/2:_==="near"||P!==0?De/2:_==="center"?Te.highest.height/2-Ve*De:Te.highest.height-He*De,b&&(Be*=-1),P===0||Le.showLabelBackdrop||(he+=De/2*Math.sin(P))):(fe=Ce,Be=(1-He)*De/2),Le.showLabelBackdrop){const mi=At(Le.backdropPadding),Ei=Te.heights[j],ki=Te.widths[j];let Di=Be-mi.top,Mi=0-mi.left;switch(Me){case"middle":Di-=Ei/2;break;case"bottom":Di-=Ei}switch(me){case"center":Mi-=ki/2;break;case"right":Mi-=ki;break;case"inner":j===te-1?Mi-=ki:j>0&&(Mi-=ki/2)}di={left:Mi,top:Di,width:ki+mi.width,height:Ei+mi.height,color:Le.backdropColor}}F.push({label:Q,font:Ae,textOffset:Be,options:{rotation:P,color:_t,strokeColor:lt,strokeWidth:zt,textAlign:ui,textBaseline:Me,translation:[he,fe],backdrop:di}})}return F}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-ue(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:r,padding:n}}=this.options,o=e+n,a=this._getLabelSizes().widest.width;let c,_;return t==="left"?r?(_=this.right+n,s==="near"?c="left":s==="center"?(c="center",_+=a/2):(c="right",_+=a)):(_=this.right-o,s==="near"?c="right":s==="center"?(c="center",_-=a/2):(c="left",_=this.left)):t==="right"?r?(_=this.left+n,s==="near"?c="right":s==="center"?(c="center",_-=a/2):(c="left",_-=a)):(_=this.left+o,s==="near"?c="left":s==="center"?(c="center",_+=a/2):(c="right",_=this.right)):c="right",{textAlign:c,x:_}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return t==="left"||t==="right"?{top:0,left:this.left,bottom:e.height,right:this.right}:t==="top"||t==="bottom"?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:r,width:n,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,r,n,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let n,o;const a=(c,_,S)=>{S.width&&S.color&&(s.save(),s.lineWidth=S.width,s.strokeStyle=S.color,s.setLineDash(S.borderDash||[]),s.lineDashOffset=S.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(_.x,_.y),s.stroke(),s.restore())};if(t.display)for(n=0,o=r.length;n<o;++n){const c=r[n];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:r}}=this,n=s.setContext(this.getContext()),o=s.display?n.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let _,S,b,k;this.isHorizontal()?(_=Qt(e,this.left,o)-o/2,S=Qt(e,this.right,a)+a/2,b=k=c):(b=Qt(e,this.top,o)-o/2,k=Qt(e,this.bottom,a)+a/2,_=S=c),t.save(),t.lineWidth=n.width,t.strokeStyle=n.color,t.beginPath(),t.moveTo(_,b),t.lineTo(S,k),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,s=this._computeLabelArea();s&&Oi(t,s);const r=this.getLabelItems(e);for(const n of r){const o=n.options,a=n.font;Ri(t,n.label,0,n.textOffset,a,o)}s&&bs(t)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:r}}=this;if(!s.display)return;const n=wt(s.font),o=At(s.padding),a=s.align;let c=n.lineHeight/2;t==="bottom"||t==="center"||p(t)?(c+=o.bottom,ne(s.text)&&(c+=n.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:_,titleY:S,maxWidth:b,rotation:k}=function(T,H,P,F){const{top:j,left:te,bottom:ee,right:Q,chart:he}=T,{chartArea:fe,scales:me}=he;let Ce,Ae,De,He=0;const Be=ee-j,Me=Q-te;if(T.isHorizontal()){if(Ae=ut(F,te,Q),p(P)){const Te=Object.keys(P)[0],Le=P[Te];De=me[Te].getPixelForValue(Le)+Be-H}else De=P==="center"?(fe.bottom+fe.top)/2+Be-H:gi(T,P,H);Ce=Q-te}else{if(p(P)){const Te=Object.keys(P)[0],Le=P[Te];Ae=me[Te].getPixelForValue(Le)-Me+H}else Ae=P==="center"?(fe.left+fe.right)/2-Me+H:gi(T,P,H);De=ut(F,ee,j),He=P==="left"?-B:B}return{titleX:Ae,titleY:De,maxWidth:Ce,rotation:He}}(this,c,t,a);Ri(e,s.text,0,0,n,{color:s.color,maxWidth:b,rotation:k,textAlign:Zi(a,t,r),textBaseline:"middle",translation:[_,S]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=D(e.grid&&e.grid.z,-1),r=D(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Wi.prototype.draw?[{z:s,draw:n=>{this.drawBackground(),this.drawGrid(n),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:n=>{this.drawLabels(n)}}]:[{z:t,draw:n=>{this.draw(n)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let n,o;for(n=0,o=t.length;n<o;++n){const a=t[n];a[s]!==this.id||e&&a.type!==e||r.push(a)}return r}_resolveTickFontOptions(e){return wt(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class jr{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;(function(a){return"id"in a&&"defaults"in a})(t)&&(s=this.register(t));const r=this.items,n=e.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+e);return n in r||(r[n]=e,function(a,c,_){const S=d(Object.create(null),[_?gt.get(_):{},gt.get(c),a.defaults]);gt.set(c,S),a.defaultRoutes&&function(b,k){Object.keys(k).forEach(T=>{const H=T.split("."),P=H.pop(),F=[b].concat(H).join("."),j=k[T].split("."),te=j.pop(),ee=j.join(".");gt.route(F,P,ee,te)})}(c,a.defaultRoutes),a.descriptors&&gt.describe(c,a.descriptors)}(e,o,s),this.override&&gt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,r=this.scope;s in t&&delete t[s],r&&s in gt[r]&&(delete gt[r][s],this.override&&delete Zt[s])}}class Io{constructor(){this.controllers=new jr(xt,"datasets",!0),this.elements=new jr(Ct,"elements"),this.plugins=new jr(Object,"plugins"),this.scales=new jr(Wi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,s){[...t].forEach(r=>{const n=s||this._getRegistryForType(r);s||n.isForType(r)||n===this.plugins&&r.id?this._exec(e,n,r):w(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,s){const r=I(e);M(s["before"+r],[],s),t[e](s),M(s["after"+r],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var Ci=new Io;class Ho{constructor(){this._init=[]}notify(e,t,s,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const n=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(n,e,t,s);return t==="afterDestroy"&&(this._notify(n,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,s,r){r=r||{};for(const n of e){const o=n.plugin;if(M(o[s],[t,r,n.options],o)===!1&&r.cancelable)return!1}return!0}invalidate(){Oe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,r=D(s.options&&s.options.plugins,{}),n=function(o){const a={},c=[],_=Object.keys(Ci.plugins.items);for(let b=0;b<_.length;b++)c.push(Ci.getPlugin(_[b]));const S=o.plugins||[];for(let b=0;b<S.length;b++){const k=S[b];c.indexOf(k)===-1&&(c.push(k),a[k.id]=!0)}return{plugins:c,localIds:a}}(s);return r!==!1||t?function(o,{plugins:a,localIds:c},_,S){const b=[],k=o.getContext();for(const T of a){const H=T.id,P=Fo(_[H],S);P!==null&&b.push({plugin:T,options:No(o.config,{plugin:T,local:c[H]},P,k)})}return b}(e,n,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,r=(n,o)=>n.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(r(t,s),e,"stop"),this._notify(r(s,t),e,"start")}}function Fo(i,e){return e||i!==!1?i===!0?{}:i:null}function No(i,{plugin:e,local:t},s,r){const n=i.pluginScopeKeys(e),o=i.getOptionScopes(s,n);return t&&e.defaults&&o.push(e.defaults),i.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function fn(i,e){const t=gt.datasets[i]||{};return((e.datasets||{})[i]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function An(i){if(i==="x"||i==="y"||i==="r")return i}function _n(i,...e){if(An(i))return i;for(const s of e){const r=s.axis||((t=s.position)==="top"||t==="bottom"?"x":t==="left"||t==="right"?"y":void 0)||i.length>1&&An(i[0].toLowerCase());if(r)return r}var t;throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Ln(i,e,t){if(t[e+"AxisID"]===i)return{axis:e}}function Wo(i,e){const t=Zt[i.type]||{scales:{}},s=e.scales||{},r=fn(i.type,e),n=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!p(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=_n(o,a,function(b,k){if(k.data&&k.data.datasets){const T=k.data.datasets.filter(H=>H.xAxisID===b||H.yAxisID===b);if(T.length)return Ln(b,"x",T[0])||Ln(b,"y",T[0])}return{}}(o,i),gt.scales[a.type]),_=function(b,k){return b===k?"_index_":"_value_"}(c,r),S=t.scales||{};n[o]=y(Object.create(null),[{axis:c},a,S[c],S[_]])}),i.data.datasets.forEach(o=>{const a=o.type||i.type,c=o.indexAxis||fn(a,e),_=(Zt[a]||{}).scales||{};Object.keys(_).forEach(S=>{const b=function(T,H){let P=T;return T==="_index_"?P=H:T==="_value_"&&(P=H==="x"?"y":"x"),P}(S,c),k=o[b+"AxisID"]||b;n[k]=n[k]||Object.create(null),y(n[k],[{axis:b},s[k],_[S]])})}),Object.keys(n).forEach(o=>{const a=n[o];y(a,[gt.scales[a.type],gt.scale])}),n}function Tn(i){const e=i.options||(i.options={});e.plugins=D(e.plugins,{}),e.scales=Wo(i,e)}function On(i){return(i=i||{}).datasets=i.datasets||[],i.labels=i.labels||[],i}const Rn=new Map,Pn=new Set;function $r(i,e){let t=Rn.get(i);return t||(t=e(),Rn.set(i,t),Pn.add(t)),t}const ur=(i,e,t)=>{const s=x(e,t);s!==void 0&&i.add(s)};class zo{constructor(e){this._config=function(t){return(t=t||{}).data=On(t.data),Tn(t),t}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=On(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Tn(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return $r(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return $r(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return $r(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return $r(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let r=s.get(e);return r&&!t||(r=new Map,s.set(e,r)),r}getOptionScopes(e,t,s){const{options:r,type:n}=this,o=this._cachedScopes(e,s),a=o.get(t);if(a)return a;const c=new Set;t.forEach(S=>{e&&(c.add(e),S.forEach(b=>ur(c,e,b))),S.forEach(b=>ur(c,r,b)),S.forEach(b=>ur(c,Zt[n]||{},b)),S.forEach(b=>ur(c,gt,b)),S.forEach(b=>ur(c,Li,b))});const _=Array.from(c);return _.length===0&&_.push(Object.create(null)),Pn.has(t)&&o.set(t,_),_}chartOptionScopes(){const{options:e,type:t}=this;return[e,Zt[t]||{},gt.datasets[t]||{},{type:t},gt,Li]}resolveNamedOptions(e,t,s,r=[""]){const n={$shared:!0},{resolver:o,subPrefixes:a}=Bn(this._resolverCache,e,r);let c=o;(function(_,S){const{isScriptable:b,isIndexable:k}=Bs(_);for(const T of S){const H=b(T),P=k(T),F=(P||H)&&_[T];if(H&&($(F)||jo(F))||P&&ne(F))return!0}return!1})(o,t)&&(n.$shared=!1,c=Ki(o,s=$(s)?s():s,this.createResolver(e,s,a)));for(const _ of t)n[_]=c[_];return n}createResolver(e,t,s=[""],r){const{resolver:n}=Bn(this._resolverCache,e,s);return p(t)?Ki(n,t,void 0,r):n}}function Bn(i,e,t){let s=i.get(e);s||(s=new Map,i.set(e,s));const r=t.join();let n=s.get(r);return n||(n={resolver:Ps(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},s.set(r,n)),n}const jo=i=>p(i)&&Object.getOwnPropertyNames(i).some(e=>$(i[e])),$o=["top","bottom","left","right","chartArea"];function In(i,e){return i==="top"||i==="bottom"||$o.indexOf(i)===-1&&e==="x"}function Hn(i,e){return function(t,s){return t[i]===s[i]?t[e]-s[e]:t[i]-s[i]}}function Fn(i){const e=i.chart,t=e.options.animation;e.notifyPlugins("afterRender"),M(t&&t.onComplete,[i],e)}function Uo(i){const e=i.chart,t=e.options.animation;M(t&&t.onProgress,[i],e)}function Nn(i){return is()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const Ur={},Wn=i=>{const e=Nn(i);return Object.values(Ur).filter(t=>t.canvas===e).pop()};function Vo(i,e,t){const s=Object.keys(i);for(const r of s){const n=+r;if(n>=e){const o=i[r];delete i[r],(t>0||n>e)&&(i[n+t]=o)}}}function Vr(i,e,t){return i.options.clip?i[t]:e[t]}class Tt{static defaults=gt;static instances=Ur;static overrides=Zt;static registry=Ci;static version="4.4.3";static getChart=Wn;static register(...e){Ci.add(...e),zn()}static unregister(...e){Ci.remove(...e),zn()}constructor(e,t){const s=this.config=new zo(t),r=Nn(e),n=Wn(r);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Fr(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),c=a&&a.canvas,_=c&&c.height,S=c&&c.width;this.id=ct(),this.ctx=a,this.canvas=c,this.width=S,this.height=_,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Ho,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Wt(b=>this.update(b),o.resizeDelay||0),this._dataChanges=[],Ur[this.id]=this,a&&c?(Vt.listen(this,"complete",Fn),Vt.listen(this,"progress",Uo),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:r,_aspectRatio:n}=this;return Oe(e)?t&&n?n:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ci}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ti(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Si(this.canvas,this.ctx),this}stop(){return Vt.stop(this),this}resize(e,t){Vt.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,r=this.canvas,n=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,n),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ti(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),M(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){w(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let n=[];t&&(n=n.concat(Object.keys(t).map(o=>{const a=t[o],c=_n(o,a),_=c==="r",S=c==="x";return{options:a,dposition:_?"chartArea":S?"bottom":"left",dtype:_?"radialLinear":S?"category":"linear"}}))),w(n,o=>{const a=o.options,c=a.id,_=_n(c,a),S=D(a.type,o.dtype);a.position!==void 0&&In(a.position,_)===In(o.dposition)||(a.position=o.dposition),r[c]=!0;let b=null;c in s&&s[c].type===S?b=s[c]:(b=new(Ci.getScale(S))({id:c,type:S,ctx:this.ctx,chart:this}),s[b.id]=b),b.init(a,e)}),w(r,(o,a)=>{o||delete s[a]}),w(s,o=>{Lt.configure(this,o,o.options),Lt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((r,n)=>r.index-n.index),s>t){for(let r=t;r<s;++r)this._destroyDatasetMeta(r);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(Hn("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,r)=>{t.filter(n=>n===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=t.length;s<r;s++){const n=t[s];let o=this.getDatasetMeta(s);const a=n.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=n.indexAxis||fn(a,this.options),o.order=n.order||0,o.index=s,o.label=""+n.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=Ci.getController(a),{datasetElementType:_,dataElementType:S}=gt.datasets[a];Object.assign(c,{dataElementType:Ci.getElement(S),datasetElementType:_&&Ci.getElement(_)}),o.controller=new c(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){w(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let _=0,S=this.data.datasets.length;_<S;_++){const{controller:b}=this.getDatasetMeta(_),k=!r&&n.indexOf(b)===-1;b.buildOrUpdateElements(k),o=Math.max(+b.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||w(n,_=>{_.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Hn("z","_idx"));const{_active:a,_lastEvent:c}=this;c?this._eventHandler(c,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){w(this.scales,e=>{Lt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);Z(t,s)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:n}of t)Vo(e,r,s==="_removeElements"?-n:n)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=n=>new Set(e.filter(o=>o[0]===n).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let n=1;n<t;n++)if(!Z(r,s(n)))return;return Array.from(r).map(n=>n.split(",")).map(n=>({method:n[1],start:+n[2],count:+n[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Lt.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],w(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,n)=>{r._idx=n}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,$(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Vt.has(this)?this.attached&&!Vt.running(this)&&Vt.start(this):(this.draw(),Fn({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resize(s,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let r,n;for(r=0,n=t.length;r<n;++r){const o=t[r];e&&!o.visible||s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s=e._clip,r=!s.disabled,n=function(a,c){const{xScale:_,yScale:S}=a;return _&&S?{left:Vr(_,c,"left"),right:Vr(_,c,"right"),top:Vr(S,c,"top"),bottom:Vr(S,c,"bottom")}:c}(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&Oi(t,{left:s.left===!1?0:n.left-s.left,right:s.right===!1?this.width:n.right+s.right,top:s.top===!1?0:n.top-s.top,bottom:s.bottom===!1?this.height:n.bottom+s.bottom}),e.controller.draw(),r&&bs(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return vt(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,r){const n=fs.modes[t];return typeof n=="function"?n(this,e,s,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let r=s.filter(n=>n&&n._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Kt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const r=s?"show":"hide",n=this.getDatasetMeta(e),o=n.controller._resolveAnimations(void 0,r);U(t)?(n.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(n,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Vt.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Si(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Ur[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(n,o)=>{t.addEventListener(this,n,o),e[n]=o},r=(n,o,a)=>{n.offsetX=o,n.offsetY=a,this._eventHandler(n)};w(this.options.events,n=>s(n,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(c,_)=>{t.addEventListener(this,c,_),e[c]=_},r=(c,_)=>{e[c]&&(t.removeEventListener(this,c,_),delete e[c])},n=(c,_)=>{this.canvas&&this.resize(c,_)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",n),s("detach",o)};o=()=>{this.attached=!1,r("resize",n),this._stop(),this._resize(0,0),s("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){w(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},w(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const r=s?"set":"remove";let n,o,a,c;for(t==="dataset"&&(n=this.getDatasetMeta(e[0].datasetIndex),n.controller["_"+r+"DatasetHoverStyle"]()),a=0,c=e.length;a<c;++a){o=e[a];const _=o&&this.getDatasetMeta(o.datasetIndex).controller;_&&_[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:r,index:n})=>{const o=this.getDatasetMeta(r);if(!o)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:o.data[n],index:n}});!g(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,s){const r=this.options.hover,n=(c,_)=>c.filter(S=>!_.some(b=>S.datasetIndex===b.datasetIndex&&S.index===b.index)),o=n(t,e),a=s?e:n(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const n=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(n||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:r=[],options:n}=this,o=t,a=this._getActiveElements(e,r,s,o),c=W(e),_=function(b,k,T,H){return T&&b.type!=="mouseout"?H?k:b:null}(e,this._lastEvent,s,c);s&&(this._lastEvent=null,M(n.onHover,[e,a,this],this),c&&M(n.onClick,[e,a,this],this));const S=!g(a,r);return(S||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=_,S}_getActiveElements(e,t,s,r){if(e.type==="mouseout")return[];if(!s)return t;const n=this.options.hover;return this.getElementsAtEventForMode(e,n.mode,n,r)}}function zn(){return w(Tt.instances,i=>i._plugins.invalidate())}function Ms(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pn{static override(e){Object.assign(pn.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ms()}parse(){return Ms()}format(){return Ms()}add(){return Ms()}diff(){return Ms()}startOf(){return Ms()}endOf(){return Ms()}}var jn={_date:pn};function qo(i){const e=i.iScale,t=function(_,S){if(!_._cache.$bar){const b=_.getMatchingVisibleMetas(S);let k=[];for(let T=0,H=b.length;T<H;T++)k=k.concat(b[T].controller.getAllParsedValues(_));_._cache.$bar=bt(k.sort((T,H)=>T-H))}return _._cache.$bar}(e,i.type);let s,r,n,o,a=e._length;const c=()=>{n!==32767&&n!==-32768&&(U(o)&&(a=Math.min(a,Math.abs(n-o)||a)),o=n)};for(s=0,r=t.length;s<r;++s)n=e.getPixelForValue(t[s]),c();for(o=void 0,s=0,r=e.ticks.length;s<r;++s)n=e.getPixelForTick(s),c();return a}function $n(i,e,t,s){return ne(i)?function(r,n,o,a){const c=o.parse(r[0],a),_=o.parse(r[1],a),S=Math.min(c,_),b=Math.max(c,_);let k=S,T=b;Math.abs(S)>Math.abs(b)&&(k=b,T=S),n[o.axis]=T,n._custom={barStart:k,barEnd:T,start:c,end:_,min:S,max:b}}(i,e,t,s):e[t.axis]=t.parse(i,s),e}function Un(i,e,t,s){const r=i.iScale,n=i.vScale,o=r.getLabels(),a=r===n,c=[];let _,S,b,k;for(_=t,S=t+s;_<S;++_)k=e[_],b={},b[r.axis]=a||r.parse(o[_],_),c.push($n(k,b,n,_));return c}function gn(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function Ko(i,e,t,s){let r=e.borderSkipped;const n={};if(!r)return void(i.borderSkipped=n);if(r===!0)return void(i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:c,top:_,bottom:S}=function(b){let k,T,H,P,F;return b.horizontal?(k=b.base>b.x,T="left",H="right"):(k=b.base<b.y,T="bottom",H="top"),k?(P="end",F="start"):(P="start",F="end"),{start:T,end:H,reverse:k,top:P,bottom:F}}(i);r==="middle"&&t&&(i.enableBorderRadius=!0,(t._top||0)===s?r=_:(t._bottom||0)===s?r=S:(n[Vn(S,o,a,c)]=!0,r=_)),n[Vn(r,o,a,c)]=!0,i.borderSkipped=n}function Vn(i,e,t,s){var r,n,o;return s?(o=t,i=qn(i=(r=i)===(n=e)?o:r===o?n:r,t,e)):i=qn(i,e,t),i}function qn(i,e,t){return i==="start"?e:i==="end"?t:i}function Yo(i,{inflateAmount:e},t){i.inflateAmount=e==="auto"?t===1?.33:0:e}class mn extends xt{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:r}}=e.legend.options;return t.labels.map((n,o)=>{const a=e.getDatasetMeta(0).controller.getStyle(o);return{text:n,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let n,o,a=c=>+s[c];if(p(s[e])){const{key:c="value"}=this._parsing;a=_=>+x(s[_],c)}for(n=e,o=e+t;n<o;++n)r._parsed[n]=a(n)}}_getRotation(){return ue(this.options.rotation-90)}_getCircumference(){return ue(this.options.circumference)}_getRotationExtents(){let e=ce,t=-ce;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,n=r._getRotation(),o=r._getCircumference();e=Math.min(e,n),t=Math.max(t,n+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,r=this._cachedMeta,n=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(v(this.options.cutout,a),1),_=this._getRingWeight(this.index),{circumference:S,rotation:b}=this._getRotationExtents(),{ratioX:k,ratioY:T,offsetX:H,offsetY:P}=function(he,fe,me){let Ce=1,Ae=1,De=0,He=0;if(fe<ce){const Be=he,Me=Be+fe,Te=Math.cos(Be),Le=Math.sin(Be),Ve=Math.cos(Me),_t=Math.sin(Me),lt=(ki,Di,Mi)=>je(ki,Be,Me,!0)?1:Math.max(Di,Di*me,Mi,Mi*me),zt=(ki,Di,Mi)=>je(ki,Be,Me,!0)?-1:Math.min(Di,Di*me,Mi,Mi*me),di=lt(0,Te,Ve),ui=lt(B,Le,_t),mi=zt(se,Te,Ve),Ei=zt(se+B,Le,_t);Ce=(di-mi)/2,Ae=(ui-Ei)/2,De=-(di+mi)/2,He=-(ui+Ei)/2}return{ratioX:Ce,ratioY:Ae,offsetX:De,offsetY:He}}(b,S,c),F=(s.width-o)/k,j=(s.height-o)/T,te=Math.max(Math.min(F,j)/2,0),ee=E(this.options.radius,te),Q=(ee-Math.max(ee*c,0))/this._getVisibleDatasetWeightTotal();this.offsetX=H*ee,this.offsetY=P*ee,r.total=this.calculateTotal(),this.outerRadius=ee-Q*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Q*_,0),this.updateElements(n,0,n.length,e)}_circumference(e,t){const s=this.options,r=this._cachedMeta,n=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*n/ce)}updateElements(e,t,s,r){const n=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,_=(a.left+a.right)/2,S=(a.top+a.bottom)/2,b=n&&c.animateScale,k=b?0:this.innerRadius,T=b?0:this.outerRadius,{sharedOptions:H,includeOptions:P}=this._getSharedOptions(t,r);let F,j=this._getRotation();for(F=0;F<t;++F)j+=this._circumference(F,n);for(F=t;F<t+s;++F){const te=this._circumference(F,n),ee=e[F],Q={x:_+this.offsetX,y:S+this.offsetY,startAngle:j,endAngle:j+te,circumference:te,outerRadius:T,innerRadius:k};P&&(Q.options=H||this.resolveDataElementOptions(F,ee.active?"active":r)),j+=te,this.updateElement(ee,F,Q,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s,r=0;for(s=0;s<t.length;s++){const n=e._parsed[s];n===null||isNaN(n)||!this.chart.getDataVisibility(s)||t[s].hidden||(r+=Math.abs(n))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ce*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,r=s.data.labels||[],n=Mt(t._parsed[e],s.options.locale);return{label:r[e]||"",value:n}}getMaxBorderWidth(e){let t=0;const s=this.chart;let r,n,o,a,c;if(!e){for(r=0,n=s.data.datasets.length;r<n;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,n=e.length;r<n;++r)c=a.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(t=Math.max(t,c.borderWidth||0,c.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,r=e.length;s<r;++s){const n=this.resolveDataElementOptions(s);t=Math.max(t,n.offset||0,n.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(D(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Kn extends xt{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:r}}=e.legend.options;return t.labels.map((n,o)=>{const a=e.getDatasetMeta(0).controller.getStyle(o);return{text:n,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,r=s.data.labels||[],n=Mt(t._parsed[e].r,s.options.locale);return{label:r[e]||"",value:n}}parseObjectData(e,t,s,r){return Hs.bind(this)(e,t,s,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((s,r)=>{const n=this.getParsed(r).r;!isNaN(n)&&this.chart.getDataVisibility(r)&&(n<t.min&&(t.min=n),n>t.max&&(t.max=n))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,s=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),n=Math.max(r/2,0),o=(n-Math.max(s.cutoutPercentage?n/100*s.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=n-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,s,r){const n=r==="reset",o=this.chart,a=o.options.animation,c=this._cachedMeta.rScale,_=c.xCenter,S=c.yCenter,b=c.getIndexAngle(0)-.5*se;let k,T=b;const H=360/this.countVisibleElements();for(k=0;k<t;++k)T+=this._computeAngle(k,r,H);for(k=t;k<t+s;k++){const P=e[k];let F=T,j=T+this._computeAngle(k,r,H),te=o.getDataVisibility(k)?c.getDistanceFromCenterForValue(this.getParsed(k).r):0;T=j,n&&(a.animateScale&&(te=0),a.animateRotate&&(F=j=b));const ee={x:_,y:S,innerRadius:0,outerRadius:te,startAngle:F,endAngle:j,options:this.resolveDataElementOptions(k,P.active?"active":r)};this.updateElement(P,k,ee,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((s,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&t++}),t}_computeAngle(e,t,s){return this.chart.getDataVisibility(e)?ue(this.resolveDataElementOptions(e,t).angle||s):0}}var Yn=Object.freeze({__proto__:null,BarController:class extends xt{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(i,e,t,s){return Un(i,e,t,s)}parseArrayData(i,e,t,s){return Un(i,e,t,s)}parseObjectData(i,e,t,s){const{iScale:r,vScale:n}=i,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c=r.axis==="x"?o:a,_=n.axis==="x"?o:a,S=[];let b,k,T,H;for(b=t,k=t+s;b<k;++b)H=e[b],T={},T[r.axis]=r.parse(x(H,c),b),S.push($n(x(H,_),T,n,b));return S}updateRangeFromParsed(i,e,t,s){super.updateRangeFromParsed(i,e,t,s);const r=t._custom;r&&e===this._cachedMeta.vScale&&(i.min=Math.min(i.min,r.min),i.max=Math.max(i.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(i){const e=this._cachedMeta,{iScale:t,vScale:s}=e,r=this.getParsed(i),n=r._custom,o=gn(n)?"["+n.start+", "+n.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+t.getLabelForValue(r[t.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(i){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,i)}updateElements(i,e,t,s){const r=s==="reset",{index:n,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),c=o.isHorizontal(),_=this._getRuler(),{sharedOptions:S,includeOptions:b}=this._getSharedOptions(e,s);for(let k=e;k<e+t;k++){const T=this.getParsed(k),H=r||Oe(T[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(k),P=this._calculateBarIndexPixels(k,_),F=(T._stacks||{})[o.axis],j={horizontal:c,base:H.base,enableBorderRadius:!F||gn(T._custom)||n===F._top||n===F._bottom,x:c?H.head:P.center,y:c?P.center:H.head,height:c?P.size:Math.abs(H.size),width:c?Math.abs(H.size):P.size};b&&(j.options=S||this.resolveDataElementOptions(k,i[k].active?"active":s));const te=j.options||i[k].options;Ko(j,te,F,n),Yo(j,te,_.ratio),this.updateElement(i[k],k,j,s)}}_getStacks(i,e){const{iScale:t}=this._cachedMeta,s=t.getMatchingVisibleMetas(this._type).filter(a=>a.controller.options.grouped),r=t.options.stacked,n=[],o=a=>{const c=a.controller.getParsed(e),_=c&&c[a.vScale.axis];if(Oe(_)||isNaN(_))return!0};for(const a of s)if((e===void 0||!o(a))&&((r===!1||n.indexOf(a.stack)===-1||r===void 0&&a.stack===void 0)&&n.push(a.stack),a.index===i))break;return n.length||n.push(void 0),n}_getStackCount(i){return this._getStacks(void 0,i).length}_getStackIndex(i,e,t){const s=this._getStacks(i,t),r=e!==void 0?s.indexOf(e):-1;return r===-1?s.length-1:r}_getRuler(){const i=this.options,e=this._cachedMeta,t=e.iScale,s=[];let r,n;for(r=0,n=e.data.length;r<n;++r)s.push(t.getPixelForValue(this.getParsed(r)[t.axis],r));const o=i.barThickness;return{min:o||qo(e),pixels:s,start:t._startPixel,end:t._endPixel,stackCount:this._getStackCount(),scale:t,grouped:i.grouped,ratio:o?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(i){const{_cachedMeta:{vScale:e,_stacked:t,index:s},options:{base:r,minBarLength:n}}=this,o=r||0,a=this.getParsed(i),c=a._custom,_=gn(c);let S,b,k=a[e.axis],T=0,H=t?this.applyStack(e,a,t):k;H!==k&&(T=H-k,H=k),_&&(k=c.barStart,H=c.barEnd-c.barStart,k!==0&&X(k)!==X(c.barEnd)&&(T=0),T+=k);const P=Oe(r)||_?T:r;let F=e.getPixelForValue(P);if(S=this.chart.getDataVisibility(i)?e.getPixelForValue(T+H):F,b=S-F,Math.abs(b)<n){b=function(he,fe,me){return he!==0?X(he):(fe.isHorizontal()?1:-1)*(fe.min>=me?1:-1)}(b,e,o)*n,k===o&&(F-=b/2);const j=e.getPixelForDecimal(0),te=e.getPixelForDecimal(1),ee=Math.min(j,te),Q=Math.max(j,te);F=Math.max(Math.min(F,Q),ee),S=F+b,t&&!_&&(a._stacks[e.axis]._visualValues[s]=e.getValueForPixel(S)-e.getValueForPixel(F))}if(F===e.getPixelForValue(o)){const j=X(b)*e.getLineWidthForValue(o)/2;F+=j,b-=j}return{size:b,base:F,head:S,center:S+b/2}}_calculateBarIndexPixels(i,e){const t=e.scale,s=this.options,r=s.skipNull,n=D(s.maxBarThickness,1/0);let o,a;if(e.grouped){const c=r?this._getStackCount(i):e.stackCount,_=s.barThickness==="flex"?function(b,k,T,H){const P=k.pixels,F=P[b];let j=b>0?P[b-1]:null,te=b<P.length-1?P[b+1]:null;const ee=T.categoryPercentage;j===null&&(j=F-(te===null?k.end-k.start:te-F)),te===null&&(te=F+F-j);const Q=F-(F-Math.min(j,te))/2*ee;return{chunk:Math.abs(te-j)/2*ee/H,ratio:T.barPercentage,start:Q}}(i,e,s,c):function(b,k,T,H){const P=T.barThickness;let F,j;return Oe(P)?(F=k.min*T.categoryPercentage,j=T.barPercentage):(F=P*H,j=1),{chunk:F/H,ratio:j,start:k.pixels[b]-F/2}}(i,e,s,c),S=this._getStackIndex(this.index,this._cachedMeta.stack,r?i:void 0);o=_.start+_.chunk*S+_.chunk/2,a=Math.min(n,_.chunk*_.ratio)}else o=t.getPixelForValue(this.getParsed(i)[t.axis],i),a=Math.min(n,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const i=this._cachedMeta,e=i.vScale,t=i.data,s=t.length;let r=0;for(;r<s;++r)this.getParsed(r)[e.axis]===null||t[r].hidden||t[r].draw(this._ctx)}},BubbleController:class extends xt{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(i,e,t,s){const r=super.parsePrimitiveData(i,e,t,s);for(let n=0;n<r.length;n++)r[n]._custom=this.resolveDataElementOptions(n+t).radius;return r}parseArrayData(i,e,t,s){const r=super.parseArrayData(i,e,t,s);for(let n=0;n<r.length;n++){const o=e[t+n];r[n]._custom=D(o[2],this.resolveDataElementOptions(n+t).radius)}return r}parseObjectData(i,e,t,s){const r=super.parseObjectData(i,e,t,s);for(let n=0;n<r.length;n++){const o=e[t+n];r[n]._custom=D(o&&o.r&&+o.r,this.resolveDataElementOptions(n+t).radius)}return r}getMaxOverflow(){const i=this._cachedMeta.data;let e=0;for(let t=i.length-1;t>=0;--t)e=Math.max(e,i[t].size(this.resolveDataElementOptions(t))/2);return e>0&&e}getLabelAndValue(i){const e=this._cachedMeta,t=this.chart.data.labels||[],{xScale:s,yScale:r}=e,n=this.getParsed(i),o=s.getLabelForValue(n.x),a=r.getLabelForValue(n.y),c=n._custom;return{label:t[i]||"",value:"("+o+", "+a+(c?", "+c:"")+")"}}update(i){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,i)}updateElements(i,e,t,s){const r=s==="reset",{iScale:n,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:c}=this._getSharedOptions(e,s),_=n.axis,S=o.axis;for(let b=e;b<e+t;b++){const k=i[b],T=!r&&this.getParsed(b),H={},P=H[_]=r?n.getPixelForDecimal(.5):n.getPixelForValue(T[_]),F=H[S]=r?o.getBasePixel():o.getPixelForValue(T[S]);H.skip=isNaN(P)||isNaN(F),c&&(H.options=a||this.resolveDataElementOptions(b,k.active?"active":s),r&&(H.options.radius=0)),this.updateElement(k,b,H,s)}}resolveDataElementOptions(i,e){const t=this.getParsed(i);let s=super.resolveDataElementOptions(i,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return e!=="active"&&(s.radius=0),s.radius+=D(t&&t._custom,r),s}},DoughnutController:mn,LineController:class extends xt{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(i){const e=this._cachedMeta,{dataset:t,data:s=[],_dataset:r}=e,n=this.chart._animationsDisabled;let{start:o,count:a}=Ai(e,s,n);this._drawStart=o,this._drawCount=a,es(e)&&(o=0,a=s.length),t._chart=this.chart,t._datasetIndex=this.index,t._decimated=!!r._decimated,t.points=s;const c=this.resolveDatasetElementOptions(i);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(t,void 0,{animated:!n,options:c},i),this.updateElements(s,o,a,i)}updateElements(i,e,t,s){const r=s==="reset",{iScale:n,vScale:o,_stacked:a,_dataset:c}=this._cachedMeta,{sharedOptions:_,includeOptions:S}=this._getSharedOptions(e,s),b=n.axis,k=o.axis,{spanGaps:T,segment:H}=this.options,P=ie(T)?T:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||r||s==="none",j=e+t,te=i.length;let ee=e>0&&this.getParsed(e-1);for(let Q=0;Q<te;++Q){const he=i[Q],fe=F?he:{};if(Q<e||Q>=j){fe.skip=!0;continue}const me=this.getParsed(Q),Ce=Oe(me[k]),Ae=fe[b]=n.getPixelForValue(me[b],Q),De=fe[k]=r||Ce?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,me,a):me[k],Q);fe.skip=isNaN(Ae)||isNaN(De)||Ce,fe.stop=Q>0&&Math.abs(me[b]-ee[b])>P,H&&(fe.parsed=me,fe.raw=c.data[Q]),S&&(fe.options=_||this.resolveDataElementOptions(Q,he.active?"active":s)),F||this.updateElement(he,Q,fe,s),ee=me}}getMaxOverflow(){const i=this._cachedMeta,e=i.dataset,t=e.options&&e.options.borderWidth||0,s=i.data||[];if(!s.length)return t;const r=s[0].size(this.resolveDataElementOptions(0)),n=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(t,r,n)/2}draw(){const i=this._cachedMeta;i.dataset.updateControlPoints(this.chart.chartArea,i.iScale.axis),super.draw()}},PieController:class extends mn{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:Kn,RadarController:class extends xt{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(i){const e=this._cachedMeta.vScale,t=this.getParsed(i);return{label:e.getLabels()[i],value:""+e.getLabelForValue(t[e.axis])}}parseObjectData(i,e,t,s){return Hs.bind(this)(i,e,t,s)}update(i){const e=this._cachedMeta,t=e.dataset,s=e.data||[],r=e.iScale.getLabels();if(t.points=s,i!=="resize"){const n=this.resolveDatasetElementOptions(i);this.options.showLine||(n.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===s.length,options:n};this.updateElement(t,void 0,o,i)}this.updateElements(s,0,s.length,i)}updateElements(i,e,t,s){const r=this._cachedMeta.rScale,n=s==="reset";for(let o=e;o<e+t;o++){const a=i[o],c=this.resolveDataElementOptions(o,a.active?"active":s),_=r.getPointPositionForValue(o,this.getParsed(o).r),S=n?r.xCenter:_.x,b=n?r.yCenter:_.y,k={x:S,y:b,angle:_.angle,skip:isNaN(S)||isNaN(b),options:c};this.updateElement(a,o,k,s)}}},ScatterController:class extends xt{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(i){const e=this._cachedMeta,t=this.chart.data.labels||[],{xScale:s,yScale:r}=e,n=this.getParsed(i),o=s.getLabelForValue(n.x),a=r.getLabelForValue(n.y);return{label:t[i]||"",value:"("+o+", "+a+")"}}update(i){const e=this._cachedMeta,{data:t=[]}=e,s=this.chart._animationsDisabled;let{start:r,count:n}=Ai(e,t,s);if(this._drawStart=r,this._drawCount=n,es(e)&&(r=0,n=t.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:a}=e;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!a._decimated,o.points=t;const c=this.resolveDatasetElementOptions(i);c.segment=this.options.segment,this.updateElement(o,void 0,{animated:!s,options:c},i)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(t,r,n,i)}addElements(){const{showLine:i}=this.options;!this.datasetElementType&&i&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(i,e,t,s){const r=s==="reset",{iScale:n,vScale:o,_stacked:a,_dataset:c}=this._cachedMeta,_=this.resolveDataElementOptions(e,s),S=this.getSharedOptions(_),b=this.includeOptions(s,S),k=n.axis,T=o.axis,{spanGaps:H,segment:P}=this.options,F=ie(H)?H:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||r||s==="none";let te=e>0&&this.getParsed(e-1);for(let ee=e;ee<e+t;++ee){const Q=i[ee],he=this.getParsed(ee),fe=j?Q:{},me=Oe(he[T]),Ce=fe[k]=n.getPixelForValue(he[k],ee),Ae=fe[T]=r||me?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,he,a):he[T],ee);fe.skip=isNaN(Ce)||isNaN(Ae)||me,fe.stop=ee>0&&Math.abs(he[k]-te[k])>F,P&&(fe.parsed=he,fe.raw=c.data[ee]),b&&(fe.options=S||this.resolveDataElementOptions(ee,Q.active?"active":s)),j||this.updateElement(Q,ee,fe,s),te=he}this.updateSharedOptions(S,s,_)}getMaxOverflow(){const i=this._cachedMeta,e=i.data||[];if(!this.options.showLine){let o=0;for(let a=e.length-1;a>=0;--a)o=Math.max(o,e[a].size(this.resolveDataElementOptions(a))/2);return o>0&&o}const t=i.dataset,s=t.options&&t.options.borderWidth||0;if(!e.length)return s;const r=e[0].size(this.resolveDataElementOptions(0)),n=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(s,r,n)/2}}});function Xo(i,e,t,s){const r=Ns(i.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),n=(t-e)/2,o=Math.min(n,s*e/2),a=c=>{const _=(t-Math.min(n,c))*s/2;return ot(c,0,Math.min(n,_))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ot(r.innerStart,0,o),innerEnd:ot(r.innerEnd,0,o)}}function qs(i,e,t,s){return{x:t+i*Math.cos(e),y:s+i*Math.sin(e)}}function qr(i,e,t,s,r,n){const{x:o,y:a,startAngle:c,pixelMargin:_,innerRadius:S}=e,b=Math.max(e.outerRadius+s+t-_,0),k=S>0?S+s+t+_:0;let T=0;const H=r-c;if(s){const Te=((S>0?S-s:0)+(b>0?b-s:0))/2;T=(H-(Te!==0?H*Te/(Te+s):H))/2}const P=(H-Math.max(.001,H*b-t/se)/b)/2,F=c+P+T,j=r-P-T,{outerStart:te,outerEnd:ee,innerStart:Q,innerEnd:he}=Xo(e,k,b,j-F),fe=b-te,me=b-ee,Ce=F+te/fe,Ae=j-ee/me,De=k+Q,He=k+he,Be=F+Q/De,Me=j-he/He;if(i.beginPath(),n){const Te=(Ce+Ae)/2;if(i.arc(o,a,b,Ce,Te),i.arc(o,a,b,Te,Ae),ee>0){const lt=qs(me,Ae,o,a);i.arc(lt.x,lt.y,ee,Ae,j+B)}const Le=qs(He,j,o,a);if(i.lineTo(Le.x,Le.y),he>0){const lt=qs(He,Me,o,a);i.arc(lt.x,lt.y,he,j+B,Me+Math.PI)}const Ve=(j-he/k+(F+Q/k))/2;if(i.arc(o,a,k,j-he/k,Ve,!0),i.arc(o,a,k,Ve,F+Q/k,!0),Q>0){const lt=qs(De,Be,o,a);i.arc(lt.x,lt.y,Q,Be+Math.PI,F-B)}const _t=qs(fe,F,o,a);if(i.lineTo(_t.x,_t.y),te>0){const lt=qs(fe,Ce,o,a);i.arc(lt.x,lt.y,te,F-B,Ce)}}else{i.moveTo(o,a);const Te=Math.cos(Ce)*b+o,Le=Math.sin(Ce)*b+a;i.lineTo(Te,Le);const Ve=Math.cos(Ae)*b+o,_t=Math.sin(Ae)*b+a;i.lineTo(Ve,_t)}i.closePath()}function Go(i,e,t,s,r){const{fullCircles:n,startAngle:o,circumference:a,options:c}=e,{borderWidth:_,borderJoinStyle:S,borderDash:b,borderDashOffset:k}=c,T=c.borderAlign==="inner";if(!_)return;i.setLineDash(b||[]),i.lineDashOffset=k,T?(i.lineWidth=2*_,i.lineJoin=S||"round"):(i.lineWidth=_,i.lineJoin=S||"bevel");let H=e.endAngle;if(n){qr(i,e,t,s,H,r);for(let P=0;P<n;++P)i.stroke();isNaN(a)||(H=o+(a%ce||ce))}T&&function(P,F,j){const{startAngle:te,pixelMargin:ee,x:Q,y:he,outerRadius:fe,innerRadius:me}=F;let Ce=ee/fe;P.beginPath(),P.arc(Q,he,fe,te-Ce,j+Ce),me>ee?(Ce=ee/me,P.arc(Q,he,me,j+Ce,te-Ce,!0)):P.arc(Q,he,ee,j+B,te-B),P.closePath(),P.clip()}(i,e,H),n||(qr(i,e,t,s,H,r),i.stroke())}function Xn(i,e,t=e){i.lineCap=D(t.borderCapStyle,e.borderCapStyle),i.setLineDash(D(t.borderDash,e.borderDash)),i.lineDashOffset=D(t.borderDashOffset,e.borderDashOffset),i.lineJoin=D(t.borderJoinStyle,e.borderJoinStyle),i.lineWidth=D(t.borderWidth,e.borderWidth),i.strokeStyle=D(t.borderColor,e.borderColor)}function Jo(i,e,t){i.lineTo(t.x,t.y)}function Gn(i,e,t={}){const s=i.length,{start:r=0,end:n=s-1}=t,{start:o,end:a}=e,c=Math.max(r,o),_=Math.min(n,a),S=r<o&&n<o||r>a&&n>a;return{count:s,start:c,loop:e.loop,ilen:_<c&&!S?s+_-c:_-c}}function Zo(i,e,t,s){const{points:r,options:n}=e,{count:o,start:a,loop:c,ilen:_}=Gn(r,t,s),S=function(F){return F.stepped?Ks:F.tension||F.cubicInterpolationMode==="monotone"?Ys:Jo}(n);let b,k,T,{move:H=!0,reverse:P}=s||{};for(b=0;b<=_;++b)k=r[(a+(P?_-b:b))%o],k.skip||(H?(i.moveTo(k.x,k.y),H=!1):S(i,T,k,P,n.stepped),T=k);return c&&(k=r[(a+(P?_:0))%o],S(i,T,k,P,n.stepped)),!!c}function Qo(i,e,t,s){const r=e.points,{count:n,start:o,ilen:a}=Gn(r,t,s),{move:c=!0,reverse:_}=s||{};let S,b,k,T,H,P,F=0,j=0;const te=Q=>(o+(_?a-Q:Q))%n,ee=()=>{T!==H&&(i.lineTo(F,H),i.lineTo(F,T),i.lineTo(F,P))};for(c&&(b=r[te(0)],i.moveTo(b.x,b.y)),S=0;S<=a;++S){if(b=r[te(S)],b.skip)continue;const Q=b.x,he=b.y,fe=0|Q;fe===k?(he<T?T=he:he>H&&(H=he),F=(j*F+Q)/++j):(ee(),i.lineTo(Q,he),k=fe,j=0,T=H=he),P=he}ee()}function vn(i){const e=i.options,t=e.borderDash&&e.borderDash.length;return i._decimated||i._loop||e.tension||e.cubicInterpolationMode==="monotone"||e.stepped||t?Zo:Qo}const ea=typeof Path2D=="function";function ta(i,e,t,s){ea&&!e.options.segment?function(r,n,o,a){let c=n._path;c||(c=n._path=new Path2D,n.path(c,o,a)&&c.closePath()),Xn(r,n.options),r.stroke(c)}(i,e,t,s):function(r,n,o,a){const{segments:c,options:_}=n,S=vn(n);for(const b of c)Xn(r,_,b.style),r.beginPath(),S(r,n,b,{start:o,end:o+a-1})&&r.closePath(),r.stroke()}(i,e,t,s)}class Kr extends Ct{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;wr(this._points,s,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ws(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,r=e[t],n=this.points,o=rr(this,{property:t,start:r,end:r});if(!o.length)return;const a=[],c=function(b){return b.stepped?Zs:b.tension||b.cubicInterpolationMode==="monotone"?Er:Nt}(s);let _,S;for(_=0,S=o.length;_<S;++_){const{start:b,end:k}=o[_],T=n[b],H=n[k];if(T===H){a.push(T);continue}const P=c(T,H,Math.abs((r-T[t])/(H[t]-T[t])),s.stepped);P[t]=e[t],a.push(P)}return a.length===1?a[0]:a}pathSegment(e,t,s){return vn(this)(e,this,t,s)}path(e,t,s){const r=this.segments,n=vn(this);let o=this._loop;t=t||0,s=s||this.points.length-t;for(const a of r)o&=n(e,this,a,{start:t,end:t+s-1});return!!o}draw(e,t,s,r){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(e.save(),ta(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Jn(i,e,t,s){const r=i.options,{[t]:n}=i.getProps([t],s);return Math.abs(e-n)<r.radius+r.hitRadius}function Zn(i,e){const{x:t,y:s,base:r,width:n,height:o}=i.getProps(["x","y","base","width","height"],e);let a,c,_,S,b;return i.horizontal?(b=o/2,a=Math.min(t,r),c=Math.max(t,r),_=s-b,S=s+b):(b=n/2,a=t-b,c=t+b,_=Math.min(s,r),S=Math.max(s,r)),{left:a,top:_,right:c,bottom:S}}function ms(i,e,t,s){return i?0:ot(e,t,s)}function ia(i){const e=Zn(i),t=e.right-e.left,s=e.bottom-e.top,r=function(o,a,c){const _=o.options.borderWidth,S=o.borderSkipped,b=Qs(_);return{t:ms(S.top,b.top,0,c),r:ms(S.right,b.right,0,a),b:ms(S.bottom,b.bottom,0,c),l:ms(S.left,b.left,0,a)}}(i,t/2,s/2),n=function(o,a,c){const{enableBorderRadius:_}=o.getProps(["enableBorderRadius"]),S=o.options.borderRadius,b=Pi(S),k=Math.min(a,c),T=o.borderSkipped,H=_||p(S);return{topLeft:ms(!H||T.top||T.left,b.topLeft,0,k),topRight:ms(!H||T.top||T.right,b.topRight,0,k),bottomLeft:ms(!H||T.bottom||T.left,b.bottomLeft,0,k),bottomRight:ms(!H||T.bottom||T.right,b.bottomRight,0,k)}}(i,t/2,s/2);return{outer:{x:e.left,y:e.top,w:t,h:s,radius:n},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,n.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(r.b,r.r))}}}}function bn(i,e,t,s){const r=e===null,n=t===null,o=i&&!(r&&n)&&Zn(i,s);return o&&(r||Ot(e,o.left,o.right))&&(n||Ot(t,o.top,o.bottom))}function sa(i,e){i.rect(e.x,e.y,e.w,e.h)}function yn(i,e,t={}){const s=i.x!==t.x?-e:0,r=i.y!==t.y?-e:0,n=(i.x+i.w!==t.x+t.w?e:0)-s,o=(i.y+i.h!==t.y+t.h?e:0)-r;return{x:i.x+s,y:i.y+r,w:i.w+n,h:i.h+o,radius:i.radius}}var Sn=Object.freeze({__proto__:null,ArcElement:class extends Ct{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(i){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,e,t){const s=this.getProps(["x","y"],t),{angle:r,distance:n}=Ye(s,{x:i,y:e}),{startAngle:o,endAngle:a,innerRadius:c,outerRadius:_,circumference:S}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],t),b=(this.options.spacing+this.options.borderWidth)/2,k=D(S,a-o)>=ce||je(r,o,a),T=Ot(n,c+b,_+b);return k&&T}getCenterPoint(i){const{x:e,y:t,startAngle:s,endAngle:r,innerRadius:n,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:a,spacing:c}=this.options,_=(s+r)/2,S=(n+o+c+a)/2;return{x:e+Math.cos(_)*S,y:t+Math.sin(_)*S}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){const{options:e,circumference:t}=this,s=(e.offset||0)/4,r=(e.spacing||0)/2,n=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=t>ce?Math.floor(t/ce):0,t===0||this.innerRadius<0||this.outerRadius<0)return;i.save();const o=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(o)*s,Math.sin(o)*s);const a=s*(1-Math.sin(Math.min(se,t||0)));i.fillStyle=e.backgroundColor,i.strokeStyle=e.borderColor,function(c,_,S,b,k){const{fullCircles:T,startAngle:H,circumference:P}=_;let F=_.endAngle;if(T){qr(c,_,S,b,F,k);for(let j=0;j<T;++j)c.fill();isNaN(P)||(F=H+(P%ce||ce))}qr(c,_,S,b,F,k),c.fill()}(i,this,a,r,n),Go(i,this,a,r,n),i.restore()}},BarElement:class extends Ct{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,i&&Object.assign(this,i)}draw(i){const{inflateAmount:e,options:{borderColor:t,backgroundColor:s}}=this,{inner:r,outer:n}=ia(this),o=(a=n.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?ls:sa;var a;i.save(),n.w===r.w&&n.h===r.h||(i.beginPath(),o(i,yn(n,e,r)),i.clip(),o(i,yn(r,-e,n)),i.fillStyle=t,i.fill("evenodd")),i.beginPath(),o(i,yn(r,e)),i.fillStyle=s,i.fill(),i.restore()}inRange(i,e,t){return bn(this,i,e,t)}inXRange(i,e){return bn(this,i,null,e)}inYRange(i,e){return bn(this,null,i,e)}getCenterPoint(i){const{x:e,y:t,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],i);return{x:r?(e+s)/2:e,y:r?t:(t+s)/2}}getRange(i){return i==="x"?this.width/2:this.height/2}},LineElement:Kr,PointElement:class extends Ct{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,e,t){const s=this.options,{x:r,y:n}=this.getProps(["x","y"],t);return Math.pow(i-r,2)+Math.pow(e-n,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(i,e){return Jn(this,i,"x",e)}inYRange(i,e){return Jn(this,i,"y",e)}getCenterPoint(i){const{x:e,y:t}=this.getProps(["x","y"],i);return{x:e,y:t}}size(i){let e=(i=i||this.options||{}).radius||0;return e=Math.max(e,e&&i.hoverRadius||0),2*(e+(e&&i.borderWidth||0))}draw(i,e){const t=this.options;this.skip||t.radius<.1||!vt(this,e,this.size(t)/2)||(i.strokeStyle=t.borderColor,i.lineWidth=t.borderWidth,i.fillStyle=t.backgroundColor,Vi(i,t,this.x,this.y))}getRange(){const i=this.options||{};return i.radius+i.hitRadius}}});function ra(i,e,t,s){const r=i.indexOf(e);return r===-1?((n,o,a,c)=>(typeof o=="string"?(a=n.push(o)-1,c.unshift({index:a,label:o})):isNaN(o)&&(a=null),a))(i,e,t,s):r!==i.lastIndexOf(e)?t:r}function Qn(i){const e=this.getLabels();return i>=0&&i<e.length?e[i]:i}function eo(i,e,{horizontal:t,minRotation:s}){const r=ue(s),n=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+i).length;return Math.min(e/n,o)}class Yr extends Wi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Oe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:r,max:n}=this;const o=c=>r=t?r:c,a=c=>n=s?n:c;if(e){const c=X(r),_=X(n);c<0&&_<0?a(0):c>0&&_>0&&o(0)}if(r===n){let c=n===0?1:Math.abs(.05*n);a(n+c),e||o(r-c)}this.min=r,this.max=n}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:s,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),s=s||11),s&&(t=Math.min(s,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r=function(n,o){const a=[],{bounds:c,step:_,min:S,max:b,precision:k,count:T,maxTicks:H,maxDigits:P,includeBounds:F}=n,j=_||1,te=H-1,{min:ee,max:Q}=o,he=!Oe(S),fe=!Oe(b),me=!Oe(T),Ce=(Q-ee)/(P+1);let Ae,De,He,Be,Me=Ne((Q-ee)/te/j)*j;if(Me<1e-14&&!he&&!fe)return[{value:ee},{value:Q}];Be=Math.ceil(Q/Me)-Math.floor(ee/Me),Be>te&&(Me=Ne(Be*Me/te/j)*j),Oe(k)||(Ae=Math.pow(10,k),Me=Math.ceil(Me*Ae)/Ae),c==="ticks"?(De=Math.floor(ee/Me)*Me,He=Math.ceil(Q/Me)*Me):(De=ee,He=Q),he&&fe&&_&&N((b-S)/_,Me/1e3)?(Be=Math.round(Math.min((b-S)/Me,H)),Me=(b-S)/Be,De=S,He=b):me?(De=he?S:De,He=fe?b:He,Be=T-1,Me=(He-De)/Be):(Be=(He-De)/Me,Be=be(Be,Math.round(Be),Me/1e3)?Math.round(Be):Math.ceil(Be));const Te=Math.max(ye(Me),ye(De));Ae=Math.pow(10,Oe(k)?Te:k),De=Math.round(De*Ae)/Ae,He=Math.round(He*Ae)/Ae;let Le=0;for(he&&(F&&De!==S?(a.push({value:S}),De<S&&Le++,be(Math.round((De+Le*Me)*Ae)/Ae,S,eo(S,Ce,n))&&Le++):De<S&&Le++);Le<Be;++Le){const Ve=Math.round((De+Le*Me)*Ae)/Ae;if(fe&&Ve>b)break;a.push({value:Ve})}return fe&&F&&He!==b?a.length&&be(a[a.length-1].value,b,eo(b,Ce,n))?a[a.length-1].value=b:a.push({value:b}):fe&&He!==b||a.push({value:He}),a}({maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},this._range||this);return e.bounds==="ticks"&&oe(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-t)/Math.max(e.length-1,1)/2;t-=r,s+=r}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return Mt(e,this.chart.options.locale,this.options.ticks.format)}}class na extends Yr{static id="linear";static defaults={ticks:{callback:Et.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=m(e)?e:0,this.max=m(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=ue(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,n.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const fr=i=>Math.floor(J(i)),As=(i,e)=>Math.pow(10,fr(i)+e);function to(i){return i/Math.pow(10,fr(i))===1}function io(i,e,t){const s=Math.pow(10,t),r=Math.floor(i/s);return Math.ceil(e/s)-r}function oa(i,{min:e,max:t}){e=C(i.min,e);const s=[],r=fr(e);let n=function(H,P){let F=fr(P-H);for(;io(H,P,F)>10;)F++;for(;io(H,P,F)<10;)F--;return Math.min(F,fr(H))}(e,t),o=n<0?Math.pow(10,Math.abs(n)):1;const a=Math.pow(10,n),c=r>n?Math.pow(10,r):0,_=Math.round((e-c)*o)/o,S=Math.floor((e-c)/a/10)*a*10;let b=Math.floor((_-S)/Math.pow(10,n)),k=C(i.min,Math.round((c+S+b*Math.pow(10,n))*o)/o);for(;k<t;)s.push({value:k,major:to(k),significand:b}),b>=10?b=b<15?15:20:b++,b>=20&&(n++,b=2,o=n>=0?1:o),k=Math.round((c+S+b*Math.pow(10,n))*o)/o;const T=C(i.max,k);return s.push({value:T,major:to(T),significand:b}),s}class aa extends Wi{static id="logarithmic";static defaults={ticks:{callback:Et.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const s=Yr.prototype.parse.apply(this,[e,t]);if(s!==0)return m(s)&&s>0?s:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=m(e)?Math.max(0,e):null,this.max=m(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!m(this._userMin)&&(this.min=e===As(this.min,0)?As(this.min,-1):As(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let s=this.min,r=this.max;const n=a=>s=e?s:a,o=a=>r=t?r:a;s===r&&(s<=0?(n(1),o(10)):(n(As(s,-1)),o(As(r,1)))),s<=0&&n(As(r,-1)),r<=0&&o(As(s,1)),this.min=s,this.max=r}buildTicks(){const e=this.options,t=oa({min:this._userMin,max:this._userMax},this);return e.bounds==="ticks"&&oe(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return e===void 0?"0":Mt(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=J(e),this._valueRange=J(this.max)-J(e)}getPixelForValue(e){return e!==void 0&&e!==0||(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(J(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function wn(i){const e=i.ticks;if(e.display&&i.display){const t=At(e.backdropPadding);return D(e.font&&e.font.size,gt.font.size)+t.height}return 0}function so(i,e,t,s,r){return i===s||i===r?{start:e-t/2,end:e+t/2}:i<s||i>r?{start:e-t,end:e}:{start:e,end:e+t}}function ha(i){const e={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},t=Object.assign({},e),s=[],r=[],n=i._pointLabels.length,o=i.options.pointLabels,a=o.centerPointLabels?se/n:0;for(let b=0;b<n;b++){const k=o.setContext(i.getPointLabelContext(b));r[b]=k.padding;const T=i.getPointPosition(b,i.drawingArea+r[b],a),H=wt(k.font),P=(c=i.ctx,_=H,S=ne(S=i._pointLabels[b])?S:[S],{w:hs(c,_.string,S),h:S.length*_.lineHeight});s[b]=P;const F=et(i.getIndexAngle(b)+a),j=Math.round(ae(F));la(t,e,F,so(j,T.x,P.w,0,180),so(j,T.y,P.h,90,270))}var c,_,S;i.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),i._pointLabelItems=function(b,k,T){const H=[],P=b._pointLabels.length,F=b.options,{centerPointLabels:j,display:te}=F.pointLabels,ee={extra:wn(F)/2,additionalAngle:j?se/P:0};let Q;for(let he=0;he<P;he++){ee.padding=T[he],ee.size=k[he];const fe=ca(b,he,ee);H.push(fe),te==="auto"&&(fe.visible=da(fe,Q),fe.visible&&(Q=fe))}return H}(i,s,r)}function la(i,e,t,s,r){const n=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,c=0;s.start<e.l?(a=(e.l-s.start)/n,i.l=Math.min(i.l,e.l-a)):s.end>e.r&&(a=(s.end-e.r)/n,i.r=Math.max(i.r,e.r+a)),r.start<e.t?(c=(e.t-r.start)/o,i.t=Math.min(i.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,i.b=Math.max(i.b,e.b+c))}function ca(i,e,t){const s=i.drawingArea,{extra:r,additionalAngle:n,padding:o,size:a}=t,c=i.getPointPosition(e,s+r+o,n),_=Math.round(ae(et(c.angle+B))),S=function(T,H,P){return P===90||P===270?T-=H/2:(P>270||P<90)&&(T-=H),T}(c.y,a.h,_),b=function(T){return T===0||T===180?"center":T<180?"left":"right"}(_),k=function(T,H,P){return P==="right"?T-=H:P==="center"&&(T-=H/2),T}(c.x,a.w,b);return{visible:!0,x:c.x,y:S,textAlign:b,left:k,top:S,right:k+a.w,bottom:S+a.h}}function da(i,e){if(!e)return!0;const{left:t,top:s,right:r,bottom:n}=i;return!(vt({x:t,y:s},e)||vt({x:t,y:n},e)||vt({x:r,y:s},e)||vt({x:r,y:n},e))}function ua(i,e,t){const{left:s,top:r,right:n,bottom:o}=t,{backdropColor:a}=e;if(!Oe(a)){const c=Pi(e.borderRadius),_=At(e.backdropPadding);i.fillStyle=a;const S=s-_.left,b=r-_.top,k=n-s+_.width,T=o-r+_.height;Object.values(c).some(H=>H!==0)?(i.beginPath(),ls(i,{x:S,y:b,w:k,h:T,radius:c}),i.fill()):i.fillRect(S,b,k,T)}}function ro(i,e,t,s){const{ctx:r}=i;if(t)r.arc(i.xCenter,i.yCenter,e,0,ce);else{let n=i.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let o=1;o<s;o++)n=i.getPointPosition(o,e),r.lineTo(n.x,n.y)}}class fa extends Yr{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Et.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=At(wn(this.options)/2),t=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(t,s)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=m(e)&&!isNaN(e)?e:0,this.max=m(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/wn(this.options))}generateTickLabels(e){Yr.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,s)=>{const r=M(this.options.pointLabels.callback,[t,s],this);return r||r===0?r:""}).filter((t,s)=>this.chart.getDataVisibility(s))}fit(){const e=this.options;e.display&&e.pointLabels.display?ha(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,s,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((s-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,s,r))}getIndexAngle(e){return et(e*(ce/(this._pointLabels.length||1))+ue(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Oe(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Oe(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const s=t[e];return function(r,n,o){return Kt(r,{label:o,index:n,type:"pointLabel"})}(this.getContext(),e,s)}}getPointPosition(e,t,s=0){const r=this.getIndexAngle(e)-B+s;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:s,right:r,bottom:n}=this._pointLabelItems[e];return{left:t,top:s,right:r,bottom:n}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),ro(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:s,grid:r,border:n}=t,o=this._pointLabels.length;let a,c,_;if(t.pointLabels.display&&function(S,b){const{ctx:k,options:{pointLabels:T}}=S;for(let H=b-1;H>=0;H--){const P=S._pointLabelItems[H];if(!P.visible)continue;const F=T.setContext(S.getPointLabelContext(H));ua(k,F,P);const j=wt(F.font),{x:te,y:ee,textAlign:Q}=P;Ri(k,S._pointLabels[H],te,ee+j.lineHeight/2,j,{color:F.color,textAlign:Q,textBaseline:"middle"})}}(this,o),r.display&&this.ticks.forEach((S,b)=>{if(b!==0||b===0&&this.min<0){c=this.getDistanceFromCenterForValue(S.value);const k=this.getContext(b),T=r.setContext(k),H=n.setContext(k);(function(P,F,j,te,ee){const Q=P.ctx,he=F.circular,{color:fe,lineWidth:me}=F;!he&&!te||!fe||!me||j<0||(Q.save(),Q.strokeStyle=fe,Q.lineWidth=me,Q.setLineDash(ee.dash),Q.lineDashOffset=ee.dashOffset,Q.beginPath(),ro(P,j,he,te),Q.closePath(),Q.stroke(),Q.restore())})(this,T,c,o,H)}}),s.display){for(e.save(),a=o-1;a>=0;a--){const S=s.setContext(this.getPointLabelContext(a)),{color:b,lineWidth:k}=S;k&&b&&(e.lineWidth=k,e.strokeStyle=b,e.setLineDash(S.borderDash),e.lineDashOffset=S.borderDashOffset,c=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),_=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(_.x,_.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,s=t.ticks;if(!s.display)return;const r=this.getIndexAngle(0);let n,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;const _=s.setContext(this.getContext(c)),S=wt(_.font);if(n=this.getDistanceFromCenterForValue(this.ticks[c].value),_.showLabelBackdrop){e.font=S.string,o=e.measureText(a.label).width,e.fillStyle=_.backdropColor;const b=At(_.backdropPadding);e.fillRect(-o/2-b.left,-n-S.size/2-b.top,o+b.width,S.size+b.height)}Ri(e,a.label,0,-n,S,{color:_.color,strokeColor:_.textStrokeColor,strokeWidth:_.textStrokeWidth})}),e.restore()}drawTitle(){}}const Xr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},si=Object.keys(Xr);function no(i,e){return i-e}function oo(i,e){if(Oe(e))return null;const t=i._adapter,{parser:s,round:r,isoWeekday:n}=i._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),m(o)||(o=typeof s=="string"?t.parse(o,s):t.parse(o)),o===null?null:(r&&(o=r!=="week"||!ie(n)&&n!==!0?t.startOf(o,r):t.startOf(o,"isoWeek",n)),+o)}function ao(i,e,t,s){const r=si.length;for(let n=si.indexOf(i);n<r-1;++n){const o=Xr[si[n]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=s)return si[n]}return si[r-1]}function ho(i,e,t){if(t){if(t.length){const{lo:s,hi:r}=Yt(t,e);i[t[s]>=e?t[s]:t[r]]=!0}}else i[e]=!0}function lo(i,e,t){const s=[],r={},n=e.length;let o,a;for(o=0;o<n;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return n!==0&&t?function(c,_,S,b){const k=c._adapter,T=+k.startOf(_[0].value,b),H=_[_.length-1].value;let P,F;for(P=T;P<=H;P=+k.add(P,1,b))F=S[P],F>=0&&(_[F].major=!0);return _}(i,s,r,t):s}class xn extends Wi{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),r=this._adapter=new jn._date(e.adapters.date);r.init(t),y(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:oo(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:r,max:n,minDefined:o,maxDefined:a}=this.getUserBounds();function c(_){o||isNaN(_.min)||(r=Math.min(r,_.min)),a||isNaN(_.max)||(n=Math.max(n,_.max))}o&&a||(c(this._getLabelBounds()),e.bounds==="ticks"&&e.ticks.source==="labels"||c(this.getMinMax(!1))),r=m(r)&&!isNaN(r)?r:+t.startOf(Date.now(),s),n=m(n)&&!isNaN(n)?n:+t.endOf(Date.now(),s)+1,this.min=Math.min(r,n-1),this.max=Math.max(r+1,n)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const n=this.min,o=Xt(r,n,this.max);return this._unit=t.unit||(s.autoSkip?ao(t.minUnit,this.min,this.max,this._getLabelCapacity(n)):function(a,c,_,S,b){for(let k=si.length-1;k>=si.indexOf(_);k--){const T=si[k];if(Xr[T].common&&a._adapter.diff(b,S,T)>=c-1)return T}return si[_?si.indexOf(_):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&this._unit!=="year"?function(a){for(let c=si.indexOf(a)+1,_=si.length;c<_;++c)if(Xr[si[c]].common)return si[c]}(this._unit):void 0,this.initOffsets(r),e.reverse&&o.reverse(),lo(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t,s,r=0,n=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=e.length===1?1-t:(this.getDecimalForValue(e[1])-t)/2,s=this.getDecimalForValue(e[e.length-1]),n=e.length===1?s:(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;r=ot(r,0,o),n=ot(n,0,o),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,t=this.min,s=this.max,r=this.options,n=r.time,o=n.unit||ao(n.minUnit,t,s,this._getLabelCapacity(t)),a=D(r.ticks.stepSize,1),c=o==="week"&&n.isoWeekday,_=ie(c)||c===!0,S={};let b,k,T=t;if(_&&(T=+e.startOf(T,"isoWeek",c)),T=+e.startOf(T,_?"day":o),e.diff(s,t,o)>1e5*a)throw new Error(t+" and "+s+" are too far apart with stepSize of "+a+" "+o);const H=r.ticks.source==="data"&&this.getDataTimestamps();for(b=T,k=0;b<s;b=+e.add(b,a,o),k++)ho(S,b,H);return b!==s&&r.bounds!=="ticks"&&k!==1||ho(S,b,H),Object.keys(S).sort(no).map(P=>+P)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,r=this._unit,n=t||s[r];return this._adapter.format(e,n)}_tickFormatFunction(e,t,s,r){const n=this.options,o=n.ticks.callback;if(o)return M(o,[e,t,s],this);const a=n.time.displayFormats,c=this._unit,_=this._majorUnit,S=c&&a[c],b=_&&a[_],k=s[t],T=_&&b&&k&&k.major;return this._adapter.format(e,r||(T?b:S))}generateTickLabels(e){let t,s,r;for(t=0,s=e.length;t<s;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,r=ue(this.isHorizontal()?t.maxRotation:t.minRotation),n=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*n+a*o,h:s*o+a*n}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,r=s[t.unit]||s.millisecond,n=this._tickFormatFunction(e,0,lo(this,[e],this._majorUnit),r),o=this._getLabelSize(n),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,s=this._cache.data||[];if(s.length)return s;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)s=s.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const r=this.getLabels();for(t=0,s=r.length;t<s;++t)e.push(oo(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return bt(e.sort(no))}}function Gr(i,e,t){let s,r,n,o,a=0,c=i.length-1;t?(e>=i[a].pos&&e<=i[c].pos&&({lo:a,hi:c}=Bt(i,"pos",e)),{pos:s,time:n}=i[a],{pos:r,time:o}=i[c]):(e>=i[a].time&&e<=i[c].time&&({lo:a,hi:c}=Bt(i,"time",e)),{time:s,pos:n}=i[a],{time:r,pos:o}=i[c]);const _=r-s;return _?n+(o-n)*(e-s)/_:n}var co=Object.freeze({__proto__:null,CategoryScale:class extends Wi{static id="category";static defaults={ticks:{callback:Qn}};constructor(i){super(i),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(i){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:s,label:r}of e)t[s]===r&&t.splice(s,1);this._addedLabels=[]}super.init(i)}parse(i,e){if(Oe(i))return null;const t=this.getLabels();return((s,r)=>s===null?null:ot(Math.round(s),0,r))(e=isFinite(e)&&t[e]===i?e:ra(t,i,D(e,i),this._addedLabels),t.length-1)}determineDataLimits(){const{minDefined:i,maxDefined:e}=this.getUserBounds();let{min:t,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(i||(t=0),e||(s=this.getLabels().length-1)),this.min=t,this.max=s}buildTicks(){const i=this.min,e=this.max,t=this.options.offset,s=[];let r=this.getLabels();r=i===0&&e===r.length-1?r:r.slice(i,e+1),this._valueRange=Math.max(r.length-(t?0:1),1),this._startValue=this.min-(t?.5:0);for(let n=i;n<=e;n++)s.push({value:n});return s}getLabelForValue(i){return Qn.call(this,i)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(i){return typeof i!="number"&&(i=this.parse(i)),i===null?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getPixelForTick(i){const e=this.ticks;return i<0||i>e.length-1?null:this.getPixelForValue(e[i].value)}getValueForPixel(i){return Math.round(this._startValue+this.getDecimalForPixel(i)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:na,LogarithmicScale:aa,RadialLinearScale:fa,TimeScale:xn,TimeSeriesScale:class extends xn{static id="timeseries";static defaults=xn.defaults;constructor(i){super(i),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const i=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(i);this._minPos=Gr(e,this.min),this._tableRange=Gr(e,this.max)-this._minPos,super.initOffsets(i)}buildLookupTable(i){const{min:e,max:t}=this,s=[],r=[];let n,o,a,c,_;for(n=0,o=i.length;n<o;++n)c=i[n],c>=e&&c<=t&&s.push(c);if(s.length<2)return[{time:e,pos:0},{time:t,pos:1}];for(n=0,o=s.length;n<o;++n)_=s[n+1],a=s[n-1],c=s[n],Math.round((_+a)/2)!==c&&r.push({time:c,pos:n/(o-1)});return r}_generate(){const i=this.min,e=this.max;let t=super.getDataTimestamps();return t.includes(i)&&t.length||t.splice(0,0,i),t.includes(e)&&t.length!==1||t.push(e),t.sort((s,r)=>s-r)}_getTimestampsForTable(){let i=this._cache.all||[];if(i.length)return i;const e=this.getDataTimestamps(),t=this.getLabelTimestamps();return i=e.length&&t.length?this.normalize(e.concat(t)):e.length?e:t,i=this._cache.all=i,i}getDecimalForValue(i){return(Gr(this._table,i)-this._minPos)/this._tableRange}getValueForPixel(i){const e=this._offsets,t=this.getDecimalForPixel(i)/e.factor-e.end;return Gr(this._table,t*this._tableRange+this._minPos,!0)}}});const Cn=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],uo=Cn.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function fo(i){return Cn[i%Cn.length]}function _o(i){return uo[i%uo.length]}function _a(i){let e=0;return(t,s)=>{const r=i.getDatasetMeta(s).controller;r instanceof mn?e=function(n,o){return n.backgroundColor=n.data.map(()=>fo(o++)),o}(t,e):r instanceof Kn?e=function(n,o){return n.backgroundColor=n.data.map(()=>_o(o++)),o}(t,e):r&&(e=function(n,o){return n.borderColor=fo(o),n.backgroundColor=_o(o),++o}(t,e))}}function po(i){let e;for(e in i)if(i[e].borderColor||i[e].backgroundColor)return!0;return!1}var pa={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,e,t){if(!t.enabled)return;const{data:{datasets:s},options:r}=i.config,{elements:n}=r;if(!t.forceOverride&&(po(s)||(o=r)&&(o.borderColor||o.backgroundColor)||n&&po(n)))return;var o;const a=_a(i);s.forEach(a)}};function go(i){if(i._decimated){const e=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function mo(i){i.data.datasets.forEach(e=>{go(e)})}var ga={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,e,t)=>{if(!t.enabled)return void mo(i);const s=i.width;i.data.datasets.forEach((r,n)=>{const{_data:o,indexAxis:a}=r,c=i.getDatasetMeta(n),_=o||r.data;if(Xi([a,i.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const S=i.scales[c.xAxisID];if(S.type!=="linear"&&S.type!=="time"||i.options.parsing)return;let{start:b,count:k}=function(H,P){const F=P.length;let j,te=0;const{iScale:ee}=H,{min:Q,max:he,minDefined:fe,maxDefined:me}=ee.getUserBounds();return fe&&(te=ot(Bt(P,ee.axis,Q).lo,0,F-1)),j=me?ot(Bt(P,ee.axis,he).hi+1,te,F)-te:F-te,{start:te,count:j}}(c,_);if(k<=(t.threshold||4*s))return void go(r);let T;switch(Oe(o)&&(r._data=_,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(H){this._data=H}})),t.algorithm){case"lttb":T=function(H,P,F,j,te){const ee=te.samples||j;if(ee>=F)return H.slice(P,P+F);const Q=[],he=(F-2)/(ee-2);let fe=0;const me=P+F-1;let Ce,Ae,De,He,Be,Me=P;for(Q[fe++]=H[Me],Ce=0;Ce<ee-2;Ce++){let Te,Le=0,Ve=0;const _t=Math.floor((Ce+1)*he)+1+P,lt=Math.min(Math.floor((Ce+2)*he)+1,F)+P,zt=lt-_t;for(Te=_t;Te<lt;Te++)Le+=H[Te].x,Ve+=H[Te].y;Le/=zt,Ve/=zt;const di=Math.floor(Ce*he)+1+P,ui=Math.min(Math.floor((Ce+1)*he)+1,F)+P,{x:mi,y:Ei}=H[Me];for(De=He=-1,Te=di;Te<ui;Te++)He=.5*Math.abs((mi-Le)*(H[Te].y-Ei)-(mi-H[Te].x)*(Ve-Ei)),He>De&&(De=He,Ae=H[Te],Be=Te);Q[fe++]=Ae,Me=Be}return Q[fe++]=H[me],Q}(_,b,k,s,t);break;case"min-max":T=function(H,P,F,j){let te,ee,Q,he,fe,me,Ce,Ae,De,He,Be=0,Me=0;const Te=[],Le=P+F-1,Ve=H[P].x,_t=H[Le].x-Ve;for(te=P;te<P+F;++te){ee=H[te],Q=(ee.x-Ve)/_t*j,he=ee.y;const lt=0|Q;if(lt===fe)he<De?(De=he,me=te):he>He&&(He=he,Ce=te),Be=(Me*Be+ee.x)/++Me;else{const zt=te-1;if(!Oe(me)&&!Oe(Ce)){const di=Math.min(me,Ce),ui=Math.max(me,Ce);di!==Ae&&di!==zt&&Te.push({...H[di],x:Be}),ui!==Ae&&ui!==zt&&Te.push({...H[ui],x:Be})}te>0&&zt!==Ae&&Te.push(H[zt]),Te.push(ee),fe=lt,Me=0,De=He=he,me=Ce=Ae=te}}return Te}(_,b,k,s);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=T})},destroy(i){mo(i)}};function En(i,e,t,s){if(s)return;let r=e[i],n=t[i];return i==="angle"&&(r=et(r),n=et(n)),{property:i,start:r,end:n}}function kn(i,e,t){for(;e>i;e--){const s=t[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function vo(i,e,t,s){return i&&e?s(i[t],e[t]):i?i[t]:e?e[t]:0}function bo(i,e){let t=[],s=!1;return ne(i)?(s=!0,t=i):t=function(r,n){const{x:o=null,y:a=null}=r||{},c=n.points,_=[];return n.segments.forEach(({start:S,end:b})=>{b=kn(S,b,c);const k=c[S],T=c[b];a!==null?(_.push({x:k.x,y:a}),_.push({x:T.x,y:a})):o!==null&&(_.push({x:o,y:k.y}),_.push({x:o,y:T.y}))}),_}(i,e),t.length?new Kr({points:t,options:{tension:0},_loop:s,_fullLoop:s}):null}function yo(i){return i&&i.fill!==!1}function ma(i,e,t){let s=i[e].fill;const r=[e];let n;if(!t)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!m(s))return s;if(n=i[s],!n)return!1;if(n.visible)return s;r.push(s),s=n.fill}return!1}function va(i,e,t){const s=function(n){const o=n.options,a=o.fill;let c=D(a&&a.target,a);return c===void 0&&(c=!!o.backgroundColor),c===!1||c===null?!1:c===!0?"origin":c}(i);if(p(s))return!isNaN(s.value)&&s;let r=parseFloat(s);return m(r)&&Math.floor(r)===r?function(n,o,a,c){return n!=="-"&&n!=="+"||(a=o+a),a===o||a<0||a>=c?!1:a}(s[0],e,r,t):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function ba(i,e,t){const s=[];for(let r=0;r<t.length;r++){const n=t[r],{first:o,last:a,point:c}=ya(n,e,"x");if(!(!c||o&&a)){if(o)s.unshift(c);else if(i.push(c),!a)break}}i.push(...s)}function ya(i,e,t){const s=i.interpolate(e,t);if(!s)return{};const r=s[t],n=i.segments,o=i.points;let a=!1,c=!1;for(let _=0;_<n.length;_++){const S=n[_],b=o[S.start][t],k=o[S.end][t];if(Ot(r,b,k)){a=r===b,c=r===k;break}}return{first:a,last:c,point:s}}class So{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,s){const{x:r,y:n,radius:o}=this;return t=t||{start:0,end:ce},e.arc(r,n,o,t.end,t.start,!0),!s.bounds}interpolate(e){const{x:t,y:s,radius:r}=this,n=e.angle;return{x:t+Math.cos(n)*r,y:s+Math.sin(n)*r,angle:n}}}function Sa(i){const{chart:e,fill:t,line:s}=i;if(m(t))return function(n,o){const a=n.getDatasetMeta(o);return a&&n.isDatasetVisible(o)?a.dataset:null}(e,t);if(t==="stack")return function(n){const{scale:o,index:a,line:c}=n,_=[],S=c.segments,b=c.points,k=function(T,H){const P=[],F=T.getMatchingVisibleMetas("line");for(let j=0;j<F.length;j++){const te=F[j];if(te.index===H)break;te.hidden||P.unshift(te.dataset)}return P}(o,a);k.push(bo({x:null,y:o.bottom},c));for(let T=0;T<S.length;T++){const H=S[T];for(let P=H.start;P<=H.end;P++)ba(_,b[P],k)}return new Kr({points:_,options:{}})}(i);if(t==="shape")return!0;const r=function(n){return(n.scale||{}).getPointPositionForValue?function(a){const{scale:c,fill:_}=a,S=c.options,b=c.getLabels().length,k=S.reverse?c.max:c.min,T=function(P,F,j){let te;return te=P==="start"?j:P==="end"?F.options.reverse?F.min:F.max:p(P)?P.value:F.getBaseValue(),te}(_,c,k),H=[];if(S.grid.circular){const P=c.getPointPositionForValue(0,k);return new So({x:P.x,y:P.y,radius:c.getDistanceFromCenterForValue(T)})}for(let P=0;P<b;++P)H.push(c.getPointPositionForValue(P,T));return H}(n):function(a){const{scale:c={},fill:_}=a,S=function(b,k){let T=null;return b==="start"?T=k.bottom:b==="end"?T=k.top:p(b)?T=k.getPixelForValue(b.value):k.getBasePixel&&(T=k.getBasePixel()),T}(_,c);if(m(S)){const b=c.isHorizontal();return{x:b?S:null,y:b?null:S}}return null}(n)}(i);return r instanceof So?r:bo(r,s)}function Dn(i,e,t){const s=Sa(e),{line:r,scale:n,axis:o}=e,a=r.options,c=a.fill,_=a.backgroundColor,{above:S=_,below:b=_}=c||{};s&&r.points.length&&(Oi(i,t),function(k,T){const{line:H,target:P,above:F,below:j,area:te,scale:ee}=T,Q=H._loop?"angle":T.axis;k.save(),Q==="x"&&j!==F&&(wo(k,P,te.top),xo(k,{line:H,target:P,color:F,scale:ee,property:Q}),k.restore(),k.save(),wo(k,P,te.bottom)),xo(k,{line:H,target:P,color:j,scale:ee,property:Q}),k.restore()}(i,{line:r,target:s,above:S,below:b,area:t,scale:n,axis:o}),bs(i))}function wo(i,e,t){const{segments:s,points:r}=e;let n=!0,o=!1;i.beginPath();for(const a of s){const{start:c,end:_}=a,S=r[c],b=r[kn(c,_,r)];n?(i.moveTo(S.x,S.y),n=!1):(i.lineTo(S.x,t),i.lineTo(S.x,S.y)),o=!!e.pathSegment(i,a,{move:o}),o?i.closePath():i.lineTo(b.x,t)}i.lineTo(e.first().x,t),i.closePath(),i.clip()}function xo(i,e){const{line:t,target:s,property:r,color:n,scale:o}=e,a=function(c,_,S){const b=c.segments,k=c.points,T=_.points,H=[];for(const P of b){let{start:F,end:j}=P;j=kn(F,j,k);const te=En(S,k[F],k[j],P.loop);if(!_.segments){H.push({source:P,target:te,start:k[F],end:k[j]});continue}const ee=rr(_,te);for(const Q of ee){const he=En(S,T[Q.start],T[Q.end],Q.loop),fe=sr(P,k,he);for(const me of fe)H.push({source:me,target:Q,start:{[S]:vo(te,he,"start",Math.max)},end:{[S]:vo(te,he,"end",Math.min)}})}}return H}(t,s,r);for(const{source:c,target:_,start:S,end:b}of a){const{style:{backgroundColor:k=n}={}}=c,T=s!==!0;i.save(),i.fillStyle=k,wa(i,o,T&&En(r,S,b)),i.beginPath();const H=!!t.pathSegment(i,c);let P;if(T){H?i.closePath():Co(i,s,b,r);const F=!!s.pathSegment(i,_,{move:H,reverse:!0});P=H&&F,P||Co(i,s,S,r)}i.closePath(),i.fill(P?"evenodd":"nonzero"),i.restore()}}function wa(i,e,t){const{top:s,bottom:r}=e.chart.chartArea,{property:n,start:o,end:a}=t||{};n==="x"&&(i.beginPath(),i.rect(o,s,a-o,r-s),i.clip())}function Co(i,e,t,s){const r=e.interpolate(t,s);r&&i.lineTo(r.x,r.y)}var xa={id:"filler",afterDatasetsUpdate(i,e,t){const s=(i.data.datasets||[]).length,r=[];let n,o,a,c;for(o=0;o<s;++o)n=i.getDatasetMeta(o),a=n.dataset,c=null,a&&a.options&&a instanceof Kr&&(c={visible:i.isDatasetVisible(o),index:o,fill:va(a,o,s),chart:i,axis:n.controller.options.indexAxis,scale:n.vScale,line:a}),n.$filler=c,r.push(c);for(o=0;o<s;++o)c=r[o],c&&c.fill!==!1&&(c.fill=ma(r,o,t.propagate))},beforeDraw(i,e,t){const s=t.drawTime==="beforeDraw",r=i.getSortedVisibleDatasetMetas(),n=i.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(n,a.axis),s&&a.fill&&Dn(i.ctx,a,n))}},beforeDatasetsDraw(i,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const s=i.getSortedVisibleDatasetMetas();for(let r=s.length-1;r>=0;--r){const n=s[r].$filler;yo(n)&&Dn(i.ctx,n,i.chartArea)}},beforeDatasetDraw(i,e,t){const s=e.meta.$filler;yo(s)&&t.drawTime==="beforeDatasetDraw"&&Dn(i.ctx,s,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Eo=(i,e)=>{let{boxHeight:t=e,boxWidth:s=e}=i;return i.usePointStyle&&(t=Math.min(t,e),s=i.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:t,itemHeight:Math.max(e,t)}};class ko extends Ct{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=M(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(s=>e.filter(s,this.chart.data))),e.sort&&(t=t.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const s=e.labels,r=wt(s.font),n=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=Eo(s,n);let _,S;t.font=r.string,this.isHorizontal()?(_=this.maxWidth,S=this._fitRows(o,n,a,c)+10):(S=this.maxHeight,_=this._fitCols(o,r,a,c)+10),this.width=Math.min(_,e.maxWidth||this.maxWidth),this.height=Math.min(S,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,r){const{ctx:n,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],_=this.lineWidths=[0],S=r+a;let b=e;n.textAlign="left",n.textBaseline="middle";let k=-1,T=-S;return this.legendItems.forEach((H,P)=>{const F=s+t/2+n.measureText(H.text).width;(P===0||_[_.length-1]+F+2*a>o)&&(b+=S,_[_.length-(P>0?0:1)]=0,T+=S,k++),c[P]={left:0,top:T,row:k,width:F,height:r},_[_.length-1]+=F+a}),b}_fitCols(e,t,s,r){const{ctx:n,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],_=this.columnSizes=[],S=o-e;let b=a,k=0,T=0,H=0,P=0;return this.legendItems.forEach((F,j)=>{const{itemWidth:te,itemHeight:ee}=function(Q,he,fe,me,Ce){const Ae=function(He,Be,Me,Te){let Le=He.text;return Le&&typeof Le!="string"&&(Le=Le.reduce((Ve,_t)=>Ve.length>_t.length?Ve:_t)),Be+Me.size/2+Te.measureText(Le).width}(me,Q,he,fe),De=function(He,Be,Me){let Te=He;return typeof Be.text!="string"&&(Te=Do(Be,Me)),Te}(Ce,me,he.lineHeight);return{itemWidth:Ae,itemHeight:De}}(s,t,n,F,r);j>0&&T+ee+2*a>S&&(b+=k+a,_.push({width:k,height:T}),H+=k+a,P++,k=T=0),c[j]={left:H,top:T,col:P,width:te,height:ee},k=Math.max(k,te),T+=ee+a}),b+=k,_.push({width:k,height:T}),b}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:r},rtl:n}}=this,o=xi(n,this.left,this.width);if(this.isHorizontal()){let a=0,c=ut(s,this.left+r,this.right-this.lineWidths[a]);for(const _ of t)a!==_.row&&(a=_.row,c=ut(s,this.left+r,this.right-this.lineWidths[a])),_.top+=this.top+e+r,_.left=o.leftForLtr(o.x(c),_.width),c+=_.width+r}else{let a=0,c=ut(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const _ of t)_.col!==a&&(a=_.col,c=ut(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),_.top=c,_.left+=this.left+r,_.left=o.leftForLtr(o.x(_.left),_.width),c+=_.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Oi(e,this),this._draw(),bs(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:r}=this,{align:n,labels:o}=e,a=gt.color,c=xi(e.rtl,this.left,this.width),_=wt(o.font),{padding:S}=o,b=_.size,k=b/2;let T;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=_.string;const{boxWidth:H,boxHeight:P,itemHeight:F}=Eo(o,b),j=this.isHorizontal(),te=this._computeTitleHeight();T=j?{x:ut(n,this.left+S,this.right-s[0]),y:this.top+S+te,line:0}:{x:this.left+S,y:ut(n,this.top+te+S,this.bottom-t[0].height),line:0},tr(this.ctx,e.textDirection);const ee=F+S;this.legendItems.forEach((Q,he)=>{r.strokeStyle=Q.fontColor,r.fillStyle=Q.fontColor;const fe=r.measureText(Q.text).width,me=c.textAlign(Q.textAlign||(Q.textAlign=o.textAlign)),Ce=H+k+fe;let Ae=T.x,De=T.y;if(c.setWidth(this.width),j?he>0&&Ae+Ce+S>this.right&&(De=T.y+=ee,T.line++,Ae=T.x=ut(n,this.left+S,this.right-s[T.line])):he>0&&De+ee>this.bottom&&(Ae=T.x=Ae+t[T.line].width+S,T.line++,De=T.y=ut(n,this.top+te+S,this.bottom-t[T.line].height)),function(He,Be,Me){if(isNaN(H)||H<=0||isNaN(P)||P<0)return;r.save();const Te=D(Me.lineWidth,1);if(r.fillStyle=D(Me.fillStyle,a),r.lineCap=D(Me.lineCap,"butt"),r.lineDashOffset=D(Me.lineDashOffset,0),r.lineJoin=D(Me.lineJoin,"miter"),r.lineWidth=Te,r.strokeStyle=D(Me.strokeStyle,a),r.setLineDash(D(Me.lineDash,[])),o.usePointStyle){const Le={radius:P*Math.SQRT2/2,pointStyle:Me.pointStyle,rotation:Me.rotation,borderWidth:Te},Ve=c.xPlus(He,H/2);qi(r,Le,Ve,Be+k,o.pointStyleWidth&&H)}else{const Le=Be+Math.max((b-P)/2,0),Ve=c.leftForLtr(He,H),_t=Pi(Me.borderRadius);r.beginPath(),Object.values(_t).some(lt=>lt!==0)?ls(r,{x:Ve,y:Le,w:H,h:P,radius:_t}):r.rect(Ve,Le,H,P),r.fill(),Te!==0&&r.stroke()}r.restore()}(c.x(Ae),De,Q),Ae=vs(me,Ae+H+k,j?Ae+Ce:this.right,e.rtl),function(He,Be,Me){Ri(r,Me.text,He,Be+F/2,_,{strikethrough:Me.hidden,textAlign:c.textAlign(Me.textAlign)})}(c.x(Ae),De,Q),j)T.x+=Ce+S;else if(typeof Q.text!="string"){const He=_.lineHeight;T.y+=Do(Q,He)+S}else T.y+=ee}),ir(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=wt(t.font),r=At(t.padding);if(!t.display)return;const n=xi(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=s.size/2,_=r.top+c;let S,b=this.left,k=this.width;if(this.isHorizontal())k=Math.max(...this.lineWidths),S=this.top+_,b=ut(e.align,b,this.right-k);else{const H=this.columnSizes.reduce((P,F)=>Math.max(P,F.height),0);S=_+ut(e.align,this.top,this.bottom-H-e.labels.padding-this._computeTitleHeight())}const T=ut(a,b,b+k);o.textAlign=n.textAlign(tt(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=s.string,Ri(o,t.text,T,S,s)}_computeTitleHeight(){const e=this.options.title,t=wt(e.font),s=At(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,r,n;if(Ot(e,this.left,this.right)&&Ot(t,this.top,this.bottom)){for(n=this.legendHitBoxes,s=0;s<n.length;++s)if(r=n[s],Ot(e,r.left,r.left+r.width)&&Ot(t,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const t=this.options;if(!function(o,a){return!!((o==="mousemove"||o==="mouseout")&&(a.onHover||a.onLeave)||a.onClick&&(o==="click"||o==="mouseup"))}(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const o=this._hoveredItem,a=(n=s,(r=o)!==null&&n!==null&&r.datasetIndex===n.datasetIndex&&r.index===n.index);o&&!a&&M(t.onLeave,[e,o,this],this),this._hoveredItem=s,s&&!a&&M(t.onHover,[e,s,this],this)}else s&&M(t.onClick,[e,s,this],this);var r,n}}function Do(i,e){return e*(i.text?i.text.length:0)}var Ca={id:"legend",_element:ko,start(i,e,t){const s=i.legend=new ko({ctx:i.ctx,options:t,chart:i});Lt.configure(i,s,t),Lt.addBox(i,s)},stop(i){Lt.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,e,t){const s=i.legend;Lt.configure(i,s,t),s.options=t},afterUpdate(i){const e=i.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(i,e){e.replay||i.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,e,t){const s=e.datasetIndex,r=t.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const e=i.data.datasets,{labels:{usePointStyle:t,pointStyle:s,textAlign:r,color:n,useBorderRadius:o,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(c=>{const _=c.controller.getStyle(t?0:void 0),S=At(_.borderWidth);return{text:e[c.index].label,fillStyle:_.backgroundColor,fontColor:n,hidden:!c.visible,lineCap:_.borderCapStyle,lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:(S.width+S.height)/4,strokeStyle:_.borderColor,pointStyle:s||_.pointStyle,rotation:_.rotation,textAlign:r||_.textAlign,borderRadius:o&&(a||_.borderRadius),datasetIndex:c.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Mn extends Ct{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=ne(s.text)?s.text.length:1;this._padding=At(s.padding);const n=r*wt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:s,bottom:r,right:n,options:o}=this,a=o.align;let c,_,S,b=0;return this.isHorizontal()?(_=ut(a,s,n),S=t+e,c=n-s):(o.position==="left"?(_=s+e,S=ut(a,r,t),b=-.5*se):(_=n-e,S=ut(a,t,r),b=.5*se),c=r-t),{titleX:_,titleY:S,maxWidth:c,rotation:b}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=wt(t.font),r=s.lineHeight/2+this._padding.top,{titleX:n,titleY:o,maxWidth:a,rotation:c}=this._drawArgs(r);Ri(e,t.text,0,0,s,{color:t.color,maxWidth:a,rotation:c,textAlign:tt(t.align),textBaseline:"middle",translation:[n,o]})}}var Ea={id:"title",_element:Mn,start(i,e,t){(function(s,r){const n=new Mn({ctx:s.ctx,options:r,chart:s});Lt.configure(s,n,r),Lt.addBox(s,n),s.titleBlock=n})(i,t)},stop(i){const e=i.titleBlock;Lt.removeBox(i,e),delete i.titleBlock},beforeUpdate(i,e,t){const s=i.titleBlock;Lt.configure(i,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Jr=new WeakMap;var ka={id:"subtitle",start(i,e,t){const s=new Mn({ctx:i.ctx,options:t,chart:i});Lt.configure(i,s,t),Lt.addBox(i,s),Jr.set(i,s)},stop(i){Lt.removeBox(i,Jr.get(i)),Jr.delete(i)},beforeUpdate(i,e,t){const s=Jr.get(i);Lt.configure(i,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const _r={average(i){if(!i.length)return!1;let e,t,s=new Set,r=0,n=0;for(e=0,t=i.length;e<t;++e){const o=i[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();s.add(a.x),r+=a.y,++n}}return{x:[...s].reduce((o,a)=>o+a)/s.size,y:r/n}},nearest(i,e){if(!i.length)return!1;let t,s,r,n=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(t=0,s=i.length;t<s;++t){const c=i[t].element;if(c&&c.hasValue()){const _=dt(e,c.getCenterPoint());_<a&&(a=_,r=c)}}if(r){const c=r.tooltipPosition();n=c.x,o=c.y}return{x:n,y:o}}};function zi(i,e){return e&&(ne(e)?Array.prototype.push.apply(i,e):i.push(e)),i}function Qi(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function Da(i,e){const{element:t,datasetIndex:s,index:r}=e,n=i.getDatasetMeta(s).controller,{label:o,value:a}=n.getLabelAndValue(r);return{chart:i,label:o,parsed:n.getParsed(r),raw:i.data.datasets[s].data[r],formattedValue:a,dataset:n.getDataset(),dataIndex:r,datasetIndex:s,element:t}}function Mo(i,e){const t=i.chart.ctx,{body:s,footer:r,title:n}=i,{boxWidth:o,boxHeight:a}=e,c=wt(e.bodyFont),_=wt(e.titleFont),S=wt(e.footerFont),b=n.length,k=r.length,T=s.length,H=At(e.padding);let P=H.height,F=0,j=s.reduce((Q,he)=>Q+he.before.length+he.lines.length+he.after.length,0);j+=i.beforeBody.length+i.afterBody.length,b&&(P+=b*_.lineHeight+(b-1)*e.titleSpacing+e.titleMarginBottom),j&&(P+=T*(e.displayColors?Math.max(a,c.lineHeight):c.lineHeight)+(j-T)*c.lineHeight+(j-1)*e.bodySpacing),k&&(P+=e.footerMarginTop+k*S.lineHeight+(k-1)*e.footerSpacing);let te=0;const ee=function(Q){F=Math.max(F,t.measureText(Q).width+te)};return t.save(),t.font=_.string,w(i.title,ee),t.font=c.string,w(i.beforeBody.concat(i.afterBody),ee),te=e.displayColors?o+2+e.boxPadding:0,w(s,Q=>{w(Q.before,ee),w(Q.lines,ee),w(Q.after,ee)}),te=0,t.font=S.string,w(i.footer,ee),t.restore(),F+=H.width,{width:F,height:P}}function Ma(i,e,t,s){const{x:r,width:n}=t,{width:o,chartArea:{left:a,right:c}}=i;let _="center";return s==="center"?_=r<=(a+c)/2?"left":"right":r<=n/2?_="left":r>=o-n/2&&(_="right"),function(S,b,k,T){const{x:H,width:P}=T,F=k.caretSize+k.caretPadding;return S==="left"&&H+P+F>b.width||S==="right"&&H-P-F<0||void 0}(_,i,e,t)&&(_="center"),_}function Ao(i,e,t){const s=t.yAlign||e.yAlign||function(r,n){const{y:o,height:a}=n;return o<a/2?"top":o>r.height-a/2?"bottom":"center"}(i,t);return{xAlign:t.xAlign||e.xAlign||Ma(i,e,t,s),yAlign:s}}function Lo(i,e,t,s){const{caretSize:r,caretPadding:n,cornerRadius:o}=i,{xAlign:a,yAlign:c}=t,_=r+n,{topLeft:S,topRight:b,bottomLeft:k,bottomRight:T}=Pi(o);let H=function(F,j){let{x:te,width:ee}=F;return j==="right"?te-=ee:j==="center"&&(te-=ee/2),te}(e,a);const P=function(F,j,te){let{y:ee,height:Q}=F;return j==="top"?ee+=te:ee-=j==="bottom"?Q+te:Q/2,ee}(e,c,_);return c==="center"?a==="left"?H+=_:a==="right"&&(H-=_):a==="left"?H-=Math.max(S,k)+r:a==="right"&&(H+=Math.max(b,T)+r),{x:ot(H,0,s.width-e.width),y:ot(P,0,s.height-e.height)}}function Zr(i,e,t){const s=At(t.padding);return e==="center"?i.x+i.width/2:e==="right"?i.x+i.width-s.right:i.x+s.left}function To(i){return zi([],Qi(i))}function Oo(i,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?i.override(t):i}const Ro={beforeTitle:We,title(i){if(i.length>0){const e=i[0],t=e.chart.data.labels,s=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return t[e.dataIndex]}return""},afterTitle:We,beforeBody:We,beforeLabel:We,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let e=i.dataset.label||"";e&&(e+=": ");const t=i.formattedValue;return Oe(t)||(e+=t),e},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:We,afterBody:We,beforeFooter:We,footer:We,afterFooter:We};function ri(i,e,t,s){const r=i[e].call(t,s);return r===void 0?Ro[e].call(t,s):r}class Po extends Ct{static positioners=_r;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&t.options.animation&&s.animations,n=new dr(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,s=this._tooltipItems,Kt(e,{tooltip:t,tooltipItems:s,type:"tooltip"})));var e,t,s}getTitle(e,t){const{callbacks:s}=t,r=ri(s,"beforeTitle",this,e),n=ri(s,"title",this,e),o=ri(s,"afterTitle",this,e);let a=[];return a=zi(a,Qi(r)),a=zi(a,Qi(n)),a=zi(a,Qi(o)),a}getBeforeBody(e,t){return To(ri(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,r=[];return w(e,n=>{const o={before:[],lines:[],after:[]},a=Oo(s,n);zi(o.before,Qi(ri(a,"beforeLabel",this,n))),zi(o.lines,ri(a,"label",this,n)),zi(o.after,Qi(ri(a,"afterLabel",this,n))),r.push(o)}),r}getAfterBody(e,t){return To(ri(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,r=ri(s,"beforeFooter",this,e),n=ri(s,"footer",this,e),o=ri(s,"afterFooter",this,e);let a=[];return a=zi(a,Qi(r)),a=zi(a,Qi(n)),a=zi(a,Qi(o)),a}_createItems(e){const t=this._active,s=this.chart.data,r=[],n=[],o=[];let a,c,_=[];for(a=0,c=t.length;a<c;++a)_.push(Da(this.chart,t[a]));return e.filter&&(_=_.filter((S,b,k)=>e.filter(S,b,k,s))),e.itemSort&&(_=_.sort((S,b)=>e.itemSort(S,b,s))),w(_,S=>{const b=Oo(e.callbacks,S);r.push(ri(b,"labelColor",this,S)),n.push(ri(b,"labelPointStyle",this,S)),o.push(ri(b,"labelTextColor",this,S))}),this.labelColors=r,this.labelPointStyles=n,this.labelTextColors=o,this.dataPoints=_,_}update(e,t){const s=this.options.setContext(this.getContext()),r=this._active;let n,o=[];if(r.length){const a=_r[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=Mo(this,s),_=Object.assign({},a,c),S=Ao(this.chart,s,_),b=Lo(s,_,S,this.chart);this.xAlign=S.xAlign,this.yAlign=S.yAlign,n={opacity:1,x:b.x,y:b.y,width:c.width,height:c.height,caretX:a.x,caretY:a.y}}else this.opacity!==0&&(n={opacity:0});this._tooltipItems=o,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,r){const n=this.getCaretPosition(e,s,r);t.lineTo(n.x1,n.y1),t.lineTo(n.x2,n.y2),t.lineTo(n.x3,n.y3)}getCaretPosition(e,t,s){const{xAlign:r,yAlign:n}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:c,topRight:_,bottomLeft:S,bottomRight:b}=Pi(a),{x:k,y:T}=e,{width:H,height:P}=t;let F,j,te,ee,Q,he;return n==="center"?(Q=T+P/2,r==="left"?(F=k,j=F-o,ee=Q+o,he=Q-o):(F=k+H,j=F+o,ee=Q-o,he=Q+o),te=F):(j=r==="left"?k+Math.max(c,S)+o:r==="right"?k+H-Math.max(_,b)-o:this.caretX,n==="top"?(ee=T,Q=ee-o,F=j-o,te=j+o):(ee=T+P,Q=ee+o,F=j+o,te=j-o),he=ee),{x1:F,x2:j,x3:te,y1:ee,y2:Q,y3:he}}drawTitle(e,t,s){const r=this.title,n=r.length;let o,a,c;if(n){const _=xi(s.rtl,this.x,this.width);for(e.x=Zr(this,s.titleAlign,s),t.textAlign=_.textAlign(s.titleAlign),t.textBaseline="middle",o=wt(s.titleFont),a=s.titleSpacing,t.fillStyle=s.titleColor,t.font=o.string,c=0;c<n;++c)t.fillText(r[c],_.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,c+1===n&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,t,s,r,n){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:c,boxWidth:_}=n,S=wt(n.bodyFont),b=Zr(this,"left",n),k=r.x(b),T=c<S.lineHeight?(S.lineHeight-c)/2:0,H=t.y+T;if(n.usePointStyle){const P={radius:Math.min(_,c)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},F=r.leftForLtr(k,_)+_/2,j=H+c/2;e.strokeStyle=n.multiKeyBackground,e.fillStyle=n.multiKeyBackground,Vi(e,P,F,j),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Vi(e,P,F,j)}else{e.lineWidth=p(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const P=r.leftForLtr(k,_),F=r.leftForLtr(r.xPlus(k,1),_-2),j=Pi(o.borderRadius);Object.values(j).some(te=>te!==0)?(e.beginPath(),e.fillStyle=n.multiKeyBackground,ls(e,{x:P,y:H,w:_,h:c,radius:j}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),ls(e,{x:F,y:H+1,w:_-2,h:c-2,radius:j}),e.fill()):(e.fillStyle=n.multiKeyBackground,e.fillRect(P,H,_,c),e.strokeRect(P,H,_,c),e.fillStyle=o.backgroundColor,e.fillRect(F,H+1,_-2,c-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:r}=this,{bodySpacing:n,bodyAlign:o,displayColors:a,boxHeight:c,boxWidth:_,boxPadding:S}=s,b=wt(s.bodyFont);let k=b.lineHeight,T=0;const H=xi(s.rtl,this.x,this.width),P=function(Ce){t.fillText(Ce,H.x(e.x+T),e.y+k/2),e.y+=k+n},F=H.textAlign(o);let j,te,ee,Q,he,fe,me;for(t.textAlign=o,t.textBaseline="middle",t.font=b.string,e.x=Zr(this,F,s),t.fillStyle=s.bodyColor,w(this.beforeBody,P),T=a&&F!=="right"?o==="center"?_/2+S:_+2+S:0,Q=0,fe=r.length;Q<fe;++Q){for(j=r[Q],te=this.labelTextColors[Q],t.fillStyle=te,w(j.before,P),ee=j.lines,a&&ee.length&&(this._drawColorBox(t,e,Q,H,s),k=Math.max(b.lineHeight,c)),he=0,me=ee.length;he<me;++he)P(ee[he]),k=b.lineHeight;w(j.after,P)}T=0,k=b.lineHeight,w(this.afterBody,P),e.y-=n}drawFooter(e,t,s){const r=this.footer,n=r.length;let o,a;if(n){const c=xi(s.rtl,this.x,this.width);for(e.x=Zr(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=c.textAlign(s.footerAlign),t.textBaseline="middle",o=wt(s.footerFont),t.fillStyle=s.footerColor,t.font=o.string,a=0;a<n;++a)t.fillText(r[a],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,t,s,r){const{xAlign:n,yAlign:o}=this,{x:a,y:c}=e,{width:_,height:S}=s,{topLeft:b,topRight:k,bottomLeft:T,bottomRight:H}=Pi(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+b,c),o==="top"&&this.drawCaret(e,t,s,r),t.lineTo(a+_-k,c),t.quadraticCurveTo(a+_,c,a+_,c+k),o==="center"&&n==="right"&&this.drawCaret(e,t,s,r),t.lineTo(a+_,c+S-H),t.quadraticCurveTo(a+_,c+S,a+_-H,c+S),o==="bottom"&&this.drawCaret(e,t,s,r),t.lineTo(a+T,c+S),t.quadraticCurveTo(a,c+S,a,c+S-T),o==="center"&&n==="left"&&this.drawCaret(e,t,s,r),t.lineTo(a,c+b),t.quadraticCurveTo(a,c,a+b,c),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,r=s&&s.x,n=s&&s.y;if(r||n){const o=_r[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Mo(this,e),c=Object.assign({},o,this._size),_=Ao(t,e,c),S=Lo(e,c,_,t);r._to===S.x&&n._to===S.y||(this.xAlign=_.xAlign,this.yAlign=_.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,S))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},n={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=At(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(n,e,r,t),tr(e,t.textDirection),n.y+=o.top,this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),ir(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,r=e.map(({datasetIndex:a,index:c})=>{const _=this.chart.getDatasetMeta(a);if(!_)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:_.data[c],index:c}}),n=!g(s,r),o=this._positionChanged(r,t);(n||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,n=this._active||[],o=this._getActiveElements(e,n,t,s),a=this._positionChanged(o,e),c=t||!g(o,n)||a;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,s,r){const n=this.options;if(e.type==="mouseout")return[];if(!r)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,n.mode,n,s);return n.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:s,caretY:r,options:n}=this,o=_r[n.position].call(this,e,t);return o!==!1&&(s!==o.x||r!==o.y)}}var Aa={id:"tooltip",_element:Po,positioners:_r,afterInit(i,e,t){t&&(i.tooltip=new Po({chart:i,options:t}))},beforeUpdate(i,e,t){i.tooltip&&i.tooltip.initialize(t)},reset(i,e,t){i.tooltip&&i.tooltip.initialize(t)},afterDraw(i){const e=i.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(i.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",t)}},afterEvent(i,e){if(i.tooltip){const t=e.replay;i.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,e)=>e.bodyFont.size,boxWidth:(i,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ro},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};return Tt.register(Yn,co,Sn,Ke),Tt.helpers={...nn},Tt._adapters=jn,Tt.Animation=ks,Tt.Animations=dr,Tt.animator=Vt,Tt.controllers=Ci.controllers.items,Tt.DatasetController=xt,Tt.Element=Ct,Tt.elements=Sn,Tt.Interaction=fs,Tt.layouts=Lt,Tt.platforms=Nr,Tt.Scale=Wi,Tt.Ticks=Et,Object.assign(Tt,Yn,co,Sn,Ke,Nr),Tt.Chart=Tt,typeof window<"u"&&(window.Chart=Tt),Tt}),function(Ke,We){if(typeof exports=="object"&&typeof module=="object")module.exports=We();else if(typeof define=="function"&&define.amd)define([],We);else{var ct=We();for(var Oe in ct)(typeof exports=="object"?exports:Ke)[Oe]=ct[Oe]}}(globalThis,()=>(()=>{"use strict";var Ke={4567:function(ne,p,m){var C=this&&this.__decorate||function(h,d,y,A){var L,R=arguments.length,x=R<3?d:A===null?A=Object.getOwnPropertyDescriptor(d,y):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,d,y,A);else for(var I=h.length-1;I>=0;I--)(L=h[I])&&(x=(R<3?L(x):R>3?L(d,y,x):L(d,y))||x);return R>3&&x&&Object.defineProperty(d,y,x),x},D=this&&this.__param||function(h,d){return function(y,A){d(y,A,h)}};Object.defineProperty(p,"__esModule",{value:!0}),p.AccessibilityManager=void 0;const v=m(9042),E=m(9924),M=m(844),w=m(4725),g=m(2585),l=m(3656);let u=p.AccessibilityManager=class extends M.Disposable{constructor(h,d,y,A){super(),this._terminal=h,this._coreBrowserService=y,this._renderService=A,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let L=0;L<this._terminal.rows;L++)this._rowElements[L]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[L]);if(this._topBoundaryFocusListener=L=>this._handleBoundaryFocus(L,0),this._bottomBoundaryFocusListener=L=>this._handleBoundaryFocus(L,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new E.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(L=>this._handleResize(L.rows))),this.register(this._terminal.onRender(L=>this._refreshRows(L.start,L.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(L=>this._handleChar(L))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(L=>this._handleTab(L))),this.register(this._terminal.onKey(L=>this._handleKey(L.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,l.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,M.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(h){for(let d=0;d<h;d++)this._handleChar(" ")}_handleChar(h){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==h&&(this._charsToAnnounce+=h):this._charsToAnnounce+=h,h===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=v.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(h){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(h)||this._charsToConsume.push(h)}_refreshRows(h,d){this._liveRegionDebouncer.refresh(h,d,this._terminal.rows)}_renderRows(h,d){const y=this._terminal.buffer,A=y.lines.length.toString();for(let L=h;L<=d;L++){const R=y.lines.get(y.ydisp+L),x=[],I=R?.translateToString(!0,void 0,void 0,x)||"",U=(y.ydisp+L+1).toString(),$=this._rowElements[L];$&&(I.length===0?($.innerText="\xA0",this._rowColumns.set($,[0,1])):($.textContent=I,this._rowColumns.set($,x)),$.setAttribute("aria-posinset",U),$.setAttribute("aria-setsize",A))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(h,d){const y=h.target,A=this._rowElements[d===0?1:this._rowElements.length-2];if(y.getAttribute("aria-posinset")===(d===0?"1":`${this._terminal.buffer.lines.length}`)||h.relatedTarget!==A)return;let L,R;if(d===0?(L=y,R=this._rowElements.pop(),this._rowContainer.removeChild(R)):(L=this._rowElements.shift(),R=y,this._rowContainer.removeChild(L)),L.removeEventListener("focus",this._topBoundaryFocusListener),R.removeEventListener("focus",this._bottomBoundaryFocusListener),d===0){const x=this._createAccessibilityTreeNode();this._rowElements.unshift(x),this._rowContainer.insertAdjacentElement("afterbegin",x)}else{const x=this._createAccessibilityTreeNode();this._rowElements.push(x),this._rowContainer.appendChild(x)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(d===0?-1:1),this._rowElements[d===0?1:this._rowElements.length-2].focus(),h.preventDefault(),h.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const h=document.getSelection();if(!h)return;if(h.isCollapsed)return void(this._rowContainer.contains(h.anchorNode)&&this._terminal.clearSelection());if(!h.anchorNode||!h.focusNode)return void console.error("anchorNode and/or focusNode are null");let d={node:h.anchorNode,offset:h.anchorOffset},y={node:h.focusNode,offset:h.focusOffset};if((d.node.compareDocumentPosition(y.node)&Node.DOCUMENT_POSITION_PRECEDING||d.node===y.node&&d.offset>y.offset)&&([d,y]=[y,d]),d.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(d={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(d.node))return;const A=this._rowElements.slice(-1)[0];if(y.node.compareDocumentPosition(A)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(y={node:A,offset:A.textContent?.length??0}),!this._rowContainer.contains(y.node))return;const L=({node:I,offset:U})=>{const $=I instanceof Text?I.parentNode:I;let Z=parseInt($?.getAttribute("aria-posinset"),10)-1;if(isNaN(Z))return console.warn("row is invalid. Race condition?"),null;const W=this._rowColumns.get($);if(!W)return console.warn("columns is null. Race condition?"),null;let se=U<W.length?W[U]:W.slice(-1)[0]+1;return se>=this._terminal.cols&&(++Z,se=0),{row:Z,column:se}},R=L(d),x=L(y);if(R&&x){if(R.row>x.row||R.row===x.row&&R.column>=x.column)throw new Error("invalid range");this._terminal.select(R.column,R.row,(x.row-R.row)*this._terminal.cols-R.column+x.column)}}_handleResize(h){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let d=this._rowContainer.children.length;d<this._terminal.rows;d++)this._rowElements[d]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[d]);for(;this._rowElements.length>h;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const h=this._coreBrowserService.mainDocument.createElement("div");return h.setAttribute("role","listitem"),h.tabIndex=-1,this._refreshRowDimensions(h),h}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let h=0;h<this._terminal.rows;h++)this._refreshRowDimensions(this._rowElements[h])}}_refreshRowDimensions(h){h.style.height=`${this._renderService.dimensions.css.cell.height}px`}};p.AccessibilityManager=u=C([D(1,g.IInstantiationService),D(2,w.ICoreBrowserService),D(3,w.IRenderService)],u)},3614:(ne,p)=>{function m(E){return E.replace(/\r?\n/g,"\r")}function C(E,M){return M?"\x1B[200~"+E+"\x1B[201~":E}function D(E,M,w,g){E=C(E=m(E),w.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(E,!0),M.value=""}function v(E,M,w){const g=w.getBoundingClientRect(),l=E.clientX-g.left-10,u=E.clientY-g.top-10;M.style.width="20px",M.style.height="20px",M.style.left=`${l}px`,M.style.top=`${u}px`,M.style.zIndex="1000",M.focus()}Object.defineProperty(p,"__esModule",{value:!0}),p.rightClickHandler=p.moveTextAreaUnderMouseCursor=p.paste=p.handlePasteEvent=p.copyHandler=p.bracketTextForPaste=p.prepareTextForTerminal=void 0,p.prepareTextForTerminal=m,p.bracketTextForPaste=C,p.copyHandler=function(E,M){E.clipboardData&&E.clipboardData.setData("text/plain",M.selectionText),E.preventDefault()},p.handlePasteEvent=function(E,M,w,g){E.stopPropagation(),E.clipboardData&&D(E.clipboardData.getData("text/plain"),M,w,g)},p.paste=D,p.moveTextAreaUnderMouseCursor=v,p.rightClickHandler=function(E,M,w,g,l){v(E,M,w),l&&g.rightClickSelect(E),M.value=g.selectionText,M.select()}},7239:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ColorContrastCache=void 0;const C=m(1505);p.ColorContrastCache=class{constructor(){this._color=new C.TwoKeyMap,this._css=new C.TwoKeyMap}setCss(D,v,E){this._css.set(D,v,E)}getCss(D,v){return this._css.get(D,v)}setColor(D,v,E){this._color.set(D,v,E)}getColor(D,v){return this._color.get(D,v)}clear(){this._color.clear(),this._css.clear()}}},3656:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.addDisposableDomListener=void 0,p.addDisposableDomListener=function(m,C,D,v){m.addEventListener(C,D,v);let E=!1;return{dispose:()=>{E||(E=!0,m.removeEventListener(C,D,v))}}}},3551:function(ne,p,m){var C=this&&this.__decorate||function(u,h,d,y){var A,L=arguments.length,R=L<3?h:y===null?y=Object.getOwnPropertyDescriptor(h,d):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(u,h,d,y);else for(var x=u.length-1;x>=0;x--)(A=u[x])&&(R=(L<3?A(R):L>3?A(h,d,R):A(h,d))||R);return L>3&&R&&Object.defineProperty(h,d,R),R},D=this&&this.__param||function(u,h){return function(d,y){h(d,y,u)}};Object.defineProperty(p,"__esModule",{value:!0}),p.Linkifier=void 0;const v=m(3656),E=m(8460),M=m(844),w=m(2585),g=m(4725);let l=p.Linkifier=class extends M.Disposable{get currentLink(){return this._currentLink}constructor(u,h,d,y,A){super(),this._element=u,this._mouseService=h,this._renderService=d,this._bufferService=y,this._linkProviderService=A,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new E.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new E.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,M.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,M.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,v.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,v.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,v.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,v.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(u){this._lastMouseEvent=u;const h=this._positionFromMouseEvent(u,this._element,this._mouseService);if(!h)return;this._isMouseOut=!1;const d=u.composedPath();for(let y=0;y<d.length;y++){const A=d[y];if(A.classList.contains("xterm"))break;if(A.classList.contains("xterm-hover"))return}this._lastBufferCell&&h.x===this._lastBufferCell.x&&h.y===this._lastBufferCell.y||(this._handleHover(h),this._lastBufferCell=h)}_handleHover(u){if(this._activeLine!==u.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(u,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,u)||(this._clearCurrentLink(),this._askForLink(u,!0))}_askForLink(u,h){this._activeProviderReplies&&h||(this._activeProviderReplies?.forEach(y=>{y?.forEach(A=>{A.link.dispose&&A.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=u.y);let d=!1;for(const[y,A]of this._linkProviderService.linkProviders.entries())h?this._activeProviderReplies?.get(y)&&(d=this._checkLinkProviderResult(y,u,d)):A.provideLinks(u.y,L=>{if(this._isMouseOut)return;const R=L?.map(x=>({link:x}));this._activeProviderReplies?.set(y,R),d=this._checkLinkProviderResult(y,u,d),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(u.y,this._activeProviderReplies)})}_removeIntersectingLinks(u,h){const d=new Set;for(let y=0;y<h.size;y++){const A=h.get(y);if(A)for(let L=0;L<A.length;L++){const R=A[L],x=R.link.range.start.y<u?0:R.link.range.start.x,I=R.link.range.end.y>u?this._bufferService.cols:R.link.range.end.x;for(let U=x;U<=I;U++){if(d.has(U)){A.splice(L--,1);break}d.add(U)}}}}_checkLinkProviderResult(u,h,d){if(!this._activeProviderReplies)return d;const y=this._activeProviderReplies.get(u);let A=!1;for(let L=0;L<u;L++)this._activeProviderReplies.has(L)&&!this._activeProviderReplies.get(L)||(A=!0);if(!A&&y){const L=y.find(R=>this._linkAtPosition(R.link,h));L&&(d=!0,this._handleNewLink(L))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!d)for(let L=0;L<this._activeProviderReplies.size;L++){const R=this._activeProviderReplies.get(L)?.find(x=>this._linkAtPosition(x.link,h));if(R){d=!0,this._handleNewLink(R);break}}return d}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(u){if(!this._currentLink)return;const h=this._positionFromMouseEvent(u,this._element,this._mouseService);h&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,h)&&this._currentLink.link.activate(u,this._currentLink.link.text)}_clearCurrentLink(u,h){this._currentLink&&this._lastMouseEvent&&(!u||!h||this._currentLink.link.range.start.y>=u&&this._currentLink.link.range.end.y<=h)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,M.disposeArray)(this._linkCacheDisposables))}_handleNewLink(u){if(!this._lastMouseEvent)return;const h=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);h&&this._linkAtPosition(u.link,h)&&(this._currentLink=u,this._currentLink.state={decorations:{underline:u.link.decorations===void 0||u.link.decorations.underline,pointerCursor:u.link.decorations===void 0||u.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,u.link,this._lastMouseEvent),u.link.decorations={},Object.defineProperties(u.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:d=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==d&&(this._currentLink.state.decorations.pointerCursor=d,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",d))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:d=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==d&&(this._currentLink.state.decorations.underline=d,this._currentLink.state.isHovered&&this._fireUnderlineEvent(u.link,d))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(d=>{if(!this._currentLink)return;const y=d.start===0?0:d.start+1+this._bufferService.buffer.ydisp,A=this._bufferService.buffer.ydisp+1+d.end;if(this._currentLink.link.range.start.y>=y&&this._currentLink.link.range.end.y<=A&&(this._clearCurrentLink(y,A),this._lastMouseEvent)){const L=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);L&&this._askForLink(L,!1)}})))}_linkHover(u,h,d){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!0),this._currentLink.state.decorations.pointerCursor&&u.classList.add("xterm-cursor-pointer")),h.hover&&h.hover(d,h.text)}_fireUnderlineEvent(u,h){const d=u.range,y=this._bufferService.buffer.ydisp,A=this._createLinkUnderlineEvent(d.start.x-1,d.start.y-y-1,d.end.x,d.end.y-y-1,void 0);(h?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(A)}_linkLeave(u,h,d){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!1),this._currentLink.state.decorations.pointerCursor&&u.classList.remove("xterm-cursor-pointer")),h.leave&&h.leave(d,h.text)}_linkAtPosition(u,h){const d=u.range.start.y*this._bufferService.cols+u.range.start.x,y=u.range.end.y*this._bufferService.cols+u.range.end.x,A=h.y*this._bufferService.cols+h.x;return d<=A&&A<=y}_positionFromMouseEvent(u,h,d){const y=d.getCoords(u,h,this._bufferService.cols,this._bufferService.rows);if(y)return{x:y[0],y:y[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(u,h,d,y,A){return{x1:u,y1:h,x2:d,y2:y,cols:this._bufferService.cols,fg:A}}};p.Linkifier=l=C([D(1,g.IMouseService),D(2,g.IRenderService),D(3,w.IBufferService),D(4,g.ILinkProviderService)],l)},9042:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.tooMuchOutput=p.promptLabel=void 0,p.promptLabel="Terminal input",p.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(ne,p,m){var C=this&&this.__decorate||function(g,l,u,h){var d,y=arguments.length,A=y<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(g,l,u,h);else for(var L=g.length-1;L>=0;L--)(d=g[L])&&(A=(y<3?d(A):y>3?d(l,u,A):d(l,u))||A);return y>3&&A&&Object.defineProperty(l,u,A),A},D=this&&this.__param||function(g,l){return function(u,h){l(u,h,g)}};Object.defineProperty(p,"__esModule",{value:!0}),p.OscLinkProvider=void 0;const v=m(511),E=m(2585);let M=p.OscLinkProvider=class{constructor(g,l,u){this._bufferService=g,this._optionsService=l,this._oscLinkService=u}provideLinks(g,l){const u=this._bufferService.buffer.lines.get(g-1);if(!u)return void l(void 0);const h=[],d=this._optionsService.rawOptions.linkHandler,y=new v.CellData,A=u.getTrimmedLength();let L=-1,R=-1,x=!1;for(let I=0;I<A;I++)if(R!==-1||u.hasContent(I)){if(u.loadCell(I,y),y.hasExtendedAttrs()&&y.extended.urlId){if(R===-1){R=I,L=y.extended.urlId;continue}x=y.extended.urlId!==L}else R!==-1&&(x=!0);if(x||R!==-1&&I===A-1){const U=this._oscLinkService.getLinkData(L)?.uri;if(U){const $={start:{x:R+1,y:g},end:{x:I+(x||I!==A-1?0:1),y:g}};let Z=!1;if(!d?.allowNonHttpProtocols)try{const W=new URL(U);["http:","https:"].includes(W.protocol)||(Z=!0)}catch{Z=!0}Z||h.push({text:U,range:$,activate:(W,se)=>d?d.activate(W,se,$):w(0,se),hover:(W,se)=>d?.hover?.(W,se,$),leave:(W,se)=>d?.leave?.(W,se,$)})}x=!1,y.hasExtendedAttrs()&&y.extended.urlId?(R=I,L=y.extended.urlId):(R=-1,L=-1)}}l(h)}};function w(g,l){if(confirm(`Do you want to navigate to ${l}?

WARNING: This link could potentially be dangerous`)){const u=window.open();if(u){try{u.opener=null}catch{}u.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}}p.OscLinkProvider=M=C([D(0,E.IBufferService),D(1,E.IOptionsService),D(2,E.IOscLinkService)],M)},6193:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.RenderDebouncer=void 0,p.RenderDebouncer=class{constructor(m,C){this._renderCallback=m,this._coreBrowserService=C,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(m){return this._refreshCallbacks.push(m),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(m,C,D){this._rowCount=D,m=m!==void 0?m:0,C=C!==void 0?C:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,m):m,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,C):C,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const m=Math.max(this._rowStart,0),C=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(m,C),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const m of this._refreshCallbacks)m(0);this._refreshCallbacks=[]}}},3236:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Terminal=void 0;const C=m(3614),D=m(3656),v=m(3551),E=m(9042),M=m(3730),w=m(1680),g=m(3107),l=m(5744),u=m(2950),h=m(1296),d=m(428),y=m(4269),A=m(5114),L=m(8934),R=m(3230),x=m(9312),I=m(4725),U=m(6731),$=m(8055),Z=m(8969),W=m(8460),se=m(844),ce=m(6114),ve=m(8437),Se=m(2584),ge=m(7399),B=m(5941),z=m(9074),V=m(2585),J=m(5435),X=m(4567),be=m(779);class Ne extends Z.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(ie={}){super(ie),this.browser=ce,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new se.MutableDisposable),this._onCursorMove=this.register(new W.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new W.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new W.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new W.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new W.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new W.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new W.EventEmitter),this._onBlur=this.register(new W.EventEmitter),this._onA11yCharEmitter=this.register(new W.EventEmitter),this._onA11yTabEmitter=this.register(new W.EventEmitter),this._onWillOpen=this.register(new W.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(z.DecorationService),this._instantiationService.setService(V.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(be.LinkProviderService),this._instantiationService.setService(I.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(M.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((N,oe)=>this.refresh(N,oe))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(N=>this._reportWindowsOptions(N))),this.register(this._inputHandler.onColor(N=>this._handleColorEvent(N))),this.register((0,W.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,W.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,W.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,W.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(N=>this._afterResize(N.cols,N.rows))),this.register((0,se.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(ie){if(this._themeService)for(const N of ie){let oe,ue="";switch(N.index){case 256:oe="foreground",ue="10";break;case 257:oe="background",ue="11";break;case 258:oe="cursor",ue="12";break;default:oe="ansi",ue="4;"+N.index}switch(N.type){case 0:const ae=$.color.toColorRGB(oe==="ansi"?this._themeService.colors.ansi[N.index]:this._themeService.colors[oe]);this.coreService.triggerDataEvent(`${Se.C0.ESC}]${ue};${(0,B.toRgbString)(ae)}${Se.C1_ESCAPED.ST}`);break;case 1:if(oe==="ansi")this._themeService.modifyColors(ye=>ye.ansi[N.index]=$.channels.toColor(...N.color));else{const ye=oe;this._themeService.modifyColors(Ye=>Ye[ye]=$.channels.toColor(...N.color))}break;case 2:this._themeService.restoreColor(N.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(ie){ie?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(X.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(ie){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Se.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Se.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const ie=this.buffer.ybase+this.buffer.y,N=this.buffer.lines.get(ie);if(!N)return;const oe=Math.min(this.buffer.x,this.cols-1),ue=this._renderService.dimensions.css.cell.height,ae=N.getWidth(oe),ye=this._renderService.dimensions.css.cell.width*ae,Ye=this.buffer.y*this._renderService.dimensions.css.cell.height,dt=oe*this._renderService.dimensions.css.cell.width;this.textarea.style.left=dt+"px",this.textarea.style.top=Ye+"px",this.textarea.style.width=ye+"px",this.textarea.style.height=ue+"px",this.textarea.style.lineHeight=ue+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,D.addDisposableDomListener)(this.element,"copy",N=>{this.hasSelection()&&(0,C.copyHandler)(N,this._selectionService)}));const ie=N=>(0,C.handlePasteEvent)(N,this.textarea,this.coreService,this.optionsService);this.register((0,D.addDisposableDomListener)(this.textarea,"paste",ie)),this.register((0,D.addDisposableDomListener)(this.element,"paste",ie)),ce.isFirefox?this.register((0,D.addDisposableDomListener)(this.element,"mousedown",N=>{N.button===2&&(0,C.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,D.addDisposableDomListener)(this.element,"contextmenu",N=>{(0,C.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),ce.isLinux&&this.register((0,D.addDisposableDomListener)(this.element,"auxclick",N=>{N.button===1&&(0,C.moveTextAreaUnderMouseCursor)(N,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,D.addDisposableDomListener)(this.textarea,"keyup",ie=>this._keyUp(ie),!0)),this.register((0,D.addDisposableDomListener)(this.textarea,"keydown",ie=>this._keyDown(ie),!0)),this.register((0,D.addDisposableDomListener)(this.textarea,"keypress",ie=>this._keyPress(ie),!0)),this.register((0,D.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,D.addDisposableDomListener)(this.textarea,"compositionupdate",ie=>this._compositionHelper.compositionupdate(ie))),this.register((0,D.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,D.addDisposableDomListener)(this.textarea,"input",ie=>this._inputEvent(ie),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(ie){if(!ie)throw new Error("Terminal requires a parent element.");if(ie.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=ie.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),ie.appendChild(this.element);const N=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),N.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,D.addDisposableDomListener)(this.screenElement,"mousemove",oe=>this.updateCursorStyle(oe))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),N.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",E.promptLabel),ce.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(A.CoreBrowserService,this.textarea,ie.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(I.ICoreBrowserService,this._coreBrowserService),this.register((0,D.addDisposableDomListener)(this.textarea,"focus",oe=>this._handleTextAreaFocus(oe))),this.register((0,D.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(d.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(I.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(U.ThemeService),this._instantiationService.setService(I.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(y.CharacterJoinerService),this._instantiationService.setService(I.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(R.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(I.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(oe=>this._onRender.fire(oe))),this.onResize(oe=>this._renderService.resize(oe.cols,oe.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(u.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(L.MouseService),this._instantiationService.setService(I.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(v.Linkifier,this.screenElement)),this.element.appendChild(N);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(oe=>this.scrollLines(oe.amount,oe.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(x.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(I.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(oe=>this.scrollLines(oe.amount,oe.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(oe=>this._renderService.handleSelectionChanged(oe.start,oe.end,oe.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(oe=>{this.textarea.value=oe,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(oe=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,D.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,D.addDisposableDomListener)(this.element,"mousedown",oe=>this._selectionService.handleMouseDown(oe))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(X.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",oe=>this._handleScreenReaderModeOptionChange(oe))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",oe=>{!this._overviewRulerRenderer&&oe&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(h.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const ie=this,N=this.element;function oe(ye){const Ye=ie._mouseService.getMouseReportCoords(ye,ie.screenElement);if(!Ye)return!1;let dt,ht;switch(ye.overrideType||ye.type){case"mousemove":ht=32,ye.buttons===void 0?(dt=3,ye.button!==void 0&&(dt=ye.button<3?ye.button:3)):dt=1&ye.buttons?0:4&ye.buttons?1:2&ye.buttons?2:3;break;case"mouseup":ht=0,dt=ye.button<3?ye.button:3;break;case"mousedown":ht=1,dt=ye.button<3?ye.button:3;break;case"wheel":if(ie._customWheelEventHandler&&ie._customWheelEventHandler(ye)===!1||ie.viewport.getLinesScrolled(ye)===0)return!1;ht=ye.deltaY<0?0:1,dt=4;break;default:return!1}return!(ht===void 0||dt===void 0||dt>4)&&ie.coreMouseService.triggerMouseEvent({col:Ye.col,row:Ye.row,x:Ye.x,y:Ye.y,button:dt,action:ht,ctrl:ye.ctrlKey,alt:ye.altKey,shift:ye.shiftKey})}const ue={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ae={mouseup:ye=>(oe(ye),ye.buttons||(this._document.removeEventListener("mouseup",ue.mouseup),ue.mousedrag&&this._document.removeEventListener("mousemove",ue.mousedrag)),this.cancel(ye)),wheel:ye=>(oe(ye),this.cancel(ye,!0)),mousedrag:ye=>{ye.buttons&&oe(ye)},mousemove:ye=>{ye.buttons||oe(ye)}};this.register(this.coreMouseService.onProtocolChange(ye=>{ye?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ye)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ye?ue.mousemove||(N.addEventListener("mousemove",ae.mousemove),ue.mousemove=ae.mousemove):(N.removeEventListener("mousemove",ue.mousemove),ue.mousemove=null),16&ye?ue.wheel||(N.addEventListener("wheel",ae.wheel,{passive:!1}),ue.wheel=ae.wheel):(N.removeEventListener("wheel",ue.wheel),ue.wheel=null),2&ye?ue.mouseup||(ue.mouseup=ae.mouseup):(this._document.removeEventListener("mouseup",ue.mouseup),ue.mouseup=null),4&ye?ue.mousedrag||(ue.mousedrag=ae.mousedrag):(this._document.removeEventListener("mousemove",ue.mousedrag),ue.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,D.addDisposableDomListener)(N,"mousedown",ye=>{if(ye.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ye))return oe(ye),ue.mouseup&&this._document.addEventListener("mouseup",ue.mouseup),ue.mousedrag&&this._document.addEventListener("mousemove",ue.mousedrag),this.cancel(ye)})),this.register((0,D.addDisposableDomListener)(N,"wheel",ye=>{if(!ue.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(ye)===!1)return!1;if(!this.buffer.hasScrollback){const Ye=this.viewport.getLinesScrolled(ye);if(Ye===0)return;const dt=Se.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ye.deltaY<0?"A":"B");let ht="";for(let et=0;et<Math.abs(Ye);et++)ht+=dt;return this.coreService.triggerDataEvent(ht,!0),this.cancel(ye,!0)}return this.viewport.handleWheel(ye)?this.cancel(ye):void 0}},{passive:!1})),this.register((0,D.addDisposableDomListener)(N,"touchstart",ye=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ye),this.cancel(ye)},{passive:!0})),this.register((0,D.addDisposableDomListener)(N,"touchmove",ye=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ye)?void 0:this.cancel(ye)},{passive:!1}))}refresh(ie,N){this._renderService?.refreshRows(ie,N)}updateCursorStyle(ie){this._selectionService?.shouldColumnSelect(ie)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(ie,N,oe=0){oe===1?(super.scrollLines(ie,N,oe),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(ie)}paste(ie){(0,C.paste)(ie,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(ie){this._customKeyEventHandler=ie}attachCustomWheelEventHandler(ie){this._customWheelEventHandler=ie}registerLinkProvider(ie){return this._linkProviderService.registerLinkProvider(ie)}registerCharacterJoiner(ie){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const N=this._characterJoinerService.register(ie);return this.refresh(0,this.rows-1),N}deregisterCharacterJoiner(ie){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(ie)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(ie){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+ie)}registerDecoration(ie){return this._decorationService.registerDecoration(ie)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(ie,N,oe){this._selectionService.setSelection(ie,N,oe)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(ie,N){this._selectionService?.selectLines(ie,N)}_keyDown(ie){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(ie)===!1)return!1;const N=this.browser.isMac&&this.options.macOptionIsMeta&&ie.altKey;if(!N&&!this._compositionHelper.keydown(ie))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;N||ie.key!=="Dead"&&ie.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const oe=(0,ge.evaluateKeyboardEvent)(ie,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(ie),oe.type===3||oe.type===2){const ue=this.rows-1;return this.scrollLines(oe.type===2?-ue:ue),this.cancel(ie,!0)}return oe.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,ie)||(oe.cancel&&this.cancel(ie,!0),!oe.key||!!(ie.key&&!ie.ctrlKey&&!ie.altKey&&!ie.metaKey&&ie.key.length===1&&ie.key.charCodeAt(0)>=65&&ie.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(oe.key!==Se.C0.ETX&&oe.key!==Se.C0.CR||(this.textarea.value=""),this._onKey.fire({key:oe.key,domEvent:ie}),this._showCursor(),this.coreService.triggerDataEvent(oe.key,!0),!this.optionsService.rawOptions.screenReaderMode||ie.altKey||ie.ctrlKey?this.cancel(ie,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(ie,N){const oe=ie.isMac&&!this.options.macOptionIsMeta&&N.altKey&&!N.ctrlKey&&!N.metaKey||ie.isWindows&&N.altKey&&N.ctrlKey&&!N.metaKey||ie.isWindows&&N.getModifierState("AltGraph");return N.type==="keypress"?oe:oe&&(!N.keyCode||N.keyCode>47)}_keyUp(ie){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(ie)===!1||(function(N){return N.keyCode===16||N.keyCode===17||N.keyCode===18}(ie)||this.focus(),this.updateCursorStyle(ie),this._keyPressHandled=!1)}_keyPress(ie){let N;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(ie)===!1)return!1;if(this.cancel(ie),ie.charCode)N=ie.charCode;else if(ie.which===null||ie.which===void 0)N=ie.keyCode;else{if(ie.which===0||ie.charCode===0)return!1;N=ie.which}return!(!N||(ie.altKey||ie.ctrlKey||ie.metaKey)&&!this._isThirdLevelShift(this.browser,ie)||(N=String.fromCharCode(N),this._onKey.fire({key:N,domEvent:ie}),this._showCursor(),this.coreService.triggerDataEvent(N,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(ie){if(ie.data&&ie.inputType==="insertText"&&(!ie.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const N=ie.data;return this.coreService.triggerDataEvent(N,!0),this.cancel(ie),!0}return!1}resize(ie,N){ie!==this.cols||N!==this.rows?super.resize(ie,N):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(ie,N){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let ie=1;ie<this.rows;ie++)this.buffer.lines.push(this.buffer.getBlankLine(ve.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const ie=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=ie,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(Se.C0.ESC+"[I"):this.coreService.triggerDataEvent(Se.C0.ESC+"[O")}_reportWindowsOptions(ie){if(this._renderService)switch(ie){case J.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const N=this._renderService.dimensions.css.canvas.width.toFixed(0),oe=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Se.C0.ESC}[4;${oe};${N}t`);break;case J.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ue=this._renderService.dimensions.css.cell.width.toFixed(0),ae=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Se.C0.ESC}[6;${ae};${ue}t`)}}cancel(ie,N){if(this.options.cancelEvents||N)return ie.preventDefault(),ie.stopPropagation(),!1}}p.Terminal=Ne},9924:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.TimeBasedDebouncer=void 0,p.TimeBasedDebouncer=class{constructor(m,C=1e3){this._renderCallback=m,this._debounceThresholdMS=C,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(m,C,D){this._rowCount=D,m=m!==void 0?m:0,C=C!==void 0?C:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,m):m,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,C):C;const v=Date.now();if(v-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=v,this._innerRefresh();else if(!this._additionalRefreshRequested){const E=v-this._lastRefreshMs,M=this._debounceThresholdMS-E;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},M)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const m=Math.max(this._rowStart,0),C=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(m,C)}}},1680:function(ne,p,m){var C=this&&this.__decorate||function(u,h,d,y){var A,L=arguments.length,R=L<3?h:y===null?y=Object.getOwnPropertyDescriptor(h,d):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(u,h,d,y);else for(var x=u.length-1;x>=0;x--)(A=u[x])&&(R=(L<3?A(R):L>3?A(h,d,R):A(h,d))||R);return L>3&&R&&Object.defineProperty(h,d,R),R},D=this&&this.__param||function(u,h){return function(d,y){h(d,y,u)}};Object.defineProperty(p,"__esModule",{value:!0}),p.Viewport=void 0;const v=m(3656),E=m(4725),M=m(8460),w=m(844),g=m(2585);let l=p.Viewport=class extends w.Disposable{constructor(u,h,d,y,A,L,R,x){super(),this._viewportElement=u,this._scrollArea=h,this._bufferService=d,this._optionsService=y,this._charSizeService=A,this._renderService=L,this._coreBrowserService=R,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new M.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(I=>this._activeBuffer=I.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(I=>this._renderDimensions=I)),this._handleThemeChange(x.colors),this.register(x.onChangeColors(I=>this._handleThemeChange(I))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(u){this._viewportElement.style.backgroundColor=u.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(u){if(u)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const h=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==h&&(this._lastRecordedBufferHeight=h,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==u&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=u),this._refreshAnimationFrame=null}syncScrollArea(u=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(u);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(u)}_handleScroll(u){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const h=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const u=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(u*(this._smoothScrollState.target-this._smoothScrollState.origin)),u<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(u,h){const d=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(h<0&&this._viewportElement.scrollTop!==0||h>0&&d<this._lastRecordedBufferHeight)||(u.cancelable&&u.preventDefault(),!1)}handleWheel(u){const h=this._getPixelsScrolled(u);return h!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+h:this._smoothScrollState.target+=h,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=h,this._bubbleScroll(u,h))}scrollLines(u){if(u!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const h=u*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+h,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!1})}_getPixelsScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let h=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_LINE?h*=this._currentRowHeight:u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._currentRowHeight*this._bufferService.rows),h}getBufferElements(u,h){let d,y="";const A=[],L=h??this._bufferService.buffer.lines.length,R=this._bufferService.buffer.lines;for(let x=u;x<L;x++){const I=R.get(x);if(!I)continue;const U=R.get(x+1)?.isWrapped;if(y+=I.translateToString(!U),!U||x===R.length-1){const $=document.createElement("div");$.textContent=y,A.push($),y.length>0&&(d=$),y=""}}return{bufferElements:A,cursorElement:d}}getLinesScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let h=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(h/=this._currentRowHeight+0,this._wheelPartialScroll+=h,h=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._bufferService.rows),h}_applyScrollModifier(u,h){const d=this._optionsService.rawOptions.fastScrollModifier;return d==="alt"&&h.altKey||d==="ctrl"&&h.ctrlKey||d==="shift"&&h.shiftKey?u*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:u*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(u){this._lastTouchY=u.touches[0].pageY}handleTouchMove(u){const h=this._lastTouchY-u.touches[0].pageY;return this._lastTouchY=u.touches[0].pageY,h!==0&&(this._viewportElement.scrollTop+=h,this._bubbleScroll(u,h))}};p.Viewport=l=C([D(2,g.IBufferService),D(3,g.IOptionsService),D(4,E.ICharSizeService),D(5,E.IRenderService),D(6,E.ICoreBrowserService),D(7,E.IThemeService)],l)},3107:function(ne,p,m){var C=this&&this.__decorate||function(g,l,u,h){var d,y=arguments.length,A=y<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(g,l,u,h);else for(var L=g.length-1;L>=0;L--)(d=g[L])&&(A=(y<3?d(A):y>3?d(l,u,A):d(l,u))||A);return y>3&&A&&Object.defineProperty(l,u,A),A},D=this&&this.__param||function(g,l){return function(u,h){l(u,h,g)}};Object.defineProperty(p,"__esModule",{value:!0}),p.BufferDecorationRenderer=void 0;const v=m(4725),E=m(844),M=m(2585);let w=p.BufferDecorationRenderer=class extends E.Disposable{constructor(g,l,u,h,d){super(),this._screenElement=g,this._bufferService=l,this._coreBrowserService=u,this._decorationService=h,this._renderService=d,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(y=>this._removeDecoration(y))),this.register((0,E.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){const l=this._coreBrowserService.mainDocument.createElement("div");l.classList.add("xterm-decoration"),l.classList.toggle("xterm-decoration-top-layer",g?.options?.layer==="top"),l.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,l.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",l.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",l.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const u=g.options.x??0;return u&&u>this._bufferService.cols&&(l.style.display="none"),this._refreshXPosition(g,l),l}_refreshStyle(g){const l=g.marker.line-this._bufferService.buffers.active.ydisp;if(l<0||l>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let u=this._decorationElements.get(g);u||(u=this._createElement(g),g.element=u,this._decorationElements.set(g,u),this._container.appendChild(u),g.onDispose(()=>{this._decorationElements.delete(g),u.remove()})),u.style.top=l*this._renderService.dimensions.css.cell.height+"px",u.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(u)}}_refreshXPosition(g,l=g.element){if(!l)return;const u=g.options.x??0;(g.options.anchor||"left")==="right"?l.style.right=u?u*this._renderService.dimensions.css.cell.width+"px":"":l.style.left=u?u*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){this._decorationElements.get(g)?.remove(),this._decorationElements.delete(g),g.dispose()}};p.BufferDecorationRenderer=w=C([D(1,M.IBufferService),D(2,v.ICoreBrowserService),D(3,M.IDecorationService),D(4,v.IRenderService)],w)},5871:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ColorZoneStore=void 0,p.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(m){if(m.options.overviewRulerOptions){for(const C of this._zones)if(C.color===m.options.overviewRulerOptions.color&&C.position===m.options.overviewRulerOptions.position){if(this._lineIntersectsZone(C,m.marker.line))return;if(this._lineAdjacentToZone(C,m.marker.line,m.options.overviewRulerOptions.position))return void this._addLineToZone(C,m.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=m.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=m.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=m.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=m.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:m.options.overviewRulerOptions.color,position:m.options.overviewRulerOptions.position,startBufferLine:m.marker.line,endBufferLine:m.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(m){this._linePadding=m}_lineIntersectsZone(m,C){return C>=m.startBufferLine&&C<=m.endBufferLine}_lineAdjacentToZone(m,C,D){return C>=m.startBufferLine-this._linePadding[D||"full"]&&C<=m.endBufferLine+this._linePadding[D||"full"]}_addLineToZone(m,C){m.startBufferLine=Math.min(m.startBufferLine,C),m.endBufferLine=Math.max(m.endBufferLine,C)}}},5744:function(ne,p,m){var C=this&&this.__decorate||function(d,y,A,L){var R,x=arguments.length,I=x<3?y:L===null?L=Object.getOwnPropertyDescriptor(y,A):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(d,y,A,L);else for(var U=d.length-1;U>=0;U--)(R=d[U])&&(I=(x<3?R(I):x>3?R(y,A,I):R(y,A))||I);return x>3&&I&&Object.defineProperty(y,A,I),I},D=this&&this.__param||function(d,y){return function(A,L){y(A,L,d)}};Object.defineProperty(p,"__esModule",{value:!0}),p.OverviewRulerRenderer=void 0;const v=m(5871),E=m(4725),M=m(844),w=m(2585),g={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0};let h=p.OverviewRulerRenderer=class extends M.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(d,y,A,L,R,x,I){super(),this._viewportElement=d,this._screenElement=y,this._bufferService=A,this._decorationService=L,this._renderService=R,this._optionsService=x,this._coreBrowserService=I,this._colorZoneStore=new v.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const U=this._canvas.getContext("2d");if(!U)throw new Error("Ctx cannot be null");this._ctx=U,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,M.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const d=Math.floor(this._canvas.width/3),y=Math.ceil(this._canvas.width/3);l.full=this._canvas.width,l.left=d,l.center=y,l.right=d,this._refreshDrawHeightConstants(),u.full=0,u.left=0,u.center=l.left,u.right=l.left+l.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowserService.dpr);const d=this._canvas.height/this._bufferService.buffer.lines.length,y=Math.round(Math.max(Math.min(d,12),6)*this._coreBrowserService.dpr);g.left=y,g.center=y,g.right=y}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const y of this._decorationService.decorations)this._colorZoneStore.addDecoration(y);this._ctx.lineWidth=1;const d=this._colorZoneStore.zones;for(const y of d)y.position!=="full"&&this._renderColorZone(y);for(const y of d)y.position==="full"&&this._renderColorZone(y);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(d){this._ctx.fillStyle=d.color,this._ctx.fillRect(u[d.position||"full"],Math.round((this._canvas.height-1)*(d.startBufferLine/this._bufferService.buffers.active.lines.length)-g[d.position||"full"]/2),l[d.position||"full"],Math.round((this._canvas.height-1)*((d.endBufferLine-d.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[d.position||"full"]))}_queueRefresh(d,y){this._shouldUpdateDimensions=d||this._shouldUpdateDimensions,this._shouldUpdateAnchor=y||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};p.OverviewRulerRenderer=h=C([D(2,w.IBufferService),D(3,w.IDecorationService),D(4,E.IRenderService),D(5,w.IOptionsService),D(6,E.ICoreBrowserService)],h)},2950:function(ne,p,m){var C=this&&this.__decorate||function(g,l,u,h){var d,y=arguments.length,A=y<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(g,l,u,h);else for(var L=g.length-1;L>=0;L--)(d=g[L])&&(A=(y<3?d(A):y>3?d(l,u,A):d(l,u))||A);return y>3&&A&&Object.defineProperty(l,u,A),A},D=this&&this.__param||function(g,l){return function(u,h){l(u,h,g)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CompositionHelper=void 0;const v=m(4725),E=m(2585),M=m(2584);let w=p.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,l,u,h,d,y){this._textarea=g,this._compositionView=l,this._bufferService=u,this._optionsService=h,this._coreService=d,this._renderService=y,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let u;this._isSendingComposition=!1,l.start+=this._dataAlreadySent.length,u=this._isComposing?this._textarea.value.substring(l.start,l.end):this._textarea.value.substring(l.start),u.length>0&&this._coreService.triggerDataEvent(u,!0)}},0)}else{this._isSendingComposition=!1;const l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const l=this._textarea.value,u=l.replace(g,"");this._dataAlreadySent=u,l.length>g.length?this._coreService.triggerDataEvent(u,!0):l.length<g.length?this._coreService.triggerDataEvent(`${M.C0.DEL}`,!0):l.length===g.length&&l!==g&&this._coreService.triggerDataEvent(l,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),u=this._renderService.dimensions.css.cell.height,h=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,d=l*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=d+"px",this._compositionView.style.top=h+"px",this._compositionView.style.height=u+"px",this._compositionView.style.lineHeight=u+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const y=this._compositionView.getBoundingClientRect();this._textarea.style.left=d+"px",this._textarea.style.top=h+"px",this._textarea.style.width=Math.max(y.width,1)+"px",this._textarea.style.height=Math.max(y.height,1)+"px",this._textarea.style.lineHeight=y.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};p.CompositionHelper=w=C([D(2,E.IBufferService),D(3,E.IOptionsService),D(4,E.ICoreService),D(5,v.IRenderService)],w)},9806:(ne,p)=>{function m(C,D,v){const E=v.getBoundingClientRect(),M=C.getComputedStyle(v),w=parseInt(M.getPropertyValue("padding-left")),g=parseInt(M.getPropertyValue("padding-top"));return[D.clientX-E.left-w,D.clientY-E.top-g]}Object.defineProperty(p,"__esModule",{value:!0}),p.getCoords=p.getCoordsRelativeToElement=void 0,p.getCoordsRelativeToElement=m,p.getCoords=function(C,D,v,E,M,w,g,l,u){if(!w)return;const h=m(C,D,v);return h?(h[0]=Math.ceil((h[0]+(u?g/2:0))/g),h[1]=Math.ceil(h[1]/l),h[0]=Math.min(Math.max(h[0],1),E+(u?1:0)),h[1]=Math.min(Math.max(h[1],1),M),h):void 0}},9504:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.moveToCellSequence=void 0;const C=m(2584);function D(l,u,h,d){const y=l-v(l,h),A=u-v(u,h),L=Math.abs(y-A)-function(R,x,I){let U=0;const $=R-v(R,I),Z=x-v(x,I);for(let W=0;W<Math.abs($-Z);W++){const se=E(R,x)==="A"?-1:1;I.buffer.lines.get($+se*W)?.isWrapped&&U++}return U}(l,u,h);return g(L,w(E(l,u),d))}function v(l,u){let h=0,d=u.buffer.lines.get(l),y=d?.isWrapped;for(;y&&l>=0&&l<u.rows;)h++,d=u.buffer.lines.get(--l),y=d?.isWrapped;return h}function E(l,u){return l>u?"A":"B"}function M(l,u,h,d,y,A){let L=l,R=u,x="";for(;L!==h||R!==d;)L+=y?1:-1,y&&L>A.cols-1?(x+=A.buffer.translateBufferLineToString(R,!1,l,L),L=0,l=0,R++):!y&&L<0&&(x+=A.buffer.translateBufferLineToString(R,!1,0,l+1),L=A.cols-1,l=L,R--);return x+A.buffer.translateBufferLineToString(R,!1,l,L)}function w(l,u){const h=u?"O":"[";return C.C0.ESC+h+l}function g(l,u){l=Math.floor(l);let h="";for(let d=0;d<l;d++)h+=u;return h}p.moveToCellSequence=function(l,u,h,d){const y=h.buffer.x,A=h.buffer.y;if(!h.buffer.hasScrollback)return function(x,I,U,$,Z,W){return D(I,$,Z,W).length===0?"":g(M(x,I,x,I-v(I,Z),!1,Z).length,w("D",W))}(y,A,0,u,h,d)+D(A,u,h,d)+function(x,I,U,$,Z,W){let se;se=D(I,$,Z,W).length>0?$-v($,Z):I;const ce=$,ve=function(Se,ge,B,z,V,J){let X;return X=D(B,z,V,J).length>0?z-v(z,V):ge,Se<B&&X<=z||Se>=B&&X<z?"C":"D"}(x,I,U,$,Z,W);return g(M(x,se,U,ce,ve==="C",Z).length,w(ve,W))}(y,A,l,u,h,d);let L;if(A===u)return L=y>l?"D":"C",g(Math.abs(y-l),w(L,d));L=A>u?"D":"C";const R=Math.abs(A-u);return g(function(x,I){return I.cols-x}(A>u?l:y,h)+(R-1)*h.cols+1+((A>u?y:l)-1),w(L,d))}},1296:function(ne,p,m){var C=this&&this.__decorate||function(W,se,ce,ve){var Se,ge=arguments.length,B=ge<3?se:ve===null?ve=Object.getOwnPropertyDescriptor(se,ce):ve;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(W,se,ce,ve);else for(var z=W.length-1;z>=0;z--)(Se=W[z])&&(B=(ge<3?Se(B):ge>3?Se(se,ce,B):Se(se,ce))||B);return ge>3&&B&&Object.defineProperty(se,ce,B),B},D=this&&this.__param||function(W,se){return function(ce,ve){se(ce,ve,W)}};Object.defineProperty(p,"__esModule",{value:!0}),p.DomRenderer=void 0;const v=m(3787),E=m(2550),M=m(2223),w=m(6171),g=m(6052),l=m(4725),u=m(8055),h=m(8460),d=m(844),y=m(2585),A="xterm-dom-renderer-owner-",L="xterm-rows",R="xterm-fg-",x="xterm-bg-",I="xterm-focus",U="xterm-selection";let $=1,Z=p.DomRenderer=class extends d.Disposable{constructor(W,se,ce,ve,Se,ge,B,z,V,J,X,be,Ne){super(),this._terminal=W,this._document=se,this._element=ce,this._screenElement=ve,this._viewportElement=Se,this._helperContainer=ge,this._linkifier2=B,this._charSizeService=V,this._optionsService=J,this._bufferService=X,this._coreBrowserService=be,this._themeService=Ne,this._terminalClass=$++,this._rowElements=[],this._selectionRenderModel=(0,g.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new h.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(L),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(U),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(ze=>this._injectCss(ze))),this._injectCss(this._themeService.colors),this._rowFactory=z.createInstance(v.DomRendererRowFactory,document),this._element.classList.add(A+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(ze=>this._handleLinkHover(ze))),this.register(this._linkifier2.onHideLinkUnderline(ze=>this._handleLinkLeave(ze))),this.register((0,d.toDisposable)(()=>{this._element.classList.remove(A+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new E.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const W=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*W,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*W),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/W),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/W),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const ce of this._rowElements)ce.style.width=`${this.dimensions.css.canvas.width}px`,ce.style.height=`${this.dimensions.css.cell.height}px`,ce.style.lineHeight=`${this.dimensions.css.cell.height}px`,ce.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const se=`${this._terminalSelector} .${L} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=se,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(W){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let se=`${this._terminalSelector} .${L} { color: ${W.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;se+=`${this._terminalSelector} .${L} .xterm-dim { color: ${u.color.multiplyOpacity(W.foreground,.5).css};}`,se+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const ce=`blink_underline_${this._terminalClass}`,ve=`blink_bar_${this._terminalClass}`,Se=`blink_block_${this._terminalClass}`;se+=`@keyframes ${ce} { 50% {  border-bottom-style: hidden; }}`,se+=`@keyframes ${ve} { 50% {  box-shadow: none; }}`,se+=`@keyframes ${Se} { 0% {  background-color: ${W.cursor.css};  color: ${W.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${W.cursor.css}; }}`,se+=`${this._terminalSelector} .${L}.${I} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${ce} 1s step-end infinite;}${this._terminalSelector} .${L}.${I} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${ve} 1s step-end infinite;}${this._terminalSelector} .${L}.${I} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Se} 1s step-end infinite;}${this._terminalSelector} .${L} .xterm-cursor.xterm-cursor-block { background-color: ${W.cursor.css}; color: ${W.cursorAccent.css};}${this._terminalSelector} .${L} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${W.cursor.css} !important; color: ${W.cursorAccent.css} !important;}${this._terminalSelector} .${L} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${W.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${L} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${W.cursor.css} inset;}${this._terminalSelector} .${L} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${W.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,se+=`${this._terminalSelector} .${U} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${U} div { position: absolute; background-color: ${W.selectionBackgroundOpaque.css};}${this._terminalSelector} .${U} div { position: absolute; background-color: ${W.selectionInactiveBackgroundOpaque.css};}`;for(const[ge,B]of W.ansi.entries())se+=`${this._terminalSelector} .${R}${ge} { color: ${B.css}; }${this._terminalSelector} .${R}${ge}.xterm-dim { color: ${u.color.multiplyOpacity(B,.5).css}; }${this._terminalSelector} .${x}${ge} { background-color: ${B.css}; }`;se+=`${this._terminalSelector} .${R}${M.INVERTED_DEFAULT_COLOR} { color: ${u.color.opaque(W.background).css}; }${this._terminalSelector} .${R}${M.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${u.color.multiplyOpacity(u.color.opaque(W.background),.5).css}; }${this._terminalSelector} .${x}${M.INVERTED_DEFAULT_COLOR} { background-color: ${W.foreground.css}; }`,this._themeStyleElement.textContent=se}_setDefaultSpacing(){const W=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${W}px`,this._rowFactory.defaultSpacing=W}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(W,se){for(let ce=this._rowElements.length;ce<=se;ce++){const ve=this._document.createElement("div");this._rowContainer.appendChild(ve),this._rowElements.push(ve)}for(;this._rowElements.length>se;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(W,se){this._refreshRowElements(W,se),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(I),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(I),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(W,se,ce){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(W,se,ce),this.renderRows(0,this._bufferService.rows-1),!W||!se)return;this._selectionRenderModel.update(this._terminal,W,se,ce);const ve=this._selectionRenderModel.viewportStartRow,Se=this._selectionRenderModel.viewportEndRow,ge=this._selectionRenderModel.viewportCappedStartRow,B=this._selectionRenderModel.viewportCappedEndRow;if(ge>=this._bufferService.rows||B<0)return;const z=this._document.createDocumentFragment();if(ce){const V=W[0]>se[0];z.appendChild(this._createSelectionElement(ge,V?se[0]:W[0],V?W[0]:se[0],B-ge+1))}else{const V=ve===ge?W[0]:0,J=ge===Se?se[0]:this._bufferService.cols;z.appendChild(this._createSelectionElement(ge,V,J));const X=B-ge-1;if(z.appendChild(this._createSelectionElement(ge+1,0,this._bufferService.cols,X)),ge!==B){const be=Se===B?se[0]:this._bufferService.cols;z.appendChild(this._createSelectionElement(B,0,be))}}this._selectionContainer.appendChild(z)}_createSelectionElement(W,se,ce,ve=1){const Se=this._document.createElement("div"),ge=se*this.dimensions.css.cell.width;let B=this.dimensions.css.cell.width*(ce-se);return ge+B>this.dimensions.css.canvas.width&&(B=this.dimensions.css.canvas.width-ge),Se.style.height=ve*this.dimensions.css.cell.height+"px",Se.style.top=W*this.dimensions.css.cell.height+"px",Se.style.left=`${ge}px`,Se.style.width=`${B}px`,Se}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const W of this._rowElements)W.replaceChildren()}renderRows(W,se){const ce=this._bufferService.buffer,ve=ce.ybase+ce.y,Se=Math.min(ce.x,this._bufferService.cols-1),ge=this._optionsService.rawOptions.cursorBlink,B=this._optionsService.rawOptions.cursorStyle,z=this._optionsService.rawOptions.cursorInactiveStyle;for(let V=W;V<=se;V++){const J=V+ce.ydisp,X=this._rowElements[V],be=ce.lines.get(J);if(!X||!be)break;X.replaceChildren(...this._rowFactory.createRow(be,J,J===ve,B,z,Se,ge,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${A}${this._terminalClass}`}_handleLinkHover(W){this._setCellUnderline(W.x1,W.x2,W.y1,W.y2,W.cols,!0)}_handleLinkLeave(W){this._setCellUnderline(W.x1,W.x2,W.y1,W.y2,W.cols,!1)}_setCellUnderline(W,se,ce,ve,Se,ge){ce<0&&(W=0),ve<0&&(se=0);const B=this._bufferService.rows-1;ce=Math.max(Math.min(ce,B),0),ve=Math.max(Math.min(ve,B),0),Se=Math.min(Se,this._bufferService.cols);const z=this._bufferService.buffer,V=z.ybase+z.y,J=Math.min(z.x,Se-1),X=this._optionsService.rawOptions.cursorBlink,be=this._optionsService.rawOptions.cursorStyle,Ne=this._optionsService.rawOptions.cursorInactiveStyle;for(let ze=ce;ze<=ve;++ze){const ie=ze+z.ydisp,N=this._rowElements[ze],oe=z.lines.get(ie);if(!N||!oe)break;N.replaceChildren(...this._rowFactory.createRow(oe,ie,ie===V,be,Ne,J,X,this.dimensions.css.cell.width,this._widthCache,ge?ze===ce?W:0:-1,ge?(ze===ve?se:Se)-1:-1))}}};p.DomRenderer=Z=C([D(7,y.IInstantiationService),D(8,l.ICharSizeService),D(9,y.IOptionsService),D(10,y.IBufferService),D(11,l.ICoreBrowserService),D(12,l.IThemeService)],Z)},3787:function(ne,p,m){var C=this&&this.__decorate||function(L,R,x,I){var U,$=arguments.length,Z=$<3?R:I===null?I=Object.getOwnPropertyDescriptor(R,x):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(L,R,x,I);else for(var W=L.length-1;W>=0;W--)(U=L[W])&&(Z=($<3?U(Z):$>3?U(R,x,Z):U(R,x))||Z);return $>3&&Z&&Object.defineProperty(R,x,Z),Z},D=this&&this.__param||function(L,R){return function(x,I){R(x,I,L)}};Object.defineProperty(p,"__esModule",{value:!0}),p.DomRendererRowFactory=void 0;const v=m(2223),E=m(643),M=m(511),w=m(2585),g=m(8055),l=m(4725),u=m(4269),h=m(6171),d=m(3734);let y=p.DomRendererRowFactory=class{constructor(L,R,x,I,U,$,Z){this._document=L,this._characterJoinerService=R,this._optionsService=x,this._coreBrowserService=I,this._coreService=U,this._decorationService=$,this._themeService=Z,this._workCell=new M.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(L,R,x){this._selectionStart=L,this._selectionEnd=R,this._columnSelectMode=x}createRow(L,R,x,I,U,$,Z,W,se,ce,ve){const Se=[],ge=this._characterJoinerService.getJoinedCharacters(R),B=this._themeService.colors;let z,V=L.getNoBgTrimmedLength();x&&V<$+1&&(V=$+1);let J=0,X="",be=0,Ne=0,ze=0,ie=!1,N=0,oe=!1,ue=0;const ae=[],ye=ce!==-1&&ve!==-1;for(let Ye=0;Ye<V;Ye++){L.loadCell(Ye,this._workCell);let dt=this._workCell.getWidth();if(dt===0)continue;let ht=!1,et=Ye,je=this._workCell;if(ge.length>0&&Ye===ge[0][0]){ht=!0;const tt=ge.shift();je=new u.JoinedCellData(this._workCell,L.translateToString(!0,tt[0],tt[1]),tt[1]-tt[0]),et=tt[1]-1,dt=je.getWidth()}const ot=this._isCellInSelection(Ye,R),Ft=x&&Ye===$,Ot=ye&&Ye>=ce&&Ye<=ve;let Yt=!1;this._decorationService.forEachDecorationAtCell(Ye,R,void 0,tt=>{Yt=!0});let Bt=je.getChars()||E.WHITESPACE_CELL_CHAR;if(Bt===" "&&(je.isUnderline()||je.isOverline())&&(Bt="\xA0"),ue=dt*W-se.get(Bt,je.isBold(),je.isItalic()),z){if(J&&(ot&&oe||!ot&&!oe&&je.bg===be)&&(ot&&oe&&B.selectionForeground||je.fg===Ne)&&je.extended.ext===ze&&Ot===ie&&ue===N&&!Ft&&!ht&&!Yt){je.isInvisible()?X+=E.WHITESPACE_CELL_CHAR:X+=Bt,J++;continue}J&&(z.textContent=X),z=this._document.createElement("span"),J=0,X=""}else z=this._document.createElement("span");if(be=je.bg,Ne=je.fg,ze=je.extended.ext,ie=Ot,N=ue,oe=ot,ht&&$>=Ye&&$<=et&&($=Ye),!this._coreService.isCursorHidden&&Ft&&this._coreService.isCursorInitialized){if(ae.push("xterm-cursor"),this._coreBrowserService.isFocused)Z&&ae.push("xterm-cursor-blink"),ae.push(I==="bar"?"xterm-cursor-bar":I==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(U)switch(U){case"outline":ae.push("xterm-cursor-outline");break;case"block":ae.push("xterm-cursor-block");break;case"bar":ae.push("xterm-cursor-bar");break;case"underline":ae.push("xterm-cursor-underline")}}if(je.isBold()&&ae.push("xterm-bold"),je.isItalic()&&ae.push("xterm-italic"),je.isDim()&&ae.push("xterm-dim"),X=je.isInvisible()?E.WHITESPACE_CELL_CHAR:je.getChars()||E.WHITESPACE_CELL_CHAR,je.isUnderline()&&(ae.push(`xterm-underline-${je.extended.underlineStyle}`),X===" "&&(X="\xA0"),!je.isUnderlineColorDefault()))if(je.isUnderlineColorRGB())z.style.textDecorationColor=`rgb(${d.AttributeData.toColorRGB(je.getUnderlineColor()).join(",")})`;else{let tt=je.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&je.isBold()&&tt<8&&(tt+=8),z.style.textDecorationColor=B.ansi[tt].css}je.isOverline()&&(ae.push("xterm-overline"),X===" "&&(X="\xA0")),je.isStrikethrough()&&ae.push("xterm-strikethrough"),Ot&&(z.style.textDecoration="underline");let Rt=je.getFgColor(),Xt=je.getFgColorMode(),It=je.getBgColor(),ni=je.getBgColorMode();const Gt=!!je.isInverse();if(Gt){const tt=Rt;Rt=It,It=tt;const ut=Xt;Xt=ni,ni=ut}let bt,oi,kt,Wt=!1;switch(this._decorationService.forEachDecorationAtCell(Ye,R,void 0,tt=>{tt.options.layer!=="top"&&Wt||(tt.backgroundColorRGB&&(ni=50331648,It=tt.backgroundColorRGB.rgba>>8&16777215,bt=tt.backgroundColorRGB),tt.foregroundColorRGB&&(Xt=50331648,Rt=tt.foregroundColorRGB.rgba>>8&16777215,oi=tt.foregroundColorRGB),Wt=tt.options.layer==="top")}),!Wt&&ot&&(bt=this._coreBrowserService.isFocused?B.selectionBackgroundOpaque:B.selectionInactiveBackgroundOpaque,It=bt.rgba>>8&16777215,ni=50331648,Wt=!0,B.selectionForeground&&(Xt=50331648,Rt=B.selectionForeground.rgba>>8&16777215,oi=B.selectionForeground)),Wt&&ae.push("xterm-decoration-top"),ni){case 16777216:case 33554432:kt=B.ansi[It],ae.push(`xterm-bg-${It}`);break;case 50331648:kt=g.channels.toColor(It>>16,It>>8&255,255&It),this._addStyle(z,`background-color:#${A((It>>>0).toString(16),"0",6)}`);break;default:Gt?(kt=B.foreground,ae.push(`xterm-bg-${v.INVERTED_DEFAULT_COLOR}`)):kt=B.background}switch(bt||je.isDim()&&(bt=g.color.multiplyOpacity(kt,.5)),Xt){case 16777216:case 33554432:je.isBold()&&Rt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Rt+=8),this._applyMinimumContrast(z,kt,B.ansi[Rt],je,bt,void 0)||ae.push(`xterm-fg-${Rt}`);break;case 50331648:const tt=g.channels.toColor(Rt>>16&255,Rt>>8&255,255&Rt);this._applyMinimumContrast(z,kt,tt,je,bt,oi)||this._addStyle(z,`color:#${A(Rt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(z,kt,B.foreground,je,bt,oi)||Gt&&ae.push(`xterm-fg-${v.INVERTED_DEFAULT_COLOR}`)}ae.length&&(z.className=ae.join(" "),ae.length=0),Ft||ht||Yt?z.textContent=X:J++,ue!==this.defaultSpacing&&(z.style.letterSpacing=`${ue}px`),Se.push(z),Ye=et}return z&&J&&(z.textContent=X),Se}_applyMinimumContrast(L,R,x,I,U,$){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,h.treatGlyphAsBackgroundColor)(I.getCode()))return!1;const Z=this._getContrastCache(I);let W;if(U||$||(W=Z.getColor(R.rgba,x.rgba)),W===void 0){const se=this._optionsService.rawOptions.minimumContrastRatio/(I.isDim()?2:1);W=g.color.ensureContrastRatio(U||R,$||x,se),Z.setColor((U||R).rgba,($||x).rgba,W??null)}return!!W&&(this._addStyle(L,`color:${W.css}`),!0)}_getContrastCache(L){return L.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(L,R){L.setAttribute("style",`${L.getAttribute("style")||""}${R};`)}_isCellInSelection(L,R){const x=this._selectionStart,I=this._selectionEnd;return!(!x||!I)&&(this._columnSelectMode?x[0]<=I[0]?L>=x[0]&&R>=x[1]&&L<I[0]&&R<=I[1]:L<x[0]&&R>=x[1]&&L>=I[0]&&R<=I[1]:R>x[1]&&R<I[1]||x[1]===I[1]&&R===x[1]&&L>=x[0]&&L<I[0]||x[1]<I[1]&&R===I[1]&&L<I[0]||x[1]<I[1]&&R===x[1]&&L>=x[0])}};function A(L,R,x){for(;L.length<x;)L=R+L;return L}p.DomRendererRowFactory=y=C([D(1,l.ICharacterJoinerService),D(2,w.IOptionsService),D(3,l.ICoreBrowserService),D(4,w.ICoreService),D(5,w.IDecorationService),D(6,l.IThemeService)],y)},2550:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.WidthCache=void 0,p.WidthCache=class{constructor(m,C){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=m.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const D=m.createElement("span");D.classList.add("xterm-char-measure-element");const v=m.createElement("span");v.classList.add("xterm-char-measure-element"),v.style.fontWeight="bold";const E=m.createElement("span");E.classList.add("xterm-char-measure-element"),E.style.fontStyle="italic";const M=m.createElement("span");M.classList.add("xterm-char-measure-element"),M.style.fontWeight="bold",M.style.fontStyle="italic",this._measureElements=[D,v,E,M],this._container.appendChild(D),this._container.appendChild(v),this._container.appendChild(E),this._container.appendChild(M),C.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(m,C,D,v){m===this._font&&C===this._fontSize&&D===this._weight&&v===this._weightBold||(this._font=m,this._fontSize=C,this._weight=D,this._weightBold=v,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${D}`,this._measureElements[1].style.fontWeight=`${v}`,this._measureElements[2].style.fontWeight=`${D}`,this._measureElements[3].style.fontWeight=`${v}`,this.clear())}get(m,C,D){let v=0;if(!C&&!D&&m.length===1&&(v=m.charCodeAt(0))<256){if(this._flat[v]!==-9999)return this._flat[v];const w=this._measure(m,0);return w>0&&(this._flat[v]=w),w}let E=m;C&&(E+="B"),D&&(E+="I");let M=this._holey.get(E);if(M===void 0){let w=0;C&&(w|=1),D&&(w|=2),M=this._measure(m,w),M>0&&this._holey.set(E,M)}return M}_measure(m,C){const D=this._measureElements[C];return D.textContent=m.repeat(32),D.offsetWidth/32}}},2223:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.TEXT_BASELINE=p.DIM_OPACITY=p.INVERTED_DEFAULT_COLOR=void 0;const C=m(6114);p.INVERTED_DEFAULT_COLOR=257,p.DIM_OPACITY=.5,p.TEXT_BASELINE=C.isFirefox||C.isLegacyEdge?"bottom":"ideographic"},6171:(ne,p)=>{function m(D){return 57508<=D&&D<=57558}function C(D){return D>=128512&&D<=128591||D>=127744&&D<=128511||D>=128640&&D<=128767||D>=9728&&D<=9983||D>=9984&&D<=10175||D>=65024&&D<=65039||D>=129280&&D<=129535||D>=127462&&D<=127487}Object.defineProperty(p,"__esModule",{value:!0}),p.computeNextVariantOffset=p.createRenderDimensions=p.treatGlyphAsBackgroundColor=p.allowRescaling=p.isEmoji=p.isRestrictedPowerlineGlyph=p.isPowerlineGlyph=p.throwIfFalsy=void 0,p.throwIfFalsy=function(D){if(!D)throw new Error("value must not be falsy");return D},p.isPowerlineGlyph=m,p.isRestrictedPowerlineGlyph=function(D){return 57520<=D&&D<=57527},p.isEmoji=C,p.allowRescaling=function(D,v,E,M){return v===1&&E>Math.ceil(1.5*M)&&D!==void 0&&D>255&&!C(D)&&!m(D)&&!function(w){return 57344<=w&&w<=63743}(D)},p.treatGlyphAsBackgroundColor=function(D){return m(D)||function(v){return 9472<=v&&v<=9631}(D)},p.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},p.computeNextVariantOffset=function(D,v,E=0){return(D-(2*Math.round(v)-E))%(2*Math.round(v))}},6052:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.createSelectionRenderModel=void 0;class m{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(D,v,E,M=!1){if(this.selectionStart=v,this.selectionEnd=E,!v||!E||v[0]===E[0]&&v[1]===E[1])return void this.clear();const w=D.buffers.active.ydisp,g=v[1]-w,l=E[1]-w,u=Math.max(g,0),h=Math.min(l,D.rows-1);u>=D.rows||h<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=M,this.viewportStartRow=g,this.viewportEndRow=l,this.viewportCappedStartRow=u,this.viewportCappedEndRow=h,this.startCol=v[0],this.endCol=E[0])}isCellSelected(D,v,E){return!!this.hasSelection&&(E-=D.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?v>=this.startCol&&E>=this.viewportCappedStartRow&&v<this.endCol&&E<=this.viewportCappedEndRow:v<this.startCol&&E>=this.viewportCappedStartRow&&v>=this.endCol&&E<=this.viewportCappedEndRow:E>this.viewportStartRow&&E<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&E===this.viewportStartRow&&v>=this.startCol&&v<this.endCol||this.viewportStartRow<this.viewportEndRow&&E===this.viewportEndRow&&v<this.endCol||this.viewportStartRow<this.viewportEndRow&&E===this.viewportStartRow&&v>=this.startCol)}}p.createSelectionRenderModel=function(){return new m}},456:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.SelectionModel=void 0,p.SelectionModel=class{constructor(m){this._bufferService=m,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const m=this.selectionStart[0]+this.selectionStartLength;return m>this._bufferService.cols?m%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(m/this._bufferService.cols)-1]:[m%this._bufferService.cols,this.selectionStart[1]+Math.floor(m/this._bufferService.cols)]:[m,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const m=this.selectionStart[0]+this.selectionStartLength;return m>this._bufferService.cols?[m%this._bufferService.cols,this.selectionStart[1]+Math.floor(m/this._bufferService.cols)]:[Math.max(m,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const m=this.selectionStart,C=this.selectionEnd;return!(!m||!C)&&(m[1]>C[1]||m[1]===C[1]&&m[0]>C[0])}handleTrim(m){return this.selectionStart&&(this.selectionStart[1]-=m),this.selectionEnd&&(this.selectionEnd[1]-=m),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(ne,p,m){var C=this&&this.__decorate||function(h,d,y,A){var L,R=arguments.length,x=R<3?d:A===null?A=Object.getOwnPropertyDescriptor(d,y):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,d,y,A);else for(var I=h.length-1;I>=0;I--)(L=h[I])&&(x=(R<3?L(x):R>3?L(d,y,x):L(d,y))||x);return R>3&&x&&Object.defineProperty(d,y,x),x},D=this&&this.__param||function(h,d){return function(y,A){d(y,A,h)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CharSizeService=void 0;const v=m(2585),E=m(8460),M=m(844);let w=p.CharSizeService=class extends M.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(h,d,y){super(),this._optionsService=y,this.width=0,this.height=0,this._onCharSizeChange=this.register(new E.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new u(this._optionsService))}catch{this._measureStrategy=this.register(new l(h,d,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const h=this._measureStrategy.measure();h.width===this.width&&h.height===this.height||(this.width=h.width,this.height=h.height,this._onCharSizeChange.fire())}};p.CharSizeService=w=C([D(2,v.IOptionsService)],w);class g extends M.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(d,y){d!==void 0&&d>0&&y!==void 0&&y>0&&(this._result.width=d,this._result.height=y)}}class l extends g{constructor(d,y,A){super(),this._document=d,this._parentElement=y,this._optionsService=A,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class u extends g{constructor(d){super(),this._optionsService=d,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const y=this._ctx.measureText("W");if(!("width"in y&&"fontBoundingBoxAscent"in y&&"fontBoundingBoxDescent"in y))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const d=this._ctx.measureText("W");return this._validateAndSet(d.width,d.fontBoundingBoxAscent+d.fontBoundingBoxDescent),this._result}}},4269:function(ne,p,m){var C=this&&this.__decorate||function(u,h,d,y){var A,L=arguments.length,R=L<3?h:y===null?y=Object.getOwnPropertyDescriptor(h,d):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(u,h,d,y);else for(var x=u.length-1;x>=0;x--)(A=u[x])&&(R=(L<3?A(R):L>3?A(h,d,R):A(h,d))||R);return L>3&&R&&Object.defineProperty(h,d,R),R},D=this&&this.__param||function(u,h){return function(d,y){h(d,y,u)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CharacterJoinerService=p.JoinedCellData=void 0;const v=m(3734),E=m(643),M=m(511),w=m(2585);class g extends v.AttributeData{constructor(h,d,y){super(),this.content=0,this.combinedData="",this.fg=h.fg,this.bg=h.bg,this.combinedData=d,this._width=y}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(h){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}p.JoinedCellData=g;let l=p.CharacterJoinerService=class Bo{constructor(h){this._bufferService=h,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new M.CellData}register(h){const d={id:this._nextCharacterJoinerId++,handler:h};return this._characterJoiners.push(d),d.id}deregister(h){for(let d=0;d<this._characterJoiners.length;d++)if(this._characterJoiners[d].id===h)return this._characterJoiners.splice(d,1),!0;return!1}getJoinedCharacters(h){if(this._characterJoiners.length===0)return[];const d=this._bufferService.buffer.lines.get(h);if(!d||d.length===0)return[];const y=[],A=d.translateToString(!0);let L=0,R=0,x=0,I=d.getFg(0),U=d.getBg(0);for(let $=0;$<d.getTrimmedLength();$++)if(d.loadCell($,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==I||this._workCell.bg!==U){if($-L>1){const Z=this._getJoinedRanges(A,x,R,d,L);for(let W=0;W<Z.length;W++)y.push(Z[W])}L=$,x=R,I=this._workCell.fg,U=this._workCell.bg}R+=this._workCell.getChars().length||E.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-L>1){const $=this._getJoinedRanges(A,x,R,d,L);for(let Z=0;Z<$.length;Z++)y.push($[Z])}return y}_getJoinedRanges(h,d,y,A,L){const R=h.substring(d,y);let x=[];try{x=this._characterJoiners[0].handler(R)}catch(I){console.error(I)}for(let I=1;I<this._characterJoiners.length;I++)try{const U=this._characterJoiners[I].handler(R);for(let $=0;$<U.length;$++)Bo._mergeRanges(x,U[$])}catch(U){console.error(U)}return this._stringRangesToCellRanges(x,A,L),x}_stringRangesToCellRanges(h,d,y){let A=0,L=!1,R=0,x=h[A];if(x){for(let I=y;I<this._bufferService.cols;I++){const U=d.getWidth(I),$=d.getString(I).length||E.WHITESPACE_CELL_CHAR.length;if(U!==0){if(!L&&x[0]<=R&&(x[0]=I,L=!0),x[1]<=R){if(x[1]=I,x=h[++A],!x)break;x[0]<=R?(x[0]=I,L=!0):L=!1}R+=$}}x&&(x[1]=this._bufferService.cols)}}static _mergeRanges(h,d){let y=!1;for(let A=0;A<h.length;A++){const L=h[A];if(y){if(d[1]<=L[0])return h[A-1][1]=d[1],h;if(d[1]<=L[1])return h[A-1][1]=Math.max(d[1],L[1]),h.splice(A,1),h;h.splice(A,1),A--}else{if(d[1]<=L[0])return h.splice(A,0,d),h;if(d[1]<=L[1])return L[0]=Math.min(d[0],L[0]),h;d[0]<L[1]&&(L[0]=Math.min(d[0],L[0]),y=!0)}}return y?h[h.length-1][1]=d[1]:h.push(d),h}};p.CharacterJoinerService=l=C([D(0,w.IBufferService)],l)},5114:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CoreBrowserService=void 0;const C=m(844),D=m(8460),v=m(3656);class E extends C.Disposable{constructor(g,l,u){super(),this._textarea=g,this._window=l,this.mainDocument=u,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new M(this._window),this._onDprChange=this.register(new D.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new D.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(h=>this._screenDprMonitor.setWindow(h))),this.register((0,D.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(g){this._window!==g&&(this._window=g,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}p.CoreBrowserService=E;class M extends C.Disposable{constructor(g){super(),this._parentWindow=g,this._windowResizeListener=this.register(new C.MutableDisposable),this._onDprChange=this.register(new D.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,C.toDisposable)(()=>this.clearListener()))}setWindow(g){this._parentWindow=g,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,v.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.LinkProviderService=void 0;const C=m(844);class D extends C.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,C.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(E){return this.linkProviders.push(E),{dispose:()=>{const M=this.linkProviders.indexOf(E);M!==-1&&this.linkProviders.splice(M,1)}}}}p.LinkProviderService=D},8934:function(ne,p,m){var C=this&&this.__decorate||function(w,g,l,u){var h,d=arguments.length,y=d<3?g:u===null?u=Object.getOwnPropertyDescriptor(g,l):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(w,g,l,u);else for(var A=w.length-1;A>=0;A--)(h=w[A])&&(y=(d<3?h(y):d>3?h(g,l,y):h(g,l))||y);return d>3&&y&&Object.defineProperty(g,l,y),y},D=this&&this.__param||function(w,g){return function(l,u){g(l,u,w)}};Object.defineProperty(p,"__esModule",{value:!0}),p.MouseService=void 0;const v=m(4725),E=m(9806);let M=p.MouseService=class{constructor(w,g){this._renderService=w,this._charSizeService=g}getCoords(w,g,l,u,h){return(0,E.getCoords)(window,w,g,l,u,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,h)}getMouseReportCoords(w,g){const l=(0,E.getCoordsRelativeToElement)(window,w,g);if(this._charSizeService.hasValidSize)return l[0]=Math.min(Math.max(l[0],0),this._renderService.dimensions.css.canvas.width-1),l[1]=Math.min(Math.max(l[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(l[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(l[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(l[0]),y:Math.floor(l[1])}}};p.MouseService=M=C([D(0,v.IRenderService),D(1,v.ICharSizeService)],M)},3230:function(ne,p,m){var C=this&&this.__decorate||function(h,d,y,A){var L,R=arguments.length,x=R<3?d:A===null?A=Object.getOwnPropertyDescriptor(d,y):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,d,y,A);else for(var I=h.length-1;I>=0;I--)(L=h[I])&&(x=(R<3?L(x):R>3?L(d,y,x):L(d,y))||x);return R>3&&x&&Object.defineProperty(d,y,x),x},D=this&&this.__param||function(h,d){return function(y,A){d(y,A,h)}};Object.defineProperty(p,"__esModule",{value:!0}),p.RenderService=void 0;const v=m(6193),E=m(4725),M=m(8460),w=m(844),g=m(7226),l=m(2585);let u=p.RenderService=class extends w.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(h,d,y,A,L,R,x,I){super(),this._rowCount=h,this._charSizeService=A,this._renderer=this.register(new w.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._observerDisposable=this.register(new w.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new M.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new M.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new M.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new v.RenderDebouncer((U,$)=>this._renderRows(U,$),x),this.register(this._renderDebouncer),this.register(x.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(R.onResize(()=>this._fullRefresh())),this.register(R.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(y.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(L.onDecorationRegistered(()=>this._fullRefresh())),this.register(L.onDecorationRemoved(()=>this._fullRefresh())),this.register(y.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(R.cols,R.rows),this._fullRefresh()})),this.register(y.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(R.buffer.y,R.buffer.y,!0))),this.register(I.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(x.window,d),this.register(x.onWindowChange(U=>this._registerIntersectionObserver(U,d)))}_registerIntersectionObserver(h,d){if("IntersectionObserver"in h){const y=new h.IntersectionObserver(A=>this._handleIntersectionChange(A[A.length-1]),{threshold:0});y.observe(d),this._observerDisposable.value=(0,w.toDisposable)(()=>y.disconnect())}}_handleIntersectionChange(h){this._isPaused=h.isIntersecting===void 0?h.intersectionRatio===0:!h.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(h,d,y=!1){this._isPaused?this._needsFullRefresh=!0:(y||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(h,d,this._rowCount))}_renderRows(h,d){this._renderer.value&&(h=Math.min(h,this._rowCount-1),d=Math.min(d,this._rowCount-1),this._renderer.value.renderRows(h,d),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:h,end:d}),this._onRender.fire({start:h,end:d}),this._isNextRenderRedrawOnly=!0)}resize(h,d){this._rowCount=d,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(h){this._renderer.value=h,this._renderer.value&&(this._renderer.value.onRequestRedraw(d=>this.refreshRows(d.start,d.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(h){return this._renderDebouncer.addRefreshCallback(h)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(h,d){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(h,d)):this._renderer.value.handleResize(h,d),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(h,d,y){this._selectionState.start=h,this._selectionState.end=d,this._selectionState.columnSelectMode=y,this._renderer.value?.handleSelectionChanged(h,d,y)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};p.RenderService=u=C([D(2,l.IOptionsService),D(3,E.ICharSizeService),D(4,l.IDecorationService),D(5,l.IBufferService),D(6,E.ICoreBrowserService),D(7,E.IThemeService)],u)},9312:function(ne,p,m){var C=this&&this.__decorate||function(x,I,U,$){var Z,W=arguments.length,se=W<3?I:$===null?$=Object.getOwnPropertyDescriptor(I,U):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")se=Reflect.decorate(x,I,U,$);else for(var ce=x.length-1;ce>=0;ce--)(Z=x[ce])&&(se=(W<3?Z(se):W>3?Z(I,U,se):Z(I,U))||se);return W>3&&se&&Object.defineProperty(I,U,se),se},D=this&&this.__param||function(x,I){return function(U,$){I(U,$,x)}};Object.defineProperty(p,"__esModule",{value:!0}),p.SelectionService=void 0;const v=m(9806),E=m(9504),M=m(456),w=m(4725),g=m(8460),l=m(844),u=m(6114),h=m(4841),d=m(511),y=m(2585),A="\xA0",L=new RegExp(A,"g");let R=p.SelectionService=class extends l.Disposable{constructor(x,I,U,$,Z,W,se,ce,ve){super(),this._element=x,this._screenElement=I,this._linkifier=U,this._bufferService=$,this._coreService=Z,this._mouseService=W,this._optionsService=se,this._renderService=ce,this._coreBrowserService=ve,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new d.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Se=>this._handleMouseMove(Se),this._mouseUpListener=Se=>this._handleMouseUp(Se),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Se=>this._handleTrim(Se)),this.register(this._bufferService.buffers.onBufferActivate(Se=>this._handleBufferActivate(Se))),this.enable(),this._model=new M.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const x=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!(!x||!I||x[0]===I[0]&&x[1]===I[1])}get selectionText(){const x=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;if(!x||!I)return"";const U=this._bufferService.buffer,$=[];if(this._activeSelectionMode===3){if(x[0]===I[0])return"";const Z=x[0]<I[0]?x[0]:I[0],W=x[0]<I[0]?I[0]:x[0];for(let se=x[1];se<=I[1];se++){const ce=U.translateBufferLineToString(se,!0,Z,W);$.push(ce)}}else{const Z=x[1]===I[1]?I[0]:void 0;$.push(U.translateBufferLineToString(x[1],!0,x[0],Z));for(let W=x[1]+1;W<=I[1]-1;W++){const se=U.lines.get(W),ce=U.translateBufferLineToString(W,!0);se?.isWrapped?$[$.length-1]+=ce:$.push(ce)}if(x[1]!==I[1]){const W=U.lines.get(I[1]),se=U.translateBufferLineToString(I[1],!0,0,I[0]);W&&W.isWrapped?$[$.length-1]+=se:$.push(se)}}return $.map(Z=>Z.replace(L," ")).join(u.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(x){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),u.isLinux&&x&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(x){const I=this._getMouseBufferCoords(x),U=this._model.finalSelectionStart,$=this._model.finalSelectionEnd;return!!(U&&$&&I)&&this._areCoordsInSelection(I,U,$)}isCellInSelection(x,I){const U=this._model.finalSelectionStart,$=this._model.finalSelectionEnd;return!(!U||!$)&&this._areCoordsInSelection([x,I],U,$)}_areCoordsInSelection(x,I,U){return x[1]>I[1]&&x[1]<U[1]||I[1]===U[1]&&x[1]===I[1]&&x[0]>=I[0]&&x[0]<U[0]||I[1]<U[1]&&x[1]===U[1]&&x[0]<U[0]||I[1]<U[1]&&x[1]===I[1]&&x[0]>=I[0]}_selectWordAtCursor(x,I){const U=this._linkifier.currentLink?.link?.range;if(U)return this._model.selectionStart=[U.start.x-1,U.start.y-1],this._model.selectionStartLength=(0,h.getRangeLength)(U,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const $=this._getMouseBufferCoords(x);return!!$&&(this._selectWordAt($,I),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(x,I){this._model.clearSelection(),x=Math.max(x,0),I=Math.min(I,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,x],this._model.selectionEnd=[this._bufferService.cols,I],this.refresh(),this._onSelectionChange.fire()}_handleTrim(x){this._model.handleTrim(x)&&this.refresh()}_getMouseBufferCoords(x){const I=this._mouseService.getCoords(x,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(I)return I[0]--,I[1]--,I[1]+=this._bufferService.buffer.ydisp,I}_getMouseEventScrollAmount(x){let I=(0,v.getCoordsRelativeToElement)(this._coreBrowserService.window,x,this._screenElement)[1];const U=this._renderService.dimensions.css.canvas.height;return I>=0&&I<=U?0:(I>U&&(I-=U),I=Math.min(Math.max(I,-50),50),I/=50,I/Math.abs(I)+Math.round(14*I))}shouldForceSelection(x){return u.isMac?x.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:x.shiftKey}handleMouseDown(x){if(this._mouseDownTimeStamp=x.timeStamp,(x.button!==2||!this.hasSelection)&&x.button===0){if(!this._enabled){if(!this.shouldForceSelection(x))return;x.stopPropagation()}x.preventDefault(),this._dragScrollAmount=0,this._enabled&&x.shiftKey?this._handleIncrementalClick(x):x.detail===1?this._handleSingleClick(x):x.detail===2?this._handleDoubleClick(x):x.detail===3&&this._handleTripleClick(x),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(x){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(x))}_handleSingleClick(x){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(x)?3:0,this._model.selectionStart=this._getMouseBufferCoords(x),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const I=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);I&&I.length!==this._model.selectionStart[0]&&I.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(x){this._selectWordAtCursor(x,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(x){const I=this._getMouseBufferCoords(x);I&&(this._activeSelectionMode=2,this._selectLineAt(I[1]))}shouldColumnSelect(x){return x.altKey&&!(u.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(x){if(x.stopImmediatePropagation(),!this._model.selectionStart)return;const I=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(x),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(x),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const U=this._bufferService.buffer;if(this._model.selectionEnd[1]<U.lines.length){const $=U.lines.get(this._model.selectionEnd[1]);$&&$.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}I&&I[0]===this._model.selectionEnd[0]&&I[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const x=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(x.ydisp+this._bufferService.rows,x.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=x.ydisp),this.refresh()}}_handleMouseUp(x){const I=x.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&I<500&&x.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const U=this._mouseService.getCoords(x,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(U&&U[0]!==void 0&&U[1]!==void 0){const $=(0,E.moveToCellSequence)(U[0]-1,U[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent($,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const x=this._model.finalSelectionStart,I=this._model.finalSelectionEnd,U=!(!x||!I||x[0]===I[0]&&x[1]===I[1]);U?x&&I&&(this._oldSelectionStart&&this._oldSelectionEnd&&x[0]===this._oldSelectionStart[0]&&x[1]===this._oldSelectionStart[1]&&I[0]===this._oldSelectionEnd[0]&&I[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(x,I,U)):this._oldHasSelection&&this._fireOnSelectionChange(x,I,U)}_fireOnSelectionChange(x,I,U){this._oldSelectionStart=x,this._oldSelectionEnd=I,this._oldHasSelection=U,this._onSelectionChange.fire()}_handleBufferActivate(x){this.clearSelection(),this._trimListener.dispose(),this._trimListener=x.activeBuffer.lines.onTrim(I=>this._handleTrim(I))}_convertViewportColToCharacterIndex(x,I){let U=I;for(let $=0;I>=$;$++){const Z=x.loadCell($,this._workCell).getChars().length;this._workCell.getWidth()===0?U--:Z>1&&I!==$&&(U+=Z-1)}return U}setSelection(x,I,U){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[x,I],this._model.selectionStartLength=U,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(x){this._isClickInSelection(x)||(this._selectWordAtCursor(x,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(x,I,U=!0,$=!0){if(x[0]>=this._bufferService.cols)return;const Z=this._bufferService.buffer,W=Z.lines.get(x[1]);if(!W)return;const se=Z.translateBufferLineToString(x[1],!1);let ce=this._convertViewportColToCharacterIndex(W,x[0]),ve=ce;const Se=x[0]-ce;let ge=0,B=0,z=0,V=0;if(se.charAt(ce)===" "){for(;ce>0&&se.charAt(ce-1)===" ";)ce--;for(;ve<se.length&&se.charAt(ve+1)===" ";)ve++}else{let be=x[0],Ne=x[0];W.getWidth(be)===0&&(ge++,be--),W.getWidth(Ne)===2&&(B++,Ne++);const ze=W.getString(Ne).length;for(ze>1&&(V+=ze-1,ve+=ze-1);be>0&&ce>0&&!this._isCharWordSeparator(W.loadCell(be-1,this._workCell));){W.loadCell(be-1,this._workCell);const ie=this._workCell.getChars().length;this._workCell.getWidth()===0?(ge++,be--):ie>1&&(z+=ie-1,ce-=ie-1),ce--,be--}for(;Ne<W.length&&ve+1<se.length&&!this._isCharWordSeparator(W.loadCell(Ne+1,this._workCell));){W.loadCell(Ne+1,this._workCell);const ie=this._workCell.getChars().length;this._workCell.getWidth()===2?(B++,Ne++):ie>1&&(V+=ie-1,ve+=ie-1),ve++,Ne++}}ve++;let J=ce+Se-ge+z,X=Math.min(this._bufferService.cols,ve-ce+ge+B-z-V);if(I||se.slice(ce,ve).trim()!==""){if(U&&J===0&&W.getCodePoint(0)!==32){const be=Z.lines.get(x[1]-1);if(be&&W.isWrapped&&be.getCodePoint(this._bufferService.cols-1)!==32){const Ne=this._getWordAt([this._bufferService.cols-1,x[1]-1],!1,!0,!1);if(Ne){const ze=this._bufferService.cols-Ne.start;J-=ze,X+=ze}}}if($&&J+X===this._bufferService.cols&&W.getCodePoint(this._bufferService.cols-1)!==32){const be=Z.lines.get(x[1]+1);if(be?.isWrapped&&be.getCodePoint(0)!==32){const Ne=this._getWordAt([0,x[1]+1],!1,!1,!0);Ne&&(X+=Ne.length)}}return{start:J,length:X}}}_selectWordAt(x,I){const U=this._getWordAt(x,I);if(U){for(;U.start<0;)U.start+=this._bufferService.cols,x[1]--;this._model.selectionStart=[U.start,x[1]],this._model.selectionStartLength=U.length}}_selectToWordAt(x){const I=this._getWordAt(x,!0);if(I){let U=x[1];for(;I.start<0;)I.start+=this._bufferService.cols,U--;if(!this._model.areSelectionValuesReversed())for(;I.start+I.length>this._bufferService.cols;)I.length-=this._bufferService.cols,U++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?I.start:I.start+I.length,U]}}_isCharWordSeparator(x){return x.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(x.getChars())>=0}_selectLineAt(x){const I=this._bufferService.buffer.getWrappedRangeForLine(x),U={start:{x:0,y:I.first},end:{x:this._bufferService.cols-1,y:I.last}};this._model.selectionStart=[0,I.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,h.getRangeLength)(U,this._bufferService.cols)}};p.SelectionService=R=C([D(3,y.IBufferService),D(4,y.ICoreService),D(5,w.IMouseService),D(6,y.IOptionsService),D(7,w.IRenderService),D(8,w.ICoreBrowserService)],R)},4725:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ILinkProviderService=p.IThemeService=p.ICharacterJoinerService=p.ISelectionService=p.IRenderService=p.IMouseService=p.ICoreBrowserService=p.ICharSizeService=void 0;const C=m(8343);p.ICharSizeService=(0,C.createDecorator)("CharSizeService"),p.ICoreBrowserService=(0,C.createDecorator)("CoreBrowserService"),p.IMouseService=(0,C.createDecorator)("MouseService"),p.IRenderService=(0,C.createDecorator)("RenderService"),p.ISelectionService=(0,C.createDecorator)("SelectionService"),p.ICharacterJoinerService=(0,C.createDecorator)("CharacterJoinerService"),p.IThemeService=(0,C.createDecorator)("ThemeService"),p.ILinkProviderService=(0,C.createDecorator)("LinkProviderService")},6731:function(ne,p,m){var C=this&&this.__decorate||function(R,x,I,U){var $,Z=arguments.length,W=Z<3?x:U===null?U=Object.getOwnPropertyDescriptor(x,I):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(R,x,I,U);else for(var se=R.length-1;se>=0;se--)($=R[se])&&(W=(Z<3?$(W):Z>3?$(x,I,W):$(x,I))||W);return Z>3&&W&&Object.defineProperty(x,I,W),W},D=this&&this.__param||function(R,x){return function(I,U){x(I,U,R)}};Object.defineProperty(p,"__esModule",{value:!0}),p.ThemeService=p.DEFAULT_ANSI_COLORS=void 0;const v=m(7239),E=m(8055),M=m(8460),w=m(844),g=m(2585),l=E.css.toColor("#ffffff"),u=E.css.toColor("#000000"),h=E.css.toColor("#ffffff"),d=E.css.toColor("#000000"),y={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};p.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const R=[E.css.toColor("#2e3436"),E.css.toColor("#cc0000"),E.css.toColor("#4e9a06"),E.css.toColor("#c4a000"),E.css.toColor("#3465a4"),E.css.toColor("#75507b"),E.css.toColor("#06989a"),E.css.toColor("#d3d7cf"),E.css.toColor("#555753"),E.css.toColor("#ef2929"),E.css.toColor("#8ae234"),E.css.toColor("#fce94f"),E.css.toColor("#729fcf"),E.css.toColor("#ad7fa8"),E.css.toColor("#34e2e2"),E.css.toColor("#eeeeec")],x=[0,95,135,175,215,255];for(let I=0;I<216;I++){const U=x[I/36%6|0],$=x[I/6%6|0],Z=x[I%6];R.push({css:E.channels.toCss(U,$,Z),rgba:E.channels.toRgba(U,$,Z)})}for(let I=0;I<24;I++){const U=8+10*I;R.push({css:E.channels.toCss(U,U,U),rgba:E.channels.toRgba(U,U,U)})}return R})());let A=p.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(R){super(),this._optionsService=R,this._contrastCache=new v.ColorContrastCache,this._halfContrastCache=new v.ColorContrastCache,this._onChangeColors=this.register(new M.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:u,cursor:h,cursorAccent:d,selectionForeground:void 0,selectionBackgroundTransparent:y,selectionBackgroundOpaque:E.color.blend(u,y),selectionInactiveBackgroundTransparent:y,selectionInactiveBackgroundOpaque:E.color.blend(u,y),ansi:p.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(R={}){const x=this._colors;if(x.foreground=L(R.foreground,l),x.background=L(R.background,u),x.cursor=L(R.cursor,h),x.cursorAccent=L(R.cursorAccent,d),x.selectionBackgroundTransparent=L(R.selectionBackground,y),x.selectionBackgroundOpaque=E.color.blend(x.background,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundTransparent=L(R.selectionInactiveBackground,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundOpaque=E.color.blend(x.background,x.selectionInactiveBackgroundTransparent),x.selectionForeground=R.selectionForeground?L(R.selectionForeground,E.NULL_COLOR):void 0,x.selectionForeground===E.NULL_COLOR&&(x.selectionForeground=void 0),E.color.isOpaque(x.selectionBackgroundTransparent)&&(x.selectionBackgroundTransparent=E.color.opacity(x.selectionBackgroundTransparent,.3)),E.color.isOpaque(x.selectionInactiveBackgroundTransparent)&&(x.selectionInactiveBackgroundTransparent=E.color.opacity(x.selectionInactiveBackgroundTransparent,.3)),x.ansi=p.DEFAULT_ANSI_COLORS.slice(),x.ansi[0]=L(R.black,p.DEFAULT_ANSI_COLORS[0]),x.ansi[1]=L(R.red,p.DEFAULT_ANSI_COLORS[1]),x.ansi[2]=L(R.green,p.DEFAULT_ANSI_COLORS[2]),x.ansi[3]=L(R.yellow,p.DEFAULT_ANSI_COLORS[3]),x.ansi[4]=L(R.blue,p.DEFAULT_ANSI_COLORS[4]),x.ansi[5]=L(R.magenta,p.DEFAULT_ANSI_COLORS[5]),x.ansi[6]=L(R.cyan,p.DEFAULT_ANSI_COLORS[6]),x.ansi[7]=L(R.white,p.DEFAULT_ANSI_COLORS[7]),x.ansi[8]=L(R.brightBlack,p.DEFAULT_ANSI_COLORS[8]),x.ansi[9]=L(R.brightRed,p.DEFAULT_ANSI_COLORS[9]),x.ansi[10]=L(R.brightGreen,p.DEFAULT_ANSI_COLORS[10]),x.ansi[11]=L(R.brightYellow,p.DEFAULT_ANSI_COLORS[11]),x.ansi[12]=L(R.brightBlue,p.DEFAULT_ANSI_COLORS[12]),x.ansi[13]=L(R.brightMagenta,p.DEFAULT_ANSI_COLORS[13]),x.ansi[14]=L(R.brightCyan,p.DEFAULT_ANSI_COLORS[14]),x.ansi[15]=L(R.brightWhite,p.DEFAULT_ANSI_COLORS[15]),R.extendedAnsi){const I=Math.min(x.ansi.length-16,R.extendedAnsi.length);for(let U=0;U<I;U++)x.ansi[U+16]=L(R.extendedAnsi[U],p.DEFAULT_ANSI_COLORS[U+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(R){this._restoreColor(R),this._onChangeColors.fire(this.colors)}_restoreColor(R){if(R!==void 0)switch(R){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[R]=this._restoreColors.ansi[R]}else for(let x=0;x<this._restoreColors.ansi.length;++x)this._colors.ansi[x]=this._restoreColors.ansi[x]}modifyColors(R){R(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function L(R,x){if(R!==void 0)try{return E.css.toColor(R)}catch{}return x}p.ThemeService=A=C([D(0,g.IOptionsService)],A)},6349:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CircularList=void 0;const C=m(8460),D=m(844);class v extends D.Disposable{constructor(M){super(),this._maxLength=M,this.onDeleteEmitter=this.register(new C.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new C.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new C.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(M){if(this._maxLength===M)return;const w=new Array(M);for(let g=0;g<Math.min(M,this.length);g++)w[g]=this._array[this._getCyclicIndex(g)];this._array=w,this._maxLength=M,this._startIndex=0}get length(){return this._length}set length(M){if(M>this._length)for(let w=this._length;w<M;w++)this._array[w]=void 0;this._length=M}get(M){return this._array[this._getCyclicIndex(M)]}set(M,w){this._array[this._getCyclicIndex(M)]=w}push(M){this._array[this._getCyclicIndex(this._length)]=M,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(M,w,...g){if(w){for(let l=M;l<this._length-w;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+w)];this._length-=w,this.onDeleteEmitter.fire({index:M,amount:w})}for(let l=this._length-1;l>=M;l--)this._array[this._getCyclicIndex(l+g.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<g.length;l++)this._array[this._getCyclicIndex(M+l)]=g[l];if(g.length&&this.onInsertEmitter.fire({index:M,amount:g.length}),this._length+g.length>this._maxLength){const l=this._length+g.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=g.length}trimStart(M){M>this._length&&(M=this._length),this._startIndex+=M,this._length-=M,this.onTrimEmitter.fire(M)}shiftElements(M,w,g){if(!(w<=0)){if(M<0||M>=this._length)throw new Error("start argument out of range");if(M+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let u=w-1;u>=0;u--)this.set(M+u+g,this.get(M+u));const l=M+w+g-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<w;l++)this.set(M+l+g,this.get(M+l))}}_getCyclicIndex(M){return(this._startIndex+M)%this._maxLength}}p.CircularList=v},1439:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.clone=void 0,p.clone=function m(C,D=5){if(typeof C!="object")return C;const v=Array.isArray(C)?[]:{};for(const E in C)v[E]=D<=1?C[E]:C[E]&&m(C[E],D-1);return v}},8055:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.contrastRatio=p.toPaddedHex=p.rgba=p.rgb=p.css=p.color=p.channels=p.NULL_COLOR=void 0;let m=0,C=0,D=0,v=0;var E,M,w,g,l;function u(d){const y=d.toString(16);return y.length<2?"0"+y:y}function h(d,y){return d<y?(y+.05)/(d+.05):(d+.05)/(y+.05)}p.NULL_COLOR={css:"#00000000",rgba:0},function(d){d.toCss=function(y,A,L,R){return R!==void 0?`#${u(y)}${u(A)}${u(L)}${u(R)}`:`#${u(y)}${u(A)}${u(L)}`},d.toRgba=function(y,A,L,R=255){return(y<<24|A<<16|L<<8|R)>>>0},d.toColor=function(y,A,L,R){return{css:d.toCss(y,A,L,R),rgba:d.toRgba(y,A,L,R)}}}(E||(p.channels=E={})),function(d){function y(A,L){return v=Math.round(255*L),[m,C,D]=l.toChannels(A.rgba),{css:E.toCss(m,C,D,v),rgba:E.toRgba(m,C,D,v)}}d.blend=function(A,L){if(v=(255&L.rgba)/255,v===1)return{css:L.css,rgba:L.rgba};const R=L.rgba>>24&255,x=L.rgba>>16&255,I=L.rgba>>8&255,U=A.rgba>>24&255,$=A.rgba>>16&255,Z=A.rgba>>8&255;return m=U+Math.round((R-U)*v),C=$+Math.round((x-$)*v),D=Z+Math.round((I-Z)*v),{css:E.toCss(m,C,D),rgba:E.toRgba(m,C,D)}},d.isOpaque=function(A){return(255&A.rgba)==255},d.ensureContrastRatio=function(A,L,R){const x=l.ensureContrastRatio(A.rgba,L.rgba,R);if(x)return E.toColor(x>>24&255,x>>16&255,x>>8&255)},d.opaque=function(A){const L=(255|A.rgba)>>>0;return[m,C,D]=l.toChannels(L),{css:E.toCss(m,C,D),rgba:L}},d.opacity=y,d.multiplyOpacity=function(A,L){return v=255&A.rgba,y(A,v*L/255)},d.toColorRGB=function(A){return[A.rgba>>24&255,A.rgba>>16&255,A.rgba>>8&255]}}(M||(p.color=M={})),function(d){let y,A;try{const L=document.createElement("canvas");L.width=1,L.height=1;const R=L.getContext("2d",{willReadFrequently:!0});R&&(y=R,y.globalCompositeOperation="copy",A=y.createLinearGradient(0,0,1,1))}catch{}d.toColor=function(L){if(L.match(/#[\da-f]{3,8}/i))switch(L.length){case 4:return m=parseInt(L.slice(1,2).repeat(2),16),C=parseInt(L.slice(2,3).repeat(2),16),D=parseInt(L.slice(3,4).repeat(2),16),E.toColor(m,C,D);case 5:return m=parseInt(L.slice(1,2).repeat(2),16),C=parseInt(L.slice(2,3).repeat(2),16),D=parseInt(L.slice(3,4).repeat(2),16),v=parseInt(L.slice(4,5).repeat(2),16),E.toColor(m,C,D,v);case 7:return{css:L,rgba:(parseInt(L.slice(1),16)<<8|255)>>>0};case 9:return{css:L,rgba:parseInt(L.slice(1),16)>>>0}}const R=L.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(R)return m=parseInt(R[1]),C=parseInt(R[2]),D=parseInt(R[3]),v=Math.round(255*(R[5]===void 0?1:parseFloat(R[5]))),E.toColor(m,C,D,v);if(!y||!A)throw new Error("css.toColor: Unsupported css format");if(y.fillStyle=A,y.fillStyle=L,typeof y.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(y.fillRect(0,0,1,1),[m,C,D,v]=y.getImageData(0,0,1,1).data,v!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:E.toRgba(m,C,D,v),css:L}}}(w||(p.css=w={})),function(d){function y(A,L,R){const x=A/255,I=L/255,U=R/255;return .2126*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.7152*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))+.0722*(U<=.03928?U/12.92:Math.pow((U+.055)/1.055,2.4))}d.relativeLuminance=function(A){return y(A>>16&255,A>>8&255,255&A)},d.relativeLuminance2=y}(g||(p.rgb=g={})),function(d){function y(L,R,x){const I=L>>24&255,U=L>>16&255,$=L>>8&255;let Z=R>>24&255,W=R>>16&255,se=R>>8&255,ce=h(g.relativeLuminance2(Z,W,se),g.relativeLuminance2(I,U,$));for(;ce<x&&(Z>0||W>0||se>0);)Z-=Math.max(0,Math.ceil(.1*Z)),W-=Math.max(0,Math.ceil(.1*W)),se-=Math.max(0,Math.ceil(.1*se)),ce=h(g.relativeLuminance2(Z,W,se),g.relativeLuminance2(I,U,$));return(Z<<24|W<<16|se<<8|255)>>>0}function A(L,R,x){const I=L>>24&255,U=L>>16&255,$=L>>8&255;let Z=R>>24&255,W=R>>16&255,se=R>>8&255,ce=h(g.relativeLuminance2(Z,W,se),g.relativeLuminance2(I,U,$));for(;ce<x&&(Z<255||W<255||se<255);)Z=Math.min(255,Z+Math.ceil(.1*(255-Z))),W=Math.min(255,W+Math.ceil(.1*(255-W))),se=Math.min(255,se+Math.ceil(.1*(255-se))),ce=h(g.relativeLuminance2(Z,W,se),g.relativeLuminance2(I,U,$));return(Z<<24|W<<16|se<<8|255)>>>0}d.blend=function(L,R){if(v=(255&R)/255,v===1)return R;const x=R>>24&255,I=R>>16&255,U=R>>8&255,$=L>>24&255,Z=L>>16&255,W=L>>8&255;return m=$+Math.round((x-$)*v),C=Z+Math.round((I-Z)*v),D=W+Math.round((U-W)*v),E.toRgba(m,C,D)},d.ensureContrastRatio=function(L,R,x){const I=g.relativeLuminance(L>>8),U=g.relativeLuminance(R>>8);if(h(I,U)<x){if(U<I){const W=y(L,R,x),se=h(I,g.relativeLuminance(W>>8));if(se<x){const ce=A(L,R,x);return se>h(I,g.relativeLuminance(ce>>8))?W:ce}return W}const $=A(L,R,x),Z=h(I,g.relativeLuminance($>>8));if(Z<x){const W=y(L,R,x);return Z>h(I,g.relativeLuminance(W>>8))?$:W}return $}},d.reduceLuminance=y,d.increaseLuminance=A,d.toChannels=function(L){return[L>>24&255,L>>16&255,L>>8&255,255&L]}}(l||(p.rgba=l={})),p.toPaddedHex=u,p.contrastRatio=h},8969:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CoreTerminal=void 0;const C=m(844),D=m(2585),v=m(4348),E=m(7866),M=m(744),w=m(7302),g=m(6975),l=m(8460),u=m(1753),h=m(1480),d=m(7994),y=m(9282),A=m(5435),L=m(5981),R=m(2660);let x=!1;class I extends C.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event($=>{this._onScrollApi?.fire($.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options($){for(const Z in $)this.optionsService.options[Z]=$[Z]}constructor($){super(),this._windowsWrappingHeuristics=this.register(new C.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new v.InstantiationService,this.optionsService=this.register(new w.OptionsService($)),this._instantiationService.setService(D.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(M.BufferService)),this._instantiationService.setService(D.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(E.LogService)),this._instantiationService.setService(D.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(D.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(u.CoreMouseService)),this._instantiationService.setService(D.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(h.UnicodeService)),this._instantiationService.setService(D.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(d.CharsetService),this._instantiationService.setService(D.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(R.OscLinkService),this._instantiationService.setService(D.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new A.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(Z=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(Z=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new L.WriteBuffer((Z,W)=>this._inputHandler.parse(Z,W))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write($,Z){this._writeBuffer.write($,Z)}writeSync($,Z){this._logService.logLevel<=D.LogLevelEnum.WARN&&!x&&(this._logService.warn("writeSync is unreliable and will be removed soon."),x=!0),this._writeBuffer.writeSync($,Z)}input($,Z=!0){this.coreService.triggerDataEvent($,Z)}resize($,Z){isNaN($)||isNaN(Z)||($=Math.max($,M.MINIMUM_COLS),Z=Math.max(Z,M.MINIMUM_ROWS),this._bufferService.resize($,Z))}scroll($,Z=!1){this._bufferService.scroll($,Z)}scrollLines($,Z,W){this._bufferService.scrollLines($,Z,W)}scrollPages($){this.scrollLines($*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine($){const Z=$-this._bufferService.buffer.ydisp;Z!==0&&this.scrollLines(Z)}registerEscHandler($,Z){return this._inputHandler.registerEscHandler($,Z)}registerDcsHandler($,Z){return this._inputHandler.registerDcsHandler($,Z)}registerCsiHandler($,Z){return this._inputHandler.registerCsiHandler($,Z)}registerOscHandler($,Z){return this._inputHandler.registerOscHandler($,Z)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let $=!1;const Z=this.optionsService.rawOptions.windowsPty;Z&&Z.buildNumber!==void 0&&Z.buildNumber!==void 0?$=Z.backend==="conpty"&&Z.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&($=!0),$?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const $=[];$.push(this.onLineFeed(y.updateWindowsModeWrappedState.bind(null,this._bufferService))),$.push(this.registerCsiHandler({final:"H"},()=>((0,y.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,C.toDisposable)(()=>{for(const Z of $)Z.dispose()})}}}p.CoreTerminal=I},8460:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.runAndSubscribe=p.forwardEvent=p.EventEmitter=void 0,p.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=m=>(this._listeners.push(m),{dispose:()=>{if(!this._disposed){for(let C=0;C<this._listeners.length;C++)if(this._listeners[C]===m)return void this._listeners.splice(C,1)}}})),this._event}fire(m,C){const D=[];for(let v=0;v<this._listeners.length;v++)D.push(this._listeners[v]);for(let v=0;v<D.length;v++)D[v].call(void 0,m,C)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},p.forwardEvent=function(m,C){return m(D=>C.fire(D))},p.runAndSubscribe=function(m,C){return C(void 0),m(D=>C(D))}},5435:function(ne,p,m){var C=this&&this.__decorate||function(ge,B,z,V){var J,X=arguments.length,be=X<3?B:V===null?V=Object.getOwnPropertyDescriptor(B,z):V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")be=Reflect.decorate(ge,B,z,V);else for(var Ne=ge.length-1;Ne>=0;Ne--)(J=ge[Ne])&&(be=(X<3?J(be):X>3?J(B,z,be):J(B,z))||be);return X>3&&be&&Object.defineProperty(B,z,be),be},D=this&&this.__param||function(ge,B){return function(z,V){B(z,V,ge)}};Object.defineProperty(p,"__esModule",{value:!0}),p.InputHandler=p.WindowsOptionsReportType=void 0;const v=m(2584),E=m(7116),M=m(2015),w=m(844),g=m(482),l=m(8437),u=m(8460),h=m(643),d=m(511),y=m(3734),A=m(2585),L=m(1480),R=m(6242),x=m(6351),I=m(5941),U={"(":0,")":1,"*":2,"+":3,"-":1,".":2},$=131072;function Z(ge,B){if(ge>24)return B.setWinLines||!1;switch(ge){case 1:return!!B.restoreWin;case 2:return!!B.minimizeWin;case 3:return!!B.setWinPosition;case 4:return!!B.setWinSizePixels;case 5:return!!B.raiseWin;case 6:return!!B.lowerWin;case 7:return!!B.refreshWin;case 8:return!!B.setWinSizeChars;case 9:return!!B.maximizeWin;case 10:return!!B.fullscreenWin;case 11:return!!B.getWinState;case 13:return!!B.getWinPosition;case 14:return!!B.getWinSizePixels;case 15:return!!B.getScreenSizePixels;case 16:return!!B.getCellSizePixels;case 18:return!!B.getWinSizeChars;case 19:return!!B.getScreenSizeChars;case 20:return!!B.getIconTitle;case 21:return!!B.getWinTitle;case 22:return!!B.pushTitle;case 23:return!!B.popTitle;case 24:return!!B.setWinLines}return!1}var W;(function(ge){ge[ge.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",ge[ge.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(W||(p.WindowsOptionsReportType=W={}));let se=0;class ce extends w.Disposable{getAttrData(){return this._curAttrData}constructor(B,z,V,J,X,be,Ne,ze,ie=new M.EscapeSequenceParser){super(),this._bufferService=B,this._charsetService=z,this._coreService=V,this._logService=J,this._optionsService=X,this._oscLinkService=be,this._coreMouseService=Ne,this._unicodeService=ze,this._parser=ie,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new d.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new u.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new u.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new u.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new u.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new u.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new u.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new u.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new u.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new u.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new u.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new u.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ve(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(N=>this._activeBuffer=N.activeBuffer)),this._parser.setCsiHandlerFallback((N,oe)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(N),params:oe.toArray()})}),this._parser.setEscHandlerFallback(N=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(N)})}),this._parser.setExecuteHandlerFallback(N=>{this._logService.debug("Unknown EXECUTE code: ",{code:N})}),this._parser.setOscHandlerFallback((N,oe,ue)=>{this._logService.debug("Unknown OSC code: ",{identifier:N,action:oe,data:ue})}),this._parser.setDcsHandlerFallback((N,oe,ue)=>{oe==="HOOK"&&(ue=ue.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(N),action:oe,payload:ue})}),this._parser.setPrintHandler((N,oe,ue)=>this.print(N,oe,ue)),this._parser.registerCsiHandler({final:"@"},N=>this.insertChars(N)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},N=>this.scrollLeft(N)),this._parser.registerCsiHandler({final:"A"},N=>this.cursorUp(N)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},N=>this.scrollRight(N)),this._parser.registerCsiHandler({final:"B"},N=>this.cursorDown(N)),this._parser.registerCsiHandler({final:"C"},N=>this.cursorForward(N)),this._parser.registerCsiHandler({final:"D"},N=>this.cursorBackward(N)),this._parser.registerCsiHandler({final:"E"},N=>this.cursorNextLine(N)),this._parser.registerCsiHandler({final:"F"},N=>this.cursorPrecedingLine(N)),this._parser.registerCsiHandler({final:"G"},N=>this.cursorCharAbsolute(N)),this._parser.registerCsiHandler({final:"H"},N=>this.cursorPosition(N)),this._parser.registerCsiHandler({final:"I"},N=>this.cursorForwardTab(N)),this._parser.registerCsiHandler({final:"J"},N=>this.eraseInDisplay(N,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},N=>this.eraseInDisplay(N,!0)),this._parser.registerCsiHandler({final:"K"},N=>this.eraseInLine(N,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},N=>this.eraseInLine(N,!0)),this._parser.registerCsiHandler({final:"L"},N=>this.insertLines(N)),this._parser.registerCsiHandler({final:"M"},N=>this.deleteLines(N)),this._parser.registerCsiHandler({final:"P"},N=>this.deleteChars(N)),this._parser.registerCsiHandler({final:"S"},N=>this.scrollUp(N)),this._parser.registerCsiHandler({final:"T"},N=>this.scrollDown(N)),this._parser.registerCsiHandler({final:"X"},N=>this.eraseChars(N)),this._parser.registerCsiHandler({final:"Z"},N=>this.cursorBackwardTab(N)),this._parser.registerCsiHandler({final:"`"},N=>this.charPosAbsolute(N)),this._parser.registerCsiHandler({final:"a"},N=>this.hPositionRelative(N)),this._parser.registerCsiHandler({final:"b"},N=>this.repeatPrecedingCharacter(N)),this._parser.registerCsiHandler({final:"c"},N=>this.sendDeviceAttributesPrimary(N)),this._parser.registerCsiHandler({prefix:">",final:"c"},N=>this.sendDeviceAttributesSecondary(N)),this._parser.registerCsiHandler({final:"d"},N=>this.linePosAbsolute(N)),this._parser.registerCsiHandler({final:"e"},N=>this.vPositionRelative(N)),this._parser.registerCsiHandler({final:"f"},N=>this.hVPosition(N)),this._parser.registerCsiHandler({final:"g"},N=>this.tabClear(N)),this._parser.registerCsiHandler({final:"h"},N=>this.setMode(N)),this._parser.registerCsiHandler({prefix:"?",final:"h"},N=>this.setModePrivate(N)),this._parser.registerCsiHandler({final:"l"},N=>this.resetMode(N)),this._parser.registerCsiHandler({prefix:"?",final:"l"},N=>this.resetModePrivate(N)),this._parser.registerCsiHandler({final:"m"},N=>this.charAttributes(N)),this._parser.registerCsiHandler({final:"n"},N=>this.deviceStatus(N)),this._parser.registerCsiHandler({prefix:"?",final:"n"},N=>this.deviceStatusPrivate(N)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},N=>this.softReset(N)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},N=>this.setCursorStyle(N)),this._parser.registerCsiHandler({final:"r"},N=>this.setScrollRegion(N)),this._parser.registerCsiHandler({final:"s"},N=>this.saveCursor(N)),this._parser.registerCsiHandler({final:"t"},N=>this.windowOptions(N)),this._parser.registerCsiHandler({final:"u"},N=>this.restoreCursor(N)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},N=>this.insertColumns(N)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},N=>this.deleteColumns(N)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},N=>this.selectProtected(N)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},N=>this.requestMode(N,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},N=>this.requestMode(N,!1)),this._parser.setExecuteHandler(v.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(v.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(v.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(v.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(v.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(v.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(v.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(v.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(v.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(v.C1.IND,()=>this.index()),this._parser.setExecuteHandler(v.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(v.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new R.OscHandler(N=>(this.setTitle(N),this.setIconName(N),!0))),this._parser.registerOscHandler(1,new R.OscHandler(N=>this.setIconName(N))),this._parser.registerOscHandler(2,new R.OscHandler(N=>this.setTitle(N))),this._parser.registerOscHandler(4,new R.OscHandler(N=>this.setOrReportIndexedColor(N))),this._parser.registerOscHandler(8,new R.OscHandler(N=>this.setHyperlink(N))),this._parser.registerOscHandler(10,new R.OscHandler(N=>this.setOrReportFgColor(N))),this._parser.registerOscHandler(11,new R.OscHandler(N=>this.setOrReportBgColor(N))),this._parser.registerOscHandler(12,new R.OscHandler(N=>this.setOrReportCursorColor(N))),this._parser.registerOscHandler(104,new R.OscHandler(N=>this.restoreIndexedColor(N))),this._parser.registerOscHandler(110,new R.OscHandler(N=>this.restoreFgColor(N))),this._parser.registerOscHandler(111,new R.OscHandler(N=>this.restoreBgColor(N))),this._parser.registerOscHandler(112,new R.OscHandler(N=>this.restoreCursorColor(N))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const N in E.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:N},()=>this.selectCharset("("+N)),this._parser.registerEscHandler({intermediates:")",final:N},()=>this.selectCharset(")"+N)),this._parser.registerEscHandler({intermediates:"*",final:N},()=>this.selectCharset("*"+N)),this._parser.registerEscHandler({intermediates:"+",final:N},()=>this.selectCharset("+"+N)),this._parser.registerEscHandler({intermediates:"-",final:N},()=>this.selectCharset("-"+N)),this._parser.registerEscHandler({intermediates:".",final:N},()=>this.selectCharset("."+N)),this._parser.registerEscHandler({intermediates:"/",final:N},()=>this.selectCharset("/"+N));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(N=>(this._logService.error("Parsing error: ",N),N)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new x.DcsHandler((N,oe)=>this.requestStatusString(N,oe)))}_preserveStack(B,z,V,J){this._parseStack.paused=!0,this._parseStack.cursorStartX=B,this._parseStack.cursorStartY=z,this._parseStack.decodedLength=V,this._parseStack.position=J}_logSlowResolvingAsync(B){this._logService.logLevel<=A.LogLevelEnum.WARN&&Promise.race([B,new Promise((z,V)=>setTimeout(()=>V("#SLOW_TIMEOUT"),5e3))]).catch(z=>{if(z!=="#SLOW_TIMEOUT")throw z;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(B,z){let V,J=this._activeBuffer.x,X=this._activeBuffer.y,be=0;const Ne=this._parseStack.paused;if(Ne){if(V=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,z))return this._logSlowResolvingAsync(V),V;J=this._parseStack.cursorStartX,X=this._parseStack.cursorStartY,this._parseStack.paused=!1,B.length>$&&(be=this._parseStack.position+$)}if(this._logService.logLevel<=A.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof B=="string"?` "${B}"`:` "${Array.prototype.map.call(B,N=>String.fromCharCode(N)).join("")}"`),typeof B=="string"?B.split("").map(N=>N.charCodeAt(0)):B),this._parseBuffer.length<B.length&&this._parseBuffer.length<$&&(this._parseBuffer=new Uint32Array(Math.min(B.length,$))),Ne||this._dirtyRowTracker.clearRange(),B.length>$)for(let N=be;N<B.length;N+=$){const oe=N+$<B.length?N+$:B.length,ue=typeof B=="string"?this._stringDecoder.decode(B.substring(N,oe),this._parseBuffer):this._utf8Decoder.decode(B.subarray(N,oe),this._parseBuffer);if(V=this._parser.parse(this._parseBuffer,ue))return this._preserveStack(J,X,ue,N),this._logSlowResolvingAsync(V),V}else if(!Ne){const N=typeof B=="string"?this._stringDecoder.decode(B,this._parseBuffer):this._utf8Decoder.decode(B,this._parseBuffer);if(V=this._parser.parse(this._parseBuffer,N))return this._preserveStack(J,X,N,0),this._logSlowResolvingAsync(V),V}this._activeBuffer.x===J&&this._activeBuffer.y===X||this._onCursorMove.fire();const ze=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),ie=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);ie<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(ie,this._bufferService.rows-1),Math.min(ze,this._bufferService.rows-1))}print(B,z,V){let J,X;const be=this._charsetService.charset,Ne=this._optionsService.rawOptions.screenReaderMode,ze=this._bufferService.cols,ie=this._coreService.decPrivateModes.wraparound,N=this._coreService.modes.insertMode,oe=this._curAttrData;let ue=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&V-z>0&&ue.getWidth(this._activeBuffer.x-1)===2&&ue.setCellFromCodepoint(this._activeBuffer.x-1,0,1,oe);let ae=this._parser.precedingJoinState;for(let ye=z;ye<V;++ye){if(J=B[ye],J<127&&be){const et=be[String.fromCharCode(J)];et&&(J=et.charCodeAt(0))}const Ye=this._unicodeService.charProperties(J,ae);X=L.UnicodeService.extractWidth(Ye);const dt=L.UnicodeService.extractShouldJoin(Ye),ht=dt?L.UnicodeService.extractWidth(ae):0;if(ae=Ye,Ne&&this._onA11yChar.fire((0,g.stringFromCodePoint)(J)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+X-ht>ze){if(ie){const et=ue;let je=this._activeBuffer.x-ht;for(this._activeBuffer.x=ht,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),ue=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ht>0&&ue instanceof l.BufferLine&&ue.copyCellsFrom(et,je,0,ht,!1);je<ze;)et.setCellFromCodepoint(je++,0,1,oe)}else if(this._activeBuffer.x=ze-1,X===2)continue}if(dt&&this._activeBuffer.x){const et=ue.getWidth(this._activeBuffer.x-1)?1:2;ue.addCodepointToCell(this._activeBuffer.x-et,J,X);for(let je=X-ht;--je>=0;)ue.setCellFromCodepoint(this._activeBuffer.x++,0,0,oe)}else if(N&&(ue.insertCells(this._activeBuffer.x,X-ht,this._activeBuffer.getNullCell(oe)),ue.getWidth(ze-1)===2&&ue.setCellFromCodepoint(ze-1,h.NULL_CELL_CODE,h.NULL_CELL_WIDTH,oe)),ue.setCellFromCodepoint(this._activeBuffer.x++,J,X,oe),X>0)for(;--X;)ue.setCellFromCodepoint(this._activeBuffer.x++,0,0,oe)}this._parser.precedingJoinState=ae,this._activeBuffer.x<ze&&V-z>0&&ue.getWidth(this._activeBuffer.x)===0&&!ue.hasContent(this._activeBuffer.x)&&ue.setCellFromCodepoint(this._activeBuffer.x,0,1,oe),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(B,z){return B.final!=="t"||B.prefix||B.intermediates?this._parser.registerCsiHandler(B,z):this._parser.registerCsiHandler(B,V=>!Z(V.params[0],this._optionsService.rawOptions.windowOptions)||z(V))}registerDcsHandler(B,z){return this._parser.registerDcsHandler(B,new x.DcsHandler(z))}registerEscHandler(B,z){return this._parser.registerEscHandler(B,z)}registerOscHandler(B,z){return this._parser.registerOscHandler(B,new R.OscHandler(z))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);B.hasWidth(this._activeBuffer.x)&&!B.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const B=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-B),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(B=this._bufferService.cols-1){this._activeBuffer.x=Math.min(B,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(B,z){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=B,this._activeBuffer.y=this._activeBuffer.scrollTop+z):(this._activeBuffer.x=B,this._activeBuffer.y=z),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(B,z){this._restrictCursor(),this._setCursor(this._activeBuffer.x+B,this._activeBuffer.y+z)}cursorUp(B){const z=this._activeBuffer.y-this._activeBuffer.scrollTop;return z>=0?this._moveCursor(0,-Math.min(z,B.params[0]||1)):this._moveCursor(0,-(B.params[0]||1)),!0}cursorDown(B){const z=this._activeBuffer.scrollBottom-this._activeBuffer.y;return z>=0?this._moveCursor(0,Math.min(z,B.params[0]||1)):this._moveCursor(0,B.params[0]||1),!0}cursorForward(B){return this._moveCursor(B.params[0]||1,0),!0}cursorBackward(B){return this._moveCursor(-(B.params[0]||1),0),!0}cursorNextLine(B){return this.cursorDown(B),this._activeBuffer.x=0,!0}cursorPrecedingLine(B){return this.cursorUp(B),this._activeBuffer.x=0,!0}cursorCharAbsolute(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(B){return this._setCursor(B.length>=2?(B.params[1]||1)-1:0,(B.params[0]||1)-1),!0}charPosAbsolute(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(B){return this._moveCursor(B.params[0]||1,0),!0}linePosAbsolute(B){return this._setCursor(this._activeBuffer.x,(B.params[0]||1)-1),!0}vPositionRelative(B){return this._moveCursor(0,B.params[0]||1),!0}hVPosition(B){return this.cursorPosition(B),!0}tabClear(B){const z=B.params[0];return z===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:z===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let z=B.params[0]||1;for(;z--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let z=B.params[0]||1;for(;z--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(B){const z=B.params[0];return z===1&&(this._curAttrData.bg|=536870912),z!==2&&z!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(B,z,V,J=!1,X=!1){const be=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);be.replaceCells(z,V,this._activeBuffer.getNullCell(this._eraseAttrData()),X),J&&(be.isWrapped=!1)}_resetBufferLine(B,z=!1){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);V&&(V.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),z),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+B),V.isWrapped=!1)}eraseInDisplay(B,z=!1){let V;switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:for(V=this._activeBuffer.y,this._dirtyRowTracker.markDirty(V),this._eraseInBufferLine(V++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,z);V<this._bufferService.rows;V++)this._resetBufferLine(V,z);this._dirtyRowTracker.markDirty(V);break;case 1:for(V=this._activeBuffer.y,this._dirtyRowTracker.markDirty(V),this._eraseInBufferLine(V,0,this._activeBuffer.x+1,!0,z),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(V+1).isWrapped=!1);V--;)this._resetBufferLine(V,z);this._dirtyRowTracker.markDirty(0);break;case 2:for(V=this._bufferService.rows,this._dirtyRowTracker.markDirty(V-1);V--;)this._resetBufferLine(V,z);this._dirtyRowTracker.markDirty(0);break;case 3:const J=this._activeBuffer.lines.length-this._bufferService.rows;J>0&&(this._activeBuffer.lines.trimStart(J),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-J,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-J,0),this._onScroll.fire(0))}return!0}eraseInLine(B,z=!1){switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,z);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,z);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,z)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(B){this._restrictCursor();let z=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const V=this._activeBuffer.ybase+this._activeBuffer.y,J=this._bufferService.rows-1-this._activeBuffer.scrollBottom,X=this._bufferService.rows-1+this._activeBuffer.ybase-J+1;for(;z--;)this._activeBuffer.lines.splice(X-1,1),this._activeBuffer.lines.splice(V,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(B){this._restrictCursor();let z=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const V=this._activeBuffer.ybase+this._activeBuffer.y;let J;for(J=this._bufferService.rows-1-this._activeBuffer.scrollBottom,J=this._bufferService.rows-1+this._activeBuffer.ybase-J;z--;)this._activeBuffer.lines.splice(V,1),this._activeBuffer.lines.splice(J,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(B){this._restrictCursor();const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return z&&(z.insertCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(B){this._restrictCursor();const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return z&&(z.deleteCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(B){let z=B.params[0]||1;for(;z--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(B){let z=B.params[0]||1;for(;z--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=B.params[0]||1;for(let V=this._activeBuffer.scrollTop;V<=this._activeBuffer.scrollBottom;++V){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+V);J.deleteCells(0,z,this._activeBuffer.getNullCell(this._eraseAttrData())),J.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=B.params[0]||1;for(let V=this._activeBuffer.scrollTop;V<=this._activeBuffer.scrollBottom;++V){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+V);J.insertCells(0,z,this._activeBuffer.getNullCell(this._eraseAttrData())),J.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=B.params[0]||1;for(let V=this._activeBuffer.scrollTop;V<=this._activeBuffer.scrollBottom;++V){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+V);J.insertCells(this._activeBuffer.x,z,this._activeBuffer.getNullCell(this._eraseAttrData())),J.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=B.params[0]||1;for(let V=this._activeBuffer.scrollTop;V<=this._activeBuffer.scrollBottom;++V){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+V);J.deleteCells(this._activeBuffer.x,z,this._activeBuffer.getNullCell(this._eraseAttrData())),J.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(B){this._restrictCursor();const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return z&&(z.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(B.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(B){const z=this._parser.precedingJoinState;if(!z)return!0;const V=B.params[0]||1,J=L.UnicodeService.extractWidth(z),X=this._activeBuffer.x-J,be=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(X),Ne=new Uint32Array(be.length*V);let ze=0;for(let N=0;N<be.length;){const oe=be.codePointAt(N)||0;Ne[ze++]=oe,N+=oe>65535?2:1}let ie=ze;for(let N=1;N<V;++N)Ne.copyWithin(ie,0,ze),ie+=ze;return this.print(Ne,0,ie),!0}sendDeviceAttributesPrimary(B){return B.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(v.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(v.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(B){return B.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(v.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(v.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(B.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(v.C0.ESC+"[>83;40003;0c")),!0}_is(B){return(this._optionsService.rawOptions.termName+"").indexOf(B)===0}setMode(B){for(let z=0;z<B.length;z++)switch(B.params[z]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(B){for(let z=0;z<B.length;z++)switch(B.params[z]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,E.DEFAULT_CHARSET),this._charsetService.setgCharset(1,E.DEFAULT_CHARSET),this._charsetService.setgCharset(2,E.DEFAULT_CHARSET),this._charsetService.setgCharset(3,E.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(B){for(let z=0;z<B.length;z++)switch(B.params[z]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(B){for(let z=0;z<B.length;z++)switch(B.params[z]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),B.params[z]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(B,z){const V=this._coreService.decPrivateModes,{activeProtocol:J,activeEncoding:X}=this._coreMouseService,be=this._coreService,{buffers:Ne,cols:ze}=this._bufferService,{active:ie,alt:N}=Ne,oe=this._optionsService.rawOptions,ue=dt=>dt?1:2,ae=B.params[0];return ye=ae,Ye=z?ae===2?4:ae===4?ue(be.modes.insertMode):ae===12?3:ae===20?ue(oe.convertEol):0:ae===1?ue(V.applicationCursorKeys):ae===3?oe.windowOptions.setWinLines?ze===80?2:ze===132?1:0:0:ae===6?ue(V.origin):ae===7?ue(V.wraparound):ae===8?3:ae===9?ue(J==="X10"):ae===12?ue(oe.cursorBlink):ae===25?ue(!be.isCursorHidden):ae===45?ue(V.reverseWraparound):ae===66?ue(V.applicationKeypad):ae===67?4:ae===1e3?ue(J==="VT200"):ae===1002?ue(J==="DRAG"):ae===1003?ue(J==="ANY"):ae===1004?ue(V.sendFocus):ae===1005?4:ae===1006?ue(X==="SGR"):ae===1015?4:ae===1016?ue(X==="SGR_PIXELS"):ae===1048?1:ae===47||ae===1047||ae===1049?ue(ie===N):ae===2004?ue(V.bracketedPasteMode):0,be.triggerDataEvent(`${v.C0.ESC}[${z?"":"?"}${ye};${Ye}$y`),!0;var ye,Ye}_updateAttrColor(B,z,V,J,X){return z===2?(B|=50331648,B&=-16777216,B|=y.AttributeData.fromColorRGB([V,J,X])):z===5&&(B&=-50331904,B|=33554432|255&V),B}_extractColor(B,z,V){const J=[0,0,-1,0,0,0];let X=0,be=0;do{if(J[be+X]=B.params[z+be],B.hasSubParams(z+be)){const Ne=B.getSubParams(z+be);let ze=0;do J[1]===5&&(X=1),J[be+ze+1+X]=Ne[ze];while(++ze<Ne.length&&ze+be+1+X<J.length);break}if(J[1]===5&&be+X>=2||J[1]===2&&be+X>=5)break;J[1]&&(X=1)}while(++be+z<B.length&&be+X<J.length);for(let Ne=2;Ne<J.length;++Ne)J[Ne]===-1&&(J[Ne]=0);switch(J[0]){case 38:V.fg=this._updateAttrColor(V.fg,J[1],J[3],J[4],J[5]);break;case 48:V.bg=this._updateAttrColor(V.bg,J[1],J[3],J[4],J[5]);break;case 58:V.extended=V.extended.clone(),V.extended.underlineColor=this._updateAttrColor(V.extended.underlineColor,J[1],J[3],J[4],J[5])}return be}_processUnderline(B,z){z.extended=z.extended.clone(),(!~B||B>5)&&(B=1),z.extended.underlineStyle=B,z.fg|=268435456,B===0&&(z.fg&=-268435457),z.updateExtended()}_processSGR0(B){B.fg=l.DEFAULT_ATTR_DATA.fg,B.bg=l.DEFAULT_ATTR_DATA.bg,B.extended=B.extended.clone(),B.extended.underlineStyle=0,B.extended.underlineColor&=-67108864,B.updateExtended()}charAttributes(B){if(B.length===1&&B.params[0]===0)return this._processSGR0(this._curAttrData),!0;const z=B.length;let V;const J=this._curAttrData;for(let X=0;X<z;X++)V=B.params[X],V>=30&&V<=37?(J.fg&=-50331904,J.fg|=16777216|V-30):V>=40&&V<=47?(J.bg&=-50331904,J.bg|=16777216|V-40):V>=90&&V<=97?(J.fg&=-50331904,J.fg|=16777224|V-90):V>=100&&V<=107?(J.bg&=-50331904,J.bg|=16777224|V-100):V===0?this._processSGR0(J):V===1?J.fg|=134217728:V===3?J.bg|=67108864:V===4?(J.fg|=268435456,this._processUnderline(B.hasSubParams(X)?B.getSubParams(X)[0]:1,J)):V===5?J.fg|=536870912:V===7?J.fg|=67108864:V===8?J.fg|=1073741824:V===9?J.fg|=2147483648:V===2?J.bg|=134217728:V===21?this._processUnderline(2,J):V===22?(J.fg&=-134217729,J.bg&=-134217729):V===23?J.bg&=-67108865:V===24?(J.fg&=-268435457,this._processUnderline(0,J)):V===25?J.fg&=-536870913:V===27?J.fg&=-67108865:V===28?J.fg&=-1073741825:V===29?J.fg&=2147483647:V===39?(J.fg&=-67108864,J.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):V===49?(J.bg&=-67108864,J.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):V===38||V===48||V===58?X+=this._extractColor(B,X,J):V===53?J.bg|=1073741824:V===55?J.bg&=-1073741825:V===59?(J.extended=J.extended.clone(),J.extended.underlineColor=-1,J.updateExtended()):V===100?(J.fg&=-67108864,J.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,J.bg&=-67108864,J.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",V);return!0}deviceStatus(B){switch(B.params[0]){case 5:this._coreService.triggerDataEvent(`${v.C0.ESC}[0n`);break;case 6:const z=this._activeBuffer.y+1,V=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${v.C0.ESC}[${z};${V}R`)}return!0}deviceStatusPrivate(B){if(B.params[0]===6){const z=this._activeBuffer.y+1,V=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${v.C0.ESC}[?${z};${V}R`)}return!0}softReset(B){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(B){const z=B.params[0]||1;switch(z){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const V=z%2==1;return this._optionsService.options.cursorBlink=V,!0}setScrollRegion(B){const z=B.params[0]||1;let V;return(B.length<2||(V=B.params[1])>this._bufferService.rows||V===0)&&(V=this._bufferService.rows),V>z&&(this._activeBuffer.scrollTop=z-1,this._activeBuffer.scrollBottom=V-1,this._setCursor(0,0)),!0}windowOptions(B){if(!Z(B.params[0],this._optionsService.rawOptions.windowOptions))return!0;const z=B.length>1?B.params[1]:0;switch(B.params[0]){case 14:z!==2&&this._onRequestWindowsOptionsReport.fire(W.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(W.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${v.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:z!==0&&z!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),z!==0&&z!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:z!==0&&z!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),z!==0&&z!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(B){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(B){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(B){return this._windowTitle=B,this._onTitleChange.fire(B),!0}setIconName(B){return this._iconName=B,!0}setOrReportIndexedColor(B){const z=[],V=B.split(";");for(;V.length>1;){const J=V.shift(),X=V.shift();if(/^\d+$/.exec(J)){const be=parseInt(J);if(Se(be))if(X==="?")z.push({type:0,index:be});else{const Ne=(0,I.parseColor)(X);Ne&&z.push({type:1,index:be,color:Ne})}}}return z.length&&this._onColor.fire(z),!0}setHyperlink(B){const z=B.split(";");return!(z.length<2)&&(z[1]?this._createHyperlink(z[0],z[1]):!z[0]&&this._finishHyperlink())}_createHyperlink(B,z){this._getCurrentLinkId()&&this._finishHyperlink();const V=B.split(":");let J;const X=V.findIndex(be=>be.startsWith("id="));return X!==-1&&(J=V[X].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:J,uri:z}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(B,z){const V=B.split(";");for(let J=0;J<V.length&&!(z>=this._specialColors.length);++J,++z)if(V[J]==="?")this._onColor.fire([{type:0,index:this._specialColors[z]}]);else{const X=(0,I.parseColor)(V[J]);X&&this._onColor.fire([{type:1,index:this._specialColors[z],color:X}])}return!0}setOrReportFgColor(B){return this._setOrReportSpecialColor(B,0)}setOrReportBgColor(B){return this._setOrReportSpecialColor(B,1)}setOrReportCursorColor(B){return this._setOrReportSpecialColor(B,2)}restoreIndexedColor(B){if(!B)return this._onColor.fire([{type:2}]),!0;const z=[],V=B.split(";");for(let J=0;J<V.length;++J)if(/^\d+$/.exec(V[J])){const X=parseInt(V[J]);Se(X)&&z.push({type:2,index:X})}return z.length&&this._onColor.fire(z),!0}restoreFgColor(B){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(B){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(B){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,E.DEFAULT_CHARSET),!0}selectCharset(B){return B.length!==2?(this.selectDefaultCharset(),!0):(B[0]==="/"||this._charsetService.setgCharset(U[B[0]],E.CHARSETS[B[1]]||E.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const B=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,B,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(B){return this._charsetService.setgLevel(B),!0}screenAlignmentPattern(){const B=new d.CellData;B.content=4194373,B.fg=this._curAttrData.fg,B.bg=this._curAttrData.bg,this._setCursor(0,0);for(let z=0;z<this._bufferService.rows;++z){const V=this._activeBuffer.ybase+this._activeBuffer.y+z,J=this._activeBuffer.lines.get(V);J&&(J.fill(B),J.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(B,z){const V=this._bufferService.buffer,J=this._optionsService.rawOptions;return(X=>(this._coreService.triggerDataEvent(`${v.C0.ESC}${X}${v.C0.ESC}\\`),!0))(B==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:B==='"p'?'P1$r61;1"p':B==="r"?`P1$r${V.scrollTop+1};${V.scrollBottom+1}r`:B==="m"?"P1$r0m":B===" q"?`P1$r${{block:2,underline:4,bar:6}[J.cursorStyle]-(J.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(B,z){this._dirtyRowTracker.markRangeDirty(B,z)}}p.InputHandler=ce;let ve=class{constructor(ge){this._bufferService=ge,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(ge){ge<this.start?this.start=ge:ge>this.end&&(this.end=ge)}markRangeDirty(ge,B){ge>B&&(se=ge,ge=B,B=se),ge<this.start&&(this.start=ge),B>this.end&&(this.end=B)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Se(ge){return 0<=ge&&ge<256}ve=C([D(0,A.IBufferService)],ve)},844:(ne,p)=>{function m(C){for(const D of C)D.dispose();C.length=0}Object.defineProperty(p,"__esModule",{value:!0}),p.getDisposeArrayDisposable=p.disposeArray=p.toDisposable=p.MutableDisposable=p.Disposable=void 0,p.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const C of this._disposables)C.dispose();this._disposables.length=0}register(C){return this._disposables.push(C),C}unregister(C){const D=this._disposables.indexOf(C);D!==-1&&this._disposables.splice(D,1)}},p.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(C){this._isDisposed||C===this._value||(this._value?.dispose(),this._value=C)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},p.toDisposable=function(C){return{dispose:C}},p.disposeArray=m,p.getDisposeArrayDisposable=function(C){return{dispose:()=>m(C)}}},1505:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.FourKeyMap=p.TwoKeyMap=void 0;class m{constructor(){this._data={}}set(D,v,E){this._data[D]||(this._data[D]={}),this._data[D][v]=E}get(D,v){return this._data[D]?this._data[D][v]:void 0}clear(){this._data={}}}p.TwoKeyMap=m,p.FourKeyMap=class{constructor(){this._data=new m}set(C,D,v,E,M){this._data.get(C,D)||this._data.set(C,D,new m),this._data.get(C,D).set(v,E,M)}get(C,D,v,E){return this._data.get(C,D)?.get(v,E)}clear(){this._data.clear()}}},6114:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.isChromeOS=p.isLinux=p.isWindows=p.isIphone=p.isIpad=p.isMac=p.getSafariVersion=p.isSafari=p.isLegacyEdge=p.isFirefox=p.isNode=void 0,p.isNode=typeof process<"u"&&"title"in process;const m=p.isNode?"node":navigator.userAgent,C=p.isNode?"node":navigator.platform;p.isFirefox=m.includes("Firefox"),p.isLegacyEdge=m.includes("Edge"),p.isSafari=/^((?!chrome|android).)*safari/i.test(m),p.getSafariVersion=function(){if(!p.isSafari)return 0;const D=m.match(/Version\/(\d+)/);return D===null||D.length<2?0:parseInt(D[1])},p.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(C),p.isIpad=C==="iPad",p.isIphone=C==="iPhone",p.isWindows=["Windows","Win16","Win32","WinCE"].includes(C),p.isLinux=C.indexOf("Linux")>=0,p.isChromeOS=/\bCrOS\b/.test(m)},6106:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.SortedList=void 0;let m=0;p.SortedList=class{constructor(C){this._getKey=C,this._array=[]}clear(){this._array.length=0}insert(C){this._array.length!==0?(m=this._search(this._getKey(C)),this._array.splice(m,0,C)):this._array.push(C)}delete(C){if(this._array.length===0)return!1;const D=this._getKey(C);if(D===void 0||(m=this._search(D),m===-1)||this._getKey(this._array[m])!==D)return!1;do if(this._array[m]===C)return this._array.splice(m,1),!0;while(++m<this._array.length&&this._getKey(this._array[m])===D);return!1}*getKeyIterator(C){if(this._array.length!==0&&(m=this._search(C),!(m<0||m>=this._array.length)&&this._getKey(this._array[m])===C))do yield this._array[m];while(++m<this._array.length&&this._getKey(this._array[m])===C)}forEachByKey(C,D){if(this._array.length!==0&&(m=this._search(C),!(m<0||m>=this._array.length)&&this._getKey(this._array[m])===C))do D(this._array[m]);while(++m<this._array.length&&this._getKey(this._array[m])===C)}values(){return[...this._array].values()}_search(C){let D=0,v=this._array.length-1;for(;v>=D;){let E=D+v>>1;const M=this._getKey(this._array[E]);if(M>C)v=E-1;else{if(!(M<C)){for(;E>0&&this._getKey(this._array[E-1])===C;)E--;return E}D=E+1}}return D}}},7226:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DebouncedIdleTask=p.IdleTaskQueue=p.PriorityTaskQueue=void 0;const C=m(6114);class D{constructor(){this._tasks=[],this._i=0}enqueue(M){this._tasks.push(M),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(M){this._idleCallback=void 0;let w=0,g=0,l=M.timeRemaining(),u=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),g=Math.max(w,g),u=M.timeRemaining(),1.5*g>u)return l-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-w))}ms`),void this._start();l=u}this.clear()}}class v extends D{_requestCallback(M){return setTimeout(()=>M(this._createDeadline(16)))}_cancelCallback(M){clearTimeout(M)}_createDeadline(M){const w=Date.now()+M;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}p.PriorityTaskQueue=v,p.IdleTaskQueue=!C.isNode&&"requestIdleCallback"in window?class extends D{_requestCallback(E){return requestIdleCallback(E)}_cancelCallback(E){cancelIdleCallback(E)}}:v,p.DebouncedIdleTask=class{constructor(){this._queue=new p.IdleTaskQueue}set(E){this._queue.clear(),this._queue.enqueue(E)}flush(){this._queue.flush()}}},9282:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.updateWindowsModeWrappedState=void 0;const C=m(643);p.updateWindowsModeWrappedState=function(D){const v=D.buffer.lines.get(D.buffer.ybase+D.buffer.y-1),E=v?.get(D.cols-1),M=D.buffer.lines.get(D.buffer.ybase+D.buffer.y);M&&E&&(M.isWrapped=E[C.CHAR_DATA_CODE_INDEX]!==C.NULL_CELL_CODE&&E[C.CHAR_DATA_CODE_INDEX]!==C.WHITESPACE_CELL_CODE)}},3734:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ExtendedAttrs=p.AttributeData=void 0;class m{constructor(){this.fg=0,this.bg=0,this.extended=new C}static toColorRGB(v){return[v>>>16&255,v>>>8&255,255&v]}static fromColorRGB(v){return(255&v[0])<<16|(255&v[1])<<8|255&v[2]}clone(){const v=new m;return v.fg=this.fg,v.bg=this.bg,v.extended=this.extended.clone(),v}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}p.AttributeData=m;class C{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(v){this._ext=v}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(v){this._ext&=-469762049,this._ext|=v<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(v){this._ext&=-67108864,this._ext|=67108863&v}get urlId(){return this._urlId}set urlId(v){this._urlId=v}get underlineVariantOffset(){const v=(3758096384&this._ext)>>29;return v<0?4294967288^v:v}set underlineVariantOffset(v){this._ext&=536870911,this._ext|=v<<29&3758096384}constructor(v=0,E=0){this._ext=0,this._urlId=0,this._ext=v,this._urlId=E}clone(){return new C(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}p.ExtendedAttrs=C},9092:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Buffer=p.MAX_BUFFER_SIZE=void 0;const C=m(6349),D=m(7226),v=m(3734),E=m(8437),M=m(4634),w=m(511),g=m(643),l=m(4863),u=m(7116);p.MAX_BUFFER_SIZE=4294967295,p.Buffer=class{constructor(h,d,y){this._hasScrollback=h,this._optionsService=d,this._bufferService=y,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=E.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new D.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new C.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(h){return h?(this._nullCell.fg=h.fg,this._nullCell.bg=h.bg,this._nullCell.extended=h.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new v.ExtendedAttrs),this._nullCell}getWhitespaceCell(h){return h?(this._whitespaceCell.fg=h.fg,this._whitespaceCell.bg=h.bg,this._whitespaceCell.extended=h.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new v.ExtendedAttrs),this._whitespaceCell}getBlankLine(h,d){return new E.BufferLine(this._bufferService.cols,this.getNullCell(h),d)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const h=this.ybase+this.y-this.ydisp;return h>=0&&h<this._rows}_getCorrectBufferLength(h){if(!this._hasScrollback)return h;const d=h+this._optionsService.rawOptions.scrollback;return d>p.MAX_BUFFER_SIZE?p.MAX_BUFFER_SIZE:d}fillViewportRows(h){if(this.lines.length===0){h===void 0&&(h=E.DEFAULT_ATTR_DATA);let d=this._rows;for(;d--;)this.lines.push(this.getBlankLine(h))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new C.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(h,d){const y=this.getNullCell(E.DEFAULT_ATTR_DATA);let A=0;const L=this._getCorrectBufferLength(d);if(L>this.lines.maxLength&&(this.lines.maxLength=L),this.lines.length>0){if(this._cols<h)for(let x=0;x<this.lines.length;x++)A+=+this.lines.get(x).resize(h,y);let R=0;if(this._rows<d)for(let x=this._rows;x<d;x++)this.lines.length<d+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new E.BufferLine(h,y)):this.ybase>0&&this.lines.length<=this.ybase+this.y+R+1?(this.ybase--,R++,this.ydisp>0&&this.ydisp--):this.lines.push(new E.BufferLine(h,y)));else for(let x=this._rows;x>d;x--)this.lines.length>d+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(L<this.lines.maxLength){const x=this.lines.length-L;x>0&&(this.lines.trimStart(x),this.ybase=Math.max(this.ybase-x,0),this.ydisp=Math.max(this.ydisp-x,0),this.savedY=Math.max(this.savedY-x,0)),this.lines.maxLength=L}this.x=Math.min(this.x,h-1),this.y=Math.min(this.y,d-1),R&&(this.y+=R),this.savedX=Math.min(this.savedX,h-1),this.scrollTop=0}if(this.scrollBottom=d-1,this._isReflowEnabled&&(this._reflow(h,d),this._cols>h))for(let R=0;R<this.lines.length;R++)A+=+this.lines.get(R).resize(h,y);this._cols=h,this._rows=d,this._memoryCleanupQueue.clear(),A>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let h=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,h=!1);let d=0;for(;this._memoryCleanupPosition<this.lines.length;)if(d+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),d>100)return!0;return h}get _isReflowEnabled(){const h=this._optionsService.rawOptions.windowsPty;return h&&h.buildNumber?this._hasScrollback&&h.backend==="conpty"&&h.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(h,d){this._cols!==h&&(h>this._cols?this._reflowLarger(h,d):this._reflowSmaller(h,d))}_reflowLarger(h,d){const y=(0,M.reflowLargerGetLinesToRemove)(this.lines,this._cols,h,this.ybase+this.y,this.getNullCell(E.DEFAULT_ATTR_DATA));if(y.length>0){const A=(0,M.reflowLargerCreateNewLayout)(this.lines,y);(0,M.reflowLargerApplyNewLayout)(this.lines,A.layout),this._reflowLargerAdjustViewport(h,d,A.countRemoved)}}_reflowLargerAdjustViewport(h,d,y){const A=this.getNullCell(E.DEFAULT_ATTR_DATA);let L=y;for(;L-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<d&&this.lines.push(new E.BufferLine(h,A))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-y,0)}_reflowSmaller(h,d){const y=this.getNullCell(E.DEFAULT_ATTR_DATA),A=[];let L=0;for(let R=this.lines.length-1;R>=0;R--){let x=this.lines.get(R);if(!x||!x.isWrapped&&x.getTrimmedLength()<=h)continue;const I=[x];for(;x.isWrapped&&R>0;)x=this.lines.get(--R),I.unshift(x);const U=this.ybase+this.y;if(U>=R&&U<R+I.length)continue;const $=I[I.length-1].getTrimmedLength(),Z=(0,M.reflowSmallerGetNewLineLengths)(I,this._cols,h),W=Z.length-I.length;let se;se=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+W):Math.max(0,this.lines.length-this.lines.maxLength+W);const ce=[];for(let V=0;V<W;V++){const J=this.getBlankLine(E.DEFAULT_ATTR_DATA,!0);ce.push(J)}ce.length>0&&(A.push({start:R+I.length+L,newLines:ce}),L+=ce.length),I.push(...ce);let ve=Z.length-1,Se=Z[ve];Se===0&&(ve--,Se=Z[ve]);let ge=I.length-W-1,B=$;for(;ge>=0;){const V=Math.min(B,Se);if(I[ve]===void 0)break;if(I[ve].copyCellsFrom(I[ge],B-V,Se-V,V,!0),Se-=V,Se===0&&(ve--,Se=Z[ve]),B-=V,B===0){ge--;const J=Math.max(ge,0);B=(0,M.getWrappedLineTrimmedLength)(I,J,this._cols)}}for(let V=0;V<I.length;V++)Z[V]<h&&I[V].setCell(Z[V],y);let z=W-se;for(;z-- >0;)this.ybase===0?this.y<d-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+L)-d&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+W,this.ybase+d-1)}if(A.length>0){const R=[],x=[];for(let ve=0;ve<this.lines.length;ve++)x.push(this.lines.get(ve));const I=this.lines.length;let U=I-1,$=0,Z=A[$];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+L);let W=0;for(let ve=Math.min(this.lines.maxLength-1,I+L-1);ve>=0;ve--)if(Z&&Z.start>U+W){for(let Se=Z.newLines.length-1;Se>=0;Se--)this.lines.set(ve--,Z.newLines[Se]);ve++,R.push({index:U+1,amount:Z.newLines.length}),W+=Z.newLines.length,Z=A[++$]}else this.lines.set(ve,x[U--]);let se=0;for(let ve=R.length-1;ve>=0;ve--)R[ve].index+=se,this.lines.onInsertEmitter.fire(R[ve]),se+=R[ve].amount;const ce=Math.max(0,I+L-this.lines.maxLength);ce>0&&this.lines.onTrimEmitter.fire(ce)}}translateBufferLineToString(h,d,y=0,A){const L=this.lines.get(h);return L?L.translateToString(d,y,A):""}getWrappedRangeForLine(h){let d=h,y=h;for(;d>0&&this.lines.get(d).isWrapped;)d--;for(;y+1<this.lines.length&&this.lines.get(y+1).isWrapped;)y++;return{first:d,last:y}}setupTabStops(h){for(h!=null?this.tabs[h]||(h=this.prevStop(h)):(this.tabs={},h=0);h<this._cols;h+=this._optionsService.rawOptions.tabStopWidth)this.tabs[h]=!0}prevStop(h){for(h==null&&(h=this.x);!this.tabs[--h]&&h>0;);return h>=this._cols?this._cols-1:h<0?0:h}nextStop(h){for(h==null&&(h=this.x);!this.tabs[++h]&&h<this._cols;);return h>=this._cols?this._cols-1:h<0?0:h}clearMarkers(h){this._isClearing=!0;for(let d=0;d<this.markers.length;d++)this.markers[d].line===h&&(this.markers[d].dispose(),this.markers.splice(d--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].dispose(),this.markers.splice(h--,1);this._isClearing=!1}addMarker(h){const d=new l.Marker(h);return this.markers.push(d),d.register(this.lines.onTrim(y=>{d.line-=y,d.line<0&&d.dispose()})),d.register(this.lines.onInsert(y=>{d.line>=y.index&&(d.line+=y.amount)})),d.register(this.lines.onDelete(y=>{d.line>=y.index&&d.line<y.index+y.amount&&d.dispose(),d.line>y.index&&(d.line-=y.amount)})),d.register(d.onDispose(()=>this._removeMarker(d))),d}_removeMarker(h){this._isClearing||this.markers.splice(this.markers.indexOf(h),1)}}},8437:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferLine=p.DEFAULT_ATTR_DATA=void 0;const C=m(3734),D=m(511),v=m(643),E=m(482);p.DEFAULT_ATTR_DATA=Object.freeze(new C.AttributeData);let M=0;class w{constructor(l,u,h=!1){this.isWrapped=h,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*l);const d=u||D.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]);for(let y=0;y<l;++y)this.setCell(y,d);this.length=l}get(l){const u=this._data[3*l+0],h=2097151&u;return[this._data[3*l+1],2097152&u?this._combined[l]:h?(0,E.stringFromCodePoint)(h):"",u>>22,2097152&u?this._combined[l].charCodeAt(this._combined[l].length-1):h]}set(l,u){this._data[3*l+1]=u[v.CHAR_DATA_ATTR_INDEX],u[v.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[l]=u[1],this._data[3*l+0]=2097152|l|u[v.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*l+0]=u[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[v.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(l){return this._data[3*l+0]>>22}hasWidth(l){return 12582912&this._data[3*l+0]}getFg(l){return this._data[3*l+1]}getBg(l){return this._data[3*l+2]}hasContent(l){return 4194303&this._data[3*l+0]}getCodePoint(l){const u=this._data[3*l+0];return 2097152&u?this._combined[l].charCodeAt(this._combined[l].length-1):2097151&u}isCombined(l){return 2097152&this._data[3*l+0]}getString(l){const u=this._data[3*l+0];return 2097152&u?this._combined[l]:2097151&u?(0,E.stringFromCodePoint)(2097151&u):""}isProtected(l){return 536870912&this._data[3*l+2]}loadCell(l,u){return M=3*l,u.content=this._data[M+0],u.fg=this._data[M+1],u.bg=this._data[M+2],2097152&u.content&&(u.combinedData=this._combined[l]),268435456&u.bg&&(u.extended=this._extendedAttrs[l]),u}setCell(l,u){2097152&u.content&&(this._combined[l]=u.combinedData),268435456&u.bg&&(this._extendedAttrs[l]=u.extended),this._data[3*l+0]=u.content,this._data[3*l+1]=u.fg,this._data[3*l+2]=u.bg}setCellFromCodepoint(l,u,h,d){268435456&d.bg&&(this._extendedAttrs[l]=d.extended),this._data[3*l+0]=u|h<<22,this._data[3*l+1]=d.fg,this._data[3*l+2]=d.bg}addCodepointToCell(l,u,h){let d=this._data[3*l+0];2097152&d?this._combined[l]+=(0,E.stringFromCodePoint)(u):2097151&d?(this._combined[l]=(0,E.stringFromCodePoint)(2097151&d)+(0,E.stringFromCodePoint)(u),d&=-2097152,d|=2097152):d=u|4194304,h&&(d&=-12582913,d|=h<<22),this._data[3*l+0]=d}insertCells(l,u,h){if((l%=this.length)&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l-1,0,1,h),u<this.length-l){const d=new D.CellData;for(let y=this.length-l-u-1;y>=0;--y)this.setCell(l+u+y,this.loadCell(l+y,d));for(let y=0;y<u;++y)this.setCell(l+y,h)}else for(let d=l;d<this.length;++d)this.setCell(d,h);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,h)}deleteCells(l,u,h){if(l%=this.length,u<this.length-l){const d=new D.CellData;for(let y=0;y<this.length-l-u;++y)this.setCell(l+y,this.loadCell(l+u+y,d));for(let y=this.length-u;y<this.length;++y)this.setCell(y,h)}else for(let d=l;d<this.length;++d)this.setCell(d,h);l&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l-1,0,1,h),this.getWidth(l)!==0||this.hasContent(l)||this.setCellFromCodepoint(l,0,1,h)}replaceCells(l,u,h,d=!1){if(d)for(l&&this.getWidth(l-1)===2&&!this.isProtected(l-1)&&this.setCellFromCodepoint(l-1,0,1,h),u<this.length&&this.getWidth(u-1)===2&&!this.isProtected(u)&&this.setCellFromCodepoint(u,0,1,h);l<u&&l<this.length;)this.isProtected(l)||this.setCell(l,h),l++;else for(l&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l-1,0,1,h),u<this.length&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u,0,1,h);l<u&&l<this.length;)this.setCell(l++,h)}resize(l,u){if(l===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const h=3*l;if(l>this.length){if(this._data.buffer.byteLength>=4*h)this._data=new Uint32Array(this._data.buffer,0,h);else{const d=new Uint32Array(h);d.set(this._data),this._data=d}for(let d=this.length;d<l;++d)this.setCell(d,u)}else{this._data=this._data.subarray(0,h);const d=Object.keys(this._combined);for(let A=0;A<d.length;A++){const L=parseInt(d[A],10);L>=l&&delete this._combined[L]}const y=Object.keys(this._extendedAttrs);for(let A=0;A<y.length;A++){const L=parseInt(y[A],10);L>=l&&delete this._extendedAttrs[L]}}return this.length=l,4*h*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const l=new Uint32Array(this._data.length);return l.set(this._data),this._data=l,1}return 0}fill(l,u=!1){if(u)for(let h=0;h<this.length;++h)this.isProtected(h)||this.setCell(h,l);else{this._combined={},this._extendedAttrs={};for(let h=0;h<this.length;++h)this.setCell(h,l)}}copyFrom(l){this.length!==l.length?this._data=new Uint32Array(l._data):this._data.set(l._data),this.length=l.length,this._combined={};for(const u in l._combined)this._combined[u]=l._combined[u];this._extendedAttrs={};for(const u in l._extendedAttrs)this._extendedAttrs[u]=l._extendedAttrs[u];this.isWrapped=l.isWrapped}clone(){const l=new w(0);l._data=new Uint32Array(this._data),l.length=this.length;for(const u in this._combined)l._combined[u]=this._combined[u];for(const u in this._extendedAttrs)l._extendedAttrs[u]=this._extendedAttrs[u];return l.isWrapped=this.isWrapped,l}getTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0])return l+(this._data[3*l+0]>>22);return 0}getNoBgTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0]||50331648&this._data[3*l+2])return l+(this._data[3*l+0]>>22);return 0}copyCellsFrom(l,u,h,d,y){const A=l._data;if(y)for(let R=d-1;R>=0;R--){for(let x=0;x<3;x++)this._data[3*(h+R)+x]=A[3*(u+R)+x];268435456&A[3*(u+R)+2]&&(this._extendedAttrs[h+R]=l._extendedAttrs[u+R])}else for(let R=0;R<d;R++){for(let x=0;x<3;x++)this._data[3*(h+R)+x]=A[3*(u+R)+x];268435456&A[3*(u+R)+2]&&(this._extendedAttrs[h+R]=l._extendedAttrs[u+R])}const L=Object.keys(l._combined);for(let R=0;R<L.length;R++){const x=parseInt(L[R],10);x>=u&&(this._combined[x-u+h]=l._combined[x])}}translateToString(l,u,h,d){u=u??0,h=h??this.length,l&&(h=Math.min(h,this.getTrimmedLength())),d&&(d.length=0);let y="";for(;u<h;){const A=this._data[3*u+0],L=2097151&A,R=2097152&A?this._combined[u]:L?(0,E.stringFromCodePoint)(L):v.WHITESPACE_CELL_CHAR;if(y+=R,d)for(let x=0;x<R.length;++x)d.push(u);u+=A>>22||1}return d&&d.push(u),y}}p.BufferLine=w},4841:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.getRangeLength=void 0,p.getRangeLength=function(m,C){if(m.start.y>m.end.y)throw new Error(`Buffer range end (${m.end.x}, ${m.end.y}) cannot be before start (${m.start.x}, ${m.start.y})`);return C*(m.end.y-m.start.y)+(m.end.x-m.start.x+1)}},4634:(ne,p)=>{function m(C,D,v){if(D===C.length-1)return C[D].getTrimmedLength();const E=!C[D].hasContent(v-1)&&C[D].getWidth(v-1)===1,M=C[D+1].getWidth(0)===2;return E&&M?v-1:v}Object.defineProperty(p,"__esModule",{value:!0}),p.getWrappedLineTrimmedLength=p.reflowSmallerGetNewLineLengths=p.reflowLargerApplyNewLayout=p.reflowLargerCreateNewLayout=p.reflowLargerGetLinesToRemove=void 0,p.reflowLargerGetLinesToRemove=function(C,D,v,E,M){const w=[];for(let g=0;g<C.length-1;g++){let l=g,u=C.get(++l);if(!u.isWrapped)continue;const h=[C.get(g)];for(;l<C.length&&u.isWrapped;)h.push(u),u=C.get(++l);if(E>=g&&E<l){g+=h.length-1;continue}let d=0,y=m(h,d,D),A=1,L=0;for(;A<h.length;){const x=m(h,A,D),I=x-L,U=v-y,$=Math.min(I,U);h[d].copyCellsFrom(h[A],L,y,$,!1),y+=$,y===v&&(d++,y=0),L+=$,L===x&&(A++,L=0),y===0&&d!==0&&h[d-1].getWidth(v-1)===2&&(h[d].copyCellsFrom(h[d-1],v-1,y++,1,!1),h[d-1].setCell(v-1,M))}h[d].replaceCells(y,v,M);let R=0;for(let x=h.length-1;x>0&&(x>d||h[x].getTrimmedLength()===0);x--)R++;R>0&&(w.push(g+h.length-R),w.push(R)),g+=h.length-1}return w},p.reflowLargerCreateNewLayout=function(C,D){const v=[];let E=0,M=D[E],w=0;for(let g=0;g<C.length;g++)if(M===g){const l=D[++E];C.onDeleteEmitter.fire({index:g-w,amount:l}),g+=l-1,w+=l,M=D[++E]}else v.push(g);return{layout:v,countRemoved:w}},p.reflowLargerApplyNewLayout=function(C,D){const v=[];for(let E=0;E<D.length;E++)v.push(C.get(D[E]));for(let E=0;E<v.length;E++)C.set(E,v[E]);C.length=D.length},p.reflowSmallerGetNewLineLengths=function(C,D,v){const E=[],M=C.map((u,h)=>m(C,h,D)).reduce((u,h)=>u+h);let w=0,g=0,l=0;for(;l<M;){if(M-l<v){E.push(M-l);break}w+=v;const u=m(C,g,D);w>u&&(w-=u,g++);const h=C[g].getWidth(w-1)===2;h&&w--;const d=h?v-1:v;E.push(d),l+=d}return E},p.getWrappedLineTrimmedLength=m},5295:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferSet=void 0;const C=m(8460),D=m(844),v=m(9092);class E extends D.Disposable{constructor(w,g){super(),this._optionsService=w,this._bufferService=g,this._onBufferActivate=this.register(new C.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new v.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new v.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,g){this._normal.resize(w,g),this._alt.resize(w,g),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}p.BufferSet=E},511:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CellData=void 0;const C=m(482),D=m(643),v=m(3734);class E extends v.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new v.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const g=new E;return g.setFromCharData(w),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,C.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[D.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(w[D.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(w[D.CHAR_DATA_CHAR_INDEX].length===2){const l=w[D.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=l&&l<=56319){const u=w[D.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=u&&u<=57343?this.content=1024*(l-55296)+u-56320+65536|w[D.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=w[D.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[D.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=w[D.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[D.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}p.CellData=E},643:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.WHITESPACE_CELL_CODE=p.WHITESPACE_CELL_WIDTH=p.WHITESPACE_CELL_CHAR=p.NULL_CELL_CODE=p.NULL_CELL_WIDTH=p.NULL_CELL_CHAR=p.CHAR_DATA_CODE_INDEX=p.CHAR_DATA_WIDTH_INDEX=p.CHAR_DATA_CHAR_INDEX=p.CHAR_DATA_ATTR_INDEX=p.DEFAULT_EXT=p.DEFAULT_ATTR=p.DEFAULT_COLOR=void 0,p.DEFAULT_COLOR=0,p.DEFAULT_ATTR=256|p.DEFAULT_COLOR<<9,p.DEFAULT_EXT=0,p.CHAR_DATA_ATTR_INDEX=0,p.CHAR_DATA_CHAR_INDEX=1,p.CHAR_DATA_WIDTH_INDEX=2,p.CHAR_DATA_CODE_INDEX=3,p.NULL_CELL_CHAR="",p.NULL_CELL_WIDTH=1,p.NULL_CELL_CODE=0,p.WHITESPACE_CELL_CHAR=" ",p.WHITESPACE_CELL_WIDTH=1,p.WHITESPACE_CELL_CODE=32},4863:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Marker=void 0;const C=m(8460),D=m(844);class v{get id(){return this._id}constructor(M){this.line=M,this.isDisposed=!1,this._disposables=[],this._id=v._nextId++,this._onDispose=this.register(new C.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,D.disposeArray)(this._disposables),this._disposables.length=0)}register(M){return this._disposables.push(M),M}}p.Marker=v,v._nextId=1},7116:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DEFAULT_CHARSET=p.CHARSETS=void 0,p.CHARSETS={},p.DEFAULT_CHARSET=p.CHARSETS.B,p.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},p.CHARSETS.A={"#":"\xA3"},p.CHARSETS.B=void 0,p.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},p.CHARSETS.C=p.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},p.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},p.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},p.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},p.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},p.CHARSETS.E=p.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},p.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},p.CHARSETS.H=p.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},p.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(ne,p)=>{var m,C,D;Object.defineProperty(p,"__esModule",{value:!0}),p.C1_ESCAPED=p.C1=p.C0=void 0,function(v){v.NUL="\0",v.SOH="",v.STX="",v.ETX="",v.EOT="",v.ENQ="",v.ACK="",v.BEL="\x07",v.BS="\b",v.HT="	",v.LF=`
`,v.VT="\v",v.FF="\f",v.CR="\r",v.SO="",v.SI="",v.DLE="",v.DC1="",v.DC2="",v.DC3="",v.DC4="",v.NAK="",v.SYN="",v.ETB="",v.CAN="",v.EM="",v.SUB="",v.ESC="\x1B",v.FS="",v.GS="",v.RS="",v.US="",v.SP=" ",v.DEL="\x7F"}(m||(p.C0=m={})),function(v){v.PAD="\x80",v.HOP="\x81",v.BPH="\x82",v.NBH="\x83",v.IND="\x84",v.NEL="\x85",v.SSA="\x86",v.ESA="\x87",v.HTS="\x88",v.HTJ="\x89",v.VTS="\x8A",v.PLD="\x8B",v.PLU="\x8C",v.RI="\x8D",v.SS2="\x8E",v.SS3="\x8F",v.DCS="\x90",v.PU1="\x91",v.PU2="\x92",v.STS="\x93",v.CCH="\x94",v.MW="\x95",v.SPA="\x96",v.EPA="\x97",v.SOS="\x98",v.SGCI="\x99",v.SCI="\x9A",v.CSI="\x9B",v.ST="\x9C",v.OSC="\x9D",v.PM="\x9E",v.APC="\x9F"}(C||(p.C1=C={})),function(v){v.ST=`${m.ESC}\\`}(D||(p.C1_ESCAPED=D={}))},7399:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.evaluateKeyboardEvent=void 0;const C=m(2584),D={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};p.evaluateKeyboardEvent=function(v,E,M,w){const g={type:0,cancel:!1,key:void 0},l=(v.shiftKey?1:0)|(v.altKey?2:0)|(v.ctrlKey?4:0)|(v.metaKey?8:0);switch(v.keyCode){case 0:v.key==="UIKeyInputUpArrow"?g.key=E?C.C0.ESC+"OA":C.C0.ESC+"[A":v.key==="UIKeyInputLeftArrow"?g.key=E?C.C0.ESC+"OD":C.C0.ESC+"[D":v.key==="UIKeyInputRightArrow"?g.key=E?C.C0.ESC+"OC":C.C0.ESC+"[C":v.key==="UIKeyInputDownArrow"&&(g.key=E?C.C0.ESC+"OB":C.C0.ESC+"[B");break;case 8:g.key=v.ctrlKey?"\b":C.C0.DEL,v.altKey&&(g.key=C.C0.ESC+g.key);break;case 9:if(v.shiftKey){g.key=C.C0.ESC+"[Z";break}g.key=C.C0.HT,g.cancel=!0;break;case 13:g.key=v.altKey?C.C0.ESC+C.C0.CR:C.C0.CR,g.cancel=!0;break;case 27:g.key=C.C0.ESC,v.altKey&&(g.key=C.C0.ESC+C.C0.ESC),g.cancel=!0;break;case 37:if(v.metaKey)break;l?(g.key=C.C0.ESC+"[1;"+(l+1)+"D",g.key===C.C0.ESC+"[1;3D"&&(g.key=C.C0.ESC+(M?"b":"[1;5D"))):g.key=E?C.C0.ESC+"OD":C.C0.ESC+"[D";break;case 39:if(v.metaKey)break;l?(g.key=C.C0.ESC+"[1;"+(l+1)+"C",g.key===C.C0.ESC+"[1;3C"&&(g.key=C.C0.ESC+(M?"f":"[1;5C"))):g.key=E?C.C0.ESC+"OC":C.C0.ESC+"[C";break;case 38:if(v.metaKey)break;l?(g.key=C.C0.ESC+"[1;"+(l+1)+"A",M||g.key!==C.C0.ESC+"[1;3A"||(g.key=C.C0.ESC+"[1;5A")):g.key=E?C.C0.ESC+"OA":C.C0.ESC+"[A";break;case 40:if(v.metaKey)break;l?(g.key=C.C0.ESC+"[1;"+(l+1)+"B",M||g.key!==C.C0.ESC+"[1;3B"||(g.key=C.C0.ESC+"[1;5B")):g.key=E?C.C0.ESC+"OB":C.C0.ESC+"[B";break;case 45:v.shiftKey||v.ctrlKey||(g.key=C.C0.ESC+"[2~");break;case 46:g.key=l?C.C0.ESC+"[3;"+(l+1)+"~":C.C0.ESC+"[3~";break;case 36:g.key=l?C.C0.ESC+"[1;"+(l+1)+"H":E?C.C0.ESC+"OH":C.C0.ESC+"[H";break;case 35:g.key=l?C.C0.ESC+"[1;"+(l+1)+"F":E?C.C0.ESC+"OF":C.C0.ESC+"[F";break;case 33:v.shiftKey?g.type=2:v.ctrlKey?g.key=C.C0.ESC+"[5;"+(l+1)+"~":g.key=C.C0.ESC+"[5~";break;case 34:v.shiftKey?g.type=3:v.ctrlKey?g.key=C.C0.ESC+"[6;"+(l+1)+"~":g.key=C.C0.ESC+"[6~";break;case 112:g.key=l?C.C0.ESC+"[1;"+(l+1)+"P":C.C0.ESC+"OP";break;case 113:g.key=l?C.C0.ESC+"[1;"+(l+1)+"Q":C.C0.ESC+"OQ";break;case 114:g.key=l?C.C0.ESC+"[1;"+(l+1)+"R":C.C0.ESC+"OR";break;case 115:g.key=l?C.C0.ESC+"[1;"+(l+1)+"S":C.C0.ESC+"OS";break;case 116:g.key=l?C.C0.ESC+"[15;"+(l+1)+"~":C.C0.ESC+"[15~";break;case 117:g.key=l?C.C0.ESC+"[17;"+(l+1)+"~":C.C0.ESC+"[17~";break;case 118:g.key=l?C.C0.ESC+"[18;"+(l+1)+"~":C.C0.ESC+"[18~";break;case 119:g.key=l?C.C0.ESC+"[19;"+(l+1)+"~":C.C0.ESC+"[19~";break;case 120:g.key=l?C.C0.ESC+"[20;"+(l+1)+"~":C.C0.ESC+"[20~";break;case 121:g.key=l?C.C0.ESC+"[21;"+(l+1)+"~":C.C0.ESC+"[21~";break;case 122:g.key=l?C.C0.ESC+"[23;"+(l+1)+"~":C.C0.ESC+"[23~";break;case 123:g.key=l?C.C0.ESC+"[24;"+(l+1)+"~":C.C0.ESC+"[24~";break;default:if(!v.ctrlKey||v.shiftKey||v.altKey||v.metaKey)if(M&&!w||!v.altKey||v.metaKey)!M||v.altKey||v.ctrlKey||v.shiftKey||!v.metaKey?v.key&&!v.ctrlKey&&!v.altKey&&!v.metaKey&&v.keyCode>=48&&v.key.length===1?g.key=v.key:v.key&&v.ctrlKey&&(v.key==="_"&&(g.key=C.C0.US),v.key==="@"&&(g.key=C.C0.NUL)):v.keyCode===65&&(g.type=1);else{const u=D[v.keyCode],h=u?.[v.shiftKey?1:0];if(h)g.key=C.C0.ESC+h;else if(v.keyCode>=65&&v.keyCode<=90){const d=v.ctrlKey?v.keyCode-64:v.keyCode+32;let y=String.fromCharCode(d);v.shiftKey&&(y=y.toUpperCase()),g.key=C.C0.ESC+y}else if(v.keyCode===32)g.key=C.C0.ESC+(v.ctrlKey?C.C0.NUL:" ");else if(v.key==="Dead"&&v.code.startsWith("Key")){let d=v.code.slice(3,4);v.shiftKey||(d=d.toLowerCase()),g.key=C.C0.ESC+d,g.cancel=!0}}else v.keyCode>=65&&v.keyCode<=90?g.key=String.fromCharCode(v.keyCode-64):v.keyCode===32?g.key=C.C0.NUL:v.keyCode>=51&&v.keyCode<=55?g.key=String.fromCharCode(v.keyCode-51+27):v.keyCode===56?g.key=C.C0.DEL:v.keyCode===219?g.key=C.C0.ESC:v.keyCode===220?g.key=C.C0.FS:v.keyCode===221&&(g.key=C.C0.GS)}return g}},482:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Utf8ToUtf32=p.StringToUtf32=p.utf32ToString=p.stringFromCodePoint=void 0,p.stringFromCodePoint=function(m){return m>65535?(m-=65536,String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):String.fromCharCode(m)},p.utf32ToString=function(m,C=0,D=m.length){let v="";for(let E=C;E<D;++E){let M=m[E];M>65535?(M-=65536,v+=String.fromCharCode(55296+(M>>10))+String.fromCharCode(M%1024+56320)):v+=String.fromCharCode(M)}return v},p.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(m,C){const D=m.length;if(!D)return 0;let v=0,E=0;if(this._interim){const M=m.charCodeAt(E++);56320<=M&&M<=57343?C[v++]=1024*(this._interim-55296)+M-56320+65536:(C[v++]=this._interim,C[v++]=M),this._interim=0}for(let M=E;M<D;++M){const w=m.charCodeAt(M);if(55296<=w&&w<=56319){if(++M>=D)return this._interim=w,v;const g=m.charCodeAt(M);56320<=g&&g<=57343?C[v++]=1024*(w-55296)+g-56320+65536:(C[v++]=w,C[v++]=g)}else w!==65279&&(C[v++]=w)}return v}},p.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(m,C){const D=m.length;if(!D)return 0;let v,E,M,w,g=0,l=0,u=0;if(this.interim[0]){let y=!1,A=this.interim[0];A&=(224&A)==192?31:(240&A)==224?15:7;let L,R=0;for(;(L=63&this.interim[++R])&&R<4;)A<<=6,A|=L;const x=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,I=x-R;for(;u<I;){if(u>=D)return 0;if(L=m[u++],(192&L)!=128){u--,y=!0;break}this.interim[R++]=L,A<<=6,A|=63&L}y||(x===2?A<128?u--:C[g++]=A:x===3?A<2048||A>=55296&&A<=57343||A===65279||(C[g++]=A):A<65536||A>1114111||(C[g++]=A)),this.interim.fill(0)}const h=D-4;let d=u;for(;d<D;){for(;!(!(d<h)||128&(v=m[d])||128&(E=m[d+1])||128&(M=m[d+2])||128&(w=m[d+3]));)C[g++]=v,C[g++]=E,C[g++]=M,C[g++]=w,d+=4;if(v=m[d++],v<128)C[g++]=v;else if((224&v)==192){if(d>=D)return this.interim[0]=v,g;if(E=m[d++],(192&E)!=128){d--;continue}if(l=(31&v)<<6|63&E,l<128){d--;continue}C[g++]=l}else if((240&v)==224){if(d>=D)return this.interim[0]=v,g;if(E=m[d++],(192&E)!=128){d--;continue}if(d>=D)return this.interim[0]=v,this.interim[1]=E,g;if(M=m[d++],(192&M)!=128){d--;continue}if(l=(15&v)<<12|(63&E)<<6|63&M,l<2048||l>=55296&&l<=57343||l===65279)continue;C[g++]=l}else if((248&v)==240){if(d>=D)return this.interim[0]=v,g;if(E=m[d++],(192&E)!=128){d--;continue}if(d>=D)return this.interim[0]=v,this.interim[1]=E,g;if(M=m[d++],(192&M)!=128){d--;continue}if(d>=D)return this.interim[0]=v,this.interim[1]=E,this.interim[2]=M,g;if(w=m[d++],(192&w)!=128){d--;continue}if(l=(7&v)<<18|(63&E)<<12|(63&M)<<6|63&w,l<65536||l>1114111)continue;C[g++]=l}}return g}}},225:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.UnicodeV6=void 0;const C=m(1480),D=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],v=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let E;p.UnicodeV6=class{constructor(){if(this.version="6",!E){E=new Uint8Array(65536),E.fill(1),E[0]=0,E.fill(0,1,32),E.fill(0,127,160),E.fill(2,4352,4448),E[9001]=2,E[9002]=2,E.fill(2,11904,42192),E[12351]=1,E.fill(2,44032,55204),E.fill(2,63744,64256),E.fill(2,65040,65050),E.fill(2,65072,65136),E.fill(2,65280,65377),E.fill(2,65504,65511);for(let M=0;M<D.length;++M)E.fill(0,D[M][0],D[M][1]+1)}}wcwidth(M){return M<32?0:M<127?1:M<65536?E[M]:function(w,g){let l,u=0,h=g.length-1;if(w<g[0][0]||w>g[h][1])return!1;for(;h>=u;)if(l=u+h>>1,w>g[l][1])u=l+1;else{if(!(w<g[l][0]))return!0;h=l-1}return!1}(M,v)?0:M>=131072&&M<=196605||M>=196608&&M<=262141?2:1}charProperties(M,w){let g=this.wcwidth(M),l=g===0&&w!==0;if(l){const u=C.UnicodeService.extractWidth(w);u===0?l=!1:u>g&&(g=u)}return C.UnicodeService.createPropertyValue(0,g,l)}}},5981:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.WriteBuffer=void 0;const C=m(8460),D=m(844);class v extends D.Disposable{constructor(M){super(),this._action=M,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new C.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(M,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=M.length,this._writeBuffer.push(M),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(M,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=M.length,this._writeBuffer.push(M),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=M.length,this._writeBuffer.push(M),this._callbacks.push(w)}_innerWrite(M=0,w=!0){const g=M||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const l=this._writeBuffer[this._bufferOffset],u=this._action(l,w);if(u){const d=y=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,y)):this._innerWrite(g,y);return void u.catch(y=>(queueMicrotask(()=>{throw y}),Promise.resolve(!1))).then(d)}const h=this._callbacks[this._bufferOffset];if(h&&h(),this._bufferOffset++,this._pendingData-=l.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}p.WriteBuffer=v},5941:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.toRgbString=p.parseColor=void 0;const m=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,C=/^[\da-f]+$/;function D(v,E){const M=v.toString(16),w=M.length<2?"0"+M:M;switch(E){case 4:return M[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}p.parseColor=function(v){if(!v)return;let E=v.toLowerCase();if(E.indexOf("rgb:")===0){E=E.slice(4);const M=m.exec(E);if(M){const w=M[1]?15:M[4]?255:M[7]?4095:65535;return[Math.round(parseInt(M[1]||M[4]||M[7]||M[10],16)/w*255),Math.round(parseInt(M[2]||M[5]||M[8]||M[11],16)/w*255),Math.round(parseInt(M[3]||M[6]||M[9]||M[12],16)/w*255)]}}else if(E.indexOf("#")===0&&(E=E.slice(1),C.exec(E)&&[3,6,9,12].includes(E.length))){const M=E.length/3,w=[0,0,0];for(let g=0;g<3;++g){const l=parseInt(E.slice(M*g,M*g+M),16);w[g]=M===1?l<<4:M===2?l:M===3?l>>4:l>>8}return w}},p.toRgbString=function(v,E=16){const[M,w,g]=v;return`rgb:${D(M,E)}/${D(w,E)}/${D(g,E)}`}},5770:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.PAYLOAD_LIMIT=void 0,p.PAYLOAD_LIMIT=1e7},6351:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DcsHandler=p.DcsParser=void 0;const C=m(482),D=m(8742),v=m(5770),E=[];p.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=E,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=E}registerHandler(w,g){this._handlers[w]===void 0&&(this._handlers[w]=[]);const l=this._handlers[w];return l.push(g),{dispose:()=>{const u=l.indexOf(g);u!==-1&&l.splice(u,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=E,this._ident=0}hook(w,g){if(this.reset(),this._ident=w,this._active=this._handlers[w]||E,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(w,g,l){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(w,g,l);else this._handlerFb(this._ident,"PUT",(0,C.utf32ToString)(w,g,l))}unhook(w,g=!0){if(this._active.length){let l=!1,u=this._active.length-1,h=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,l=g,h=this._stack.fallThrough,this._stack.paused=!1),!h&&l===!1){for(;u>=0&&(l=this._active[u].unhook(w),l!==!0);u--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,l;u--}for(;u>=0;u--)if(l=this._active[u].unhook(!1),l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,l}else this._handlerFb(this._ident,"UNHOOK",w);this._active=E,this._ident=0}};const M=new D.Params;M.addParam(0),p.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=M,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():M,this._data="",this._hitLimit=!1}put(w,g,l){this._hitLimit||(this._data+=(0,C.utf32ToString)(w,g,l),this._data.length>v.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let g=!1;if(this._hitLimit)g=!1;else if(w&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(l=>(this._params=M,this._data="",this._hitLimit=!1,l));return this._params=M,this._data="",this._hitLimit=!1,g}}},2015:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.EscapeSequenceParser=p.VT500_TRANSITION_TABLE=p.TransitionTable=void 0;const C=m(844),D=m(8742),v=m(6242),E=m(6351);class M{constructor(u){this.table=new Uint8Array(u)}setDefault(u,h){this.table.fill(u<<4|h)}add(u,h,d,y){this.table[h<<8|u]=d<<4|y}addMany(u,h,d,y){for(let A=0;A<u.length;A++)this.table[h<<8|u[A]]=d<<4|y}}p.TransitionTable=M;const w=160;p.VT500_TRANSITION_TABLE=function(){const l=new M(4095),u=Array.apply(null,Array(256)).map((R,x)=>x),h=(R,x)=>u.slice(R,x),d=h(32,127),y=h(0,24);y.push(25),y.push.apply(y,h(28,32));const A=h(0,14);let L;for(L in l.setDefault(1,0),l.addMany(d,0,2,0),A)l.addMany([24,26,153,154],L,3,0),l.addMany(h(128,144),L,3,0),l.addMany(h(144,152),L,3,0),l.add(156,L,0,0),l.add(27,L,11,1),l.add(157,L,4,8),l.addMany([152,158,159],L,0,7),l.add(155,L,11,3),l.add(144,L,11,9);return l.addMany(y,0,3,0),l.addMany(y,1,3,1),l.add(127,1,0,1),l.addMany(y,8,0,8),l.addMany(y,3,3,3),l.add(127,3,0,3),l.addMany(y,4,3,4),l.add(127,4,0,4),l.addMany(y,6,3,6),l.addMany(y,5,3,5),l.add(127,5,0,5),l.addMany(y,2,3,2),l.add(127,2,0,2),l.add(93,1,4,8),l.addMany(d,8,5,8),l.add(127,8,5,8),l.addMany([156,27,24,26,7],8,6,0),l.addMany(h(28,32),8,0,8),l.addMany([88,94,95],1,0,7),l.addMany(d,7,0,7),l.addMany(y,7,0,7),l.add(156,7,0,0),l.add(127,7,0,7),l.add(91,1,11,3),l.addMany(h(64,127),3,7,0),l.addMany(h(48,60),3,8,4),l.addMany([60,61,62,63],3,9,4),l.addMany(h(48,60),4,8,4),l.addMany(h(64,127),4,7,0),l.addMany([60,61,62,63],4,0,6),l.addMany(h(32,64),6,0,6),l.add(127,6,0,6),l.addMany(h(64,127),6,0,0),l.addMany(h(32,48),3,9,5),l.addMany(h(32,48),5,9,5),l.addMany(h(48,64),5,0,6),l.addMany(h(64,127),5,7,0),l.addMany(h(32,48),4,9,5),l.addMany(h(32,48),1,9,2),l.addMany(h(32,48),2,9,2),l.addMany(h(48,127),2,10,0),l.addMany(h(48,80),1,10,0),l.addMany(h(81,88),1,10,0),l.addMany([89,90,92],1,10,0),l.addMany(h(96,127),1,10,0),l.add(80,1,11,9),l.addMany(y,9,0,9),l.add(127,9,0,9),l.addMany(h(28,32),9,0,9),l.addMany(h(32,48),9,9,12),l.addMany(h(48,60),9,8,10),l.addMany([60,61,62,63],9,9,10),l.addMany(y,11,0,11),l.addMany(h(32,128),11,0,11),l.addMany(h(28,32),11,0,11),l.addMany(y,10,0,10),l.add(127,10,0,10),l.addMany(h(28,32),10,0,10),l.addMany(h(48,60),10,8,10),l.addMany([60,61,62,63],10,0,11),l.addMany(h(32,48),10,9,12),l.addMany(y,12,0,12),l.add(127,12,0,12),l.addMany(h(28,32),12,0,12),l.addMany(h(32,48),12,9,12),l.addMany(h(48,64),12,0,11),l.addMany(h(64,127),12,12,13),l.addMany(h(64,127),10,12,13),l.addMany(h(64,127),9,12,13),l.addMany(y,13,13,13),l.addMany(d,13,13,13),l.add(127,13,0,13),l.addMany([27,156,24,26],13,14,0),l.add(w,0,2,0),l.add(w,8,5,8),l.add(w,6,0,6),l.add(w,11,0,11),l.add(w,13,13,13),l}();class g extends C.Disposable{constructor(u=p.VT500_TRANSITION_TABLE){super(),this._transitions=u,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new D.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(h,d,y)=>{},this._executeHandlerFb=h=>{},this._csiHandlerFb=(h,d)=>{},this._escHandlerFb=h=>{},this._errorHandlerFb=h=>h,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,C.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new v.OscParser),this._dcsParser=this.register(new E.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(u,h=[64,126]){let d=0;if(u.prefix){if(u.prefix.length>1)throw new Error("only one byte as prefix supported");if(d=u.prefix.charCodeAt(0),d&&60>d||d>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(u.intermediates){if(u.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let A=0;A<u.intermediates.length;++A){const L=u.intermediates.charCodeAt(A);if(32>L||L>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");d<<=8,d|=L}}if(u.final.length!==1)throw new Error("final must be a single byte");const y=u.final.charCodeAt(0);if(h[0]>y||y>h[1])throw new Error(`final must be in range ${h[0]} .. ${h[1]}`);return d<<=8,d|=y,d}identToString(u){const h=[];for(;u;)h.push(String.fromCharCode(255&u)),u>>=8;return h.reverse().join("")}setPrintHandler(u){this._printHandler=u}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(u,h){const d=this._identifier(u,[48,126]);this._escHandlers[d]===void 0&&(this._escHandlers[d]=[]);const y=this._escHandlers[d];return y.push(h),{dispose:()=>{const A=y.indexOf(h);A!==-1&&y.splice(A,1)}}}clearEscHandler(u){this._escHandlers[this._identifier(u,[48,126])]&&delete this._escHandlers[this._identifier(u,[48,126])]}setEscHandlerFallback(u){this._escHandlerFb=u}setExecuteHandler(u,h){this._executeHandlers[u.charCodeAt(0)]=h}clearExecuteHandler(u){this._executeHandlers[u.charCodeAt(0)]&&delete this._executeHandlers[u.charCodeAt(0)]}setExecuteHandlerFallback(u){this._executeHandlerFb=u}registerCsiHandler(u,h){const d=this._identifier(u);this._csiHandlers[d]===void 0&&(this._csiHandlers[d]=[]);const y=this._csiHandlers[d];return y.push(h),{dispose:()=>{const A=y.indexOf(h);A!==-1&&y.splice(A,1)}}}clearCsiHandler(u){this._csiHandlers[this._identifier(u)]&&delete this._csiHandlers[this._identifier(u)]}setCsiHandlerFallback(u){this._csiHandlerFb=u}registerDcsHandler(u,h){return this._dcsParser.registerHandler(this._identifier(u),h)}clearDcsHandler(u){this._dcsParser.clearHandler(this._identifier(u))}setDcsHandlerFallback(u){this._dcsParser.setHandlerFallback(u)}registerOscHandler(u,h){return this._oscParser.registerHandler(u,h)}clearOscHandler(u){this._oscParser.clearHandler(u)}setOscHandlerFallback(u){this._oscParser.setHandlerFallback(u)}setErrorHandler(u){this._errorHandler=u}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(u,h,d,y,A){this._parseStack.state=u,this._parseStack.handlers=h,this._parseStack.handlerPos=d,this._parseStack.transition=y,this._parseStack.chunkPos=A}parse(u,h,d){let y,A=0,L=0,R=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,R=this._parseStack.chunkPos+1;else{if(d===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const x=this._parseStack.handlers;let I=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(d===!1&&I>-1){for(;I>=0&&(y=x[I](this._params),y!==!0);I--)if(y instanceof Promise)return this._parseStack.handlerPos=I,y}this._parseStack.handlers=[];break;case 4:if(d===!1&&I>-1){for(;I>=0&&(y=x[I](),y!==!0);I--)if(y instanceof Promise)return this._parseStack.handlerPos=I,y}this._parseStack.handlers=[];break;case 6:if(A=u[this._parseStack.chunkPos],y=this._dcsParser.unhook(A!==24&&A!==26,d),y)return y;A===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(A=u[this._parseStack.chunkPos],y=this._oscParser.end(A!==24&&A!==26,d),y)return y;A===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,R=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let x=R;x<h;++x){switch(A=u[x],L=this._transitions.table[this.currentState<<8|(A<160?A:w)],L>>4){case 2:for(let W=x+1;;++W){if(W>=h||(A=u[W])<32||A>126&&A<w){this._printHandler(u,x,W),x=W-1;break}if(++W>=h||(A=u[W])<32||A>126&&A<w){this._printHandler(u,x,W),x=W-1;break}if(++W>=h||(A=u[W])<32||A>126&&A<w){this._printHandler(u,x,W),x=W-1;break}if(++W>=h||(A=u[W])<32||A>126&&A<w){this._printHandler(u,x,W),x=W-1;break}}break;case 3:this._executeHandlers[A]?this._executeHandlers[A]():this._executeHandlerFb(A),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:x,code:A,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const I=this._csiHandlers[this._collect<<8|A];let U=I?I.length-1:-1;for(;U>=0&&(y=I[U](this._params),y!==!0);U--)if(y instanceof Promise)return this._preserveStack(3,I,U,L,x),y;U<0&&this._csiHandlerFb(this._collect<<8|A,this._params),this.precedingJoinState=0;break;case 8:do switch(A){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(A-48)}while(++x<h&&(A=u[x])>47&&A<60);x--;break;case 9:this._collect<<=8,this._collect|=A;break;case 10:const $=this._escHandlers[this._collect<<8|A];let Z=$?$.length-1:-1;for(;Z>=0&&(y=$[Z](),y!==!0);Z--)if(y instanceof Promise)return this._preserveStack(4,$,Z,L,x),y;Z<0&&this._escHandlerFb(this._collect<<8|A),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|A,this._params);break;case 13:for(let W=x+1;;++W)if(W>=h||(A=u[W])===24||A===26||A===27||A>127&&A<w){this._dcsParser.put(u,x,W),x=W-1;break}break;case 14:if(y=this._dcsParser.unhook(A!==24&&A!==26),y)return this._preserveStack(6,[],0,L,x),y;A===27&&(L|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let W=x+1;;W++)if(W>=h||(A=u[W])<32||A>127&&A<w){this._oscParser.put(u,x,W),x=W-1;break}break;case 6:if(y=this._oscParser.end(A!==24&&A!==26),y)return this._preserveStack(5,[],0,L,x),y;A===27&&(L|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&L}}}p.EscapeSequenceParser=g},6242:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.OscHandler=p.OscParser=void 0;const C=m(5770),D=m(482),v=[];p.OscParser=class{constructor(){this._state=0,this._active=v,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(E,M){this._handlers[E]===void 0&&(this._handlers[E]=[]);const w=this._handlers[E];return w.push(M),{dispose:()=>{const g=w.indexOf(M);g!==-1&&w.splice(g,1)}}}clearHandler(E){this._handlers[E]&&delete this._handlers[E]}setHandlerFallback(E){this._handlerFb=E}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}reset(){if(this._state===2)for(let E=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;E>=0;--E)this._active[E].end(!1);this._stack.paused=!1,this._active=v,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||v,this._active.length)for(let E=this._active.length-1;E>=0;E--)this._active[E].start();else this._handlerFb(this._id,"START")}_put(E,M,w){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(E,M,w);else this._handlerFb(this._id,"PUT",(0,D.utf32ToString)(E,M,w))}start(){this.reset(),this._state=1}put(E,M,w){if(this._state!==3){if(this._state===1)for(;M<w;){const g=E[M++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&w-M>0&&this._put(E,M,w)}}end(E,M=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,g=this._active.length-1,l=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,w=M,l=this._stack.fallThrough,this._stack.paused=!1),!l&&w===!1){for(;g>=0&&(w=this._active[g].end(E),w!==!0);g--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,w;g--}for(;g>=0;g--)if(w=this._active[g].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",E);this._active=v,this._id=-1,this._state=0}}},p.OscHandler=class{constructor(E){this._handler=E,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(E,M,w){this._hitLimit||(this._data+=(0,D.utf32ToString)(E,M,w),this._data.length>C.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(E){let M=!1;if(this._hitLimit)M=!1;else if(E&&(M=this._handler(this._data),M instanceof Promise))return M.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,M}}},8742:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Params=void 0;const m=2147483647;class C{static fromArray(v){const E=new C;if(!v.length)return E;for(let M=Array.isArray(v[0])?1:0;M<v.length;++M){const w=v[M];if(Array.isArray(w))for(let g=0;g<w.length;++g)E.addSubParam(w[g]);else E.addParam(w)}return E}constructor(v=32,E=32){if(this.maxLength=v,this.maxSubParamsLength=E,E>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(v),this.length=0,this._subParams=new Int32Array(E),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(v),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const v=new C(this.maxLength,this.maxSubParamsLength);return v.params.set(this.params),v.length=this.length,v._subParams.set(this._subParams),v._subParamsLength=this._subParamsLength,v._subParamsIdx.set(this._subParamsIdx),v._rejectDigits=this._rejectDigits,v._rejectSubDigits=this._rejectSubDigits,v._digitIsSub=this._digitIsSub,v}toArray(){const v=[];for(let E=0;E<this.length;++E){v.push(this.params[E]);const M=this._subParamsIdx[E]>>8,w=255&this._subParamsIdx[E];w-M>0&&v.push(Array.prototype.slice.call(this._subParams,M,w))}return v}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(v){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(v<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=v>m?m:v}}addSubParam(v){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(v<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=v>m?m:v,this._subParamsIdx[this.length-1]++}}hasSubParams(v){return(255&this._subParamsIdx[v])-(this._subParamsIdx[v]>>8)>0}getSubParams(v){const E=this._subParamsIdx[v]>>8,M=255&this._subParamsIdx[v];return M-E>0?this._subParams.subarray(E,M):null}getSubParamsAll(){const v={};for(let E=0;E<this.length;++E){const M=this._subParamsIdx[E]>>8,w=255&this._subParamsIdx[E];w-M>0&&(v[E]=this._subParams.slice(M,w))}return v}addDigit(v){let E;if(this._rejectDigits||!(E=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const M=this._digitIsSub?this._subParams:this.params,w=M[E-1];M[E-1]=~w?Math.min(10*w+v,m):v}}p.Params=C},5741:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.AddonManager=void 0,p.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let m=this._addons.length-1;m>=0;m--)this._addons[m].instance.dispose()}loadAddon(m,C){const D={instance:C,dispose:C.dispose,isDisposed:!1};this._addons.push(D),C.dispose=()=>this._wrappedAddonDispose(D),C.activate(m)}_wrappedAddonDispose(m){if(m.isDisposed)return;let C=-1;for(let D=0;D<this._addons.length;D++)if(this._addons[D]===m){C=D;break}if(C===-1)throw new Error("Could not dispose an addon that has not been loaded");m.isDisposed=!0,m.dispose.apply(m.instance),this._addons.splice(C,1)}}},8771:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferApiView=void 0;const C=m(3785),D=m(511);p.BufferApiView=class{constructor(v,E){this._buffer=v,this.type=E}init(v){return this._buffer=v,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(v){const E=this._buffer.lines.get(v);if(E)return new C.BufferLineApiView(E)}getNullCell(){return new D.CellData}}},3785:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferLineApiView=void 0;const C=m(511);p.BufferLineApiView=class{constructor(D){this._line=D}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(D,v){if(!(D<0||D>=this._line.length))return v?(this._line.loadCell(D,v),v):this._line.loadCell(D,new C.CellData)}translateToString(D,v,E){return this._line.translateToString(D,v,E)}}},8285:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferNamespaceApi=void 0;const C=m(8771),D=m(8460),v=m(844);class E extends v.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new D.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new C.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new C.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}p.BufferNamespaceApi=E},7975:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ParserApi=void 0,p.ParserApi=class{constructor(m){this._core=m}registerCsiHandler(m,C){return this._core.registerCsiHandler(m,D=>C(D.toArray()))}addCsiHandler(m,C){return this.registerCsiHandler(m,C)}registerDcsHandler(m,C){return this._core.registerDcsHandler(m,(D,v)=>C(D,v.toArray()))}addDcsHandler(m,C){return this.registerDcsHandler(m,C)}registerEscHandler(m,C){return this._core.registerEscHandler(m,C)}addEscHandler(m,C){return this.registerEscHandler(m,C)}registerOscHandler(m,C){return this._core.registerOscHandler(m,C)}addOscHandler(m,C){return this.registerOscHandler(m,C)}}},7090:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.UnicodeApi=void 0,p.UnicodeApi=class{constructor(m){this._core=m}register(m){this._core.unicodeService.register(m)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(m){this._core.unicodeService.activeVersion=m}}},744:function(ne,p,m){var C=this&&this.__decorate||function(l,u,h,d){var y,A=arguments.length,L=A<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,u,h,d);else for(var R=l.length-1;R>=0;R--)(y=l[R])&&(L=(A<3?y(L):A>3?y(u,h,L):y(u,h))||L);return A>3&&L&&Object.defineProperty(u,h,L),L},D=this&&this.__param||function(l,u){return function(h,d){u(h,d,l)}};Object.defineProperty(p,"__esModule",{value:!0}),p.BufferService=p.MINIMUM_ROWS=p.MINIMUM_COLS=void 0;const v=m(8460),E=m(844),M=m(5295),w=m(2585);p.MINIMUM_COLS=2,p.MINIMUM_ROWS=1;let g=p.BufferService=class extends E.Disposable{get buffer(){return this.buffers.active}constructor(l){super(),this.isUserScrolling=!1,this._onResize=this.register(new v.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new v.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(l.rawOptions.cols||0,p.MINIMUM_COLS),this.rows=Math.max(l.rawOptions.rows||0,p.MINIMUM_ROWS),this.buffers=this.register(new M.BufferSet(l,this))}resize(l,u){this.cols=l,this.rows=u,this.buffers.resize(l,u),this._onResize.fire({cols:l,rows:u})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(l,u=!1){const h=this.buffer;let d;d=this._cachedBlankLine,d&&d.length===this.cols&&d.getFg(0)===l.fg&&d.getBg(0)===l.bg||(d=h.getBlankLine(l,u),this._cachedBlankLine=d),d.isWrapped=u;const y=h.ybase+h.scrollTop,A=h.ybase+h.scrollBottom;if(h.scrollTop===0){const L=h.lines.isFull;A===h.lines.length-1?L?h.lines.recycle().copyFrom(d):h.lines.push(d.clone()):h.lines.splice(A+1,0,d.clone()),L?this.isUserScrolling&&(h.ydisp=Math.max(h.ydisp-1,0)):(h.ybase++,this.isUserScrolling||h.ydisp++)}else{const L=A-y+1;h.lines.shiftElements(y+1,L-1,-1),h.lines.set(A,d.clone())}this.isUserScrolling||(h.ydisp=h.ybase),this._onScroll.fire(h.ydisp)}scrollLines(l,u,h){const d=this.buffer;if(l<0){if(d.ydisp===0)return;this.isUserScrolling=!0}else l+d.ydisp>=d.ybase&&(this.isUserScrolling=!1);const y=d.ydisp;d.ydisp=Math.max(Math.min(d.ydisp+l,d.ybase),0),y!==d.ydisp&&(u||this._onScroll.fire(d.ydisp))}};p.BufferService=g=C([D(0,w.IOptionsService)],g)},7994:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CharsetService=void 0,p.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(m){this.glevel=m,this.charset=this._charsets[m]}setgCharset(m,C){this._charsets[m]=C,this.glevel===m&&(this.charset=C)}}},1753:function(ne,p,m){var C=this&&this.__decorate||function(d,y,A,L){var R,x=arguments.length,I=x<3?y:L===null?L=Object.getOwnPropertyDescriptor(y,A):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(d,y,A,L);else for(var U=d.length-1;U>=0;U--)(R=d[U])&&(I=(x<3?R(I):x>3?R(y,A,I):R(y,A))||I);return x>3&&I&&Object.defineProperty(y,A,I),I},D=this&&this.__param||function(d,y){return function(A,L){y(A,L,d)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CoreMouseService=void 0;const v=m(2585),E=m(8460),M=m(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:d=>d.button!==4&&d.action===1&&(d.ctrl=!1,d.alt=!1,d.shift=!1,!0)},VT200:{events:19,restrict:d=>d.action!==32},DRAG:{events:23,restrict:d=>d.action!==32||d.button!==3},ANY:{events:31,restrict:d=>!0}};function g(d,y){let A=(d.ctrl?16:0)|(d.shift?4:0)|(d.alt?8:0);return d.button===4?(A|=64,A|=d.action):(A|=3&d.button,4&d.button&&(A|=64),8&d.button&&(A|=128),d.action===32?A|=32:d.action!==0||y||(A|=3)),A}const l=String.fromCharCode,u={DEFAULT:d=>{const y=[g(d,!1)+32,d.col+32,d.row+32];return y[0]>255||y[1]>255||y[2]>255?"":`\x1B[M${l(y[0])}${l(y[1])}${l(y[2])}`},SGR:d=>{const y=d.action===0&&d.button!==4?"m":"M";return`\x1B[<${g(d,!0)};${d.col};${d.row}${y}`},SGR_PIXELS:d=>{const y=d.action===0&&d.button!==4?"m":"M";return`\x1B[<${g(d,!0)};${d.x};${d.y}${y}`}};let h=p.CoreMouseService=class extends M.Disposable{constructor(d,y){super(),this._bufferService=d,this._coreService=y,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new E.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const A of Object.keys(w))this.addProtocol(A,w[A]);for(const A of Object.keys(u))this.addEncoding(A,u[A]);this.reset()}addProtocol(d,y){this._protocols[d]=y}addEncoding(d,y){this._encodings[d]=y}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(d){if(!this._protocols[d])throw new Error(`unknown protocol "${d}"`);this._activeProtocol=d,this._onProtocolChange.fire(this._protocols[d].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(d){if(!this._encodings[d])throw new Error(`unknown encoding "${d}"`);this._activeEncoding=d}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(d){if(d.col<0||d.col>=this._bufferService.cols||d.row<0||d.row>=this._bufferService.rows||d.button===4&&d.action===32||d.button===3&&d.action!==32||d.button!==4&&(d.action===2||d.action===3)||(d.col++,d.row++,d.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,d,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(d))return!1;const y=this._encodings[this._activeEncoding](d);return y&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(y):this._coreService.triggerDataEvent(y,!0)),this._lastEvent=d,!0}explainEvents(d){return{down:!!(1&d),up:!!(2&d),drag:!!(4&d),move:!!(8&d),wheel:!!(16&d)}}_equalEvents(d,y,A){if(A){if(d.x!==y.x||d.y!==y.y)return!1}else if(d.col!==y.col||d.row!==y.row)return!1;return d.button===y.button&&d.action===y.action&&d.ctrl===y.ctrl&&d.alt===y.alt&&d.shift===y.shift}};p.CoreMouseService=h=C([D(0,v.IBufferService),D(1,v.ICoreService)],h)},6975:function(ne,p,m){var C=this&&this.__decorate||function(h,d,y,A){var L,R=arguments.length,x=R<3?d:A===null?A=Object.getOwnPropertyDescriptor(d,y):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,d,y,A);else for(var I=h.length-1;I>=0;I--)(L=h[I])&&(x=(R<3?L(x):R>3?L(d,y,x):L(d,y))||x);return R>3&&x&&Object.defineProperty(d,y,x),x},D=this&&this.__param||function(h,d){return function(y,A){d(y,A,h)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CoreService=void 0;const v=m(1439),E=m(8460),M=m(844),w=m(2585),g=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let u=p.CoreService=class extends M.Disposable{constructor(h,d,y){super(),this._bufferService=h,this._logService=d,this._optionsService=y,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new E.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new E.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new E.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new E.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,v.clone)(g),this.decPrivateModes=(0,v.clone)(l)}reset(){this.modes=(0,v.clone)(g),this.decPrivateModes=(0,v.clone)(l)}triggerDataEvent(h,d=!1){if(this._optionsService.rawOptions.disableStdin)return;const y=this._bufferService.buffer;d&&this._optionsService.rawOptions.scrollOnUserInput&&y.ybase!==y.ydisp&&this._onRequestScrollToBottom.fire(),d&&this._onUserInput.fire(),this._logService.debug(`sending data "${h}"`,()=>h.split("").map(A=>A.charCodeAt(0))),this._onData.fire(h)}triggerBinaryEvent(h){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${h}"`,()=>h.split("").map(d=>d.charCodeAt(0))),this._onBinary.fire(h))}};p.CoreService=u=C([D(0,w.IBufferService),D(1,w.ILogService),D(2,w.IOptionsService)],u)},9074:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DecorationService=void 0;const C=m(8055),D=m(8460),v=m(844),E=m(6106);let M=0,w=0;class g extends v.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new E.SortedList(h=>h?.marker.line),this._onDecorationRegistered=this.register(new D.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new D.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,v.toDisposable)(()=>this.reset()))}registerDecoration(h){if(h.marker.isDisposed)return;const d=new l(h);if(d){const y=d.marker.onDispose(()=>d.dispose());d.onDispose(()=>{d&&(this._decorations.delete(d)&&this._onDecorationRemoved.fire(d),y.dispose())}),this._decorations.insert(d),this._onDecorationRegistered.fire(d)}return d}reset(){for(const h of this._decorations.values())h.dispose();this._decorations.clear()}*getDecorationsAtCell(h,d,y){let A=0,L=0;for(const R of this._decorations.getKeyIterator(d))A=R.options.x??0,L=A+(R.options.width??1),h>=A&&h<L&&(!y||(R.options.layer??"bottom")===y)&&(yield R)}forEachDecorationAtCell(h,d,y,A){this._decorations.forEachByKey(d,L=>{M=L.options.x??0,w=M+(L.options.width??1),h>=M&&h<w&&(!y||(L.options.layer??"bottom")===y)&&A(L)})}}p.DecorationService=g;class l extends v.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=C.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=C.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(h){super(),this.options=h,this.onRenderEmitter=this.register(new D.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new D.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=h.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.InstantiationService=p.ServiceCollection=void 0;const C=m(2585),D=m(8343);class v{constructor(...M){this._entries=new Map;for(const[w,g]of M)this.set(w,g)}set(M,w){const g=this._entries.get(M);return this._entries.set(M,w),g}forEach(M){for(const[w,g]of this._entries.entries())M(w,g)}has(M){return this._entries.has(M)}get(M){return this._entries.get(M)}}p.ServiceCollection=v,p.InstantiationService=class{constructor(){this._services=new v,this._services.set(C.IInstantiationService,this)}setService(E,M){this._services.set(E,M)}getService(E){return this._services.get(E)}createInstance(E,...M){const w=(0,D.getServiceDependencies)(E).sort((u,h)=>u.index-h.index),g=[];for(const u of w){const h=this._services.get(u.id);if(!h)throw new Error(`[createInstance] ${E.name} depends on UNKNOWN service ${u.id}.`);g.push(h)}const l=w.length>0?w[0].index:M.length;if(M.length!==l)throw new Error(`[createInstance] First service dependency of ${E.name} at position ${l+1} conflicts with ${M.length} static arguments`);return new E(...M,...g)}}},7866:function(ne,p,m){var C=this&&this.__decorate||function(l,u,h,d){var y,A=arguments.length,L=A<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,u,h,d);else for(var R=l.length-1;R>=0;R--)(y=l[R])&&(L=(A<3?y(L):A>3?y(u,h,L):y(u,h))||L);return A>3&&L&&Object.defineProperty(u,h,L),L},D=this&&this.__param||function(l,u){return function(h,d){u(h,d,l)}};Object.defineProperty(p,"__esModule",{value:!0}),p.traceCall=p.setTraceLogger=p.LogService=void 0;const v=m(844),E=m(2585),M={trace:E.LogLevelEnum.TRACE,debug:E.LogLevelEnum.DEBUG,info:E.LogLevelEnum.INFO,warn:E.LogLevelEnum.WARN,error:E.LogLevelEnum.ERROR,off:E.LogLevelEnum.OFF};let w,g=p.LogService=class extends v.Disposable{get logLevel(){return this._logLevel}constructor(l){super(),this._optionsService=l,this._logLevel=E.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=M[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(l){for(let u=0;u<l.length;u++)typeof l[u]=="function"&&(l[u]=l[u]())}_log(l,u,h){this._evalLazyOptionalParams(h),l.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+u,...h)}trace(l,...u){this._logLevel<=E.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,l,u)}debug(l,...u){this._logLevel<=E.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,l,u)}info(l,...u){this._logLevel<=E.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,l,u)}warn(l,...u){this._logLevel<=E.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,l,u)}error(l,...u){this._logLevel<=E.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,l,u)}};p.LogService=g=C([D(0,E.IOptionsService)],g),p.setTraceLogger=function(l){w=l},p.traceCall=function(l,u,h){if(typeof h.value!="function")throw new Error("not supported");const d=h.value;h.value=function(...y){if(w.logLevel!==E.LogLevelEnum.TRACE)return d.apply(this,y);w.trace(`GlyphRenderer#${d.name}(${y.map(L=>JSON.stringify(L)).join(", ")})`);const A=d.apply(this,y);return w.trace(`GlyphRenderer#${d.name} return`,A),A}}},7302:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.OptionsService=p.DEFAULT_OPTIONS=void 0;const C=m(8460),D=m(844),v=m(6114);p.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:v.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const E=["normal","bold","100","200","300","400","500","600","700","800","900"];class M extends D.Disposable{constructor(g){super(),this._onOptionChange=this.register(new C.EventEmitter),this.onOptionChange=this._onOptionChange.event;const l={...p.DEFAULT_OPTIONS};for(const u in g)if(u in l)try{const h=g[u];l[u]=this._sanitizeAndValidateOption(u,h)}catch(h){console.error(h)}this.rawOptions=l,this.options={...l},this._setupOptions(),this.register((0,D.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(g,l){return this.onOptionChange(u=>{u===g&&l(this.rawOptions[g])})}onMultipleOptionChange(g,l){return this.onOptionChange(u=>{g.indexOf(u)!==-1&&l()})}_setupOptions(){const g=u=>{if(!(u in p.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);return this.rawOptions[u]},l=(u,h)=>{if(!(u in p.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);h=this._sanitizeAndValidateOption(u,h),this.rawOptions[u]!==h&&(this.rawOptions[u]=h,this._onOptionChange.fire(u))};for(const u in this.rawOptions){const h={get:g.bind(this,u),set:l.bind(this,u)};Object.defineProperty(this.options,u,h)}}_sanitizeAndValidateOption(g,l){switch(g){case"cursorStyle":if(l||(l=p.DEFAULT_OPTIONS[g]),!function(u){return u==="block"||u==="underline"||u==="bar"}(l))throw new Error(`"${l}" is not a valid value for ${g}`);break;case"wordSeparator":l||(l=p.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof l=="number"&&1<=l&&l<=1e3)break;l=E.includes(l)?l:p.DEFAULT_OPTIONS[g];break;case"cursorWidth":l=Math.floor(l);case"lineHeight":case"tabStopWidth":if(l<1)throw new Error(`${g} cannot be less than 1, value: ${l}`);break;case"minimumContrastRatio":l=Math.max(1,Math.min(21,Math.round(10*l)/10));break;case"scrollback":if((l=Math.min(l,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${l}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(l<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${l}`);break;case"rows":case"cols":if(!l&&l!==0)throw new Error(`${g} must be numeric, value: ${l}`);break;case"windowsPty":l=l??{}}return l}}p.OptionsService=M},2660:function(ne,p,m){var C=this&&this.__decorate||function(M,w,g,l){var u,h=arguments.length,d=h<3?w:l===null?l=Object.getOwnPropertyDescriptor(w,g):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(M,w,g,l);else for(var y=M.length-1;y>=0;y--)(u=M[y])&&(d=(h<3?u(d):h>3?u(w,g,d):u(w,g))||d);return h>3&&d&&Object.defineProperty(w,g,d),d},D=this&&this.__param||function(M,w){return function(g,l){w(g,l,M)}};Object.defineProperty(p,"__esModule",{value:!0}),p.OscLinkService=void 0;const v=m(2585);let E=p.OscLinkService=class{constructor(M){this._bufferService=M,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(M){const w=this._bufferService.buffer;if(M.id===void 0){const y=w.addMarker(w.ybase+w.y),A={data:M,id:this._nextId++,lines:[y]};return y.onDispose(()=>this._removeMarkerFromLink(A,y)),this._dataByLinkId.set(A.id,A),A.id}const g=M,l=this._getEntryIdKey(g),u=this._entriesWithId.get(l);if(u)return this.addLineToLink(u.id,w.ybase+w.y),u.id;const h=w.addMarker(w.ybase+w.y),d={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(d,h)),this._entriesWithId.set(d.key,d),this._dataByLinkId.set(d.id,d),d.id}addLineToLink(M,w){const g=this._dataByLinkId.get(M);if(g&&g.lines.every(l=>l.line!==w)){const l=this._bufferService.buffer.addMarker(w);g.lines.push(l),l.onDispose(()=>this._removeMarkerFromLink(g,l))}}getLinkData(M){return this._dataByLinkId.get(M)?.data}_getEntryIdKey(M){return`${M.id};;${M.uri}`}_removeMarkerFromLink(M,w){const g=M.lines.indexOf(w);g!==-1&&(M.lines.splice(g,1),M.lines.length===0&&(M.data.id!==void 0&&this._entriesWithId.delete(M.key),this._dataByLinkId.delete(M.id)))}};p.OscLinkService=E=C([D(0,v.IBufferService)],E)},8343:(ne,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.createDecorator=p.getServiceDependencies=p.serviceRegistry=void 0;const m="di$target",C="di$dependencies";p.serviceRegistry=new Map,p.getServiceDependencies=function(D){return D[C]||[]},p.createDecorator=function(D){if(p.serviceRegistry.has(D))return p.serviceRegistry.get(D);const v=function(E,M,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,l,u){l[m]===l?l[C].push({id:g,index:u}):(l[C]=[{id:g,index:u}],l[m]=l)})(v,E,w)};return v.toString=()=>D,p.serviceRegistry.set(D,v),v}},2585:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.IDecorationService=p.IUnicodeService=p.IOscLinkService=p.IOptionsService=p.ILogService=p.LogLevelEnum=p.IInstantiationService=p.ICharsetService=p.ICoreService=p.ICoreMouseService=p.IBufferService=void 0;const C=m(8343);var D;p.IBufferService=(0,C.createDecorator)("BufferService"),p.ICoreMouseService=(0,C.createDecorator)("CoreMouseService"),p.ICoreService=(0,C.createDecorator)("CoreService"),p.ICharsetService=(0,C.createDecorator)("CharsetService"),p.IInstantiationService=(0,C.createDecorator)("InstantiationService"),function(v){v[v.TRACE=0]="TRACE",v[v.DEBUG=1]="DEBUG",v[v.INFO=2]="INFO",v[v.WARN=3]="WARN",v[v.ERROR=4]="ERROR",v[v.OFF=5]="OFF"}(D||(p.LogLevelEnum=D={})),p.ILogService=(0,C.createDecorator)("LogService"),p.IOptionsService=(0,C.createDecorator)("OptionsService"),p.IOscLinkService=(0,C.createDecorator)("OscLinkService"),p.IUnicodeService=(0,C.createDecorator)("UnicodeService"),p.IDecorationService=(0,C.createDecorator)("DecorationService")},1480:(ne,p,m)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.UnicodeService=void 0;const C=m(8460),D=m(225);class v{static extractShouldJoin(M){return(1&M)!=0}static extractWidth(M){return M>>1&3}static extractCharKind(M){return M>>3}static createPropertyValue(M,w,g=!1){return(16777215&M)<<3|(3&w)<<1|(g?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new C.EventEmitter,this.onChange=this._onChange.event;const M=new D.UnicodeV6;this.register(M),this._active=M.version,this._activeProvider=M}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(M){if(!this._providers[M])throw new Error(`unknown Unicode version "${M}"`);this._active=M,this._activeProvider=this._providers[M],this._onChange.fire(M)}register(M){this._providers[M.version]=M}wcwidth(M){return this._activeProvider.wcwidth(M)}getStringCellWidth(M){let w=0,g=0;const l=M.length;for(let u=0;u<l;++u){let h=M.charCodeAt(u);if(55296<=h&&h<=56319){if(++u>=l)return w+this.wcwidth(h);const A=M.charCodeAt(u);56320<=A&&A<=57343?h=1024*(h-55296)+A-56320+65536:w+=this.wcwidth(A)}const d=this.charProperties(h,g);let y=v.extractWidth(d);v.extractShouldJoin(d)&&(y-=v.extractWidth(g)),w+=y,g=d}return w}charProperties(M,w){return this._activeProvider.charProperties(M,w)}}p.UnicodeService=v}},We={};function ct(ne){var p=We[ne];if(p!==void 0)return p.exports;var m=We[ne]={exports:{}};return Ke[ne].call(m.exports,m,m.exports,ct),m.exports}var Oe={};return(()=>{var ne=Oe;Object.defineProperty(ne,"__esModule",{value:!0}),ne.Terminal=void 0;const p=ct(9042),m=ct(3236),C=ct(844),D=ct(5741),v=ct(8285),E=ct(7975),M=ct(7090),w=["cols","rows"];class g extends C.Disposable{constructor(u){super(),this._core=this.register(new m.Terminal(u)),this._addonManager=this.register(new D.AddonManager),this._publicOptions={...this._core.options};const h=y=>this._core.options[y],d=(y,A)=>{this._checkReadonlyOptions(y),this._core.options[y]=A};for(const y in this._core.options){const A={get:h.bind(this,y),set:d.bind(this,y)};Object.defineProperty(this._publicOptions,y,A)}}_checkReadonlyOptions(u){if(w.includes(u))throw new Error(`Option "${u}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new E.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new M.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new v.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const u=this._core.coreService.decPrivateModes;let h="none";switch(this._core.coreMouseService.activeProtocol){case"X10":h="x10";break;case"VT200":h="vt200";break;case"DRAG":h="drag";break;case"ANY":h="any"}return{applicationCursorKeysMode:u.applicationCursorKeys,applicationKeypadMode:u.applicationKeypad,bracketedPasteMode:u.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:h,originMode:u.origin,reverseWraparoundMode:u.reverseWraparound,sendFocusMode:u.sendFocus,wraparoundMode:u.wraparound}}get options(){return this._publicOptions}set options(u){for(const h in u)this._publicOptions[h]=u[h]}blur(){this._core.blur()}focus(){this._core.focus()}input(u,h=!0){this._core.input(u,h)}resize(u,h){this._verifyIntegers(u,h),this._core.resize(u,h)}open(u){this._core.open(u)}attachCustomKeyEventHandler(u){this._core.attachCustomKeyEventHandler(u)}attachCustomWheelEventHandler(u){this._core.attachCustomWheelEventHandler(u)}registerLinkProvider(u){return this._core.registerLinkProvider(u)}registerCharacterJoiner(u){return this._checkProposedApi(),this._core.registerCharacterJoiner(u)}deregisterCharacterJoiner(u){this._checkProposedApi(),this._core.deregisterCharacterJoiner(u)}registerMarker(u=0){return this._verifyIntegers(u),this._core.registerMarker(u)}registerDecoration(u){return this._checkProposedApi(),this._verifyPositiveIntegers(u.x??0,u.width??0,u.height??0),this._core.registerDecoration(u)}hasSelection(){return this._core.hasSelection()}select(u,h,d){this._verifyIntegers(u,h,d),this._core.select(u,h,d)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(u,h){this._verifyIntegers(u,h),this._core.selectLines(u,h)}dispose(){super.dispose()}scrollLines(u){this._verifyIntegers(u),this._core.scrollLines(u)}scrollPages(u){this._verifyIntegers(u),this._core.scrollPages(u)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(u){this._verifyIntegers(u),this._core.scrollToLine(u)}clear(){this._core.clear()}write(u,h){this._core.write(u,h)}writeln(u,h){this._core.write(u),this._core.write(`\r
`,h)}paste(u){this._core.paste(u)}refresh(u,h){this._verifyIntegers(u,h),this._core.refresh(u,h)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(u){this._addonManager.loadAddon(this,u)}static get strings(){return p}_verifyIntegers(...u){for(const h of u)if(h===1/0||isNaN(h)||h%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...u){for(const h of u)if(h&&(h===1/0||isNaN(h)||h%1!=0||h<0))throw new Error("This API only accepts positive integers")}}ne.Terminal=g})(),Oe})());var Notyf=function(){"use strict";var Ke,We=function(){return(We=Object.assign||function(w){for(var g,l=1,u=arguments.length;l<u;l++)for(var h in g=arguments[l])Object.prototype.hasOwnProperty.call(g,h)&&(w[h]=g[h]);return w}).apply(this,arguments)},ct=(Oe.prototype.on=function(w,g){var l=this.listeners[w]||[];this.listeners[w]=l.concat([g])},Oe.prototype.triggerEvent=function(w,g){var l=this;(this.listeners[w]||[]).forEach(function(u){return u({target:l,event:g})})},Oe);function Oe(w){this.options=w,this.listeners={}}(p=Ke=Ke||{})[p.Add=0]="Add",p[p.Remove=1]="Remove";var ne,p,m=(C.prototype.push=function(w){this.notifications.push(w),this.updateFn(w,Ke.Add,this.notifications)},C.prototype.splice=function(w,g){return g=this.notifications.splice(w,g)[0],this.updateFn(g,Ke.Remove,this.notifications),g},C.prototype.indexOf=function(w){return this.notifications.indexOf(w)},C.prototype.onUpdate=function(w){this.updateFn=w},C);function C(){this.notifications=[]}(p=ne=ne||{}).Dismiss="dismiss";var D={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!(p.Click="click")},v=(E.prototype.on=function(w,g){var l;this.events=We(We({},this.events),((l={})[w]=g,l))},E.prototype.update=function(w,g){g===Ke.Add?this.addNotification(w):g===Ke.Remove&&this.removeNotification(w)},E.prototype.removeNotification=function(h){var g,l,u=this,h=this._popRenderedNotification(h);h&&((l=h.node).classList.add("notyf__toast--disappear"),l.addEventListener(this.animationEndEventName,g=function(d){d.target===l&&(l.removeEventListener(u.animationEndEventName,g),u.container.removeChild(l))}))},E.prototype.addNotification=function(w){var g=this._renderNotification(w);this.notifications.push({notification:w,node:g}),this._announce(w.options.message||"Notification")},E.prototype._renderNotification=function(w){var g=this._buildNotificationCard(w),l=w.options.className;return l&&(w=g.classList).add.apply(w,l.split(" ")),this.container.appendChild(g),g},E.prototype._popRenderedNotification=function(w){for(var g=-1,l=0;l<this.notifications.length&&g<0;l++)this.notifications[l].notification===w&&(g=l);if(g!==-1)return this.notifications.splice(g,1)[0]},E.prototype.getXPosition=function(w){return((w=w?.position)===null||w===void 0?void 0:w.x)||"right"},E.prototype.getYPosition=function(w){return((w=w?.position)===null||w===void 0?void 0:w.y)||"bottom"},E.prototype.adjustContainerAlignment=function(u){var g=this.X_POSITION_FLEX_MAP[this.getXPosition(u)],l=this.Y_POSITION_FLEX_MAP[this.getYPosition(u)],u=this.container.style;u.setProperty("justify-content",l),u.setProperty("align-items",g)},E.prototype._buildNotificationCard=function(w){var g=this,l=w.options,u=l.icon;this.adjustContainerAlignment(l);var h=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),d=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),y=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),A=this._createHTMLElement({tagName:"div",className:"notyf__message"});A.innerHTML=l.message||"";var L,R,x,I,U=l.background||l.backgroundColor;return u&&(L=this._createHTMLElement({tagName:"div",className:"notyf__icon"}),(typeof u=="string"||u instanceof String)&&(L.innerHTML=new String(u).valueOf()),typeof u=="object"&&(R=u.tagName,x=u.className,I=u.text,u=(u=u.color)===void 0?U:u,I=this._createHTMLElement({tagName:R===void 0?"i":R,className:x,text:I}),u&&(I.style.color=u),L.appendChild(I)),y.appendChild(L)),y.appendChild(A),h.appendChild(y),U&&(l.ripple?(d.style.background=U,h.appendChild(d)):h.style.background=U),l.dismissible&&(d=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),U=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"}),d.appendChild(U),y.appendChild(d),h.classList.add("notyf__toast--dismissible"),U.addEventListener("click",function($){var Z,W;(W=(Z=g.events)[ne.Dismiss])!==null&&W!==void 0&&W.call(Z,{target:w,event:$}),$.stopPropagation()})),h.addEventListener("click",function($){var Z,W;return(W=(Z=g.events)[ne.Click])===null||W===void 0?void 0:W.call(Z,{target:w,event:$})}),l=this.getYPosition(l)==="top"?"upper":"lower",h.classList.add("notyf__toast--"+l),h},E.prototype._createHTMLElement=function(l){var u=l.tagName,g=l.className,l=l.text,u=document.createElement(u);return g&&(u.className=g),u.textContent=l||null,u},E.prototype._createA11yContainer=function(){var w=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});w.setAttribute("aria-atomic","true"),w.setAttribute("aria-live","polite"),w.style.border="0",w.style.clip="rect(0 0 0 0)",w.style.height="1px",w.style.margin="-1px",w.style.overflow="hidden",w.style.padding="0",w.style.position="absolute",w.style.width="1px",w.style.outline="0",document.body.appendChild(w),this.a11yContainer=w},E.prototype._announce=function(w){var g=this;this.a11yContainer.textContent="",setTimeout(function(){g.a11yContainer.textContent=w},100)},E.prototype._getAnimationEndEventName=function(){var w,g=document.createElement("_fake"),l={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"};for(w in l)if(g.style[w]!==void 0)return l[w];return"animationend"},E);function E(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var w=document.createDocumentFragment(),g=this._createHTMLElement({tagName:"div",className:"notyf"});w.appendChild(g),document.body.appendChild(w),this.container=g,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}function M(w){var g=this;this.dismiss=this._removeNotification,this.notifications=new m,this.view=new v;var l=this.registerTypes(w);this.options=We(We({},D),w),this.options.types=l,this.notifications.onUpdate(function(u,h){return g.view.update(u,h)}),this.view.on(ne.Dismiss,function(d){var h=d.target,d=d.event;g._removeNotification(h),h.triggerEvent(ne.Dismiss,d)}),this.view.on(ne.Click,function(d){var h=d.target,d=d.event;return h.triggerEvent(ne.Click,d)})}return M.prototype.error=function(w){return w=this.normalizeOptions("error",w),this.open(w)},M.prototype.success=function(w){return w=this.normalizeOptions("success",w),this.open(w)},M.prototype.open=function(w){var g=this.options.types.find(function(l){return l.type===w.type})||{},g=We(We({},g),w);return this.assignProps(["ripple","position","dismissible"],g),g=new ct(g),this._pushNotification(g),g},M.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},M.prototype.assignProps=function(w,g){var l=this;w.forEach(function(u){g[u]=(g[u]==null?l.options:g)[u]})},M.prototype._pushNotification=function(w){var g=this;this.notifications.push(w);var l=(w.options.duration!==void 0?w:this).options.duration;l&&setTimeout(function(){return g._removeNotification(w)},l)},M.prototype._removeNotification=function(w){w=this.notifications.indexOf(w),w!==-1&&this.notifications.splice(w,1)},M.prototype.normalizeOptions=function(w,g){return w={type:w},typeof g=="string"?w.message=g:typeof g=="object"&&(w=We(We({},w),g)),w},M.prototype.registerTypes=function(w){var g=(w&&w.types||[]).slice();return D.types.map(function(l){var u=-1;g.forEach(function(d,y){d.type===l.type&&(u=y)});var h=u!==-1?g.splice(u,1)[0]:{};return We(We({},l),h)}).concat(g)},M}();(()=>{"use strict";const Ke=()=>localStorage.getItem("theme"),We=p=>localStorage.setItem("theme",p),ct=()=>{const p=Ke();return p||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},Oe=p=>{p==="auto"?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",p)};Oe(ct());const ne=(p,m=!1)=>{const C=document.querySelector("#bd-theme");if(!C)return;const D=document.querySelector("#bd-theme-text"),v=document.querySelector(".theme-icon-active use"),E=document.querySelector(`[data-bs-theme-value="${p}"]`),M=E.querySelector("svg use").getAttribute("href");document.querySelectorAll("[data-bs-theme-value]").forEach(g=>{g.classList.remove("active"),g.setAttribute("aria-pressed","false")}),E.classList.add("active"),E.setAttribute("aria-pressed","true"),v.setAttribute("href",M);const w=`${D.textContent} (${E.dataset.bsThemeValue})`;C.setAttribute("aria-label",w),m&&C.focus()};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{const p=Ke();p!=="light"&&p!=="dark"&&Oe(ct())}),window.addEventListener("DOMContentLoaded",()=>{ne(ct()),document.querySelectorAll("[data-bs-theme-value]").forEach(p=>{p.addEventListener("click",()=>{const m=p.getAttribute("data-bs-theme-value");We(m),Oe(m),ne(m,!0)})})})})();
