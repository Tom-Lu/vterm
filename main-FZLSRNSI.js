var Em=Object.create;var ta=Object.defineProperty,Im=Object.defineProperties,Mm=Object.getOwnPropertyDescriptor,xm=Object.getOwnPropertyDescriptors,Am=Object.getOwnPropertyNames,Pu=Object.getOwnPropertySymbols,Tm=Object.getPrototypeOf,Bu=Object.prototype.hasOwnProperty,Rm=Object.prototype.propertyIsEnumerable;var Fu=(t,e,n)=>e in t?ta(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H=(t,e)=>{for(var n in e||={})Bu.call(e,n)&&Fu(t,n,e[n]);if(Pu)for(var n of Pu(e))Rm.call(e,n)&&Fu(t,n,e[n]);return t},ge=(t,e)=>Im(t,xm(e));var Vu=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var km=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Am(e))!Bu.call(t,i)&&i!==n&&ta(t,i,{get:()=>e[i],enumerable:!(r=Mm(e,i))||r.enumerable});return t};var ju=(t,e,n)=>(n=t!=null?Em(Tm(t)):{},km(e||!t||!t.__esModule?ta(n,"default",{value:t,enumerable:!0}):n,t));var Pt=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(c){i(c)}},o=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())});var mm=Vu((Zo,Nu)=>{"use strict";(function(t,e){typeof Zo=="object"&&typeof Nu=="object"?Nu.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Zo=="object"?Zo.FitAddon=e():t.FitAddon=e()})(self,()=>(()=>{"use strict";var t={};return(()=>{var e=t;Object.defineProperty(e,"__esModule",{value:!0}),e.FitAddon=void 0,e.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let r=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(r._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,r=n._renderService.dimensions;if(r.css.cell.width===0||r.css.cell.height===0)return;let i=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(s.getPropertyValue("height")),a=Math.max(0,parseInt(s.getPropertyValue("width"))),l=window.getComputedStyle(this._terminal.element),c=o-(parseInt(l.getPropertyValue("padding-top"))+parseInt(l.getPropertyValue("padding-bottom"))),p=a-(parseInt(l.getPropertyValue("padding-right"))+parseInt(l.getPropertyValue("padding-left")))-i;return{cols:Math.max(2,Math.floor(p/r.css.cell.width)),rows:Math.max(1,Math.floor(c/r.css.cell.height))}}}})(),t})())});var _m=Vu((Yo,Lu)=>{"use strict";(function(t,e){if(typeof Yo=="object"&&typeof Lu=="object")Lu.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var n=e();for(var r in n)(typeof Yo=="object"?Yo:t)[r]=n[r]}})(globalThis,()=>(()=>{"use strict";var t={4567:function(i,s,o){var a=this&&this.__decorate||function(d,h,v,C){var S,w=arguments.length,_=w<3?h:C===null?C=Object.getOwnPropertyDescriptor(h,v):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(d,h,v,C);else for(var b=d.length-1;b>=0;b--)(S=d[b])&&(_=(w<3?S(_):w>3?S(h,v,_):S(h,v))||_);return w>3&&_&&Object.defineProperty(h,v,_),_},l=this&&this.__param||function(d,h){return function(v,C){h(v,C,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;let c=o(9042),p=o(9924),m=o(844),y=o(4725),g=o(2585),u=o(3656),f=s.AccessibilityManager=class extends m.Disposable{constructor(d,h,v,C){super(),this._terminal=d,this._coreBrowserService=v,this._renderService=C,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new p.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,u.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,m.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(d){for(let h=0;h<d;h++)this._handleChar(" ")}_handleChar(d){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==d&&(this._charsToAnnounce+=d):this._charsToAnnounce+=d,d===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=c.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(d){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(d)||this._charsToConsume.push(d)}_refreshRows(d,h){this._liveRegionDebouncer.refresh(d,h,this._terminal.rows)}_renderRows(d,h){let v=this._terminal.buffer,C=v.lines.length.toString();for(let S=d;S<=h;S++){let w=v.lines.get(v.ydisp+S),_=[],b=w?.translateToString(!0,void 0,void 0,_)||"",A=(v.ydisp+S+1).toString(),T=this._rowElements[S];T&&(b.length===0?(T.innerText="\xA0",this._rowColumns.set(T,[0,1])):(T.textContent=b,this._rowColumns.set(T,_)),T.setAttribute("aria-posinset",A),T.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(d,h){let v=d.target,C=this._rowElements[h===0?1:this._rowElements.length-2];if(v.getAttribute("aria-posinset")===(h===0?"1":`${this._terminal.buffer.lines.length}`)||d.relatedTarget!==C)return;let S,w;if(h===0?(S=v,w=this._rowElements.pop(),this._rowContainer.removeChild(w)):(S=this._rowElements.shift(),w=v,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),w.removeEventListener("focus",this._bottomBoundaryFocusListener),h===0){let _=this._createAccessibilityTreeNode();this._rowElements.unshift(_),this._rowContainer.insertAdjacentElement("afterbegin",_)}else{let _=this._createAccessibilityTreeNode();this._rowElements.push(_),this._rowContainer.appendChild(_)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(h===0?-1:1),this._rowElements[h===0?1:this._rowElements.length-2].focus(),d.preventDefault(),d.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let d=document.getSelection();if(!d)return;if(d.isCollapsed)return void(this._rowContainer.contains(d.anchorNode)&&this._terminal.clearSelection());if(!d.anchorNode||!d.focusNode)return void console.error("anchorNode and/or focusNode are null");let h={node:d.anchorNode,offset:d.anchorOffset},v={node:d.focusNode,offset:d.focusOffset};if((h.node.compareDocumentPosition(v.node)&Node.DOCUMENT_POSITION_PRECEDING||h.node===v.node&&h.offset>v.offset)&&([h,v]=[v,h]),h.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(h={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(h.node))return;let C=this._rowElements.slice(-1)[0];if(v.node.compareDocumentPosition(C)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(v={node:C,offset:C.textContent?.length??0}),!this._rowContainer.contains(v.node))return;let S=({node:b,offset:A})=>{let T=b instanceof Text?b.parentNode:b,k=parseInt(T?.getAttribute("aria-posinset"),10)-1;if(isNaN(k))return console.warn("row is invalid. Race condition?"),null;let I=this._rowColumns.get(T);if(!I)return console.warn("columns is null. Race condition?"),null;let N=A<I.length?I[A]:I.slice(-1)[0]+1;return N>=this._terminal.cols&&(++k,N=0),{row:k,column:N}},w=S(h),_=S(v);if(w&&_){if(w.row>_.row||w.row===_.row&&w.column>=_.column)throw new Error("invalid range");this._terminal.select(w.column,w.row,(_.row-w.row)*this._terminal.cols-w.column+_.column)}}_handleResize(d){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let h=this._rowContainer.children.length;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);for(;this._rowElements.length>d;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let d=this._coreBrowserService.mainDocument.createElement("div");return d.setAttribute("role","listitem"),d.tabIndex=-1,this._refreshRowDimensions(d),d}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let d=0;d<this._terminal.rows;d++)this._refreshRowDimensions(this._rowElements[d])}}_refreshRowDimensions(d){d.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=f=a([l(1,g.IInstantiationService),l(2,y.ICoreBrowserService),l(3,y.IRenderService)],f)},3614:(i,s)=>{function o(p){return p.replace(/\r?\n/g,"\r")}function a(p,m){return m?"\x1B[200~"+p+"\x1B[201~":p}function l(p,m,y,g){p=a(p=o(p),y.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),y.triggerDataEvent(p,!0),m.value=""}function c(p,m,y){let g=y.getBoundingClientRect(),u=p.clientX-g.left-10,f=p.clientY-g.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${u}px`,m.style.top=`${f}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=o,s.bracketTextForPaste=a,s.copyHandler=function(p,m){p.clipboardData&&p.clipboardData.setData("text/plain",m.selectionText),p.preventDefault()},s.handlePasteEvent=function(p,m,y,g){p.stopPropagation(),p.clipboardData&&l(p.clipboardData.getData("text/plain"),m,y,g)},s.paste=l,s.moveTextAreaUnderMouseCursor=c,s.rightClickHandler=function(p,m,y,g,u){c(p,m,y),u&&g.rightClickSelect(p),m.value=g.selectionText,m.select()}},7239:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;let a=o(1505);s.ColorContrastCache=class{constructor(){this._color=new a.TwoKeyMap,this._css=new a.TwoKeyMap}setCss(l,c,p){this._css.set(l,c,p)}getCss(l,c){return this._css.get(l,c)}setColor(l,c,p){this._color.set(l,c,p)}getColor(l,c){return this._color.get(l,c)}clear(){this._color.clear(),this._css.clear()}}},3656:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(o,a,l,c){o.addEventListener(a,l,c);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(a,l,c))}}}},3551:function(i,s,o){var a=this&&this.__decorate||function(f,d,h,v){var C,S=arguments.length,w=S<3?d:v===null?v=Object.getOwnPropertyDescriptor(d,h):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(f,d,h,v);else for(var _=f.length-1;_>=0;_--)(C=f[_])&&(w=(S<3?C(w):S>3?C(d,h,w):C(d,h))||w);return S>3&&w&&Object.defineProperty(d,h,w),w},l=this&&this.__param||function(f,d){return function(h,v){d(h,v,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier=void 0;let c=o(3656),p=o(8460),m=o(844),y=o(2585),g=o(4725),u=s.Linkifier=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(f,d,h,v,C){super(),this._element=f,this._mouseService=d,this._renderService=h,this._bufferService=v,this._linkProviderService=C,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,c.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,c.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(f){this._lastMouseEvent=f;let d=this._positionFromMouseEvent(f,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;let h=f.composedPath();for(let v=0;v<h.length;v++){let C=h[v];if(C.classList.contains("xterm"))break;if(C.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(f){if(this._activeLine!==f.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(f,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,f)||(this._clearCurrentLink(),this._askForLink(f,!0))}_askForLink(f,d){this._activeProviderReplies&&d||(this._activeProviderReplies?.forEach(v=>{v?.forEach(C=>{C.link.dispose&&C.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=f.y);let h=!1;for(let[v,C]of this._linkProviderService.linkProviders.entries())d?this._activeProviderReplies?.get(v)&&(h=this._checkLinkProviderResult(v,f,h)):C.provideLinks(f.y,S=>{if(this._isMouseOut)return;let w=S?.map(_=>({link:_}));this._activeProviderReplies?.set(v,w),h=this._checkLinkProviderResult(v,f,h),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(f.y,this._activeProviderReplies)})}_removeIntersectingLinks(f,d){let h=new Set;for(let v=0;v<d.size;v++){let C=d.get(v);if(C)for(let S=0;S<C.length;S++){let w=C[S],_=w.link.range.start.y<f?0:w.link.range.start.x,b=w.link.range.end.y>f?this._bufferService.cols:w.link.range.end.x;for(let A=_;A<=b;A++){if(h.has(A)){C.splice(S--,1);break}h.add(A)}}}}_checkLinkProviderResult(f,d,h){if(!this._activeProviderReplies)return h;let v=this._activeProviderReplies.get(f),C=!1;for(let S=0;S<f;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(C=!0);if(!C&&v){let S=v.find(w=>this._linkAtPosition(w.link,d));S&&(h=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!h)for(let S=0;S<this._activeProviderReplies.size;S++){let w=this._activeProviderReplies.get(S)?.find(_=>this._linkAtPosition(_.link,d));if(w){h=!0,this._handleNewLink(w);break}}return h}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(f){if(!this._currentLink)return;let d=this._positionFromMouseEvent(f,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(f,this._currentLink.link.text)}_clearCurrentLink(f,d){this._currentLink&&this._lastMouseEvent&&(!f||!d||this._currentLink.link.range.start.y>=f&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(f){if(!this._lastMouseEvent)return;let d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(f.link,d)&&(this._currentLink=f,this._currentLink.state={decorations:{underline:f.link.decorations===void 0||f.link.decorations.underline,pointerCursor:f.link.decorations===void 0||f.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,f.link,this._lastMouseEvent),f.link.decorations={},Object.defineProperties(f.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:h=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==h&&(this._currentLink.state.decorations.pointerCursor=h,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",h))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:h=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==h&&(this._currentLink.state.decorations.underline=h,this._currentLink.state.isHovered&&this._fireUnderlineEvent(f.link,h))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(h=>{if(!this._currentLink)return;let v=h.start===0?0:h.start+1+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.ydisp+1+h.end;if(this._currentLink.link.range.start.y>=v&&this._currentLink.link.range.end.y<=C&&(this._clearCurrentLink(v,C),this._lastMouseEvent)){let S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(f,d,h){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&f.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(h,d.text)}_fireUnderlineEvent(f,d){let h=f.range,v=this._bufferService.buffer.ydisp,C=this._createLinkUnderlineEvent(h.start.x-1,h.start.y-v-1,h.end.x,h.end.y-v-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(C)}_linkLeave(f,d,h){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&f.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(h,d.text)}_linkAtPosition(f,d){let h=f.range.start.y*this._bufferService.cols+f.range.start.x,v=f.range.end.y*this._bufferService.cols+f.range.end.x,C=d.y*this._bufferService.cols+d.x;return h<=C&&C<=v}_positionFromMouseEvent(f,d,h){let v=h.getCoords(f,d,this._bufferService.cols,this._bufferService.rows);if(v)return{x:v[0],y:v[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(f,d,h,v,C){return{x1:f,y1:d,x2:h,y2:v,cols:this._bufferService.cols,fg:C}}};s.Linkifier=u=a([l(1,g.IMouseService),l(2,g.IRenderService),l(3,y.IBufferService),l(4,g.ILinkProviderService)],u)},9042:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(i,s,o){var a=this&&this.__decorate||function(g,u,f,d){var h,v=arguments.length,C=v<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,f):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(g,u,f,d);else for(var S=g.length-1;S>=0;S--)(h=g[S])&&(C=(v<3?h(C):v>3?h(u,f,C):h(u,f))||C);return v>3&&C&&Object.defineProperty(u,f,C),C},l=this&&this.__param||function(g,u){return function(f,d){u(f,d,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;let c=o(511),p=o(2585),m=s.OscLinkProvider=class{constructor(g,u,f){this._bufferService=g,this._optionsService=u,this._oscLinkService=f}provideLinks(g,u){let f=this._bufferService.buffer.lines.get(g-1);if(!f)return void u(void 0);let d=[],h=this._optionsService.rawOptions.linkHandler,v=new c.CellData,C=f.getTrimmedLength(),S=-1,w=-1,_=!1;for(let b=0;b<C;b++)if(w!==-1||f.hasContent(b)){if(f.loadCell(b,v),v.hasExtendedAttrs()&&v.extended.urlId){if(w===-1){w=b,S=v.extended.urlId;continue}_=v.extended.urlId!==S}else w!==-1&&(_=!0);if(_||w!==-1&&b===C-1){let A=this._oscLinkService.getLinkData(S)?.uri;if(A){let T={start:{x:w+1,y:g},end:{x:b+(_||b!==C-1?0:1),y:g}},k=!1;if(!h?.allowNonHttpProtocols)try{let I=new URL(A);["http:","https:"].includes(I.protocol)||(k=!0)}catch{k=!0}k||d.push({text:A,range:T,activate:(I,N)=>h?h.activate(I,N,T):y(0,N),hover:(I,N)=>h?.hover?.(I,N,T),leave:(I,N)=>h?.leave?.(I,N,T)})}_=!1,v.hasExtendedAttrs()&&v.extended.urlId?(w=b,S=v.extended.urlId):(w=-1,S=-1)}}u(d)}};function y(g,u){if(confirm(`Do you want to navigate to ${u}?

WARNING: This link could potentially be dangerous`)){let f=window.open();if(f){try{f.opener=null}catch{}f.location.href=u}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=m=a([l(0,p.IBufferService),l(1,p.IOptionsService),l(2,p.IOscLinkService)],m)},6193:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(o,a){this._renderCallback=o,this._coreBrowserService=a,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,a,l){this._rowCount=l,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;let a=o(3614),l=o(3656),c=o(3551),p=o(9042),m=o(3730),y=o(1680),g=o(3107),u=o(5744),f=o(2950),d=o(1296),h=o(428),v=o(4269),C=o(5114),S=o(8934),w=o(3230),_=o(9312),b=o(4725),A=o(6731),T=o(8055),k=o(8969),I=o(8460),N=o(844),F=o(6114),j=o(8437),G=o(2584),V=o(7399),D=o(5941),M=o(9074),x=o(2585),R=o(5435),P=o(4567),U=o(779);class K extends k.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(O={}){super(O),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new I.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new I.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new I.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new I.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new I.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new I.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new I.EventEmitter),this._onBlur=this.register(new I.EventEmitter),this._onA11yCharEmitter=this.register(new I.EventEmitter),this._onA11yTabEmitter=this.register(new I.EventEmitter),this._onWillOpen=this.register(new I.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(x.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(U.LinkProviderService),this._instantiationService.setService(b.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((E,L)=>this.refresh(E,L))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(E=>this._reportWindowsOptions(E))),this.register(this._inputHandler.onColor(E=>this._handleColorEvent(E))),this.register((0,I.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,I.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(E=>this._afterResize(E.cols,E.rows))),this.register((0,N.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(O){if(this._themeService)for(let E of O){let L,B="";switch(E.index){case 256:L="foreground",B="10";break;case 257:L="background",B="11";break;case 258:L="cursor",B="12";break;default:L="ansi",B="4;"+E.index}switch(E.type){case 0:let W=T.color.toColorRGB(L==="ansi"?this._themeService.colors.ansi[E.index]:this._themeService.colors[L]);this.coreService.triggerDataEvent(`${G.C0.ESC}]${B};${(0,D.toRgbString)(W)}${G.C1_ESCAPED.ST}`);break;case 1:if(L==="ansi")this._themeService.modifyColors($=>$.ansi[E.index]=T.channels.toColor(...E.color));else{let $=L;this._themeService.modifyColors(fe=>fe[$]=T.channels.toColor(...E.color))}break;case 2:this._themeService.restoreColor(E.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(O){O?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(P.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(G.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(G.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let O=this.buffer.ybase+this.buffer.y,E=this.buffer.lines.get(O);if(!E)return;let L=Math.min(this.buffer.x,this.cols-1),B=this._renderService.dimensions.css.cell.height,W=E.getWidth(L),$=this._renderService.dimensions.css.cell.width*W,fe=this.buffer.y*this._renderService.dimensions.css.cell.height,De=L*this._renderService.dimensions.css.cell.width;this.textarea.style.left=De+"px",this.textarea.style.top=fe+"px",this.textarea.style.width=$+"px",this.textarea.style.height=B+"px",this.textarea.style.lineHeight=B+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,l.addDisposableDomListener)(this.element,"copy",E=>{this.hasSelection()&&(0,a.copyHandler)(E,this._selectionService)}));let O=E=>(0,a.handlePasteEvent)(E,this.textarea,this.coreService,this.optionsService);this.register((0,l.addDisposableDomListener)(this.textarea,"paste",O)),this.register((0,l.addDisposableDomListener)(this.element,"paste",O)),F.isFirefox?this.register((0,l.addDisposableDomListener)(this.element,"mousedown",E=>{E.button===2&&(0,a.rightClickHandler)(E,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,l.addDisposableDomListener)(this.element,"contextmenu",E=>{(0,a.rightClickHandler)(E,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,l.addDisposableDomListener)(this.element,"auxclick",E=>{E.button===1&&(0,a.moveTextAreaUnderMouseCursor)(E,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,l.addDisposableDomListener)(this.textarea,"keyup",O=>this._keyUp(O),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keydown",O=>this._keyDown(O),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keypress",O=>this._keyPress(O),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionupdate",O=>this._compositionHelper.compositionupdate(O))),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,l.addDisposableDomListener)(this.textarea,"input",O=>this._inputEvent(O),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(O){if(!O)throw new Error("Terminal requires a parent element.");if(O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=O.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),O.appendChild(this.element);let E=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),E.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,l.addDisposableDomListener)(this.screenElement,"mousemove",L=>this.updateCursorStyle(L))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),E.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,O.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,l.addDisposableDomListener)(this.textarea,"focus",L=>this._handleTextAreaFocus(L))),this.register((0,l.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(A.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(v.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(w.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(L=>this._onRender.fire(L))),this.onResize(L=>this._renderService.resize(L.cols,L.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(f.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(c.Linkifier,this.screenElement)),this.element.appendChild(E);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(y.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(L=>this.scrollLines(L.amount,L.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(_.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(L=>this.scrollLines(L.amount,L.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(L=>this._renderService.handleSelectionChanged(L.start,L.end,L.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(L=>{this.textarea.value=L,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(L=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,l.addDisposableDomListener)(this.element,"mousedown",L=>this._selectionService.handleMouseDown(L))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(P.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",L=>this._handleScreenReaderModeOptionChange(L))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(u.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",L=>{!this._overviewRulerRenderer&&L&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(u.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(d.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let O=this,E=this.element;function L($){let fe=O._mouseService.getMouseReportCoords($,O.screenElement);if(!fe)return!1;let De,Ee;switch($.overrideType||$.type){case"mousemove":Ee=32,$.buttons===void 0?(De=3,$.button!==void 0&&(De=$.button<3?$.button:3)):De=1&$.buttons?0:4&$.buttons?1:2&$.buttons?2:3;break;case"mouseup":Ee=0,De=$.button<3?$.button:3;break;case"mousedown":Ee=1,De=$.button<3?$.button:3;break;case"wheel":if(O._customWheelEventHandler&&O._customWheelEventHandler($)===!1||O.viewport.getLinesScrolled($)===0)return!1;Ee=$.deltaY<0?0:1,De=4;break;default:return!1}return!(Ee===void 0||De===void 0||De>4)&&O.coreMouseService.triggerMouseEvent({col:fe.col,row:fe.row,x:fe.x,y:fe.y,button:De,action:Ee,ctrl:$.ctrlKey,alt:$.altKey,shift:$.shiftKey})}let B={mouseup:null,wheel:null,mousedrag:null,mousemove:null},W={mouseup:$=>(L($),$.buttons||(this._document.removeEventListener("mouseup",B.mouseup),B.mousedrag&&this._document.removeEventListener("mousemove",B.mousedrag)),this.cancel($)),wheel:$=>(L($),this.cancel($,!0)),mousedrag:$=>{$.buttons&&L($)},mousemove:$=>{$.buttons||L($)}};this.register(this.coreMouseService.onProtocolChange($=>{$?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents($)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&$?B.mousemove||(E.addEventListener("mousemove",W.mousemove),B.mousemove=W.mousemove):(E.removeEventListener("mousemove",B.mousemove),B.mousemove=null),16&$?B.wheel||(E.addEventListener("wheel",W.wheel,{passive:!1}),B.wheel=W.wheel):(E.removeEventListener("wheel",B.wheel),B.wheel=null),2&$?B.mouseup||(B.mouseup=W.mouseup):(this._document.removeEventListener("mouseup",B.mouseup),B.mouseup=null),4&$?B.mousedrag||(B.mousedrag=W.mousedrag):(this._document.removeEventListener("mousemove",B.mousedrag),B.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,l.addDisposableDomListener)(E,"mousedown",$=>{if($.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection($))return L($),B.mouseup&&this._document.addEventListener("mouseup",B.mouseup),B.mousedrag&&this._document.addEventListener("mousemove",B.mousedrag),this.cancel($)})),this.register((0,l.addDisposableDomListener)(E,"wheel",$=>{if(!B.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler($)===!1)return!1;if(!this.buffer.hasScrollback){let fe=this.viewport.getLinesScrolled($);if(fe===0)return;let De=G.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+($.deltaY<0?"A":"B"),Ee="";for(let Qe=0;Qe<Math.abs(fe);Qe++)Ee+=De;return this.coreService.triggerDataEvent(Ee,!0),this.cancel($,!0)}return this.viewport.handleWheel($)?this.cancel($):void 0}},{passive:!1})),this.register((0,l.addDisposableDomListener)(E,"touchstart",$=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart($),this.cancel($)},{passive:!0})),this.register((0,l.addDisposableDomListener)(E,"touchmove",$=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove($)?void 0:this.cancel($)},{passive:!1}))}refresh(O,E){this._renderService?.refreshRows(O,E)}updateCursorStyle(O){this._selectionService?.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(O,E,L=0){L===1?(super.scrollLines(O,E,L),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(O)}paste(O){(0,a.paste)(O,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(O){this._customKeyEventHandler=O}attachCustomWheelEventHandler(O){this._customWheelEventHandler=O}registerLinkProvider(O){return this._linkProviderService.registerLinkProvider(O)}registerCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let E=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),E}deregisterCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(O){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)}registerDecoration(O){return this._decorationService.registerDecoration(O)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(O,E,L){this._selectionService.setSelection(O,E,L)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(O,E){this._selectionService?.selectLines(O,E)}_keyDown(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;let E=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!E&&!this._compositionHelper.keydown(O))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;E||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let L=(0,V.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),L.type===3||L.type===2){let B=this.rows-1;return this.scrollLines(L.type===2?-B:B),this.cancel(O,!0)}return L.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(L.cancel&&this.cancel(O,!0),!L.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(L.key!==G.C0.ETX&&L.key!==G.C0.CR||(this.textarea.value=""),this._onKey.fire({key:L.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(L.key,!0),!this.optionsService.rawOptions.screenReaderMode||O.altKey||O.ctrlKey?this.cancel(O,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(O,E){let L=O.isMac&&!this.options.macOptionIsMeta&&E.altKey&&!E.ctrlKey&&!E.metaKey||O.isWindows&&E.altKey&&E.ctrlKey&&!E.metaKey||O.isWindows&&E.getModifierState("AltGraph");return E.type==="keypress"?L:L&&(!E.keyCode||E.keyCode>47)}_keyUp(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(E){return E.keyCode===16||E.keyCode===17||E.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)}_keyPress(O){let E;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)E=O.charCode;else if(O.which===null||O.which===void 0)E=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;E=O.which}return!(!E||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(E=String.fromCharCode(E),this._onKey.fire({key:E,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(E,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let E=O.data;return this.coreService.triggerDataEvent(E,!0),this.cancel(O),!0}return!1}resize(O,E){O!==this.cols||E!==this.rows?super.resize(O,E):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(O,E){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(j.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let O=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=O,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(G.C0.ESC+"[I"):this.coreService.triggerDataEvent(G.C0.ESC+"[O")}_reportWindowsOptions(O){if(this._renderService)switch(O){case R.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let E=this._renderService.dimensions.css.canvas.width.toFixed(0),L=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${G.C0.ESC}[4;${L};${E}t`);break;case R.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let B=this._renderService.dimensions.css.cell.width.toFixed(0),W=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${G.C0.ESC}[6;${W};${B}t`)}}cancel(O,E){if(this.options.cancelEvents||E)return O.preventDefault(),O.stopPropagation(),!1}}s.Terminal=K},9924:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(o,a=1e3){this._renderCallback=o,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,a,l){this._rowCount=l,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;let c=Date.now();if(c-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=c,this._innerRefresh();else if(!this._additionalRefreshRequested){let p=c-this._lastRefreshMs,m=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a)}}},1680:function(i,s,o){var a=this&&this.__decorate||function(f,d,h,v){var C,S=arguments.length,w=S<3?d:v===null?v=Object.getOwnPropertyDescriptor(d,h):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(f,d,h,v);else for(var _=f.length-1;_>=0;_--)(C=f[_])&&(w=(S<3?C(w):S>3?C(d,h,w):C(d,h))||w);return S>3&&w&&Object.defineProperty(d,h,w),w},l=this&&this.__param||function(f,d){return function(h,v){d(h,v,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;let c=o(3656),p=o(4725),m=o(8460),y=o(844),g=o(2585),u=s.Viewport=class extends y.Disposable{constructor(f,d,h,v,C,S,w,_){super(),this._viewportElement=f,this._scrollArea=d,this._bufferService=h,this._optionsService=v,this._charSizeService=C,this._renderService=S,this._coreBrowserService=w,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,c.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(_.colors),this.register(_.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(f){this._viewportElement.style.backgroundColor=f.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(f){if(f)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let d=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==d&&(this._lastRecordedBufferHeight=d,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let f=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==f&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=f),this._refreshAnimationFrame=null}syncScrollArea(f=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(f);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(f)}_handleScroll(f){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let d=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let f=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(f*(this._smoothScrollState.target-this._smoothScrollState.origin)),f<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(f,d){let h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(d<0&&this._viewportElement.scrollTop!==0||d>0&&h<this._lastRecordedBufferHeight)||(f.cancelable&&f.preventDefault(),!1)}handleWheel(f){let d=this._getPixelsScrolled(f);return d!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+d:this._smoothScrollState.target+=d,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=d,this._bubbleScroll(f,d))}scrollLines(f){if(f!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let d=f*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+d,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:f,suppressScrollEvent:!1})}_getPixelsScrolled(f){if(f.deltaY===0||f.shiftKey)return 0;let d=this._applyScrollModifier(f.deltaY,f);return f.deltaMode===WheelEvent.DOM_DELTA_LINE?d*=this._currentRowHeight:f.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._currentRowHeight*this._bufferService.rows),d}getBufferElements(f,d){let h,v="",C=[],S=d??this._bufferService.buffer.lines.length,w=this._bufferService.buffer.lines;for(let _=f;_<S;_++){let b=w.get(_);if(!b)continue;let A=w.get(_+1)?.isWrapped;if(v+=b.translateToString(!A),!A||_===w.length-1){let T=document.createElement("div");T.textContent=v,C.push(T),v.length>0&&(h=T),v=""}}return{bufferElements:C,cursorElement:h}}getLinesScrolled(f){if(f.deltaY===0||f.shiftKey)return 0;let d=this._applyScrollModifier(f.deltaY,f);return f.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(d/=this._currentRowHeight+0,this._wheelPartialScroll+=d,d=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):f.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._bufferService.rows),d}_applyScrollModifier(f,d){let h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&d.altKey||h==="ctrl"&&d.ctrlKey||h==="shift"&&d.shiftKey?f*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:f*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(f){this._lastTouchY=f.touches[0].pageY}handleTouchMove(f){let d=this._lastTouchY-f.touches[0].pageY;return this._lastTouchY=f.touches[0].pageY,d!==0&&(this._viewportElement.scrollTop+=d,this._bubbleScroll(f,d))}};s.Viewport=u=a([l(2,g.IBufferService),l(3,g.IOptionsService),l(4,p.ICharSizeService),l(5,p.IRenderService),l(6,p.ICoreBrowserService),l(7,p.IThemeService)],u)},3107:function(i,s,o){var a=this&&this.__decorate||function(g,u,f,d){var h,v=arguments.length,C=v<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,f):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(g,u,f,d);else for(var S=g.length-1;S>=0;S--)(h=g[S])&&(C=(v<3?h(C):v>3?h(u,f,C):h(u,f))||C);return v>3&&C&&Object.defineProperty(u,f,C),C},l=this&&this.__param||function(g,u){return function(f,d){u(f,d,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;let c=o(4725),p=o(844),m=o(2585),y=s.BufferDecorationRenderer=class extends p.Disposable{constructor(g,u,f,d,h){super(),this._screenElement=g,this._bufferService=u,this._coreBrowserService=f,this._decorationService=d,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(v=>this._removeDecoration(v))),this.register((0,p.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){let u=this._coreBrowserService.mainDocument.createElement("div");u.classList.add("xterm-decoration"),u.classList.toggle("xterm-decoration-top-layer",g?.options?.layer==="top"),u.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,u.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",u.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",u.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let f=g.options.x??0;return f&&f>this._bufferService.cols&&(u.style.display="none"),this._refreshXPosition(g,u),u}_refreshStyle(g){let u=g.marker.line-this._bufferService.buffers.active.ydisp;if(u<0||u>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let f=this._decorationElements.get(g);f||(f=this._createElement(g),g.element=f,this._decorationElements.set(g,f),this._container.appendChild(f),g.onDispose(()=>{this._decorationElements.delete(g),f.remove()})),f.style.top=u*this._renderService.dimensions.css.cell.height+"px",f.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(f)}}_refreshXPosition(g,u=g.element){if(!u)return;let f=g.options.x??0;(g.options.anchor||"left")==="right"?u.style.right=f?f*this._renderService.dimensions.css.cell.width+"px":"":u.style.left=f?f*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){this._decorationElements.get(g)?.remove(),this._decorationElements.delete(g),g.dispose()}};s.BufferDecorationRenderer=y=a([l(1,m.IBufferService),l(2,c.ICoreBrowserService),l(3,m.IDecorationService),l(4,c.IRenderService)],y)},5871:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(let a of this._zones)if(a.color===o.options.overviewRulerOptions.color&&a.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,o.marker.line))return;if(this._lineAdjacentToZone(a,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(a,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,a){return a>=o.startBufferLine&&a<=o.endBufferLine}_lineAdjacentToZone(o,a,l){return a>=o.startBufferLine-this._linePadding[l||"full"]&&a<=o.endBufferLine+this._linePadding[l||"full"]}_addLineToZone(o,a){o.startBufferLine=Math.min(o.startBufferLine,a),o.endBufferLine=Math.max(o.endBufferLine,a)}}},5744:function(i,s,o){var a=this&&this.__decorate||function(h,v,C,S){var w,_=arguments.length,b=_<3?v:S===null?S=Object.getOwnPropertyDescriptor(v,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(h,v,C,S);else for(var A=h.length-1;A>=0;A--)(w=h[A])&&(b=(_<3?w(b):_>3?w(v,C,b):w(v,C))||b);return _>3&&b&&Object.defineProperty(v,C,b),b},l=this&&this.__param||function(h,v){return function(C,S){v(C,S,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;let c=o(5871),p=o(4725),m=o(844),y=o(2585),g={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0},f={full:0,left:0,center:0,right:0},d=s.OverviewRulerRenderer=class extends m.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(h,v,C,S,w,_,b){super(),this._viewportElement=h,this._screenElement=v,this._bufferService=C,this._decorationService=S,this._renderService=w,this._optionsService=_,this._coreBrowserService=b,this._colorZoneStore=new c.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);let A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let h=Math.floor(this._canvas.width/3),v=Math.ceil(this._canvas.width/3);u.full=this._canvas.width,u.left=h,u.center=v,u.right=h,this._refreshDrawHeightConstants(),f.full=0,f.left=0,f.center=u.left,f.right=u.left+u.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowserService.dpr);let h=this._canvas.height/this._bufferService.buffer.lines.length,v=Math.round(Math.max(Math.min(h,12),6)*this._coreBrowserService.dpr);g.left=v,g.center=v,g.right=v}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let v of this._decorationService.decorations)this._colorZoneStore.addDecoration(v);this._ctx.lineWidth=1;let h=this._colorZoneStore.zones;for(let v of h)v.position!=="full"&&this._renderColorZone(v);for(let v of h)v.position==="full"&&this._renderColorZone(v);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(h){this._ctx.fillStyle=h.color,this._ctx.fillRect(f[h.position||"full"],Math.round((this._canvas.height-1)*(h.startBufferLine/this._bufferService.buffers.active.lines.length)-g[h.position||"full"]/2),u[h.position||"full"],Math.round((this._canvas.height-1)*((h.endBufferLine-h.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[h.position||"full"]))}_queueRefresh(h,v){this._shouldUpdateDimensions=h||this._shouldUpdateDimensions,this._shouldUpdateAnchor=v||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=d=a([l(2,y.IBufferService),l(3,y.IDecorationService),l(4,p.IRenderService),l(5,y.IOptionsService),l(6,p.ICoreBrowserService)],d)},2950:function(i,s,o){var a=this&&this.__decorate||function(g,u,f,d){var h,v=arguments.length,C=v<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,f):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(g,u,f,d);else for(var S=g.length-1;S>=0;S--)(h=g[S])&&(C=(v<3?h(C):v>3?h(u,f,C):h(u,f))||C);return v>3&&C&&Object.defineProperty(u,f,C),C},l=this&&this.__param||function(g,u){return function(f,d){u(f,d,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;let c=o(4725),p=o(2585),m=o(2584),y=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,u,f,d,h,v){this._textarea=g,this._compositionView=u,this._bufferService=f,this._optionsService=d,this._coreService=h,this._renderService=v,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){let u={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let f;this._isSendingComposition=!1,u.start+=this._dataAlreadySent.length,f=this._isComposing?this._textarea.value.substring(u.start,u.end):this._textarea.value.substring(u.start),f.length>0&&this._coreService.triggerDataEvent(f,!0)}},0)}else{this._isSendingComposition=!1;let u=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(u,!0)}}_handleAnyTextareaChanges(){let g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let u=this._textarea.value,f=u.replace(g,"");this._dataAlreadySent=f,u.length>g.length?this._coreService.triggerDataEvent(f,!0):u.length<g.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):u.length===g.length&&u!==g&&this._coreService.triggerDataEvent(u,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let u=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),f=this._renderService.dimensions.css.cell.height,d=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=u*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=d+"px",this._compositionView.style.height=f+"px",this._compositionView.style.lineHeight=f+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let v=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=d+"px",this._textarea.style.width=Math.max(v.width,1)+"px",this._textarea.style.height=Math.max(v.height,1)+"px",this._textarea.style.lineHeight=v.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=y=a([l(2,p.IBufferService),l(3,p.IOptionsService),l(4,p.ICoreService),l(5,c.IRenderService)],y)},9806:(i,s)=>{function o(a,l,c){let p=c.getBoundingClientRect(),m=a.getComputedStyle(c),y=parseInt(m.getPropertyValue("padding-left")),g=parseInt(m.getPropertyValue("padding-top"));return[l.clientX-p.left-y,l.clientY-p.top-g]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=o,s.getCoords=function(a,l,c,p,m,y,g,u,f){if(!y)return;let d=o(a,l,c);return d?(d[0]=Math.ceil((d[0]+(f?g/2:0))/g),d[1]=Math.ceil(d[1]/u),d[0]=Math.min(Math.max(d[0],1),p+(f?1:0)),d[1]=Math.min(Math.max(d[1],1),m),d):void 0}},9504:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;let a=o(2584);function l(u,f,d,h){let v=u-c(u,d),C=f-c(f,d),S=Math.abs(v-C)-function(w,_,b){let A=0,T=w-c(w,b),k=_-c(_,b);for(let I=0;I<Math.abs(T-k);I++){let N=p(w,_)==="A"?-1:1;b.buffer.lines.get(T+N*I)?.isWrapped&&A++}return A}(u,f,d);return g(S,y(p(u,f),h))}function c(u,f){let d=0,h=f.buffer.lines.get(u),v=h?.isWrapped;for(;v&&u>=0&&u<f.rows;)d++,h=f.buffer.lines.get(--u),v=h?.isWrapped;return d}function p(u,f){return u>f?"A":"B"}function m(u,f,d,h,v,C){let S=u,w=f,_="";for(;S!==d||w!==h;)S+=v?1:-1,v&&S>C.cols-1?(_+=C.buffer.translateBufferLineToString(w,!1,u,S),S=0,u=0,w++):!v&&S<0&&(_+=C.buffer.translateBufferLineToString(w,!1,0,u+1),S=C.cols-1,u=S,w--);return _+C.buffer.translateBufferLineToString(w,!1,u,S)}function y(u,f){let d=f?"O":"[";return a.C0.ESC+d+u}function g(u,f){u=Math.floor(u);let d="";for(let h=0;h<u;h++)d+=f;return d}s.moveToCellSequence=function(u,f,d,h){let v=d.buffer.x,C=d.buffer.y;if(!d.buffer.hasScrollback)return function(_,b,A,T,k,I){return l(b,T,k,I).length===0?"":g(m(_,b,_,b-c(b,k),!1,k).length,y("D",I))}(v,C,0,f,d,h)+l(C,f,d,h)+function(_,b,A,T,k,I){let N;N=l(b,T,k,I).length>0?T-c(T,k):b;let F=T,j=function(G,V,D,M,x,R){let P;return P=l(D,M,x,R).length>0?M-c(M,x):V,G<D&&P<=M||G>=D&&P<M?"C":"D"}(_,b,A,T,k,I);return g(m(_,N,A,F,j==="C",k).length,y(j,I))}(v,C,u,f,d,h);let S;if(C===f)return S=v>u?"D":"C",g(Math.abs(v-u),y(S,h));S=C>f?"D":"C";let w=Math.abs(C-f);return g(function(_,b){return b.cols-_}(C>f?u:v,d)+(w-1)*d.cols+1+((C>f?v:u)-1),y(S,h))}},1296:function(i,s,o){var a=this&&this.__decorate||function(I,N,F,j){var G,V=arguments.length,D=V<3?N:j===null?j=Object.getOwnPropertyDescriptor(N,F):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(I,N,F,j);else for(var M=I.length-1;M>=0;M--)(G=I[M])&&(D=(V<3?G(D):V>3?G(N,F,D):G(N,F))||D);return V>3&&D&&Object.defineProperty(N,F,D),D},l=this&&this.__param||function(I,N){return function(F,j){N(F,j,I)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;let c=o(3787),p=o(2550),m=o(2223),y=o(6171),g=o(6052),u=o(4725),f=o(8055),d=o(8460),h=o(844),v=o(2585),C="xterm-dom-renderer-owner-",S="xterm-rows",w="xterm-fg-",_="xterm-bg-",b="xterm-focus",A="xterm-selection",T=1,k=s.DomRenderer=class extends h.Disposable{constructor(I,N,F,j,G,V,D,M,x,R,P,U,K){super(),this._terminal=I,this._document=N,this._element=F,this._screenElement=j,this._viewportElement=G,this._helperContainer=V,this._linkifier2=D,this._charSizeService=x,this._optionsService=R,this._bufferService=P,this._coreBrowserService=U,this._themeService=K,this._terminalClass=T++,this._rowElements=[],this._selectionRenderModel=(0,g.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(A),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,y.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(Q=>this._injectCss(Q))),this._injectCss(this._themeService.colors),this._rowFactory=M.createInstance(c.DomRendererRowFactory,document),this._element.classList.add(C+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(Q=>this._handleLinkHover(Q))),this.register(this._linkifier2.onHideLinkUnderline(Q=>this._handleLinkLeave(Q))),this.register((0,h.toDisposable)(()=>{this._element.classList.remove(C+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let I=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*I,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*I),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/I),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/I),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let F of this._rowElements)F.style.width=`${this.dimensions.css.canvas.width}px`,F.style.height=`${this.dimensions.css.cell.height}px`,F.style.lineHeight=`${this.dimensions.css.cell.height}px`,F.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let N=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=N,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(I){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let N=`${this._terminalSelector} .${S} { color: ${I.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;N+=`${this._terminalSelector} .${S} .xterm-dim { color: ${f.color.multiplyOpacity(I.foreground,.5).css};}`,N+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let F=`blink_underline_${this._terminalClass}`,j=`blink_bar_${this._terminalClass}`,G=`blink_block_${this._terminalClass}`;N+=`@keyframes ${F} { 50% {  border-bottom-style: hidden; }}`,N+=`@keyframes ${j} { 50% {  box-shadow: none; }}`,N+=`@keyframes ${G} { 0% {  background-color: ${I.cursor.css};  color: ${I.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${I.cursor.css}; }}`,N+=`${this._terminalSelector} .${S}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${F} 1s step-end infinite;}${this._terminalSelector} .${S}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${j} 1s step-end infinite;}${this._terminalSelector} .${S}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${G} 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${I.cursor.css}; color: ${I.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${I.cursor.css} !important; color: ${I.cursorAccent.css} !important;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${I.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${I.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${I.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,N+=`${this._terminalSelector} .${A} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${A} div { position: absolute; background-color: ${I.selectionBackgroundOpaque.css};}${this._terminalSelector} .${A} div { position: absolute; background-color: ${I.selectionInactiveBackgroundOpaque.css};}`;for(let[V,D]of I.ansi.entries())N+=`${this._terminalSelector} .${w}${V} { color: ${D.css}; }${this._terminalSelector} .${w}${V}.xterm-dim { color: ${f.color.multiplyOpacity(D,.5).css}; }${this._terminalSelector} .${_}${V} { background-color: ${D.css}; }`;N+=`${this._terminalSelector} .${w}${m.INVERTED_DEFAULT_COLOR} { color: ${f.color.opaque(I.background).css}; }${this._terminalSelector} .${w}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${f.color.multiplyOpacity(f.color.opaque(I.background),.5).css}; }${this._terminalSelector} .${_}${m.INVERTED_DEFAULT_COLOR} { background-color: ${I.foreground.css}; }`,this._themeStyleElement.textContent=N}_setDefaultSpacing(){let I=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${I}px`,this._rowFactory.defaultSpacing=I}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(I,N){for(let F=this._rowElements.length;F<=N;F++){let j=this._document.createElement("div");this._rowContainer.appendChild(j),this._rowElements.push(j)}for(;this._rowElements.length>N;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(I,N){this._refreshRowElements(I,N),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(b),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(b),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(I,N,F){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(I,N,F),this.renderRows(0,this._bufferService.rows-1),!I||!N)return;this._selectionRenderModel.update(this._terminal,I,N,F);let j=this._selectionRenderModel.viewportStartRow,G=this._selectionRenderModel.viewportEndRow,V=this._selectionRenderModel.viewportCappedStartRow,D=this._selectionRenderModel.viewportCappedEndRow;if(V>=this._bufferService.rows||D<0)return;let M=this._document.createDocumentFragment();if(F){let x=I[0]>N[0];M.appendChild(this._createSelectionElement(V,x?N[0]:I[0],x?I[0]:N[0],D-V+1))}else{let x=j===V?I[0]:0,R=V===G?N[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(V,x,R));let P=D-V-1;if(M.appendChild(this._createSelectionElement(V+1,0,this._bufferService.cols,P)),V!==D){let U=G===D?N[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(D,0,U))}}this._selectionContainer.appendChild(M)}_createSelectionElement(I,N,F,j=1){let G=this._document.createElement("div"),V=N*this.dimensions.css.cell.width,D=this.dimensions.css.cell.width*(F-N);return V+D>this.dimensions.css.canvas.width&&(D=this.dimensions.css.canvas.width-V),G.style.height=j*this.dimensions.css.cell.height+"px",G.style.top=I*this.dimensions.css.cell.height+"px",G.style.left=`${V}px`,G.style.width=`${D}px`,G}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let I of this._rowElements)I.replaceChildren()}renderRows(I,N){let F=this._bufferService.buffer,j=F.ybase+F.y,G=Math.min(F.x,this._bufferService.cols-1),V=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,M=this._optionsService.rawOptions.cursorInactiveStyle;for(let x=I;x<=N;x++){let R=x+F.ydisp,P=this._rowElements[x],U=F.lines.get(R);if(!P||!U)break;P.replaceChildren(...this._rowFactory.createRow(U,R,R===j,D,M,G,V,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${C}${this._terminalClass}`}_handleLinkHover(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!0)}_handleLinkLeave(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!1)}_setCellUnderline(I,N,F,j,G,V){F<0&&(I=0),j<0&&(N=0);let D=this._bufferService.rows-1;F=Math.max(Math.min(F,D),0),j=Math.max(Math.min(j,D),0),G=Math.min(G,this._bufferService.cols);let M=this._bufferService.buffer,x=M.ybase+M.y,R=Math.min(M.x,G-1),P=this._optionsService.rawOptions.cursorBlink,U=this._optionsService.rawOptions.cursorStyle,K=this._optionsService.rawOptions.cursorInactiveStyle;for(let Q=F;Q<=j;++Q){let O=Q+M.ydisp,E=this._rowElements[Q],L=M.lines.get(O);if(!E||!L)break;E.replaceChildren(...this._rowFactory.createRow(L,O,O===x,U,K,R,P,this.dimensions.css.cell.width,this._widthCache,V?Q===F?I:0:-1,V?(Q===j?N:G)-1:-1))}}};s.DomRenderer=k=a([l(7,v.IInstantiationService),l(8,u.ICharSizeService),l(9,v.IOptionsService),l(10,v.IBufferService),l(11,u.ICoreBrowserService),l(12,u.IThemeService)],k)},3787:function(i,s,o){var a=this&&this.__decorate||function(S,w,_,b){var A,T=arguments.length,k=T<3?w:b===null?b=Object.getOwnPropertyDescriptor(w,_):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(S,w,_,b);else for(var I=S.length-1;I>=0;I--)(A=S[I])&&(k=(T<3?A(k):T>3?A(w,_,k):A(w,_))||k);return T>3&&k&&Object.defineProperty(w,_,k),k},l=this&&this.__param||function(S,w){return function(_,b){w(_,b,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;let c=o(2223),p=o(643),m=o(511),y=o(2585),g=o(8055),u=o(4725),f=o(4269),d=o(6171),h=o(3734),v=s.DomRendererRowFactory=class{constructor(S,w,_,b,A,T,k){this._document=S,this._characterJoinerService=w,this._optionsService=_,this._coreBrowserService=b,this._coreService=A,this._decorationService=T,this._themeService=k,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,w,_){this._selectionStart=S,this._selectionEnd=w,this._columnSelectMode=_}createRow(S,w,_,b,A,T,k,I,N,F,j){let G=[],V=this._characterJoinerService.getJoinedCharacters(w),D=this._themeService.colors,M,x=S.getNoBgTrimmedLength();_&&x<T+1&&(x=T+1);let R=0,P="",U=0,K=0,Q=0,O=!1,E=0,L=!1,B=0,W=[],$=F!==-1&&j!==-1;for(let fe=0;fe<x;fe++){S.loadCell(fe,this._workCell);let De=this._workCell.getWidth();if(De===0)continue;let Ee=!1,Qe=fe,te=this._workCell;if(V.length>0&&fe===V[0][0]){Ee=!0;let be=V.shift();te=new f.JoinedCellData(this._workCell,S.translateToString(!0,be[0],be[1]),be[1]-be[0]),Qe=be[1]-1,De=te.getWidth()}let $r=this._isCellInSelection(fe,w),Qo=_&&fe===T,Xo=$&&fe>=F&&fe<=j,Jo=!1;this._decorationService.forEachDecorationAtCell(fe,w,void 0,be=>{Jo=!0});let Wi=te.getChars()||p.WHITESPACE_CELL_CHAR;if(Wi===" "&&(te.isUnderline()||te.isOverline())&&(Wi="\xA0"),B=De*I-N.get(Wi,te.isBold(),te.isItalic()),M){if(R&&($r&&L||!$r&&!L&&te.bg===U)&&($r&&L&&D.selectionForeground||te.fg===K)&&te.extended.ext===Q&&Xo===O&&B===E&&!Qo&&!Ee&&!Jo){te.isInvisible()?P+=p.WHITESPACE_CELL_CHAR:P+=Wi,R++;continue}R&&(M.textContent=P),M=this._document.createElement("span"),R=0,P=""}else M=this._document.createElement("span");if(U=te.bg,K=te.fg,Q=te.extended.ext,O=Xo,E=B,L=$r,Ee&&T>=fe&&T<=Qe&&(T=fe),!this._coreService.isCursorHidden&&Qo&&this._coreService.isCursorInitialized){if(W.push("xterm-cursor"),this._coreBrowserService.isFocused)k&&W.push("xterm-cursor-blink"),W.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(A)switch(A){case"outline":W.push("xterm-cursor-outline");break;case"block":W.push("xterm-cursor-block");break;case"bar":W.push("xterm-cursor-bar");break;case"underline":W.push("xterm-cursor-underline")}}if(te.isBold()&&W.push("xterm-bold"),te.isItalic()&&W.push("xterm-italic"),te.isDim()&&W.push("xterm-dim"),P=te.isInvisible()?p.WHITESPACE_CELL_CHAR:te.getChars()||p.WHITESPACE_CELL_CHAR,te.isUnderline()&&(W.push(`xterm-underline-${te.extended.underlineStyle}`),P===" "&&(P="\xA0"),!te.isUnderlineColorDefault()))if(te.isUnderlineColorRGB())M.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(te.getUnderlineColor()).join(",")})`;else{let be=te.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&te.isBold()&&be<8&&(be+=8),M.style.textDecorationColor=D.ansi[be].css}te.isOverline()&&(W.push("xterm-overline"),P===" "&&(P="\xA0")),te.isStrikethrough()&&W.push("xterm-strikethrough"),Xo&&(M.style.textDecoration="underline");let at=te.getFgColor(),Wr=te.getFgColorMode(),Dt=te.getBgColor(),zr=te.getBgColorMode(),ea=!!te.isInverse();if(ea){let be=at;at=Dt,Dt=be;let Dm=Wr;Wr=zr,zr=Dm}let Qt,zi,Xt,Gr=!1;switch(this._decorationService.forEachDecorationAtCell(fe,w,void 0,be=>{be.options.layer!=="top"&&Gr||(be.backgroundColorRGB&&(zr=50331648,Dt=be.backgroundColorRGB.rgba>>8&16777215,Qt=be.backgroundColorRGB),be.foregroundColorRGB&&(Wr=50331648,at=be.foregroundColorRGB.rgba>>8&16777215,zi=be.foregroundColorRGB),Gr=be.options.layer==="top")}),!Gr&&$r&&(Qt=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,Dt=Qt.rgba>>8&16777215,zr=50331648,Gr=!0,D.selectionForeground&&(Wr=50331648,at=D.selectionForeground.rgba>>8&16777215,zi=D.selectionForeground)),Gr&&W.push("xterm-decoration-top"),zr){case 16777216:case 33554432:Xt=D.ansi[Dt],W.push(`xterm-bg-${Dt}`);break;case 50331648:Xt=g.channels.toColor(Dt>>16,Dt>>8&255,255&Dt),this._addStyle(M,`background-color:#${C((Dt>>>0).toString(16),"0",6)}`);break;default:ea?(Xt=D.foreground,W.push(`xterm-bg-${c.INVERTED_DEFAULT_COLOR}`)):Xt=D.background}switch(Qt||te.isDim()&&(Qt=g.color.multiplyOpacity(Xt,.5)),Wr){case 16777216:case 33554432:te.isBold()&&at<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(at+=8),this._applyMinimumContrast(M,Xt,D.ansi[at],te,Qt,void 0)||W.push(`xterm-fg-${at}`);break;case 50331648:let be=g.channels.toColor(at>>16&255,at>>8&255,255&at);this._applyMinimumContrast(M,Xt,be,te,Qt,zi)||this._addStyle(M,`color:#${C(at.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(M,Xt,D.foreground,te,Qt,zi)||ea&&W.push(`xterm-fg-${c.INVERTED_DEFAULT_COLOR}`)}W.length&&(M.className=W.join(" "),W.length=0),Qo||Ee||Jo?M.textContent=P:R++,B!==this.defaultSpacing&&(M.style.letterSpacing=`${B}px`),G.push(M),fe=Qe}return M&&R&&(M.textContent=P),G}_applyMinimumContrast(S,w,_,b,A,T){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,d.treatGlyphAsBackgroundColor)(b.getCode()))return!1;let k=this._getContrastCache(b),I;if(A||T||(I=k.getColor(w.rgba,_.rgba)),I===void 0){let N=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);I=g.color.ensureContrastRatio(A||w,T||_,N),k.setColor((A||w).rgba,(T||_).rgba,I??null)}return!!I&&(this._addStyle(S,`color:${I.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,w){S.setAttribute("style",`${S.getAttribute("style")||""}${w};`)}_isCellInSelection(S,w){let _=this._selectionStart,b=this._selectionEnd;return!(!_||!b)&&(this._columnSelectMode?_[0]<=b[0]?S>=_[0]&&w>=_[1]&&S<b[0]&&w<=b[1]:S<_[0]&&w>=_[1]&&S>=b[0]&&w<=b[1]:w>_[1]&&w<b[1]||_[1]===b[1]&&w===_[1]&&S>=_[0]&&S<b[0]||_[1]<b[1]&&w===b[1]&&S<b[0]||_[1]<b[1]&&w===_[1]&&S>=_[0])}};function C(S,w,_){for(;S.length<_;)S=w+S;return S}s.DomRendererRowFactory=v=a([l(1,u.ICharacterJoinerService),l(2,y.IOptionsService),l(3,u.ICoreBrowserService),l(4,y.ICoreService),l(5,y.IDecorationService),l(6,u.IThemeService)],v)},2550:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(o,a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let l=o.createElement("span");l.classList.add("xterm-char-measure-element");let c=o.createElement("span");c.classList.add("xterm-char-measure-element"),c.style.fontWeight="bold";let p=o.createElement("span");p.classList.add("xterm-char-measure-element"),p.style.fontStyle="italic";let m=o.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontWeight="bold",m.style.fontStyle="italic",this._measureElements=[l,c,p,m],this._container.appendChild(l),this._container.appendChild(c),this._container.appendChild(p),this._container.appendChild(m),a.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,a,l,c){o===this._font&&a===this._fontSize&&l===this._weight&&c===this._weightBold||(this._font=o,this._fontSize=a,this._weight=l,this._weightBold=c,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${l}`,this._measureElements[1].style.fontWeight=`${c}`,this._measureElements[2].style.fontWeight=`${l}`,this._measureElements[3].style.fontWeight=`${c}`,this.clear())}get(o,a,l){let c=0;if(!a&&!l&&o.length===1&&(c=o.charCodeAt(0))<256){if(this._flat[c]!==-9999)return this._flat[c];let y=this._measure(o,0);return y>0&&(this._flat[c]=y),y}let p=o;a&&(p+="B"),l&&(p+="I");let m=this._holey.get(p);if(m===void 0){let y=0;a&&(y|=1),l&&(y|=2),m=this._measure(o,y),m>0&&this._holey.set(p,m)}return m}_measure(o,a){let l=this._measureElements[a];return l.textContent=o.repeat(32),l.offsetWidth/32}}},2223:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;let a=o(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},6171:(i,s)=>{function o(l){return 57508<=l&&l<=57558}function a(l){return l>=128512&&l<=128591||l>=127744&&l<=128511||l>=128640&&l<=128767||l>=9728&&l<=9983||l>=9984&&l<=10175||l>=65024&&l<=65039||l>=129280&&l<=129535||l>=127462&&l<=127487}Object.defineProperty(s,"__esModule",{value:!0}),s.computeNextVariantOffset=s.createRenderDimensions=s.treatGlyphAsBackgroundColor=s.allowRescaling=s.isEmoji=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},s.isPowerlineGlyph=o,s.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},s.isEmoji=a,s.allowRescaling=function(l,c,p,m){return c===1&&p>Math.ceil(1.5*m)&&l!==void 0&&l>255&&!a(l)&&!o(l)&&!function(y){return 57344<=y&&y<=63743}(l)},s.treatGlyphAsBackgroundColor=function(l){return o(l)||function(c){return 9472<=c&&c<=9631}(l)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},s.computeNextVariantOffset=function(l,c,p=0){return(l-(2*Math.round(c)-p))%(2*Math.round(c))}},6052:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(l,c,p,m=!1){if(this.selectionStart=c,this.selectionEnd=p,!c||!p||c[0]===p[0]&&c[1]===p[1])return void this.clear();let y=l.buffers.active.ydisp,g=c[1]-y,u=p[1]-y,f=Math.max(g,0),d=Math.min(u,l.rows-1);f>=l.rows||d<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=g,this.viewportEndRow=u,this.viewportCappedStartRow=f,this.viewportCappedEndRow=d,this.startCol=c[0],this.endCol=p[0])}isCellSelected(l,c,p){return!!this.hasSelection&&(p-=l.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?c>=this.startCol&&p>=this.viewportCappedStartRow&&c<this.endCol&&p<=this.viewportCappedEndRow:c<this.startCol&&p>=this.viewportCappedStartRow&&c>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&c>=this.startCol&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&c>=this.startCol)}}s.createSelectionRenderModel=function(){return new o}},456:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let o=this.selectionStart,a=this.selectionEnd;return!(!o||!a)&&(o[1]>a[1]||o[1]===a[1]&&o[0]>a[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(i,s,o){var a=this&&this.__decorate||function(d,h,v,C){var S,w=arguments.length,_=w<3?h:C===null?C=Object.getOwnPropertyDescriptor(h,v):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(d,h,v,C);else for(var b=d.length-1;b>=0;b--)(S=d[b])&&(_=(w<3?S(_):w>3?S(h,v,_):S(h,v))||_);return w>3&&_&&Object.defineProperty(h,v,_),_},l=this&&this.__param||function(d,h){return function(v,C){h(v,C,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;let c=o(2585),p=o(8460),m=o(844),y=s.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(d,h,v){super(),this._optionsService=v,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new f(this._optionsService))}catch{this._measureStrategy=this.register(new u(d,h,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let d=this._measureStrategy.measure();d.width===this.width&&d.height===this.height||(this.width=d.width,this.height=d.height,this._onCharSizeChange.fire())}};s.CharSizeService=y=a([l(2,c.IOptionsService)],y);class g extends m.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(h,v){h!==void 0&&h>0&&v!==void 0&&v>0&&(this._result.width=h,this._result.height=v)}}class u extends g{constructor(h,v,C){super(),this._document=h,this._parentElement=v,this._optionsService=C,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class f extends g{constructor(h){super(),this._optionsService=h,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let v=this._ctx.measureText("W");if(!("width"in v&&"fontBoundingBoxAscent"in v&&"fontBoundingBoxDescent"in v))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let h=this._ctx.measureText("W");return this._validateAndSet(h.width,h.fontBoundingBoxAscent+h.fontBoundingBoxDescent),this._result}}},4269:function(i,s,o){var a=this&&this.__decorate||function(f,d,h,v){var C,S=arguments.length,w=S<3?d:v===null?v=Object.getOwnPropertyDescriptor(d,h):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(f,d,h,v);else for(var _=f.length-1;_>=0;_--)(C=f[_])&&(w=(S<3?C(w):S>3?C(d,h,w):C(d,h))||w);return S>3&&w&&Object.defineProperty(d,h,w),w},l=this&&this.__param||function(f,d){return function(h,v){d(h,v,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;let c=o(3734),p=o(643),m=o(511),y=o(2585);class g extends c.AttributeData{constructor(d,h,v){super(),this.content=0,this.combinedData="",this.fg=d.fg,this.bg=d.bg,this.combinedData=h,this._width=v}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(d){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=g;let u=s.CharacterJoinerService=class vm{constructor(d){this._bufferService=d,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(d){let h={id:this._nextCharacterJoinerId++,handler:d};return this._characterJoiners.push(h),h.id}deregister(d){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===d)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(d){if(this._characterJoiners.length===0)return[];let h=this._bufferService.buffer.lines.get(d);if(!h||h.length===0)return[];let v=[],C=h.translateToString(!0),S=0,w=0,_=0,b=h.getFg(0),A=h.getBg(0);for(let T=0;T<h.getTrimmedLength();T++)if(h.loadCell(T,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==A){if(T-S>1){let k=this._getJoinedRanges(C,_,w,h,S);for(let I=0;I<k.length;I++)v.push(k[I])}S=T,_=w,b=this._workCell.fg,A=this._workCell.bg}w+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let T=this._getJoinedRanges(C,_,w,h,S);for(let k=0;k<T.length;k++)v.push(T[k])}return v}_getJoinedRanges(d,h,v,C,S){let w=d.substring(h,v),_=[];try{_=this._characterJoiners[0].handler(w)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{let A=this._characterJoiners[b].handler(w);for(let T=0;T<A.length;T++)vm._mergeRanges(_,A[T])}catch(A){console.error(A)}return this._stringRangesToCellRanges(_,C,S),_}_stringRangesToCellRanges(d,h,v){let C=0,S=!1,w=0,_=d[C];if(_){for(let b=v;b<this._bufferService.cols;b++){let A=h.getWidth(b),T=h.getString(b).length||p.WHITESPACE_CELL_CHAR.length;if(A!==0){if(!S&&_[0]<=w&&(_[0]=b,S=!0),_[1]<=w){if(_[1]=b,_=d[++C],!_)break;_[0]<=w?(_[0]=b,S=!0):S=!1}w+=T}}_&&(_[1]=this._bufferService.cols)}}static _mergeRanges(d,h){let v=!1;for(let C=0;C<d.length;C++){let S=d[C];if(v){if(h[1]<=S[0])return d[C-1][1]=h[1],d;if(h[1]<=S[1])return d[C-1][1]=Math.max(h[1],S[1]),d.splice(C,1),d;d.splice(C,1),C--}else{if(h[1]<=S[0])return d.splice(C,0,h),d;if(h[1]<=S[1])return S[0]=Math.min(h[0],S[0]),d;h[0]<S[1]&&(S[0]=Math.min(h[0],S[0]),v=!0)}}return v?d[d.length-1][1]=h[1]:d.push(h),d}};s.CharacterJoinerService=u=a([l(0,y.IBufferService)],u)},5114:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;let a=o(844),l=o(8460),c=o(3656);class p extends a.Disposable{constructor(g,u,f){super(),this._textarea=g,this._window=u,this.mainDocument=f,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new m(this._window),this._onDprChange=this.register(new l.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new l.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(d=>this._screenDprMonitor.setWindow(d))),this.register((0,l.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(g){this._window!==g&&(this._window=g,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}s.CoreBrowserService=p;class m extends a.Disposable{constructor(g){super(),this._parentWindow=g,this._windowResizeListener=this.register(new a.MutableDisposable),this._onDprChange=this.register(new l.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,a.toDisposable)(()=>this.clearListener()))}setWindow(g){this._parentWindow=g,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,c.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkProviderService=void 0;let a=o(844);class l extends a.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,a.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(p){return this.linkProviders.push(p),{dispose:()=>{let m=this.linkProviders.indexOf(p);m!==-1&&this.linkProviders.splice(m,1)}}}}s.LinkProviderService=l},8934:function(i,s,o){var a=this&&this.__decorate||function(y,g,u,f){var d,h=arguments.length,v=h<3?g:f===null?f=Object.getOwnPropertyDescriptor(g,u):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(y,g,u,f);else for(var C=y.length-1;C>=0;C--)(d=y[C])&&(v=(h<3?d(v):h>3?d(g,u,v):d(g,u))||v);return h>3&&v&&Object.defineProperty(g,u,v),v},l=this&&this.__param||function(y,g){return function(u,f){g(u,f,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;let c=o(4725),p=o(9806),m=s.MouseService=class{constructor(y,g){this._renderService=y,this._charSizeService=g}getCoords(y,g,u,f,d){return(0,p.getCoords)(window,y,g,u,f,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,d)}getMouseReportCoords(y,g){let u=(0,p.getCoordsRelativeToElement)(window,y,g);if(this._charSizeService.hasValidSize)return u[0]=Math.min(Math.max(u[0],0),this._renderService.dimensions.css.canvas.width-1),u[1]=Math.min(Math.max(u[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(u[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(u[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(u[0]),y:Math.floor(u[1])}}};s.MouseService=m=a([l(0,c.IRenderService),l(1,c.ICharSizeService)],m)},3230:function(i,s,o){var a=this&&this.__decorate||function(d,h,v,C){var S,w=arguments.length,_=w<3?h:C===null?C=Object.getOwnPropertyDescriptor(h,v):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(d,h,v,C);else for(var b=d.length-1;b>=0;b--)(S=d[b])&&(_=(w<3?S(_):w>3?S(h,v,_):S(h,v))||_);return w>3&&_&&Object.defineProperty(h,v,_),_},l=this&&this.__param||function(d,h){return function(v,C){h(v,C,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;let c=o(6193),p=o(4725),m=o(8460),y=o(844),g=o(7226),u=o(2585),f=s.RenderService=class extends y.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(d,h,v,C,S,w,_,b){super(),this._rowCount=d,this._charSizeService=C,this._renderer=this.register(new y.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._observerDisposable=this.register(new y.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new m.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new m.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new m.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new m.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new c.RenderDebouncer((A,T)=>this._renderRows(A,T),_),this.register(this._renderDebouncer),this.register(_.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(v.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(S.onDecorationRegistered(()=>this._fullRefresh())),this.register(S.onDecorationRemoved(()=>this._fullRefresh())),this.register(v.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(v.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register(b.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(_.window,h),this.register(_.onWindowChange(A=>this._registerIntersectionObserver(A,h)))}_registerIntersectionObserver(d,h){if("IntersectionObserver"in d){let v=new d.IntersectionObserver(C=>this._handleIntersectionChange(C[C.length-1]),{threshold:0});v.observe(h),this._observerDisposable.value=(0,y.toDisposable)(()=>v.disconnect())}}_handleIntersectionChange(d){this._isPaused=d.isIntersecting===void 0?d.intersectionRatio===0:!d.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(d,h,v=!1){this._isPaused?this._needsFullRefresh=!0:(v||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(d,h,this._rowCount))}_renderRows(d,h){this._renderer.value&&(d=Math.min(d,this._rowCount-1),h=Math.min(h,this._rowCount-1),this._renderer.value.renderRows(d,h),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:d,end:h}),this._onRender.fire({start:d,end:h}),this._isNextRenderRedrawOnly=!0)}resize(d,h){this._rowCount=h,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(d){this._renderer.value=d,this._renderer.value&&(this._renderer.value.onRequestRedraw(h=>this.refreshRows(h.start,h.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(d){return this._renderDebouncer.addRefreshCallback(d)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(d,h){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(d,h)):this._renderer.value.handleResize(d,h),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(d,h,v){this._selectionState.start=d,this._selectionState.end=h,this._selectionState.columnSelectMode=v,this._renderer.value?.handleSelectionChanged(d,h,v)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};s.RenderService=f=a([l(2,u.IOptionsService),l(3,p.ICharSizeService),l(4,u.IDecorationService),l(5,u.IBufferService),l(6,p.ICoreBrowserService),l(7,p.IThemeService)],f)},9312:function(i,s,o){var a=this&&this.__decorate||function(_,b,A,T){var k,I=arguments.length,N=I<3?b:T===null?T=Object.getOwnPropertyDescriptor(b,A):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(_,b,A,T);else for(var F=_.length-1;F>=0;F--)(k=_[F])&&(N=(I<3?k(N):I>3?k(b,A,N):k(b,A))||N);return I>3&&N&&Object.defineProperty(b,A,N),N},l=this&&this.__param||function(_,b){return function(A,T){b(A,T,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;let c=o(9806),p=o(9504),m=o(456),y=o(4725),g=o(8460),u=o(844),f=o(6114),d=o(4841),h=o(511),v=o(2585),C="\xA0",S=new RegExp(C,"g"),w=s.SelectionService=class extends u.Disposable{constructor(_,b,A,T,k,I,N,F,j){super(),this._element=_,this._screenElement=b,this._linkifier=A,this._bufferService=T,this._coreService=k,this._mouseService=I,this._optionsService=N,this._renderService=F,this._coreBrowserService=j,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=G=>this._handleMouseMove(G),this._mouseUpListener=G=>this._handleMouseUp(G),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(G=>this._handleTrim(G)),this.register(this._bufferService.buffers.onBufferActivate(G=>this._handleBufferActivate(G))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,u.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let _=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!_||!b||_[0]===b[0]&&_[1]===b[1])}get selectionText(){let _=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!_||!b)return"";let A=this._bufferService.buffer,T=[];if(this._activeSelectionMode===3){if(_[0]===b[0])return"";let k=_[0]<b[0]?_[0]:b[0],I=_[0]<b[0]?b[0]:_[0];for(let N=_[1];N<=b[1];N++){let F=A.translateBufferLineToString(N,!0,k,I);T.push(F)}}else{let k=_[1]===b[1]?b[0]:void 0;T.push(A.translateBufferLineToString(_[1],!0,_[0],k));for(let I=_[1]+1;I<=b[1]-1;I++){let N=A.lines.get(I),F=A.translateBufferLineToString(I,!0);N?.isWrapped?T[T.length-1]+=F:T.push(F)}if(_[1]!==b[1]){let I=A.lines.get(b[1]),N=A.translateBufferLineToString(b[1],!0,0,b[0]);I&&I.isWrapped?T[T.length-1]+=N:T.push(N)}}return T.map(k=>k.replace(S," ")).join(f.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(_){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),f.isLinux&&_&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(_){let b=this._getMouseBufferCoords(_),A=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!!(A&&T&&b)&&this._areCoordsInSelection(b,A,T)}isCellInSelection(_,b){let A=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!(!A||!T)&&this._areCoordsInSelection([_,b],A,T)}_areCoordsInSelection(_,b,A){return _[1]>b[1]&&_[1]<A[1]||b[1]===A[1]&&_[1]===b[1]&&_[0]>=b[0]&&_[0]<A[0]||b[1]<A[1]&&_[1]===A[1]&&_[0]<A[0]||b[1]<A[1]&&_[1]===b[1]&&_[0]>=b[0]}_selectWordAtCursor(_,b){let A=this._linkifier.currentLink?.link?.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,d.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let T=this._getMouseBufferCoords(_);return!!T&&(this._selectWordAt(T,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(_,b){this._model.clearSelection(),_=Math.max(_,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,_],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(_){this._model.handleTrim(_)&&this.refresh()}_getMouseBufferCoords(_){let b=this._mouseService.getCoords(_,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(_){let b=(0,c.getCoordsRelativeToElement)(this._coreBrowserService.window,_,this._screenElement)[1],A=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=A?0:(b>A&&(b-=A),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(_){return f.isMac?_.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:_.shiftKey}handleMouseDown(_){if(this._mouseDownTimeStamp=_.timeStamp,(_.button!==2||!this.hasSelection)&&_.button===0){if(!this._enabled){if(!this.shouldForceSelection(_))return;_.stopPropagation()}_.preventDefault(),this._dragScrollAmount=0,this._enabled&&_.shiftKey?this._handleIncrementalClick(_):_.detail===1?this._handleSingleClick(_):_.detail===2?this._handleDoubleClick(_):_.detail===3&&this._handleTripleClick(_),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(_){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(_))}_handleSingleClick(_){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(_)?3:0,this._model.selectionStart=this._getMouseBufferCoords(_),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(_){this._selectWordAtCursor(_,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(_){let b=this._getMouseBufferCoords(_);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(_){return _.altKey&&!(f.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(_){if(_.stopImmediatePropagation(),!this._model.selectionStart)return;let b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(_),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(_),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let A=this._bufferService.buffer;if(this._model.selectionEnd[1]<A.lines.length){let T=A.lines.get(this._model.selectionEnd[1]);T&&T.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let _=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(_.ydisp+this._bufferService.rows,_.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=_.ydisp),this.refresh()}}_handleMouseUp(_){let b=_.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&_.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let A=this._mouseService.getCoords(_,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(A&&A[0]!==void 0&&A[1]!==void 0){let T=(0,p.moveToCellSequence)(A[0]-1,A[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(T,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let _=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,A=!(!_||!b||_[0]===b[0]&&_[1]===b[1]);A?_&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&_[0]===this._oldSelectionStart[0]&&_[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(_,b,A)):this._oldHasSelection&&this._fireOnSelectionChange(_,b,A)}_fireOnSelectionChange(_,b,A){this._oldSelectionStart=_,this._oldSelectionEnd=b,this._oldHasSelection=A,this._onSelectionChange.fire()}_handleBufferActivate(_){this.clearSelection(),this._trimListener.dispose(),this._trimListener=_.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(_,b){let A=b;for(let T=0;b>=T;T++){let k=_.loadCell(T,this._workCell).getChars().length;this._workCell.getWidth()===0?A--:k>1&&b!==T&&(A+=k-1)}return A}setSelection(_,b,A){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[_,b],this._model.selectionStartLength=A,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(_){this._isClickInSelection(_)||(this._selectWordAtCursor(_,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(_,b,A=!0,T=!0){if(_[0]>=this._bufferService.cols)return;let k=this._bufferService.buffer,I=k.lines.get(_[1]);if(!I)return;let N=k.translateBufferLineToString(_[1],!1),F=this._convertViewportColToCharacterIndex(I,_[0]),j=F,G=_[0]-F,V=0,D=0,M=0,x=0;if(N.charAt(F)===" "){for(;F>0&&N.charAt(F-1)===" ";)F--;for(;j<N.length&&N.charAt(j+1)===" ";)j++}else{let U=_[0],K=_[0];I.getWidth(U)===0&&(V++,U--),I.getWidth(K)===2&&(D++,K++);let Q=I.getString(K).length;for(Q>1&&(x+=Q-1,j+=Q-1);U>0&&F>0&&!this._isCharWordSeparator(I.loadCell(U-1,this._workCell));){I.loadCell(U-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(V++,U--):O>1&&(M+=O-1,F-=O-1),F--,U--}for(;K<I.length&&j+1<N.length&&!this._isCharWordSeparator(I.loadCell(K+1,this._workCell));){I.loadCell(K+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,K++):O>1&&(x+=O-1,j+=O-1),j++,K++}}j++;let R=F+G-V+M,P=Math.min(this._bufferService.cols,j-F+V+D-M-x);if(b||N.slice(F,j).trim()!==""){if(A&&R===0&&I.getCodePoint(0)!==32){let U=k.lines.get(_[1]-1);if(U&&I.isWrapped&&U.getCodePoint(this._bufferService.cols-1)!==32){let K=this._getWordAt([this._bufferService.cols-1,_[1]-1],!1,!0,!1);if(K){let Q=this._bufferService.cols-K.start;R-=Q,P+=Q}}}if(T&&R+P===this._bufferService.cols&&I.getCodePoint(this._bufferService.cols-1)!==32){let U=k.lines.get(_[1]+1);if(U?.isWrapped&&U.getCodePoint(0)!==32){let K=this._getWordAt([0,_[1]+1],!1,!1,!0);K&&(P+=K.length)}}return{start:R,length:P}}}_selectWordAt(_,b){let A=this._getWordAt(_,b);if(A){for(;A.start<0;)A.start+=this._bufferService.cols,_[1]--;this._model.selectionStart=[A.start,_[1]],this._model.selectionStartLength=A.length}}_selectToWordAt(_){let b=this._getWordAt(_,!0);if(b){let A=_[1];for(;b.start<0;)b.start+=this._bufferService.cols,A--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,A++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,A]}}_isCharWordSeparator(_){return _.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(_.getChars())>=0}_selectLineAt(_){let b=this._bufferService.buffer.getWrappedRangeForLine(_),A={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,d.getRangeLength)(A,this._bufferService.cols)}};s.SelectionService=w=a([l(3,v.IBufferService),l(4,v.ICoreService),l(5,y.IMouseService),l(6,v.IOptionsService),l(7,y.IRenderService),l(8,y.ICoreBrowserService)],w)},4725:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ILinkProviderService=s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;let a=o(8343);s.ICharSizeService=(0,a.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,a.createDecorator)("CoreBrowserService"),s.IMouseService=(0,a.createDecorator)("MouseService"),s.IRenderService=(0,a.createDecorator)("RenderService"),s.ISelectionService=(0,a.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,a.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,a.createDecorator)("ThemeService"),s.ILinkProviderService=(0,a.createDecorator)("LinkProviderService")},6731:function(i,s,o){var a=this&&this.__decorate||function(w,_,b,A){var T,k=arguments.length,I=k<3?_:A===null?A=Object.getOwnPropertyDescriptor(_,b):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(w,_,b,A);else for(var N=w.length-1;N>=0;N--)(T=w[N])&&(I=(k<3?T(I):k>3?T(_,b,I):T(_,b))||I);return k>3&&I&&Object.defineProperty(_,b,I),I},l=this&&this.__param||function(w,_){return function(b,A){_(b,A,w)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;let c=o(7239),p=o(8055),m=o(8460),y=o(844),g=o(2585),u=p.css.toColor("#ffffff"),f=p.css.toColor("#000000"),d=p.css.toColor("#ffffff"),h=p.css.toColor("#000000"),v={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let w=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],_=[0,95,135,175,215,255];for(let b=0;b<216;b++){let A=_[b/36%6|0],T=_[b/6%6|0],k=_[b%6];w.push({css:p.channels.toCss(A,T,k),rgba:p.channels.toRgba(A,T,k)})}for(let b=0;b<24;b++){let A=8+10*b;w.push({css:p.channels.toCss(A,A,A),rgba:p.channels.toRgba(A,A,A)})}return w})());let C=s.ThemeService=class extends y.Disposable{get colors(){return this._colors}constructor(w){super(),this._optionsService=w,this._contrastCache=new c.ColorContrastCache,this._halfContrastCache=new c.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:u,background:f,cursor:d,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:v,selectionBackgroundOpaque:p.color.blend(f,v),selectionInactiveBackgroundTransparent:v,selectionInactiveBackgroundOpaque:p.color.blend(f,v),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(w={}){let _=this._colors;if(_.foreground=S(w.foreground,u),_.background=S(w.background,f),_.cursor=S(w.cursor,d),_.cursorAccent=S(w.cursorAccent,h),_.selectionBackgroundTransparent=S(w.selectionBackground,v),_.selectionBackgroundOpaque=p.color.blend(_.background,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundTransparent=S(w.selectionInactiveBackground,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundOpaque=p.color.blend(_.background,_.selectionInactiveBackgroundTransparent),_.selectionForeground=w.selectionForeground?S(w.selectionForeground,p.NULL_COLOR):void 0,_.selectionForeground===p.NULL_COLOR&&(_.selectionForeground=void 0),p.color.isOpaque(_.selectionBackgroundTransparent)&&(_.selectionBackgroundTransparent=p.color.opacity(_.selectionBackgroundTransparent,.3)),p.color.isOpaque(_.selectionInactiveBackgroundTransparent)&&(_.selectionInactiveBackgroundTransparent=p.color.opacity(_.selectionInactiveBackgroundTransparent,.3)),_.ansi=s.DEFAULT_ANSI_COLORS.slice(),_.ansi[0]=S(w.black,s.DEFAULT_ANSI_COLORS[0]),_.ansi[1]=S(w.red,s.DEFAULT_ANSI_COLORS[1]),_.ansi[2]=S(w.green,s.DEFAULT_ANSI_COLORS[2]),_.ansi[3]=S(w.yellow,s.DEFAULT_ANSI_COLORS[3]),_.ansi[4]=S(w.blue,s.DEFAULT_ANSI_COLORS[4]),_.ansi[5]=S(w.magenta,s.DEFAULT_ANSI_COLORS[5]),_.ansi[6]=S(w.cyan,s.DEFAULT_ANSI_COLORS[6]),_.ansi[7]=S(w.white,s.DEFAULT_ANSI_COLORS[7]),_.ansi[8]=S(w.brightBlack,s.DEFAULT_ANSI_COLORS[8]),_.ansi[9]=S(w.brightRed,s.DEFAULT_ANSI_COLORS[9]),_.ansi[10]=S(w.brightGreen,s.DEFAULT_ANSI_COLORS[10]),_.ansi[11]=S(w.brightYellow,s.DEFAULT_ANSI_COLORS[11]),_.ansi[12]=S(w.brightBlue,s.DEFAULT_ANSI_COLORS[12]),_.ansi[13]=S(w.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),_.ansi[14]=S(w.brightCyan,s.DEFAULT_ANSI_COLORS[14]),_.ansi[15]=S(w.brightWhite,s.DEFAULT_ANSI_COLORS[15]),w.extendedAnsi){let b=Math.min(_.ansi.length-16,w.extendedAnsi.length);for(let A=0;A<b;A++)_.ansi[A+16]=S(w.extendedAnsi[A],s.DEFAULT_ANSI_COLORS[A+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(w){this._restoreColor(w),this._onChangeColors.fire(this.colors)}_restoreColor(w){if(w!==void 0)switch(w){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[w]=this._restoreColors.ansi[w]}else for(let _=0;_<this._restoreColors.ansi.length;++_)this._colors.ansi[_]=this._restoreColors.ansi[_]}modifyColors(w){w(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(w,_){if(w!==void 0)try{return p.css.toColor(w)}catch{}return _}s.ThemeService=C=a([l(0,g.IOptionsService)],C)},6349:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;let a=o(8460),l=o(844);class c extends l.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new a.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new a.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new a.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;let y=new Array(m);for(let g=0;g<Math.min(m,this.length);g++)y[g]=this._array[this._getCyclicIndex(g)];this._array=y,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let y=this._length;y<m;y++)this._array[y]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,y){this._array[this._getCyclicIndex(m)]=y}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,y,...g){if(y){for(let u=m;u<this._length-y;u++)this._array[this._getCyclicIndex(u)]=this._array[this._getCyclicIndex(u+y)];this._length-=y,this.onDeleteEmitter.fire({index:m,amount:y})}for(let u=this._length-1;u>=m;u--)this._array[this._getCyclicIndex(u+g.length)]=this._array[this._getCyclicIndex(u)];for(let u=0;u<g.length;u++)this._array[this._getCyclicIndex(m+u)]=g[u];if(g.length&&this.onInsertEmitter.fire({index:m,amount:g.length}),this._length+g.length>this._maxLength){let u=this._length+g.length-this._maxLength;this._startIndex+=u,this._length=this._maxLength,this.onTrimEmitter.fire(u)}else this._length+=g.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,y,g){if(!(y<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let f=y-1;f>=0;f--)this.set(m+f+g,this.get(m+f));let u=m+y+g-this._length;if(u>0)for(this._length+=u;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let u=0;u<y;u++)this.set(m+u+g,this.get(m+u))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}s.CircularList=c},1439:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function o(a,l=5){if(typeof a!="object")return a;let c=Array.isArray(a)?[]:{};for(let p in a)c[p]=l<=1?a[p]:a[p]&&o(a[p],l-1);return c}},8055:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let o=0,a=0,l=0,c=0;var p,m,y,g,u;function f(h){let v=h.toString(16);return v.length<2?"0"+v:v}function d(h,v){return h<v?(v+.05)/(h+.05):(h+.05)/(v+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(h){h.toCss=function(v,C,S,w){return w!==void 0?`#${f(v)}${f(C)}${f(S)}${f(w)}`:`#${f(v)}${f(C)}${f(S)}`},h.toRgba=function(v,C,S,w=255){return(v<<24|C<<16|S<<8|w)>>>0},h.toColor=function(v,C,S,w){return{css:h.toCss(v,C,S,w),rgba:h.toRgba(v,C,S,w)}}}(p||(s.channels=p={})),function(h){function v(C,S){return c=Math.round(255*S),[o,a,l]=u.toChannels(C.rgba),{css:p.toCss(o,a,l,c),rgba:p.toRgba(o,a,l,c)}}h.blend=function(C,S){if(c=(255&S.rgba)/255,c===1)return{css:S.css,rgba:S.rgba};let w=S.rgba>>24&255,_=S.rgba>>16&255,b=S.rgba>>8&255,A=C.rgba>>24&255,T=C.rgba>>16&255,k=C.rgba>>8&255;return o=A+Math.round((w-A)*c),a=T+Math.round((_-T)*c),l=k+Math.round((b-k)*c),{css:p.toCss(o,a,l),rgba:p.toRgba(o,a,l)}},h.isOpaque=function(C){return(255&C.rgba)==255},h.ensureContrastRatio=function(C,S,w){let _=u.ensureContrastRatio(C.rgba,S.rgba,w);if(_)return p.toColor(_>>24&255,_>>16&255,_>>8&255)},h.opaque=function(C){let S=(255|C.rgba)>>>0;return[o,a,l]=u.toChannels(S),{css:p.toCss(o,a,l),rgba:S}},h.opacity=v,h.multiplyOpacity=function(C,S){return c=255&C.rgba,v(C,c*S/255)},h.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}}(m||(s.color=m={})),function(h){let v,C;try{let S=document.createElement("canvas");S.width=1,S.height=1;let w=S.getContext("2d",{willReadFrequently:!0});w&&(v=w,v.globalCompositeOperation="copy",C=v.createLinearGradient(0,0,1,1))}catch{}h.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return o=parseInt(S.slice(1,2).repeat(2),16),a=parseInt(S.slice(2,3).repeat(2),16),l=parseInt(S.slice(3,4).repeat(2),16),p.toColor(o,a,l);case 5:return o=parseInt(S.slice(1,2).repeat(2),16),a=parseInt(S.slice(2,3).repeat(2),16),l=parseInt(S.slice(3,4).repeat(2),16),c=parseInt(S.slice(4,5).repeat(2),16),p.toColor(o,a,l,c);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}let w=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return o=parseInt(w[1]),a=parseInt(w[2]),l=parseInt(w[3]),c=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),p.toColor(o,a,l,c);if(!v||!C)throw new Error("css.toColor: Unsupported css format");if(v.fillStyle=C,v.fillStyle=S,typeof v.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(v.fillRect(0,0,1,1),[o,a,l,c]=v.getImageData(0,0,1,1).data,c!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,a,l,c),css:S}}}(y||(s.css=y={})),function(h){function v(C,S,w){let _=C/255,b=S/255,A=w/255;return .2126*(_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}h.relativeLuminance=function(C){return v(C>>16&255,C>>8&255,255&C)},h.relativeLuminance2=v}(g||(s.rgb=g={})),function(h){function v(S,w,_){let b=S>>24&255,A=S>>16&255,T=S>>8&255,k=w>>24&255,I=w>>16&255,N=w>>8&255,F=d(g.relativeLuminance2(k,I,N),g.relativeLuminance2(b,A,T));for(;F<_&&(k>0||I>0||N>0);)k-=Math.max(0,Math.ceil(.1*k)),I-=Math.max(0,Math.ceil(.1*I)),N-=Math.max(0,Math.ceil(.1*N)),F=d(g.relativeLuminance2(k,I,N),g.relativeLuminance2(b,A,T));return(k<<24|I<<16|N<<8|255)>>>0}function C(S,w,_){let b=S>>24&255,A=S>>16&255,T=S>>8&255,k=w>>24&255,I=w>>16&255,N=w>>8&255,F=d(g.relativeLuminance2(k,I,N),g.relativeLuminance2(b,A,T));for(;F<_&&(k<255||I<255||N<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),I=Math.min(255,I+Math.ceil(.1*(255-I))),N=Math.min(255,N+Math.ceil(.1*(255-N))),F=d(g.relativeLuminance2(k,I,N),g.relativeLuminance2(b,A,T));return(k<<24|I<<16|N<<8|255)>>>0}h.blend=function(S,w){if(c=(255&w)/255,c===1)return w;let _=w>>24&255,b=w>>16&255,A=w>>8&255,T=S>>24&255,k=S>>16&255,I=S>>8&255;return o=T+Math.round((_-T)*c),a=k+Math.round((b-k)*c),l=I+Math.round((A-I)*c),p.toRgba(o,a,l)},h.ensureContrastRatio=function(S,w,_){let b=g.relativeLuminance(S>>8),A=g.relativeLuminance(w>>8);if(d(b,A)<_){if(A<b){let I=v(S,w,_),N=d(b,g.relativeLuminance(I>>8));if(N<_){let F=C(S,w,_);return N>d(b,g.relativeLuminance(F>>8))?I:F}return I}let T=C(S,w,_),k=d(b,g.relativeLuminance(T>>8));if(k<_){let I=v(S,w,_);return k>d(b,g.relativeLuminance(I>>8))?T:I}return T}},h.reduceLuminance=v,h.increaseLuminance=C,h.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]}}(u||(s.rgba=u={})),s.toPaddedHex=f,s.contrastRatio=d},8969:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;let a=o(844),l=o(2585),c=o(4348),p=o(7866),m=o(744),y=o(7302),g=o(6975),u=o(8460),f=o(1753),d=o(1480),h=o(7994),v=o(9282),C=o(5435),S=o(5981),w=o(2660),_=!1;class b extends a.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new u.EventEmitter),this._onScroll.event(T=>{this._onScrollApi?.fire(T.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(T){for(let k in T)this.optionsService.options[k]=T[k]}constructor(T){super(),this._windowsWrappingHeuristics=this.register(new a.MutableDisposable),this._onBinary=this.register(new u.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new u.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new u.EventEmitter),this._instantiationService=new c.InstantiationService,this.optionsService=this.register(new y.OptionsService(T)),this._instantiationService.setService(l.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(l.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(l.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(l.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(f.CoreMouseService)),this._instantiationService.setService(l.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(d.UnicodeService)),this._instantiationService.setService(l.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(l.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(w.OscLinkService),this._instantiationService.setService(l.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,u.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,u.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,u.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,u.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((k,I)=>this._inputHandler.parse(k,I))),this.register((0,u.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(T,k){this._writeBuffer.write(T,k)}writeSync(T,k){this._logService.logLevel<=l.LogLevelEnum.WARN&&!_&&(this._logService.warn("writeSync is unreliable and will be removed soon."),_=!0),this._writeBuffer.writeSync(T,k)}input(T,k=!0){this.coreService.triggerDataEvent(T,k)}resize(T,k){isNaN(T)||isNaN(k)||(T=Math.max(T,m.MINIMUM_COLS),k=Math.max(k,m.MINIMUM_ROWS),this._bufferService.resize(T,k))}scroll(T,k=!1){this._bufferService.scroll(T,k)}scrollLines(T,k,I){this._bufferService.scrollLines(T,k,I)}scrollPages(T){this.scrollLines(T*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(T){let k=T-this._bufferService.buffer.ydisp;k!==0&&this.scrollLines(k)}registerEscHandler(T,k){return this._inputHandler.registerEscHandler(T,k)}registerDcsHandler(T,k){return this._inputHandler.registerDcsHandler(T,k)}registerCsiHandler(T,k){return this._inputHandler.registerCsiHandler(T,k)}registerOscHandler(T,k){return this._inputHandler.registerOscHandler(T,k)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let T=!1,k=this.optionsService.rawOptions.windowsPty;k&&k.buildNumber!==void 0&&k.buildNumber!==void 0?T=k.backend==="conpty"&&k.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(T=!0),T?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let T=[];T.push(this.onLineFeed(v.updateWindowsModeWrappedState.bind(null,this._bufferService))),T.push(this.registerCsiHandler({final:"H"},()=>((0,v.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,a.toDisposable)(()=>{for(let k of T)k.dispose()})}}}s.CoreTerminal=b},8460:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.runAndSubscribe=s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===o)return void this._listeners.splice(a,1)}}})),this._event}fire(o,a){let l=[];for(let c=0;c<this._listeners.length;c++)l.push(this._listeners[c]);for(let c=0;c<l.length;c++)l[c].call(void 0,o,a)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(o,a){return o(l=>a.fire(l))},s.runAndSubscribe=function(o,a){return a(void 0),o(l=>a(l))}},5435:function(i,s,o){var a=this&&this.__decorate||function(V,D,M,x){var R,P=arguments.length,U=P<3?D:x===null?x=Object.getOwnPropertyDescriptor(D,M):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(V,D,M,x);else for(var K=V.length-1;K>=0;K--)(R=V[K])&&(U=(P<3?R(U):P>3?R(D,M,U):R(D,M))||U);return P>3&&U&&Object.defineProperty(D,M,U),U},l=this&&this.__param||function(V,D){return function(M,x){D(M,x,V)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;let c=o(2584),p=o(7116),m=o(2015),y=o(844),g=o(482),u=o(8437),f=o(8460),d=o(643),h=o(511),v=o(3734),C=o(2585),S=o(1480),w=o(6242),_=o(6351),b=o(5941),A={"(":0,")":1,"*":2,"+":3,"-":1,".":2},T=131072;function k(V,D){if(V>24)return D.setWinLines||!1;switch(V){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var I;(function(V){V[V.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",V[V.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(I||(s.WindowsOptionsReportType=I={}));let N=0;class F extends y.Disposable{getAttrData(){return this._curAttrData}constructor(D,M,x,R,P,U,K,Q,O=new m.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=M,this._coreService=x,this._logService=R,this._optionsService=P,this._oscLinkService=U,this._coreMouseService=K,this._unicodeService=Q,this._parser=O,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new f.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new f.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new f.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new f.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new f.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new f.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new f.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new f.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new f.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new f.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new f.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new f.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new j(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._parser.setCsiHandlerFallback((E,L)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(E),params:L.toArray()})}),this._parser.setEscHandlerFallback(E=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(E)})}),this._parser.setExecuteHandlerFallback(E=>{this._logService.debug("Unknown EXECUTE code: ",{code:E})}),this._parser.setOscHandlerFallback((E,L,B)=>{this._logService.debug("Unknown OSC code: ",{identifier:E,action:L,data:B})}),this._parser.setDcsHandlerFallback((E,L,B)=>{L==="HOOK"&&(B=B.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(E),action:L,payload:B})}),this._parser.setPrintHandler((E,L,B)=>this.print(E,L,B)),this._parser.registerCsiHandler({final:"@"},E=>this.insertChars(E)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},E=>this.scrollLeft(E)),this._parser.registerCsiHandler({final:"A"},E=>this.cursorUp(E)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},E=>this.scrollRight(E)),this._parser.registerCsiHandler({final:"B"},E=>this.cursorDown(E)),this._parser.registerCsiHandler({final:"C"},E=>this.cursorForward(E)),this._parser.registerCsiHandler({final:"D"},E=>this.cursorBackward(E)),this._parser.registerCsiHandler({final:"E"},E=>this.cursorNextLine(E)),this._parser.registerCsiHandler({final:"F"},E=>this.cursorPrecedingLine(E)),this._parser.registerCsiHandler({final:"G"},E=>this.cursorCharAbsolute(E)),this._parser.registerCsiHandler({final:"H"},E=>this.cursorPosition(E)),this._parser.registerCsiHandler({final:"I"},E=>this.cursorForwardTab(E)),this._parser.registerCsiHandler({final:"J"},E=>this.eraseInDisplay(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},E=>this.eraseInDisplay(E,!0)),this._parser.registerCsiHandler({final:"K"},E=>this.eraseInLine(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},E=>this.eraseInLine(E,!0)),this._parser.registerCsiHandler({final:"L"},E=>this.insertLines(E)),this._parser.registerCsiHandler({final:"M"},E=>this.deleteLines(E)),this._parser.registerCsiHandler({final:"P"},E=>this.deleteChars(E)),this._parser.registerCsiHandler({final:"S"},E=>this.scrollUp(E)),this._parser.registerCsiHandler({final:"T"},E=>this.scrollDown(E)),this._parser.registerCsiHandler({final:"X"},E=>this.eraseChars(E)),this._parser.registerCsiHandler({final:"Z"},E=>this.cursorBackwardTab(E)),this._parser.registerCsiHandler({final:"`"},E=>this.charPosAbsolute(E)),this._parser.registerCsiHandler({final:"a"},E=>this.hPositionRelative(E)),this._parser.registerCsiHandler({final:"b"},E=>this.repeatPrecedingCharacter(E)),this._parser.registerCsiHandler({final:"c"},E=>this.sendDeviceAttributesPrimary(E)),this._parser.registerCsiHandler({prefix:">",final:"c"},E=>this.sendDeviceAttributesSecondary(E)),this._parser.registerCsiHandler({final:"d"},E=>this.linePosAbsolute(E)),this._parser.registerCsiHandler({final:"e"},E=>this.vPositionRelative(E)),this._parser.registerCsiHandler({final:"f"},E=>this.hVPosition(E)),this._parser.registerCsiHandler({final:"g"},E=>this.tabClear(E)),this._parser.registerCsiHandler({final:"h"},E=>this.setMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"h"},E=>this.setModePrivate(E)),this._parser.registerCsiHandler({final:"l"},E=>this.resetMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"l"},E=>this.resetModePrivate(E)),this._parser.registerCsiHandler({final:"m"},E=>this.charAttributes(E)),this._parser.registerCsiHandler({final:"n"},E=>this.deviceStatus(E)),this._parser.registerCsiHandler({prefix:"?",final:"n"},E=>this.deviceStatusPrivate(E)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},E=>this.softReset(E)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},E=>this.setCursorStyle(E)),this._parser.registerCsiHandler({final:"r"},E=>this.setScrollRegion(E)),this._parser.registerCsiHandler({final:"s"},E=>this.saveCursor(E)),this._parser.registerCsiHandler({final:"t"},E=>this.windowOptions(E)),this._parser.registerCsiHandler({final:"u"},E=>this.restoreCursor(E)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},E=>this.insertColumns(E)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},E=>this.deleteColumns(E)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},E=>this.selectProtected(E)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},E=>this.requestMode(E,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},E=>this.requestMode(E,!1)),this._parser.setExecuteHandler(c.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(c.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(c.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(c.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(c.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(c.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(c.C1.IND,()=>this.index()),this._parser.setExecuteHandler(c.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(c.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new w.OscHandler(E=>(this.setTitle(E),this.setIconName(E),!0))),this._parser.registerOscHandler(1,new w.OscHandler(E=>this.setIconName(E))),this._parser.registerOscHandler(2,new w.OscHandler(E=>this.setTitle(E))),this._parser.registerOscHandler(4,new w.OscHandler(E=>this.setOrReportIndexedColor(E))),this._parser.registerOscHandler(8,new w.OscHandler(E=>this.setHyperlink(E))),this._parser.registerOscHandler(10,new w.OscHandler(E=>this.setOrReportFgColor(E))),this._parser.registerOscHandler(11,new w.OscHandler(E=>this.setOrReportBgColor(E))),this._parser.registerOscHandler(12,new w.OscHandler(E=>this.setOrReportCursorColor(E))),this._parser.registerOscHandler(104,new w.OscHandler(E=>this.restoreIndexedColor(E))),this._parser.registerOscHandler(110,new w.OscHandler(E=>this.restoreFgColor(E))),this._parser.registerOscHandler(111,new w.OscHandler(E=>this.restoreBgColor(E))),this._parser.registerOscHandler(112,new w.OscHandler(E=>this.restoreCursorColor(E))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let E in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:E},()=>this.selectCharset("("+E)),this._parser.registerEscHandler({intermediates:")",final:E},()=>this.selectCharset(")"+E)),this._parser.registerEscHandler({intermediates:"*",final:E},()=>this.selectCharset("*"+E)),this._parser.registerEscHandler({intermediates:"+",final:E},()=>this.selectCharset("+"+E)),this._parser.registerEscHandler({intermediates:"-",final:E},()=>this.selectCharset("-"+E)),this._parser.registerEscHandler({intermediates:".",final:E},()=>this.selectCharset("."+E)),this._parser.registerEscHandler({intermediates:"/",final:E},()=>this.selectCharset("/"+E));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(E=>(this._logService.error("Parsing error: ",E),E)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new _.DcsHandler((E,L)=>this.requestStatusString(E,L)))}_preserveStack(D,M,x,R){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=M,this._parseStack.decodedLength=x,this._parseStack.position=R}_logSlowResolvingAsync(D){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([D,new Promise((M,x)=>setTimeout(()=>x("#SLOW_TIMEOUT"),5e3))]).catch(M=>{if(M!=="#SLOW_TIMEOUT")throw M;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,M){let x,R=this._activeBuffer.x,P=this._activeBuffer.y,U=0,K=this._parseStack.paused;if(K){if(x=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,M))return this._logSlowResolvingAsync(x),x;R=this._parseStack.cursorStartX,P=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>T&&(U=this._parseStack.position+T)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,E=>String.fromCharCode(E)).join("")}"`),typeof D=="string"?D.split("").map(E=>E.charCodeAt(0)):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<T&&(this._parseBuffer=new Uint32Array(Math.min(D.length,T))),K||this._dirtyRowTracker.clearRange(),D.length>T)for(let E=U;E<D.length;E+=T){let L=E+T<D.length?E+T:D.length,B=typeof D=="string"?this._stringDecoder.decode(D.substring(E,L),this._parseBuffer):this._utf8Decoder.decode(D.subarray(E,L),this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,B))return this._preserveStack(R,P,B,E),this._logSlowResolvingAsync(x),x}else if(!K){let E=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,E))return this._preserveStack(R,P,E,0),this._logSlowResolvingAsync(x),x}this._activeBuffer.x===R&&this._activeBuffer.y===P||this._onCursorMove.fire();let Q=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),O=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);O<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(O,this._bufferService.rows-1),Math.min(Q,this._bufferService.rows-1))}print(D,M,x){let R,P,U=this._charsetService.charset,K=this._optionsService.rawOptions.screenReaderMode,Q=this._bufferService.cols,O=this._coreService.decPrivateModes.wraparound,E=this._coreService.modes.insertMode,L=this._curAttrData,B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&x-M>0&&B.getWidth(this._activeBuffer.x-1)===2&&B.setCellFromCodepoint(this._activeBuffer.x-1,0,1,L);let W=this._parser.precedingJoinState;for(let $=M;$<x;++$){if(R=D[$],R<127&&U){let Qe=U[String.fromCharCode(R)];Qe&&(R=Qe.charCodeAt(0))}let fe=this._unicodeService.charProperties(R,W);P=S.UnicodeService.extractWidth(fe);let De=S.UnicodeService.extractShouldJoin(fe),Ee=De?S.UnicodeService.extractWidth(W):0;if(W=fe,K&&this._onA11yChar.fire((0,g.stringFromCodePoint)(R)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+P-Ee>Q){if(O){let Qe=B,te=this._activeBuffer.x-Ee;for(this._activeBuffer.x=Ee,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),Ee>0&&B instanceof u.BufferLine&&B.copyCellsFrom(Qe,te,0,Ee,!1);te<Q;)Qe.setCellFromCodepoint(te++,0,1,L)}else if(this._activeBuffer.x=Q-1,P===2)continue}if(De&&this._activeBuffer.x){let Qe=B.getWidth(this._activeBuffer.x-1)?1:2;B.addCodepointToCell(this._activeBuffer.x-Qe,R,P);for(let te=P-Ee;--te>=0;)B.setCellFromCodepoint(this._activeBuffer.x++,0,0,L)}else if(E&&(B.insertCells(this._activeBuffer.x,P-Ee,this._activeBuffer.getNullCell(L)),B.getWidth(Q-1)===2&&B.setCellFromCodepoint(Q-1,d.NULL_CELL_CODE,d.NULL_CELL_WIDTH,L)),B.setCellFromCodepoint(this._activeBuffer.x++,R,P,L),P>0)for(;--P;)B.setCellFromCodepoint(this._activeBuffer.x++,0,0,L)}this._parser.precedingJoinState=W,this._activeBuffer.x<Q&&x-M>0&&B.getWidth(this._activeBuffer.x)===0&&!B.hasContent(this._activeBuffer.x)&&B.setCellFromCodepoint(this._activeBuffer.x,0,1,L),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,M){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,M):this._parser.registerCsiHandler(D,x=>!k(x.params[0],this._optionsService.rawOptions.windowOptions)||M(x))}registerDcsHandler(D,M){return this._parser.registerDcsHandler(D,new _.DcsHandler(M))}registerEscHandler(D,M){return this._parser.registerEscHandler(D,M)}registerOscHandler(D,M){return this._parser.registerOscHandler(D,new w.OscHandler(M))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);D.hasWidth(this._activeBuffer.x)&&!D.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,M){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+M):(this._activeBuffer.x=D,this._activeBuffer.y=M),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,M){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+M)}cursorUp(D){let M=this._activeBuffer.y-this._activeBuffer.scrollTop;return M>=0?this._moveCursor(0,-Math.min(M,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){let M=this._activeBuffer.scrollBottom-this._activeBuffer.y;return M>=0?this._moveCursor(0,Math.min(M,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){let M=D.params[0];return M===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:M===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=D.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=D.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){let M=D.params[0];return M===1&&(this._curAttrData.bg|=536870912),M!==2&&M!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,M,x,R=!1,P=!1){let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);U.replaceCells(M,x,this._activeBuffer.getNullCell(this._eraseAttrData()),P),R&&(U.isWrapped=!1)}_resetBufferLine(D,M=!1){let x=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);x&&(x.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),M),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),x.isWrapped=!1)}eraseInDisplay(D,M=!1){let x;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);x<this._bufferService.rows;x++)this._resetBufferLine(x,M);this._dirtyRowTracker.markDirty(x);break;case 1:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x,0,this._activeBuffer.x+1,!0,M),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(x+1).isWrapped=!1);x--;)this._resetBufferLine(x,M);this._dirtyRowTracker.markDirty(0);break;case 2:for(x=this._bufferService.rows,this._dirtyRowTracker.markDirty(x-1);x--;)this._resetBufferLine(x,M);this._dirtyRowTracker.markDirty(0);break;case 3:let R=this._activeBuffer.lines.length-this._bufferService.rows;R>0&&(this._activeBuffer.lines.trimStart(R),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-R,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-R,0),this._onScroll.fire(0))}return!0}eraseInLine(D,M=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,M);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,M)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let M=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,R=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-R+1;for(;M--;)this._activeBuffer.lines.splice(P-1,1),this._activeBuffer.lines.splice(x,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let M=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,R;for(R=this._bufferService.rows-1-this._activeBuffer.scrollBottom,R=this._bufferService.rows-1+this._activeBuffer.ybase-R;M--;)this._activeBuffer.lines.splice(x,1),this._activeBuffer.lines.splice(R,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let M=D.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let M=D.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(u.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);R.deleteCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);R.insertCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);R.insertCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);R.deleteCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){let M=this._parser.precedingJoinState;if(!M)return!0;let x=D.params[0]||1,R=S.UnicodeService.extractWidth(M),P=this._activeBuffer.x-R,U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(P),K=new Uint32Array(U.length*x),Q=0;for(let E=0;E<U.length;){let L=U.codePointAt(E)||0;K[Q++]=L,E+=L>65535?2:1}let O=Q;for(let E=1;E<x;++E)K.copyWithin(O,0,Q),O+=Q;return this.print(K,0,O),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(c.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(c.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(c.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(c.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(c.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[M]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,M){let x=this._coreService.decPrivateModes,{activeProtocol:R,activeEncoding:P}=this._coreMouseService,U=this._coreService,{buffers:K,cols:Q}=this._bufferService,{active:O,alt:E}=K,L=this._optionsService.rawOptions,B=De=>De?1:2,W=D.params[0];return $=W,fe=M?W===2?4:W===4?B(U.modes.insertMode):W===12?3:W===20?B(L.convertEol):0:W===1?B(x.applicationCursorKeys):W===3?L.windowOptions.setWinLines?Q===80?2:Q===132?1:0:0:W===6?B(x.origin):W===7?B(x.wraparound):W===8?3:W===9?B(R==="X10"):W===12?B(L.cursorBlink):W===25?B(!U.isCursorHidden):W===45?B(x.reverseWraparound):W===66?B(x.applicationKeypad):W===67?4:W===1e3?B(R==="VT200"):W===1002?B(R==="DRAG"):W===1003?B(R==="ANY"):W===1004?B(x.sendFocus):W===1005?4:W===1006?B(P==="SGR"):W===1015?4:W===1016?B(P==="SGR_PIXELS"):W===1048?1:W===47||W===1047||W===1049?B(O===E):W===2004?B(x.bracketedPasteMode):0,U.triggerDataEvent(`${c.C0.ESC}[${M?"":"?"}${$};${fe}$y`),!0;var $,fe}_updateAttrColor(D,M,x,R,P){return M===2?(D|=50331648,D&=-16777216,D|=v.AttributeData.fromColorRGB([x,R,P])):M===5&&(D&=-50331904,D|=33554432|255&x),D}_extractColor(D,M,x){let R=[0,0,-1,0,0,0],P=0,U=0;do{if(R[U+P]=D.params[M+U],D.hasSubParams(M+U)){let K=D.getSubParams(M+U),Q=0;do R[1]===5&&(P=1),R[U+Q+1+P]=K[Q];while(++Q<K.length&&Q+U+1+P<R.length);break}if(R[1]===5&&U+P>=2||R[1]===2&&U+P>=5)break;R[1]&&(P=1)}while(++U+M<D.length&&U+P<R.length);for(let K=2;K<R.length;++K)R[K]===-1&&(R[K]=0);switch(R[0]){case 38:x.fg=this._updateAttrColor(x.fg,R[1],R[3],R[4],R[5]);break;case 48:x.bg=this._updateAttrColor(x.bg,R[1],R[3],R[4],R[5]);break;case 58:x.extended=x.extended.clone(),x.extended.underlineColor=this._updateAttrColor(x.extended.underlineColor,R[1],R[3],R[4],R[5])}return U}_processUnderline(D,M){M.extended=M.extended.clone(),(!~D||D>5)&&(D=1),M.extended.underlineStyle=D,M.fg|=268435456,D===0&&(M.fg&=-268435457),M.updateExtended()}_processSGR0(D){D.fg=u.DEFAULT_ATTR_DATA.fg,D.bg=u.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;let M=D.length,x,R=this._curAttrData;for(let P=0;P<M;P++)x=D.params[P],x>=30&&x<=37?(R.fg&=-50331904,R.fg|=16777216|x-30):x>=40&&x<=47?(R.bg&=-50331904,R.bg|=16777216|x-40):x>=90&&x<=97?(R.fg&=-50331904,R.fg|=16777224|x-90):x>=100&&x<=107?(R.bg&=-50331904,R.bg|=16777224|x-100):x===0?this._processSGR0(R):x===1?R.fg|=134217728:x===3?R.bg|=67108864:x===4?(R.fg|=268435456,this._processUnderline(D.hasSubParams(P)?D.getSubParams(P)[0]:1,R)):x===5?R.fg|=536870912:x===7?R.fg|=67108864:x===8?R.fg|=1073741824:x===9?R.fg|=2147483648:x===2?R.bg|=134217728:x===21?this._processUnderline(2,R):x===22?(R.fg&=-134217729,R.bg&=-134217729):x===23?R.bg&=-67108865:x===24?(R.fg&=-268435457,this._processUnderline(0,R)):x===25?R.fg&=-536870913:x===27?R.fg&=-67108865:x===28?R.fg&=-1073741825:x===29?R.fg&=2147483647:x===39?(R.fg&=-67108864,R.fg|=16777215&u.DEFAULT_ATTR_DATA.fg):x===49?(R.bg&=-67108864,R.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):x===38||x===48||x===58?P+=this._extractColor(D,P,R):x===53?R.bg|=1073741824:x===55?R.bg&=-1073741825:x===59?(R.extended=R.extended.clone(),R.extended.underlineColor=-1,R.updateExtended()):x===100?(R.fg&=-67108864,R.fg|=16777215&u.DEFAULT_ATTR_DATA.fg,R.bg&=-67108864,R.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",x);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${c.C0.ESC}[0n`);break;case 6:let M=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[${M};${x}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){let M=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[?${M};${x}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){let M=D.params[0]||1;switch(M){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let x=M%2==1;return this._optionsService.options.cursorBlink=x,!0}setScrollRegion(D){let M=D.params[0]||1,x;return(D.length<2||(x=D.params[1])>this._bufferService.rows||x===0)&&(x=this._bufferService.rows),x>M&&(this._activeBuffer.scrollTop=M-1,this._activeBuffer.scrollBottom=x-1,this._setCursor(0,0)),!0}windowOptions(D){if(!k(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;let M=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:M!==2&&this._onRequestWindowsOptionsReport.fire(I.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(I.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${c.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:M!==0&&M!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),M!==0&&M!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:M!==0&&M!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),M!==0&&M!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){let M=[],x=D.split(";");for(;x.length>1;){let R=x.shift(),P=x.shift();if(/^\d+$/.exec(R)){let U=parseInt(R);if(G(U))if(P==="?")M.push({type:0,index:U});else{let K=(0,b.parseColor)(P);K&&M.push({type:1,index:U,color:K})}}}return M.length&&this._onColor.fire(M),!0}setHyperlink(D){let M=D.split(";");return!(M.length<2)&&(M[1]?this._createHyperlink(M[0],M[1]):!M[0]&&this._finishHyperlink())}_createHyperlink(D,M){this._getCurrentLinkId()&&this._finishHyperlink();let x=D.split(":"),R,P=x.findIndex(U=>U.startsWith("id="));return P!==-1&&(R=x[P].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:R,uri:M}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,M){let x=D.split(";");for(let R=0;R<x.length&&!(M>=this._specialColors.length);++R,++M)if(x[R]==="?")this._onColor.fire([{type:0,index:this._specialColors[M]}]);else{let P=(0,b.parseColor)(x[R]);P&&this._onColor.fire([{type:1,index:this._specialColors[M],color:P}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;let M=[],x=D.split(";");for(let R=0;R<x.length;++R)if(/^\d+$/.exec(x[R])){let P=parseInt(x[R]);G(P)&&M.push({type:2,index:P})}return M.length&&this._onColor.fire(M),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(A[D[0]],p.CHARSETS[D[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){let D=new h.CellData;D.content=4194373,D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let M=0;M<this._bufferService.rows;++M){let x=this._activeBuffer.ybase+this._activeBuffer.y+M,R=this._activeBuffer.lines.get(x);R&&(R.fill(D),R.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,M){let x=this._bufferService.buffer,R=this._optionsService.rawOptions;return(P=>(this._coreService.triggerDataEvent(`${c.C0.ESC}${P}${c.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${x.scrollTop+1};${x.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[R.cursorStyle]-(R.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,M){this._dirtyRowTracker.markRangeDirty(D,M)}}s.InputHandler=F;let j=class{constructor(V){this._bufferService=V,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(V){V<this.start?this.start=V:V>this.end&&(this.end=V)}markRangeDirty(V,D){V>D&&(N=V,V=D,D=N),V<this.start&&(this.start=V),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function G(V){return 0<=V&&V<256}j=a([l(0,C.IBufferService)],j)},844:(i,s)=>{function o(a){for(let l of a)l.dispose();a.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let l=this._disposables.indexOf(a);l!==-1&&this._disposables.splice(l,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(a){this._isDisposed||a===this._value||(this._value?.dispose(),this._value=a)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},s.toDisposable=function(a){return{dispose:a}},s.disposeArray=o,s.getDisposeArrayDisposable=function(a){return{dispose:()=>o(a)}}},1505:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(l,c,p){this._data[l]||(this._data[l]={}),this._data[l][c]=p}get(l,c){return this._data[l]?this._data[l][c]:void 0}clear(){this._data={}}}s.TwoKeyMap=o,s.FourKeyMap=class{constructor(){this._data=new o}set(a,l,c,p,m){this._data.get(a,l)||this._data.set(a,l,new o),this._data.get(a,l).set(c,p,m)}get(a,l,c,p){return this._data.get(a,l)?.get(c,p)}clear(){this._data.clear()}}},6114:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof process<"u"&&"title"in process;let o=s.isNode?"node":navigator.userAgent,a=s.isNode?"node":navigator.platform;s.isFirefox=o.includes("Firefox"),s.isLegacyEdge=o.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(o),s.getSafariVersion=function(){if(!s.isSafari)return 0;let l=o.match(/Version\/(\d+)/);return l===null||l.length<2?0:parseInt(l[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),s.isIpad=a==="iPad",s.isIphone=a==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),s.isLinux=a.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(o)},6106:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let o=0;s.SortedList=class{constructor(a){this._getKey=a,this._array=[]}clear(){this._array.length=0}insert(a){this._array.length!==0?(o=this._search(this._getKey(a)),this._array.splice(o,0,a)):this._array.push(a)}delete(a){if(this._array.length===0)return!1;let l=this._getKey(a);if(l===void 0||(o=this._search(l),o===-1)||this._getKey(this._array[o])!==l)return!1;do if(this._array[o]===a)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===l);return!1}*getKeyIterator(a){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===a)}forEachByKey(a,l){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do l(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===a)}values(){return[...this._array].values()}_search(a){let l=0,c=this._array.length-1;for(;c>=l;){let p=l+c>>1,m=this._getKey(this._array[p]);if(m>a)c=p-1;else{if(!(m<a)){for(;p>0&&this._getKey(this._array[p-1])===a;)p--;return p}l=p+1}}return l}}},7226:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;let a=o(6114);class l{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let y=0,g=0,u=m.timeRemaining(),f=0;for(;this._i<this._tasks.length;){if(y=Date.now(),this._tasks[this._i]()||this._i++,y=Math.max(1,Date.now()-y),g=Math.max(y,g),f=m.timeRemaining(),1.5*g>f)return u-y<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(u-y))}ms`),void this._start();u=f}this.clear()}}class c extends l{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){let y=Date.now()+m;return{timeRemaining:()=>Math.max(0,y-Date.now())}}}s.PriorityTaskQueue=c,s.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends l{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:c,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;let a=o(643);s.updateWindowsModeWrappedState=function(l){let c=l.buffer.lines.get(l.buffer.ybase+l.buffer.y-1),p=c?.get(l.cols-1),m=l.buffer.lines.get(l.buffer.ybase+l.buffer.y);m&&p&&(m.isWrapped=p[a.CHAR_DATA_CODE_INDEX]!==a.NULL_CELL_CODE&&p[a.CHAR_DATA_CODE_INDEX]!==a.WHITESPACE_CELL_CODE)}},3734:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(c){return[c>>>16&255,c>>>8&255,255&c]}static fromColorRGB(c){return(255&c[0])<<16|(255&c[1])<<8|255&c[2]}clone(){let c=new o;return c.fg=this.fg,c.bg=this.bg,c.extended=this.extended.clone(),c}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}s.AttributeData=o;class a{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(c){this._ext=c}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(c){this._ext&=-469762049,this._ext|=c<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(c){this._ext&=-67108864,this._ext|=67108863&c}get urlId(){return this._urlId}set urlId(c){this._urlId=c}get underlineVariantOffset(){let c=(3758096384&this._ext)>>29;return c<0?4294967288^c:c}set underlineVariantOffset(c){this._ext&=536870911,this._ext|=c<<29&3758096384}constructor(c=0,p=0){this._ext=0,this._urlId=0,this._ext=c,this._urlId=p}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=a},9092:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;let a=o(6349),l=o(7226),c=o(3734),p=o(8437),m=o(4634),y=o(511),g=o(643),u=o(4863),f=o(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(d,h,v){this._hasScrollback=d,this._optionsService=h,this._bufferService=v,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=f.DEFAULT_CHARSET,this.markers=[],this._nullCell=y.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=y.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new l.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(d){return d?(this._nullCell.fg=d.fg,this._nullCell.bg=d.bg,this._nullCell.extended=d.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new c.ExtendedAttrs),this._nullCell}getWhitespaceCell(d){return d?(this._whitespaceCell.fg=d.fg,this._whitespaceCell.bg=d.bg,this._whitespaceCell.extended=d.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new c.ExtendedAttrs),this._whitespaceCell}getBlankLine(d,h){return new p.BufferLine(this._bufferService.cols,this.getNullCell(d),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let d=this.ybase+this.y-this.ydisp;return d>=0&&d<this._rows}_getCorrectBufferLength(d){if(!this._hasScrollback)return d;let h=d+this._optionsService.rawOptions.scrollback;return h>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:h}fillViewportRows(d){if(this.lines.length===0){d===void 0&&(d=p.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(d))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(d,h){let v=this.getNullCell(p.DEFAULT_ATTR_DATA),C=0,S=this._getCorrectBufferLength(h);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<d)for(let _=0;_<this.lines.length;_++)C+=+this.lines.get(_).resize(d,v);let w=0;if(this._rows<h)for(let _=this._rows;_<h;_++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(d,v)):this.ybase>0&&this.lines.length<=this.ybase+this.y+w+1?(this.ybase--,w++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(d,v)));else for(let _=this._rows;_>h;_--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){let _=this.lines.length-S;_>0&&(this.lines.trimStart(_),this.ybase=Math.max(this.ybase-_,0),this.ydisp=Math.max(this.ydisp-_,0),this.savedY=Math.max(this.savedY-_,0)),this.lines.maxLength=S}this.x=Math.min(this.x,d-1),this.y=Math.min(this.y,h-1),w&&(this.y+=w),this.savedX=Math.min(this.savedX,d-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(d,h),this._cols>d))for(let w=0;w<this.lines.length;w++)C+=+this.lines.get(w).resize(d,v);this._cols=d,this._rows=h,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let d=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,d=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return d}get _isReflowEnabled(){let d=this._optionsService.rawOptions.windowsPty;return d&&d.buildNumber?this._hasScrollback&&d.backend==="conpty"&&d.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(d,h){this._cols!==d&&(d>this._cols?this._reflowLarger(d,h):this._reflowSmaller(d,h))}_reflowLarger(d,h){let v=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,d,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(v.length>0){let C=(0,m.reflowLargerCreateNewLayout)(this.lines,v);(0,m.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(d,h,C.countRemoved)}}_reflowLargerAdjustViewport(d,h,v){let C=this.getNullCell(p.DEFAULT_ATTR_DATA),S=v;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new p.BufferLine(d,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-v,0)}_reflowSmaller(d,h){let v=this.getNullCell(p.DEFAULT_ATTR_DATA),C=[],S=0;for(let w=this.lines.length-1;w>=0;w--){let _=this.lines.get(w);if(!_||!_.isWrapped&&_.getTrimmedLength()<=d)continue;let b=[_];for(;_.isWrapped&&w>0;)_=this.lines.get(--w),b.unshift(_);let A=this.ybase+this.y;if(A>=w&&A<w+b.length)continue;let T=b[b.length-1].getTrimmedLength(),k=(0,m.reflowSmallerGetNewLineLengths)(b,this._cols,d),I=k.length-b.length,N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+I):Math.max(0,this.lines.length-this.lines.maxLength+I);let F=[];for(let x=0;x<I;x++){let R=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);F.push(R)}F.length>0&&(C.push({start:w+b.length+S,newLines:F}),S+=F.length),b.push(...F);let j=k.length-1,G=k[j];G===0&&(j--,G=k[j]);let V=b.length-I-1,D=T;for(;V>=0;){let x=Math.min(D,G);if(b[j]===void 0)break;if(b[j].copyCellsFrom(b[V],D-x,G-x,x,!0),G-=x,G===0&&(j--,G=k[j]),D-=x,D===0){V--;let R=Math.max(V,0);D=(0,m.getWrappedLineTrimmedLength)(b,R,this._cols)}}for(let x=0;x<b.length;x++)k[x]<d&&b[x].setCell(k[x],v);let M=I-N;for(;M-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+I,this.ybase+h-1)}if(C.length>0){let w=[],_=[];for(let j=0;j<this.lines.length;j++)_.push(this.lines.get(j));let b=this.lines.length,A=b-1,T=0,k=C[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let I=0;for(let j=Math.min(this.lines.maxLength-1,b+S-1);j>=0;j--)if(k&&k.start>A+I){for(let G=k.newLines.length-1;G>=0;G--)this.lines.set(j--,k.newLines[G]);j++,w.push({index:A+1,amount:k.newLines.length}),I+=k.newLines.length,k=C[++T]}else this.lines.set(j,_[A--]);let N=0;for(let j=w.length-1;j>=0;j--)w[j].index+=N,this.lines.onInsertEmitter.fire(w[j]),N+=w[j].amount;let F=Math.max(0,b+S-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(d,h,v=0,C){let S=this.lines.get(d);return S?S.translateToString(h,v,C):""}getWrappedRangeForLine(d){let h=d,v=d;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;v+1<this.lines.length&&this.lines.get(v+1).isWrapped;)v++;return{first:h,last:v}}setupTabStops(d){for(d!=null?this.tabs[d]||(d=this.prevStop(d)):(this.tabs={},d=0);d<this._cols;d+=this._optionsService.rawOptions.tabStopWidth)this.tabs[d]=!0}prevStop(d){for(d==null&&(d=this.x);!this.tabs[--d]&&d>0;);return d>=this._cols?this._cols-1:d<0?0:d}nextStop(d){for(d==null&&(d=this.x);!this.tabs[++d]&&d<this._cols;);return d>=this._cols?this._cols-1:d<0?0:d}clearMarkers(d){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===d&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let d=0;d<this.markers.length;d++)this.markers[d].dispose(),this.markers.splice(d--,1);this._isClearing=!1}addMarker(d){let h=new u.Marker(d);return this.markers.push(h),h.register(this.lines.onTrim(v=>{h.line-=v,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(v=>{h.line>=v.index&&(h.line+=v.amount)})),h.register(this.lines.onDelete(v=>{h.line>=v.index&&h.line<v.index+v.amount&&h.dispose(),h.line>v.index&&(h.line-=v.amount)})),h.register(h.onDispose(()=>this._removeMarker(h))),h}_removeMarker(d){this._isClearing||this.markers.splice(this.markers.indexOf(d),1)}}},8437:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;let a=o(3734),l=o(511),c=o(643),p=o(482);s.DEFAULT_ATTR_DATA=Object.freeze(new a.AttributeData);let m=0;class y{constructor(u,f,d=!1){this.isWrapped=d,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*u);let h=f||l.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]);for(let v=0;v<u;++v)this.setCell(v,h);this.length=u}get(u){let f=this._data[3*u+0],d=2097151&f;return[this._data[3*u+1],2097152&f?this._combined[u]:d?(0,p.stringFromCodePoint)(d):"",f>>22,2097152&f?this._combined[u].charCodeAt(this._combined[u].length-1):d]}set(u,f){this._data[3*u+1]=f[c.CHAR_DATA_ATTR_INDEX],f[c.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[u]=f[1],this._data[3*u+0]=2097152|u|f[c.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*u+0]=f[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[c.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(u){return this._data[3*u+0]>>22}hasWidth(u){return 12582912&this._data[3*u+0]}getFg(u){return this._data[3*u+1]}getBg(u){return this._data[3*u+2]}hasContent(u){return 4194303&this._data[3*u+0]}getCodePoint(u){let f=this._data[3*u+0];return 2097152&f?this._combined[u].charCodeAt(this._combined[u].length-1):2097151&f}isCombined(u){return 2097152&this._data[3*u+0]}getString(u){let f=this._data[3*u+0];return 2097152&f?this._combined[u]:2097151&f?(0,p.stringFromCodePoint)(2097151&f):""}isProtected(u){return 536870912&this._data[3*u+2]}loadCell(u,f){return m=3*u,f.content=this._data[m+0],f.fg=this._data[m+1],f.bg=this._data[m+2],2097152&f.content&&(f.combinedData=this._combined[u]),268435456&f.bg&&(f.extended=this._extendedAttrs[u]),f}setCell(u,f){2097152&f.content&&(this._combined[u]=f.combinedData),268435456&f.bg&&(this._extendedAttrs[u]=f.extended),this._data[3*u+0]=f.content,this._data[3*u+1]=f.fg,this._data[3*u+2]=f.bg}setCellFromCodepoint(u,f,d,h){268435456&h.bg&&(this._extendedAttrs[u]=h.extended),this._data[3*u+0]=f|d<<22,this._data[3*u+1]=h.fg,this._data[3*u+2]=h.bg}addCodepointToCell(u,f,d){let h=this._data[3*u+0];2097152&h?this._combined[u]+=(0,p.stringFromCodePoint)(f):2097151&h?(this._combined[u]=(0,p.stringFromCodePoint)(2097151&h)+(0,p.stringFromCodePoint)(f),h&=-2097152,h|=2097152):h=f|4194304,d&&(h&=-12582913,h|=d<<22),this._data[3*u+0]=h}insertCells(u,f,d){if((u%=this.length)&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u-1,0,1,d),f<this.length-u){let h=new l.CellData;for(let v=this.length-u-f-1;v>=0;--v)this.setCell(u+f+v,this.loadCell(u+v,h));for(let v=0;v<f;++v)this.setCell(u+v,d)}else for(let h=u;h<this.length;++h)this.setCell(h,d);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,d)}deleteCells(u,f,d){if(u%=this.length,f<this.length-u){let h=new l.CellData;for(let v=0;v<this.length-u-f;++v)this.setCell(u+v,this.loadCell(u+f+v,h));for(let v=this.length-f;v<this.length;++v)this.setCell(v,d)}else for(let h=u;h<this.length;++h)this.setCell(h,d);u&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u-1,0,1,d),this.getWidth(u)!==0||this.hasContent(u)||this.setCellFromCodepoint(u,0,1,d)}replaceCells(u,f,d,h=!1){if(h)for(u&&this.getWidth(u-1)===2&&!this.isProtected(u-1)&&this.setCellFromCodepoint(u-1,0,1,d),f<this.length&&this.getWidth(f-1)===2&&!this.isProtected(f)&&this.setCellFromCodepoint(f,0,1,d);u<f&&u<this.length;)this.isProtected(u)||this.setCell(u,d),u++;else for(u&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u-1,0,1,d),f<this.length&&this.getWidth(f-1)===2&&this.setCellFromCodepoint(f,0,1,d);u<f&&u<this.length;)this.setCell(u++,d)}resize(u,f){if(u===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let d=3*u;if(u>this.length){if(this._data.buffer.byteLength>=4*d)this._data=new Uint32Array(this._data.buffer,0,d);else{let h=new Uint32Array(d);h.set(this._data),this._data=h}for(let h=this.length;h<u;++h)this.setCell(h,f)}else{this._data=this._data.subarray(0,d);let h=Object.keys(this._combined);for(let C=0;C<h.length;C++){let S=parseInt(h[C],10);S>=u&&delete this._combined[S]}let v=Object.keys(this._extendedAttrs);for(let C=0;C<v.length;C++){let S=parseInt(v[C],10);S>=u&&delete this._extendedAttrs[S]}}return this.length=u,4*d*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let u=new Uint32Array(this._data.length);return u.set(this._data),this._data=u,1}return 0}fill(u,f=!1){if(f)for(let d=0;d<this.length;++d)this.isProtected(d)||this.setCell(d,u);else{this._combined={},this._extendedAttrs={};for(let d=0;d<this.length;++d)this.setCell(d,u)}}copyFrom(u){this.length!==u.length?this._data=new Uint32Array(u._data):this._data.set(u._data),this.length=u.length,this._combined={};for(let f in u._combined)this._combined[f]=u._combined[f];this._extendedAttrs={};for(let f in u._extendedAttrs)this._extendedAttrs[f]=u._extendedAttrs[f];this.isWrapped=u.isWrapped}clone(){let u=new y(0);u._data=new Uint32Array(this._data),u.length=this.length;for(let f in this._combined)u._combined[f]=this._combined[f];for(let f in this._extendedAttrs)u._extendedAttrs[f]=this._extendedAttrs[f];return u.isWrapped=this.isWrapped,u}getTrimmedLength(){for(let u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0])return u+(this._data[3*u+0]>>22);return 0}getNoBgTrimmedLength(){for(let u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0]||50331648&this._data[3*u+2])return u+(this._data[3*u+0]>>22);return 0}copyCellsFrom(u,f,d,h,v){let C=u._data;if(v)for(let w=h-1;w>=0;w--){for(let _=0;_<3;_++)this._data[3*(d+w)+_]=C[3*(f+w)+_];268435456&C[3*(f+w)+2]&&(this._extendedAttrs[d+w]=u._extendedAttrs[f+w])}else for(let w=0;w<h;w++){for(let _=0;_<3;_++)this._data[3*(d+w)+_]=C[3*(f+w)+_];268435456&C[3*(f+w)+2]&&(this._extendedAttrs[d+w]=u._extendedAttrs[f+w])}let S=Object.keys(u._combined);for(let w=0;w<S.length;w++){let _=parseInt(S[w],10);_>=f&&(this._combined[_-f+d]=u._combined[_])}}translateToString(u,f,d,h){f=f??0,d=d??this.length,u&&(d=Math.min(d,this.getTrimmedLength())),h&&(h.length=0);let v="";for(;f<d;){let C=this._data[3*f+0],S=2097151&C,w=2097152&C?this._combined[f]:S?(0,p.stringFromCodePoint)(S):c.WHITESPACE_CELL_CHAR;if(v+=w,h)for(let _=0;_<w.length;++_)h.push(f);f+=C>>22||1}return h&&h.push(f),v}}s.BufferLine=y},4841:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(o,a){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return a*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(i,s)=>{function o(a,l,c){if(l===a.length-1)return a[l].getTrimmedLength();let p=!a[l].hasContent(c-1)&&a[l].getWidth(c-1)===1,m=a[l+1].getWidth(0)===2;return p&&m?c-1:c}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(a,l,c,p,m){let y=[];for(let g=0;g<a.length-1;g++){let u=g,f=a.get(++u);if(!f.isWrapped)continue;let d=[a.get(g)];for(;u<a.length&&f.isWrapped;)d.push(f),f=a.get(++u);if(p>=g&&p<u){g+=d.length-1;continue}let h=0,v=o(d,h,l),C=1,S=0;for(;C<d.length;){let _=o(d,C,l),b=_-S,A=c-v,T=Math.min(b,A);d[h].copyCellsFrom(d[C],S,v,T,!1),v+=T,v===c&&(h++,v=0),S+=T,S===_&&(C++,S=0),v===0&&h!==0&&d[h-1].getWidth(c-1)===2&&(d[h].copyCellsFrom(d[h-1],c-1,v++,1,!1),d[h-1].setCell(c-1,m))}d[h].replaceCells(v,c,m);let w=0;for(let _=d.length-1;_>0&&(_>h||d[_].getTrimmedLength()===0);_--)w++;w>0&&(y.push(g+d.length-w),y.push(w)),g+=d.length-1}return y},s.reflowLargerCreateNewLayout=function(a,l){let c=[],p=0,m=l[p],y=0;for(let g=0;g<a.length;g++)if(m===g){let u=l[++p];a.onDeleteEmitter.fire({index:g-y,amount:u}),g+=u-1,y+=u,m=l[++p]}else c.push(g);return{layout:c,countRemoved:y}},s.reflowLargerApplyNewLayout=function(a,l){let c=[];for(let p=0;p<l.length;p++)c.push(a.get(l[p]));for(let p=0;p<c.length;p++)a.set(p,c[p]);a.length=l.length},s.reflowSmallerGetNewLineLengths=function(a,l,c){let p=[],m=a.map((f,d)=>o(a,d,l)).reduce((f,d)=>f+d),y=0,g=0,u=0;for(;u<m;){if(m-u<c){p.push(m-u);break}y+=c;let f=o(a,g,l);y>f&&(y-=f,g++);let d=a[g].getWidth(y-1)===2;d&&y--;let h=d?c-1:c;p.push(h),u+=h}return p},s.getWrappedLineTrimmedLength=o},5295:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;let a=o(8460),l=o(844),c=o(9092);class p extends l.Disposable{constructor(y,g){super(),this._optionsService=y,this._bufferService=g,this._onBufferActivate=this.register(new a.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new c.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new c.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(y){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(y),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(y,g){this._normal.resize(y,g),this._alt.resize(y,g),this.setupTabStops(y)}setupTabStops(y){this._normal.setupTabStops(y),this._alt.setupTabStops(y)}}s.BufferSet=p},511:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;let a=o(482),l=o(643),c=o(3734);class p extends c.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new c.ExtendedAttrs,this.combinedData=""}static fromCharData(y){let g=new p;return g.setFromCharData(y),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(y){this.fg=y[l.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(y[l.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(y[l.CHAR_DATA_CHAR_INDEX].length===2){let u=y[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=u&&u<=56319){let f=y[l.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=f&&f<=57343?this.content=1024*(u-55296)+f-56320+65536|y[l.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=y[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[l.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=y[l.CHAR_DATA_CHAR_INDEX],this.content=2097152|y[l.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=p},643:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;let a=o(8460),l=o(844);class c{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=c._nextId++,this._onDispose=this.register(new a.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,l.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}s.Marker=c,c._nextId=1},7116:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},s.CHARSETS.A={"#":"\xA3"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},s.CHARSETS.C=s.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},s.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},s.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},s.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},s.CHARSETS.E=s.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},s.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},s.CHARSETS.H=s.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(i,s)=>{var o,a,l;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(c){c.NUL="\0",c.SOH="",c.STX="",c.ETX="",c.EOT="",c.ENQ="",c.ACK="",c.BEL="\x07",c.BS="\b",c.HT="	",c.LF=`
`,c.VT="\v",c.FF="\f",c.CR="\r",c.SO="",c.SI="",c.DLE="",c.DC1="",c.DC2="",c.DC3="",c.DC4="",c.NAK="",c.SYN="",c.ETB="",c.CAN="",c.EM="",c.SUB="",c.ESC="\x1B",c.FS="",c.GS="",c.RS="",c.US="",c.SP=" ",c.DEL="\x7F"}(o||(s.C0=o={})),function(c){c.PAD="\x80",c.HOP="\x81",c.BPH="\x82",c.NBH="\x83",c.IND="\x84",c.NEL="\x85",c.SSA="\x86",c.ESA="\x87",c.HTS="\x88",c.HTJ="\x89",c.VTS="\x8A",c.PLD="\x8B",c.PLU="\x8C",c.RI="\x8D",c.SS2="\x8E",c.SS3="\x8F",c.DCS="\x90",c.PU1="\x91",c.PU2="\x92",c.STS="\x93",c.CCH="\x94",c.MW="\x95",c.SPA="\x96",c.EPA="\x97",c.SOS="\x98",c.SGCI="\x99",c.SCI="\x9A",c.CSI="\x9B",c.ST="\x9C",c.OSC="\x9D",c.PM="\x9E",c.APC="\x9F"}(a||(s.C1=a={})),function(c){c.ST=`${o.ESC}\\`}(l||(s.C1_ESCAPED=l={}))},7399:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;let a=o(2584),l={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(c,p,m,y){let g={type:0,cancel:!1,key:void 0},u=(c.shiftKey?1:0)|(c.altKey?2:0)|(c.ctrlKey?4:0)|(c.metaKey?8:0);switch(c.keyCode){case 0:c.key==="UIKeyInputUpArrow"?g.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A":c.key==="UIKeyInputLeftArrow"?g.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D":c.key==="UIKeyInputRightArrow"?g.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C":c.key==="UIKeyInputDownArrow"&&(g.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B");break;case 8:g.key=c.ctrlKey?"\b":a.C0.DEL,c.altKey&&(g.key=a.C0.ESC+g.key);break;case 9:if(c.shiftKey){g.key=a.C0.ESC+"[Z";break}g.key=a.C0.HT,g.cancel=!0;break;case 13:g.key=c.altKey?a.C0.ESC+a.C0.CR:a.C0.CR,g.cancel=!0;break;case 27:g.key=a.C0.ESC,c.altKey&&(g.key=a.C0.ESC+a.C0.ESC),g.cancel=!0;break;case 37:if(c.metaKey)break;u?(g.key=a.C0.ESC+"[1;"+(u+1)+"D",g.key===a.C0.ESC+"[1;3D"&&(g.key=a.C0.ESC+(m?"b":"[1;5D"))):g.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D";break;case 39:if(c.metaKey)break;u?(g.key=a.C0.ESC+"[1;"+(u+1)+"C",g.key===a.C0.ESC+"[1;3C"&&(g.key=a.C0.ESC+(m?"f":"[1;5C"))):g.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C";break;case 38:if(c.metaKey)break;u?(g.key=a.C0.ESC+"[1;"+(u+1)+"A",m||g.key!==a.C0.ESC+"[1;3A"||(g.key=a.C0.ESC+"[1;5A")):g.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A";break;case 40:if(c.metaKey)break;u?(g.key=a.C0.ESC+"[1;"+(u+1)+"B",m||g.key!==a.C0.ESC+"[1;3B"||(g.key=a.C0.ESC+"[1;5B")):g.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B";break;case 45:c.shiftKey||c.ctrlKey||(g.key=a.C0.ESC+"[2~");break;case 46:g.key=u?a.C0.ESC+"[3;"+(u+1)+"~":a.C0.ESC+"[3~";break;case 36:g.key=u?a.C0.ESC+"[1;"+(u+1)+"H":p?a.C0.ESC+"OH":a.C0.ESC+"[H";break;case 35:g.key=u?a.C0.ESC+"[1;"+(u+1)+"F":p?a.C0.ESC+"OF":a.C0.ESC+"[F";break;case 33:c.shiftKey?g.type=2:c.ctrlKey?g.key=a.C0.ESC+"[5;"+(u+1)+"~":g.key=a.C0.ESC+"[5~";break;case 34:c.shiftKey?g.type=3:c.ctrlKey?g.key=a.C0.ESC+"[6;"+(u+1)+"~":g.key=a.C0.ESC+"[6~";break;case 112:g.key=u?a.C0.ESC+"[1;"+(u+1)+"P":a.C0.ESC+"OP";break;case 113:g.key=u?a.C0.ESC+"[1;"+(u+1)+"Q":a.C0.ESC+"OQ";break;case 114:g.key=u?a.C0.ESC+"[1;"+(u+1)+"R":a.C0.ESC+"OR";break;case 115:g.key=u?a.C0.ESC+"[1;"+(u+1)+"S":a.C0.ESC+"OS";break;case 116:g.key=u?a.C0.ESC+"[15;"+(u+1)+"~":a.C0.ESC+"[15~";break;case 117:g.key=u?a.C0.ESC+"[17;"+(u+1)+"~":a.C0.ESC+"[17~";break;case 118:g.key=u?a.C0.ESC+"[18;"+(u+1)+"~":a.C0.ESC+"[18~";break;case 119:g.key=u?a.C0.ESC+"[19;"+(u+1)+"~":a.C0.ESC+"[19~";break;case 120:g.key=u?a.C0.ESC+"[20;"+(u+1)+"~":a.C0.ESC+"[20~";break;case 121:g.key=u?a.C0.ESC+"[21;"+(u+1)+"~":a.C0.ESC+"[21~";break;case 122:g.key=u?a.C0.ESC+"[23;"+(u+1)+"~":a.C0.ESC+"[23~";break;case 123:g.key=u?a.C0.ESC+"[24;"+(u+1)+"~":a.C0.ESC+"[24~";break;default:if(!c.ctrlKey||c.shiftKey||c.altKey||c.metaKey)if(m&&!y||!c.altKey||c.metaKey)!m||c.altKey||c.ctrlKey||c.shiftKey||!c.metaKey?c.key&&!c.ctrlKey&&!c.altKey&&!c.metaKey&&c.keyCode>=48&&c.key.length===1?g.key=c.key:c.key&&c.ctrlKey&&(c.key==="_"&&(g.key=a.C0.US),c.key==="@"&&(g.key=a.C0.NUL)):c.keyCode===65&&(g.type=1);else{let f=l[c.keyCode],d=f?.[c.shiftKey?1:0];if(d)g.key=a.C0.ESC+d;else if(c.keyCode>=65&&c.keyCode<=90){let h=c.ctrlKey?c.keyCode-64:c.keyCode+32,v=String.fromCharCode(h);c.shiftKey&&(v=v.toUpperCase()),g.key=a.C0.ESC+v}else if(c.keyCode===32)g.key=a.C0.ESC+(c.ctrlKey?a.C0.NUL:" ");else if(c.key==="Dead"&&c.code.startsWith("Key")){let h=c.code.slice(3,4);c.shiftKey||(h=h.toLowerCase()),g.key=a.C0.ESC+h,g.cancel=!0}}else c.keyCode>=65&&c.keyCode<=90?g.key=String.fromCharCode(c.keyCode-64):c.keyCode===32?g.key=a.C0.NUL:c.keyCode>=51&&c.keyCode<=55?g.key=String.fromCharCode(c.keyCode-51+27):c.keyCode===56?g.key=a.C0.DEL:c.keyCode===219?g.key=a.C0.ESC:c.keyCode===220?g.key=a.C0.FS:c.keyCode===221&&(g.key=a.C0.GS)}return g}},482:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},s.utf32ToString=function(o,a=0,l=o.length){let c="";for(let p=a;p<l;++p){let m=o[p];m>65535?(m-=65536,c+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):c+=String.fromCharCode(m)}return c},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,a){let l=o.length;if(!l)return 0;let c=0,p=0;if(this._interim){let m=o.charCodeAt(p++);56320<=m&&m<=57343?a[c++]=1024*(this._interim-55296)+m-56320+65536:(a[c++]=this._interim,a[c++]=m),this._interim=0}for(let m=p;m<l;++m){let y=o.charCodeAt(m);if(55296<=y&&y<=56319){if(++m>=l)return this._interim=y,c;let g=o.charCodeAt(m);56320<=g&&g<=57343?a[c++]=1024*(y-55296)+g-56320+65536:(a[c++]=y,a[c++]=g)}else y!==65279&&(a[c++]=y)}return c}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,a){let l=o.length;if(!l)return 0;let c,p,m,y,g=0,u=0,f=0;if(this.interim[0]){let v=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let S,w=0;for(;(S=63&this.interim[++w])&&w<4;)C<<=6,C|=S;let _=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=_-w;for(;f<b;){if(f>=l)return 0;if(S=o[f++],(192&S)!=128){f--,v=!0;break}this.interim[w++]=S,C<<=6,C|=63&S}v||(_===2?C<128?f--:a[g++]=C:_===3?C<2048||C>=55296&&C<=57343||C===65279||(a[g++]=C):C<65536||C>1114111||(a[g++]=C)),this.interim.fill(0)}let d=l-4,h=f;for(;h<l;){for(;!(!(h<d)||128&(c=o[h])||128&(p=o[h+1])||128&(m=o[h+2])||128&(y=o[h+3]));)a[g++]=c,a[g++]=p,a[g++]=m,a[g++]=y,h+=4;if(c=o[h++],c<128)a[g++]=c;else if((224&c)==192){if(h>=l)return this.interim[0]=c,g;if(p=o[h++],(192&p)!=128){h--;continue}if(u=(31&c)<<6|63&p,u<128){h--;continue}a[g++]=u}else if((240&c)==224){if(h>=l)return this.interim[0]=c,g;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=l)return this.interim[0]=c,this.interim[1]=p,g;if(m=o[h++],(192&m)!=128){h--;continue}if(u=(15&c)<<12|(63&p)<<6|63&m,u<2048||u>=55296&&u<=57343||u===65279)continue;a[g++]=u}else if((248&c)==240){if(h>=l)return this.interim[0]=c,g;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=l)return this.interim[0]=c,this.interim[1]=p,g;if(m=o[h++],(192&m)!=128){h--;continue}if(h>=l)return this.interim[0]=c,this.interim[1]=p,this.interim[2]=m,g;if(y=o[h++],(192&y)!=128){h--;continue}if(u=(7&c)<<18|(63&p)<<12|(63&m)<<6|63&y,u<65536||u>1114111)continue;a[g++]=u}}return g}}},225:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;let a=o(1480),l=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],p;s.UnicodeV6=class{constructor(){if(this.version="6",!p){p=new Uint8Array(65536),p.fill(1),p[0]=0,p.fill(0,1,32),p.fill(0,127,160),p.fill(2,4352,4448),p[9001]=2,p[9002]=2,p.fill(2,11904,42192),p[12351]=1,p.fill(2,44032,55204),p.fill(2,63744,64256),p.fill(2,65040,65050),p.fill(2,65072,65136),p.fill(2,65280,65377),p.fill(2,65504,65511);for(let m=0;m<l.length;++m)p.fill(0,l[m][0],l[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?p[m]:function(y,g){let u,f=0,d=g.length-1;if(y<g[0][0]||y>g[d][1])return!1;for(;d>=f;)if(u=f+d>>1,y>g[u][1])f=u+1;else{if(!(y<g[u][0]))return!0;d=u-1}return!1}(m,c)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}charProperties(m,y){let g=this.wcwidth(m),u=g===0&&y!==0;if(u){let f=a.UnicodeService.extractWidth(y);f===0?u=!1:f>g&&(g=f)}return a.UnicodeService.createPropertyValue(0,g,u)}}},5981:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;let a=o(8460),l=o(844);class c extends l.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,y){if(y!==void 0&&this._syncCalls>y)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);let u=this._callbacks.shift();u&&u()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,y){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(y),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(y)}_innerWrite(m=0,y=!0){let g=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let u=this._writeBuffer[this._bufferOffset],f=this._action(u,y);if(f){let h=v=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,v)):this._innerWrite(g,v);return void f.catch(v=>(queueMicrotask(()=>{throw v}),Promise.resolve(!1))).then(h)}let d=this._callbacks[this._bufferOffset];if(d&&d(),this._bufferOffset++,this._pendingData-=u.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=c},5941:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;let o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,a=/^[\da-f]+$/;function l(c,p){let m=c.toString(16),y=m.length<2?"0"+m:m;switch(p){case 4:return m[0];case 8:return y;case 12:return(y+y).slice(0,3);default:return y+y}}s.parseColor=function(c){if(!c)return;let p=c.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);let m=o.exec(p);if(m){let y=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/y*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/y*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/y*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),a.exec(p)&&[3,6,9,12].includes(p.length))){let m=p.length/3,y=[0,0,0];for(let g=0;g<3;++g){let u=parseInt(p.slice(m*g,m*g+m),16);y[g]=m===1?u<<4:m===2?u:m===3?u>>4:u>>8}return y}},s.toRgbString=function(c,p=16){let[m,y,g]=c;return`rgb:${l(m,p)}/${l(y,p)}/${l(g,p)}`}},5770:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;let a=o(482),l=o(8742),c=o(5770),p=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(y,g){this._handlers[y]===void 0&&(this._handlers[y]=[]);let u=this._handlers[y];return u.push(g),{dispose:()=>{let f=u.indexOf(g);f!==-1&&u.splice(f,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}reset(){if(this._active.length)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(y,g){if(this.reset(),this._ident=y,this._active=this._handlers[y]||p,this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(y,g,u){if(this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].put(y,g,u);else this._handlerFb(this._ident,"PUT",(0,a.utf32ToString)(y,g,u))}unhook(y,g=!0){if(this._active.length){let u=!1,f=this._active.length-1,d=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,u=g,d=this._stack.fallThrough,this._stack.paused=!1),!d&&u===!1){for(;f>=0&&(u=this._active[f].unhook(y),u!==!0);f--)if(u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,u;f--}for(;f>=0;f--)if(u=this._active[f].unhook(!1),u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,u}else this._handlerFb(this._ident,"UNHOOK",y);this._active=p,this._ident=0}};let m=new l.Params;m.addParam(0),s.DcsHandler=class{constructor(y){this._handler=y,this._data="",this._params=m,this._hitLimit=!1}hook(y){this._params=y.length>1||y.params[0]?y.clone():m,this._data="",this._hitLimit=!1}put(y,g,u){this._hitLimit||(this._data+=(0,a.utf32ToString)(y,g,u),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(y){let g=!1;if(this._hitLimit)g=!1;else if(y&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(u=>(this._params=m,this._data="",this._hitLimit=!1,u));return this._params=m,this._data="",this._hitLimit=!1,g}}},2015:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;let a=o(844),l=o(8742),c=o(6242),p=o(6351);class m{constructor(f){this.table=new Uint8Array(f)}setDefault(f,d){this.table.fill(f<<4|d)}add(f,d,h,v){this.table[d<<8|f]=h<<4|v}addMany(f,d,h,v){for(let C=0;C<f.length;C++)this.table[d<<8|f[C]]=h<<4|v}}s.TransitionTable=m;let y=160;s.VT500_TRANSITION_TABLE=function(){let u=new m(4095),f=Array.apply(null,Array(256)).map((w,_)=>_),d=(w,_)=>f.slice(w,_),h=d(32,127),v=d(0,24);v.push(25),v.push.apply(v,d(28,32));let C=d(0,14),S;for(S in u.setDefault(1,0),u.addMany(h,0,2,0),C)u.addMany([24,26,153,154],S,3,0),u.addMany(d(128,144),S,3,0),u.addMany(d(144,152),S,3,0),u.add(156,S,0,0),u.add(27,S,11,1),u.add(157,S,4,8),u.addMany([152,158,159],S,0,7),u.add(155,S,11,3),u.add(144,S,11,9);return u.addMany(v,0,3,0),u.addMany(v,1,3,1),u.add(127,1,0,1),u.addMany(v,8,0,8),u.addMany(v,3,3,3),u.add(127,3,0,3),u.addMany(v,4,3,4),u.add(127,4,0,4),u.addMany(v,6,3,6),u.addMany(v,5,3,5),u.add(127,5,0,5),u.addMany(v,2,3,2),u.add(127,2,0,2),u.add(93,1,4,8),u.addMany(h,8,5,8),u.add(127,8,5,8),u.addMany([156,27,24,26,7],8,6,0),u.addMany(d(28,32),8,0,8),u.addMany([88,94,95],1,0,7),u.addMany(h,7,0,7),u.addMany(v,7,0,7),u.add(156,7,0,0),u.add(127,7,0,7),u.add(91,1,11,3),u.addMany(d(64,127),3,7,0),u.addMany(d(48,60),3,8,4),u.addMany([60,61,62,63],3,9,4),u.addMany(d(48,60),4,8,4),u.addMany(d(64,127),4,7,0),u.addMany([60,61,62,63],4,0,6),u.addMany(d(32,64),6,0,6),u.add(127,6,0,6),u.addMany(d(64,127),6,0,0),u.addMany(d(32,48),3,9,5),u.addMany(d(32,48),5,9,5),u.addMany(d(48,64),5,0,6),u.addMany(d(64,127),5,7,0),u.addMany(d(32,48),4,9,5),u.addMany(d(32,48),1,9,2),u.addMany(d(32,48),2,9,2),u.addMany(d(48,127),2,10,0),u.addMany(d(48,80),1,10,0),u.addMany(d(81,88),1,10,0),u.addMany([89,90,92],1,10,0),u.addMany(d(96,127),1,10,0),u.add(80,1,11,9),u.addMany(v,9,0,9),u.add(127,9,0,9),u.addMany(d(28,32),9,0,9),u.addMany(d(32,48),9,9,12),u.addMany(d(48,60),9,8,10),u.addMany([60,61,62,63],9,9,10),u.addMany(v,11,0,11),u.addMany(d(32,128),11,0,11),u.addMany(d(28,32),11,0,11),u.addMany(v,10,0,10),u.add(127,10,0,10),u.addMany(d(28,32),10,0,10),u.addMany(d(48,60),10,8,10),u.addMany([60,61,62,63],10,0,11),u.addMany(d(32,48),10,9,12),u.addMany(v,12,0,12),u.add(127,12,0,12),u.addMany(d(28,32),12,0,12),u.addMany(d(32,48),12,9,12),u.addMany(d(48,64),12,0,11),u.addMany(d(64,127),12,12,13),u.addMany(d(64,127),10,12,13),u.addMany(d(64,127),9,12,13),u.addMany(v,13,13,13),u.addMany(h,13,13,13),u.add(127,13,0,13),u.addMany([27,156,24,26],13,14,0),u.add(y,0,2,0),u.add(y,8,5,8),u.add(y,6,0,6),u.add(y,11,0,11),u.add(y,13,13,13),u}();class g extends a.Disposable{constructor(f=s.VT500_TRANSITION_TABLE){super(),this._transitions=f,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new l.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(d,h,v)=>{},this._executeHandlerFb=d=>{},this._csiHandlerFb=(d,h)=>{},this._escHandlerFb=d=>{},this._errorHandlerFb=d=>d,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,a.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new c.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(f,d=[64,126]){let h=0;if(f.prefix){if(f.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=f.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(f.intermediates){if(f.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<f.intermediates.length;++C){let S=f.intermediates.charCodeAt(C);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=S}}if(f.final.length!==1)throw new Error("final must be a single byte");let v=f.final.charCodeAt(0);if(d[0]>v||v>d[1])throw new Error(`final must be in range ${d[0]} .. ${d[1]}`);return h<<=8,h|=v,h}identToString(f){let d=[];for(;f;)d.push(String.fromCharCode(255&f)),f>>=8;return d.reverse().join("")}setPrintHandler(f){this._printHandler=f}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(f,d){let h=this._identifier(f,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);let v=this._escHandlers[h];return v.push(d),{dispose:()=>{let C=v.indexOf(d);C!==-1&&v.splice(C,1)}}}clearEscHandler(f){this._escHandlers[this._identifier(f,[48,126])]&&delete this._escHandlers[this._identifier(f,[48,126])]}setEscHandlerFallback(f){this._escHandlerFb=f}setExecuteHandler(f,d){this._executeHandlers[f.charCodeAt(0)]=d}clearExecuteHandler(f){this._executeHandlers[f.charCodeAt(0)]&&delete this._executeHandlers[f.charCodeAt(0)]}setExecuteHandlerFallback(f){this._executeHandlerFb=f}registerCsiHandler(f,d){let h=this._identifier(f);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);let v=this._csiHandlers[h];return v.push(d),{dispose:()=>{let C=v.indexOf(d);C!==-1&&v.splice(C,1)}}}clearCsiHandler(f){this._csiHandlers[this._identifier(f)]&&delete this._csiHandlers[this._identifier(f)]}setCsiHandlerFallback(f){this._csiHandlerFb=f}registerDcsHandler(f,d){return this._dcsParser.registerHandler(this._identifier(f),d)}clearDcsHandler(f){this._dcsParser.clearHandler(this._identifier(f))}setDcsHandlerFallback(f){this._dcsParser.setHandlerFallback(f)}registerOscHandler(f,d){return this._oscParser.registerHandler(f,d)}clearOscHandler(f){this._oscParser.clearHandler(f)}setOscHandlerFallback(f){this._oscParser.setHandlerFallback(f)}setErrorHandler(f){this._errorHandler=f}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(f,d,h,v,C){this._parseStack.state=f,this._parseStack.handlers=d,this._parseStack.handlerPos=h,this._parseStack.transition=v,this._parseStack.chunkPos=C}parse(f,d,h){let v,C=0,S=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let _=this._parseStack.handlers,b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&b>-1){for(;b>=0&&(v=_[b](this._params),v!==!0);b--)if(v instanceof Promise)return this._parseStack.handlerPos=b,v}this._parseStack.handlers=[];break;case 4:if(h===!1&&b>-1){for(;b>=0&&(v=_[b](),v!==!0);b--)if(v instanceof Promise)return this._parseStack.handlerPos=b,v}this._parseStack.handlers=[];break;case 6:if(C=f[this._parseStack.chunkPos],v=this._dcsParser.unhook(C!==24&&C!==26,h),v)return v;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=f[this._parseStack.chunkPos],v=this._oscParser.end(C!==24&&C!==26,h),v)return v;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let _=w;_<d;++_){switch(C=f[_],S=this._transitions.table[this.currentState<<8|(C<160?C:y)],S>>4){case 2:for(let I=_+1;;++I){if(I>=d||(C=f[I])<32||C>126&&C<y){this._printHandler(f,_,I),_=I-1;break}if(++I>=d||(C=f[I])<32||C>126&&C<y){this._printHandler(f,_,I),_=I-1;break}if(++I>=d||(C=f[I])<32||C>126&&C<y){this._printHandler(f,_,I),_=I-1;break}if(++I>=d||(C=f[I])<32||C>126&&C<y){this._printHandler(f,_,I),_=I-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:_,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let b=this._csiHandlers[this._collect<<8|C],A=b?b.length-1:-1;for(;A>=0&&(v=b[A](this._params),v!==!0);A--)if(v instanceof Promise)return this._preserveStack(3,b,A,S,_),v;A<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingJoinState=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++_<d&&(C=f[_])>47&&C<60);_--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let T=this._escHandlers[this._collect<<8|C],k=T?T.length-1:-1;for(;k>=0&&(v=T[k](),v!==!0);k--)if(v instanceof Promise)return this._preserveStack(4,T,k,S,_),v;k<0&&this._escHandlerFb(this._collect<<8|C),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let I=_+1;;++I)if(I>=d||(C=f[I])===24||C===26||C===27||C>127&&C<y){this._dcsParser.put(f,_,I),_=I-1;break}break;case 14:if(v=this._dcsParser.unhook(C!==24&&C!==26),v)return this._preserveStack(6,[],0,S,_),v;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let I=_+1;;I++)if(I>=d||(C=f[I])<32||C>127&&C<y){this._oscParser.put(f,_,I),_=I-1;break}break;case 6:if(v=this._oscParser.end(C!==24&&C!==26),v)return this._preserveStack(5,[],0,S,_),v;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&S}}}s.EscapeSequenceParser=g},6242:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;let a=o(5770),l=o(482),c=[];s.OscParser=class{constructor(){this._state=0,this._active=c,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,m){this._handlers[p]===void 0&&(this._handlers[p]=[]);let y=this._handlers[p];return y.push(m),{dispose:()=>{let g=y.indexOf(m);g!==-1&&y.splice(g,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=c}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=c,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||c,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,m,y){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(p,m,y);else this._handlerFb(this._id,"PUT",(0,l.utf32ToString)(p,m,y))}start(){this.reset(),this._state=1}put(p,m,y){if(this._state!==3){if(this._state===1)for(;m<y;){let g=p[m++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&y-m>0&&this._put(p,m,y)}}end(p,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let y=!1,g=this._active.length-1,u=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,y=m,u=this._stack.fallThrough,this._stack.paused=!1),!u&&y===!1){for(;g>=0&&(y=this._active[g].end(p),y!==!0);g--)if(y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,y;g--}for(;g>=0;g--)if(y=this._active[g].end(!1),y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,y}else this._handlerFb(this._id,"END",p);this._active=c,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,m,y){this._hitLimit||(this._data+=(0,l.utf32ToString)(p,m,y),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let m=!1;if(this._hitLimit)m=!1;else if(p&&(m=this._handler(this._data),m instanceof Promise))return m.then(y=>(this._data="",this._hitLimit=!1,y));return this._data="",this._hitLimit=!1,m}}},8742:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;let o=2147483647;class a{static fromArray(c){let p=new a;if(!c.length)return p;for(let m=Array.isArray(c[0])?1:0;m<c.length;++m){let y=c[m];if(Array.isArray(y))for(let g=0;g<y.length;++g)p.addSubParam(y[g]);else p.addParam(y)}return p}constructor(c=32,p=32){if(this.maxLength=c,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(c),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(c),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let c=new a(this.maxLength,this.maxSubParamsLength);return c.params.set(this.params),c.length=this.length,c._subParams.set(this._subParams),c._subParamsLength=this._subParamsLength,c._subParamsIdx.set(this._subParamsIdx),c._rejectDigits=this._rejectDigits,c._rejectSubDigits=this._rejectSubDigits,c._digitIsSub=this._digitIsSub,c}toArray(){let c=[];for(let p=0;p<this.length;++p){c.push(this.params[p]);let m=this._subParamsIdx[p]>>8,y=255&this._subParamsIdx[p];y-m>0&&c.push(Array.prototype.slice.call(this._subParams,m,y))}return c}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(c){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=c>o?o:c}}addSubParam(c){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=c>o?o:c,this._subParamsIdx[this.length-1]++}}hasSubParams(c){return(255&this._subParamsIdx[c])-(this._subParamsIdx[c]>>8)>0}getSubParams(c){let p=this._subParamsIdx[c]>>8,m=255&this._subParamsIdx[c];return m-p>0?this._subParams.subarray(p,m):null}getSubParamsAll(){let c={};for(let p=0;p<this.length;++p){let m=this._subParamsIdx[p]>>8,y=255&this._subParamsIdx[p];y-m>0&&(c[p]=this._subParams.slice(m,y))}return c}addDigit(c){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let m=this._digitIsSub?this._subParams:this.params,y=m[p-1];m[p-1]=~y?Math.min(10*y+c,o):c}}s.Params=a},5741:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,a){let l={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(l),a.dispose=()=>this._wrappedAddonDispose(l),a.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let a=-1;for(let l=0;l<this._addons.length;l++)if(this._addons[l]===o){a=l;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(a,1)}}},8771:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;let a=o(3785),l=o(511);s.BufferApiView=class{constructor(c,p){this._buffer=c,this.type=p}init(c){return this._buffer=c,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(c){let p=this._buffer.lines.get(c);if(p)return new a.BufferLineApiView(p)}getNullCell(){return new l.CellData}}},3785:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;let a=o(511);s.BufferLineApiView=class{constructor(l){this._line=l}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(l,c){if(!(l<0||l>=this._line.length))return c?(this._line.loadCell(l,c),c):this._line.loadCell(l,new a.CellData)}translateToString(l,c,p){return this._line.translateToString(l,c,p)}}},8285:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;let a=o(8771),l=o(8460),c=o(844);class p extends c.Disposable{constructor(y){super(),this._core=y,this._onBufferChange=this.register(new l.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new a.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new a.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=p},7975:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,a){return this._core.registerCsiHandler(o,l=>a(l.toArray()))}addCsiHandler(o,a){return this.registerCsiHandler(o,a)}registerDcsHandler(o,a){return this._core.registerDcsHandler(o,(l,c)=>a(l,c.toArray()))}addDcsHandler(o,a){return this.registerDcsHandler(o,a)}registerEscHandler(o,a){return this._core.registerEscHandler(o,a)}addEscHandler(o,a){return this.registerEscHandler(o,a)}registerOscHandler(o,a){return this._core.registerOscHandler(o,a)}addOscHandler(o,a){return this.registerOscHandler(o,a)}}},7090:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(i,s,o){var a=this&&this.__decorate||function(u,f,d,h){var v,C=arguments.length,S=C<3?f:h===null?h=Object.getOwnPropertyDescriptor(f,d):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(u,f,d,h);else for(var w=u.length-1;w>=0;w--)(v=u[w])&&(S=(C<3?v(S):C>3?v(f,d,S):v(f,d))||S);return C>3&&S&&Object.defineProperty(f,d,S),S},l=this&&this.__param||function(u,f){return function(d,h){f(d,h,u)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;let c=o(8460),p=o(844),m=o(5295),y=o(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let g=s.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(u){super(),this.isUserScrolling=!1,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(u.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(u.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(u,this))}resize(u,f){this.cols=u,this.rows=f,this.buffers.resize(u,f),this._onResize.fire({cols:u,rows:f})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(u,f=!1){let d=this.buffer,h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===u.fg&&h.getBg(0)===u.bg||(h=d.getBlankLine(u,f),this._cachedBlankLine=h),h.isWrapped=f;let v=d.ybase+d.scrollTop,C=d.ybase+d.scrollBottom;if(d.scrollTop===0){let S=d.lines.isFull;C===d.lines.length-1?S?d.lines.recycle().copyFrom(h):d.lines.push(h.clone()):d.lines.splice(C+1,0,h.clone()),S?this.isUserScrolling&&(d.ydisp=Math.max(d.ydisp-1,0)):(d.ybase++,this.isUserScrolling||d.ydisp++)}else{let S=C-v+1;d.lines.shiftElements(v+1,S-1,-1),d.lines.set(C,h.clone())}this.isUserScrolling||(d.ydisp=d.ybase),this._onScroll.fire(d.ydisp)}scrollLines(u,f,d){let h=this.buffer;if(u<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else u+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);let v=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+u,h.ybase),0),v!==h.ydisp&&(f||this._onScroll.fire(h.ydisp))}};s.BufferService=g=a([l(0,y.IOptionsService)],g)},7994:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,a){this._charsets[o]=a,this.glevel===o&&(this.charset=a)}}},1753:function(i,s,o){var a=this&&this.__decorate||function(h,v,C,S){var w,_=arguments.length,b=_<3?v:S===null?S=Object.getOwnPropertyDescriptor(v,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(h,v,C,S);else for(var A=h.length-1;A>=0;A--)(w=h[A])&&(b=(_<3?w(b):_>3?w(v,C,b):w(v,C))||b);return _>3&&b&&Object.defineProperty(v,C,b),b},l=this&&this.__param||function(h,v){return function(C,S){v(C,S,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;let c=o(2585),p=o(8460),m=o(844),y={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function g(h,v){let C=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(C|=64,C|=h.action):(C|=3&h.button,4&h.button&&(C|=64),8&h.button&&(C|=128),h.action===32?C|=32:h.action!==0||v||(C|=3)),C}let u=String.fromCharCode,f={DEFAULT:h=>{let v=[g(h,!1)+32,h.col+32,h.row+32];return v[0]>255||v[1]>255||v[2]>255?"":`\x1B[M${u(v[0])}${u(v[1])}${u(v[2])}`},SGR:h=>{let v=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${g(h,!0)};${h.col};${h.row}${v}`},SGR_PIXELS:h=>{let v=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${g(h,!0)};${h.x};${h.y}${v}`}},d=s.CoreMouseService=class extends m.Disposable{constructor(h,v){super(),this._bufferService=h,this._coreService=v,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(y))this.addProtocol(C,y[C]);for(let C of Object.keys(f))this.addEncoding(C,f[C]);this.reset()}addProtocol(h,v){this._protocols[h]=v}addEncoding(h,v){this._encodings[h]=v}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;let v=this._encodings[this._activeEncoding](h);return v&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(v):this._coreService.triggerDataEvent(v,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,v,C){if(C){if(h.x!==v.x||h.y!==v.y)return!1}else if(h.col!==v.col||h.row!==v.row)return!1;return h.button===v.button&&h.action===v.action&&h.ctrl===v.ctrl&&h.alt===v.alt&&h.shift===v.shift}};s.CoreMouseService=d=a([l(0,c.IBufferService),l(1,c.ICoreService)],d)},6975:function(i,s,o){var a=this&&this.__decorate||function(d,h,v,C){var S,w=arguments.length,_=w<3?h:C===null?C=Object.getOwnPropertyDescriptor(h,v):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(d,h,v,C);else for(var b=d.length-1;b>=0;b--)(S=d[b])&&(_=(w<3?S(_):w>3?S(h,v,_):S(h,v))||_);return w>3&&_&&Object.defineProperty(h,v,_),_},l=this&&this.__param||function(d,h){return function(v,C){h(v,C,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;let c=o(1439),p=o(8460),m=o(844),y=o(2585),g=Object.freeze({insertMode:!1}),u=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),f=s.CoreService=class extends m.Disposable{constructor(d,h,v){super(),this._bufferService=d,this._logService=h,this._optionsService=v,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,c.clone)(g),this.decPrivateModes=(0,c.clone)(u)}reset(){this.modes=(0,c.clone)(g),this.decPrivateModes=(0,c.clone)(u)}triggerDataEvent(d,h=!1){if(this._optionsService.rawOptions.disableStdin)return;let v=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&v.ybase!==v.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${d}"`,()=>d.split("").map(C=>C.charCodeAt(0))),this._onData.fire(d)}triggerBinaryEvent(d){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${d}"`,()=>d.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(d))}};s.CoreService=f=a([l(0,y.IBufferService),l(1,y.ILogService),l(2,y.IOptionsService)],f)},9074:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;let a=o(8055),l=o(8460),c=o(844),p=o(6106),m=0,y=0;class g extends c.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(d=>d?.marker.line),this._onDecorationRegistered=this.register(new l.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new l.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,c.toDisposable)(()=>this.reset()))}registerDecoration(d){if(d.marker.isDisposed)return;let h=new u(d);if(h){let v=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),v.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(let d of this._decorations.values())d.dispose();this._decorations.clear()}*getDecorationsAtCell(d,h,v){let C=0,S=0;for(let w of this._decorations.getKeyIterator(h))C=w.options.x??0,S=C+(w.options.width??1),d>=C&&d<S&&(!v||(w.options.layer??"bottom")===v)&&(yield w)}forEachDecorationAtCell(d,h,v,C){this._decorations.forEachByKey(h,S=>{m=S.options.x??0,y=m+(S.options.width??1),d>=m&&d<y&&(!v||(S.options.layer??"bottom")===v)&&C(S)})}}s.DecorationService=g;class u extends c.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(d){super(),this.options=d,this.onRenderEmitter=this.register(new l.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=d.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;let a=o(2585),l=o(8343);class c{constructor(...m){this._entries=new Map;for(let[y,g]of m)this.set(y,g)}set(m,y){let g=this._entries.get(m);return this._entries.set(m,y),g}forEach(m){for(let[y,g]of this._entries.entries())m(y,g)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}s.ServiceCollection=c,s.InstantiationService=class{constructor(){this._services=new c,this._services.set(a.IInstantiationService,this)}setService(p,m){this._services.set(p,m)}getService(p){return this._services.get(p)}createInstance(p,...m){let y=(0,l.getServiceDependencies)(p).sort((f,d)=>f.index-d.index),g=[];for(let f of y){let d=this._services.get(f.id);if(!d)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${f.id}.`);g.push(d)}let u=y.length>0?y[0].index:m.length;if(m.length!==u)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${u+1} conflicts with ${m.length} static arguments`);return new p(...m,...g)}}},7866:function(i,s,o){var a=this&&this.__decorate||function(u,f,d,h){var v,C=arguments.length,S=C<3?f:h===null?h=Object.getOwnPropertyDescriptor(f,d):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(u,f,d,h);else for(var w=u.length-1;w>=0;w--)(v=u[w])&&(S=(C<3?v(S):C>3?v(f,d,S):v(f,d))||S);return C>3&&S&&Object.defineProperty(f,d,S),S},l=this&&this.__param||function(u,f){return function(d,h){f(d,h,u)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;let c=o(844),p=o(2585),m={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF},y,g=s.LogService=class extends c.Disposable{get logLevel(){return this._logLevel}constructor(u){super(),this._optionsService=u,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),y=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(u){for(let f=0;f<u.length;f++)typeof u[f]=="function"&&(u[f]=u[f]())}_log(u,f,d){this._evalLazyOptionalParams(d),u.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+f,...d)}trace(u,...f){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,u,f)}debug(u,...f){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,u,f)}info(u,...f){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,u,f)}warn(u,...f){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,u,f)}error(u,...f){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,u,f)}};s.LogService=g=a([l(0,p.IOptionsService)],g),s.setTraceLogger=function(u){y=u},s.traceCall=function(u,f,d){if(typeof d.value!="function")throw new Error("not supported");let h=d.value;d.value=function(...v){if(y.logLevel!==p.LogLevelEnum.TRACE)return h.apply(this,v);y.trace(`GlyphRenderer#${h.name}(${v.map(S=>JSON.stringify(S)).join(", ")})`);let C=h.apply(this,v);return y.trace(`GlyphRenderer#${h.name} return`,C),C}}},7302:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;let a=o(8460),l=o(844),c=o(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:c.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let p=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends l.Disposable{constructor(g){super(),this._onOptionChange=this.register(new a.EventEmitter),this.onOptionChange=this._onOptionChange.event;let u=H({},s.DEFAULT_OPTIONS);for(let f in g)if(f in u)try{let d=g[f];u[f]=this._sanitizeAndValidateOption(f,d)}catch(d){console.error(d)}this.rawOptions=u,this.options=H({},u),this._setupOptions(),this.register((0,l.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(g,u){return this.onOptionChange(f=>{f===g&&u(this.rawOptions[g])})}onMultipleOptionChange(g,u){return this.onOptionChange(f=>{g.indexOf(f)!==-1&&u()})}_setupOptions(){let g=f=>{if(!(f in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${f}"`);return this.rawOptions[f]},u=(f,d)=>{if(!(f in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${f}"`);d=this._sanitizeAndValidateOption(f,d),this.rawOptions[f]!==d&&(this.rawOptions[f]=d,this._onOptionChange.fire(f))};for(let f in this.rawOptions){let d={get:g.bind(this,f),set:u.bind(this,f)};Object.defineProperty(this.options,f,d)}}_sanitizeAndValidateOption(g,u){switch(g){case"cursorStyle":if(u||(u=s.DEFAULT_OPTIONS[g]),!function(f){return f==="block"||f==="underline"||f==="bar"}(u))throw new Error(`"${u}" is not a valid value for ${g}`);break;case"wordSeparator":u||(u=s.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof u=="number"&&1<=u&&u<=1e3)break;u=p.includes(u)?u:s.DEFAULT_OPTIONS[g];break;case"cursorWidth":u=Math.floor(u);case"lineHeight":case"tabStopWidth":if(u<1)throw new Error(`${g} cannot be less than 1, value: ${u}`);break;case"minimumContrastRatio":u=Math.max(1,Math.min(21,Math.round(10*u)/10));break;case"scrollback":if((u=Math.min(u,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${u}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(u<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${u}`);break;case"rows":case"cols":if(!u&&u!==0)throw new Error(`${g} must be numeric, value: ${u}`);break;case"windowsPty":u=u??{}}return u}}s.OptionsService=m},2660:function(i,s,o){var a=this&&this.__decorate||function(m,y,g,u){var f,d=arguments.length,h=d<3?y:u===null?u=Object.getOwnPropertyDescriptor(y,g):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(m,y,g,u);else for(var v=m.length-1;v>=0;v--)(f=m[v])&&(h=(d<3?f(h):d>3?f(y,g,h):f(y,g))||h);return d>3&&h&&Object.defineProperty(y,g,h),h},l=this&&this.__param||function(m,y){return function(g,u){y(g,u,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;let c=o(2585),p=s.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){let y=this._bufferService.buffer;if(m.id===void 0){let v=y.addMarker(y.ybase+y.y),C={data:m,id:this._nextId++,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(C,v)),this._dataByLinkId.set(C.id,C),C.id}let g=m,u=this._getEntryIdKey(g),f=this._entriesWithId.get(u);if(f)return this.addLineToLink(f.id,y.ybase+y.y),f.id;let d=y.addMarker(y.ybase+y.y),h={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[d]};return d.onDispose(()=>this._removeMarkerFromLink(h,d)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(m,y){let g=this._dataByLinkId.get(m);if(g&&g.lines.every(u=>u.line!==y)){let u=this._bufferService.buffer.addMarker(y);g.lines.push(u),u.onDispose(()=>this._removeMarkerFromLink(g,u))}}getLinkData(m){return this._dataByLinkId.get(m)?.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,y){let g=m.lines.indexOf(y);g!==-1&&(m.lines.splice(g,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};s.OscLinkService=p=a([l(0,c.IBufferService)],p)},8343:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;let o="di$target",a="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(l){return l[a]||[]},s.createDecorator=function(l){if(s.serviceRegistry.has(l))return s.serviceRegistry.get(l);let c=function(p,m,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,u,f){u[o]===u?u[a].push({id:g,index:f}):(u[a]=[{id:g,index:f}],u[o]=u)})(c,p,y)};return c.toString=()=>l,s.serviceRegistry.set(l,c),c}},2585:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;let a=o(8343);var l;s.IBufferService=(0,a.createDecorator)("BufferService"),s.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),s.ICoreService=(0,a.createDecorator)("CoreService"),s.ICharsetService=(0,a.createDecorator)("CharsetService"),s.IInstantiationService=(0,a.createDecorator)("InstantiationService"),function(c){c[c.TRACE=0]="TRACE",c[c.DEBUG=1]="DEBUG",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.OFF=5]="OFF"}(l||(s.LogLevelEnum=l={})),s.ILogService=(0,a.createDecorator)("LogService"),s.IOptionsService=(0,a.createDecorator)("OptionsService"),s.IOscLinkService=(0,a.createDecorator)("OscLinkService"),s.IUnicodeService=(0,a.createDecorator)("UnicodeService"),s.IDecorationService=(0,a.createDecorator)("DecorationService")},1480:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;let a=o(8460),l=o(225);class c{static extractShouldJoin(m){return(1&m)!=0}static extractWidth(m){return m>>1&3}static extractCharKind(m){return m>>3}static createPropertyValue(m,y,g=!1){return(16777215&m)<<3|(3&y)<<1|(g?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new a.EventEmitter,this.onChange=this._onChange.event;let m=new l.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let y=0,g=0,u=m.length;for(let f=0;f<u;++f){let d=m.charCodeAt(f);if(55296<=d&&d<=56319){if(++f>=u)return y+this.wcwidth(d);let C=m.charCodeAt(f);56320<=C&&C<=57343?d=1024*(d-55296)+C-56320+65536:y+=this.wcwidth(C)}let h=this.charProperties(d,g),v=c.extractWidth(h);c.extractShouldJoin(h)&&(v-=c.extractWidth(g)),y+=v,g=h}return y}charProperties(m,y){return this._activeProvider.charProperties(m,y)}}s.UnicodeService=c}},e={};function n(i){var s=e[i];if(s!==void 0)return s.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;let s=n(9042),o=n(3236),a=n(844),l=n(5741),c=n(8285),p=n(7975),m=n(7090),y=["cols","rows"];class g extends a.Disposable{constructor(f){super(),this._core=this.register(new o.Terminal(f)),this._addonManager=this.register(new l.AddonManager),this._publicOptions=H({},this._core.options);let d=v=>this._core.options[v],h=(v,C)=>{this._checkReadonlyOptions(v),this._core.options[v]=C};for(let v in this._core.options){let C={get:d.bind(this,v),set:h.bind(this,v)};Object.defineProperty(this._publicOptions,v,C)}}_checkReadonlyOptions(f){if(y.includes(f))throw new Error(`Option "${f}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new c.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let f=this._core.coreService.decPrivateModes,d="none";switch(this._core.coreMouseService.activeProtocol){case"X10":d="x10";break;case"VT200":d="vt200";break;case"DRAG":d="drag";break;case"ANY":d="any"}return{applicationCursorKeysMode:f.applicationCursorKeys,applicationKeypadMode:f.applicationKeypad,bracketedPasteMode:f.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:d,originMode:f.origin,reverseWraparoundMode:f.reverseWraparound,sendFocusMode:f.sendFocus,wraparoundMode:f.wraparound}}get options(){return this._publicOptions}set options(f){for(let d in f)this._publicOptions[d]=f[d]}blur(){this._core.blur()}focus(){this._core.focus()}input(f,d=!0){this._core.input(f,d)}resize(f,d){this._verifyIntegers(f,d),this._core.resize(f,d)}open(f){this._core.open(f)}attachCustomKeyEventHandler(f){this._core.attachCustomKeyEventHandler(f)}attachCustomWheelEventHandler(f){this._core.attachCustomWheelEventHandler(f)}registerLinkProvider(f){return this._core.registerLinkProvider(f)}registerCharacterJoiner(f){return this._checkProposedApi(),this._core.registerCharacterJoiner(f)}deregisterCharacterJoiner(f){this._checkProposedApi(),this._core.deregisterCharacterJoiner(f)}registerMarker(f=0){return this._verifyIntegers(f),this._core.registerMarker(f)}registerDecoration(f){return this._checkProposedApi(),this._verifyPositiveIntegers(f.x??0,f.width??0,f.height??0),this._core.registerDecoration(f)}hasSelection(){return this._core.hasSelection()}select(f,d,h){this._verifyIntegers(f,d,h),this._core.select(f,d,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(f,d){this._verifyIntegers(f,d),this._core.selectLines(f,d)}dispose(){super.dispose()}scrollLines(f){this._verifyIntegers(f),this._core.scrollLines(f)}scrollPages(f){this._verifyIntegers(f),this._core.scrollPages(f)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(f){this._verifyIntegers(f),this._core.scrollToLine(f)}clear(){this._core.clear()}write(f,d){this._core.write(f,d)}writeln(f,d){this._core.write(f),this._core.write(`\r
`,d)}paste(f){this._core.paste(f)}refresh(f,d){this._verifyIntegers(f,d),this._core.refresh(f,d)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(f){this._addonManager.loadAddon(this,f)}static get strings(){return s}_verifyIntegers(...f){for(let d of f)if(d===1/0||isNaN(d)||d%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...f){for(let d of f)if(d&&(d===1/0||isNaN(d)||d%1!=0||d<0))throw new Error("This API only accepts positive integers")}}i.Terminal=g})(),r})())});function Hu(t,e){return Object.is(t,e)}var Le=null,Gi=!1,qi=1,Ft=Symbol("SIGNAL");function he(t){let e=Le;return Le=t,e}function Uu(){return Le}var Kr={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ia(t){if(Gi)throw new Error("");if(Le===null)return;Le.consumerOnSignalRead(t);let e=Le.nextProducerIndex++;if(Qi(Le),e<Le.producerNode.length&&Le.producerNode[e]!==t&&qr(Le)){let n=Le.producerNode[e];Yi(n,Le.producerIndexOfThis[e])}Le.producerNode[e]!==t&&(Le.producerNode[e]=t,Le.producerIndexOfThis[e]=qr(Le)?Gu(t,Le,e):0),Le.producerLastReadVersion[e]=t.version}function Om(){qi++}function $u(t){if(!(qr(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===qi)){if(!t.producerMustRecompute(t)&&!oa(t)){t.dirty=!1,t.lastCleanEpoch=qi;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=qi}}function Wu(t){if(t.liveConsumerNode===void 0)return;let e=Gi;Gi=!0;try{for(let n of t.liveConsumerNode)n.dirty||Nm(n)}finally{Gi=e}}function zu(){return Le?.consumerAllowSignalWrites!==!1}function Nm(t){t.dirty=!0,Wu(t),t.consumerMarkedDirty?.(t)}function Zi(t){return t&&(t.nextProducerIndex=0),he(t)}function sa(t,e){if(he(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(qr(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Yi(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function oa(t){Qi(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||($u(n),r!==n.version))return!0}return!1}function aa(t){if(Qi(t),qr(t))for(let e=0;e<t.producerNode.length;e++)Yi(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Gu(t,e,n){if(qu(t),t.liveConsumerNode.length===0&&Ku(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Gu(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Yi(t,e){if(qu(t),t.liveConsumerNode.length===1&&Ku(t))for(let r=0;r<t.producerNode.length;r++)Yi(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Qi(i),i.producerIndexOfThis[r]=e}}function qr(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Qi(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function qu(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Ku(t){return t.producerNode!==void 0}function Zu(t){let e=Object.create(Lm);e.computation=t;let n=()=>{if($u(e),ia(e),e.value===Ki)throw e.error;return e.value};return n[Ft]=e,n}var na=Symbol("UNSET"),ra=Symbol("COMPUTING"),Ki=Symbol("ERRORED"),Lm=ge(H({},Kr),{value:na,dirty:!0,error:null,equal:Hu,producerMustRecompute(t){return t.value===na||t.value===ra},producerRecomputeValue(t){if(t.value===ra)throw new Error("Detected cycle in computations.");let e=t.value;t.value=ra;let n=Zi(t),r;try{r=t.computation()}catch(i){r=Ki,t.error=i}finally{sa(t,n)}if(e!==na&&e!==Ki&&r!==Ki&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function Pm(){throw new Error}var Yu=Pm;function Qu(){Yu()}function Xu(t){Yu=t}var Fm=null;function Ju(t){let e=Object.create(td);e.value=t;let n=()=>(ia(e),e.value);return n[Ft]=e,n}function ca(t,e){zu()||Qu(),t.equal(t.value,e)||(t.value=e,Bm(t))}function ed(t,e){zu()||Qu(),ca(t,e(t.value))}var td=ge(H({},Kr),{equal:Hu,value:void 0});function Bm(t){t.version++,Om(),Wu(t),Fm?.()}function re(t){return typeof t=="function"}function Zn(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Xi=Zn(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Zr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(s){e=s instanceof Xi?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{nd(s)}catch(o){e=e??[],o instanceof Xi?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Xi(e)}}add(e){var n;if(e&&e!==this)if(this.closed)nd(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Zr(n,e)}remove(e){let{_finalizers:n}=this;n&&Zr(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var la=Ae.EMPTY;function Ji(t){return t instanceof Ae||t&&"closed"in t&&re(t.remove)&&re(t.add)&&re(t.unsubscribe)}function nd(t){re(t)?t():t.unsubscribe()}var mt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Yn={setTimeout(t,e,...n){let{delegate:r}=Yn;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Yn;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function es(t){Yn.setTimeout(()=>{let{onUnhandledError:e}=mt;if(e)e(t);else throw t})}function Yr(){}var rd=ua("C",void 0,void 0);function id(t){return ua("E",void 0,t)}function sd(t){return ua("N",t,void 0)}function ua(t,e,n){return{kind:t,value:e,error:n}}var Sn=null;function Qn(t){if(mt.useDeprecatedSynchronousErrorHandling){let e=!Sn;if(e&&(Sn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Sn;if(Sn=null,n)throw r}}else t()}function od(t){mt.useDeprecatedSynchronousErrorHandling&&Sn&&(Sn.errorThrown=!0,Sn.error=t)}var wn=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ji(e)&&e.add(this)):this.destination=Hm}static create(e,n,r){return new Xn(e,n,r)}next(e){this.isStopped?ha(sd(e),this):this._next(e)}error(e){this.isStopped?ha(id(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ha(rd,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Vm=Function.prototype.bind;function da(t,e){return Vm.call(t,e)}var fa=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ts(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ts(r)}else ts(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ts(n)}}},Xn=class extends wn{constructor(e,n,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&mt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&da(e.next,s),error:e.error&&da(e.error,s),complete:e.complete&&da(e.complete,s)}):i=e}this.destination=new fa(i)}};function ts(t){mt.useDeprecatedSynchronousErrorHandling?od(t):es(t)}function jm(t){throw t}function ha(t,e){let{onStoppedNotification:n}=mt;n&&Yn.setTimeout(()=>n(t,e))}var Hm={closed:!0,next:Yr,error:jm,complete:Yr};var Jn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function nt(t){return t}function pa(...t){return ga(t)}function ga(t){return t.length===0?nt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var me=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=$m(n)?n:new Xn(n,r,i);return Qn(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ad(r),new r((i,s)=>{let o=new Xn({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Jn](){return this}pipe(...n){return ga(n)(this)}toPromise(n){return n=ad(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function ad(t){var e;return(e=t??mt.Promise)!==null&&e!==void 0?e:Promise}function Um(t){return t&&re(t.next)&&re(t.error)&&re(t.complete)}function $m(t){return t&&t instanceof wn||Um(t)&&Ji(t)}function ma(t){return re(t?.lift)}function pe(t){return e=>{if(ma(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new va(t,e,n,r,i)}var va=class extends wn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function er(){return pe((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var tr=class extends me{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ma(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return er()(this)}};var cd=Zn(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ie=(()=>{class t extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ns(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new cd}next(n){Qn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Qn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Qn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?la:(this.currentObservers=null,s.push(n),new Ae(()=>{this.currentObservers=null,Zr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new me;return n.source=this,n}}return t.create=(e,n)=>new ns(e,n),t})(),ns=class extends Ie{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:la}};var He=class extends Ie{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var rt=new me(t=>t.complete());function ld(t){return t&&re(t.schedule)}function ud(t){return t[t.length-1]}function rs(t){return re(ud(t))?t.pop():void 0}function Jt(t){return ld(ud(t))?t.pop():void 0}function hd(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(p){try{c(r.next(p))}catch(m){o(m)}}function l(p){try{c(r.throw(p))}catch(m){o(m)}}function c(p){p.done?s(p.value):i(p.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function dd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bn(t){return this instanceof bn?(this.v=t,this):new bn(t)}function fd(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(u){return Promise.resolve(u).then(g,m)}}function a(g,u){r[g]&&(i[g]=function(f){return new Promise(function(d,h){s.push([g,f,d,h])>1||l(g,f)})},u&&(i[g]=u(i[g])))}function l(g,u){try{c(r[g](u))}catch(f){y(s[0][3],f)}}function c(g){g.value instanceof bn?Promise.resolve(g.value.v).then(p,m):y(s[0][2],g)}function p(g){l("next",g)}function m(g){l("throw",g)}function y(g,u){g(u),s.shift(),s.length&&l(s[0][0],s[0][1])}}function pd(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof dd=="function"?dd(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var is=t=>t&&typeof t.length=="number"&&typeof t!="function";function ss(t){return re(t?.then)}function os(t){return re(t[Jn])}function as(t){return Symbol.asyncIterator&&re(t?.[Symbol.asyncIterator])}function cs(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Wm(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ls=Wm();function us(t){return re(t?.[ls])}function ds(t){return fd(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield bn(n.read());if(i)return yield bn(void 0);yield yield bn(r)}}finally{n.releaseLock()}})}function hs(t){return re(t?.getReader)}function Te(t){if(t instanceof me)return t;if(t!=null){if(os(t))return zm(t);if(is(t))return Gm(t);if(ss(t))return qm(t);if(as(t))return gd(t);if(us(t))return Km(t);if(hs(t))return Zm(t)}throw cs(t)}function zm(t){return new me(e=>{let n=t[Jn]();if(re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Gm(t){return new me(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function qm(t){return new me(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,es)})}function Km(t){return new me(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function gd(t){return new me(e=>{Ym(t,e).catch(n=>e.error(n))})}function Zm(t){return gd(ds(t))}function Ym(t,e){var n,r,i,s;return hd(this,void 0,void 0,function*(){try{for(n=pd(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Xe(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function fs(t,e=0){return pe((n,r)=>{n.subscribe(ue(r,i=>Xe(r,t,()=>r.next(i),e),()=>Xe(r,t,()=>r.complete(),e),i=>Xe(r,t,()=>r.error(i),e)))})}function ps(t,e=0){return pe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function md(t,e){return Te(t).pipe(ps(e),fs(e))}function vd(t,e){return Te(t).pipe(ps(e),fs(e))}function _d(t,e){return new me(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function yd(t,e){return new me(n=>{let r;return Xe(n,e,()=>{r=t[ls](),Xe(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function gs(t,e){if(!t)throw new Error("Iterable cannot be null");return new me(n=>{Xe(n,e,()=>{let r=t[Symbol.asyncIterator]();Xe(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Cd(t,e){return gs(ds(t),e)}function Sd(t,e){if(t!=null){if(os(t))return md(t,e);if(is(t))return _d(t,e);if(ss(t))return vd(t,e);if(as(t))return gs(t,e);if(us(t))return yd(t,e);if(hs(t))return Cd(t,e)}throw cs(t)}function xe(t,e){return e?Sd(t,e):Te(t)}function ie(...t){let e=Jt(t);return xe(t,e)}function nr(t,e){let n=re(t)?t:()=>t,r=i=>i.error(n());return new me(e?i=>e.schedule(r,0,i):r)}function _a(t){return!!t&&(t instanceof me||re(t.lift)&&re(t.subscribe))}var Bt=Zn(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ce(t,e){return pe((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:Qm}=Array;function Xm(t,e){return Qm(e)?t(...e):t(e)}function ms(t){return ce(e=>Xm(t,e))}var{isArray:Jm}=Array,{getPrototypeOf:ev,prototype:tv,keys:nv}=Object;function vs(t){if(t.length===1){let e=t[0];if(Jm(e))return{args:e,keys:null};if(rv(e)){let n=nv(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function rv(t){return t&&typeof t=="object"&&ev(t)===tv}function _s(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ys(...t){let e=Jt(t),n=rs(t),{args:r,keys:i}=vs(t);if(r.length===0)return xe([],e);let s=new me(iv(r,e,i?o=>_s(i,o):nt));return n?s.pipe(ms(n)):s}function iv(t,e,n=nt){return r=>{wd(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)wd(e,()=>{let c=xe(t[l],e),p=!1;c.subscribe(ue(r,m=>{s[l]=m,p||(p=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function wd(t,e,n){t?Xe(n,t,e):e()}function bd(t,e,n,r,i,s,o,a){let l=[],c=0,p=0,m=!1,y=()=>{m&&!l.length&&!c&&e.complete()},g=f=>c<r?u(f):l.push(f),u=f=>{s&&e.next(f),c++;let d=!1;Te(n(f,p++)).subscribe(ue(e,h=>{i?.(h),s?g(h):e.next(h)},()=>{d=!0},void 0,()=>{if(d)try{for(c--;l.length&&c<r;){let h=l.shift();o?Xe(e,o,()=>u(h)):u(h)}y()}catch(h){e.error(h)}}))};return t.subscribe(ue(e,g,()=>{m=!0,y()})),()=>{a?.()}}function Pe(t,e,n=1/0){return re(e)?Pe((r,i)=>ce((s,o)=>e(r,s,i,o))(Te(t(r,i))),n):(typeof e=="number"&&(n=e),pe((r,i)=>bd(r,i,t,n)))}function ya(t=1/0){return Pe(nt,t)}function Dd(){return ya(1)}function rr(...t){return Dd()(xe(t,Jt(t)))}function Cs(t){return new me(e=>{Te(t()).subscribe(e)})}function Ca(...t){let e=rs(t),{args:n,keys:r}=vs(t),i=new me(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let p=0;p<o;p++){let m=!1;Te(n[p]).subscribe(ue(s,y=>{m||(m=!0,c--),a[p]=y},()=>l--,void 0,()=>{(!l||!m)&&(c||s.next(r?_s(r,a):a),s.complete())}))}});return e?i.pipe(ms(e)):i}function vt(t,e){return pe((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function en(t){return pe((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ue(n,void 0,void 0,o=>{s=Te(t(o,en(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Ed(t,e,n,r,i){return(s,o)=>{let a=n,l=e,c=0;s.subscribe(ue(o,p=>{let m=c++;l=a?t(l,p,m):(a=!0,p),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function ir(t,e){return re(e)?Pe(t,e,1):Pe(t,1)}function tn(t){return pe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Vt(t){return t<=0?()=>rt:pe((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Sa(t){return ce(()=>t)}function Ss(t=sv){return pe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function sv(){return new Bt}function Qr(t){return pe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Et(t,e){let n=arguments.length>=2;return r=>r.pipe(t?vt((i,s)=>t(i,s,r)):nt,Vt(1),n?tn(e):Ss(()=>new Bt))}function sr(t){return t<=0?()=>rt:pe((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function wa(t,e){let n=arguments.length>=2;return r=>r.pipe(t?vt((i,s)=>t(i,s,r)):nt,sr(1),n?tn(e):Ss(()=>new Bt))}function ba(t,e){return pe(Ed(t,e,arguments.length>=2,!0))}function Da(...t){let e=Jt(t);return pe((n,r)=>{(e?rr(t,n,e):rr(t,n)).subscribe(r)})}function _t(t,e){return pe((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ue(r,l=>{i?.unsubscribe();let c=0,p=s++;Te(t(l,p)).subscribe(i=ue(r,m=>r.next(e?e(l,m,p,c++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ea(t){return pe((e,n)=>{Te(t).subscribe(ue(n,()=>n.complete(),Yr)),!n.closed&&e.subscribe(n)})}function Ue(t,e,n){let r=re(t)||e||n?{next:t,error:e,complete:n}:t;return r?pe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ue(s,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),s.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):nt}var ov="https://g.co/ng/security#xss",Y=class extends Error{constructor(e,n){super(Bc(e,n)),this.code=e}};function Bc(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ci(t){return{toString:t}.toString()}var ws="__parameters__";function av(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function uh(t,e,n){return ci(()=>{let r=av(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,c,p){let m=l.hasOwnProperty(ws)?l[ws]:Object.defineProperty(l,ws,{value:[]})[ws];for(;m.length<=p;)m.push(null);return(m[p]=m[p]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ja=globalThis;function Se(t){for(let e in t)if(t[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function cv(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ke(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ke).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Ha(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var lv=Se({__forward_ref__:Se});function Fn(t){return t.__forward_ref__=Fn,t.toString=function(){return Ke(this())},t}function qe(t){return dh(t)?t():t}function dh(t){return typeof t=="function"&&t.hasOwnProperty(lv)&&t.__forward_ref__===Fn}function X(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Bn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Xs(t){return Id(t,fh)||Id(t,ph)}function hh(t){return Xs(t)!==null}function Id(t,e){return t.hasOwnProperty(e)?t[e]:null}function uv(t){let e=t&&(t[fh]||t[ph]);return e||null}function Md(t){return t&&(t.hasOwnProperty(xd)||t.hasOwnProperty(dv))?t[xd]:null}var fh=Se({\u0275prov:Se}),xd=Se({\u0275inj:Se}),ph=Se({ngInjectableDef:Se}),dv=Se({ngInjectorDef:Se}),ee=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=X({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function gh(t){return t&&!!t.\u0275providers}var hv=Se({\u0275cmp:Se}),fv=Se({\u0275dir:Se}),pv=Se({\u0275pipe:Se}),gv=Se({\u0275mod:Se}),Rs=Se({\u0275fac:Se}),Xr=Se({__NG_ELEMENT_ID__:Se}),Ad=Se({__NG_ENV_ID__:Se});function mh(t){return typeof t=="string"?t:t==null?"":String(t)}function mv(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():mh(t)}function vv(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Y(-200,t)}function Vc(t,e){throw new Y(-201,!1)}var ae=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ae||{}),Ua;function vh(){return Ua}function ct(t){let e=Ua;return Ua=t,e}function _h(t,e,n){let r=Xs(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ae.Optional)return null;if(e!==void 0)return e;Vc(t,"Injector")}var _v={},Jr=_v,$a="__NG_DI_FLAG__",ks="ngTempTokenPath",yv="ngTokenPath",Cv=/\n/gm,Sv="\u0275",Td="__source",lr;function wv(){return lr}function nn(t){let e=lr;return lr=t,e}function bv(t,e=ae.Default){if(lr===void 0)throw new Y(-203,!1);return lr===null?_h(t,void 0,e):lr.get(t,e&ae.Optional?null:void 0,e)}function de(t,e=ae.Default){return(vh()||bv)(qe(t),e)}function z(t,e=ae.Default){return de(t,Js(e))}function Js(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Wa(t){let e=[];for(let n=0;n<t.length;n++){let r=qe(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,s=ae.Default;for(let o=0;o<r.length;o++){let a=r[o],l=Dv(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(de(i,s))}else e.push(de(r))}return e}function yh(t,e){return t[$a]=e,t.prototype[$a]=e,t}function Dv(t){return t[$a]}function Ev(t,e,n,r){let i=t[ks];throw e[Td]&&i.unshift(e[Td]),t.message=Iv(`
`+t.message,i,n,r),t[yv]=i,t[ks]=null,t}function Iv(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Sv?t.slice(2):t;let i=Ke(e);if(Array.isArray(e))i=e.map(Ke).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ke(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Cv,`
  `)}`}var jc=yh(uh("Optional"),8);var Ch=yh(uh("SkipSelf"),4);function dr(t,e){let n=t.hasOwnProperty(Rs);return n?t[Rs]:null}function Mv(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function xv(t){return t.flat(Number.POSITIVE_INFINITY)}function Hc(t,e){t.forEach(n=>Array.isArray(n)?Hc(n,e):e(n))}function Sh(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Os(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Av(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function eo(t,e,n){let r=li(t,e);return r>=0?t[r|1]=n:(r=~r,Av(t,r,e,n)),r}function Ia(t,e){let n=li(t,e);if(n>=0)return t[n|1]}function li(t,e){return Tv(t,e,1)}function Tv(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var hr={},Je=[],fr=new ee(""),wh=new ee("",-1),bh=new ee(""),Ns=class{get(e,n=Jr){if(n===Jr){let r=new Error(`NullInjectorError: No provider for ${Ke(e)}!`);throw r.name="NullInjectorError",r}return n}},Dh=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Dh||{}),xt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(xt||{}),on=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(on||{});function Rv(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function za(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];Ov(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function kv(t){return t===3||t===4||t===6}function Ov(t){return t.charCodeAt(0)===64}function ei(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Rd(t,n,i,null,e[++r]):Rd(t,n,i,null,null))}}return t}function Rd(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Eh="ng-template";function Nv(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Rv(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Uc(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Uc(t){return t.type===4&&t.value!==Eh}function Lv(t,e,n){let r=t.type===4&&!n?Eh:t.value;return e===r}function Pv(t,e,n){let r=4,i=t.attrs,s=i!==null?Vv(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!yt(r)&&!yt(l))return!1;if(o&&yt(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!Lv(t,l,n)||l===""&&e.length===1){if(yt(r))return!1;o=!0}}else if(r&8){if(i===null||!Nv(t,i,l,n)){if(yt(r))return!1;o=!0}}else{let c=e[++a],p=Fv(l,i,Uc(t),n);if(p===-1){if(yt(r))return!1;o=!0;continue}if(c!==""){let m;if(p>s?m="":m=i[p+1].toLowerCase(),r&2&&c!==m){if(yt(r))return!1;o=!0}}}}return yt(r)||o}function yt(t){return(t&1)===0}function Fv(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return jv(e,t)}function Bv(t,e,n=!1){for(let r=0;r<e.length;r++)if(Pv(t,e[r],n))return!0;return!1}function Vv(t){for(let e=0;e<t.length;e++){let n=t[e];if(kv(n))return e}return t.length}function jv(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function kd(t,e){return t?":not("+e.trim()+")":e}function Hv(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!yt(o)&&(e+=kd(s,i),i=""),r=o,s=s||!yt(r);n++}return i!==""&&(e+=kd(s,i)),e}function Uv(t){return t.map(Hv).join(",")}function $v(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!yt(i))break;i=s}r++}return{attrs:e,classes:n}}function ht(t){return ci(()=>{let e=Th(t),n=ge(H({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Dh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||xt.Emulated,styles:t.styles||Je,_:null,schemas:t.schemas||null,tView:null,id:""});Rh(n);let r=t.dependencies;return n.directiveDefs=Nd(r,!1),n.pipeDefs=Nd(r,!0),n.id=Gv(n),n})}function Wv(t){return In(t)||Ih(t)}function zv(t){return t!==null}function Vn(t){return ci(()=>({type:t.type,bootstrap:t.bootstrap||Je,declarations:t.declarations||Je,imports:t.imports||Je,exports:t.exports||Je,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Od(t,e){if(t==null)return hr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=on.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==on.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Ze(t){return ci(()=>{let e=Th(t);return Rh(e),e})}function In(t){return t[hv]||null}function Ih(t){return t[fv]||null}function Mh(t){return t[pv]||null}function xh(t){let e=In(t)||Ih(t)||Mh(t);return e!==null?e.standalone:!1}function Ah(t,e){let n=t[gv]||null;if(!n&&e===!0)throw new Error(`Type ${Ke(t)} does not have '\u0275mod' property.`);return n}function Th(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||hr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Je,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Od(t.inputs,e),outputs:Od(t.outputs),debugInfo:null}}function Rh(t){t.features?.forEach(e=>e(t))}function Nd(t,e){if(!t)return null;let n=e?Mh:Wv;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(zv)}function Gv(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function to(t){return{\u0275providers:t}}function qv(...t){return{\u0275providers:kh(!0,t),\u0275fromNgModule:!0}}function kh(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Hc(e,o=>{let a=o;Ga(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Oh(i,s),n}function Oh(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];$c(i,s=>{e(s,r)})}}function Ga(t,e,n,r){if(t=qe(t),!t)return!1;let i=null,s=Md(t),o=!s&&In(t);if(!s&&!o){let l=t.ngModule;if(s=Md(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)Ga(c,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;try{Hc(s.imports,p=>{Ga(p,e,n,r)&&(c||=[],c.push(p))})}finally{}c!==void 0&&Oh(c,e)}if(!a){let c=dr(i)||(()=>new i);e({provide:i,useFactory:c,deps:Je},i),e({provide:bh,useValue:i,multi:!0},i),e({provide:fr,useValue:()=>de(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let c=t;$c(l,p=>{e(p,c)})}}else return!1;return i!==t&&t.providers!==void 0}function $c(t,e){for(let n of t)gh(n)&&(n=n.\u0275providers),Array.isArray(n)?$c(n,e):e(n)}var Kv=Se({provide:String,useValue:Se});function Nh(t){return t!==null&&typeof t=="object"&&Kv in t}function Zv(t){return!!(t&&t.useExisting)}function Yv(t){return!!(t&&t.useFactory)}function pr(t){return typeof t=="function"}function Qv(t){return!!t.useClass}var no=new ee(""),Es={},Xv={},Ma;function Wc(){return Ma===void 0&&(Ma=new Ns),Ma}var ut=class{},ti=class extends ut{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ka(e,o=>this.processProvider(o)),this.records.set(wh,or(void 0,this)),i.has("environment")&&this.records.set(ut,or(void 0,this));let s=this.records.get(no);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(bh,Je,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=he(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=nn(this),r=ct(void 0),i;try{return e()}finally{nn(n),ct(r)}}get(e,n=Jr,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ad))return e[Ad](this);r=Js(r);let i,s=nn(this),o=ct(void 0);try{if(!(r&ae.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=r_(e)&&Xs(e);c&&this.injectableDefInScope(c)?l=or(qa(e),Es):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&ae.Self?Wc():this.parent;return n=r&ae.Optional&&n===Jr?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ks]=a[ks]||[]).unshift(Ke(e)),s)throw a;return Ev(a,e,"R3InjectorError",this.source)}else throw a}finally{ct(o),nn(s)}}resolveInjectorInitializers(){let e=he(null),n=nn(this),r=ct(void 0),i;try{let s=this.get(fr,Je,ae.Self);for(let o of s)o()}finally{nn(n),ct(r),he(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ke(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(e){e=qe(e);let n=pr(e)?e:qe(e&&e.provide),r=e_(e);if(!pr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=or(void 0,Es,!0),i.factory=()=>Wa(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=he(null);try{return n.value===Es&&(n.value=Xv,n.value=n.factory()),typeof n.value=="object"&&n.value&&n_(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{he(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=qe(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function qa(t){let e=Xs(t),n=e!==null?e.factory:dr(t);if(n!==null)return n;if(t instanceof ee)throw new Y(204,!1);if(t instanceof Function)return Jv(t);throw new Y(204,!1)}function Jv(t){if(t.length>0)throw new Y(204,!1);let n=uv(t);return n!==null?()=>n.factory(t):()=>new t}function e_(t){if(Nh(t))return or(void 0,t.useValue);{let e=Lh(t);return or(e,Es)}}function Lh(t,e,n){let r;if(pr(t)){let i=qe(t);return dr(i)||qa(i)}else if(Nh(t))r=()=>qe(t.useValue);else if(Yv(t))r=()=>t.useFactory(...Wa(t.deps||[]));else if(Zv(t))r=()=>de(qe(t.useExisting));else{let i=qe(t&&(t.useClass||t.provide));if(t_(t))r=()=>new i(...Wa(t.deps));else return dr(i)||qa(i)}return r}function or(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function t_(t){return!!t.deps}function n_(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function r_(t){return typeof t=="function"||typeof t=="object"&&t instanceof ee}function Ka(t,e){for(let n of t)Array.isArray(n)?Ka(n,e):n&&gh(n)?Ka(n.\u0275providers,e):e(n)}function Wt(t,e){t instanceof ti&&t.assertNotDestroyed();let n,r=nn(t),i=ct(void 0);try{return e()}finally{nn(r),ct(i)}}function i_(){return vh()!==void 0||wv()!=null}function s_(t){return typeof t=="function"}var zt=0,se=1,J=2,ze=3,Ct=4,St=5,Ls=6,Ps=7,dt=8,gr=9,jt=10,Oe=11,ni=12,Ld=13,Sr=14,At=15,Mn=16,ar=17,Ht=18,ro=19,Ph=20,rn=21,xa=22,lt=23,Tt=25,Fh=1;var xn=7,Fs=8,mr=9,et=10,Bs=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Bs||{});function sn(t){return Array.isArray(t)&&typeof t[Fh]=="object"}function Gt(t){return Array.isArray(t)&&t[Fh]===!0}function Bh(t){return(t.flags&4)!==0}function io(t){return t.componentOffset>-1}function zc(t){return(t.flags&1)===1}function an(t){return!!t.template}function Za(t){return(t[J]&512)!==0}var Ya=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Vh(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function un(){return jh}function jh(t){return t.type.prototype.ngOnChanges&&(t.setInput=a_),o_}un.ngInherit=!0;function o_(){let t=Uh(this),e=t?.current;if(e){let n=t.previous;if(n===hr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function a_(t,e,n,r,i){let s=this.declaredInputs[r],o=Uh(t)||c_(t,{previous:hr,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new Ya(c&&c.currentValue,n,l===hr),Vh(t,e,i,n)}var Hh="__ngSimpleChanges__";function Uh(t){return t[Hh]||null}function c_(t,e){return t[Hh]=e}var Pd=null;var It=function(t,e,n){Pd?.(t,e,n)},l_="svg",u_="math";function Rt(t){for(;Array.isArray(t);)t=t[zt];return t}function $h(t,e){return Rt(e[t])}function wt(t,e){return Rt(e[t.index])}function Gc(t,e){return t.data[e]}function dn(t,e){let n=e[t];return sn(n)?n:n[zt]}function d_(t){return(t[J]&4)===4}function qc(t){return(t[J]&128)===128}function h_(t){return Gt(t[ze])}function Vs(t,e){return e==null?null:t[e]}function Wh(t){t[ar]=0}function zh(t){t[J]&1024||(t[J]|=1024,qc(t)&&so(t))}function f_(t,e){for(;t>0;)e=e[Sr],t--;return e}function ri(t){return!!(t[J]&9216||t[lt]?.dirty)}function Qa(t){t[jt].changeDetectionScheduler?.notify(7),t[J]&64&&(t[J]|=1024),ri(t)&&so(t)}function so(t){t[jt].changeDetectionScheduler?.notify(0);let e=An(t);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!qc(e)));)e=An(e)}function Gh(t,e){if((t[J]&256)===256)throw new Y(911,!1);t[rn]===null&&(t[rn]=[]),t[rn].push(e)}function p_(t,e){if(t[rn]===null)return;let n=t[rn].indexOf(e);n!==-1&&t[rn].splice(n,1)}function An(t){let e=t[ze];return Gt(e)?e[ze]:e}var le={lFrame:nf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qh=!1;function g_(){return le.lFrame.elementDepthCount}function m_(){le.lFrame.elementDepthCount++}function v_(){le.lFrame.elementDepthCount--}function Kh(){return le.bindingsEnabled}function __(){return le.skipHydrationRootTNode!==null}function y_(t){return le.skipHydrationRootTNode===t}function C_(){le.skipHydrationRootTNode=null}function _e(){return le.lFrame.lView}function Ge(){return le.lFrame.tView}function Ve(t){return le.lFrame.contextLView=t,t[dt]}function je(t){return le.lFrame.contextLView=null,t}function tt(){let t=Zh();for(;t!==null&&t.type===64;)t=t.parent;return t}function Zh(){return le.lFrame.currentTNode}function S_(){let t=le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ui(t,e){let n=le.lFrame;n.currentTNode=t,n.isParent=e}function Yh(){return le.lFrame.isParent}function w_(){le.lFrame.isParent=!1}function Qh(){return qh}function Fd(t){qh=t}function b_(t){return le.lFrame.bindingIndex=t}function oo(){return le.lFrame.bindingIndex++}function Xh(t){let e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function D_(){return le.lFrame.inI18n}function E_(t,e){let n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,Xa(e)}function I_(){return le.lFrame.currentDirectiveIndex}function Xa(t){le.lFrame.currentDirectiveIndex=t}function M_(t){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Jh(){return le.lFrame.currentQueryIndex}function Kc(t){le.lFrame.currentQueryIndex=t}function x_(t){let e=t[se];return e.type===2?e.declTNode:e.type===1?t[St]:null}function ef(t,e,n){if(n&ae.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ae.Host);)if(i=x_(s),i===null||(s=s[Sr],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=le.lFrame=tf();return r.currentTNode=e,r.lView=t,!0}function Zc(t){let e=tf(),n=t[se];le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function tf(){let t=le.lFrame,e=t===null?null:t.child;return e===null?nf(t):e}function nf(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function rf(){let t=le.lFrame;return le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var sf=rf;function Yc(){let t=rf();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function A_(t){return(le.lFrame.contextLView=f_(t,le.lFrame.contextLView))[dt]}function jn(){return le.lFrame.selectedIndex}function Tn(t){le.lFrame.selectedIndex=t}function Qc(){let t=le.lFrame;return Gc(t.tView,t.selectedIndex)}function T_(){return le.lFrame.currentNamespace}var of=!0;function Xc(){return of}function Jc(t){of=t}function R_(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=jh(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function el(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:p}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),p!=null&&(t.destroyHooks??=[]).push(n,p)}}function Is(t,e,n){af(t,e,3,n)}function Ms(t,e,n,r){(t[J]&3)===n&&af(t,e,n,r)}function Aa(t,e){let n=t[J];(n&3)===e&&(n&=16383,n+=1,t[J]=n)}function af(t,e,n,r){let i=r!==void 0?t[ar]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[ar]+=65536),(a<s||s==-1)&&(k_(t,n,e,l),t[ar]=(t[ar]&4294901760)+l+2),l++}function Bd(t,e){It(4,t,e);let n=he(null);try{e.call(t)}finally{he(n),It(5,t,e)}}function k_(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[J]>>14<t[ar]>>16&&(t[J]&3)===e&&(t[J]+=16384,Bd(a,s)):Bd(a,s)}var ur=-1,Rn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function O_(t){return t instanceof Rn}function N_(t){return(t.flags&8)!==0}function L_(t){return(t.flags&16)!==0}var Ta={},Ja=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Js(r);let i=this.injector.get(e,Ta,r);return i!==Ta||n===Ta?i:this.parentInjector.get(e,n,r)}};function cf(t){return t!==ur}function js(t){return t&32767}function P_(t){return t>>16}function Hs(t,e){let n=P_(t),r=e;for(;n>0;)r=r[Sr],n--;return r}var ec=!0;function Vd(t){let e=ec;return ec=t,e}var F_=256,lf=F_-1,uf=5,B_=0,Mt={};function V_(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Xr)&&(r=n[Xr]),r==null&&(r=n[Xr]=B_++);let i=r&lf,s=1<<i;e.data[t+(i>>uf)]|=s}function Us(t,e){let n=df(t,e);if(n!==-1)return n;let r=e[se];r.firstCreatePass&&(t.injectorIndex=e.length,Ra(r.data,t),Ra(e,null),Ra(r.blueprint,null));let i=tl(t,e),s=t.injectorIndex;if(cf(i)){let o=js(i),a=Hs(i,e),l=a[se].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function Ra(t,e){t.push(0,0,0,0,0,0,0,0,e)}function df(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function tl(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=mf(i),r===null)return ur;if(n++,i=i[Sr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ur}function tc(t,e,n){V_(t,e,n)}function hf(t,e,n){if(n&ae.Optional||t!==void 0)return t;Vc(e,"NodeInjector")}function ff(t,e,n,r){if(n&ae.Optional&&r===void 0&&(r=null),!(n&(ae.Self|ae.Host))){let i=t[gr],s=ct(void 0);try{return i?i.get(e,r,n&ae.Optional):_h(e,r,n&ae.Optional)}finally{ct(s)}}return hf(r,e,n)}function pf(t,e,n,r=ae.Default,i){if(t!==null){if(e[J]&2048&&!(r&ae.Self)){let o=$_(t,e,n,r,Mt);if(o!==Mt)return o}let s=gf(t,e,n,r,Mt);if(s!==Mt)return s}return ff(e,n,r,i)}function gf(t,e,n,r,i){let s=H_(n);if(typeof s=="function"){if(!ef(e,t,r))return r&ae.Host?hf(i,n,r):ff(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ae.Optional))Vc(n);else return o}finally{sf()}}else if(typeof s=="number"){let o=null,a=df(t,e),l=ur,c=r&ae.Host?e[At][St]:null;for((a===-1||r&ae.SkipSelf)&&(l=a===-1?tl(t,e):e[a+8],l===ur||!Hd(r,!1)?a=-1:(o=e[se],a=js(l),e=Hs(l,e)));a!==-1;){let p=e[se];if(jd(s,a,p.data)){let m=j_(a,e,n,o,r,c);if(m!==Mt)return m}l=e[a+8],l!==ur&&Hd(r,e[se].data[a+8]===c)&&jd(s,a,e)?(o=p,a=js(l),e=Hs(l,e)):a=-1}}return i}function j_(t,e,n,r,i,s){let o=e[se],a=o.data[t+8],l=r==null?io(a)&&ec:r!=o&&(a.type&3)!==0,c=i&ae.Host&&s===a,p=xs(a,o,n,l,c);return p!==null?kn(e,o,p,a):Mt}function xs(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,l=t.directiveStart,c=t.directiveEnd,p=s>>20,m=r?a:a+p,y=i?a+p:c;for(let g=m;g<y;g++){let u=o[g];if(g<l&&n===u||g>=l&&u.type===n)return g}if(i){let g=o[l];if(g&&an(g)&&g.type===n)return l}return null}function kn(t,e,n,r){let i=t[n],s=e.data;if(O_(i)){let o=i;o.resolving&&vv(mv(s[n]));let a=Vd(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?ct(o.injectImpl):null,p=ef(t,r,ae.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&R_(n,s[n],e)}finally{c!==null&&ct(c),Vd(a),o.resolving=!1,sf()}}return i}function H_(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Xr)?t[Xr]:void 0;return typeof e=="number"?e>=0?e&lf:U_:e}function jd(t,e,n){let r=1<<t;return!!(n[e+(t>>uf)]&r)}function Hd(t,e){return!(t&ae.Self)&&!(t&ae.Host&&e)}var En=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return pf(this._tNode,this._lView,e,Js(r),n)}};function U_(){return new En(tt(),_e())}function Hn(t){return ci(()=>{let e=t.prototype.constructor,n=e[Rs]||nc(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Rs]||nc(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function nc(t){return dh(t)?()=>{let e=nc(qe(t));return e&&e()}:dr(t)}function $_(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[J]&2048&&!(o[J]&512);){let a=gf(s,o,n,r|ae.Self,Mt);if(a!==Mt)return a;let l=s.parent;if(!l){let c=o[Ph];if(c){let p=c.get(n,Mt,r);if(p!==Mt)return p}l=mf(o),o=o[Sr]}s=l}return i}function mf(t){let e=t[se],n=e.type;return n===2?e.declTNode:n===1?t[St]:null}function Ud(t,e=null,n=null,r){let i=vf(t,e,n,r);return i.resolveInjectorInitializers(),i}function vf(t,e=null,n=null,r,i=new Set){let s=[n||Je,qv(t)];return r=r||(typeof t=="object"?void 0:Ke(t)),new ti(s,e||Wc(),r||null,i)}var Dn=class Dn{static create(e,n){if(Array.isArray(e))return Ud({name:""},n,e,"");{let r=e.name??"";return Ud({name:r},e.parent,e.providers,r)}}};Dn.THROW_IF_NOT_FOUND=Jr,Dn.NULL=new Ns,Dn.\u0275prov=X({token:Dn,providedIn:"any",factory:()=>de(wh)}),Dn.__NG_ELEMENT_ID__=-1;var cn=Dn;var W_=new ee("");W_.__NG_ELEMENT_ID__=t=>{let e=tt();if(e===null)throw new Y(204,!1);if(e.type&2)return e.value;if(t&ae.Optional)return null;throw new Y(204,!1)};var z_="ngOriginalError";function ka(t){return t[z_]}var Ut=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ka(e);for(;n&&ka(n);)n=ka(n);return n||null}},_f=new ee("",{providedIn:"root",factory:()=>z(Ut).handleError.bind(void 0)}),yf=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=G_,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),rc=class extends yf{constructor(e){super(),this._lView=e}onDestroy(e){return Gh(this._lView,e),()=>p_(this._lView,e)}};function G_(){return new rc(_e())}function q_(){return wr(tt(),_e())}function wr(t,e){return new ft(wt(t,e))}var ft=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=q_;let t=e;return t})();function K_(t){return t instanceof ft?t.nativeElement:t}var br=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new He(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var ic=class extends Ie{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,i_()&&(this.destroyRef=z(yf,{optional:!0})??void 0,this.pendingTasks=z(br,{optional:!0})??void 0)}emit(e){let n=he(null);try{super.next(e)}finally{he(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ae&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Re=ic;function Z_(){return this._results[Symbol.iterator]()}var sc=class t{get changes(){return this._changes??=new Re}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Z_)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=xv(e);(this._changesDetected=!Mv(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Cf(t){return(t.flags&128)===128}var Sf=new Map,Y_=0;function Q_(){return Y_++}function X_(t){Sf.set(t[ro],t)}function J_(t){Sf.delete(t[ro])}var $d="__ngContext__";function On(t,e){sn(e)?(t[$d]=e[ro],X_(e)):t[$d]=e}function wf(t){return Df(t[ni])}function bf(t){return Df(t[Ct])}function Df(t){for(;t!==null&&!Gt(t);)t=t[Ct];return t}var oc;function Ef(t){oc=t}function ey(){if(oc!==void 0)return oc;if(typeof document<"u")return document;throw new Y(210,!1)}var nl=new ee("",{providedIn:"root",factory:()=>ty}),ty="ng",rl=new ee(""),Dr=new ee("",{providedIn:"platform",factory:()=>"unknown"});var il=new ee("",{providedIn:"root",factory:()=>ey().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ny="h",ry="b";var iy=()=>null;function sl(t,e,n=!1){return iy(t,e,n)}var If=!1,sy=new ee("",{providedIn:"root",factory:()=>If});var ac=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ov})`}};function di(t){return t instanceof ac?t.changingThisBreaksApplicationSecurity:t}function Mf(t){return t.ownerDocument.defaultView}function xf(t){return t instanceof Function?t():t}var $t=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}($t||{}),oy;function ol(t,e){return oy(t,e)}function cr(t,e,n,r,i){if(r!=null){let s,o=!1;Gt(r)?s=r:sn(r)&&(o=!0,r=r[zt]);let a=Rt(r);t===0&&n!==null?i==null?kf(e,n,a):Ws(e,n,a,i||null,!0):t===1&&n!==null?Ws(e,n,a,i||null,!0):t===2?wy(e,a,o):t===3&&e.destroyNode(a),s!=null&&Dy(e,t,s,n,i)}}function ay(t,e){return t.createText(e)}function cy(t,e,n){t.setValue(e,n)}function Af(t,e,n){return t.createElement(e,n)}function ly(t,e){Tf(t,e),e[zt]=null,e[St]=null}function uy(t,e,n,r,i,s){r[zt]=i,r[St]=e,ao(t,r,n,1,i,s)}function Tf(t,e){e[jt].changeDetectionScheduler?.notify(8),ao(t,e,e[Oe],2,null,null)}function dy(t){let e=t[ni];if(!e)return Oa(t[se],t);for(;e;){let n=null;if(sn(e))n=e[ni];else{let r=e[et];r&&(n=r)}if(!n){for(;e&&!e[Ct]&&e!==t;)sn(e)&&Oa(e[se],e),e=e[ze];e===null&&(e=t),sn(e)&&Oa(e[se],e),n=e&&e[Ct]}e=n}}function hy(t,e,n,r){let i=et+r,s=n.length;r>0&&(n[i-1][Ct]=e),r<s-et?(e[Ct]=n[i],Sh(n,et+r,e)):(n.push(e),e[Ct]=null),e[ze]=n;let o=e[Mn];o!==null&&n!==o&&Rf(o,e);let a=e[Ht];a!==null&&a.insertView(t),Qa(e),e[J]|=128}function Rf(t,e){let n=t[mr],r=e[ze];if(sn(r))t[J]|=Bs.HasTransplantedViews;else{let i=r[ze][At];e[At]!==i&&(t[J]|=Bs.HasTransplantedViews)}n===null?t[mr]=[e]:n.push(e)}function al(t,e){let n=t[mr],r=n.indexOf(e);n.splice(r,1)}function $s(t,e){if(t.length<=et)return;let n=et+e,r=t[n];if(r){let i=r[Mn];i!==null&&i!==t&&al(i,r),e>0&&(t[n-1][Ct]=r[Ct]);let s=Os(t,et+e);ly(r[se],r);let o=s[Ht];o!==null&&o.detachView(s[se]),r[ze]=null,r[Ct]=null,r[J]&=-129}return r}function cl(t,e){if(!(e[J]&256)){let n=e[Oe];n.destroyNode&&ao(t,e,n,3,null,null),dy(e)}}function Oa(t,e){if(e[J]&256)return;let n=he(null);try{e[J]&=-129,e[J]|=256,e[lt]&&aa(e[lt]),py(t,e),fy(t,e),e[se].type===1&&e[Oe].destroy();let r=e[Mn];if(r!==null&&Gt(e[ze])){r!==e[ze]&&al(r,e);let i=e[Ht];i!==null&&i.detachView(t)}J_(e)}finally{he(n)}}function fy(t,e){let n=t.cleanup,r=e[Ps];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Ps]=null);let i=e[rn];if(i!==null){e[rn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function py(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Rn)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];It(4,a,l);try{l.call(a)}finally{It(5,a,l)}}else{It(4,i,s);try{s.call(i)}finally{It(5,i,s)}}}}}function gy(t,e,n){return my(t,e.parent,n)}function my(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[zt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===xt.None||s===xt.Emulated)return null}return wt(r,n)}}function Ws(t,e,n,r,i){t.insertBefore(e,n,r,i)}function kf(t,e,n){t.appendChild(e,n)}function Wd(t,e,n,r,i){r!==null?Ws(t,e,n,r,i):kf(t,e,n)}function vy(t,e,n,r){t.removeChild(e,n,r)}function ll(t,e){return t.parentNode(e)}function _y(t,e){return t.nextSibling(e)}function yy(t,e,n){return Sy(t,e,n)}function Cy(t,e,n){return t.type&40?wt(t,n):null}var Sy=Cy,zd;function ul(t,e,n,r){let i=gy(t,r,e),s=e[Oe],o=r.parent||e[St],a=yy(o,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)Wd(s,i,n[l],a,!1);else Wd(s,i,n,a,!1);zd!==void 0&&zd(s,r,e,n,i)}function As(t,e){if(e!==null){let n=e.type;if(n&3)return wt(e,t);if(n&4)return cc(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return As(t,r);{let i=t[e.index];return Gt(i)?cc(-1,i):Rt(i)}}else{if(n&32)return ol(e,t)()||Rt(t[e.index]);{let r=Of(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=An(t[At]);return As(i,r)}else return As(t,e.next)}}}return null}function Of(t,e){if(e!==null){let r=t[At][St],i=e.projection;return r.projection[i]}return null}function cc(t,e){let n=et+t+1;if(n<e.length){let r=e[n],i=r[se].firstChild;if(i!==null)return As(r,i)}return e[xn]}function wy(t,e,n){let r=ll(t,e);r&&vy(t,r,e,n)}function dl(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],l=n.type;if(o&&e===0&&(a&&On(Rt(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)dl(t,e,n.child,r,i,s,!1),cr(e,t,i,a,s);else if(l&32){let c=ol(n,r),p;for(;p=c();)cr(e,t,i,p,s);cr(e,t,i,a,s)}else l&16?by(t,e,r,n,i,s):cr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function ao(t,e,n,r,i,s){dl(n,r,t.firstChild,e,i,s,!1)}function by(t,e,n,r,i,s){let o=n[At],l=o[St].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let p=l[c];cr(e,t,i,p,s)}else{let c=l,p=o[ze];Cf(r)&&(c.flags|=128),dl(t,e,c,p,i,s,!0)}}function Dy(t,e,n,r,i){let s=n[xn],o=Rt(n);s!==o&&cr(e,t,r,s,i);for(let a=et;a<n.length;a++){let l=n[a];ao(l[se],l,t,e,r,s)}}function Ey(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:$t.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=$t.Important),t.setStyle(n,r,i,s))}}function Iy(t,e,n){t.setAttribute(e,"style",n)}function Nf(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Lf(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&za(t,e,r),i!==null&&Nf(t,e,i),s!==null&&Iy(t,e,s)}var kt={};function Ce(t=1){Pf(Ge(),_e(),jn()+t,!1)}function Pf(t,e,n,r){if(!r)if((e[J]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Is(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Ms(e,s,0,n)}Tn(n)}function ne(t,e=ae.Default){let n=_e();if(n===null)return de(t,e);let r=tt();return pf(r,n,qe(t),e)}function Ff(t,e,n,r,i,s){let o=he(null);try{let a=null;i&on.SignalBased&&(a=e[r][Ft]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&on.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):Vh(e,a,r,s)}finally{he(o)}}function My(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Tn(~i);else{let s=i,o=n[++r],a=n[++r];E_(o,s);let l=e[s];a(2,l)}}}finally{Tn(-1)}}function co(t,e,n,r,i,s,o,a,l,c,p){let m=e.blueprint.slice();return m[zt]=i,m[J]=r|4|128|8|64,(c!==null||t&&t[J]&2048)&&(m[J]|=2048),Wh(m),m[ze]=m[Sr]=t,m[dt]=n,m[jt]=o||t&&t[jt],m[Oe]=a||t&&t[Oe],m[gr]=l||t&&t[gr]||null,m[St]=s,m[ro]=Q_(),m[Ls]=p,m[Ph]=c,m[At]=e.type==2?t[At]:m,m}function lo(t,e,n,r,i){let s=t.data[e];if(s===null)s=xy(t,e,n,r,i),D_()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=S_();s.injectorIndex=o===null?-1:o.injectorIndex}return ui(s,!0),s}function xy(t,e,n,r,i){let s=Zh(),o=Yh(),a=o?s:s&&s.parent,l=t.data[e]=Ny(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function Bf(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Vf(t,e,n,r,i){let s=jn(),o=r&2;try{Tn(-1),o&&e.length>Tt&&Pf(t,e,Tt,!1),It(o?2:0,i),n(r,i)}finally{Tn(s),It(o?3:1,i)}}function jf(t,e,n){if(Bh(e)){let r=he(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{he(r)}}}function Hf(t,e,n){Kh()&&(jy(t,e,n,wt(n,e)),(n.flags&64)===64&&Gf(t,e,n))}function Uf(t,e,n=wt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function $f(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=hl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function hl(t,e,n,r,i,s,o,a,l,c,p){let m=Tt+r,y=m+i,g=Ay(m,y),u=typeof c=="function"?c():c;return g[se]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:u,incompleteFirstPass:!1,ssrId:p}}function Ay(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:kt);return n}function Ty(t,e,n,r){let s=r.get(sy,If)||n===xt.ShadowDom,o=t.selectRootElement(e,s);return Ry(o),o}function Ry(t){ky(t)}var ky=()=>null;function Oy(t,e,n,r){let i=Zf(e);i.push(n),t.firstCreatePass&&Yf(t).push(r,i.length-1)}function Ny(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return __()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Gd(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,l=on.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(i!==null){if(!i.hasOwnProperty(s))continue;c=i[s]}t===0?qd(r,n,c,a,l):qd(r,n,c,a)}return r}function qd(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function Ly(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],l=null,c=null;for(let p=r;p<i;p++){let m=s[p],y=n?n.get(m):null,g=y?y.inputs:null,u=y?y.outputs:null;l=Gd(0,m.inputs,p,l,g),c=Gd(1,m.outputs,p,c,u);let f=l!==null&&o!==null&&!Uc(e)?Zy(l,p,o):null;a.push(f)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function Py(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function fl(t,e,n,r,i,s,o,a){let l=wt(e,n),c=e.inputs,p;!a&&c!=null&&(p=c[r])?(pl(t,n,p,r,i),io(e)&&Fy(n,e.index)):e.type&3?(r=Py(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(l,r,i)):e.type&12}function Fy(t,e){let n=dn(e,t);n[J]&16||(n[J]|=64)}function Wf(t,e,n,r){if(Kh()){let i=r===null?null:{"":-1},s=Uy(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&zf(t,e,n,o,i,a),i&&$y(n,r,i)}n.mergedAttrs=ei(n.mergedAttrs,n.attrs)}function zf(t,e,n,r,i,s){for(let c=0;c<r.length;c++)tc(Us(n,e),t,r[c].type);zy(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let p=r[c];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,l=Bf(t,e,r.length,null);for(let c=0;c<r.length;c++){let p=r[c];n.mergedAttrs=ei(n.mergedAttrs,p.hostAttrs),Gy(t,n,e,l,p),Wy(l,p,i),p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let m=p.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}Ly(t,n,s)}function By(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;Vy(o)!=a&&o.push(a),o.push(n,r,s)}}function Vy(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function jy(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;io(n)&&qy(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Us(n,e),On(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let l=t.data[a],c=kn(e,t,a,n);if(On(c,e),o!==null&&Ky(e,a-i,c,l,n,o),an(l)){let p=dn(n.index,e);p[dt]=kn(e,t,a,n)}}}function Gf(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=I_();try{Tn(s);for(let a=r;a<i;a++){let l=t.data[a],c=e[a];Xa(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Hy(l,c)}}finally{Tn(-1),Xa(o)}}function Hy(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Uy(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(Bv(e,o.selectors,!1))if(r||(r=[]),an(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let l=a.length;lc(t,e,l)}else r.unshift(o),lc(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function lc(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function $y(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new Y(-301,!1);r.push(e[i],s)}}}function Wy(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;an(e)&&(n[""]=t)}}function zy(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Gy(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=dr(i.type,!0)),o=new Rn(s,an(i),ne);t.blueprint[r]=o,n[r]=o,By(t,e,r,Bf(t,n,i.hostVars,kt),i)}function qy(t,e,n){let r=wt(e,t),i=$f(n),s=t[jt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=uo(t,co(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function Ky(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],p=o[a++],m=o[a++];Ff(r,n,l,c,p,m)}}function Zy(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function qf(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Kf(t,e){let n=t.contentQueries;if(n!==null){let r=he(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Kc(s),a.contentQueries(2,e[o],o)}}}finally{he(r)}}}function uo(t,e){return t[ni]?t[Ld][Ct]=e:t[ni]=e,t[Ld]=e,e}function uc(t,e,n){Kc(0);let r=he(null);try{e(t,n)}finally{he(r)}}function Zf(t){return t[Ps]??=[]}function Yf(t){return t.cleanup??=[]}function Qf(t,e){let n=t[gr],r=n?n.get(Ut,null):null;r&&r.handleError(e)}function pl(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],l=n[s++],c=e[o],p=t.data[o];Ff(p,c,r,a,l,i)}}function Yy(t,e,n){let r=$h(e,t);cy(t[Oe],r,n)}function Qy(t,e){let n=dn(e,t),r=n[se];Xy(r,n);let i=n[zt];i!==null&&n[Ls]===null&&(n[Ls]=sl(i,n[gr])),gl(r,n,n[dt])}function Xy(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function gl(t,e,n){Zc(e);try{let r=t.viewQuery;r!==null&&uc(1,r,n);let i=t.template;i!==null&&Vf(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ht]?.finishViewCreation(t),t.staticContentQueries&&Kf(t,e),t.staticViewQueries&&uc(2,t.viewQuery,n);let s=t.components;s!==null&&Jy(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[J]&=-5,Yc()}}function Jy(t,e){for(let n=0;n<e.length;n++)Qy(t,e[n])}function Xf(t,e,n,r){let i=he(null);try{let s=e.tView,a=t[J]&4096?4096:16,l=co(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];l[Mn]=c;let p=t[Ht];return p!==null&&(l[Ht]=p.createEmbeddedView(s)),gl(s,l,n),l}finally{he(i)}}function e0(t,e){let n=et+e;if(n<t.length)return t[n]}function dc(t,e){return!e||e.firstChild===null||Cf(t)}function Jf(t,e,n,r=!0){let i=e[se];if(hy(i,e,t,n),r){let o=cc(n,t),a=e[Oe],l=ll(a,t[xn]);l!==null&&uy(i,t[St],a,e,l,o)}let s=e[Ls];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function t0(t,e){let n=$s(t,e);return n!==void 0&&cl(n[se],n),n}function zs(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Rt(s)),Gt(s)&&n0(s,r);let o=n.type;if(o&8)zs(t,e,n.child,r);else if(o&32){let a=ol(n,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=Of(e,n);if(Array.isArray(a))r.push(...a);else{let l=An(e[At]);zs(l[se],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function n0(t,e){for(let n=et;n<t.length;n++){let r=t[n],i=r[se].firstChild;i!==null&&zs(r[se],r,i,e)}t[xn]!==t[zt]&&e.push(t[xn])}var ep=[];function r0(t){return t[lt]??i0(t)}function i0(t){let e=ep.pop()??Object.create(o0);return e.lView=t,e}function s0(t){t.lView[lt]!==t&&(t.lView=null,ep.push(t))}var o0=ge(H({},Kr),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{so(t.lView)},consumerOnSignalRead(){this.lView[lt]=this}});function a0(t){let e=t[lt]??Object.create(c0);return e.lView=t,e}var c0=ge(H({},Kr),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=An(t.lView);for(;e&&!tp(e[se]);)e=An(e);e&&zh(e)},consumerOnSignalRead(){this.lView[lt]=this}});function tp(t){return t.type!==2}var l0=100;function np(t,e=!0,n=0){let r=t[jt],i=r.rendererFactory,s=!1;s||i.begin?.();try{u0(t,n)}catch(o){throw e&&Qf(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function u0(t,e){let n=Qh();try{Fd(!0),hc(t,e);let r=0;for(;ri(t);){if(r===l0)throw new Y(103,!1);r++,hc(t,1)}}finally{Fd(n)}}function d0(t,e,n,r){let i=e[J];if((i&256)===256)return;let s=!1,o=!1;!s&&e[jt].inlineEffectRunner?.flush(),Zc(e);let a=!0,l=null,c=null;s||(tp(t)?(c=r0(e),l=Zi(c)):Uu()===null?(a=!1,c=a0(e),l=Zi(c)):e[lt]&&(aa(e[lt]),e[lt]=null));try{Wh(e),b_(t.bindingStartIndex),n!==null&&Vf(t,e,n,2,r);let p=(i&3)===3;if(!s)if(p){let g=t.preOrderCheckHooks;g!==null&&Is(e,g,null)}else{let g=t.preOrderHooks;g!==null&&Ms(e,g,0,null),Aa(e,0)}if(o||h0(e),rp(e,0),t.contentQueries!==null&&Kf(t,e),!s)if(p){let g=t.contentCheckHooks;g!==null&&Is(e,g)}else{let g=t.contentHooks;g!==null&&Ms(e,g,1),Aa(e,1)}My(t,e);let m=t.components;m!==null&&sp(e,m,0);let y=t.viewQuery;if(y!==null&&uc(2,y,r),!s)if(p){let g=t.viewCheckHooks;g!==null&&Is(e,g)}else{let g=t.viewHooks;g!==null&&Ms(e,g,2),Aa(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[xa]){for(let g of e[xa])g();e[xa]=null}s||(e[J]&=-73)}catch(p){throw s||so(e),p}finally{c!==null&&(sa(c,l),a&&s0(c)),Yc()}}function rp(t,e){for(let n=wf(t);n!==null;n=bf(n))for(let r=et;r<n.length;r++){let i=n[r];ip(i,e)}}function h0(t){for(let e=wf(t);e!==null;e=bf(e)){if(!(e[J]&Bs.HasTransplantedViews))continue;let n=e[mr];for(let r=0;r<n.length;r++){let i=n[r];zh(i)}}}function f0(t,e,n){let r=dn(e,t);ip(r,n)}function ip(t,e){qc(t)&&hc(t,e)}function hc(t,e){let r=t[se],i=t[J],s=t[lt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&oa(s)),o||=!1,s&&(s.dirty=!1),t[J]&=-9217,o)d0(r,t,r.template,t[dt]);else if(i&8192){rp(t,1);let a=r.components;a!==null&&sp(t,a,1)}}function sp(t,e,n){for(let r=0;r<e.length;r++)f0(t,e[r],n)}function ml(t,e){let n=Qh()?64:1088;for(t[jt].changeDetectionScheduler?.notify(e);t;){t[J]|=n;let r=An(t);if(Za(t)&&!r)return t;t=r}return null}var Nn=class{get rootNodes(){let e=this._lView,n=e[se];return zs(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dt]}set context(e){this._lView[dt]=e}get destroyed(){return(this._lView[J]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ze];if(Gt(e)){let n=e[Fs],r=n?n.indexOf(this):-1;r>-1&&($s(e,r),Os(n,r))}this._attachedToViewContainer=!1}cl(this._lView[se],this._lView)}onDestroy(e){Gh(this._lView,e)}markForCheck(){ml(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){Qa(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,np(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Za(this._lView),n=this._lView[Mn];n!==null&&!e&&al(n,this._lView),Tf(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e;let n=Za(this._lView),r=this._lView[Mn];r!==null&&!n&&Rf(r,this._lView),Qa(this._lView)}},Ln=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=m0;let t=e;return t})(),p0=Ln,g0=class extends p0{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Xf(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Nn(i)}};function m0(){return vl(tt(),_e())}function vl(t,e){return t.type&4?new g0(e,t,wr(t,e)):null}var mA=new RegExp(`^(\\d+)*(${ry}|${ny})*(.*)`);var v0=()=>null;function fc(t,e){return v0(t,e)}var ii=class{},_l=new ee("",{providedIn:"root",factory:()=>!1});var op=new ee(""),pc=class{},Gs=class{};function _0(t){let e=Error(`No component factory found for ${Ke(t)}.`);return e[y0]=t,e}var y0="ngComponent";var gc=class{resolveComponentFactory(e){throw _0(e)}},Rl=class Rl{};Rl.NULL=new gc;var vr=Rl,_r=class{},hn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>C0();let t=e;return t})();function C0(){let t=_e(),e=tt(),n=dn(e.index,t);return(sn(n)?n:t)[Oe]}var S0=(()=>{let e=class e{};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var Kd=new Set;function Er(t){Kd.has(t)||(Kd.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function ap(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof ja.requestAnimationFrame=="function"&&ja.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function Zd(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function Yd(...t){}var ke=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Re(!1),this.onMicrotaskEmpty=new Re(!1),this.onStable=new Re(!1),this.onError=new Re(!1),typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,D0(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Y(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,w0,Yd,Yd);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},w0={};function yl(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function b0(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{ap(()=>{t.callbackScheduled=!1,mc(t),t.isCheckStableRunning=!0,yl(t),t.isCheckStableRunning=!1})}),mc(t))}function D0(t){let e=()=>{b0(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(E0(a))return n.invokeTask(i,s,o,a);try{return Qd(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Xd(t)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return Qd(t),n.invoke(i,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!I0(a)&&e(),Xd(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,mc(t),yl(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function mc(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Qd(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Xd(t){t._nesting--,yl(t)}var vc=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Re,this.onMicrotaskEmpty=new Re,this.onStable=new Re,this.onError=new Re}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function E0(t){return cp(t,"__ignore_ng_zone__")}function I0(t){return cp(t,"__scheduler_tick__")}function cp(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var lp=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function _c(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Ha(i,a);else if(s==2){let l=a,c=e[++o];r=Ha(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var qs=class extends vr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=In(e);return new si(n,this.ngModule)}};function Jd(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:on.None;e?n.push({propName:o,templateName:r,isSignal:(a&on.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function M0(t){let e=t.toLowerCase();return e==="svg"?l_:e==="math"?u_:null}var si=class extends Gs{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Jd(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Jd(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Uv(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=he(null);try{i=i||this.ngModule;let o=i instanceof ut?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Ja(e,o):e,l=a.get(_r,null);if(l===null)throw new Y(407,!1);let c=a.get(S0,null),p=a.get(lp,null),m=a.get(ii,null),y={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:p,changeDetectionScheduler:m},g=l.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",f=r?Ty(g,r,this.componentDef.encapsulation,a):Af(g,u,M0(u)),d=512;this.componentDef.signals?d|=4096:this.componentDef.onPush||(d|=16);let h=null;f!==null&&(h=sl(f,a,!0));let v=hl(0,null,null,1,0,null,null,null,null,null,null),C=co(null,v,null,d,null,null,y,g,a,null,h);Zc(C);let S,w;try{let _=this.componentDef,b,A=null;_.findHostDirectiveDefs?(b=[],A=new Map,_.findHostDirectiveDefs(_,b,A),b.push(_)):b=[_];let T=x0(C,f),k=A0(T,f,_,b,C,y,g);w=Gc(v,Tt),f&&k0(g,_,f,r),n!==void 0&&O0(w,this.ngContentSelectors,n),S=R0(k,_,b,A,C,[N0]),gl(v,C,null)}finally{Yc()}return new yc(this.componentType,S,wr(w,C),C,w)}finally{he(s)}}},yc=class extends pc{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Nn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;pl(s[se],s,i,e,n),this.previousInputValues.set(e,n);let o=dn(this._tNode.index,s);ml(o,1)}}get injector(){return new En(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function x0(t,e){let n=t[se],r=Tt;return t[r]=e,lo(n,r,2,"#host",null)}function A0(t,e,n,r,i,s,o){let a=i[se];T0(r,t,e,o);let l=null;e!==null&&(l=sl(e,i[gr]));let c=s.rendererFactory.createRenderer(e,n),p=16;n.signals?p=4096:n.onPush&&(p=64);let m=co(i,$f(n),null,p,i[t.index],t,s,c,null,null,l);return a.firstCreatePass&&lc(a,t,r.length-1),uo(i,m),i[t.index]=m}function T0(t,e,n,r){for(let i of t)e.mergedAttrs=ei(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(_c(e,e.mergedAttrs,!0),n!==null&&Lf(r,n,e))}function R0(t,e,n,r,i,s){let o=tt(),a=i[se],l=wt(o,i);zf(a,i,o,n,null,r);for(let p=0;p<n.length;p++){let m=o.directiveStart+p,y=kn(i,a,m,o);On(y,i)}Gf(a,i,o),l&&On(l,i);let c=kn(i,a,o.directiveStart+o.componentOffset,o);if(t[dt]=i[dt]=c,s!==null)for(let p of s)p(c,e);return jf(a,o,i),c}function k0(t,e,n,r){if(r)za(t,n,["ng-version","18.1.0"]);else{let{attrs:i,classes:s}=$v(e.selectors[0]);i&&za(t,n,i),s&&s.length>0&&Nf(t,n,s.join(" "))}}function O0(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function N0(){let t=tt();el(_e()[se],t)}var fn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=L0;let t=e;return t})();function L0(){let t=tt();return dp(t,_e())}var P0=fn,up=class extends P0{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return wr(this._hostTNode,this._hostLView)}get injector(){return new En(this._hostTNode,this._hostLView)}get parentInjector(){let e=tl(this._hostTNode,this._hostLView);if(cf(e)){let n=Hs(e,this._hostLView),r=js(e),i=n[se].data[r+8];return new En(i,n)}else return new En(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=eh(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-et}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=fc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,dc(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!s_(e),a;if(o)a=n;else{let u=n||{};a=u.index,r=u.injector,i=u.projectableNodes,s=u.environmentInjector||u.ngModuleRef}let l=o?e:new si(In(e)),c=r||this.parentInjector;if(!s&&l.ngModule==null){let f=(o?c:this.parentInjector).get(ut,null);f&&(s=f)}let p=In(l.componentType??{}),m=fc(this._lContainer,p?.id??null),y=m?.firstChild??null,g=l.create(c,i,y,s);return this.insertImpl(g.hostView,a,dc(this._hostTNode,m)),g}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(h_(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[ze],c=new up(l,l[St],l[ze]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Jf(o,i,s,r),e.attachToViewContainerRef(),Sh(Na(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=eh(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=$s(this._lContainer,n);r&&(Os(Na(this._lContainer),n),cl(r[se],r))}detach(e){let n=this._adjustIndex(e,-1),r=$s(this._lContainer,n);return r&&Os(Na(this._lContainer),n)!=null?new Nn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function eh(t){return t[Fs]}function Na(t){return t[Fs]||(t[Fs]=[])}function dp(t,e){let n,r=e[t.index];return Gt(r)?n=r:(n=qf(r,e,null,t),e[t.index]=n,uo(e,n)),B0(n,e,t,r),new up(n,t,e)}function F0(t,e){let n=t[Oe],r=n.createComment(""),i=wt(e,t),s=ll(n,i);return Ws(n,s,r,_y(n,i),!1),r}var B0=H0,V0=()=>!1;function j0(t,e,n){return V0(t,e,n)}function H0(t,e,n,r){if(t[xn])return;let i;n.type&8?i=Rt(r):i=F0(e,n),t[xn]=i}var Cc=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Sc=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Cl(e,n).matches!==null&&this.queries[n].setDirty()}},wc=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=Z0(e):this.predicate=e}},bc=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Dc=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,U0(n,s)),this.matchTNodeWithReadOption(e,n,xs(n,e,s,!1,!1))}else r===Ln?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,xs(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ft||i===fn||i===Ln&&n.type&4)this.addMatch(n.index,-2);else{let s=xs(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function U0(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function $0(t,e){return t.type&11?wr(t,e):t.type&4?vl(t,e):null}function W0(t,e,n,r){return n===-1?$0(e,t):n===-2?z0(t,e,r):kn(t,t[se],n,e)}function z0(t,e,n){if(n===ft)return wr(e,t);if(n===Ln)return vl(e,t);if(n===fn)return dp(e,t)}function hp(t,e,n,r){let i=e[Ht].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let p=s[c];a.push(W0(e,p,o[l+1],n.metadata.read))}}i.matches=a}return i.matches}function Ec(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=hp(t,e,i,n);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)r.push(o[a/2]);else{let c=s[a+1],p=e[-l];for(let m=et;m<p.length;m++){let y=p[m];y[Mn]===y[ze]&&Ec(y[se],y,c,r)}if(p[mr]!==null){let m=p[mr];for(let y=0;y<m.length;y++){let g=m[y];Ec(g[se],g,c,r)}}}}}return r}function G0(t,e){return t[Ht].queries[e].queryList}function q0(t,e,n){let r=new sc((n&4)===4);return Oy(t,e,r,r.destroy),(e[Ht]??=new Sc).queries.push(new Cc(r))-1}function K0(t,e,n){let r=Ge();return r.firstCreatePass&&(Y0(r,new wc(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),q0(r,_e(),e)}function Z0(t){return t.split(",").map(e=>e.trim())}function Y0(t,e,n){t.queries===null&&(t.queries=new bc),t.queries.track(new Dc(e,n))}function Cl(t,e){return t.queries.getByIndex(e)}function Q0(t,e){let n=t[se],r=Cl(n,e);return r.crossesNgTemplate?Ec(n,t,e,[]):hp(n,t,r,e)}function X0(t){return typeof t=="function"&&t[Ft]!==void 0}function ho(t,e){Er("NgSignals");let n=Ju(t),r=n[Ft];return e?.equal&&(r.equal=e.equal),n.set=i=>ca(r,i),n.update=i=>ed(r,i),n.asReadonly=J0.bind(n),n}function J0(){let t=this[Ft];if(t.readonlyFn===void 0){let e=()=>this();e[Ft]=t,t.readonlyFn=e}return t.readonlyFn}function fp(t){return X0(t)&&typeof t.set=="function"}function eC(t){return Object.getPrototypeOf(t.prototype).constructor}function pn(t){let e=eC(t.type),n=!0,r=[t];for(;e;){let i;if(an(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Y(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=bs(t.inputs),o.inputTransforms=bs(t.inputTransforms),o.declaredInputs=bs(t.declaredInputs),o.outputs=bs(t.outputs);let a=i.hostBindings;a&&sC(t,a);let l=i.viewQuery,c=i.contentQueries;if(l&&rC(t,l),c&&iC(t,c),tC(t,i),cv(t.outputs,i.outputs),an(i)&&i.data.animation){let p=t.data;p.animation=(p.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===pn&&(n=!1)}}e=Object.getPrototypeOf(e)}nC(r)}function tC(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function nC(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ei(i.hostAttrs,n=ei(n,i.hostAttrs))}}function bs(t){return t===hr?{}:t===Je?[]:t}function rC(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function iC(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function sC(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var ln=class{},oi=class{};var Ic=class extends ln{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qs(this);let i=Ah(e);this._bootstrapComponents=xf(i.bootstrap),this._r3Injector=vf(e,n,[{provide:ln,useValue:this},{provide:vr,useValue:this.componentFactoryResolver},...r],Ke(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Mc=class extends oi{constructor(e){super(),this.moduleType=e}create(e){return new Ic(this.moduleType,e,[])}};var Ks=class extends ln{constructor(e){super(),this.componentFactoryResolver=new qs(this),this.instance=null;let n=new ti([...e.providers,{provide:ln,useValue:this},{provide:vr,useValue:this.componentFactoryResolver}],e.parent||Wc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Sl(t,e,n=null){return new Ks({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function pp(t){return aC(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function oC(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function aC(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Ir(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function cC(t){return(t.flags&32)===32}function lC(t,e,n,r,i,s,o,a,l){let c=e.consts,p=lo(e,t,4,o||null,a||null);Wf(e,n,p,Vs(c,l)),el(e,p);let m=p.tView=hl(2,p,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,p),m.queries=e.queries.embeddedTView(p)),p}function uC(t,e,n,r,i,s,o,a,l,c){let p=n+Tt,m=e.firstCreatePass?lC(p,e,t,r,i,s,o,a,l):e.data[p];ui(m,!1);let y=dC(e,t,m,n);Xc()&&ul(e,t,y,m),On(y,t);let g=qf(y,t,y,m);return t[p]=g,uo(t,g),j0(g,m,t),zc(m)&&Hf(e,t,m),l!=null&&Uf(t,m,c),m}function Ye(t,e,n,r,i,s,o,a){let l=_e(),c=Ge(),p=Vs(c.consts,s);return uC(l,c,t,e,n,r,i,p,o,a),Ye}var dC=hC;function hC(t,e,n,r){return Jc(!0),e[Oe].createComment("")}function gp(t,e,n,r){return Ir(t,oo(),n)?e+mh(n)+r:kt}function Ds(t,e){return t<<17|e<<2}function Pn(t){return t>>17&32767}function fC(t){return(t&2)==2}function pC(t,e){return t&131071|e<<17}function xc(t){return t|2}function yr(t){return(t&131068)>>2}function La(t,e){return t&-131069|e<<2}function gC(t){return(t&1)===1}function Ac(t){return t|1}function mC(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Pn(o),l=yr(o);t[r]=n;let c=!1,p;if(Array.isArray(n)){let m=n;p=m[1],(p===null||li(m,p)>0)&&(c=!0)}else p=n;if(i)if(l!==0){let y=Pn(t[a+1]);t[r+1]=Ds(y,a),y!==0&&(t[y+1]=La(t[y+1],r)),t[a+1]=pC(t[a+1],r)}else t[r+1]=Ds(a,0),a!==0&&(t[a+1]=La(t[a+1],r)),a=r;else t[r+1]=Ds(l,0),a===0?a=r:t[l+1]=La(t[l+1],r),l=r;c&&(t[r+1]=xc(t[r+1])),th(t,p,r,!0),th(t,p,r,!1),vC(e,p,t,r,s),o=Ds(a,l),s?e.classBindings=o:e.styleBindings=o}function vC(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&li(s,e)>=0&&(n[r+1]=Ac(n[r+1]))}function th(t,e,n,r){let i=t[n+1],s=e===null,o=r?Pn(i):yr(i),a=!1;for(;o!==0&&(a===!1||s);){let l=t[o],c=t[o+1];_C(l,e)&&(a=!0,t[o+1]=r?Ac(c):xc(c)),o=r?Pn(c):yr(c)}a&&(t[n+1]=r?xc(i):Ac(i))}function _C(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?li(t,e)>=0:!1}var Fe={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function mp(t){return t.substring(Fe.key,Fe.keyEnd)}function yC(t){return t.substring(Fe.value,Fe.valueEnd)}function CC(t){return yp(t),vp(t,Cr(t,0,Fe.textEnd))}function vp(t,e){let n=Fe.textEnd;return n===e?-1:(e=Fe.keyEnd=wC(t,Fe.key=e,n),Cr(t,e,n))}function SC(t){return yp(t),_p(t,Cr(t,0,Fe.textEnd))}function _p(t,e){let n=Fe.textEnd,r=Fe.key=Cr(t,e,n);return n===r?-1:(r=Fe.keyEnd=bC(t,r,n),r=nh(t,r,n,58),r=Fe.value=Cr(t,r,n),r=Fe.valueEnd=DC(t,r,n),nh(t,r,n,59))}function yp(t){Fe.key=0,Fe.keyEnd=0,Fe.value=0,Fe.valueEnd=0,Fe.textEnd=t.length}function Cr(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function wC(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function bC(t,e,n){let r;for(;e<n&&((r=t.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function nh(t,e,n,r){return e=Cr(t,e,n),e<n&&e++,e}function DC(t,e,n){let r=-1,i=-1,s=-1,o=e,a=o;for(;o<n;){let l=t.charCodeAt(o++);if(l===59)return a;l===34||l===39?a=o=rh(t,l,o,n):e===o-4&&s===85&&i===82&&r===76&&l===40?a=o=rh(t,41,o,n):l>32&&(a=o),s=i,i=r,r=l&-33}return a}function rh(t,e,n,r){let i=-1,s=n;for(;s<r;){let o=t.charCodeAt(s++);if(o==e&&i!==92)return s;o==92&&i===92?i=0:i=o}throw new Error}function Ne(t,e,n){let r=_e(),i=oo();if(Ir(r,i,e)){let s=Ge(),o=Qc();fl(s,o,r,t,e,r[Oe],n,!1)}return Ne}function Tc(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";pl(t,n,s[o],o,r)}function wl(t,e){return MC(t,e,null,!0),wl}function Cp(t){Sp(Dp,EC,t,!1)}function EC(t,e){for(let n=SC(e);n>=0;n=_p(e,n))Dp(t,mp(e),yC(e))}function gn(t){Sp(OC,IC,t,!0)}function IC(t,e){for(let n=CC(e);n>=0;n=vp(e,n))eo(t,mp(e),!0)}function MC(t,e,n,r){let i=_e(),s=Ge(),o=Xh(2);if(s.firstUpdatePass&&bp(s,t,o,r),e!==kt&&Ir(i,o,e)){let a=s.data[jn()];Ep(s,a,i,i[Oe],t,i[o+1]=LC(e,n),r,o)}}function Sp(t,e,n,r){let i=Ge(),s=Xh(2);i.firstUpdatePass&&bp(i,null,s,r);let o=_e();if(n!==kt&&Ir(o,s,n)){let a=i.data[jn()];if(Ip(a,r)&&!wp(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=Ha(l,n||"")),Tc(i,a,o,n,r)}else NC(i,a,o,o[Oe],o[s+1],o[s+1]=kC(t,e,n),r,s)}}function wp(t,e){return e>=t.expandoStartIndex}function bp(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[jn()],o=wp(t,n);Ip(s,r)&&e===null&&!o&&(e=!1),e=xC(i,s,e,r),mC(i,s,e,n,o,r)}}function xC(t,e,n,r){let i=M_(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Pa(null,t,e,n,r),n=ai(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Pa(i,t,e,n,r),s===null){let l=AC(t,e,r);l!==void 0&&Array.isArray(l)&&(l=Pa(null,t,e,l[1],r),l=ai(l,e.attrs,r),TC(t,e,r,l))}else s=RC(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function AC(t,e,n){let r=n?e.classBindings:e.styleBindings;if(yr(r)!==0)return t[Pn(r)]}function TC(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Pn(i)]=r}function RC(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ai(r,o,n)}return ai(r,e.attrs,n)}function Pa(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ai(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ai(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),eo(t,o,n?!0:e[++s]))}return t===void 0?null:t}function kC(t,e,n){if(n==null||n==="")return Je;let r=[],i=di(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function Dp(t,e,n){eo(t,e,di(n))}function OC(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&eo(t,r,n)}function NC(t,e,n,r,i,s,o,a){i===kt&&(i=Je);let l=0,c=0,p=0<i.length?i[0]:null,m=0<s.length?s[0]:null;for(;p!==null||m!==null;){let y=l<i.length?i[l+1]:void 0,g=c<s.length?s[c+1]:void 0,u=null,f;p===m?(l+=2,c+=2,y!==g&&(u=m,f=g)):m===null||p!==null&&p<m?(l+=2,u=p):(c+=2,u=m,f=g),u!==null&&Ep(t,e,n,r,u,f,o,a),p=l<i.length?i[l]:null,m=c<s.length?s[c]:null}}function Ep(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],p=gC(c)?ih(l,e,n,i,yr(c),o):void 0;if(!Zs(p)){Zs(s)||fC(c)&&(s=ih(l,null,n,i,a,o));let m=$h(jn(),n);Ey(r,o,m,i,s)}}function ih(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let l=t[i],c=Array.isArray(l),p=c?l[1]:l,m=p===null,y=n[i+1];y===kt&&(y=m?Je:void 0);let g=m?Ia(y,r):p===r?y:void 0;if(c&&!Zs(g)&&(g=Ia(l,r)),Zs(g)&&(a=g,o))return a;let u=t[i+1];i=o?Pn(u):yr(u)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=Ia(l,r))}return a}function Zs(t){return t!==void 0}function LC(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ke(di(t)))),t}function Ip(t,e){return(t.flags&(e?8:16))!==0}function hi(t,e){Er("NgControlFlow");let n=_e(),r=oo(),i=n[r]!==kt?n[r]:-1,s=i!==-1?sh(n,Tt+i):void 0,o=0;if(Ir(n,r,t)){let a=he(null);try{if(s!==void 0&&t0(s,o),t!==-1){let l=Tt+t,c=sh(n,l),p=PC(n[se],l),m=fc(c,p.tView.ssrId),y=Xf(n,p,e,{dehydratedView:m});Jf(c,y,o,dc(p,m))}}finally{he(a)}}else if(s!==void 0){let a=e0(s,o);a!==void 0&&(a[dt]=e)}}function sh(t,e){return t[e]}function PC(t,e){return Gc(t,e)}function FC(t,e,n,r,i,s){let o=e.consts,a=Vs(o,i),l=lo(e,t,2,r,a);return Wf(e,n,l,Vs(o,s)),l.attrs!==null&&_c(l,l.attrs,!1),l.mergedAttrs!==null&&_c(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function q(t,e,n,r){let i=_e(),s=Ge(),o=Tt+t,a=i[Oe],l=s.firstCreatePass?FC(o,s,i,e,n,r):s.data[o],c=BC(s,i,l,a,e,t);i[o]=c;let p=zc(l);return ui(l,!0),Lf(a,c,l),!cC(l)&&Xc()&&ul(s,i,c,l),g_()===0&&On(c,i),m_(),p&&(Hf(s,i,l),jf(s,l,i)),r!==null&&Uf(i,l),q}function Z(){let t=tt();Yh()?w_():(t=t.parent,ui(t,!1));let e=t;y_(e)&&C_(),v_();let n=Ge();return n.firstCreatePass&&(el(n,t),Bh(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&N_(e)&&Tc(n,e,_e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&L_(e)&&Tc(n,e,_e(),e.stylesWithoutHost,!1),Z}function Me(t,e,n,r){return q(t,e,n,r),Z(),Me}var BC=(t,e,n,r,i,s)=>(Jc(!0),Af(r,i,T_()));function mn(){return _e()}var Ys="en-US";var VC=Ys;function jC(t){typeof t=="string"&&(VC=t.toLowerCase().replace(/_/g,"-"))}var HC=(t,e,n)=>{};function Be(t,e,n,r){let i=_e(),s=Ge(),o=tt();return Mp(s,i,i[Oe],o,t,e,r),Be}function UC(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Ps],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function Mp(t,e,n,r,i,s,o){let a=zc(r),c=t.firstCreatePass&&Yf(t),p=e[dt],m=Zf(e),y=!0;if(r.type&3||o){let f=wt(r,e),d=o?o(f):f,h=m.length,v=o?S=>o(Rt(S[r.index])):r.index,C=null;if(!o&&a&&(C=UC(t,e,i,r.index)),C!==null){let S=C.__ngLastListenerFn__||C;S.__ngNextListenerFn__=s,C.__ngLastListenerFn__=s,y=!1}else{s=ah(r,e,p,s),HC(f,i,s);let S=n.listen(d,i,s);m.push(s,S),c&&c.push(i,v,h,h+1)}}else s=ah(r,e,p,s);let g=r.outputs,u;if(y&&g!==null&&(u=g[i])){let f=u.length;if(f)for(let d=0;d<f;d+=2){let h=u[d],v=u[d+1],w=e[h][v].subscribe(s),_=m.length;m.push(s,w),c&&c.push(i,r.index,_,-(_+1))}}}function oh(t,e,n,r){let i=he(null);try{return It(6,e,n),n(r)!==!1}catch(s){return Qf(t,s),!1}finally{It(7,e,n),he(i)}}function ah(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?dn(t.index,e):e;ml(o,5);let a=oh(e,n,r,s),l=i.__ngNextListenerFn__;for(;l;)a=oh(e,n,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function we(t=1){return A_(t)}function bl(t,e,n){return xp(t,"",e,"",n),bl}function xp(t,e,n,r,i){let s=_e(),o=gp(s,e,n,r);if(o!==kt){let a=Ge(),l=Qc();fl(a,l,s,t,o,s[Oe],i,!1)}return xp}function Ap(t,e,n){K0(t,e,n)}function Dl(t){let e=_e(),n=Ge(),r=Jh();Kc(r+1);let i=Cl(n,r);if(t.dirty&&d_(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=Q0(e,r);t.reset(s,K_),t.notifyOnChanges()}return!0}return!1}function El(){return G0(_e(),Jh())}function ye(t,e=""){let n=_e(),r=Ge(),i=t+Tt,s=r.firstCreatePass?lo(r,i,1,e,null):r.data[i],o=$C(r,n,s,e,t);n[i]=o,Xc()&&ul(r,n,o,s),ui(s,!1)}var $C=(t,e,n,r,i)=>(Jc(!0),ay(e[Oe],r));function Il(t){return fo("",t,""),Il}function fo(t,e,n){let r=_e(),i=gp(r,t,e,n);return i!==kt&&Yy(r,jn(),i),fo}function vn(t,e,n){fp(e)&&(e=e());let r=_e(),i=oo();if(Ir(r,i,e)){let s=Ge(),o=Qc();fl(s,o,r,t,e,r[Oe],n,!1)}return vn}function Un(t,e){let n=fp(t);return n&&t.set(e),n}function _n(t,e){let n=_e(),r=Ge(),i=tt();return Mp(r,n,n[Oe],i,t,e),_n}function WC(t,e,n){let r=Ge();if(r.firstCreatePass){let i=an(t);Rc(n,r.data,r.blueprint,i,!0),Rc(e,r.data,r.blueprint,i,!1)}}function Rc(t,e,n,r,i){if(t=qe(t),Array.isArray(t))for(let s=0;s<t.length;s++)Rc(t[s],e,n,r,i);else{let s=Ge(),o=_e(),a=tt(),l=pr(t)?t:qe(t.provide),c=Lh(t),p=a.providerIndexes&1048575,m=a.directiveStart,y=a.providerIndexes>>20;if(pr(t)||!t.multi){let g=new Rn(c,i,ne),u=Ba(l,e,i?p:p+y,m);u===-1?(tc(Us(a,o),s,l),Fa(s,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),o.push(g)):(n[u]=g,o[u]=g)}else{let g=Ba(l,e,p+y,m),u=Ba(l,e,p,p+y),f=g>=0&&n[g],d=u>=0&&n[u];if(i&&!d||!i&&!f){tc(Us(a,o),s,l);let h=qC(i?GC:zC,n.length,i,r,c);!i&&d&&(n[u].providerFactory=h),Fa(s,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),o.push(h)}else{let h=Tp(n[i?u:g],c,!i&&r);Fa(s,t,g>-1?g:u,h)}!i&&r&&d&&n[u].componentProviders++}}}function Fa(t,e,n,r){let i=pr(e),s=Qv(e);if(i||s){let l=(s?qe(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let p=c.indexOf(n);p===-1?c.push(n,[r,l]):c[p+1].push(r,l)}else c.push(n,l)}}}function Tp(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ba(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function zC(t,e,n,r){return kc(this.multi,[])}function GC(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=kn(n,n[se],this.providerFactory.index,r);s=a.slice(0,o),kc(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],kc(i,s);return s}function kc(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function qC(t,e,n,r,i){let s=new Rn(t,n,ne);return s.multi=[],s.index=e,s.componentProviders=0,Tp(s,i,r&&!n),s}function fi(t,e=[]){return n=>{n.providersResolver=(r,i)=>WC(r,i?i(t):t,e)}}var KC=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=kh(!1,r.type),s=i.length>0?Sl([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=X({token:e,providedIn:"environment",factory:()=>new e(de(ut))});let t=e;return t})();function pt(t){Er("NgStandalone"),t.getStandaloneInjector=e=>e.get(KC).getOrCreateStandaloneInjector(t)}var po=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Rp=new ee("");function $n(t){return!!t&&typeof t.then=="function"}function kp(t){return!!t&&typeof t.subscribe=="function"}var Op=new ee(""),Np=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=z(Op,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if($n(o))r.push(o);else if(kp(o)){let a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ml=new ee("");function ZC(){Xu(()=>{throw new Y(600,!1)})}function YC(t){return t.isBoundToModule}var QC=10;function XC(t,e,n){try{let r=n();return $n(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Mr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=z(_f),this.afterRenderEffectManager=z(lp),this.zonelessEnabled=z(_l),this.externalTestViews=new Set,this.beforeRender=new Ie,this.afterTick=new Ie,this.componentTypes=[],this.components=[],this.isStable=z(br).hasPendingTasks.pipe(ce(r=>!r)),this._injector=z(ut)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Gs;if(!this._injector.get(Np).done){let g=!s&&xh(r),u=!1;throw new Y(405,u)}let a;s?a=r:a=this._injector.get(vr).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=YC(a)?void 0:this._injector.get(ln),c=i||a.selector,p=a.create(cn.NULL,[],c,l),m=p.location.nativeElement,y=p.injector.get(Rp,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Va(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),p}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Y(101,!1);let i=he(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,he(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(_r,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<QC;){let a=s===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:l,notifyErrorHandler:c}of this._views)JC(l,c,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:l})=>ri(l))&&(o.execute(),!this.allViews.some(({_lView:l})=>ri(l))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Va(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ml,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Va(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Y(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Va(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function JC(t,e,n,r){if(!n&&!ri(t))return;np(t,e,n&&!r?0:1)}var Oc=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},xl=(()=>{let e=class e{compileModuleSync(r){return new Mc(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=Ah(r),o=xf(s.declarations).reduce((a,l)=>{let c=In(l);return c&&a.push(new si(c)),a},[]);return new Oc(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var eS=(()=>{let e=class e{constructor(){this.zone=z(ke),this.changeDetectionScheduler=z(ii),this.applicationRef=z(Mr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tS=new ee("",{factory:()=>!1});function Lp({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new ke(Fp()),[{provide:ke,useFactory:t},{provide:fr,multi:!0,useFactory:()=>{let n=z(eS,{optional:!0});return()=>n.initialize()}},{provide:fr,multi:!0,useFactory:()=>{let n=z(rS);return()=>{n.initialize()}}},{provide:_f,useFactory:nS},e===!0?{provide:op,useValue:!0}:[]]}function nS(){let t=z(ke),e=z(Ut);return n=>t.runOutsideAngular(()=>e.handleError(n))}function Pp(t){let e=t?.ignoreChangesOutsideZone,n=Lp({ngZoneFactory:()=>{let r=Fp(t);return r.shouldCoalesceEventChangeDetection&&Er("NgZone_CoalesceEvent"),new ke(r)},ignoreChangesOutsideZone:e});return to([{provide:tS,useValue:!0},{provide:_l,useValue:!1},n])}function Fp(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var rS=(()=>{let e=class e{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=z(ke),this.pendingTasks=z(br)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ke.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ke.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var iS=(()=>{let e=class e{constructor(){this.appRef=z(Mr),this.taskService=z(br),this.ngZone=z(ke),this.zonelessEnabled=z(_l),this.disableScheduling=z(op,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ae,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof vc||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?Zd:ap;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&ke.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Zd(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sS(){return typeof $localize<"u"&&$localize.locale||Ys}var Al=new ee("",{providedIn:"root",factory:()=>z(Al,ae.Optional|ae.SkipSelf)||sS()});var Bp=new ee("");var Ts=null;function oS(t=[],e){return cn.create({name:e,providers:[{provide:no,useValue:"platform"},{provide:Bp,useValue:new Set([()=>Ts=null])},...t]})}function aS(t=[]){if(Ts)return Ts;let e=oS(t);return Ts=e,ZC(),cS(e),e}function cS(t){t.get(rl,null)?.forEach(n=>n())}var $e=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=lS;let t=e;return t})();function lS(t){return uS(tt(),_e(),(t&16)===16)}function uS(t,e,n){if(io(t)&&!n){let r=dn(t.index,e);return new Nn(r,r)}else if(t.type&175){let r=e[At];return new Nn(r,e)}return null}var Nc=class{constructor(){}supports(e){return pp(e)}create(e){return new Lc(e)}},dS=(t,e)=>e,Lc=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||dS}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<ch(r,i,s)?n:r,a=ch(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let c=a-i,p=l-i;if(c!=p){for(let y=0;y<c;y++){let g=y<s.length?s[y]:s[y]=0,u=g+y;p<=u&&u<c&&(s[y]=g+1)}let m=o.previousIndex;s[m]=p-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!pp(e))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,oC(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Pc(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Qs),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Qs),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Pc=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Fc=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Qs=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Fc,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ch(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function lh(){return new Tl([new Nc])}var Tl=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||lh()),deps:[[e,new Ch,new jc]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new Y(901,!1)}};e.\u0275prov=X({token:e,providedIn:"root",factory:lh});let t=e;return t})();function Vp(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=aS(r),s=[Lp({}),{provide:ii,useExisting:iS},...n||[]],a=new Ks({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(ke);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(Ut,null),p;l.runOutsideAngular(()=>{p=l.onError.subscribe({next:g=>{c.handleError(g)}})});let m=()=>a.destroy(),y=i.get(Bp);return y.add(m),a.onDestroy(()=>{p.unsubscribe(),y.delete(m)}),XC(c,l,()=>{let g=a.get(Np);return g.runInitializers(),g.donePromise.then(()=>{let u=a.get(Al,Ys);jC(u||Ys);let f=a.get(Mr);return e!==void 0&&f.bootstrap(e),f})})})}catch(e){return Promise.reject(e)}}var jp=new ee("");function go(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function mo(t,e){Er("NgSignals");let n=Zu(t);return e?.equal&&(n[Ft].equal=e.equal),n}function yn(t){let e=he(null);try{return t()}finally{he(e)}}var zp=null;function qt(){return zp}function Gp(t){zp??=t}var vo=class{};var it=new ee(""),qp=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>z(pS),providedIn:"platform"});let t=e;return t})();var pS=(()=>{let e=class e extends qp{constructor(){super(),this._doc=z(it),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qt().getBaseHref(this._doc)}onPopState(r){let i=qt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=qt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Kp(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Hp(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Wn(t){return t&&t[0]!=="?"?"?"+t:t}var yo=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>z(Zp),providedIn:"root"});let t=e;return t})(),gS=new ee(""),Zp=(()=>{let e=class e extends yo{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??z(it).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Kp(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Wn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Wn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Wn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(de(qp),de(gS,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pi=(()=>{let e=class e{constructor(r){this._subject=new Re,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=_S(Hp(Up(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Wn(i))}normalize(r){return e.stripTrailingSlash(vS(this._basePath,Up(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Wn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Wn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Wn,e.joinWithSlash=Kp,e.stripTrailingSlash=Hp,e.\u0275fac=function(i){return new(i||e)(de(yo))},e.\u0275prov=X({token:e,factory:()=>mS(),providedIn:"root"});let t=e;return t})();function mS(){return new pi(de(yo))}function vS(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Up(t){return t.replace(/\/index.html$/,"")}function _S(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Yp(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var kl=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Co=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new kl(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,a),$p(l,s)}});for(let s=0,o=i.length;s<o;s++){let l=i.get(s).context;l.index=s,l.count=o,l.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);$p(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ne(fn),ne(Ln),ne(Tl))},e.\u0275dir=Ze({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function $p(t,e){t.context.$implicit=e.item}var xr=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Ol,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Wp("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Wp("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ne(fn),ne(Ln))},e.\u0275dir=Ze({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Ol=class{constructor(){this.$implicit=null,this.ngIf=null}};function Wp(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ke(e)}'.`)}var Kt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Vn({type:e}),e.\u0275inj=Bn({});let t=e;return t})(),Qp="browser",yS="server";function Ll(t){return t===yS}var _o=class{};var Bl=class extends vo{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Vl=class t extends Bl{static makeCurrent(){Gp(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=CS();return n==null?null:SS(n)}resetBaseElement(){gi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yp(document.cookie,e)}},gi=null;function CS(){return gi=gi||document.querySelector("base"),gi?gi.getAttribute("href"):null}function SS(t){return new URL(t,document.baseURI).pathname}var wS=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),wo=new ee(""),tg=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new Y(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(de(wo),de(ke))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),mi=class{constructor(e){this._doc=e}},Pl="ng-app-id",ng=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ll(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Pl}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Pl),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Pl,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(de(it),de(nl),de(il,8),de(Dr))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),Fl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Hl=/%COMP%/g,rg="%COMP%",bS=`_nghost-${rg}`,DS=`_ngcontent-${rg}`,ES=!0,IS=new ee("",{providedIn:"root",factory:()=>ES});function MS(t){return DS.replace(Hl,t)}function xS(t){return bS.replace(Hl,t)}function ig(t,e){return e.map(n=>n.replace(Hl,t))}var Xp=(()=>{let e=class e{constructor(r,i,s,o,a,l,c,p=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=Ll(l),this.defaultRenderer=new vi(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===xt.ShadowDom&&(i=ge(H({},i),{encapsulation:xt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof bo?s.applyToHost(r):s instanceof _i&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,p=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(i.encapsulation){case xt.Emulated:o=new bo(c,p,i,this.appId,m,a,l,y);break;case xt.ShadowDom:return new jl(c,p,r,i,a,l,this.nonce,y);default:o=new _i(c,p,i,m,a,l,y);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(de(tg),de(ng),de(nl),de(IS),de(it),de(Dr),de(ke),de(il))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),vi=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Fl[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Jp(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Jp(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Fl[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Fl[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&($t.DashCase|$t.Important)?e.style.setProperty(n,r,i&$t.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&$t.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=qt().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Jp(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var jl=class extends vi{constructor(e,n,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=ig(i.id,i.styles);for(let p of c){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_i=class extends vi{constructor(e,n,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?ig(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},bo=class extends _i{constructor(e,n,r,i,s,o,a,l){let c=i+"-"+r.id;super(e,n,r,s,o,a,l,c),this.contentAttr=MS(c),this.hostAttr=xS(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},AS=(()=>{let e=class e extends mi{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(de(it))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),TS=(()=>{let e=class e extends mi{constructor(r){super(r),this.delegate=z(jp,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(de(it))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),eg=["alt","control","meta","shift"],RS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kS={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},OS=(()=>{let e=class e extends mi{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qt().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),eg.forEach(p=>{let m=i.indexOf(p);m>-1&&(i.splice(m,1),a+=p+".")}),a+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let s=RS[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),eg.forEach(a=>{if(a!==s){let l=kS[a];l(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(de(it))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})();function sg(t,e){return Vp(H({rootComponent:t},NS(e)))}function NS(t){return{appProviders:[...VS,...t?.providers??[]],platformProviders:BS}}function LS(){Vl.makeCurrent()}function PS(){return new Ut}function FS(){return Ef(document),document}var BS=[{provide:Dr,useValue:Qp},{provide:rl,useValue:LS,multi:!0},{provide:it,useFactory:FS,deps:[]}];var VS=[{provide:no,useValue:"root"},{provide:Ut,useFactory:PS,deps:[]},{provide:wo,useClass:AS,multi:!0,deps:[it,ke,Dr]},{provide:wo,useClass:OS,multi:!0,deps:[it]},{provide:wo,useClass:TS,multi:!0},Xp,ng,tg,{provide:_r,useExisting:Xp},{provide:_o,useClass:wS,deps:[]},[]];var og=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(de(it))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oe="primary",Li=Symbol("RouteTitle"),Gl=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Nr(t){return new Gl(t)}function US(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function $S(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Nt(t[n],e[n]))return!1;return!0}function Nt(t,e){let n=t?ql(t):void 0,r=e?ql(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!pg(t[i],e[i]))return!1;return!0}function ql(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function pg(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function gg(t){return t.length>0?t[t.length-1]:null}function Cn(t){return _a(t)?t:$n(t)?xe(Promise.resolve(t)):ie(t)}var WS={exact:vg,subset:_g},mg={exact:zS,subset:GS,ignored:()=>!0};function ag(t,e,n){return WS[n.paths](t.root,e.root,n.matrixParams)&&mg[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function zS(t,e){return Nt(t,e)}function vg(t,e,n){if(!Gn(t.segments,e.segments)||!Io(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!vg(t.children[r],e.children[r],n))return!1;return!0}function GS(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>pg(t[n],e[n]))}function _g(t,e,n){return yg(t,e,e.segments,n)}function yg(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Gn(i,n)||e.hasChildren()||!Io(i,n,r))}else if(t.segments.length===n.length){if(!Gn(t.segments,n)||!Io(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!_g(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Gn(t.segments,i)||!Io(t.segments,i,r)||!t.children[oe]?!1:yg(t.children[oe],e,s,r)}}function Io(t,e,n){return e.every((r,i)=>mg[n](t[i].parameters,r.parameters))}var Yt=class{constructor(e=new ve([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Nr(this.queryParams),this._queryParamMap}toString(){return ZS.serialize(this)}},ve=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mo(this)}},zn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Nr(this.parameters),this._parameterMap}toString(){return Sg(this)}};function qS(t,e){return Gn(t,e)&&t.every((n,r)=>Nt(n.parameters,e[r].parameters))}function Gn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function KS(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===oe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==oe&&(n=n.concat(e(i,r)))}),n}var yu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>new Ei,providedIn:"root"});let t=e;return t})(),Ei=class{parse(e){let n=new Zl(e);return new Yt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${yi(e.root,!0)}`,r=XS(e.queryParams),i=typeof e.fragment=="string"?`#${YS(e.fragment)}`:"";return`${n}${r}${i}`}},ZS=new Ei;function Mo(t){return t.segments.map(e=>Sg(e)).join("/")}function yi(t,e){if(!t.hasChildren())return Mo(t);if(e){let n=t.children[oe]?yi(t.children[oe],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==oe&&r.push(`${i}:${yi(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=KS(t,(r,i)=>i===oe?[yi(t.children[oe],!1)]:[`${i}:${yi(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[oe]!=null?`${Mo(t)}/${n[0]}`:`${Mo(t)}/(${n.join("//")})`}}function Cg(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Do(t){return Cg(t).replace(/%3B/gi,";")}function YS(t){return encodeURI(t)}function Kl(t){return Cg(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xo(t){return decodeURIComponent(t)}function cg(t){return xo(t.replace(/\+/g,"%20"))}function Sg(t){return`${Kl(t.path)}${QS(t.parameters)}`}function QS(t){return Object.entries(t).map(([e,n])=>`;${Kl(e)}=${Kl(n)}`).join("")}function XS(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Do(n)}=${Do(i)}`).join("&"):`${Do(n)}=${Do(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var JS=/^[^\/()?;#]+/;function Ul(t){let e=t.match(JS);return e?e[0]:""}var ew=/^[^\/()?;=#]+/;function tw(t){let e=t.match(ew);return e?e[0]:""}var nw=/^[^=?&#]+/;function rw(t){let e=t.match(nw);return e?e[0]:""}var iw=/^[^&#]+/;function sw(t){let e=t.match(iw);return e?e[0]:""}var Zl=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[oe]=new ve(e,n)),r}parseSegment(){let e=Ul(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new zn(xo(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=tw(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Ul(this.remaining);i&&(r=i,this.capture(r))}e[xo(n)]=xo(r)}parseQueryParam(e){let n=rw(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=sw(this.remaining);o&&(r=o,this.capture(r))}let i=cg(n),s=cg(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ul(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Y(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=oe);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[oe]:new ve([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function wg(t){return t.segments.length>0?new ve([],{[oe]:t}):t}function bg(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=bg(i);if(r===oe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ve(t.segments,e);return ow(n)}function ow(t){if(t.numberOfChildren===1&&t.children[oe]){let e=t.children[oe];return new ve(t.segments.concat(e.segments),e.children)}return t}function Ii(t){return t instanceof Yt}function aw(t,e,n=null,r=null){let i=Dg(t);return Eg(i,e,n,r)}function Dg(t){let e;function n(s){let o={};for(let l of s.children){let c=n(l);o[l.outlet]=c}let a=new ve(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=wg(r);return e??i}function Eg(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return $l(i,i,i,n,r);let s=cw(e);if(s.toRoot())return $l(i,i,new ve([],{}),n,r);let o=lw(s,i,t),a=o.processChildren?wi(o.segmentGroup,o.index,s.commands):Mg(o.segmentGroup,o.index,s.commands);return $l(i,o.segmentGroup,a,n,r)}function Ao(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Mi(t){return typeof t=="object"&&t!=null&&t.outlets}function $l(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(p=>`${p}`):`${c}`});let o;t===e?o=n:o=Ig(t,e,n);let a=wg(bg(o));return new Yt(a,s,i)}function Ig(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=Ig(s,e,n)}),new ve(t.segments,r)}var To=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ao(r[0]))throw new Y(4003,!1);let i=r.find(Mi);if(i&&i!==gg(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function cw(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new To(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new To(n,e,r)}var Rr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function lw(t,e,n){if(t.isAbsolute)return new Rr(e,!0,0);if(!n)return new Rr(e,!1,NaN);if(n.parent===null)return new Rr(n,!0,0);let r=Ao(t.commands[0])?0:1,i=n.segments.length-1+r;return uw(n,i,t.numberOfDoubleDots)}function uw(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new Rr(r,!1,i-s)}function dw(t){return Mi(t[0])?t[0].outlets:{[oe]:t}}function Mg(t,e,n){if(t??=new ve([],{}),t.segments.length===0&&t.hasChildren())return wi(t,e,n);let r=hw(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ve(t.segments.slice(0,r.pathIndex),{});return s.children[oe]=new ve(t.segments.slice(r.pathIndex),t.children),wi(s,0,i)}else return r.match&&i.length===0?new ve(t.segments,{}):r.match&&!t.hasChildren()?Yl(t,e,n):r.match?wi(t,0,i):Yl(t,e,n)}function wi(t,e,n){if(n.length===0)return new ve(t.segments,{});{let r=dw(n),i={};if(Object.keys(r).some(s=>s!==oe)&&t.children[oe]&&t.numberOfChildren===1&&t.children[oe].segments.length===0){let s=wi(t.children[oe],e,n);return new ve(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Mg(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ve(t.segments,i)}}function hw(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Mi(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!ug(l,c,o))return s;r+=2}else{if(!ug(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Yl(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Mi(s)){let l=fw(s.outlets);return new ve(r,l)}if(i===0&&Ao(n[0])){let l=t.segments[e];r.push(new zn(l.path,lg(n[0]))),i++;continue}let o=Mi(s)?s.outlets[oe]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Ao(a)?(r.push(new zn(o,lg(a))),i+=2):(r.push(new zn(o,{})),i++)}return new ve(r,{})}function fw(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Yl(new ve([],{}),0,r))}),e}function lg(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ug(t,e,n){return t==n.path&&Nt(e,n.parameters)}var bi="imperative",We=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(We||{}),gt=class{constructor(e,n){this.id=e,this.url=n}},xi=class extends gt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=We.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qn=class extends gt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=We.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ot=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ot||{}),Ql=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ql||{}),Zt=class extends gt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=We.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Kn=class extends gt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=We.NavigationSkipped}},Ai=class extends gt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=We.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ro=class extends gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=We.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xl=class extends gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=We.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jl=class extends gt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=We.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},eu=class extends gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=We.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tu=class extends gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=We.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nu=class{constructor(e){this.route=e,this.type=We.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ru=class{constructor(e){this.route=e,this.type=We.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},iu=class{constructor(e){this.snapshot=e,this.type=We.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},su=class{constructor(e){this.snapshot=e,this.type=We.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ou=class{constructor(e){this.snapshot=e,this.type=We.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},au=class{constructor(e){this.snapshot=e,this.type=We.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ti=class{},Lr=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function pw(t,e){return t.providers&&!t._injector&&(t._injector=Sl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function bt(t){return t.outlet||oe}function gw(t,e){let n=t.filter(r=>bt(r)===e);return n.push(...t.filter(r=>bt(r)!==e)),n}function Pi(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var cu=class{get injector(){return Pi(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Bo(this.rootInjector),this.attachRef=null}},Bo=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new cu(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(de(ut))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ko=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=lu(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=lu(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=uu(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return uu(e,this._root).map(n=>n.value)}};function lu(t,e){if(t===e.value)return e;for(let n of e.children){let r=lu(t,n);if(r)return r}return null}function uu(t,e){if(t===e.value)return[e];for(let n of e.children){let r=uu(t,n);if(r.length)return r.unshift(e),r}return[]}var st=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Tr(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Oo=class extends ko{constructor(e,n){super(e),this.snapshot=n,Cu(this,e)}toString(){return this.snapshot.toString()}};function xg(t){let e=mw(t),n=new He([new zn("",{})]),r=new He({}),i=new He({}),s=new He({}),o=new He(""),a=new Pr(n,r,s,o,i,oe,t,e.root);return a.snapshot=e.root,new Oo(new st(a,[]),e)}function mw(t){let e={},n={},r={},i="",s=new kr([],e,r,i,n,oe,t,null,{});return new Lo("",new st(s,[]))}var Pr=class{constructor(e,n,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ce(c=>c[Li]))??ie(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(e=>Nr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(e=>Nr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function No(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),t.params),data:H(H({},e.data),t.data),resolve:H(H(H(H({},t.data),e.data),i?.data),t._resolvedData)}:r={params:H({},t.params),data:H({},t.data),resolve:H(H({},t.data),t._resolvedData??{})},i&&Tg(i)&&(r.resolve[Li]=i.title),r}var kr=class{get title(){return this.data?.[Li]}constructor(e,n,r,i,s,o,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Nr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Nr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Lo=class extends ko{constructor(e,n){super(n),this.url=e,Cu(this,n)}toString(){return Ag(this._root)}};function Cu(t,e){e.value._routerState=t,e.children.forEach(n=>Cu(t,n))}function Ag(t){let e=t.children.length>0?` { ${t.children.map(Ag).join(", ")} } `:"";return`${t.value}${e}`}function Wl(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Nt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Nt(e.params,n.params)||t.paramsSubject.next(n.params),$S(e.url,n.url)||t.urlSubject.next(n.url),Nt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function du(t,e){let n=Nt(t.params,e.params)&&qS(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||du(t.parent,e.parent))}function Tg(t){return typeof t.title=="string"||t.title===null}var vw=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Re,this.deactivateEvents=new Re,this.attachEvents=new Re,this.detachEvents=new Re,this.parentContexts=z(Bo),this.location=z(fn),this.changeDetector=z($e),this.inputBinder=z(Su,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new hu(r,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ze({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[un]});let t=e;return t})(),hu=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Pr?this.route:e===Bo?this.childContexts:this.parent.get(e,n)}},Su=new ee("");function _w(t,e,n){let r=Ri(t,e._root,n?n._root:void 0);return new Oo(r,e)}function Ri(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=yw(t,e,n);return new st(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ri(t,a)),o}}let r=Cw(e.value),i=e.children.map(s=>Ri(t,s));return new st(r,i)}}function yw(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ri(t,r,i);return Ri(t,r)})}function Cw(t){return new Pr(new He(t.url),new He(t.params),new He(t.queryParams),new He(t.fragment),new He(t.data),t.outlet,t.component,t)}var ki=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Rg="ngNavigationCancelingError";function Po(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ii(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kg(!1,ot.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function kg(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Rg]=!0,n.cancellationCode=e,n}function Sw(t){return Og(t)&&Ii(t.url)}function Og(t){return!!t&&t[Rg]}var ww=(t,e,n,r)=>ce(i=>(new fu(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),fu=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Wl(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Tr(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Tr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Tr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Tr(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new au(s.value.snapshot))}),e.children.length&&this.forwardEvent(new su(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Wl(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Wl(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Fo=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Or=class{constructor(e,n){this.component=e,this.route=n}};function bw(t,e,n){let r=t._root,i=e?e._root:null;return Ci(r,i,n,[r.value])}function Dw(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Br(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!hh(t)?t:e.get(t):r}function Ci(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Tr(e);return t.children.forEach(o=>{Ew(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Di(a,n.getContext(o),i)),i}function Ew(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=Iw(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Fo(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ci(t,e,a?a.children:null,r,i):Ci(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Or(a.outlet.component,o))}else o&&Di(e,a,i),i.canActivateChecks.push(new Fo(r)),s.component?Ci(t,null,a?a.children:null,r,i):Ci(t,null,n,r,i);return i}function Iw(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Gn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Gn(t.url,e.url)||!Nt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!du(t,e)||!Nt(t.queryParams,e.queryParams);case"paramsChange":default:return!du(t,e)}}function Di(t,e,n){let r=Tr(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Di(o,e.children.getContext(s),n):Di(o,null,n):Di(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Or(e.outlet.component,i)):n.canDeactivateChecks.push(new Or(null,i)):n.canDeactivateChecks.push(new Or(null,i))}function Fi(t){return typeof t=="function"}function Mw(t){return typeof t=="boolean"}function xw(t){return t&&Fi(t.canLoad)}function Aw(t){return t&&Fi(t.canActivate)}function Tw(t){return t&&Fi(t.canActivateChild)}function Rw(t){return t&&Fi(t.canDeactivate)}function kw(t){return t&&Fi(t.canMatch)}function Ng(t){return t instanceof Bt||t?.name==="EmptyError"}var Eo=Symbol("INITIAL_VALUE");function Fr(){return _t(t=>ys(t.map(e=>e.pipe(Vt(1),Da(Eo)))).pipe(ce(e=>{for(let n of e)if(n!==!0){if(n===Eo)return Eo;if(n===!1||Ow(n))return n}return!0}),vt(e=>e!==Eo),Vt(1)))}function Ow(t){return Ii(t)||t instanceof ki}function Nw(t,e){return Pe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?ie(ge(H({},n),{guardsResult:!0})):Lw(o,r,i,t).pipe(Pe(a=>a&&Mw(a)?Pw(r,s,t,e):ie(a)),ce(a=>ge(H({},n),{guardsResult:a})))})}function Lw(t,e,n,r){return xe(t).pipe(Pe(i=>Hw(i.component,i.route,n,e,r)),Et(i=>i!==!0,!0))}function Pw(t,e,n,r){return xe(e).pipe(ir(i=>rr(Bw(i.route.parent,r),Fw(i.route,r),jw(t,i.path,n),Vw(t,i.route,n))),Et(i=>i!==!0,!0))}function Fw(t,e){return t!==null&&e&&e(new ou(t)),ie(!0)}function Bw(t,e){return t!==null&&e&&e(new iu(t)),ie(!0)}function Vw(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ie(!0);let i=r.map(s=>Cs(()=>{let o=Pi(e)??n,a=Br(s,o),l=Aw(a)?a.canActivate(e,t):Wt(o,()=>a(e,t));return Cn(l).pipe(Et())}));return ie(i).pipe(Fr())}function jw(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Dw(o)).filter(o=>o!==null).map(o=>Cs(()=>{let a=o.guards.map(l=>{let c=Pi(o.node)??n,p=Br(l,c),m=Tw(p)?p.canActivateChild(r,t):Wt(c,()=>p(r,t));return Cn(m).pipe(Et())});return ie(a).pipe(Fr())}));return ie(s).pipe(Fr())}function Hw(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ie(!0);let o=s.map(a=>{let l=Pi(e)??i,c=Br(a,l),p=Rw(c)?c.canDeactivate(t,e,n,r):Wt(l,()=>c(t,e,n,r));return Cn(p).pipe(Et())});return ie(o).pipe(Fr())}function Uw(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return ie(!0);let s=i.map(o=>{let a=Br(o,t),l=xw(a)?a.canLoad(e,n):Wt(t,()=>a(e,n));return Cn(l)});return ie(s).pipe(Fr(),Lg(r))}function Lg(t){return pa(Ue(e=>{if(typeof e!="boolean")throw Po(t,e)}),ce(e=>e===!0))}function $w(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return ie(!0);let s=i.map(o=>{let a=Br(o,t),l=kw(a)?a.canMatch(e,n):Wt(t,()=>a(e,n));return Cn(l)});return ie(s).pipe(Fr(),Lg(r))}var Oi=class{constructor(e){this.segmentGroup=e||null}},Ni=class extends Error{constructor(e){super(),this.urlTree=e}};function Ar(t){return nr(new Oi(t))}function Ww(t){return nr(new Y(4e3,!1))}function zw(t){return nr(kg(!1,ot.GuardRejected))}var pu=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ie(r);if(i.numberOfChildren>1||!i.children[oe])return Ww(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:l,fragment:c,routeConfig:p,url:m,outlet:y,params:g,data:u,title:f}=i,d=Wt(s,()=>a({params:g,data:u,queryParams:l,fragment:c,routeConfig:p,url:m,outlet:y,title:f}));if(d instanceof Yt)throw new Ni(d);n=d}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Ni(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Yt(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new ve(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Y(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},gu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gw(t,e,n,r,i){let s=wu(t,e,n);return s.matched?(r=pw(e,r),$w(r,e,n,i).pipe(ce(o=>o===!0?s:H({},gu)))):ie(s)}function wu(t,e,n){if(e.path==="**")return qw(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?H({},gu):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||US)(n,t,e);if(!i)return H({},gu);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?H(H({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function qw(t){return{matched:!0,parameters:t.length>0?gg(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function dg(t,e,n,r){return n.length>0&&Yw(t,n,r)?{segmentGroup:new ve(e,Zw(r,new ve(n,t.children))),slicedSegments:[]}:n.length===0&&Qw(t,n,r)?{segmentGroup:new ve(t.segments,Kw(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ve(t.segments,t.children),slicedSegments:n}}function Kw(t,e,n,r){let i={};for(let s of n)if(Vo(t,e,s)&&!r[bt(s)]){let o=new ve([],{});i[bt(s)]=o}return H(H({},r),i)}function Zw(t,e){let n={};n[oe]=e;for(let r of t)if(r.path===""&&bt(r)!==oe){let i=new ve([],{});n[bt(r)]=i}return n}function Yw(t,e,n){return n.some(r=>Vo(t,e,r)&&bt(r)!==oe)}function Qw(t,e,n){return n.some(r=>Vo(t,e,r))}function Vo(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Xw(t,e,n,r){return bt(t)!==r&&(r===oe||!Vo(e,n,t))?!1:wu(e,t,n).matched}function Jw(t,e,n){return e.length===0&&!t.children[n]}var mu=class{};function eb(t,e,n,r,i,s,o="emptyOnly"){return new vu(t,e,n,r,i,o,s).recognize()}var tb=31,vu=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new pu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}recognize(){let e=dg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ce(({children:n,rootSnapshot:r})=>{let i=new st(r,n),s=new Lo("",i),o=aw(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new kr([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,n).pipe(ce(r=>({children:r,rootSnapshot:n})),en(r=>{if(r instanceof Ni)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Oi?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(ce(o=>o instanceof st?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return xe(s).pipe(ir(o=>{let a=r.children[o],l=gw(n,o);return this.processSegmentGroup(e,l,a,o,i)}),ba((o,a)=>(o.push(...a),o)),tn(null),wa(),Pe(o=>{if(o===null)return Ar(r);let a=Pg(o);return nb(a),ie(a)}))}processSegment(e,n,r,i,s,o,a){return xe(n).pipe(ir(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,r,i,s,o,a).pipe(en(c=>{if(c instanceof Oi)return ie(null);throw c}))),Et(l=>!!l),en(l=>{if(Ng(l))return Jw(r,i,s)?ie(new mu):Ar(r);throw l}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,l){return Xw(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,l):Ar(i):Ar(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:l,parameters:c,consumedSegments:p,positionalParamSegments:m,remainingSegments:y}=wu(n,i,s);if(!l)return Ar(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>tb&&(this.allowRedirects=!1));let g=new kr(s,c,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,hg(i),bt(i),i.component??i._loadedComponent??null,i,fg(i)),u=No(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(u.params),g.data=Object.freeze(u.data);let f=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,m,g,e);return this.applyRedirects.lineralizeSegments(i,f).pipe(Pe(d=>this.processSegment(e,r,n,d.concat(y),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=Gw(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(_t(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(_t(({routes:c})=>{let p=r._loadedInjector??e,{parameters:m,consumedSegments:y,remainingSegments:g}=l,u=new kr(y,m,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,hg(r),bt(r),r.component??r._loadedComponent??null,r,fg(r)),f=No(u,o,this.paramsInheritanceStrategy);u.params=Object.freeze(f.params),u.data=Object.freeze(f.data);let{segmentGroup:d,slicedSegments:h}=dg(n,y,g,c);if(h.length===0&&d.hasChildren())return this.processChildren(p,c,d,u).pipe(ce(C=>new st(u,C)));if(c.length===0&&h.length===0)return ie(new st(u,[]));let v=bt(r)===s;return this.processSegment(p,c,d,h,v?oe:s,!0,u).pipe(ce(C=>new st(u,C instanceof st?[C]:[])))}))):Ar(n)))}getChildConfig(e,n,r){return n.children?ie({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ie({routes:n._loadedRoutes,injector:n._loadedInjector}):Uw(e,n,r,this.urlSerializer).pipe(Pe(i=>i?this.configLoader.loadChildren(e,n).pipe(Ue(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):zw(n))):ie({routes:[],injector:e})}};function nb(t){t.sort((e,n)=>e.value.outlet===oe?-1:n.value.outlet===oe?1:e.value.outlet.localeCompare(n.value.outlet))}function rb(t){let e=t.value.routeConfig;return e&&e.path===""}function Pg(t){let e=[],n=new Set;for(let r of t){if(!rb(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Pg(r.children);e.push(new st(r.value,i))}return e.filter(r=>!n.has(r))}function hg(t){return t.data||{}}function fg(t){return t.resolve||{}}function ib(t,e,n,r,i,s){return Pe(o=>eb(t,e,n,r,o.extractedUrl,i,s).pipe(ce(({state:a,tree:l})=>ge(H({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function sb(t,e){return Pe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ie(n);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of Fg(l))o.add(c);let a=0;return xe(o).pipe(ir(l=>s.has(l)?ob(l,r,t,e):(l.data=No(l,l.parent,t).resolve,ie(void 0))),Ue(()=>a++),sr(1),Pe(l=>a===o.size?ie(n):rt))})}function Fg(t){let e=t.children.map(n=>Fg(n)).flat();return[t,...e]}function ob(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!Tg(i)&&(s[Li]=i.title),ab(s,t,e,r).pipe(ce(o=>(t._resolvedData=o,t.data=No(t,t.parent,n).resolve,null)))}function ab(t,e,n,r){let i=ql(t);if(i.length===0)return ie({});let s={};return xe(i).pipe(Pe(o=>cb(t[o],e,n,r).pipe(Et(),Ue(a=>{if(a instanceof ki)throw Po(new Ei,a);s[o]=a}))),sr(1),Sa(s),en(o=>Ng(o)?rt:nr(o)))}function cb(t,e,n,r){let i=Pi(e)??r,s=Br(t,i),o=s.resolve?s.resolve(e,n):Wt(i,()=>s(e,n));return Cn(o)}function zl(t){return _t(e=>{let n=t(e);return n?xe(n).pipe(ce(()=>e)):ie(e)})}var Bg=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===oe);return i}getResolvedTitleForRoute(r){return r.data[Li]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>z(lb),providedIn:"root"});let t=e;return t})(),lb=(()=>{let e=class e extends Bg{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(de(og))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bu=new ee("",{providedIn:"root",factory:()=>({})}),ub=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ht({type:e,selectors:[["ng-component"]],standalone:!0,features:[pt],decls:1,vars:0,template:function(i,s){i&1&&Me(0,"router-outlet")},dependencies:[vw],encapsulation:2});let t=e;return t})();function Du(t){let e=t.children&&t.children.map(Du),n=e?ge(H({},t),{children:e}):H({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==oe&&(n.component=ub),n}var Eu=new ee(""),db=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=z(xl)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ie(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Cn(r.loadComponent()).pipe(ce(Vg),Ue(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Qr(()=>{this.componentLoaders.delete(r)})),s=new tr(i,()=>new Ie).pipe(er());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ie({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=hb(i,this.compiler,r,this.onLoadEndListener).pipe(Qr(()=>{this.childrenLoaders.delete(i)})),a=new tr(o,()=>new Ie).pipe(er());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hb(t,e,n,r){return Cn(t.loadChildren()).pipe(ce(Vg),Pe(i=>i instanceof oi||Array.isArray(i)?ie(i):xe(e.compileModuleAsync(i))),ce(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Eu,[],{optional:!0,self:!0}).flat()),{routes:o.map(Du),injector:s}}))}function fb(t){return t&&typeof t=="object"&&"default"in t}function Vg(t){return fb(t)?t.default:t}var Iu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>z(pb),providedIn:"root"});let t=e;return t})(),pb=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gb=new ee("");var mb=new ee(""),vb=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ie,this.transitionAbortSubject=new Ie,this.configLoader=z(db),this.environmentInjector=z(ut),this.urlSerializer=z(yu),this.rootContexts=z(Bo),this.location=z(pi),this.inputBindingEnabled=z(Su,{optional:!0})!==null,this.titleStrategy=z(Bg),this.options=z(bu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=z(Iu),this.createViewTransition=z(gb,{optional:!0}),this.navigationErrorHandler=z(mb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ie(void 0),this.rootComponentType=null;let r=s=>this.events.next(new nu(s)),i=s=>this.events.next(new ru(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ge(H(H({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new He({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:bi,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vt(o=>o.id!==0),ce(o=>ge(H({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),_t(o=>{let a=!1,l=!1;return ie(o).pipe(_t(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ot.SupersededByNewNavigation),rt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ge(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!p&&m!=="reload"){let y="";return this.events.next(new Kn(c.id,this.urlSerializer.serialize(c.rawUrl),y,Ql.IgnoredSameUrlNavigation)),c.resolve(!1),rt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ie(c).pipe(_t(y=>{let g=this.transitions?.getValue();return this.events.next(new xi(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),g!==this.transitions?.getValue()?rt:Promise.resolve(y)}),ib(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ue(y=>{o.targetSnapshot=y.targetSnapshot,o.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation=ge(H({},this.currentNavigation),{finalUrl:y.urlAfterRedirects});let g=new Ro(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(g)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:y,extractedUrl:g,source:u,restoredState:f,extras:d}=c,h=new xi(y,this.urlSerializer.serialize(g),u,f);this.events.next(h);let v=xg(this.rootComponentType).snapshot;return this.currentTransition=o=ge(H({},c),{targetSnapshot:v,urlAfterRedirects:g,extras:ge(H({},d),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,ie(o)}else{let y="";return this.events.next(new Kn(c.id,this.urlSerializer.serialize(c.extractedUrl),y,Ql.IgnoredByUrlHandlingStrategy)),c.resolve(!1),rt}}),Ue(c=>{let p=new Xl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(p)}),ce(c=>(this.currentTransition=o=ge(H({},c),{guards:bw(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),Nw(this.environmentInjector,c=>this.events.next(c)),Ue(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Po(this.urlSerializer,c.guardsResult);let p=new Jl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(p)}),vt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",ot.GuardRejected),!1)),zl(c=>{if(c.guards.canActivateChecks.length)return ie(c).pipe(Ue(p=>{let m=new eu(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}),_t(p=>{let m=!1;return ie(p).pipe(sb(this.paramsInheritanceStrategy,this.environmentInjector),Ue({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(p,"",ot.NoDataFromResolver)}}))}),Ue(p=>{let m=new tu(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}))}),zl(c=>{let p=m=>{let y=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(m.routeConfig).pipe(Ue(g=>{m.component=g}),ce(()=>{})));for(let g of m.children)y.push(...p(g));return y};return ys(p(c.targetSnapshot.root)).pipe(tn(null),Vt(1))}),zl(()=>this.afterPreactivation()),_t(()=>{let{currentSnapshot:c,targetSnapshot:p}=o,m=this.createViewTransition?.(this.environmentInjector,c.root,p.root);return m?xe(m).pipe(ce(()=>o)):ie(o)}),ce(c=>{let p=_w(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=ge(H({},c),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,o}),Ue(()=>{this.events.next(new Ti)}),ww(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Vt(1),Ue({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Ea(this.transitionAbortSubject.pipe(Ue(c=>{throw c}))),Qr(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",ot.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),en(c=>{if(l=!0,Og(c))this.events.next(new Zt(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Sw(c)?this.events.next(new Lr(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let p=new Ai(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let m=Wt(this.environmentInjector,()=>this.navigationErrorHandler?.(p));if(m instanceof ki){let{message:y,cancellationCode:g}=Po(this.urlSerializer,m);this.events.next(new Zt(o.id,this.urlSerializer.serialize(o.extractedUrl),y,g)),this.events.next(new Lr(m.redirectTo,m.navigationBehaviorOptions))}else{this.events.next(p);let y=r.errorHandler(c);o.resolve(!!y)}}catch(m){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(m)}}return rt}))}))}cancelNavigationTransition(r,i,s){let o=new Zt(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _b(t){return t!==bi}var yb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>z(Cb),providedIn:"root"});let t=e;return t})(),_u=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Cb=(()=>{let e=class e extends _u{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Hn(e)))(s||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>z(Sb),providedIn:"root"});let t=e;return t})(),Sb=(()=>{let e=class e extends jg{constructor(){super(...arguments),this.location=z(pi),this.urlSerializer=z(yu),this.options=z(bu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=z(Iu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Yt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=xg(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof xi)this.stateMemento=this.createStateMemento();else if(r instanceof Kn)this.rawUrlTree=i.initialUrl;else if(r instanceof Ro){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof Ti?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Zt&&(r.code===ot.GuardRejected||r.code===ot.NoDataFromResolver)?this.restoreHistory(i):r instanceof Ai?this.restoreHistory(i,!0):r instanceof qn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof Yt?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=H(H({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=H(H({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Hn(e)))(s||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Si=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Si||{});function wb(t,e){t.events.pipe(vt(n=>n instanceof qn||n instanceof Zt||n instanceof Ai||n instanceof Kn),ce(n=>n instanceof qn||n instanceof Kn?Si.COMPLETE:(n instanceof Zt?n.code===ot.Redirect||n.code===ot.SupersededByNewNavigation:!1)?Si.REDIRECTING:Si.FAILED),vt(n=>n!==Si.REDIRECTING),Vt(1)).subscribe(()=>{e()})}function bb(t){throw t}var Db={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Eb={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Hg=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=z(po),this.stateManager=z(jg),this.options=z(bu,{optional:!0})||{},this.pendingTasks=z(br),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=z(vb),this.urlSerializer=z(yu),this.location=z(pi),this.urlHandlingStrategy=z(Iu),this._events=new Ie,this.errorHandler=this.options.errorHandler||bb,this.navigated=!1,this.routeReuseStrategy=z(yb),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=z(Eu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!z(Su,{optional:!0}),this.eventsSubscription=new Ae,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Zt&&i.code!==ot.Redirect&&i.code!==ot.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof qn)this.navigated=!0;else if(i instanceof Lr){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c=H({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_b(s.source)},a);this.scheduleNavigation(l,bi,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}Mb(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=H({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Du),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,p=c?this.currentUrlTree.fragment:a,m=null;switch(l){case"merge":m=H(H({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let y;try{let g=s?s.snapshot:this.routerState.snapshot.root;y=Dg(g)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),y=this.currentUrlTree.root}return Eg(y,r,m,p??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Ii(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,bi,null,i)}navigate(r,i={skipLocationChange:!1}){return Ib(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=H({},Db):i===!1?s=H({},Eb):s=i,Ii(r))return ag(this.currentUrlTree,r,s);let o=this.parseUrl(r);return ag(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,p;a?(l=a.resolve,c=a.reject,p=a.promise):p=new Promise((y,g)=>{l=y,c=g});let m=this.pendingTasks.add();return wb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:l,reject:c,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(y=>Promise.reject(y))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ib(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Y(4008,!1)}function Mb(t){return!(t instanceof Ti)&&!(t instanceof Lr)}var xb=new ee("");function Ug(t,...e){return to([{provide:Eu,multi:!0,useValue:t},[],{provide:Pr,useFactory:Ab,deps:[Hg]},{provide:Ml,multi:!0,useFactory:Tb},e.map(n=>n.\u0275providers)])}function Ab(t){return t.routerState.root}function Tb(){let t=z(cn);return e=>{let n=t.get(Mr);if(e!==n.components[0])return;let r=t.get(Hg),i=t.get(Rb);t.get(kb)===1&&r.initialNavigation(),t.get(Ob,null,ae.Optional)?.setUpPreloading(),t.get(xb,null,ae.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Rb=new ee("",{factory:()=>new Ie}),kb=new ee("",{providedIn:"root",factory:()=>1});var Ob=new ee("");var $g=[];var Wg={providers:[Pp({eventCoalescing:!0}),Ug($g)]};var Jg=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(ne(hn),ne(ft))},e.\u0275dir=Ze({type:e});let t=e;return t})(),Ru=(()=>{let e=class e extends Jg{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Hn(e)))(s||e)}})(),e.\u0275dir=Ze({type:e,features:[pn]});let t=e;return t})(),Wo=new ee("");var Nb={provide:Wo,useExisting:Fn(()=>zo),multi:!0};function Lb(){let t=qt()?qt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Pb=new ee(""),zo=(()=>{let e=class e extends Jg{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Lb())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(ne(hn),ne(ft),ne(Pb,8))},e.\u0275dir=Ze({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Be("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[fi([Nb]),pn]});let t=e;return t})();var Fb=new ee(""),Bb=new ee("");function em(t){return t!=null}function tm(t){return $n(t)?xe(t):t}function nm(t){let e={};return t.forEach(n=>{e=n!=null?H(H({},e),n):e}),Object.keys(e).length===0?null:e}function rm(t,e){return e.map(n=>n(t))}function Vb(t){return!t.validate}function im(t){return t.map(e=>Vb(e)?e:n=>e.validate(n))}function jb(t){if(!t)return null;let e=t.filter(em);return e.length==0?null:function(n){return nm(rm(n,e))}}function sm(t){return t!=null?jb(im(t)):null}function Hb(t){if(!t)return null;let e=t.filter(em);return e.length==0?null:function(n){let r=rm(n,e).map(tm);return Ca(r).pipe(ce(nm))}}function om(t){return t!=null?Hb(im(t)):null}function zg(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ub(t){return t._rawValidators}function $b(t){return t._rawAsyncValidators}function Mu(t){return t?Array.isArray(t)?t:[t]:[]}function Ho(t,e){return Array.isArray(t)?t.includes(e):t===e}function Gg(t,e){let n=Mu(e);return Mu(t).forEach(i=>{Ho(n,i)||n.push(i)}),n}function qg(t,e){return Mu(e).filter(n=>!Ho(t,n))}var Uo=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=sm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=om(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},xu=class extends Uo{get formDirective(){return null}get path(){return null}},Ui=class extends Uo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Au=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Wb={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},uR=ge(H({},Wb),{"[class.ng-submitted]":"isSubmitted"}),am=(()=>{let e=class e extends Au{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ne(Ui,2))},e.\u0275dir=Ze({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&wl("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[pn]});let t=e;return t})();var Bi="VALID",jo="INVALID",Vr="PENDING",Vi="DISABLED",Hr=class{},$o=class extends Hr{constructor(e,n){super(),this.value=e,this.source=n}},ji=class extends Hr{constructor(e,n){super(),this.pristine=e,this.source=n}},Hi=class extends Hr{constructor(e,n){super(),this.touched=e,this.source=n}},jr=class extends Hr{constructor(e,n){super(),this.status=e,this.source=n}};function zb(t){return(Go(t)?t.validators:t)||null}function Gb(t){return Array.isArray(t)?sm(t):t||null}function qb(t,e){return(Go(e)?e.asyncValidators:t)||null}function Kb(t){return Array.isArray(t)?om(t):t||null}function Go(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Tu=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=mo(()=>this.statusReactive()),this.statusReactive=ho(void 0),this._pristine=mo(()=>this.pristineReactive()),this.pristineReactive=ho(!0),this._touched=mo(()=>this.touchedReactive()),this.touchedReactive=ho(!1),this._events=new Ie,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return yn(this.statusReactive)}set status(e){yn(()=>this.statusReactive.set(e))}get valid(){return this.status===Bi}get invalid(){return this.status===jo}get pending(){return this.status==Vr}get disabled(){return this.status===Vi}get enabled(){return this.status!==Vi}get pristine(){return yn(this.pristineReactive)}set pristine(e){yn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return yn(this.touchedReactive)}set touched(e){yn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Gg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Gg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(qg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(qg(e,this._rawAsyncValidators))}hasValidator(e){return Ho(this._rawValidators,e)}hasAsyncValidator(e){return Ho(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ge(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Hi(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Hi(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ge(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ji(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new ji(!0,r))}markAsPending(e={}){this.status=Vr;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new jr(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ge(H({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Vi,this.errors=null,this._forEachChild(i=>{i.disable(ge(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $o(this.value,r)),this._events.next(new jr(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ge(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Bi,this._forEachChild(r=>{r.enable(ge(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ge(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bi||this.status===Vr)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $o(this.value,n)),this._events.next(new jr(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ge(H({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vi:Bi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Vr,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=tm(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new jr(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Re,this.statusChanges=new Re}_calculateStatus(){return this._allControlsDisabled()?Vi:this.errors?jo:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vr)?Vr:this._anyControlsHaveStatus(jo)?jo:Bi}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new ji(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Hi(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Go(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Gb(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Kb(this._rawAsyncValidators)}};var cm=new ee("CallSetDisabledState",{providedIn:"root",factory:()=>ku}),ku="always";function Zb(t,e){return[...e.path,t]}function Yb(t,e,n=ku){Xb(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Jb(t,e),tD(t,e),eD(t,e),Qb(t,e)}function Kg(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Qb(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Xb(t,e){let n=Ub(t);e.validator!==null?t.setValidators(zg(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=$b(t);e.asyncValidator!==null?t.setAsyncValidators(zg(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Kg(e._rawValidators,i),Kg(e._rawAsyncValidators,i)}function Jb(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&lm(t,e)})}function eD(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&lm(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function lm(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function tD(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function nD(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function rD(t){return Object.getPrototypeOf(t.constructor)===Ru}function iD(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===zo?n=s:rD(s)?r=s:i=s}),i||r||n||null}function Zg(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Yg(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var sD=class extends Tu{constructor(e=null,n,r){super(zb(n),qb(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Go(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Yg(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Zg(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Zg(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Yg(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var oD={provide:Ui,useExisting:Fn(()=>Ou)},Qg=Promise.resolve(),Ou=(()=>{let e=class e extends Ui{constructor(r,i,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new sD,this._registered=!1,this.name="",this.update=new Re,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=iD(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),nD(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Yb(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){Qg.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&go(i);Qg.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?Zb(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(ne(xu,9),ne(Fb,10),ne(Bb,10),ne(Wo,10),ne($e,8),ne(cm,8))},e.\u0275dir=Ze({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[fi([oD]),pn,un]});let t=e;return t})();var aD={provide:Wo,useExisting:Fn(()=>dm),multi:!0};function um(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function cD(t){return t.split(":")[0]}var dm=(()=>{let e=class e extends Ru{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=um(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=cD(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Hn(e)))(s||e)}})(),e.\u0275dir=Ze({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&Be("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[fi([aD]),pn]});let t=e;return t})(),hm=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(um(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(ne(ft),ne(hn),ne(dm,9))},e.\u0275dir=Ze({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),lD={provide:Wo,useExisting:Fn(()=>fm),multi:!0};function Xg(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function uD(t){return t.split(":")[0]}var fm=(()=>{let e=class e extends Ru{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let l=0;l<a.length;l++){let c=a[l],p=this._getOptionValue(c.value);s.push(p)}}else{let a=i.options;for(let l=0;l<a.length;l++){let c=a[l];if(c.selected){let p=this._getOptionValue(c.value);s.push(p)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=uD(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Hn(e)))(s||e)}})(),e.\u0275dir=Ze({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&Be("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[fi([lD]),pn]});let t=e;return t})(),pm=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(Xg(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(Xg(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(ne(ft),ne(hn),ne(fm,9))},e.\u0275dir=Ze({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var dD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Vn({type:e}),e.\u0275inj=Bn({});let t=e;return t})();var qo=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:cm,useValue:r.callSetDisabledState??ku}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Vn({type:e}),e.\u0275inj=Bn({imports:[dD]});let t=e;return t})();var Ko=class{_sessionDataEvent=new Ie;buffer=[];reader=void 0;readStopFlag=!0;name=void 0;serialPort=void 0;opened=!1;get SessionDataEvent(){return this._sessionDataEvent.asObservable()}serial_options={baudRate:115200,dataBits:8,stopBits:1,parity:"none",bufferSize:1e6,rtscts:!1,xon:!1,xoff:!1,xany:!1};constructor(e){this.name=e}Open(){return Pt(this,null,function*(){try{this.serialPort!=null&&(yield this.serialPort.open(this.serial_options),this.serialPort.readable&&(this.opened=!0,this.reader=this.serialPort.readable.getReader(),this.reader!=null&&this.fetchStream()))}catch(e){console.log(e.message)}})}Close(){return Pt(this,null,function*(){if(this.serialPort!=null){this.readStopFlag=!0;try{this.reader.cancel(),this.reader.releaseLock()}catch{}this.serialPort.close(),this.opened=!1}})}write(e){if(e.length>0&&this.serialPort!=null&&this.serialPort.writable!=null){let n=this.serialPort.writable.getWriter();n.write(e),n.releaseLock()}}readBuffer(){return[...this.buffer]}fetchStream(){return Pt(this,null,function*(){if(this.serialPort!=null)for(this.readStopFlag=!1;this.reader!=null&&!this.readStopFlag;)try{let{value:e,done:n}=yield this.reader.read();if(n){this.reader.releaseLock();break}else this.buffer.push(...e),this._sessionDataEvent.next(e)}catch{yield new Promise(n=>{setTimeout(n,10)}),this.reader=this.serialPort.readable.getReader()}})}};var Lt=(()=>{class t{sessions=[];layout_mode="grid";active_session=0;constructor(){}_sessionChangeEvent=new Ie;get SessionChangeEvent(){return this._sessionChangeEvent.asObservable()}_sessionLayoutChangeEvent=new Ie;get SessionLayoutChangeEvent(){return this._sessionLayoutChangeEvent.asObservable()}newSession(){let n=new Ko(`Session${this.sessions.length+1}`);this.sessions.push(n),this._sessionChangeEvent.next(n)}removeSession(n){this.sessions.includes(n)&&(n.opened&&n.Close(),this.sessions.splice(this.sessions.indexOf(n),1),this._sessionChangeEvent.next(n))}changeLayout(n){this.layout_mode=n,this._sessionLayoutChangeEvent.next(this.layout_mode)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fD(t,e){if(t&1){let n=mn();q(0,"i",12),Be("click",function(){Ve(n);let i=we();return je(i.addSession())}),Z()}}function pD(t,e){if(t&1){let n=mn();q(0,"i",13),Be("click",function(){Ve(n);let i=we();return je(i.changeLayout(i.appService.layout_mode!="grid"?"grid":"tab"))}),Z()}if(t&2){let n=we();gn("toggle-sidebar-btn clickable-icon bi "+(n.appService.layout_mode!="grid"?"bi-window-stack":"bi-grid"))}}var gm=(()=>{class t{changeDetectorRef;appService;constructor(n,r){this.changeDetectorRef=n,this.appService=r,this.appService.SessionChangeEvent.subscribe(()=>{this.changeDetectorRef.detectChanges()})}addSession(){this.appService.newSession()}changeLayout(n){this.appService.changeLayout(n)}toggleFullscreen(){let n=window.document;n.fullScreenElement&&n.fullScreenElement!==null||!n.mozFullScreen&&!n.webkitIsFullScreen?n.documentElement.requestFullScreen?n.documentElement.requestFullScreen():n.documentElement.mozRequestFullScreen?n.documentElement.mozRequestFullScreen():n.documentElement.webkitRequestFullScreen?n.documentElement.webkitRequestFullScreen():n.msRequestFullscreen&&n.documentElement.msRequestFullscreen():n.cancelFullScreen?n.cancelFullScreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitCancelFullScreen?n.webkitCancelFullScreen():n.msExitFullscreen&&n.msExitFullscreen()}isFullscreen(){let n=window.document;return n.fullScreenElement&&n.fullScreenElement!==null||!n.mozFullScreen&&!n.webkitIsFullScreen}static \u0275fac=function(r){return new(r||t)(ne($e),ne(Lt))};static \u0275cmp=ht({type:t,selectors:[["app-header"]],standalone:!0,features:[pt],decls:13,vars:2,consts:[["id","header",1,"header","fixed-top","d-flex","align-items-center"],[1,"d-flex","align-items-center","justify-content-between"],[1,"logo","d-flex","align-items-center"],["src","img/logo.png","alt",""],[1,"d-none","d-lg-block"],["class","bi bi-terminal-plus toggle-sidebar-btn clickable-icon","data-bs-toggle","tooltip","data-bs-placement","top","title","New Session",3,"click",4,"ngIf"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Session Layout",3,"class","click",4,"ngIf"],[1,"d-flex","ms-2","align-items-center","justify-content-between"],[1,"header-nav","ms-auto"],[1,"d-flex","align-items-center"],[1,"nav-item","me-2"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Enter Fullscreen",1,"bi","bi-arrows-fullscreen","toggle-sidebar-btn","clickable-icon",3,"click"],["data-bs-toggle","tooltip","data-bs-placement","top","title","New Session",1,"bi","bi-terminal-plus","toggle-sidebar-btn","clickable-icon",3,"click"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Session Layout",3,"click"]],template:function(r,i){r&1&&(q(0,"header",0)(1,"div",1)(2,"div",2),Me(3,"img",3),q(4,"span",4),ye(5,"VTerm"),Z()(),Ye(6,fD,1,0,"i",5)(7,pD,1,2,"i",6),Z(),Me(8,"div",7),q(9,"nav",8)(10,"ul",9)(11,"li",10)(12,"i",11),Be("click",function(){return i.toggleFullscreen()}),Z()()()()()),r&2&&(Ce(6),Ne("ngIf",i.appService.sessions.length<4),Ce(),Ne("ngIf",i.appService.sessions.length>1))},dependencies:[Kt,xr],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return t})();var ym=ju(mm()),Cm=ju(_m());var gD=["terminal_container"];function mD(t,e){if(t&1){let n=mn();q(0,"div",20)(1,"div",21)(2,"label",22),ye(3,"BaudRate"),Z()(),q(4,"div",23)(5,"select",24),_n("valueChange",function(i){Ve(n);let s=we();return Un(s.session.serial_options.baudRate,i)||(s.session.serial_options.baudRate=i),je(i)}),q(6,"option",25),ye(7,"110"),Z(),q(8,"option",26),ye(9,"300"),Z(),q(10,"option",27),ye(11,"1200"),Z(),q(12,"option",28),ye(13,"2400"),Z(),q(14,"option",29),ye(15,"4800"),Z(),q(16,"option",30),ye(17,"9600"),Z(),q(18,"option",31),ye(19,"14400"),Z(),q(20,"option",32),ye(21,"19200"),Z(),q(22,"option",33),ye(23,"38400"),Z(),q(24,"option",34),ye(25,"57600"),Z(),q(26,"option",35),ye(27,"115200"),Z(),q(28,"option",36),ye(29,"230400"),Z(),q(30,"option",37),ye(31,"460800"),Z(),q(32,"option",38),ye(33,"921600"),Z()()(),q(34,"div",21)(35,"label",22),ye(36,"DataBits"),Z()(),q(37,"div",23)(38,"input",39),_n("valueChange",function(i){Ve(n);let s=we();return Un(s.session.serial_options.dataBits,i)||(s.session.serial_options.dataBits=i),je(i)}),Z()(),q(39,"div",21)(40,"label",22),ye(41,"StopBits"),Z()(),q(42,"div",23)(43,"input",39),_n("valueChange",function(i){Ve(n);let s=we();return Un(s.session.serial_options.stopBits,i)||(s.session.serial_options.stopBits=i),je(i)}),Z()(),q(44,"div",21)(45,"label",22),ye(46,"Parity"),Z()(),q(47,"div",23)(48,"select",24),_n("valueChange",function(i){Ve(n);let s=we();return Un(s.session.serial_options.parity,i)||(s.session.serial_options.parity=i),je(i)}),q(49,"option",40),ye(50,"none"),Z(),q(51,"option",41),ye(52,"odd"),Z(),q(53,"option",42),ye(54,"even"),Z()()(),q(55,"div",21)(56,"label",22),ye(57,"BufferSize"),Z()(),q(58,"div",23)(59,"input",43),_n("valueChange",function(i){Ve(n);let s=we();return Un(s.session.serial_options.bufferSize,i)||(s.session.serial_options.bufferSize=i),je(i)}),Z()()()}if(t&2){let n=we();Ce(5),vn("value",n.session.serial_options.baudRate),Ce(33),vn("value",n.session.serial_options.dataBits),Ce(5),vn("value",n.session.serial_options.stopBits),Ce(5),vn("value",n.session.serial_options.parity),Ce(11),vn("value",n.session.serial_options.bufferSize)}}var Ur=(()=>{class t{changeDetectorRef;appService;terminalContainer;session=void 0;sessionSubscription=void 0;terminal=void 0;fitAddon=void 0;input_command="";line_feed=`
`;controlCodeMap=[{key:"@",ctrlKey:!0,mapCode:0},{key:"a",ctrlKey:!0,mapCode:1},{key:"b",ctrlKey:!0,mapCode:2},{key:"c",ctrlKey:!0,mapCode:3},{key:"d",ctrlKey:!0,mapCode:4},{key:"e",ctrlKey:!0,mapCode:5},{key:"f",ctrlKey:!0,mapCode:6},{key:"g",ctrlKey:!0,mapCode:7},{key:"h",ctrlKey:!0,mapCode:8},{key:"i",ctrlKey:!0,mapCode:9},{key:"j",ctrlKey:!0,mapCode:10},{key:"k",ctrlKey:!0,mapCode:11},{key:"l",ctrlKey:!0,mapCode:12},{key:"m",ctrlKey:!0,mapCode:13},{key:"n",ctrlKey:!0,mapCode:14},{key:"o",ctrlKey:!0,mapCode:15},{key:"p",ctrlKey:!0,mapCode:16},{key:"q",ctrlKey:!0,mapCode:17},{key:"r",ctrlKey:!0,mapCode:18},{key:"s",ctrlKey:!0,mapCode:19},{key:"t",ctrlKey:!0,mapCode:20},{key:"u",ctrlKey:!0,mapCode:21},{key:"v",ctrlKey:!0,mapCode:22},{key:"w",ctrlKey:!0,mapCode:23},{key:"x",ctrlKey:!0,mapCode:24},{key:"y",ctrlKey:!0,mapCode:25},{key:"z",ctrlKey:!0,mapCode:26},{key:"[",ctrlKey:!0,mapCode:27},{key:"\\",ctrlKey:!0,mapCode:28},{key:"]",ctrlKey:!0,mapCode:29},{key:"^",ctrlKey:!0,mapCode:30},{key:"_",ctrlKey:!0,mapCode:31},{key:"Backspace",ctrlKey:!1,mapCode:8},{key:"Tab",ctrlKey:!1,mapCode:9},{key:"Escape",ctrlKey:!1,mapCode:27}];constructor(n,r){this.changeDetectorRef=n,this.appService=r}ngAfterViewInit(){this.terminal==null&&this.terminalContainer!=null&&(this.terminal=new Cm.Terminal({convertEol:!0}),this.fitAddon=new ym.FitAddon,this.terminal.loadAddon(this.fitAddon),this.terminal.open(this.terminalContainer.nativeElement),this.fitAddon.fit(),this.terminal.attachCustomKeyEventHandler(n=>this.processKeyEvent(n))),this.session!=null&&(this.terminal!=null&&this.terminal.write(Uint8Array.from(this.session.readBuffer())),this.sessionSubscription=this.session.SessionDataEvent.subscribe(n=>{this.terminal.write(n)}))}ngOnChanges(n){n.session!=null&&this.terminal!=null&&(this.sessionSubscription!=null&&this.sessionSubscription.unsubscribe(),this.terminal.reset(),this.terminal.write(Uint8Array.from(this.session.readBuffer())),this.sessionSubscription=this.session.SessionDataEvent.subscribe(r=>{this.terminal.write(r)}))}removeSession(){this.appService.removeSession(this.session)}sendCommand(){if(this.input_command.length>0&&this.session!=null){let n=new TextEncoder;this.session.write(n.encode(this.input_command+this.line_feed))}}selectPort(){return Pt(this,null,function*(){let n=yield navigator.serial.requestPort({});this.session.serialPort=n,this.session.serialPort!=null&&(yield this.session.Open()),this.changeDetectorRef.markForCheck()})}toggleConnection(){return Pt(this,null,function*(){this.session.opened?yield this.session.Close():yield this.session.Open(),this.changeDetectorRef.markForCheck()})}onResize(n){this.terminal!=null&&this.fitAddon!=null&&this.fitAddon.fit()}processKeyEvent(n){if(this.session!=null&&n.type==="keydown"&&!n.repeat){let r=this.getControlCode(n),i=[];if(r!=null)i.push(r);else{let s=new TextEncoder;n.code=="Enter"?i.push(...s.encode(`
`).values()):n.code=="ArrowUp"?(i.push(27),i.push(...s.encode("[A"))):n.code=="ArrowDown"?(i.push(27),i.push(...s.encode("[B"))):n.code=="ArrowLeft"?(i.push(27),i.push(...s.encode("[D"))):n.code=="ArrowRight"?(i.push(27),i.push(...s.encode("[C"))):n.key.length==1&&i.push(...s.encode(n.key).values())}this.session.write(Uint8Array.from(i))}return!0}getControlCode(n){for(let r=0;r<this.controlCodeMap.length;r++)if(this.controlCodeMap[r].key==n.key&&this.controlCodeMap[r].ctrlKey==n.ctrlKey)return this.controlCodeMap[r].mapCode}static \u0275fac=function(r){return new(r||t)(ne($e),ne(Lt))};static \u0275cmp=ht({type:t,selectors:[["serial-session"]],viewQuery:function(r,i){if(r&1&&Ap(gD,5),r&2){let s;Dl(s=El())&&(i.terminalContainer=s.first)}},inputs:{session:"session"},standalone:!0,features:[un,pt],decls:25,vars:10,consts:[["terminal_container",""],[1,"d-flex","flex-column","p-1","mb-1","bd-highlight","border","border-primary","h-100"],[1,"row","align-items-center","mb-1"],[1,"col-auto","pe-0"],[1,"btn-group","dropend"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-primary","btn-sm","dropdown-toggle"],[1,"dropdown-menu"],["disabled","",1,"dropdown-item",2,"cursor","pointer",3,"click"],[1,"col-auto","ps-1","pe-0"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Select Port",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"bi","bi-search"],["data-bs-toggle","tooltip","data-bs-placement","top",1,"btn","btn-outline-primary","btn-sm",3,"click","title","disabled"],[1,"col","ps-1","pe-0"],["type","text","placeholder","","tooltip","input command","spellcheck","false",1,"form-control","form-control-sm",3,"ngModelChange","keydown.enter","ngModel","disabled"],[1,"col-auto","ps-1"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Send",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"bi","bi-send-fill"],[1,"mt-0","mb-1"],["class","row align-items-center pb-1 px-3",4,"ngIf"],[1,"align-self-stretch","flex-grow-1",3,"resize"],[1,"row","align-items-center","pb-1","px-3"],[1,"col-auto","px-0"],[1,"form-label","form-label-sm","mb-0"],[1,"col-auto","px-1"],[1,"form-select","form-select-sm",3,"valueChange","value"],["value","110"],["value","300"],["value","1200"],["value","2400"],["value","4800"],["value","9600"],["value","14400"],["value","19200"],["value","38400"],["value","57600"],["value","115200"],["value","230400"],["value","460800"],["value","921600"],["type","number",1,"form-control","form-control-sm",2,"width","46px",3,"valueChange","value"],["value","none"],["value","odd"],["value","even"],["type","number",1,"form-control","form-control-sm",2,"width","100px",3,"valueChange","value"]],template:function(r,i){if(r&1){let s=mn();q(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"button",5),ye(5),Z(),q(6,"ul",6)(7,"li")(8,"a",7),Be("click",function(){return Ve(s),je(i.removeSession())}),ye(9,"Remove Session"),Z()()()()(),q(10,"div",8)(11,"button",9),Be("click",function(){return Ve(s),je(i.selectPort())}),Me(12,"i",10),Z()(),q(13,"div",8)(14,"button",11),Be("click",function(){return Ve(s),je(i.toggleConnection())}),Me(15,"i"),Z()(),q(16,"div",12)(17,"input",13),_n("ngModelChange",function(a){return Ve(s),Un(i.input_command,a)||(i.input_command=a),je(a)}),Be("keydown.enter",function(){return Ve(s),je(i.sendCommand())}),Z()(),q(18,"div",14)(19,"button",15),Be("click",function(){return Ve(s),je(i.sendCommand())}),Me(20,"i",16),Z()()(),Me(21,"hr",17),Ye(22,mD,60,5,"div",18),q(23,"div",19,0),Be("resize",function(a){return Ve(s),je(i.onResize(a))},!1,Mf),Z()()}r&2&&(Ce(5),fo(" ",i.session.name," "),Ce(6),Ne("disabled",i.session.opened),Ce(3),bl("title",i.session.opened?"Close Port":"Open Port"),Ne("disabled",i.session.serialPort==null),Ce(),gn("bi "+(i.session.opened?"bi-pause-fill":"bi-play-fill")),Ce(2),vn("ngModel",i.input_command),Ne("disabled",!i.session.opened),Ce(2),Ne("disabled",!i.session.opened),Ce(3),Ne("ngIf",!i.session.opened))},dependencies:[Kt,xr,qo,hm,pm,zo,am,Ou],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return t})();function vD(t,e){if(t&1){let n=mn();q(0,"button",5),Be("click",function(){let i=Ve(n).index,s=we();return je(s.setActiveSession(i))}),ye(1),Z()}if(t&2){let n=e.$implicit,r=e.index,i=we();gn("nav-link"+(i.appService.active_session==r?" active":"")),Ce(),Il(n.name)}}function _D(t,e){if(t&1&&(q(0,"div",6),Me(1,"serial-session",7),Z()),t&2){let n=we();Ce(),Ne("session",n.appService.sessions[n.appService.active_session])}}var Sm=(()=>{class t{changeDetectorRef;appService;constructor(n,r){this.changeDetectorRef=n,this.appService=r,this.appService.SessionChangeEvent.subscribe(()=>{this.changeDetectorRef.markForCheck()})}setActiveSession(n){this.appService.active_session=n}static \u0275fac=function(r){return new(r||t)(ne($e),ne(Lt))};static \u0275cmp=ht({type:t,selectors:[["app-tab-view"]],standalone:!0,features:[pt],decls:5,vars:2,consts:[[1,"d-flex","flex-column","align-items-stretch","w-100","h-100"],[1,"align-items-center"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],[3,"class","click",4,"ngFor","ngForOf"],["class","tab-content flex-grow-1",4,"ngIf"],[3,"click"],[1,"tab-content","flex-grow-1"],[1,"col","h-100","px-1",3,"session"]],template:function(r,i){r&1&&(q(0,"div",0)(1,"nav",1)(2,"div",2),Ye(3,vD,2,3,"button",3),Z()(),Ye(4,_D,2,1,"div",4),Z()),r&2&&(Ce(3),Ne("ngForOf",i.appService.sessions),Ce(),Ne("ngIf",i.appService.sessions.length>0))},dependencies:[Kt,Co,xr,Ur],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return t})();function yD(t,e){if(t&1&&Me(0,"serial-session",4),t&2){let n=we().$implicit,r=we().$implicit,i=we();Ne("session",i.appService.sessions[r*i.max_col_num+n])}}function CD(t,e){if(t&1&&(q(0,"td"),Ye(1,yD,1,1,"serial-session",4),Z()),t&2){let n=e.$implicit,r=we().$implicit,i=we();Cp("width: "+100/i.cols.length+"%;height: "+100/i.rows.length+"%;"),Ce(),hi(r*i.max_col_num+n<i.appService.sessions.length?1:-1)}}function SD(t,e){if(t&1&&(q(0,"tr"),Ye(1,CD,2,3,"td",3),Z()),t&2){let n=we();Ce(),Ne("ngForOf",n.cols)}}var wm=(()=>{class t{changeDetectorRef;appService;max_col_num=2;row_num=0;col_num=0;rows=[];cols=[];constructor(n,r){this.changeDetectorRef=n,this.appService=r,this.appService.SessionChangeEvent.subscribe(()=>{this.rows=[],this.row_num=Math.round(this.appService.sessions.length/this.max_col_num);for(let i=0;i<this.row_num;i++)this.rows.push(i);this.cols=[];for(let i=0;i<this.max_col_num;i++)this.cols.push(i);this.changeDetectorRef.markForCheck()}),this.rows=[],this.row_num=Math.round(this.appService.sessions.length/this.max_col_num);for(let i=0;i<this.row_num;i++)this.rows.push(i);this.cols=[];for(let i=0;i<this.max_col_num;i++)this.cols.push(i)}static \u0275fac=function(r){return new(r||t)(ne($e),ne(Lt))};static \u0275cmp=ht({type:t,selectors:[["app-grid-view"]],standalone:!0,features:[pt],decls:4,vars:1,consts:[[1,"d-flex","flex-wrap","h-100"],[1,"table","table-borderless",2,"height","100%","min-height","100%"],[4,"ngFor","ngForOf"],[3,"style",4,"ngFor","ngForOf"],[2,"height","100%",3,"session"]],template:function(r,i){r&1&&(q(0,"div",0)(1,"table",1)(2,"tbody"),Ye(3,SD,2,1,"tr",2),Z()()()),r&2&&(Ce(3),Ne("ngForOf",i.rows))},dependencies:[Kt,Co,Ur],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return t})();function wD(t,e){if(t&1&&Me(0,"serial-session",1),t&2){let n=we();Ne("session",n.appService.sessions[0])}}function bD(t,e){t&1&&Me(0,"app-grid-view",2)}function DD(t,e){t&1&&Me(0,"app-grid-view",2)}function ED(t,e){t&1&&Me(0,"app-grid-view",2)}function ID(t,e){if(t&1&&Ye(0,bD,1,0,"app-grid-view",2)(1,DD,1,0,"app-grid-view",2)(2,ED,1,0,"app-grid-view",2),t&2){let n=we();hi(n.appService.sessions.length==2?0:n.appService.sessions.length==3?1:n.appService.sessions.length==4?2:-1)}}function MD(t,e){t&1&&Me(0,"app-tab-view",2)}var bm=(()=>{class t{changeDetectorRef;appService;title="vterm";constructor(n,r){this.changeDetectorRef=n,this.appService=r,window.onbeforeunload=function(i){i.preventDefault()},this.appService.SessionChangeEvent.subscribe(()=>{this.changeDetectorRef.detectChanges()})}static \u0275fac=function(r){return new(r||t)(ne($e),ne(Lt))};static \u0275cmp=ht({type:t,selectors:[["app-root"]],standalone:!0,features:[pt],decls:5,vars:3,consts:[["id","main"],[1,"col","px-1",3,"session"],[1,"col"]],template:function(r,i){r&1&&(Me(0,"app-header"),q(1,"main",0),Ye(2,wD,1,1,"serial-session",1)(3,ID,3,1)(4,MD,1,0,"app-tab-view",2),Z()),r&2&&(Ce(),gn("main d-flex"+(i.appService.layout_mode=="grid"&&i.appService.sessions.length>4?" overflow-scroll":"")),Ce(),hi(i.appService.sessions.length==1?2:i.appService.layout_mode=="grid"?3:4))},dependencies:[qo,gm,Ur,Sm,wm]})}return t})();sg(bm,Wg).catch(t=>console.error(t));
