var Xm=Object.create;var Sa=Object.defineProperty,Jm=Object.defineProperties,ev=Object.getOwnPropertyDescriptor,tv=Object.getOwnPropertyDescriptors,nv=Object.getOwnPropertyNames,od=Object.getOwnPropertySymbols,rv=Object.getPrototypeOf,cd=Object.prototype.hasOwnProperty,iv=Object.prototype.propertyIsEnumerable;var ad=(t,e,n)=>e in t?Sa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H=(t,e)=>{for(var n in e||={})cd.call(e,n)&&ad(t,n,e[n]);if(od)for(var n of od(e))iv.call(e,n)&&ad(t,n,e[n]);return t},_e=(t,e)=>Jm(t,tv(e));var ld=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var sv=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nv(e))!cd.call(t,i)&&i!==n&&Sa(t,i,{get:()=>e[i],enumerable:!(r=ev(e,i))||r.enumerable});return t};var ud=(t,e,n)=>(n=t!=null?Xm(rv(t)):{},sv(e||!t||!t.__esModule?Sa(n,"default",{value:t,enumerable:!0}):n,t));var zt=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(c){i(c)}},o=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())});var Um=ld((pa,id)=>{"use strict";(function(t,e){typeof pa=="object"&&typeof id=="object"?id.exports=e():typeof define=="function"&&define.amd?define([],e):typeof pa=="object"?pa.FitAddon=e():t.FitAddon=e()})(self,()=>(()=>{"use strict";var t={};return(()=>{var e=t;Object.defineProperty(e,"__esModule",{value:!0}),e.FitAddon=void 0,e.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let r=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(r._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,r=n._renderService.dimensions;if(r.css.cell.width===0||r.css.cell.height===0)return;let i=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(s.getPropertyValue("height")),a=Math.max(0,parseInt(s.getPropertyValue("width"))),l=window.getComputedStyle(this._terminal.element),c=o-(parseInt(l.getPropertyValue("padding-top"))+parseInt(l.getPropertyValue("padding-bottom"))),p=a-(parseInt(l.getPropertyValue("padding-right"))+parseInt(l.getPropertyValue("padding-left")))-i;return{cols:Math.max(2,Math.floor(p/r.css.cell.width)),rows:Math.max(1,Math.floor(c/r.css.cell.height))}}}})(),t})())});var Wm=ld((ga,sd)=>{"use strict";(function(t,e){if(typeof ga=="object"&&typeof sd=="object")sd.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var n=e();for(var r in n)(typeof ga=="object"?ga:t)[r]=n[r]}})(globalThis,()=>(()=>{"use strict";var t={4567:function(i,s,o){var a=this&&this.__decorate||function(d,f,v,C){var S,w=arguments.length,_=w<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,v):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(d,f,v,C);else for(var b=d.length-1;b>=0;b--)(S=d[b])&&(_=(w<3?S(_):w>3?S(f,v,_):S(f,v))||_);return w>3&&_&&Object.defineProperty(f,v,_),_},l=this&&this.__param||function(d,f){return function(v,C){f(v,C,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;let c=o(9042),p=o(9924),m=o(844),y=o(4725),g=o(2585),u=o(3656),h=s.AccessibilityManager=class extends m.Disposable{constructor(d,f,v,C){super(),this._terminal=d,this._coreBrowserService=v,this._renderService=C,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new p.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,u.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,m.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(d){for(let f=0;f<d;f++)this._handleChar(" ")}_handleChar(d){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==d&&(this._charsToAnnounce+=d):this._charsToAnnounce+=d,d===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=c.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(d){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(d)||this._charsToConsume.push(d)}_refreshRows(d,f){this._liveRegionDebouncer.refresh(d,f,this._terminal.rows)}_renderRows(d,f){let v=this._terminal.buffer,C=v.lines.length.toString();for(let S=d;S<=f;S++){let w=v.lines.get(v.ydisp+S),_=[],b=w?.translateToString(!0,void 0,void 0,_)||"",A=(v.ydisp+S+1).toString(),T=this._rowElements[S];T&&(b.length===0?(T.innerText="\xA0",this._rowColumns.set(T,[0,1])):(T.textContent=b,this._rowColumns.set(T,_)),T.setAttribute("aria-posinset",A),T.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(d,f){let v=d.target,C=this._rowElements[f===0?1:this._rowElements.length-2];if(v.getAttribute("aria-posinset")===(f===0?"1":`${this._terminal.buffer.lines.length}`)||d.relatedTarget!==C)return;let S,w;if(f===0?(S=v,w=this._rowElements.pop(),this._rowContainer.removeChild(w)):(S=this._rowElements.shift(),w=v,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),w.removeEventListener("focus",this._bottomBoundaryFocusListener),f===0){let _=this._createAccessibilityTreeNode();this._rowElements.unshift(_),this._rowContainer.insertAdjacentElement("afterbegin",_)}else{let _=this._createAccessibilityTreeNode();this._rowElements.push(_),this._rowContainer.appendChild(_)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(f===0?-1:1),this._rowElements[f===0?1:this._rowElements.length-2].focus(),d.preventDefault(),d.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let d=document.getSelection();if(!d)return;if(d.isCollapsed)return void(this._rowContainer.contains(d.anchorNode)&&this._terminal.clearSelection());if(!d.anchorNode||!d.focusNode)return void console.error("anchorNode and/or focusNode are null");let f={node:d.anchorNode,offset:d.anchorOffset},v={node:d.focusNode,offset:d.focusOffset};if((f.node.compareDocumentPosition(v.node)&Node.DOCUMENT_POSITION_PRECEDING||f.node===v.node&&f.offset>v.offset)&&([f,v]=[v,f]),f.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(f={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(f.node))return;let C=this._rowElements.slice(-1)[0];if(v.node.compareDocumentPosition(C)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(v={node:C,offset:C.textContent?.length??0}),!this._rowContainer.contains(v.node))return;let S=({node:b,offset:A})=>{let T=b instanceof Text?b.parentNode:b,k=parseInt(T?.getAttribute("aria-posinset"),10)-1;if(isNaN(k))return console.warn("row is invalid. Race condition?"),null;let I=this._rowColumns.get(T);if(!I)return console.warn("columns is null. Race condition?"),null;let N=A<I.length?I[A]:I.slice(-1)[0]+1;return N>=this._terminal.cols&&(++k,N=0),{row:k,column:N}},w=S(f),_=S(v);if(w&&_){if(w.row>_.row||w.row===_.row&&w.column>=_.column)throw new Error("invalid range");this._terminal.select(w.column,w.row,(_.row-w.row)*this._terminal.cols-w.column+_.column)}}_handleResize(d){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let f=this._rowContainer.children.length;f<this._terminal.rows;f++)this._rowElements[f]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[f]);for(;this._rowElements.length>d;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let d=this._coreBrowserService.mainDocument.createElement("div");return d.setAttribute("role","listitem"),d.tabIndex=-1,this._refreshRowDimensions(d),d}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let d=0;d<this._terminal.rows;d++)this._refreshRowDimensions(this._rowElements[d])}}_refreshRowDimensions(d){d.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=h=a([l(1,g.IInstantiationService),l(2,y.ICoreBrowserService),l(3,y.IRenderService)],h)},3614:(i,s)=>{function o(p){return p.replace(/\r?\n/g,"\r")}function a(p,m){return m?"\x1B[200~"+p+"\x1B[201~":p}function l(p,m,y,g){p=a(p=o(p),y.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),y.triggerDataEvent(p,!0),m.value=""}function c(p,m,y){let g=y.getBoundingClientRect(),u=p.clientX-g.left-10,h=p.clientY-g.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${u}px`,m.style.top=`${h}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=o,s.bracketTextForPaste=a,s.copyHandler=function(p,m){p.clipboardData&&p.clipboardData.setData("text/plain",m.selectionText),p.preventDefault()},s.handlePasteEvent=function(p,m,y,g){p.stopPropagation(),p.clipboardData&&l(p.clipboardData.getData("text/plain"),m,y,g)},s.paste=l,s.moveTextAreaUnderMouseCursor=c,s.rightClickHandler=function(p,m,y,g,u){c(p,m,y),u&&g.rightClickSelect(p),m.value=g.selectionText,m.select()}},7239:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;let a=o(1505);s.ColorContrastCache=class{constructor(){this._color=new a.TwoKeyMap,this._css=new a.TwoKeyMap}setCss(l,c,p){this._css.set(l,c,p)}getCss(l,c){return this._css.get(l,c)}setColor(l,c,p){this._color.set(l,c,p)}getColor(l,c){return this._color.get(l,c)}clear(){this._color.clear(),this._css.clear()}}},3656:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(o,a,l,c){o.addEventListener(a,l,c);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(a,l,c))}}}},3551:function(i,s,o){var a=this&&this.__decorate||function(h,d,f,v){var C,S=arguments.length,w=S<3?d:v===null?v=Object.getOwnPropertyDescriptor(d,f):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(h,d,f,v);else for(var _=h.length-1;_>=0;_--)(C=h[_])&&(w=(S<3?C(w):S>3?C(d,f,w):C(d,f))||w);return S>3&&w&&Object.defineProperty(d,f,w),w},l=this&&this.__param||function(h,d){return function(f,v){d(f,v,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier=void 0;let c=o(3656),p=o(8460),m=o(844),y=o(2585),g=o(4725),u=s.Linkifier=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(h,d,f,v,C){super(),this._element=h,this._mouseService=d,this._renderService=f,this._bufferService=v,this._linkProviderService=C,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,c.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,c.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(h){this._lastMouseEvent=h;let d=this._positionFromMouseEvent(h,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;let f=h.composedPath();for(let v=0;v<f.length;v++){let C=f[v];if(C.classList.contains("xterm"))break;if(C.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(h){if(this._activeLine!==h.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(h,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,h)||(this._clearCurrentLink(),this._askForLink(h,!0))}_askForLink(h,d){this._activeProviderReplies&&d||(this._activeProviderReplies?.forEach(v=>{v?.forEach(C=>{C.link.dispose&&C.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=h.y);let f=!1;for(let[v,C]of this._linkProviderService.linkProviders.entries())d?this._activeProviderReplies?.get(v)&&(f=this._checkLinkProviderResult(v,h,f)):C.provideLinks(h.y,S=>{if(this._isMouseOut)return;let w=S?.map(_=>({link:_}));this._activeProviderReplies?.set(v,w),f=this._checkLinkProviderResult(v,h,f),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(h.y,this._activeProviderReplies)})}_removeIntersectingLinks(h,d){let f=new Set;for(let v=0;v<d.size;v++){let C=d.get(v);if(C)for(let S=0;S<C.length;S++){let w=C[S],_=w.link.range.start.y<h?0:w.link.range.start.x,b=w.link.range.end.y>h?this._bufferService.cols:w.link.range.end.x;for(let A=_;A<=b;A++){if(f.has(A)){C.splice(S--,1);break}f.add(A)}}}}_checkLinkProviderResult(h,d,f){if(!this._activeProviderReplies)return f;let v=this._activeProviderReplies.get(h),C=!1;for(let S=0;S<h;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(C=!0);if(!C&&v){let S=v.find(w=>this._linkAtPosition(w.link,d));S&&(f=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!f)for(let S=0;S<this._activeProviderReplies.size;S++){let w=this._activeProviderReplies.get(S)?.find(_=>this._linkAtPosition(_.link,d));if(w){f=!0,this._handleNewLink(w);break}}return f}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(h){if(!this._currentLink)return;let d=this._positionFromMouseEvent(h,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(h,this._currentLink.link.text)}_clearCurrentLink(h,d){this._currentLink&&this._lastMouseEvent&&(!h||!d||this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(h){if(!this._lastMouseEvent)return;let d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(h.link,d)&&(this._currentLink=h,this._currentLink.state={decorations:{underline:h.link.decorations===void 0||h.link.decorations.underline,pointerCursor:h.link.decorations===void 0||h.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,h.link,this._lastMouseEvent),h.link.decorations={},Object.defineProperties(h.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:f=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==f&&(this._currentLink.state.decorations.pointerCursor=f,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",f))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:f=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==f&&(this._currentLink.state.decorations.underline=f,this._currentLink.state.isHovered&&this._fireUnderlineEvent(h.link,f))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(f=>{if(!this._currentLink)return;let v=f.start===0?0:f.start+1+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.ydisp+1+f.end;if(this._currentLink.link.range.start.y>=v&&this._currentLink.link.range.end.y<=C&&(this._clearCurrentLink(v,C),this._lastMouseEvent)){let S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(h,d,f){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&h.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(f,d.text)}_fireUnderlineEvent(h,d){let f=h.range,v=this._bufferService.buffer.ydisp,C=this._createLinkUnderlineEvent(f.start.x-1,f.start.y-v-1,f.end.x,f.end.y-v-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(C)}_linkLeave(h,d,f){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&h.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(f,d.text)}_linkAtPosition(h,d){let f=h.range.start.y*this._bufferService.cols+h.range.start.x,v=h.range.end.y*this._bufferService.cols+h.range.end.x,C=d.y*this._bufferService.cols+d.x;return f<=C&&C<=v}_positionFromMouseEvent(h,d,f){let v=f.getCoords(h,d,this._bufferService.cols,this._bufferService.rows);if(v)return{x:v[0],y:v[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(h,d,f,v,C){return{x1:h,y1:d,x2:f,y2:v,cols:this._bufferService.cols,fg:C}}};s.Linkifier=u=a([l(1,g.IMouseService),l(2,g.IRenderService),l(3,y.IBufferService),l(4,g.ILinkProviderService)],u)},9042:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(i,s,o){var a=this&&this.__decorate||function(g,u,h,d){var f,v=arguments.length,C=v<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(g,u,h,d);else for(var S=g.length-1;S>=0;S--)(f=g[S])&&(C=(v<3?f(C):v>3?f(u,h,C):f(u,h))||C);return v>3&&C&&Object.defineProperty(u,h,C),C},l=this&&this.__param||function(g,u){return function(h,d){u(h,d,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;let c=o(511),p=o(2585),m=s.OscLinkProvider=class{constructor(g,u,h){this._bufferService=g,this._optionsService=u,this._oscLinkService=h}provideLinks(g,u){let h=this._bufferService.buffer.lines.get(g-1);if(!h)return void u(void 0);let d=[],f=this._optionsService.rawOptions.linkHandler,v=new c.CellData,C=h.getTrimmedLength(),S=-1,w=-1,_=!1;for(let b=0;b<C;b++)if(w!==-1||h.hasContent(b)){if(h.loadCell(b,v),v.hasExtendedAttrs()&&v.extended.urlId){if(w===-1){w=b,S=v.extended.urlId;continue}_=v.extended.urlId!==S}else w!==-1&&(_=!0);if(_||w!==-1&&b===C-1){let A=this._oscLinkService.getLinkData(S)?.uri;if(A){let T={start:{x:w+1,y:g},end:{x:b+(_||b!==C-1?0:1),y:g}},k=!1;if(!f?.allowNonHttpProtocols)try{let I=new URL(A);["http:","https:"].includes(I.protocol)||(k=!0)}catch{k=!0}k||d.push({text:A,range:T,activate:(I,N)=>f?f.activate(I,N,T):y(0,N),hover:(I,N)=>f?.hover?.(I,N,T),leave:(I,N)=>f?.leave?.(I,N,T)})}_=!1,v.hasExtendedAttrs()&&v.extended.urlId?(w=b,S=v.extended.urlId):(w=-1,S=-1)}}u(d)}};function y(g,u){if(confirm(`Do you want to navigate to ${u}?

WARNING: This link could potentially be dangerous`)){let h=window.open();if(h){try{h.opener=null}catch{}h.location.href=u}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=m=a([l(0,p.IBufferService),l(1,p.IOptionsService),l(2,p.IOscLinkService)],m)},6193:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(o,a){this._renderCallback=o,this._coreBrowserService=a,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,a,l){this._rowCount=l,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;let a=o(3614),l=o(3656),c=o(3551),p=o(9042),m=o(3730),y=o(1680),g=o(3107),u=o(5744),h=o(2950),d=o(1296),f=o(428),v=o(4269),C=o(5114),S=o(8934),w=o(3230),_=o(9312),b=o(4725),A=o(6731),T=o(8055),k=o(8969),I=o(8460),N=o(844),F=o(6114),j=o(8437),K=o(2584),V=o(7399),D=o(5941),M=o(9074),x=o(2585),R=o(5435),P=o(4567),$=o(779);class Y extends k.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(O={}){super(O),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new I.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new I.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new I.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new I.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new I.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new I.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new I.EventEmitter),this._onBlur=this.register(new I.EventEmitter),this._onA11yCharEmitter=this.register(new I.EventEmitter),this._onA11yTabEmitter=this.register(new I.EventEmitter),this._onWillOpen=this.register(new I.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(x.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance($.LinkProviderService),this._instantiationService.setService(b.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((E,L)=>this.refresh(E,L))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(E=>this._reportWindowsOptions(E))),this.register(this._inputHandler.onColor(E=>this._handleColorEvent(E))),this.register((0,I.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,I.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(E=>this._afterResize(E.cols,E.rows))),this.register((0,N.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(O){if(this._themeService)for(let E of O){let L,B="";switch(E.index){case 256:L="foreground",B="10";break;case 257:L="background",B="11";break;case 258:L="cursor",B="12";break;default:L="ansi",B="4;"+E.index}switch(E.type){case 0:let q=T.color.toColorRGB(L==="ansi"?this._themeService.colors.ansi[E.index]:this._themeService.colors[L]);this.coreService.triggerDataEvent(`${K.C0.ESC}]${B};${(0,D.toRgbString)(q)}${K.C1_ESCAPED.ST}`);break;case 1:if(L==="ansi")this._themeService.modifyColors(W=>W.ansi[E.index]=T.channels.toColor(...E.color));else{let W=L;this._themeService.modifyColors(me=>me[W]=T.channels.toColor(...E.color))}break;case 2:this._themeService.restoreColor(E.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(O){O?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(P.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(K.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(K.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let O=this.buffer.ybase+this.buffer.y,E=this.buffer.lines.get(O);if(!E)return;let L=Math.min(this.buffer.x,this.cols-1),B=this._renderService.dimensions.css.cell.height,q=E.getWidth(L),W=this._renderService.dimensions.css.cell.width*q,me=this.buffer.y*this._renderService.dimensions.css.cell.height,xe=L*this._renderService.dimensions.css.cell.width;this.textarea.style.left=xe+"px",this.textarea.style.top=me+"px",this.textarea.style.width=W+"px",this.textarea.style.height=B+"px",this.textarea.style.lineHeight=B+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,l.addDisposableDomListener)(this.element,"copy",E=>{this.hasSelection()&&(0,a.copyHandler)(E,this._selectionService)}));let O=E=>(0,a.handlePasteEvent)(E,this.textarea,this.coreService,this.optionsService);this.register((0,l.addDisposableDomListener)(this.textarea,"paste",O)),this.register((0,l.addDisposableDomListener)(this.element,"paste",O)),F.isFirefox?this.register((0,l.addDisposableDomListener)(this.element,"mousedown",E=>{E.button===2&&(0,a.rightClickHandler)(E,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,l.addDisposableDomListener)(this.element,"contextmenu",E=>{(0,a.rightClickHandler)(E,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,l.addDisposableDomListener)(this.element,"auxclick",E=>{E.button===1&&(0,a.moveTextAreaUnderMouseCursor)(E,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,l.addDisposableDomListener)(this.textarea,"keyup",O=>this._keyUp(O),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keydown",O=>this._keyDown(O),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keypress",O=>this._keyPress(O),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionupdate",O=>this._compositionHelper.compositionupdate(O))),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,l.addDisposableDomListener)(this.textarea,"input",O=>this._inputEvent(O),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(O){if(!O)throw new Error("Terminal requires a parent element.");if(O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=O.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),O.appendChild(this.element);let E=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),E.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,l.addDisposableDomListener)(this.screenElement,"mousemove",L=>this.updateCursorStyle(L))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),E.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,O.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,l.addDisposableDomListener)(this.textarea,"focus",L=>this._handleTextAreaFocus(L))),this.register((0,l.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(f.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(A.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(v.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(w.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(L=>this._onRender.fire(L))),this.onResize(L=>this._renderService.resize(L.cols,L.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(c.Linkifier,this.screenElement)),this.element.appendChild(E);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(y.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(L=>this.scrollLines(L.amount,L.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(_.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(L=>this.scrollLines(L.amount,L.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(L=>this._renderService.handleSelectionChanged(L.start,L.end,L.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(L=>{this.textarea.value=L,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(L=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,l.addDisposableDomListener)(this.element,"mousedown",L=>this._selectionService.handleMouseDown(L))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(P.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",L=>this._handleScreenReaderModeOptionChange(L))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(u.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",L=>{!this._overviewRulerRenderer&&L&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(u.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(d.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let O=this,E=this.element;function L(W){let me=O._mouseService.getMouseReportCoords(W,O.screenElement);if(!me)return!1;let xe,Ae;switch(W.overrideType||W.type){case"mousemove":Ae=32,W.buttons===void 0?(xe=3,W.button!==void 0&&(xe=W.button<3?W.button:3)):xe=1&W.buttons?0:4&W.buttons?1:2&W.buttons?2:3;break;case"mouseup":Ae=0,xe=W.button<3?W.button:3;break;case"mousedown":Ae=1,xe=W.button<3?W.button:3;break;case"wheel":if(O._customWheelEventHandler&&O._customWheelEventHandler(W)===!1||O.viewport.getLinesScrolled(W)===0)return!1;Ae=W.deltaY<0?0:1,xe=4;break;default:return!1}return!(Ae===void 0||xe===void 0||xe>4)&&O.coreMouseService.triggerMouseEvent({col:me.col,row:me.row,x:me.x,y:me.y,button:xe,action:Ae,ctrl:W.ctrlKey,alt:W.altKey,shift:W.shiftKey})}let B={mouseup:null,wheel:null,mousedrag:null,mousemove:null},q={mouseup:W=>(L(W),W.buttons||(this._document.removeEventListener("mouseup",B.mouseup),B.mousedrag&&this._document.removeEventListener("mousemove",B.mousedrag)),this.cancel(W)),wheel:W=>(L(W),this.cancel(W,!0)),mousedrag:W=>{W.buttons&&L(W)},mousemove:W=>{W.buttons||L(W)}};this.register(this.coreMouseService.onProtocolChange(W=>{W?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(W)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&W?B.mousemove||(E.addEventListener("mousemove",q.mousemove),B.mousemove=q.mousemove):(E.removeEventListener("mousemove",B.mousemove),B.mousemove=null),16&W?B.wheel||(E.addEventListener("wheel",q.wheel,{passive:!1}),B.wheel=q.wheel):(E.removeEventListener("wheel",B.wheel),B.wheel=null),2&W?B.mouseup||(B.mouseup=q.mouseup):(this._document.removeEventListener("mouseup",B.mouseup),B.mouseup=null),4&W?B.mousedrag||(B.mousedrag=q.mousedrag):(this._document.removeEventListener("mousemove",B.mousedrag),B.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,l.addDisposableDomListener)(E,"mousedown",W=>{if(W.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(W))return L(W),B.mouseup&&this._document.addEventListener("mouseup",B.mouseup),B.mousedrag&&this._document.addEventListener("mousemove",B.mousedrag),this.cancel(W)})),this.register((0,l.addDisposableDomListener)(E,"wheel",W=>{if(!B.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(W)===!1)return!1;if(!this.buffer.hasScrollback){let me=this.viewport.getLinesScrolled(W);if(me===0)return;let xe=K.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(W.deltaY<0?"A":"B"),Ae="";for(let Qe=0;Qe<Math.abs(me);Qe++)Ae+=xe;return this.coreService.triggerDataEvent(Ae,!0),this.cancel(W,!0)}return this.viewport.handleWheel(W)?this.cancel(W):void 0}},{passive:!1})),this.register((0,l.addDisposableDomListener)(E,"touchstart",W=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(W),this.cancel(W)},{passive:!0})),this.register((0,l.addDisposableDomListener)(E,"touchmove",W=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(W)?void 0:this.cancel(W)},{passive:!1}))}refresh(O,E){this._renderService?.refreshRows(O,E)}updateCursorStyle(O){this._selectionService?.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(O,E,L=0){L===1?(super.scrollLines(O,E,L),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(O)}paste(O){(0,a.paste)(O,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(O){this._customKeyEventHandler=O}attachCustomWheelEventHandler(O){this._customWheelEventHandler=O}registerLinkProvider(O){return this._linkProviderService.registerLinkProvider(O)}registerCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let E=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),E}deregisterCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(O){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)}registerDecoration(O){return this._decorationService.registerDecoration(O)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(O,E,L){this._selectionService.setSelection(O,E,L)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(O,E){this._selectionService?.selectLines(O,E)}_keyDown(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;let E=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!E&&!this._compositionHelper.keydown(O))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;E||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let L=(0,V.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),L.type===3||L.type===2){let B=this.rows-1;return this.scrollLines(L.type===2?-B:B),this.cancel(O,!0)}return L.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(L.cancel&&this.cancel(O,!0),!L.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(L.key!==K.C0.ETX&&L.key!==K.C0.CR||(this.textarea.value=""),this._onKey.fire({key:L.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(L.key,!0),!this.optionsService.rawOptions.screenReaderMode||O.altKey||O.ctrlKey?this.cancel(O,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(O,E){let L=O.isMac&&!this.options.macOptionIsMeta&&E.altKey&&!E.ctrlKey&&!E.metaKey||O.isWindows&&E.altKey&&E.ctrlKey&&!E.metaKey||O.isWindows&&E.getModifierState("AltGraph");return E.type==="keypress"?L:L&&(!E.keyCode||E.keyCode>47)}_keyUp(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(E){return E.keyCode===16||E.keyCode===17||E.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)}_keyPress(O){let E;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)E=O.charCode;else if(O.which===null||O.which===void 0)E=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;E=O.which}return!(!E||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(E=String.fromCharCode(E),this._onKey.fire({key:E,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(E,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let E=O.data;return this.coreService.triggerDataEvent(E,!0),this.cancel(O),!0}return!1}resize(O,E){O!==this.cols||E!==this.rows?super.resize(O,E):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(O,E){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(j.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let O=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=O,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(K.C0.ESC+"[I"):this.coreService.triggerDataEvent(K.C0.ESC+"[O")}_reportWindowsOptions(O){if(this._renderService)switch(O){case R.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let E=this._renderService.dimensions.css.canvas.width.toFixed(0),L=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${K.C0.ESC}[4;${L};${E}t`);break;case R.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let B=this._renderService.dimensions.css.cell.width.toFixed(0),q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${K.C0.ESC}[6;${q};${B}t`)}}cancel(O,E){if(this.options.cancelEvents||E)return O.preventDefault(),O.stopPropagation(),!1}}s.Terminal=Y},9924:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(o,a=1e3){this._renderCallback=o,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,a,l){this._rowCount=l,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;let c=Date.now();if(c-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=c,this._innerRefresh();else if(!this._additionalRefreshRequested){let p=c-this._lastRefreshMs,m=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a)}}},1680:function(i,s,o){var a=this&&this.__decorate||function(h,d,f,v){var C,S=arguments.length,w=S<3?d:v===null?v=Object.getOwnPropertyDescriptor(d,f):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(h,d,f,v);else for(var _=h.length-1;_>=0;_--)(C=h[_])&&(w=(S<3?C(w):S>3?C(d,f,w):C(d,f))||w);return S>3&&w&&Object.defineProperty(d,f,w),w},l=this&&this.__param||function(h,d){return function(f,v){d(f,v,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;let c=o(3656),p=o(4725),m=o(8460),y=o(844),g=o(2585),u=s.Viewport=class extends y.Disposable{constructor(h,d,f,v,C,S,w,_){super(),this._viewportElement=h,this._scrollArea=d,this._bufferService=f,this._optionsService=v,this._charSizeService=C,this._renderService=S,this._coreBrowserService=w,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,c.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(_.colors),this.register(_.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(h){this._viewportElement.style.backgroundColor=h.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(h){if(h)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let d=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==d&&(this._lastRecordedBufferHeight=d,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let h=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==h&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=h),this._refreshAnimationFrame=null}syncScrollArea(h=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(h)}_handleScroll(h){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let d=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let h=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(h*(this._smoothScrollState.target-this._smoothScrollState.origin)),h<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(h,d){let f=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(d<0&&this._viewportElement.scrollTop!==0||d>0&&f<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)}handleWheel(h){let d=this._getPixelsScrolled(h);return d!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+d:this._smoothScrollState.target+=d,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=d,this._bubbleScroll(h,d))}scrollLines(h){if(h!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let d=h*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+d,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!1})}_getPixelsScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let d=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?d*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._currentRowHeight*this._bufferService.rows),d}getBufferElements(h,d){let f,v="",C=[],S=d??this._bufferService.buffer.lines.length,w=this._bufferService.buffer.lines;for(let _=h;_<S;_++){let b=w.get(_);if(!b)continue;let A=w.get(_+1)?.isWrapped;if(v+=b.translateToString(!A),!A||_===w.length-1){let T=document.createElement("div");T.textContent=v,C.push(T),v.length>0&&(f=T),v=""}}return{bufferElements:C,cursorElement:f}}getLinesScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let d=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(d/=this._currentRowHeight+0,this._wheelPartialScroll+=d,d=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._bufferService.rows),d}_applyScrollModifier(h,d){let f=this._optionsService.rawOptions.fastScrollModifier;return f==="alt"&&d.altKey||f==="ctrl"&&d.ctrlKey||f==="shift"&&d.shiftKey?h*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:h*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(h){this._lastTouchY=h.touches[0].pageY}handleTouchMove(h){let d=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,d!==0&&(this._viewportElement.scrollTop+=d,this._bubbleScroll(h,d))}};s.Viewport=u=a([l(2,g.IBufferService),l(3,g.IOptionsService),l(4,p.ICharSizeService),l(5,p.IRenderService),l(6,p.ICoreBrowserService),l(7,p.IThemeService)],u)},3107:function(i,s,o){var a=this&&this.__decorate||function(g,u,h,d){var f,v=arguments.length,C=v<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(g,u,h,d);else for(var S=g.length-1;S>=0;S--)(f=g[S])&&(C=(v<3?f(C):v>3?f(u,h,C):f(u,h))||C);return v>3&&C&&Object.defineProperty(u,h,C),C},l=this&&this.__param||function(g,u){return function(h,d){u(h,d,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;let c=o(4725),p=o(844),m=o(2585),y=s.BufferDecorationRenderer=class extends p.Disposable{constructor(g,u,h,d,f){super(),this._screenElement=g,this._bufferService=u,this._coreBrowserService=h,this._decorationService=d,this._renderService=f,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(v=>this._removeDecoration(v))),this.register((0,p.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){let u=this._coreBrowserService.mainDocument.createElement("div");u.classList.add("xterm-decoration"),u.classList.toggle("xterm-decoration-top-layer",g?.options?.layer==="top"),u.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,u.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",u.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",u.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let h=g.options.x??0;return h&&h>this._bufferService.cols&&(u.style.display="none"),this._refreshXPosition(g,u),u}_refreshStyle(g){let u=g.marker.line-this._bufferService.buffers.active.ydisp;if(u<0||u>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let h=this._decorationElements.get(g);h||(h=this._createElement(g),g.element=h,this._decorationElements.set(g,h),this._container.appendChild(h),g.onDispose(()=>{this._decorationElements.delete(g),h.remove()})),h.style.top=u*this._renderService.dimensions.css.cell.height+"px",h.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(h)}}_refreshXPosition(g,u=g.element){if(!u)return;let h=g.options.x??0;(g.options.anchor||"left")==="right"?u.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":u.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){this._decorationElements.get(g)?.remove(),this._decorationElements.delete(g),g.dispose()}};s.BufferDecorationRenderer=y=a([l(1,m.IBufferService),l(2,c.ICoreBrowserService),l(3,m.IDecorationService),l(4,c.IRenderService)],y)},5871:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(let a of this._zones)if(a.color===o.options.overviewRulerOptions.color&&a.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,o.marker.line))return;if(this._lineAdjacentToZone(a,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(a,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,a){return a>=o.startBufferLine&&a<=o.endBufferLine}_lineAdjacentToZone(o,a,l){return a>=o.startBufferLine-this._linePadding[l||"full"]&&a<=o.endBufferLine+this._linePadding[l||"full"]}_addLineToZone(o,a){o.startBufferLine=Math.min(o.startBufferLine,a),o.endBufferLine=Math.max(o.endBufferLine,a)}}},5744:function(i,s,o){var a=this&&this.__decorate||function(f,v,C,S){var w,_=arguments.length,b=_<3?v:S===null?S=Object.getOwnPropertyDescriptor(v,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(f,v,C,S);else for(var A=f.length-1;A>=0;A--)(w=f[A])&&(b=(_<3?w(b):_>3?w(v,C,b):w(v,C))||b);return _>3&&b&&Object.defineProperty(v,C,b),b},l=this&&this.__param||function(f,v){return function(C,S){v(C,S,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;let c=o(5871),p=o(4725),m=o(844),y=o(2585),g={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},d=s.OverviewRulerRenderer=class extends m.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(f,v,C,S,w,_,b){super(),this._viewportElement=f,this._screenElement=v,this._bufferService=C,this._decorationService=S,this._renderService=w,this._optionsService=_,this._coreBrowserService=b,this._colorZoneStore=new c.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);let A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let f=Math.floor(this._canvas.width/3),v=Math.ceil(this._canvas.width/3);u.full=this._canvas.width,u.left=f,u.center=v,u.right=f,this._refreshDrawHeightConstants(),h.full=0,h.left=0,h.center=u.left,h.right=u.left+u.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowserService.dpr);let f=this._canvas.height/this._bufferService.buffer.lines.length,v=Math.round(Math.max(Math.min(f,12),6)*this._coreBrowserService.dpr);g.left=v,g.center=v,g.right=v}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let v of this._decorationService.decorations)this._colorZoneStore.addDecoration(v);this._ctx.lineWidth=1;let f=this._colorZoneStore.zones;for(let v of f)v.position!=="full"&&this._renderColorZone(v);for(let v of f)v.position==="full"&&this._renderColorZone(v);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(f){this._ctx.fillStyle=f.color,this._ctx.fillRect(h[f.position||"full"],Math.round((this._canvas.height-1)*(f.startBufferLine/this._bufferService.buffers.active.lines.length)-g[f.position||"full"]/2),u[f.position||"full"],Math.round((this._canvas.height-1)*((f.endBufferLine-f.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[f.position||"full"]))}_queueRefresh(f,v){this._shouldUpdateDimensions=f||this._shouldUpdateDimensions,this._shouldUpdateAnchor=v||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=d=a([l(2,y.IBufferService),l(3,y.IDecorationService),l(4,p.IRenderService),l(5,y.IOptionsService),l(6,p.ICoreBrowserService)],d)},2950:function(i,s,o){var a=this&&this.__decorate||function(g,u,h,d){var f,v=arguments.length,C=v<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(g,u,h,d);else for(var S=g.length-1;S>=0;S--)(f=g[S])&&(C=(v<3?f(C):v>3?f(u,h,C):f(u,h))||C);return v>3&&C&&Object.defineProperty(u,h,C),C},l=this&&this.__param||function(g,u){return function(h,d){u(h,d,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;let c=o(4725),p=o(2585),m=o(2584),y=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,u,h,d,f,v){this._textarea=g,this._compositionView=u,this._bufferService=h,this._optionsService=d,this._coreService=f,this._renderService=v,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){let u={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let h;this._isSendingComposition=!1,u.start+=this._dataAlreadySent.length,h=this._isComposing?this._textarea.value.substring(u.start,u.end):this._textarea.value.substring(u.start),h.length>0&&this._coreService.triggerDataEvent(h,!0)}},0)}else{this._isSendingComposition=!1;let u=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(u,!0)}}_handleAnyTextareaChanges(){let g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let u=this._textarea.value,h=u.replace(g,"");this._dataAlreadySent=h,u.length>g.length?this._coreService.triggerDataEvent(h,!0):u.length<g.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):u.length===g.length&&u!==g&&this._coreService.triggerDataEvent(u,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let u=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.css.cell.height,d=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,f=u*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=f+"px",this._compositionView.style.top=d+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let v=this._compositionView.getBoundingClientRect();this._textarea.style.left=f+"px",this._textarea.style.top=d+"px",this._textarea.style.width=Math.max(v.width,1)+"px",this._textarea.style.height=Math.max(v.height,1)+"px",this._textarea.style.lineHeight=v.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=y=a([l(2,p.IBufferService),l(3,p.IOptionsService),l(4,p.ICoreService),l(5,c.IRenderService)],y)},9806:(i,s)=>{function o(a,l,c){let p=c.getBoundingClientRect(),m=a.getComputedStyle(c),y=parseInt(m.getPropertyValue("padding-left")),g=parseInt(m.getPropertyValue("padding-top"));return[l.clientX-p.left-y,l.clientY-p.top-g]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=o,s.getCoords=function(a,l,c,p,m,y,g,u,h){if(!y)return;let d=o(a,l,c);return d?(d[0]=Math.ceil((d[0]+(h?g/2:0))/g),d[1]=Math.ceil(d[1]/u),d[0]=Math.min(Math.max(d[0],1),p+(h?1:0)),d[1]=Math.min(Math.max(d[1],1),m),d):void 0}},9504:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;let a=o(2584);function l(u,h,d,f){let v=u-c(u,d),C=h-c(h,d),S=Math.abs(v-C)-function(w,_,b){let A=0,T=w-c(w,b),k=_-c(_,b);for(let I=0;I<Math.abs(T-k);I++){let N=p(w,_)==="A"?-1:1;b.buffer.lines.get(T+N*I)?.isWrapped&&A++}return A}(u,h,d);return g(S,y(p(u,h),f))}function c(u,h){let d=0,f=h.buffer.lines.get(u),v=f?.isWrapped;for(;v&&u>=0&&u<h.rows;)d++,f=h.buffer.lines.get(--u),v=f?.isWrapped;return d}function p(u,h){return u>h?"A":"B"}function m(u,h,d,f,v,C){let S=u,w=h,_="";for(;S!==d||w!==f;)S+=v?1:-1,v&&S>C.cols-1?(_+=C.buffer.translateBufferLineToString(w,!1,u,S),S=0,u=0,w++):!v&&S<0&&(_+=C.buffer.translateBufferLineToString(w,!1,0,u+1),S=C.cols-1,u=S,w--);return _+C.buffer.translateBufferLineToString(w,!1,u,S)}function y(u,h){let d=h?"O":"[";return a.C0.ESC+d+u}function g(u,h){u=Math.floor(u);let d="";for(let f=0;f<u;f++)d+=h;return d}s.moveToCellSequence=function(u,h,d,f){let v=d.buffer.x,C=d.buffer.y;if(!d.buffer.hasScrollback)return function(_,b,A,T,k,I){return l(b,T,k,I).length===0?"":g(m(_,b,_,b-c(b,k),!1,k).length,y("D",I))}(v,C,0,h,d,f)+l(C,h,d,f)+function(_,b,A,T,k,I){let N;N=l(b,T,k,I).length>0?T-c(T,k):b;let F=T,j=function(K,V,D,M,x,R){let P;return P=l(D,M,x,R).length>0?M-c(M,x):V,K<D&&P<=M||K>=D&&P<M?"C":"D"}(_,b,A,T,k,I);return g(m(_,N,A,F,j==="C",k).length,y(j,I))}(v,C,u,h,d,f);let S;if(C===h)return S=v>u?"D":"C",g(Math.abs(v-u),y(S,f));S=C>h?"D":"C";let w=Math.abs(C-h);return g(function(_,b){return b.cols-_}(C>h?u:v,d)+(w-1)*d.cols+1+((C>h?v:u)-1),y(S,f))}},1296:function(i,s,o){var a=this&&this.__decorate||function(I,N,F,j){var K,V=arguments.length,D=V<3?N:j===null?j=Object.getOwnPropertyDescriptor(N,F):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(I,N,F,j);else for(var M=I.length-1;M>=0;M--)(K=I[M])&&(D=(V<3?K(D):V>3?K(N,F,D):K(N,F))||D);return V>3&&D&&Object.defineProperty(N,F,D),D},l=this&&this.__param||function(I,N){return function(F,j){N(F,j,I)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;let c=o(3787),p=o(2550),m=o(2223),y=o(6171),g=o(6052),u=o(4725),h=o(8055),d=o(8460),f=o(844),v=o(2585),C="xterm-dom-renderer-owner-",S="xterm-rows",w="xterm-fg-",_="xterm-bg-",b="xterm-focus",A="xterm-selection",T=1,k=s.DomRenderer=class extends f.Disposable{constructor(I,N,F,j,K,V,D,M,x,R,P,$,Y){super(),this._terminal=I,this._document=N,this._element=F,this._screenElement=j,this._viewportElement=K,this._helperContainer=V,this._linkifier2=D,this._charSizeService=x,this._optionsService=R,this._bufferService=P,this._coreBrowserService=$,this._themeService=Y,this._terminalClass=T++,this._rowElements=[],this._selectionRenderModel=(0,g.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(A),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,y.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(X=>this._injectCss(X))),this._injectCss(this._themeService.colors),this._rowFactory=M.createInstance(c.DomRendererRowFactory,document),this._element.classList.add(C+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(X=>this._handleLinkHover(X))),this.register(this._linkifier2.onHideLinkUnderline(X=>this._handleLinkLeave(X))),this.register((0,f.toDisposable)(()=>{this._element.classList.remove(C+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let I=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*I,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*I),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/I),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/I),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let F of this._rowElements)F.style.width=`${this.dimensions.css.canvas.width}px`,F.style.height=`${this.dimensions.css.cell.height}px`,F.style.lineHeight=`${this.dimensions.css.cell.height}px`,F.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let N=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=N,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(I){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let N=`${this._terminalSelector} .${S} { color: ${I.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;N+=`${this._terminalSelector} .${S} .xterm-dim { color: ${h.color.multiplyOpacity(I.foreground,.5).css};}`,N+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let F=`blink_underline_${this._terminalClass}`,j=`blink_bar_${this._terminalClass}`,K=`blink_block_${this._terminalClass}`;N+=`@keyframes ${F} { 50% {  border-bottom-style: hidden; }}`,N+=`@keyframes ${j} { 50% {  box-shadow: none; }}`,N+=`@keyframes ${K} { 0% {  background-color: ${I.cursor.css};  color: ${I.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${I.cursor.css}; }}`,N+=`${this._terminalSelector} .${S}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${F} 1s step-end infinite;}${this._terminalSelector} .${S}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${j} 1s step-end infinite;}${this._terminalSelector} .${S}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${K} 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${I.cursor.css}; color: ${I.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${I.cursor.css} !important; color: ${I.cursorAccent.css} !important;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${I.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${I.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${I.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,N+=`${this._terminalSelector} .${A} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${A} div { position: absolute; background-color: ${I.selectionBackgroundOpaque.css};}${this._terminalSelector} .${A} div { position: absolute; background-color: ${I.selectionInactiveBackgroundOpaque.css};}`;for(let[V,D]of I.ansi.entries())N+=`${this._terminalSelector} .${w}${V} { color: ${D.css}; }${this._terminalSelector} .${w}${V}.xterm-dim { color: ${h.color.multiplyOpacity(D,.5).css}; }${this._terminalSelector} .${_}${V} { background-color: ${D.css}; }`;N+=`${this._terminalSelector} .${w}${m.INVERTED_DEFAULT_COLOR} { color: ${h.color.opaque(I.background).css}; }${this._terminalSelector} .${w}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${h.color.multiplyOpacity(h.color.opaque(I.background),.5).css}; }${this._terminalSelector} .${_}${m.INVERTED_DEFAULT_COLOR} { background-color: ${I.foreground.css}; }`,this._themeStyleElement.textContent=N}_setDefaultSpacing(){let I=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${I}px`,this._rowFactory.defaultSpacing=I}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(I,N){for(let F=this._rowElements.length;F<=N;F++){let j=this._document.createElement("div");this._rowContainer.appendChild(j),this._rowElements.push(j)}for(;this._rowElements.length>N;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(I,N){this._refreshRowElements(I,N),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(b),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(b),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(I,N,F){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(I,N,F),this.renderRows(0,this._bufferService.rows-1),!I||!N)return;this._selectionRenderModel.update(this._terminal,I,N,F);let j=this._selectionRenderModel.viewportStartRow,K=this._selectionRenderModel.viewportEndRow,V=this._selectionRenderModel.viewportCappedStartRow,D=this._selectionRenderModel.viewportCappedEndRow;if(V>=this._bufferService.rows||D<0)return;let M=this._document.createDocumentFragment();if(F){let x=I[0]>N[0];M.appendChild(this._createSelectionElement(V,x?N[0]:I[0],x?I[0]:N[0],D-V+1))}else{let x=j===V?I[0]:0,R=V===K?N[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(V,x,R));let P=D-V-1;if(M.appendChild(this._createSelectionElement(V+1,0,this._bufferService.cols,P)),V!==D){let $=K===D?N[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(D,0,$))}}this._selectionContainer.appendChild(M)}_createSelectionElement(I,N,F,j=1){let K=this._document.createElement("div"),V=N*this.dimensions.css.cell.width,D=this.dimensions.css.cell.width*(F-N);return V+D>this.dimensions.css.canvas.width&&(D=this.dimensions.css.canvas.width-V),K.style.height=j*this.dimensions.css.cell.height+"px",K.style.top=I*this.dimensions.css.cell.height+"px",K.style.left=`${V}px`,K.style.width=`${D}px`,K}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let I of this._rowElements)I.replaceChildren()}renderRows(I,N){let F=this._bufferService.buffer,j=F.ybase+F.y,K=Math.min(F.x,this._bufferService.cols-1),V=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,M=this._optionsService.rawOptions.cursorInactiveStyle;for(let x=I;x<=N;x++){let R=x+F.ydisp,P=this._rowElements[x],$=F.lines.get(R);if(!P||!$)break;P.replaceChildren(...this._rowFactory.createRow($,R,R===j,D,M,K,V,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${C}${this._terminalClass}`}_handleLinkHover(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!0)}_handleLinkLeave(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!1)}_setCellUnderline(I,N,F,j,K,V){F<0&&(I=0),j<0&&(N=0);let D=this._bufferService.rows-1;F=Math.max(Math.min(F,D),0),j=Math.max(Math.min(j,D),0),K=Math.min(K,this._bufferService.cols);let M=this._bufferService.buffer,x=M.ybase+M.y,R=Math.min(M.x,K-1),P=this._optionsService.rawOptions.cursorBlink,$=this._optionsService.rawOptions.cursorStyle,Y=this._optionsService.rawOptions.cursorInactiveStyle;for(let X=F;X<=j;++X){let O=X+M.ydisp,E=this._rowElements[X],L=M.lines.get(O);if(!E||!L)break;E.replaceChildren(...this._rowFactory.createRow(L,O,O===x,$,Y,R,P,this.dimensions.css.cell.width,this._widthCache,V?X===F?I:0:-1,V?(X===j?N:K)-1:-1))}}};s.DomRenderer=k=a([l(7,v.IInstantiationService),l(8,u.ICharSizeService),l(9,v.IOptionsService),l(10,v.IBufferService),l(11,u.ICoreBrowserService),l(12,u.IThemeService)],k)},3787:function(i,s,o){var a=this&&this.__decorate||function(S,w,_,b){var A,T=arguments.length,k=T<3?w:b===null?b=Object.getOwnPropertyDescriptor(w,_):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(S,w,_,b);else for(var I=S.length-1;I>=0;I--)(A=S[I])&&(k=(T<3?A(k):T>3?A(w,_,k):A(w,_))||k);return T>3&&k&&Object.defineProperty(w,_,k),k},l=this&&this.__param||function(S,w){return function(_,b){w(_,b,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;let c=o(2223),p=o(643),m=o(511),y=o(2585),g=o(8055),u=o(4725),h=o(4269),d=o(6171),f=o(3734),v=s.DomRendererRowFactory=class{constructor(S,w,_,b,A,T,k){this._document=S,this._characterJoinerService=w,this._optionsService=_,this._coreBrowserService=b,this._coreService=A,this._decorationService=T,this._themeService=k,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,w,_){this._selectionStart=S,this._selectionEnd=w,this._columnSelectMode=_}createRow(S,w,_,b,A,T,k,I,N,F,j){let K=[],V=this._characterJoinerService.getJoinedCharacters(w),D=this._themeService.colors,M,x=S.getNoBgTrimmedLength();_&&x<T+1&&(x=T+1);let R=0,P="",$=0,Y=0,X=0,O=!1,E=0,L=!1,B=0,q=[],W=F!==-1&&j!==-1;for(let me=0;me<x;me++){S.loadCell(me,this._workCell);let xe=this._workCell.getWidth();if(xe===0)continue;let Ae=!1,Qe=me,ne=this._workCell;if(V.length>0&&me===V[0][0]){Ae=!0;let Ie=V.shift();ne=new h.JoinedCellData(this._workCell,S.translateToString(!0,Ie[0],Ie[1]),Ie[1]-Ie[0]),Qe=Ie[1]-1,xe=ne.getWidth()}let ti=this._isCellInSelection(me,w),va=_&&me===T,_a=W&&me>=F&&me<=j,ya=!1;this._decorationService.forEachDecorationAtCell(me,w,void 0,Ie=>{ya=!0});let as=ne.getChars()||p.WHITESPACE_CELL_CHAR;if(as===" "&&(ne.isUnderline()||ne.isOverline())&&(as="\xA0"),B=xe*I-N.get(as,ne.isBold(),ne.isItalic()),M){if(R&&(ti&&L||!ti&&!L&&ne.bg===$)&&(ti&&L&&D.selectionForeground||ne.fg===Y)&&ne.extended.ext===X&&_a===O&&B===E&&!va&&!Ae&&!ya){ne.isInvisible()?P+=p.WHITESPACE_CELL_CHAR:P+=as,R++;continue}R&&(M.textContent=P),M=this._document.createElement("span"),R=0,P=""}else M=this._document.createElement("span");if($=ne.bg,Y=ne.fg,X=ne.extended.ext,O=_a,E=B,L=ti,Ae&&T>=me&&T<=Qe&&(T=me),!this._coreService.isCursorHidden&&va&&this._coreService.isCursorInitialized){if(q.push("xterm-cursor"),this._coreBrowserService.isFocused)k&&q.push("xterm-cursor-blink"),q.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(A)switch(A){case"outline":q.push("xterm-cursor-outline");break;case"block":q.push("xterm-cursor-block");break;case"bar":q.push("xterm-cursor-bar");break;case"underline":q.push("xterm-cursor-underline")}}if(ne.isBold()&&q.push("xterm-bold"),ne.isItalic()&&q.push("xterm-italic"),ne.isDim()&&q.push("xterm-dim"),P=ne.isInvisible()?p.WHITESPACE_CELL_CHAR:ne.getChars()||p.WHITESPACE_CELL_CHAR,ne.isUnderline()&&(q.push(`xterm-underline-${ne.extended.underlineStyle}`),P===" "&&(P="\xA0"),!ne.isUnderlineColorDefault()))if(ne.isUnderlineColorRGB())M.style.textDecorationColor=`rgb(${f.AttributeData.toColorRGB(ne.getUnderlineColor()).join(",")})`;else{let Ie=ne.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ne.isBold()&&Ie<8&&(Ie+=8),M.style.textDecorationColor=D.ansi[Ie].css}ne.isOverline()&&(q.push("xterm-overline"),P===" "&&(P="\xA0")),ne.isStrikethrough()&&q.push("xterm-strikethrough"),_a&&(M.style.textDecoration="underline");let ut=ne.getFgColor(),ni=ne.getFgColorMode(),Rt=ne.getBgColor(),ri=ne.getBgColorMode(),Ca=!!ne.isInverse();if(Ca){let Ie=ut;ut=Rt,Rt=Ie;let Qm=ni;ni=ri,ri=Qm}let an,cs,cn,ii=!1;switch(this._decorationService.forEachDecorationAtCell(me,w,void 0,Ie=>{Ie.options.layer!=="top"&&ii||(Ie.backgroundColorRGB&&(ri=50331648,Rt=Ie.backgroundColorRGB.rgba>>8&16777215,an=Ie.backgroundColorRGB),Ie.foregroundColorRGB&&(ni=50331648,ut=Ie.foregroundColorRGB.rgba>>8&16777215,cs=Ie.foregroundColorRGB),ii=Ie.options.layer==="top")}),!ii&&ti&&(an=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,Rt=an.rgba>>8&16777215,ri=50331648,ii=!0,D.selectionForeground&&(ni=50331648,ut=D.selectionForeground.rgba>>8&16777215,cs=D.selectionForeground)),ii&&q.push("xterm-decoration-top"),ri){case 16777216:case 33554432:cn=D.ansi[Rt],q.push(`xterm-bg-${Rt}`);break;case 50331648:cn=g.channels.toColor(Rt>>16,Rt>>8&255,255&Rt),this._addStyle(M,`background-color:#${C((Rt>>>0).toString(16),"0",6)}`);break;default:Ca?(cn=D.foreground,q.push(`xterm-bg-${c.INVERTED_DEFAULT_COLOR}`)):cn=D.background}switch(an||ne.isDim()&&(an=g.color.multiplyOpacity(cn,.5)),ni){case 16777216:case 33554432:ne.isBold()&&ut<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ut+=8),this._applyMinimumContrast(M,cn,D.ansi[ut],ne,an,void 0)||q.push(`xterm-fg-${ut}`);break;case 50331648:let Ie=g.channels.toColor(ut>>16&255,ut>>8&255,255&ut);this._applyMinimumContrast(M,cn,Ie,ne,an,cs)||this._addStyle(M,`color:#${C(ut.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(M,cn,D.foreground,ne,an,cs)||Ca&&q.push(`xterm-fg-${c.INVERTED_DEFAULT_COLOR}`)}q.length&&(M.className=q.join(" "),q.length=0),va||Ae||ya?M.textContent=P:R++,B!==this.defaultSpacing&&(M.style.letterSpacing=`${B}px`),K.push(M),me=Qe}return M&&R&&(M.textContent=P),K}_applyMinimumContrast(S,w,_,b,A,T){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,d.treatGlyphAsBackgroundColor)(b.getCode()))return!1;let k=this._getContrastCache(b),I;if(A||T||(I=k.getColor(w.rgba,_.rgba)),I===void 0){let N=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);I=g.color.ensureContrastRatio(A||w,T||_,N),k.setColor((A||w).rgba,(T||_).rgba,I??null)}return!!I&&(this._addStyle(S,`color:${I.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,w){S.setAttribute("style",`${S.getAttribute("style")||""}${w};`)}_isCellInSelection(S,w){let _=this._selectionStart,b=this._selectionEnd;return!(!_||!b)&&(this._columnSelectMode?_[0]<=b[0]?S>=_[0]&&w>=_[1]&&S<b[0]&&w<=b[1]:S<_[0]&&w>=_[1]&&S>=b[0]&&w<=b[1]:w>_[1]&&w<b[1]||_[1]===b[1]&&w===_[1]&&S>=_[0]&&S<b[0]||_[1]<b[1]&&w===b[1]&&S<b[0]||_[1]<b[1]&&w===_[1]&&S>=_[0])}};function C(S,w,_){for(;S.length<_;)S=w+S;return S}s.DomRendererRowFactory=v=a([l(1,u.ICharacterJoinerService),l(2,y.IOptionsService),l(3,u.ICoreBrowserService),l(4,y.ICoreService),l(5,y.IDecorationService),l(6,u.IThemeService)],v)},2550:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(o,a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let l=o.createElement("span");l.classList.add("xterm-char-measure-element");let c=o.createElement("span");c.classList.add("xterm-char-measure-element"),c.style.fontWeight="bold";let p=o.createElement("span");p.classList.add("xterm-char-measure-element"),p.style.fontStyle="italic";let m=o.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontWeight="bold",m.style.fontStyle="italic",this._measureElements=[l,c,p,m],this._container.appendChild(l),this._container.appendChild(c),this._container.appendChild(p),this._container.appendChild(m),a.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,a,l,c){o===this._font&&a===this._fontSize&&l===this._weight&&c===this._weightBold||(this._font=o,this._fontSize=a,this._weight=l,this._weightBold=c,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${l}`,this._measureElements[1].style.fontWeight=`${c}`,this._measureElements[2].style.fontWeight=`${l}`,this._measureElements[3].style.fontWeight=`${c}`,this.clear())}get(o,a,l){let c=0;if(!a&&!l&&o.length===1&&(c=o.charCodeAt(0))<256){if(this._flat[c]!==-9999)return this._flat[c];let y=this._measure(o,0);return y>0&&(this._flat[c]=y),y}let p=o;a&&(p+="B"),l&&(p+="I");let m=this._holey.get(p);if(m===void 0){let y=0;a&&(y|=1),l&&(y|=2),m=this._measure(o,y),m>0&&this._holey.set(p,m)}return m}_measure(o,a){let l=this._measureElements[a];return l.textContent=o.repeat(32),l.offsetWidth/32}}},2223:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;let a=o(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},6171:(i,s)=>{function o(l){return 57508<=l&&l<=57558}function a(l){return l>=128512&&l<=128591||l>=127744&&l<=128511||l>=128640&&l<=128767||l>=9728&&l<=9983||l>=9984&&l<=10175||l>=65024&&l<=65039||l>=129280&&l<=129535||l>=127462&&l<=127487}Object.defineProperty(s,"__esModule",{value:!0}),s.computeNextVariantOffset=s.createRenderDimensions=s.treatGlyphAsBackgroundColor=s.allowRescaling=s.isEmoji=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},s.isPowerlineGlyph=o,s.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},s.isEmoji=a,s.allowRescaling=function(l,c,p,m){return c===1&&p>Math.ceil(1.5*m)&&l!==void 0&&l>255&&!a(l)&&!o(l)&&!function(y){return 57344<=y&&y<=63743}(l)},s.treatGlyphAsBackgroundColor=function(l){return o(l)||function(c){return 9472<=c&&c<=9631}(l)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},s.computeNextVariantOffset=function(l,c,p=0){return(l-(2*Math.round(c)-p))%(2*Math.round(c))}},6052:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(l,c,p,m=!1){if(this.selectionStart=c,this.selectionEnd=p,!c||!p||c[0]===p[0]&&c[1]===p[1])return void this.clear();let y=l.buffers.active.ydisp,g=c[1]-y,u=p[1]-y,h=Math.max(g,0),d=Math.min(u,l.rows-1);h>=l.rows||d<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=g,this.viewportEndRow=u,this.viewportCappedStartRow=h,this.viewportCappedEndRow=d,this.startCol=c[0],this.endCol=p[0])}isCellSelected(l,c,p){return!!this.hasSelection&&(p-=l.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?c>=this.startCol&&p>=this.viewportCappedStartRow&&c<this.endCol&&p<=this.viewportCappedEndRow:c<this.startCol&&p>=this.viewportCappedStartRow&&c>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&c>=this.startCol&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&c>=this.startCol)}}s.createSelectionRenderModel=function(){return new o}},456:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let o=this.selectionStart,a=this.selectionEnd;return!(!o||!a)&&(o[1]>a[1]||o[1]===a[1]&&o[0]>a[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(i,s,o){var a=this&&this.__decorate||function(d,f,v,C){var S,w=arguments.length,_=w<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,v):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(d,f,v,C);else for(var b=d.length-1;b>=0;b--)(S=d[b])&&(_=(w<3?S(_):w>3?S(f,v,_):S(f,v))||_);return w>3&&_&&Object.defineProperty(f,v,_),_},l=this&&this.__param||function(d,f){return function(v,C){f(v,C,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;let c=o(2585),p=o(8460),m=o(844),y=s.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(d,f,v){super(),this._optionsService=v,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new h(this._optionsService))}catch{this._measureStrategy=this.register(new u(d,f,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let d=this._measureStrategy.measure();d.width===this.width&&d.height===this.height||(this.width=d.width,this.height=d.height,this._onCharSizeChange.fire())}};s.CharSizeService=y=a([l(2,c.IOptionsService)],y);class g extends m.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(f,v){f!==void 0&&f>0&&v!==void 0&&v>0&&(this._result.width=f,this._result.height=v)}}class u extends g{constructor(f,v,C){super(),this._document=f,this._parentElement=v,this._optionsService=C,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class h extends g{constructor(f){super(),this._optionsService=f,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let v=this._ctx.measureText("W");if(!("width"in v&&"fontBoundingBoxAscent"in v&&"fontBoundingBoxDescent"in v))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let f=this._ctx.measureText("W");return this._validateAndSet(f.width,f.fontBoundingBoxAscent+f.fontBoundingBoxDescent),this._result}}},4269:function(i,s,o){var a=this&&this.__decorate||function(h,d,f,v){var C,S=arguments.length,w=S<3?d:v===null?v=Object.getOwnPropertyDescriptor(d,f):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(h,d,f,v);else for(var _=h.length-1;_>=0;_--)(C=h[_])&&(w=(S<3?C(w):S>3?C(d,f,w):C(d,f))||w);return S>3&&w&&Object.defineProperty(d,f,w),w},l=this&&this.__param||function(h,d){return function(f,v){d(f,v,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;let c=o(3734),p=o(643),m=o(511),y=o(2585);class g extends c.AttributeData{constructor(d,f,v){super(),this.content=0,this.combinedData="",this.fg=d.fg,this.bg=d.bg,this.combinedData=f,this._width=v}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(d){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=g;let u=s.CharacterJoinerService=class $m{constructor(d){this._bufferService=d,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(d){let f={id:this._nextCharacterJoinerId++,handler:d};return this._characterJoiners.push(f),f.id}deregister(d){for(let f=0;f<this._characterJoiners.length;f++)if(this._characterJoiners[f].id===d)return this._characterJoiners.splice(f,1),!0;return!1}getJoinedCharacters(d){if(this._characterJoiners.length===0)return[];let f=this._bufferService.buffer.lines.get(d);if(!f||f.length===0)return[];let v=[],C=f.translateToString(!0),S=0,w=0,_=0,b=f.getFg(0),A=f.getBg(0);for(let T=0;T<f.getTrimmedLength();T++)if(f.loadCell(T,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==A){if(T-S>1){let k=this._getJoinedRanges(C,_,w,f,S);for(let I=0;I<k.length;I++)v.push(k[I])}S=T,_=w,b=this._workCell.fg,A=this._workCell.bg}w+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let T=this._getJoinedRanges(C,_,w,f,S);for(let k=0;k<T.length;k++)v.push(T[k])}return v}_getJoinedRanges(d,f,v,C,S){let w=d.substring(f,v),_=[];try{_=this._characterJoiners[0].handler(w)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{let A=this._characterJoiners[b].handler(w);for(let T=0;T<A.length;T++)$m._mergeRanges(_,A[T])}catch(A){console.error(A)}return this._stringRangesToCellRanges(_,C,S),_}_stringRangesToCellRanges(d,f,v){let C=0,S=!1,w=0,_=d[C];if(_){for(let b=v;b<this._bufferService.cols;b++){let A=f.getWidth(b),T=f.getString(b).length||p.WHITESPACE_CELL_CHAR.length;if(A!==0){if(!S&&_[0]<=w&&(_[0]=b,S=!0),_[1]<=w){if(_[1]=b,_=d[++C],!_)break;_[0]<=w?(_[0]=b,S=!0):S=!1}w+=T}}_&&(_[1]=this._bufferService.cols)}}static _mergeRanges(d,f){let v=!1;for(let C=0;C<d.length;C++){let S=d[C];if(v){if(f[1]<=S[0])return d[C-1][1]=f[1],d;if(f[1]<=S[1])return d[C-1][1]=Math.max(f[1],S[1]),d.splice(C,1),d;d.splice(C,1),C--}else{if(f[1]<=S[0])return d.splice(C,0,f),d;if(f[1]<=S[1])return S[0]=Math.min(f[0],S[0]),d;f[0]<S[1]&&(S[0]=Math.min(f[0],S[0]),v=!0)}}return v?d[d.length-1][1]=f[1]:d.push(f),d}};s.CharacterJoinerService=u=a([l(0,y.IBufferService)],u)},5114:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;let a=o(844),l=o(8460),c=o(3656);class p extends a.Disposable{constructor(g,u,h){super(),this._textarea=g,this._window=u,this.mainDocument=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new m(this._window),this._onDprChange=this.register(new l.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new l.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(d=>this._screenDprMonitor.setWindow(d))),this.register((0,l.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(g){this._window!==g&&(this._window=g,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}s.CoreBrowserService=p;class m extends a.Disposable{constructor(g){super(),this._parentWindow=g,this._windowResizeListener=this.register(new a.MutableDisposable),this._onDprChange=this.register(new l.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,a.toDisposable)(()=>this.clearListener()))}setWindow(g){this._parentWindow=g,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,c.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkProviderService=void 0;let a=o(844);class l extends a.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,a.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(p){return this.linkProviders.push(p),{dispose:()=>{let m=this.linkProviders.indexOf(p);m!==-1&&this.linkProviders.splice(m,1)}}}}s.LinkProviderService=l},8934:function(i,s,o){var a=this&&this.__decorate||function(y,g,u,h){var d,f=arguments.length,v=f<3?g:h===null?h=Object.getOwnPropertyDescriptor(g,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(y,g,u,h);else for(var C=y.length-1;C>=0;C--)(d=y[C])&&(v=(f<3?d(v):f>3?d(g,u,v):d(g,u))||v);return f>3&&v&&Object.defineProperty(g,u,v),v},l=this&&this.__param||function(y,g){return function(u,h){g(u,h,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;let c=o(4725),p=o(9806),m=s.MouseService=class{constructor(y,g){this._renderService=y,this._charSizeService=g}getCoords(y,g,u,h,d){return(0,p.getCoords)(window,y,g,u,h,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,d)}getMouseReportCoords(y,g){let u=(0,p.getCoordsRelativeToElement)(window,y,g);if(this._charSizeService.hasValidSize)return u[0]=Math.min(Math.max(u[0],0),this._renderService.dimensions.css.canvas.width-1),u[1]=Math.min(Math.max(u[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(u[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(u[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(u[0]),y:Math.floor(u[1])}}};s.MouseService=m=a([l(0,c.IRenderService),l(1,c.ICharSizeService)],m)},3230:function(i,s,o){var a=this&&this.__decorate||function(d,f,v,C){var S,w=arguments.length,_=w<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,v):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(d,f,v,C);else for(var b=d.length-1;b>=0;b--)(S=d[b])&&(_=(w<3?S(_):w>3?S(f,v,_):S(f,v))||_);return w>3&&_&&Object.defineProperty(f,v,_),_},l=this&&this.__param||function(d,f){return function(v,C){f(v,C,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;let c=o(6193),p=o(4725),m=o(8460),y=o(844),g=o(7226),u=o(2585),h=s.RenderService=class extends y.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(d,f,v,C,S,w,_,b){super(),this._rowCount=d,this._charSizeService=C,this._renderer=this.register(new y.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._observerDisposable=this.register(new y.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new m.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new m.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new m.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new m.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new c.RenderDebouncer((A,T)=>this._renderRows(A,T),_),this.register(this._renderDebouncer),this.register(_.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(v.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(S.onDecorationRegistered(()=>this._fullRefresh())),this.register(S.onDecorationRemoved(()=>this._fullRefresh())),this.register(v.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(v.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register(b.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(_.window,f),this.register(_.onWindowChange(A=>this._registerIntersectionObserver(A,f)))}_registerIntersectionObserver(d,f){if("IntersectionObserver"in d){let v=new d.IntersectionObserver(C=>this._handleIntersectionChange(C[C.length-1]),{threshold:0});v.observe(f),this._observerDisposable.value=(0,y.toDisposable)(()=>v.disconnect())}}_handleIntersectionChange(d){this._isPaused=d.isIntersecting===void 0?d.intersectionRatio===0:!d.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(d,f,v=!1){this._isPaused?this._needsFullRefresh=!0:(v||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(d,f,this._rowCount))}_renderRows(d,f){this._renderer.value&&(d=Math.min(d,this._rowCount-1),f=Math.min(f,this._rowCount-1),this._renderer.value.renderRows(d,f),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:d,end:f}),this._onRender.fire({start:d,end:f}),this._isNextRenderRedrawOnly=!0)}resize(d,f){this._rowCount=f,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(d){this._renderer.value=d,this._renderer.value&&(this._renderer.value.onRequestRedraw(f=>this.refreshRows(f.start,f.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(d){return this._renderDebouncer.addRefreshCallback(d)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(d,f){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(d,f)):this._renderer.value.handleResize(d,f),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(d,f,v){this._selectionState.start=d,this._selectionState.end=f,this._selectionState.columnSelectMode=v,this._renderer.value?.handleSelectionChanged(d,f,v)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};s.RenderService=h=a([l(2,u.IOptionsService),l(3,p.ICharSizeService),l(4,u.IDecorationService),l(5,u.IBufferService),l(6,p.ICoreBrowserService),l(7,p.IThemeService)],h)},9312:function(i,s,o){var a=this&&this.__decorate||function(_,b,A,T){var k,I=arguments.length,N=I<3?b:T===null?T=Object.getOwnPropertyDescriptor(b,A):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(_,b,A,T);else for(var F=_.length-1;F>=0;F--)(k=_[F])&&(N=(I<3?k(N):I>3?k(b,A,N):k(b,A))||N);return I>3&&N&&Object.defineProperty(b,A,N),N},l=this&&this.__param||function(_,b){return function(A,T){b(A,T,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;let c=o(9806),p=o(9504),m=o(456),y=o(4725),g=o(8460),u=o(844),h=o(6114),d=o(4841),f=o(511),v=o(2585),C="\xA0",S=new RegExp(C,"g"),w=s.SelectionService=class extends u.Disposable{constructor(_,b,A,T,k,I,N,F,j){super(),this._element=_,this._screenElement=b,this._linkifier=A,this._bufferService=T,this._coreService=k,this._mouseService=I,this._optionsService=N,this._renderService=F,this._coreBrowserService=j,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new f.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=K=>this._handleMouseMove(K),this._mouseUpListener=K=>this._handleMouseUp(K),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(K=>this._handleTrim(K)),this.register(this._bufferService.buffers.onBufferActivate(K=>this._handleBufferActivate(K))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,u.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let _=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!_||!b||_[0]===b[0]&&_[1]===b[1])}get selectionText(){let _=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!_||!b)return"";let A=this._bufferService.buffer,T=[];if(this._activeSelectionMode===3){if(_[0]===b[0])return"";let k=_[0]<b[0]?_[0]:b[0],I=_[0]<b[0]?b[0]:_[0];for(let N=_[1];N<=b[1];N++){let F=A.translateBufferLineToString(N,!0,k,I);T.push(F)}}else{let k=_[1]===b[1]?b[0]:void 0;T.push(A.translateBufferLineToString(_[1],!0,_[0],k));for(let I=_[1]+1;I<=b[1]-1;I++){let N=A.lines.get(I),F=A.translateBufferLineToString(I,!0);N?.isWrapped?T[T.length-1]+=F:T.push(F)}if(_[1]!==b[1]){let I=A.lines.get(b[1]),N=A.translateBufferLineToString(b[1],!0,0,b[0]);I&&I.isWrapped?T[T.length-1]+=N:T.push(N)}}return T.map(k=>k.replace(S," ")).join(h.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(_){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),h.isLinux&&_&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(_){let b=this._getMouseBufferCoords(_),A=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!!(A&&T&&b)&&this._areCoordsInSelection(b,A,T)}isCellInSelection(_,b){let A=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!(!A||!T)&&this._areCoordsInSelection([_,b],A,T)}_areCoordsInSelection(_,b,A){return _[1]>b[1]&&_[1]<A[1]||b[1]===A[1]&&_[1]===b[1]&&_[0]>=b[0]&&_[0]<A[0]||b[1]<A[1]&&_[1]===A[1]&&_[0]<A[0]||b[1]<A[1]&&_[1]===b[1]&&_[0]>=b[0]}_selectWordAtCursor(_,b){let A=this._linkifier.currentLink?.link?.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,d.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let T=this._getMouseBufferCoords(_);return!!T&&(this._selectWordAt(T,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(_,b){this._model.clearSelection(),_=Math.max(_,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,_],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(_){this._model.handleTrim(_)&&this.refresh()}_getMouseBufferCoords(_){let b=this._mouseService.getCoords(_,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(_){let b=(0,c.getCoordsRelativeToElement)(this._coreBrowserService.window,_,this._screenElement)[1],A=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=A?0:(b>A&&(b-=A),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(_){return h.isMac?_.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:_.shiftKey}handleMouseDown(_){if(this._mouseDownTimeStamp=_.timeStamp,(_.button!==2||!this.hasSelection)&&_.button===0){if(!this._enabled){if(!this.shouldForceSelection(_))return;_.stopPropagation()}_.preventDefault(),this._dragScrollAmount=0,this._enabled&&_.shiftKey?this._handleIncrementalClick(_):_.detail===1?this._handleSingleClick(_):_.detail===2?this._handleDoubleClick(_):_.detail===3&&this._handleTripleClick(_),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(_){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(_))}_handleSingleClick(_){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(_)?3:0,this._model.selectionStart=this._getMouseBufferCoords(_),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(_){this._selectWordAtCursor(_,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(_){let b=this._getMouseBufferCoords(_);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(_){return _.altKey&&!(h.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(_){if(_.stopImmediatePropagation(),!this._model.selectionStart)return;let b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(_),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(_),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let A=this._bufferService.buffer;if(this._model.selectionEnd[1]<A.lines.length){let T=A.lines.get(this._model.selectionEnd[1]);T&&T.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let _=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(_.ydisp+this._bufferService.rows,_.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=_.ydisp),this.refresh()}}_handleMouseUp(_){let b=_.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&_.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let A=this._mouseService.getCoords(_,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(A&&A[0]!==void 0&&A[1]!==void 0){let T=(0,p.moveToCellSequence)(A[0]-1,A[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(T,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let _=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,A=!(!_||!b||_[0]===b[0]&&_[1]===b[1]);A?_&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&_[0]===this._oldSelectionStart[0]&&_[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(_,b,A)):this._oldHasSelection&&this._fireOnSelectionChange(_,b,A)}_fireOnSelectionChange(_,b,A){this._oldSelectionStart=_,this._oldSelectionEnd=b,this._oldHasSelection=A,this._onSelectionChange.fire()}_handleBufferActivate(_){this.clearSelection(),this._trimListener.dispose(),this._trimListener=_.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(_,b){let A=b;for(let T=0;b>=T;T++){let k=_.loadCell(T,this._workCell).getChars().length;this._workCell.getWidth()===0?A--:k>1&&b!==T&&(A+=k-1)}return A}setSelection(_,b,A){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[_,b],this._model.selectionStartLength=A,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(_){this._isClickInSelection(_)||(this._selectWordAtCursor(_,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(_,b,A=!0,T=!0){if(_[0]>=this._bufferService.cols)return;let k=this._bufferService.buffer,I=k.lines.get(_[1]);if(!I)return;let N=k.translateBufferLineToString(_[1],!1),F=this._convertViewportColToCharacterIndex(I,_[0]),j=F,K=_[0]-F,V=0,D=0,M=0,x=0;if(N.charAt(F)===" "){for(;F>0&&N.charAt(F-1)===" ";)F--;for(;j<N.length&&N.charAt(j+1)===" ";)j++}else{let $=_[0],Y=_[0];I.getWidth($)===0&&(V++,$--),I.getWidth(Y)===2&&(D++,Y++);let X=I.getString(Y).length;for(X>1&&(x+=X-1,j+=X-1);$>0&&F>0&&!this._isCharWordSeparator(I.loadCell($-1,this._workCell));){I.loadCell($-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(V++,$--):O>1&&(M+=O-1,F-=O-1),F--,$--}for(;Y<I.length&&j+1<N.length&&!this._isCharWordSeparator(I.loadCell(Y+1,this._workCell));){I.loadCell(Y+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,Y++):O>1&&(x+=O-1,j+=O-1),j++,Y++}}j++;let R=F+K-V+M,P=Math.min(this._bufferService.cols,j-F+V+D-M-x);if(b||N.slice(F,j).trim()!==""){if(A&&R===0&&I.getCodePoint(0)!==32){let $=k.lines.get(_[1]-1);if($&&I.isWrapped&&$.getCodePoint(this._bufferService.cols-1)!==32){let Y=this._getWordAt([this._bufferService.cols-1,_[1]-1],!1,!0,!1);if(Y){let X=this._bufferService.cols-Y.start;R-=X,P+=X}}}if(T&&R+P===this._bufferService.cols&&I.getCodePoint(this._bufferService.cols-1)!==32){let $=k.lines.get(_[1]+1);if($?.isWrapped&&$.getCodePoint(0)!==32){let Y=this._getWordAt([0,_[1]+1],!1,!1,!0);Y&&(P+=Y.length)}}return{start:R,length:P}}}_selectWordAt(_,b){let A=this._getWordAt(_,b);if(A){for(;A.start<0;)A.start+=this._bufferService.cols,_[1]--;this._model.selectionStart=[A.start,_[1]],this._model.selectionStartLength=A.length}}_selectToWordAt(_){let b=this._getWordAt(_,!0);if(b){let A=_[1];for(;b.start<0;)b.start+=this._bufferService.cols,A--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,A++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,A]}}_isCharWordSeparator(_){return _.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(_.getChars())>=0}_selectLineAt(_){let b=this._bufferService.buffer.getWrappedRangeForLine(_),A={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,d.getRangeLength)(A,this._bufferService.cols)}};s.SelectionService=w=a([l(3,v.IBufferService),l(4,v.ICoreService),l(5,y.IMouseService),l(6,v.IOptionsService),l(7,y.IRenderService),l(8,y.ICoreBrowserService)],w)},4725:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ILinkProviderService=s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;let a=o(8343);s.ICharSizeService=(0,a.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,a.createDecorator)("CoreBrowserService"),s.IMouseService=(0,a.createDecorator)("MouseService"),s.IRenderService=(0,a.createDecorator)("RenderService"),s.ISelectionService=(0,a.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,a.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,a.createDecorator)("ThemeService"),s.ILinkProviderService=(0,a.createDecorator)("LinkProviderService")},6731:function(i,s,o){var a=this&&this.__decorate||function(w,_,b,A){var T,k=arguments.length,I=k<3?_:A===null?A=Object.getOwnPropertyDescriptor(_,b):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(w,_,b,A);else for(var N=w.length-1;N>=0;N--)(T=w[N])&&(I=(k<3?T(I):k>3?T(_,b,I):T(_,b))||I);return k>3&&I&&Object.defineProperty(_,b,I),I},l=this&&this.__param||function(w,_){return function(b,A){_(b,A,w)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;let c=o(7239),p=o(8055),m=o(8460),y=o(844),g=o(2585),u=p.css.toColor("#ffffff"),h=p.css.toColor("#000000"),d=p.css.toColor("#ffffff"),f=p.css.toColor("#000000"),v={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let w=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],_=[0,95,135,175,215,255];for(let b=0;b<216;b++){let A=_[b/36%6|0],T=_[b/6%6|0],k=_[b%6];w.push({css:p.channels.toCss(A,T,k),rgba:p.channels.toRgba(A,T,k)})}for(let b=0;b<24;b++){let A=8+10*b;w.push({css:p.channels.toCss(A,A,A),rgba:p.channels.toRgba(A,A,A)})}return w})());let C=s.ThemeService=class extends y.Disposable{get colors(){return this._colors}constructor(w){super(),this._optionsService=w,this._contrastCache=new c.ColorContrastCache,this._halfContrastCache=new c.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:u,background:h,cursor:d,cursorAccent:f,selectionForeground:void 0,selectionBackgroundTransparent:v,selectionBackgroundOpaque:p.color.blend(h,v),selectionInactiveBackgroundTransparent:v,selectionInactiveBackgroundOpaque:p.color.blend(h,v),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(w={}){let _=this._colors;if(_.foreground=S(w.foreground,u),_.background=S(w.background,h),_.cursor=S(w.cursor,d),_.cursorAccent=S(w.cursorAccent,f),_.selectionBackgroundTransparent=S(w.selectionBackground,v),_.selectionBackgroundOpaque=p.color.blend(_.background,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundTransparent=S(w.selectionInactiveBackground,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundOpaque=p.color.blend(_.background,_.selectionInactiveBackgroundTransparent),_.selectionForeground=w.selectionForeground?S(w.selectionForeground,p.NULL_COLOR):void 0,_.selectionForeground===p.NULL_COLOR&&(_.selectionForeground=void 0),p.color.isOpaque(_.selectionBackgroundTransparent)&&(_.selectionBackgroundTransparent=p.color.opacity(_.selectionBackgroundTransparent,.3)),p.color.isOpaque(_.selectionInactiveBackgroundTransparent)&&(_.selectionInactiveBackgroundTransparent=p.color.opacity(_.selectionInactiveBackgroundTransparent,.3)),_.ansi=s.DEFAULT_ANSI_COLORS.slice(),_.ansi[0]=S(w.black,s.DEFAULT_ANSI_COLORS[0]),_.ansi[1]=S(w.red,s.DEFAULT_ANSI_COLORS[1]),_.ansi[2]=S(w.green,s.DEFAULT_ANSI_COLORS[2]),_.ansi[3]=S(w.yellow,s.DEFAULT_ANSI_COLORS[3]),_.ansi[4]=S(w.blue,s.DEFAULT_ANSI_COLORS[4]),_.ansi[5]=S(w.magenta,s.DEFAULT_ANSI_COLORS[5]),_.ansi[6]=S(w.cyan,s.DEFAULT_ANSI_COLORS[6]),_.ansi[7]=S(w.white,s.DEFAULT_ANSI_COLORS[7]),_.ansi[8]=S(w.brightBlack,s.DEFAULT_ANSI_COLORS[8]),_.ansi[9]=S(w.brightRed,s.DEFAULT_ANSI_COLORS[9]),_.ansi[10]=S(w.brightGreen,s.DEFAULT_ANSI_COLORS[10]),_.ansi[11]=S(w.brightYellow,s.DEFAULT_ANSI_COLORS[11]),_.ansi[12]=S(w.brightBlue,s.DEFAULT_ANSI_COLORS[12]),_.ansi[13]=S(w.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),_.ansi[14]=S(w.brightCyan,s.DEFAULT_ANSI_COLORS[14]),_.ansi[15]=S(w.brightWhite,s.DEFAULT_ANSI_COLORS[15]),w.extendedAnsi){let b=Math.min(_.ansi.length-16,w.extendedAnsi.length);for(let A=0;A<b;A++)_.ansi[A+16]=S(w.extendedAnsi[A],s.DEFAULT_ANSI_COLORS[A+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(w){this._restoreColor(w),this._onChangeColors.fire(this.colors)}_restoreColor(w){if(w!==void 0)switch(w){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[w]=this._restoreColors.ansi[w]}else for(let _=0;_<this._restoreColors.ansi.length;++_)this._colors.ansi[_]=this._restoreColors.ansi[_]}modifyColors(w){w(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(w,_){if(w!==void 0)try{return p.css.toColor(w)}catch{}return _}s.ThemeService=C=a([l(0,g.IOptionsService)],C)},6349:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;let a=o(8460),l=o(844);class c extends l.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new a.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new a.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new a.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;let y=new Array(m);for(let g=0;g<Math.min(m,this.length);g++)y[g]=this._array[this._getCyclicIndex(g)];this._array=y,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let y=this._length;y<m;y++)this._array[y]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,y){this._array[this._getCyclicIndex(m)]=y}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,y,...g){if(y){for(let u=m;u<this._length-y;u++)this._array[this._getCyclicIndex(u)]=this._array[this._getCyclicIndex(u+y)];this._length-=y,this.onDeleteEmitter.fire({index:m,amount:y})}for(let u=this._length-1;u>=m;u--)this._array[this._getCyclicIndex(u+g.length)]=this._array[this._getCyclicIndex(u)];for(let u=0;u<g.length;u++)this._array[this._getCyclicIndex(m+u)]=g[u];if(g.length&&this.onInsertEmitter.fire({index:m,amount:g.length}),this._length+g.length>this._maxLength){let u=this._length+g.length-this._maxLength;this._startIndex+=u,this._length=this._maxLength,this.onTrimEmitter.fire(u)}else this._length+=g.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,y,g){if(!(y<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let h=y-1;h>=0;h--)this.set(m+h+g,this.get(m+h));let u=m+y+g-this._length;if(u>0)for(this._length+=u;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let u=0;u<y;u++)this.set(m+u+g,this.get(m+u))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}s.CircularList=c},1439:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function o(a,l=5){if(typeof a!="object")return a;let c=Array.isArray(a)?[]:{};for(let p in a)c[p]=l<=1?a[p]:a[p]&&o(a[p],l-1);return c}},8055:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let o=0,a=0,l=0,c=0;var p,m,y,g,u;function h(f){let v=f.toString(16);return v.length<2?"0"+v:v}function d(f,v){return f<v?(v+.05)/(f+.05):(f+.05)/(v+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(f){f.toCss=function(v,C,S,w){return w!==void 0?`#${h(v)}${h(C)}${h(S)}${h(w)}`:`#${h(v)}${h(C)}${h(S)}`},f.toRgba=function(v,C,S,w=255){return(v<<24|C<<16|S<<8|w)>>>0},f.toColor=function(v,C,S,w){return{css:f.toCss(v,C,S,w),rgba:f.toRgba(v,C,S,w)}}}(p||(s.channels=p={})),function(f){function v(C,S){return c=Math.round(255*S),[o,a,l]=u.toChannels(C.rgba),{css:p.toCss(o,a,l,c),rgba:p.toRgba(o,a,l,c)}}f.blend=function(C,S){if(c=(255&S.rgba)/255,c===1)return{css:S.css,rgba:S.rgba};let w=S.rgba>>24&255,_=S.rgba>>16&255,b=S.rgba>>8&255,A=C.rgba>>24&255,T=C.rgba>>16&255,k=C.rgba>>8&255;return o=A+Math.round((w-A)*c),a=T+Math.round((_-T)*c),l=k+Math.round((b-k)*c),{css:p.toCss(o,a,l),rgba:p.toRgba(o,a,l)}},f.isOpaque=function(C){return(255&C.rgba)==255},f.ensureContrastRatio=function(C,S,w){let _=u.ensureContrastRatio(C.rgba,S.rgba,w);if(_)return p.toColor(_>>24&255,_>>16&255,_>>8&255)},f.opaque=function(C){let S=(255|C.rgba)>>>0;return[o,a,l]=u.toChannels(S),{css:p.toCss(o,a,l),rgba:S}},f.opacity=v,f.multiplyOpacity=function(C,S){return c=255&C.rgba,v(C,c*S/255)},f.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}}(m||(s.color=m={})),function(f){let v,C;try{let S=document.createElement("canvas");S.width=1,S.height=1;let w=S.getContext("2d",{willReadFrequently:!0});w&&(v=w,v.globalCompositeOperation="copy",C=v.createLinearGradient(0,0,1,1))}catch{}f.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return o=parseInt(S.slice(1,2).repeat(2),16),a=parseInt(S.slice(2,3).repeat(2),16),l=parseInt(S.slice(3,4).repeat(2),16),p.toColor(o,a,l);case 5:return o=parseInt(S.slice(1,2).repeat(2),16),a=parseInt(S.slice(2,3).repeat(2),16),l=parseInt(S.slice(3,4).repeat(2),16),c=parseInt(S.slice(4,5).repeat(2),16),p.toColor(o,a,l,c);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}let w=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return o=parseInt(w[1]),a=parseInt(w[2]),l=parseInt(w[3]),c=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),p.toColor(o,a,l,c);if(!v||!C)throw new Error("css.toColor: Unsupported css format");if(v.fillStyle=C,v.fillStyle=S,typeof v.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(v.fillRect(0,0,1,1),[o,a,l,c]=v.getImageData(0,0,1,1).data,c!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,a,l,c),css:S}}}(y||(s.css=y={})),function(f){function v(C,S,w){let _=C/255,b=S/255,A=w/255;return .2126*(_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}f.relativeLuminance=function(C){return v(C>>16&255,C>>8&255,255&C)},f.relativeLuminance2=v}(g||(s.rgb=g={})),function(f){function v(S,w,_){let b=S>>24&255,A=S>>16&255,T=S>>8&255,k=w>>24&255,I=w>>16&255,N=w>>8&255,F=d(g.relativeLuminance2(k,I,N),g.relativeLuminance2(b,A,T));for(;F<_&&(k>0||I>0||N>0);)k-=Math.max(0,Math.ceil(.1*k)),I-=Math.max(0,Math.ceil(.1*I)),N-=Math.max(0,Math.ceil(.1*N)),F=d(g.relativeLuminance2(k,I,N),g.relativeLuminance2(b,A,T));return(k<<24|I<<16|N<<8|255)>>>0}function C(S,w,_){let b=S>>24&255,A=S>>16&255,T=S>>8&255,k=w>>24&255,I=w>>16&255,N=w>>8&255,F=d(g.relativeLuminance2(k,I,N),g.relativeLuminance2(b,A,T));for(;F<_&&(k<255||I<255||N<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),I=Math.min(255,I+Math.ceil(.1*(255-I))),N=Math.min(255,N+Math.ceil(.1*(255-N))),F=d(g.relativeLuminance2(k,I,N),g.relativeLuminance2(b,A,T));return(k<<24|I<<16|N<<8|255)>>>0}f.blend=function(S,w){if(c=(255&w)/255,c===1)return w;let _=w>>24&255,b=w>>16&255,A=w>>8&255,T=S>>24&255,k=S>>16&255,I=S>>8&255;return o=T+Math.round((_-T)*c),a=k+Math.round((b-k)*c),l=I+Math.round((A-I)*c),p.toRgba(o,a,l)},f.ensureContrastRatio=function(S,w,_){let b=g.relativeLuminance(S>>8),A=g.relativeLuminance(w>>8);if(d(b,A)<_){if(A<b){let I=v(S,w,_),N=d(b,g.relativeLuminance(I>>8));if(N<_){let F=C(S,w,_);return N>d(b,g.relativeLuminance(F>>8))?I:F}return I}let T=C(S,w,_),k=d(b,g.relativeLuminance(T>>8));if(k<_){let I=v(S,w,_);return k>d(b,g.relativeLuminance(I>>8))?T:I}return T}},f.reduceLuminance=v,f.increaseLuminance=C,f.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]}}(u||(s.rgba=u={})),s.toPaddedHex=h,s.contrastRatio=d},8969:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;let a=o(844),l=o(2585),c=o(4348),p=o(7866),m=o(744),y=o(7302),g=o(6975),u=o(8460),h=o(1753),d=o(1480),f=o(7994),v=o(9282),C=o(5435),S=o(5981),w=o(2660),_=!1;class b extends a.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new u.EventEmitter),this._onScroll.event(T=>{this._onScrollApi?.fire(T.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(T){for(let k in T)this.optionsService.options[k]=T[k]}constructor(T){super(),this._windowsWrappingHeuristics=this.register(new a.MutableDisposable),this._onBinary=this.register(new u.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new u.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new u.EventEmitter),this._instantiationService=new c.InstantiationService,this.optionsService=this.register(new y.OptionsService(T)),this._instantiationService.setService(l.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(l.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(l.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(l.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(l.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(d.UnicodeService)),this._instantiationService.setService(l.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(f.CharsetService),this._instantiationService.setService(l.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(w.OscLinkService),this._instantiationService.setService(l.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,u.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,u.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,u.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,u.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((k,I)=>this._inputHandler.parse(k,I))),this.register((0,u.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(T,k){this._writeBuffer.write(T,k)}writeSync(T,k){this._logService.logLevel<=l.LogLevelEnum.WARN&&!_&&(this._logService.warn("writeSync is unreliable and will be removed soon."),_=!0),this._writeBuffer.writeSync(T,k)}input(T,k=!0){this.coreService.triggerDataEvent(T,k)}resize(T,k){isNaN(T)||isNaN(k)||(T=Math.max(T,m.MINIMUM_COLS),k=Math.max(k,m.MINIMUM_ROWS),this._bufferService.resize(T,k))}scroll(T,k=!1){this._bufferService.scroll(T,k)}scrollLines(T,k,I){this._bufferService.scrollLines(T,k,I)}scrollPages(T){this.scrollLines(T*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(T){let k=T-this._bufferService.buffer.ydisp;k!==0&&this.scrollLines(k)}registerEscHandler(T,k){return this._inputHandler.registerEscHandler(T,k)}registerDcsHandler(T,k){return this._inputHandler.registerDcsHandler(T,k)}registerCsiHandler(T,k){return this._inputHandler.registerCsiHandler(T,k)}registerOscHandler(T,k){return this._inputHandler.registerOscHandler(T,k)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let T=!1,k=this.optionsService.rawOptions.windowsPty;k&&k.buildNumber!==void 0&&k.buildNumber!==void 0?T=k.backend==="conpty"&&k.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(T=!0),T?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let T=[];T.push(this.onLineFeed(v.updateWindowsModeWrappedState.bind(null,this._bufferService))),T.push(this.registerCsiHandler({final:"H"},()=>((0,v.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,a.toDisposable)(()=>{for(let k of T)k.dispose()})}}}s.CoreTerminal=b},8460:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.runAndSubscribe=s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===o)return void this._listeners.splice(a,1)}}})),this._event}fire(o,a){let l=[];for(let c=0;c<this._listeners.length;c++)l.push(this._listeners[c]);for(let c=0;c<l.length;c++)l[c].call(void 0,o,a)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(o,a){return o(l=>a.fire(l))},s.runAndSubscribe=function(o,a){return a(void 0),o(l=>a(l))}},5435:function(i,s,o){var a=this&&this.__decorate||function(V,D,M,x){var R,P=arguments.length,$=P<3?D:x===null?x=Object.getOwnPropertyDescriptor(D,M):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(V,D,M,x);else for(var Y=V.length-1;Y>=0;Y--)(R=V[Y])&&($=(P<3?R($):P>3?R(D,M,$):R(D,M))||$);return P>3&&$&&Object.defineProperty(D,M,$),$},l=this&&this.__param||function(V,D){return function(M,x){D(M,x,V)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;let c=o(2584),p=o(7116),m=o(2015),y=o(844),g=o(482),u=o(8437),h=o(8460),d=o(643),f=o(511),v=o(3734),C=o(2585),S=o(1480),w=o(6242),_=o(6351),b=o(5941),A={"(":0,")":1,"*":2,"+":3,"-":1,".":2},T=131072;function k(V,D){if(V>24)return D.setWinLines||!1;switch(V){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var I;(function(V){V[V.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",V[V.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(I||(s.WindowsOptionsReportType=I={}));let N=0;class F extends y.Disposable{getAttrData(){return this._curAttrData}constructor(D,M,x,R,P,$,Y,X,O=new m.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=M,this._coreService=x,this._logService=R,this._optionsService=P,this._oscLinkService=$,this._coreMouseService=Y,this._unicodeService=X,this._parser=O,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new f.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new j(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._parser.setCsiHandlerFallback((E,L)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(E),params:L.toArray()})}),this._parser.setEscHandlerFallback(E=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(E)})}),this._parser.setExecuteHandlerFallback(E=>{this._logService.debug("Unknown EXECUTE code: ",{code:E})}),this._parser.setOscHandlerFallback((E,L,B)=>{this._logService.debug("Unknown OSC code: ",{identifier:E,action:L,data:B})}),this._parser.setDcsHandlerFallback((E,L,B)=>{L==="HOOK"&&(B=B.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(E),action:L,payload:B})}),this._parser.setPrintHandler((E,L,B)=>this.print(E,L,B)),this._parser.registerCsiHandler({final:"@"},E=>this.insertChars(E)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},E=>this.scrollLeft(E)),this._parser.registerCsiHandler({final:"A"},E=>this.cursorUp(E)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},E=>this.scrollRight(E)),this._parser.registerCsiHandler({final:"B"},E=>this.cursorDown(E)),this._parser.registerCsiHandler({final:"C"},E=>this.cursorForward(E)),this._parser.registerCsiHandler({final:"D"},E=>this.cursorBackward(E)),this._parser.registerCsiHandler({final:"E"},E=>this.cursorNextLine(E)),this._parser.registerCsiHandler({final:"F"},E=>this.cursorPrecedingLine(E)),this._parser.registerCsiHandler({final:"G"},E=>this.cursorCharAbsolute(E)),this._parser.registerCsiHandler({final:"H"},E=>this.cursorPosition(E)),this._parser.registerCsiHandler({final:"I"},E=>this.cursorForwardTab(E)),this._parser.registerCsiHandler({final:"J"},E=>this.eraseInDisplay(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},E=>this.eraseInDisplay(E,!0)),this._parser.registerCsiHandler({final:"K"},E=>this.eraseInLine(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},E=>this.eraseInLine(E,!0)),this._parser.registerCsiHandler({final:"L"},E=>this.insertLines(E)),this._parser.registerCsiHandler({final:"M"},E=>this.deleteLines(E)),this._parser.registerCsiHandler({final:"P"},E=>this.deleteChars(E)),this._parser.registerCsiHandler({final:"S"},E=>this.scrollUp(E)),this._parser.registerCsiHandler({final:"T"},E=>this.scrollDown(E)),this._parser.registerCsiHandler({final:"X"},E=>this.eraseChars(E)),this._parser.registerCsiHandler({final:"Z"},E=>this.cursorBackwardTab(E)),this._parser.registerCsiHandler({final:"`"},E=>this.charPosAbsolute(E)),this._parser.registerCsiHandler({final:"a"},E=>this.hPositionRelative(E)),this._parser.registerCsiHandler({final:"b"},E=>this.repeatPrecedingCharacter(E)),this._parser.registerCsiHandler({final:"c"},E=>this.sendDeviceAttributesPrimary(E)),this._parser.registerCsiHandler({prefix:">",final:"c"},E=>this.sendDeviceAttributesSecondary(E)),this._parser.registerCsiHandler({final:"d"},E=>this.linePosAbsolute(E)),this._parser.registerCsiHandler({final:"e"},E=>this.vPositionRelative(E)),this._parser.registerCsiHandler({final:"f"},E=>this.hVPosition(E)),this._parser.registerCsiHandler({final:"g"},E=>this.tabClear(E)),this._parser.registerCsiHandler({final:"h"},E=>this.setMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"h"},E=>this.setModePrivate(E)),this._parser.registerCsiHandler({final:"l"},E=>this.resetMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"l"},E=>this.resetModePrivate(E)),this._parser.registerCsiHandler({final:"m"},E=>this.charAttributes(E)),this._parser.registerCsiHandler({final:"n"},E=>this.deviceStatus(E)),this._parser.registerCsiHandler({prefix:"?",final:"n"},E=>this.deviceStatusPrivate(E)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},E=>this.softReset(E)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},E=>this.setCursorStyle(E)),this._parser.registerCsiHandler({final:"r"},E=>this.setScrollRegion(E)),this._parser.registerCsiHandler({final:"s"},E=>this.saveCursor(E)),this._parser.registerCsiHandler({final:"t"},E=>this.windowOptions(E)),this._parser.registerCsiHandler({final:"u"},E=>this.restoreCursor(E)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},E=>this.insertColumns(E)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},E=>this.deleteColumns(E)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},E=>this.selectProtected(E)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},E=>this.requestMode(E,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},E=>this.requestMode(E,!1)),this._parser.setExecuteHandler(c.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(c.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(c.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(c.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(c.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(c.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(c.C1.IND,()=>this.index()),this._parser.setExecuteHandler(c.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(c.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new w.OscHandler(E=>(this.setTitle(E),this.setIconName(E),!0))),this._parser.registerOscHandler(1,new w.OscHandler(E=>this.setIconName(E))),this._parser.registerOscHandler(2,new w.OscHandler(E=>this.setTitle(E))),this._parser.registerOscHandler(4,new w.OscHandler(E=>this.setOrReportIndexedColor(E))),this._parser.registerOscHandler(8,new w.OscHandler(E=>this.setHyperlink(E))),this._parser.registerOscHandler(10,new w.OscHandler(E=>this.setOrReportFgColor(E))),this._parser.registerOscHandler(11,new w.OscHandler(E=>this.setOrReportBgColor(E))),this._parser.registerOscHandler(12,new w.OscHandler(E=>this.setOrReportCursorColor(E))),this._parser.registerOscHandler(104,new w.OscHandler(E=>this.restoreIndexedColor(E))),this._parser.registerOscHandler(110,new w.OscHandler(E=>this.restoreFgColor(E))),this._parser.registerOscHandler(111,new w.OscHandler(E=>this.restoreBgColor(E))),this._parser.registerOscHandler(112,new w.OscHandler(E=>this.restoreCursorColor(E))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let E in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:E},()=>this.selectCharset("("+E)),this._parser.registerEscHandler({intermediates:")",final:E},()=>this.selectCharset(")"+E)),this._parser.registerEscHandler({intermediates:"*",final:E},()=>this.selectCharset("*"+E)),this._parser.registerEscHandler({intermediates:"+",final:E},()=>this.selectCharset("+"+E)),this._parser.registerEscHandler({intermediates:"-",final:E},()=>this.selectCharset("-"+E)),this._parser.registerEscHandler({intermediates:".",final:E},()=>this.selectCharset("."+E)),this._parser.registerEscHandler({intermediates:"/",final:E},()=>this.selectCharset("/"+E));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(E=>(this._logService.error("Parsing error: ",E),E)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new _.DcsHandler((E,L)=>this.requestStatusString(E,L)))}_preserveStack(D,M,x,R){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=M,this._parseStack.decodedLength=x,this._parseStack.position=R}_logSlowResolvingAsync(D){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([D,new Promise((M,x)=>setTimeout(()=>x("#SLOW_TIMEOUT"),5e3))]).catch(M=>{if(M!=="#SLOW_TIMEOUT")throw M;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,M){let x,R=this._activeBuffer.x,P=this._activeBuffer.y,$=0,Y=this._parseStack.paused;if(Y){if(x=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,M))return this._logSlowResolvingAsync(x),x;R=this._parseStack.cursorStartX,P=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>T&&($=this._parseStack.position+T)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,E=>String.fromCharCode(E)).join("")}"`),typeof D=="string"?D.split("").map(E=>E.charCodeAt(0)):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<T&&(this._parseBuffer=new Uint32Array(Math.min(D.length,T))),Y||this._dirtyRowTracker.clearRange(),D.length>T)for(let E=$;E<D.length;E+=T){let L=E+T<D.length?E+T:D.length,B=typeof D=="string"?this._stringDecoder.decode(D.substring(E,L),this._parseBuffer):this._utf8Decoder.decode(D.subarray(E,L),this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,B))return this._preserveStack(R,P,B,E),this._logSlowResolvingAsync(x),x}else if(!Y){let E=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,E))return this._preserveStack(R,P,E,0),this._logSlowResolvingAsync(x),x}this._activeBuffer.x===R&&this._activeBuffer.y===P||this._onCursorMove.fire();let X=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),O=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);O<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(O,this._bufferService.rows-1),Math.min(X,this._bufferService.rows-1))}print(D,M,x){let R,P,$=this._charsetService.charset,Y=this._optionsService.rawOptions.screenReaderMode,X=this._bufferService.cols,O=this._coreService.decPrivateModes.wraparound,E=this._coreService.modes.insertMode,L=this._curAttrData,B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&x-M>0&&B.getWidth(this._activeBuffer.x-1)===2&&B.setCellFromCodepoint(this._activeBuffer.x-1,0,1,L);let q=this._parser.precedingJoinState;for(let W=M;W<x;++W){if(R=D[W],R<127&&$){let Qe=$[String.fromCharCode(R)];Qe&&(R=Qe.charCodeAt(0))}let me=this._unicodeService.charProperties(R,q);P=S.UnicodeService.extractWidth(me);let xe=S.UnicodeService.extractShouldJoin(me),Ae=xe?S.UnicodeService.extractWidth(q):0;if(q=me,Y&&this._onA11yChar.fire((0,g.stringFromCodePoint)(R)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+P-Ae>X){if(O){let Qe=B,ne=this._activeBuffer.x-Ae;for(this._activeBuffer.x=Ae,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),Ae>0&&B instanceof u.BufferLine&&B.copyCellsFrom(Qe,ne,0,Ae,!1);ne<X;)Qe.setCellFromCodepoint(ne++,0,1,L)}else if(this._activeBuffer.x=X-1,P===2)continue}if(xe&&this._activeBuffer.x){let Qe=B.getWidth(this._activeBuffer.x-1)?1:2;B.addCodepointToCell(this._activeBuffer.x-Qe,R,P);for(let ne=P-Ae;--ne>=0;)B.setCellFromCodepoint(this._activeBuffer.x++,0,0,L)}else if(E&&(B.insertCells(this._activeBuffer.x,P-Ae,this._activeBuffer.getNullCell(L)),B.getWidth(X-1)===2&&B.setCellFromCodepoint(X-1,d.NULL_CELL_CODE,d.NULL_CELL_WIDTH,L)),B.setCellFromCodepoint(this._activeBuffer.x++,R,P,L),P>0)for(;--P;)B.setCellFromCodepoint(this._activeBuffer.x++,0,0,L)}this._parser.precedingJoinState=q,this._activeBuffer.x<X&&x-M>0&&B.getWidth(this._activeBuffer.x)===0&&!B.hasContent(this._activeBuffer.x)&&B.setCellFromCodepoint(this._activeBuffer.x,0,1,L),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,M){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,M):this._parser.registerCsiHandler(D,x=>!k(x.params[0],this._optionsService.rawOptions.windowOptions)||M(x))}registerDcsHandler(D,M){return this._parser.registerDcsHandler(D,new _.DcsHandler(M))}registerEscHandler(D,M){return this._parser.registerEscHandler(D,M)}registerOscHandler(D,M){return this._parser.registerOscHandler(D,new w.OscHandler(M))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);D.hasWidth(this._activeBuffer.x)&&!D.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,M){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+M):(this._activeBuffer.x=D,this._activeBuffer.y=M),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,M){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+M)}cursorUp(D){let M=this._activeBuffer.y-this._activeBuffer.scrollTop;return M>=0?this._moveCursor(0,-Math.min(M,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){let M=this._activeBuffer.scrollBottom-this._activeBuffer.y;return M>=0?this._moveCursor(0,Math.min(M,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){let M=D.params[0];return M===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:M===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=D.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=D.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){let M=D.params[0];return M===1&&(this._curAttrData.bg|=536870912),M!==2&&M!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,M,x,R=!1,P=!1){let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);$.replaceCells(M,x,this._activeBuffer.getNullCell(this._eraseAttrData()),P),R&&($.isWrapped=!1)}_resetBufferLine(D,M=!1){let x=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);x&&(x.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),M),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),x.isWrapped=!1)}eraseInDisplay(D,M=!1){let x;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);x<this._bufferService.rows;x++)this._resetBufferLine(x,M);this._dirtyRowTracker.markDirty(x);break;case 1:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x,0,this._activeBuffer.x+1,!0,M),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(x+1).isWrapped=!1);x--;)this._resetBufferLine(x,M);this._dirtyRowTracker.markDirty(0);break;case 2:for(x=this._bufferService.rows,this._dirtyRowTracker.markDirty(x-1);x--;)this._resetBufferLine(x,M);this._dirtyRowTracker.markDirty(0);break;case 3:let R=this._activeBuffer.lines.length-this._bufferService.rows;R>0&&(this._activeBuffer.lines.trimStart(R),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-R,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-R,0),this._onScroll.fire(0))}return!0}eraseInLine(D,M=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,M);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,M)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let M=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,R=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-R+1;for(;M--;)this._activeBuffer.lines.splice(P-1,1),this._activeBuffer.lines.splice(x,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let M=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,R;for(R=this._bufferService.rows-1-this._activeBuffer.scrollBottom,R=this._bufferService.rows-1+this._activeBuffer.ybase-R;M--;)this._activeBuffer.lines.splice(x,1),this._activeBuffer.lines.splice(R,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let M=D.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let M=D.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(u.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);R.deleteCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);R.insertCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);R.insertCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);R.deleteCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){let M=this._parser.precedingJoinState;if(!M)return!0;let x=D.params[0]||1,R=S.UnicodeService.extractWidth(M),P=this._activeBuffer.x-R,$=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(P),Y=new Uint32Array($.length*x),X=0;for(let E=0;E<$.length;){let L=$.codePointAt(E)||0;Y[X++]=L,E+=L>65535?2:1}let O=X;for(let E=1;E<x;++E)Y.copyWithin(O,0,X),O+=X;return this.print(Y,0,O),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(c.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(c.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(c.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(c.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(c.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[M]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,M){let x=this._coreService.decPrivateModes,{activeProtocol:R,activeEncoding:P}=this._coreMouseService,$=this._coreService,{buffers:Y,cols:X}=this._bufferService,{active:O,alt:E}=Y,L=this._optionsService.rawOptions,B=xe=>xe?1:2,q=D.params[0];return W=q,me=M?q===2?4:q===4?B($.modes.insertMode):q===12?3:q===20?B(L.convertEol):0:q===1?B(x.applicationCursorKeys):q===3?L.windowOptions.setWinLines?X===80?2:X===132?1:0:0:q===6?B(x.origin):q===7?B(x.wraparound):q===8?3:q===9?B(R==="X10"):q===12?B(L.cursorBlink):q===25?B(!$.isCursorHidden):q===45?B(x.reverseWraparound):q===66?B(x.applicationKeypad):q===67?4:q===1e3?B(R==="VT200"):q===1002?B(R==="DRAG"):q===1003?B(R==="ANY"):q===1004?B(x.sendFocus):q===1005?4:q===1006?B(P==="SGR"):q===1015?4:q===1016?B(P==="SGR_PIXELS"):q===1048?1:q===47||q===1047||q===1049?B(O===E):q===2004?B(x.bracketedPasteMode):0,$.triggerDataEvent(`${c.C0.ESC}[${M?"":"?"}${W};${me}$y`),!0;var W,me}_updateAttrColor(D,M,x,R,P){return M===2?(D|=50331648,D&=-16777216,D|=v.AttributeData.fromColorRGB([x,R,P])):M===5&&(D&=-50331904,D|=33554432|255&x),D}_extractColor(D,M,x){let R=[0,0,-1,0,0,0],P=0,$=0;do{if(R[$+P]=D.params[M+$],D.hasSubParams(M+$)){let Y=D.getSubParams(M+$),X=0;do R[1]===5&&(P=1),R[$+X+1+P]=Y[X];while(++X<Y.length&&X+$+1+P<R.length);break}if(R[1]===5&&$+P>=2||R[1]===2&&$+P>=5)break;R[1]&&(P=1)}while(++$+M<D.length&&$+P<R.length);for(let Y=2;Y<R.length;++Y)R[Y]===-1&&(R[Y]=0);switch(R[0]){case 38:x.fg=this._updateAttrColor(x.fg,R[1],R[3],R[4],R[5]);break;case 48:x.bg=this._updateAttrColor(x.bg,R[1],R[3],R[4],R[5]);break;case 58:x.extended=x.extended.clone(),x.extended.underlineColor=this._updateAttrColor(x.extended.underlineColor,R[1],R[3],R[4],R[5])}return $}_processUnderline(D,M){M.extended=M.extended.clone(),(!~D||D>5)&&(D=1),M.extended.underlineStyle=D,M.fg|=268435456,D===0&&(M.fg&=-268435457),M.updateExtended()}_processSGR0(D){D.fg=u.DEFAULT_ATTR_DATA.fg,D.bg=u.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;let M=D.length,x,R=this._curAttrData;for(let P=0;P<M;P++)x=D.params[P],x>=30&&x<=37?(R.fg&=-50331904,R.fg|=16777216|x-30):x>=40&&x<=47?(R.bg&=-50331904,R.bg|=16777216|x-40):x>=90&&x<=97?(R.fg&=-50331904,R.fg|=16777224|x-90):x>=100&&x<=107?(R.bg&=-50331904,R.bg|=16777224|x-100):x===0?this._processSGR0(R):x===1?R.fg|=134217728:x===3?R.bg|=67108864:x===4?(R.fg|=268435456,this._processUnderline(D.hasSubParams(P)?D.getSubParams(P)[0]:1,R)):x===5?R.fg|=536870912:x===7?R.fg|=67108864:x===8?R.fg|=1073741824:x===9?R.fg|=2147483648:x===2?R.bg|=134217728:x===21?this._processUnderline(2,R):x===22?(R.fg&=-134217729,R.bg&=-134217729):x===23?R.bg&=-67108865:x===24?(R.fg&=-268435457,this._processUnderline(0,R)):x===25?R.fg&=-536870913:x===27?R.fg&=-67108865:x===28?R.fg&=-1073741825:x===29?R.fg&=2147483647:x===39?(R.fg&=-67108864,R.fg|=16777215&u.DEFAULT_ATTR_DATA.fg):x===49?(R.bg&=-67108864,R.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):x===38||x===48||x===58?P+=this._extractColor(D,P,R):x===53?R.bg|=1073741824:x===55?R.bg&=-1073741825:x===59?(R.extended=R.extended.clone(),R.extended.underlineColor=-1,R.updateExtended()):x===100?(R.fg&=-67108864,R.fg|=16777215&u.DEFAULT_ATTR_DATA.fg,R.bg&=-67108864,R.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",x);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${c.C0.ESC}[0n`);break;case 6:let M=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[${M};${x}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){let M=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[?${M};${x}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){let M=D.params[0]||1;switch(M){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let x=M%2==1;return this._optionsService.options.cursorBlink=x,!0}setScrollRegion(D){let M=D.params[0]||1,x;return(D.length<2||(x=D.params[1])>this._bufferService.rows||x===0)&&(x=this._bufferService.rows),x>M&&(this._activeBuffer.scrollTop=M-1,this._activeBuffer.scrollBottom=x-1,this._setCursor(0,0)),!0}windowOptions(D){if(!k(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;let M=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:M!==2&&this._onRequestWindowsOptionsReport.fire(I.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(I.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${c.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:M!==0&&M!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),M!==0&&M!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:M!==0&&M!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),M!==0&&M!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){let M=[],x=D.split(";");for(;x.length>1;){let R=x.shift(),P=x.shift();if(/^\d+$/.exec(R)){let $=parseInt(R);if(K($))if(P==="?")M.push({type:0,index:$});else{let Y=(0,b.parseColor)(P);Y&&M.push({type:1,index:$,color:Y})}}}return M.length&&this._onColor.fire(M),!0}setHyperlink(D){let M=D.split(";");return!(M.length<2)&&(M[1]?this._createHyperlink(M[0],M[1]):!M[0]&&this._finishHyperlink())}_createHyperlink(D,M){this._getCurrentLinkId()&&this._finishHyperlink();let x=D.split(":"),R,P=x.findIndex($=>$.startsWith("id="));return P!==-1&&(R=x[P].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:R,uri:M}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,M){let x=D.split(";");for(let R=0;R<x.length&&!(M>=this._specialColors.length);++R,++M)if(x[R]==="?")this._onColor.fire([{type:0,index:this._specialColors[M]}]);else{let P=(0,b.parseColor)(x[R]);P&&this._onColor.fire([{type:1,index:this._specialColors[M],color:P}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;let M=[],x=D.split(";");for(let R=0;R<x.length;++R)if(/^\d+$/.exec(x[R])){let P=parseInt(x[R]);K(P)&&M.push({type:2,index:P})}return M.length&&this._onColor.fire(M),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(A[D[0]],p.CHARSETS[D[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){let D=new f.CellData;D.content=4194373,D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let M=0;M<this._bufferService.rows;++M){let x=this._activeBuffer.ybase+this._activeBuffer.y+M,R=this._activeBuffer.lines.get(x);R&&(R.fill(D),R.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,M){let x=this._bufferService.buffer,R=this._optionsService.rawOptions;return(P=>(this._coreService.triggerDataEvent(`${c.C0.ESC}${P}${c.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${x.scrollTop+1};${x.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[R.cursorStyle]-(R.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,M){this._dirtyRowTracker.markRangeDirty(D,M)}}s.InputHandler=F;let j=class{constructor(V){this._bufferService=V,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(V){V<this.start?this.start=V:V>this.end&&(this.end=V)}markRangeDirty(V,D){V>D&&(N=V,V=D,D=N),V<this.start&&(this.start=V),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function K(V){return 0<=V&&V<256}j=a([l(0,C.IBufferService)],j)},844:(i,s)=>{function o(a){for(let l of a)l.dispose();a.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let l=this._disposables.indexOf(a);l!==-1&&this._disposables.splice(l,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(a){this._isDisposed||a===this._value||(this._value?.dispose(),this._value=a)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},s.toDisposable=function(a){return{dispose:a}},s.disposeArray=o,s.getDisposeArrayDisposable=function(a){return{dispose:()=>o(a)}}},1505:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(l,c,p){this._data[l]||(this._data[l]={}),this._data[l][c]=p}get(l,c){return this._data[l]?this._data[l][c]:void 0}clear(){this._data={}}}s.TwoKeyMap=o,s.FourKeyMap=class{constructor(){this._data=new o}set(a,l,c,p,m){this._data.get(a,l)||this._data.set(a,l,new o),this._data.get(a,l).set(c,p,m)}get(a,l,c,p){return this._data.get(a,l)?.get(c,p)}clear(){this._data.clear()}}},6114:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof process<"u"&&"title"in process;let o=s.isNode?"node":navigator.userAgent,a=s.isNode?"node":navigator.platform;s.isFirefox=o.includes("Firefox"),s.isLegacyEdge=o.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(o),s.getSafariVersion=function(){if(!s.isSafari)return 0;let l=o.match(/Version\/(\d+)/);return l===null||l.length<2?0:parseInt(l[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),s.isIpad=a==="iPad",s.isIphone=a==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),s.isLinux=a.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(o)},6106:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let o=0;s.SortedList=class{constructor(a){this._getKey=a,this._array=[]}clear(){this._array.length=0}insert(a){this._array.length!==0?(o=this._search(this._getKey(a)),this._array.splice(o,0,a)):this._array.push(a)}delete(a){if(this._array.length===0)return!1;let l=this._getKey(a);if(l===void 0||(o=this._search(l),o===-1)||this._getKey(this._array[o])!==l)return!1;do if(this._array[o]===a)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===l);return!1}*getKeyIterator(a){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===a)}forEachByKey(a,l){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do l(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===a)}values(){return[...this._array].values()}_search(a){let l=0,c=this._array.length-1;for(;c>=l;){let p=l+c>>1,m=this._getKey(this._array[p]);if(m>a)c=p-1;else{if(!(m<a)){for(;p>0&&this._getKey(this._array[p-1])===a;)p--;return p}l=p+1}}return l}}},7226:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;let a=o(6114);class l{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let y=0,g=0,u=m.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(y=Date.now(),this._tasks[this._i]()||this._i++,y=Math.max(1,Date.now()-y),g=Math.max(y,g),h=m.timeRemaining(),1.5*g>h)return u-y<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(u-y))}ms`),void this._start();u=h}this.clear()}}class c extends l{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){let y=Date.now()+m;return{timeRemaining:()=>Math.max(0,y-Date.now())}}}s.PriorityTaskQueue=c,s.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends l{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:c,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;let a=o(643);s.updateWindowsModeWrappedState=function(l){let c=l.buffer.lines.get(l.buffer.ybase+l.buffer.y-1),p=c?.get(l.cols-1),m=l.buffer.lines.get(l.buffer.ybase+l.buffer.y);m&&p&&(m.isWrapped=p[a.CHAR_DATA_CODE_INDEX]!==a.NULL_CELL_CODE&&p[a.CHAR_DATA_CODE_INDEX]!==a.WHITESPACE_CELL_CODE)}},3734:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(c){return[c>>>16&255,c>>>8&255,255&c]}static fromColorRGB(c){return(255&c[0])<<16|(255&c[1])<<8|255&c[2]}clone(){let c=new o;return c.fg=this.fg,c.bg=this.bg,c.extended=this.extended.clone(),c}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}s.AttributeData=o;class a{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(c){this._ext=c}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(c){this._ext&=-469762049,this._ext|=c<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(c){this._ext&=-67108864,this._ext|=67108863&c}get urlId(){return this._urlId}set urlId(c){this._urlId=c}get underlineVariantOffset(){let c=(3758096384&this._ext)>>29;return c<0?4294967288^c:c}set underlineVariantOffset(c){this._ext&=536870911,this._ext|=c<<29&3758096384}constructor(c=0,p=0){this._ext=0,this._urlId=0,this._ext=c,this._urlId=p}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=a},9092:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;let a=o(6349),l=o(7226),c=o(3734),p=o(8437),m=o(4634),y=o(511),g=o(643),u=o(4863),h=o(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(d,f,v){this._hasScrollback=d,this._optionsService=f,this._bufferService=v,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=y.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=y.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new l.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(d){return d?(this._nullCell.fg=d.fg,this._nullCell.bg=d.bg,this._nullCell.extended=d.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new c.ExtendedAttrs),this._nullCell}getWhitespaceCell(d){return d?(this._whitespaceCell.fg=d.fg,this._whitespaceCell.bg=d.bg,this._whitespaceCell.extended=d.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new c.ExtendedAttrs),this._whitespaceCell}getBlankLine(d,f){return new p.BufferLine(this._bufferService.cols,this.getNullCell(d),f)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let d=this.ybase+this.y-this.ydisp;return d>=0&&d<this._rows}_getCorrectBufferLength(d){if(!this._hasScrollback)return d;let f=d+this._optionsService.rawOptions.scrollback;return f>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:f}fillViewportRows(d){if(this.lines.length===0){d===void 0&&(d=p.DEFAULT_ATTR_DATA);let f=this._rows;for(;f--;)this.lines.push(this.getBlankLine(d))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(d,f){let v=this.getNullCell(p.DEFAULT_ATTR_DATA),C=0,S=this._getCorrectBufferLength(f);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<d)for(let _=0;_<this.lines.length;_++)C+=+this.lines.get(_).resize(d,v);let w=0;if(this._rows<f)for(let _=this._rows;_<f;_++)this.lines.length<f+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(d,v)):this.ybase>0&&this.lines.length<=this.ybase+this.y+w+1?(this.ybase--,w++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(d,v)));else for(let _=this._rows;_>f;_--)this.lines.length>f+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){let _=this.lines.length-S;_>0&&(this.lines.trimStart(_),this.ybase=Math.max(this.ybase-_,0),this.ydisp=Math.max(this.ydisp-_,0),this.savedY=Math.max(this.savedY-_,0)),this.lines.maxLength=S}this.x=Math.min(this.x,d-1),this.y=Math.min(this.y,f-1),w&&(this.y+=w),this.savedX=Math.min(this.savedX,d-1),this.scrollTop=0}if(this.scrollBottom=f-1,this._isReflowEnabled&&(this._reflow(d,f),this._cols>d))for(let w=0;w<this.lines.length;w++)C+=+this.lines.get(w).resize(d,v);this._cols=d,this._rows=f,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let d=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,d=!1);let f=0;for(;this._memoryCleanupPosition<this.lines.length;)if(f+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),f>100)return!0;return d}get _isReflowEnabled(){let d=this._optionsService.rawOptions.windowsPty;return d&&d.buildNumber?this._hasScrollback&&d.backend==="conpty"&&d.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(d,f){this._cols!==d&&(d>this._cols?this._reflowLarger(d,f):this._reflowSmaller(d,f))}_reflowLarger(d,f){let v=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,d,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(v.length>0){let C=(0,m.reflowLargerCreateNewLayout)(this.lines,v);(0,m.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(d,f,C.countRemoved)}}_reflowLargerAdjustViewport(d,f,v){let C=this.getNullCell(p.DEFAULT_ATTR_DATA),S=v;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<f&&this.lines.push(new p.BufferLine(d,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-v,0)}_reflowSmaller(d,f){let v=this.getNullCell(p.DEFAULT_ATTR_DATA),C=[],S=0;for(let w=this.lines.length-1;w>=0;w--){let _=this.lines.get(w);if(!_||!_.isWrapped&&_.getTrimmedLength()<=d)continue;let b=[_];for(;_.isWrapped&&w>0;)_=this.lines.get(--w),b.unshift(_);let A=this.ybase+this.y;if(A>=w&&A<w+b.length)continue;let T=b[b.length-1].getTrimmedLength(),k=(0,m.reflowSmallerGetNewLineLengths)(b,this._cols,d),I=k.length-b.length,N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+I):Math.max(0,this.lines.length-this.lines.maxLength+I);let F=[];for(let x=0;x<I;x++){let R=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);F.push(R)}F.length>0&&(C.push({start:w+b.length+S,newLines:F}),S+=F.length),b.push(...F);let j=k.length-1,K=k[j];K===0&&(j--,K=k[j]);let V=b.length-I-1,D=T;for(;V>=0;){let x=Math.min(D,K);if(b[j]===void 0)break;if(b[j].copyCellsFrom(b[V],D-x,K-x,x,!0),K-=x,K===0&&(j--,K=k[j]),D-=x,D===0){V--;let R=Math.max(V,0);D=(0,m.getWrappedLineTrimmedLength)(b,R,this._cols)}}for(let x=0;x<b.length;x++)k[x]<d&&b[x].setCell(k[x],v);let M=I-N;for(;M-- >0;)this.ybase===0?this.y<f-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-f&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+I,this.ybase+f-1)}if(C.length>0){let w=[],_=[];for(let j=0;j<this.lines.length;j++)_.push(this.lines.get(j));let b=this.lines.length,A=b-1,T=0,k=C[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let I=0;for(let j=Math.min(this.lines.maxLength-1,b+S-1);j>=0;j--)if(k&&k.start>A+I){for(let K=k.newLines.length-1;K>=0;K--)this.lines.set(j--,k.newLines[K]);j++,w.push({index:A+1,amount:k.newLines.length}),I+=k.newLines.length,k=C[++T]}else this.lines.set(j,_[A--]);let N=0;for(let j=w.length-1;j>=0;j--)w[j].index+=N,this.lines.onInsertEmitter.fire(w[j]),N+=w[j].amount;let F=Math.max(0,b+S-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(d,f,v=0,C){let S=this.lines.get(d);return S?S.translateToString(f,v,C):""}getWrappedRangeForLine(d){let f=d,v=d;for(;f>0&&this.lines.get(f).isWrapped;)f--;for(;v+1<this.lines.length&&this.lines.get(v+1).isWrapped;)v++;return{first:f,last:v}}setupTabStops(d){for(d!=null?this.tabs[d]||(d=this.prevStop(d)):(this.tabs={},d=0);d<this._cols;d+=this._optionsService.rawOptions.tabStopWidth)this.tabs[d]=!0}prevStop(d){for(d==null&&(d=this.x);!this.tabs[--d]&&d>0;);return d>=this._cols?this._cols-1:d<0?0:d}nextStop(d){for(d==null&&(d=this.x);!this.tabs[++d]&&d<this._cols;);return d>=this._cols?this._cols-1:d<0?0:d}clearMarkers(d){this._isClearing=!0;for(let f=0;f<this.markers.length;f++)this.markers[f].line===d&&(this.markers[f].dispose(),this.markers.splice(f--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let d=0;d<this.markers.length;d++)this.markers[d].dispose(),this.markers.splice(d--,1);this._isClearing=!1}addMarker(d){let f=new u.Marker(d);return this.markers.push(f),f.register(this.lines.onTrim(v=>{f.line-=v,f.line<0&&f.dispose()})),f.register(this.lines.onInsert(v=>{f.line>=v.index&&(f.line+=v.amount)})),f.register(this.lines.onDelete(v=>{f.line>=v.index&&f.line<v.index+v.amount&&f.dispose(),f.line>v.index&&(f.line-=v.amount)})),f.register(f.onDispose(()=>this._removeMarker(f))),f}_removeMarker(d){this._isClearing||this.markers.splice(this.markers.indexOf(d),1)}}},8437:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;let a=o(3734),l=o(511),c=o(643),p=o(482);s.DEFAULT_ATTR_DATA=Object.freeze(new a.AttributeData);let m=0;class y{constructor(u,h,d=!1){this.isWrapped=d,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*u);let f=h||l.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]);for(let v=0;v<u;++v)this.setCell(v,f);this.length=u}get(u){let h=this._data[3*u+0],d=2097151&h;return[this._data[3*u+1],2097152&h?this._combined[u]:d?(0,p.stringFromCodePoint)(d):"",h>>22,2097152&h?this._combined[u].charCodeAt(this._combined[u].length-1):d]}set(u,h){this._data[3*u+1]=h[c.CHAR_DATA_ATTR_INDEX],h[c.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[u]=h[1],this._data[3*u+0]=2097152|u|h[c.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*u+0]=h[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[c.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(u){return this._data[3*u+0]>>22}hasWidth(u){return 12582912&this._data[3*u+0]}getFg(u){return this._data[3*u+1]}getBg(u){return this._data[3*u+2]}hasContent(u){return 4194303&this._data[3*u+0]}getCodePoint(u){let h=this._data[3*u+0];return 2097152&h?this._combined[u].charCodeAt(this._combined[u].length-1):2097151&h}isCombined(u){return 2097152&this._data[3*u+0]}getString(u){let h=this._data[3*u+0];return 2097152&h?this._combined[u]:2097151&h?(0,p.stringFromCodePoint)(2097151&h):""}isProtected(u){return 536870912&this._data[3*u+2]}loadCell(u,h){return m=3*u,h.content=this._data[m+0],h.fg=this._data[m+1],h.bg=this._data[m+2],2097152&h.content&&(h.combinedData=this._combined[u]),268435456&h.bg&&(h.extended=this._extendedAttrs[u]),h}setCell(u,h){2097152&h.content&&(this._combined[u]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[u]=h.extended),this._data[3*u+0]=h.content,this._data[3*u+1]=h.fg,this._data[3*u+2]=h.bg}setCellFromCodepoint(u,h,d,f){268435456&f.bg&&(this._extendedAttrs[u]=f.extended),this._data[3*u+0]=h|d<<22,this._data[3*u+1]=f.fg,this._data[3*u+2]=f.bg}addCodepointToCell(u,h,d){let f=this._data[3*u+0];2097152&f?this._combined[u]+=(0,p.stringFromCodePoint)(h):2097151&f?(this._combined[u]=(0,p.stringFromCodePoint)(2097151&f)+(0,p.stringFromCodePoint)(h),f&=-2097152,f|=2097152):f=h|4194304,d&&(f&=-12582913,f|=d<<22),this._data[3*u+0]=f}insertCells(u,h,d){if((u%=this.length)&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u-1,0,1,d),h<this.length-u){let f=new l.CellData;for(let v=this.length-u-h-1;v>=0;--v)this.setCell(u+h+v,this.loadCell(u+v,f));for(let v=0;v<h;++v)this.setCell(u+v,d)}else for(let f=u;f<this.length;++f)this.setCell(f,d);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,d)}deleteCells(u,h,d){if(u%=this.length,h<this.length-u){let f=new l.CellData;for(let v=0;v<this.length-u-h;++v)this.setCell(u+v,this.loadCell(u+h+v,f));for(let v=this.length-h;v<this.length;++v)this.setCell(v,d)}else for(let f=u;f<this.length;++f)this.setCell(f,d);u&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u-1,0,1,d),this.getWidth(u)!==0||this.hasContent(u)||this.setCellFromCodepoint(u,0,1,d)}replaceCells(u,h,d,f=!1){if(f)for(u&&this.getWidth(u-1)===2&&!this.isProtected(u-1)&&this.setCellFromCodepoint(u-1,0,1,d),h<this.length&&this.getWidth(h-1)===2&&!this.isProtected(h)&&this.setCellFromCodepoint(h,0,1,d);u<h&&u<this.length;)this.isProtected(u)||this.setCell(u,d),u++;else for(u&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u-1,0,1,d),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h,0,1,d);u<h&&u<this.length;)this.setCell(u++,d)}resize(u,h){if(u===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let d=3*u;if(u>this.length){if(this._data.buffer.byteLength>=4*d)this._data=new Uint32Array(this._data.buffer,0,d);else{let f=new Uint32Array(d);f.set(this._data),this._data=f}for(let f=this.length;f<u;++f)this.setCell(f,h)}else{this._data=this._data.subarray(0,d);let f=Object.keys(this._combined);for(let C=0;C<f.length;C++){let S=parseInt(f[C],10);S>=u&&delete this._combined[S]}let v=Object.keys(this._extendedAttrs);for(let C=0;C<v.length;C++){let S=parseInt(v[C],10);S>=u&&delete this._extendedAttrs[S]}}return this.length=u,4*d*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let u=new Uint32Array(this._data.length);return u.set(this._data),this._data=u,1}return 0}fill(u,h=!1){if(h)for(let d=0;d<this.length;++d)this.isProtected(d)||this.setCell(d,u);else{this._combined={},this._extendedAttrs={};for(let d=0;d<this.length;++d)this.setCell(d,u)}}copyFrom(u){this.length!==u.length?this._data=new Uint32Array(u._data):this._data.set(u._data),this.length=u.length,this._combined={};for(let h in u._combined)this._combined[h]=u._combined[h];this._extendedAttrs={};for(let h in u._extendedAttrs)this._extendedAttrs[h]=u._extendedAttrs[h];this.isWrapped=u.isWrapped}clone(){let u=new y(0);u._data=new Uint32Array(this._data),u.length=this.length;for(let h in this._combined)u._combined[h]=this._combined[h];for(let h in this._extendedAttrs)u._extendedAttrs[h]=this._extendedAttrs[h];return u.isWrapped=this.isWrapped,u}getTrimmedLength(){for(let u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0])return u+(this._data[3*u+0]>>22);return 0}getNoBgTrimmedLength(){for(let u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0]||50331648&this._data[3*u+2])return u+(this._data[3*u+0]>>22);return 0}copyCellsFrom(u,h,d,f,v){let C=u._data;if(v)for(let w=f-1;w>=0;w--){for(let _=0;_<3;_++)this._data[3*(d+w)+_]=C[3*(h+w)+_];268435456&C[3*(h+w)+2]&&(this._extendedAttrs[d+w]=u._extendedAttrs[h+w])}else for(let w=0;w<f;w++){for(let _=0;_<3;_++)this._data[3*(d+w)+_]=C[3*(h+w)+_];268435456&C[3*(h+w)+2]&&(this._extendedAttrs[d+w]=u._extendedAttrs[h+w])}let S=Object.keys(u._combined);for(let w=0;w<S.length;w++){let _=parseInt(S[w],10);_>=h&&(this._combined[_-h+d]=u._combined[_])}}translateToString(u,h,d,f){h=h??0,d=d??this.length,u&&(d=Math.min(d,this.getTrimmedLength())),f&&(f.length=0);let v="";for(;h<d;){let C=this._data[3*h+0],S=2097151&C,w=2097152&C?this._combined[h]:S?(0,p.stringFromCodePoint)(S):c.WHITESPACE_CELL_CHAR;if(v+=w,f)for(let _=0;_<w.length;++_)f.push(h);h+=C>>22||1}return f&&f.push(h),v}}s.BufferLine=y},4841:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(o,a){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return a*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(i,s)=>{function o(a,l,c){if(l===a.length-1)return a[l].getTrimmedLength();let p=!a[l].hasContent(c-1)&&a[l].getWidth(c-1)===1,m=a[l+1].getWidth(0)===2;return p&&m?c-1:c}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(a,l,c,p,m){let y=[];for(let g=0;g<a.length-1;g++){let u=g,h=a.get(++u);if(!h.isWrapped)continue;let d=[a.get(g)];for(;u<a.length&&h.isWrapped;)d.push(h),h=a.get(++u);if(p>=g&&p<u){g+=d.length-1;continue}let f=0,v=o(d,f,l),C=1,S=0;for(;C<d.length;){let _=o(d,C,l),b=_-S,A=c-v,T=Math.min(b,A);d[f].copyCellsFrom(d[C],S,v,T,!1),v+=T,v===c&&(f++,v=0),S+=T,S===_&&(C++,S=0),v===0&&f!==0&&d[f-1].getWidth(c-1)===2&&(d[f].copyCellsFrom(d[f-1],c-1,v++,1,!1),d[f-1].setCell(c-1,m))}d[f].replaceCells(v,c,m);let w=0;for(let _=d.length-1;_>0&&(_>f||d[_].getTrimmedLength()===0);_--)w++;w>0&&(y.push(g+d.length-w),y.push(w)),g+=d.length-1}return y},s.reflowLargerCreateNewLayout=function(a,l){let c=[],p=0,m=l[p],y=0;for(let g=0;g<a.length;g++)if(m===g){let u=l[++p];a.onDeleteEmitter.fire({index:g-y,amount:u}),g+=u-1,y+=u,m=l[++p]}else c.push(g);return{layout:c,countRemoved:y}},s.reflowLargerApplyNewLayout=function(a,l){let c=[];for(let p=0;p<l.length;p++)c.push(a.get(l[p]));for(let p=0;p<c.length;p++)a.set(p,c[p]);a.length=l.length},s.reflowSmallerGetNewLineLengths=function(a,l,c){let p=[],m=a.map((h,d)=>o(a,d,l)).reduce((h,d)=>h+d),y=0,g=0,u=0;for(;u<m;){if(m-u<c){p.push(m-u);break}y+=c;let h=o(a,g,l);y>h&&(y-=h,g++);let d=a[g].getWidth(y-1)===2;d&&y--;let f=d?c-1:c;p.push(f),u+=f}return p},s.getWrappedLineTrimmedLength=o},5295:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;let a=o(8460),l=o(844),c=o(9092);class p extends l.Disposable{constructor(y,g){super(),this._optionsService=y,this._bufferService=g,this._onBufferActivate=this.register(new a.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new c.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new c.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(y){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(y),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(y,g){this._normal.resize(y,g),this._alt.resize(y,g),this.setupTabStops(y)}setupTabStops(y){this._normal.setupTabStops(y),this._alt.setupTabStops(y)}}s.BufferSet=p},511:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;let a=o(482),l=o(643),c=o(3734);class p extends c.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new c.ExtendedAttrs,this.combinedData=""}static fromCharData(y){let g=new p;return g.setFromCharData(y),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(y){this.fg=y[l.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(y[l.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(y[l.CHAR_DATA_CHAR_INDEX].length===2){let u=y[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=u&&u<=56319){let h=y[l.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(u-55296)+h-56320+65536|y[l.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=y[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[l.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=y[l.CHAR_DATA_CHAR_INDEX],this.content=2097152|y[l.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=p},643:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;let a=o(8460),l=o(844);class c{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=c._nextId++,this._onDispose=this.register(new a.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,l.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}s.Marker=c,c._nextId=1},7116:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},s.CHARSETS.A={"#":"\xA3"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},s.CHARSETS.C=s.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},s.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},s.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},s.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},s.CHARSETS.E=s.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},s.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},s.CHARSETS.H=s.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(i,s)=>{var o,a,l;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(c){c.NUL="\0",c.SOH="",c.STX="",c.ETX="",c.EOT="",c.ENQ="",c.ACK="",c.BEL="\x07",c.BS="\b",c.HT="	",c.LF=`
`,c.VT="\v",c.FF="\f",c.CR="\r",c.SO="",c.SI="",c.DLE="",c.DC1="",c.DC2="",c.DC3="",c.DC4="",c.NAK="",c.SYN="",c.ETB="",c.CAN="",c.EM="",c.SUB="",c.ESC="\x1B",c.FS="",c.GS="",c.RS="",c.US="",c.SP=" ",c.DEL="\x7F"}(o||(s.C0=o={})),function(c){c.PAD="\x80",c.HOP="\x81",c.BPH="\x82",c.NBH="\x83",c.IND="\x84",c.NEL="\x85",c.SSA="\x86",c.ESA="\x87",c.HTS="\x88",c.HTJ="\x89",c.VTS="\x8A",c.PLD="\x8B",c.PLU="\x8C",c.RI="\x8D",c.SS2="\x8E",c.SS3="\x8F",c.DCS="\x90",c.PU1="\x91",c.PU2="\x92",c.STS="\x93",c.CCH="\x94",c.MW="\x95",c.SPA="\x96",c.EPA="\x97",c.SOS="\x98",c.SGCI="\x99",c.SCI="\x9A",c.CSI="\x9B",c.ST="\x9C",c.OSC="\x9D",c.PM="\x9E",c.APC="\x9F"}(a||(s.C1=a={})),function(c){c.ST=`${o.ESC}\\`}(l||(s.C1_ESCAPED=l={}))},7399:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;let a=o(2584),l={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(c,p,m,y){let g={type:0,cancel:!1,key:void 0},u=(c.shiftKey?1:0)|(c.altKey?2:0)|(c.ctrlKey?4:0)|(c.metaKey?8:0);switch(c.keyCode){case 0:c.key==="UIKeyInputUpArrow"?g.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A":c.key==="UIKeyInputLeftArrow"?g.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D":c.key==="UIKeyInputRightArrow"?g.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C":c.key==="UIKeyInputDownArrow"&&(g.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B");break;case 8:g.key=c.ctrlKey?"\b":a.C0.DEL,c.altKey&&(g.key=a.C0.ESC+g.key);break;case 9:if(c.shiftKey){g.key=a.C0.ESC+"[Z";break}g.key=a.C0.HT,g.cancel=!0;break;case 13:g.key=c.altKey?a.C0.ESC+a.C0.CR:a.C0.CR,g.cancel=!0;break;case 27:g.key=a.C0.ESC,c.altKey&&(g.key=a.C0.ESC+a.C0.ESC),g.cancel=!0;break;case 37:if(c.metaKey)break;u?(g.key=a.C0.ESC+"[1;"+(u+1)+"D",g.key===a.C0.ESC+"[1;3D"&&(g.key=a.C0.ESC+(m?"b":"[1;5D"))):g.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D";break;case 39:if(c.metaKey)break;u?(g.key=a.C0.ESC+"[1;"+(u+1)+"C",g.key===a.C0.ESC+"[1;3C"&&(g.key=a.C0.ESC+(m?"f":"[1;5C"))):g.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C";break;case 38:if(c.metaKey)break;u?(g.key=a.C0.ESC+"[1;"+(u+1)+"A",m||g.key!==a.C0.ESC+"[1;3A"||(g.key=a.C0.ESC+"[1;5A")):g.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A";break;case 40:if(c.metaKey)break;u?(g.key=a.C0.ESC+"[1;"+(u+1)+"B",m||g.key!==a.C0.ESC+"[1;3B"||(g.key=a.C0.ESC+"[1;5B")):g.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B";break;case 45:c.shiftKey||c.ctrlKey||(g.key=a.C0.ESC+"[2~");break;case 46:g.key=u?a.C0.ESC+"[3;"+(u+1)+"~":a.C0.ESC+"[3~";break;case 36:g.key=u?a.C0.ESC+"[1;"+(u+1)+"H":p?a.C0.ESC+"OH":a.C0.ESC+"[H";break;case 35:g.key=u?a.C0.ESC+"[1;"+(u+1)+"F":p?a.C0.ESC+"OF":a.C0.ESC+"[F";break;case 33:c.shiftKey?g.type=2:c.ctrlKey?g.key=a.C0.ESC+"[5;"+(u+1)+"~":g.key=a.C0.ESC+"[5~";break;case 34:c.shiftKey?g.type=3:c.ctrlKey?g.key=a.C0.ESC+"[6;"+(u+1)+"~":g.key=a.C0.ESC+"[6~";break;case 112:g.key=u?a.C0.ESC+"[1;"+(u+1)+"P":a.C0.ESC+"OP";break;case 113:g.key=u?a.C0.ESC+"[1;"+(u+1)+"Q":a.C0.ESC+"OQ";break;case 114:g.key=u?a.C0.ESC+"[1;"+(u+1)+"R":a.C0.ESC+"OR";break;case 115:g.key=u?a.C0.ESC+"[1;"+(u+1)+"S":a.C0.ESC+"OS";break;case 116:g.key=u?a.C0.ESC+"[15;"+(u+1)+"~":a.C0.ESC+"[15~";break;case 117:g.key=u?a.C0.ESC+"[17;"+(u+1)+"~":a.C0.ESC+"[17~";break;case 118:g.key=u?a.C0.ESC+"[18;"+(u+1)+"~":a.C0.ESC+"[18~";break;case 119:g.key=u?a.C0.ESC+"[19;"+(u+1)+"~":a.C0.ESC+"[19~";break;case 120:g.key=u?a.C0.ESC+"[20;"+(u+1)+"~":a.C0.ESC+"[20~";break;case 121:g.key=u?a.C0.ESC+"[21;"+(u+1)+"~":a.C0.ESC+"[21~";break;case 122:g.key=u?a.C0.ESC+"[23;"+(u+1)+"~":a.C0.ESC+"[23~";break;case 123:g.key=u?a.C0.ESC+"[24;"+(u+1)+"~":a.C0.ESC+"[24~";break;default:if(!c.ctrlKey||c.shiftKey||c.altKey||c.metaKey)if(m&&!y||!c.altKey||c.metaKey)!m||c.altKey||c.ctrlKey||c.shiftKey||!c.metaKey?c.key&&!c.ctrlKey&&!c.altKey&&!c.metaKey&&c.keyCode>=48&&c.key.length===1?g.key=c.key:c.key&&c.ctrlKey&&(c.key==="_"&&(g.key=a.C0.US),c.key==="@"&&(g.key=a.C0.NUL)):c.keyCode===65&&(g.type=1);else{let h=l[c.keyCode],d=h?.[c.shiftKey?1:0];if(d)g.key=a.C0.ESC+d;else if(c.keyCode>=65&&c.keyCode<=90){let f=c.ctrlKey?c.keyCode-64:c.keyCode+32,v=String.fromCharCode(f);c.shiftKey&&(v=v.toUpperCase()),g.key=a.C0.ESC+v}else if(c.keyCode===32)g.key=a.C0.ESC+(c.ctrlKey?a.C0.NUL:" ");else if(c.key==="Dead"&&c.code.startsWith("Key")){let f=c.code.slice(3,4);c.shiftKey||(f=f.toLowerCase()),g.key=a.C0.ESC+f,g.cancel=!0}}else c.keyCode>=65&&c.keyCode<=90?g.key=String.fromCharCode(c.keyCode-64):c.keyCode===32?g.key=a.C0.NUL:c.keyCode>=51&&c.keyCode<=55?g.key=String.fromCharCode(c.keyCode-51+27):c.keyCode===56?g.key=a.C0.DEL:c.keyCode===219?g.key=a.C0.ESC:c.keyCode===220?g.key=a.C0.FS:c.keyCode===221&&(g.key=a.C0.GS)}return g}},482:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},s.utf32ToString=function(o,a=0,l=o.length){let c="";for(let p=a;p<l;++p){let m=o[p];m>65535?(m-=65536,c+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):c+=String.fromCharCode(m)}return c},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,a){let l=o.length;if(!l)return 0;let c=0,p=0;if(this._interim){let m=o.charCodeAt(p++);56320<=m&&m<=57343?a[c++]=1024*(this._interim-55296)+m-56320+65536:(a[c++]=this._interim,a[c++]=m),this._interim=0}for(let m=p;m<l;++m){let y=o.charCodeAt(m);if(55296<=y&&y<=56319){if(++m>=l)return this._interim=y,c;let g=o.charCodeAt(m);56320<=g&&g<=57343?a[c++]=1024*(y-55296)+g-56320+65536:(a[c++]=y,a[c++]=g)}else y!==65279&&(a[c++]=y)}return c}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,a){let l=o.length;if(!l)return 0;let c,p,m,y,g=0,u=0,h=0;if(this.interim[0]){let v=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let S,w=0;for(;(S=63&this.interim[++w])&&w<4;)C<<=6,C|=S;let _=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=_-w;for(;h<b;){if(h>=l)return 0;if(S=o[h++],(192&S)!=128){h--,v=!0;break}this.interim[w++]=S,C<<=6,C|=63&S}v||(_===2?C<128?h--:a[g++]=C:_===3?C<2048||C>=55296&&C<=57343||C===65279||(a[g++]=C):C<65536||C>1114111||(a[g++]=C)),this.interim.fill(0)}let d=l-4,f=h;for(;f<l;){for(;!(!(f<d)||128&(c=o[f])||128&(p=o[f+1])||128&(m=o[f+2])||128&(y=o[f+3]));)a[g++]=c,a[g++]=p,a[g++]=m,a[g++]=y,f+=4;if(c=o[f++],c<128)a[g++]=c;else if((224&c)==192){if(f>=l)return this.interim[0]=c,g;if(p=o[f++],(192&p)!=128){f--;continue}if(u=(31&c)<<6|63&p,u<128){f--;continue}a[g++]=u}else if((240&c)==224){if(f>=l)return this.interim[0]=c,g;if(p=o[f++],(192&p)!=128){f--;continue}if(f>=l)return this.interim[0]=c,this.interim[1]=p,g;if(m=o[f++],(192&m)!=128){f--;continue}if(u=(15&c)<<12|(63&p)<<6|63&m,u<2048||u>=55296&&u<=57343||u===65279)continue;a[g++]=u}else if((248&c)==240){if(f>=l)return this.interim[0]=c,g;if(p=o[f++],(192&p)!=128){f--;continue}if(f>=l)return this.interim[0]=c,this.interim[1]=p,g;if(m=o[f++],(192&m)!=128){f--;continue}if(f>=l)return this.interim[0]=c,this.interim[1]=p,this.interim[2]=m,g;if(y=o[f++],(192&y)!=128){f--;continue}if(u=(7&c)<<18|(63&p)<<12|(63&m)<<6|63&y,u<65536||u>1114111)continue;a[g++]=u}}return g}}},225:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;let a=o(1480),l=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],p;s.UnicodeV6=class{constructor(){if(this.version="6",!p){p=new Uint8Array(65536),p.fill(1),p[0]=0,p.fill(0,1,32),p.fill(0,127,160),p.fill(2,4352,4448),p[9001]=2,p[9002]=2,p.fill(2,11904,42192),p[12351]=1,p.fill(2,44032,55204),p.fill(2,63744,64256),p.fill(2,65040,65050),p.fill(2,65072,65136),p.fill(2,65280,65377),p.fill(2,65504,65511);for(let m=0;m<l.length;++m)p.fill(0,l[m][0],l[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?p[m]:function(y,g){let u,h=0,d=g.length-1;if(y<g[0][0]||y>g[d][1])return!1;for(;d>=h;)if(u=h+d>>1,y>g[u][1])h=u+1;else{if(!(y<g[u][0]))return!0;d=u-1}return!1}(m,c)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}charProperties(m,y){let g=this.wcwidth(m),u=g===0&&y!==0;if(u){let h=a.UnicodeService.extractWidth(y);h===0?u=!1:h>g&&(g=h)}return a.UnicodeService.createPropertyValue(0,g,u)}}},5981:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;let a=o(8460),l=o(844);class c extends l.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,y){if(y!==void 0&&this._syncCalls>y)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);let u=this._callbacks.shift();u&&u()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,y){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(y),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(y)}_innerWrite(m=0,y=!0){let g=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let u=this._writeBuffer[this._bufferOffset],h=this._action(u,y);if(h){let f=v=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,v)):this._innerWrite(g,v);return void h.catch(v=>(queueMicrotask(()=>{throw v}),Promise.resolve(!1))).then(f)}let d=this._callbacks[this._bufferOffset];if(d&&d(),this._bufferOffset++,this._pendingData-=u.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=c},5941:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;let o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,a=/^[\da-f]+$/;function l(c,p){let m=c.toString(16),y=m.length<2?"0"+m:m;switch(p){case 4:return m[0];case 8:return y;case 12:return(y+y).slice(0,3);default:return y+y}}s.parseColor=function(c){if(!c)return;let p=c.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);let m=o.exec(p);if(m){let y=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/y*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/y*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/y*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),a.exec(p)&&[3,6,9,12].includes(p.length))){let m=p.length/3,y=[0,0,0];for(let g=0;g<3;++g){let u=parseInt(p.slice(m*g,m*g+m),16);y[g]=m===1?u<<4:m===2?u:m===3?u>>4:u>>8}return y}},s.toRgbString=function(c,p=16){let[m,y,g]=c;return`rgb:${l(m,p)}/${l(y,p)}/${l(g,p)}`}},5770:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;let a=o(482),l=o(8742),c=o(5770),p=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(y,g){this._handlers[y]===void 0&&(this._handlers[y]=[]);let u=this._handlers[y];return u.push(g),{dispose:()=>{let h=u.indexOf(g);h!==-1&&u.splice(h,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}reset(){if(this._active.length)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(y,g){if(this.reset(),this._ident=y,this._active=this._handlers[y]||p,this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(y,g,u){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(y,g,u);else this._handlerFb(this._ident,"PUT",(0,a.utf32ToString)(y,g,u))}unhook(y,g=!0){if(this._active.length){let u=!1,h=this._active.length-1,d=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,u=g,d=this._stack.fallThrough,this._stack.paused=!1),!d&&u===!1){for(;h>=0&&(u=this._active[h].unhook(y),u!==!0);h--)if(u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,u;h--}for(;h>=0;h--)if(u=this._active[h].unhook(!1),u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,u}else this._handlerFb(this._ident,"UNHOOK",y);this._active=p,this._ident=0}};let m=new l.Params;m.addParam(0),s.DcsHandler=class{constructor(y){this._handler=y,this._data="",this._params=m,this._hitLimit=!1}hook(y){this._params=y.length>1||y.params[0]?y.clone():m,this._data="",this._hitLimit=!1}put(y,g,u){this._hitLimit||(this._data+=(0,a.utf32ToString)(y,g,u),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(y){let g=!1;if(this._hitLimit)g=!1;else if(y&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(u=>(this._params=m,this._data="",this._hitLimit=!1,u));return this._params=m,this._data="",this._hitLimit=!1,g}}},2015:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;let a=o(844),l=o(8742),c=o(6242),p=o(6351);class m{constructor(h){this.table=new Uint8Array(h)}setDefault(h,d){this.table.fill(h<<4|d)}add(h,d,f,v){this.table[d<<8|h]=f<<4|v}addMany(h,d,f,v){for(let C=0;C<h.length;C++)this.table[d<<8|h[C]]=f<<4|v}}s.TransitionTable=m;let y=160;s.VT500_TRANSITION_TABLE=function(){let u=new m(4095),h=Array.apply(null,Array(256)).map((w,_)=>_),d=(w,_)=>h.slice(w,_),f=d(32,127),v=d(0,24);v.push(25),v.push.apply(v,d(28,32));let C=d(0,14),S;for(S in u.setDefault(1,0),u.addMany(f,0,2,0),C)u.addMany([24,26,153,154],S,3,0),u.addMany(d(128,144),S,3,0),u.addMany(d(144,152),S,3,0),u.add(156,S,0,0),u.add(27,S,11,1),u.add(157,S,4,8),u.addMany([152,158,159],S,0,7),u.add(155,S,11,3),u.add(144,S,11,9);return u.addMany(v,0,3,0),u.addMany(v,1,3,1),u.add(127,1,0,1),u.addMany(v,8,0,8),u.addMany(v,3,3,3),u.add(127,3,0,3),u.addMany(v,4,3,4),u.add(127,4,0,4),u.addMany(v,6,3,6),u.addMany(v,5,3,5),u.add(127,5,0,5),u.addMany(v,2,3,2),u.add(127,2,0,2),u.add(93,1,4,8),u.addMany(f,8,5,8),u.add(127,8,5,8),u.addMany([156,27,24,26,7],8,6,0),u.addMany(d(28,32),8,0,8),u.addMany([88,94,95],1,0,7),u.addMany(f,7,0,7),u.addMany(v,7,0,7),u.add(156,7,0,0),u.add(127,7,0,7),u.add(91,1,11,3),u.addMany(d(64,127),3,7,0),u.addMany(d(48,60),3,8,4),u.addMany([60,61,62,63],3,9,4),u.addMany(d(48,60),4,8,4),u.addMany(d(64,127),4,7,0),u.addMany([60,61,62,63],4,0,6),u.addMany(d(32,64),6,0,6),u.add(127,6,0,6),u.addMany(d(64,127),6,0,0),u.addMany(d(32,48),3,9,5),u.addMany(d(32,48),5,9,5),u.addMany(d(48,64),5,0,6),u.addMany(d(64,127),5,7,0),u.addMany(d(32,48),4,9,5),u.addMany(d(32,48),1,9,2),u.addMany(d(32,48),2,9,2),u.addMany(d(48,127),2,10,0),u.addMany(d(48,80),1,10,0),u.addMany(d(81,88),1,10,0),u.addMany([89,90,92],1,10,0),u.addMany(d(96,127),1,10,0),u.add(80,1,11,9),u.addMany(v,9,0,9),u.add(127,9,0,9),u.addMany(d(28,32),9,0,9),u.addMany(d(32,48),9,9,12),u.addMany(d(48,60),9,8,10),u.addMany([60,61,62,63],9,9,10),u.addMany(v,11,0,11),u.addMany(d(32,128),11,0,11),u.addMany(d(28,32),11,0,11),u.addMany(v,10,0,10),u.add(127,10,0,10),u.addMany(d(28,32),10,0,10),u.addMany(d(48,60),10,8,10),u.addMany([60,61,62,63],10,0,11),u.addMany(d(32,48),10,9,12),u.addMany(v,12,0,12),u.add(127,12,0,12),u.addMany(d(28,32),12,0,12),u.addMany(d(32,48),12,9,12),u.addMany(d(48,64),12,0,11),u.addMany(d(64,127),12,12,13),u.addMany(d(64,127),10,12,13),u.addMany(d(64,127),9,12,13),u.addMany(v,13,13,13),u.addMany(f,13,13,13),u.add(127,13,0,13),u.addMany([27,156,24,26],13,14,0),u.add(y,0,2,0),u.add(y,8,5,8),u.add(y,6,0,6),u.add(y,11,0,11),u.add(y,13,13,13),u}();class g extends a.Disposable{constructor(h=s.VT500_TRANSITION_TABLE){super(),this._transitions=h,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new l.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(d,f,v)=>{},this._executeHandlerFb=d=>{},this._csiHandlerFb=(d,f)=>{},this._escHandlerFb=d=>{},this._errorHandlerFb=d=>d,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,a.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new c.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(h,d=[64,126]){let f=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if(f=h.prefix.charCodeAt(0),f&&60>f||f>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<h.intermediates.length;++C){let S=h.intermediates.charCodeAt(C);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");f<<=8,f|=S}}if(h.final.length!==1)throw new Error("final must be a single byte");let v=h.final.charCodeAt(0);if(d[0]>v||v>d[1])throw new Error(`final must be in range ${d[0]} .. ${d[1]}`);return f<<=8,f|=v,f}identToString(h){let d=[];for(;h;)d.push(String.fromCharCode(255&h)),h>>=8;return d.reverse().join("")}setPrintHandler(h){this._printHandler=h}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(h,d){let f=this._identifier(h,[48,126]);this._escHandlers[f]===void 0&&(this._escHandlers[f]=[]);let v=this._escHandlers[f];return v.push(d),{dispose:()=>{let C=v.indexOf(d);C!==-1&&v.splice(C,1)}}}clearEscHandler(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]}setEscHandlerFallback(h){this._escHandlerFb=h}setExecuteHandler(h,d){this._executeHandlers[h.charCodeAt(0)]=d}clearExecuteHandler(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]}setExecuteHandlerFallback(h){this._executeHandlerFb=h}registerCsiHandler(h,d){let f=this._identifier(h);this._csiHandlers[f]===void 0&&(this._csiHandlers[f]=[]);let v=this._csiHandlers[f];return v.push(d),{dispose:()=>{let C=v.indexOf(d);C!==-1&&v.splice(C,1)}}}clearCsiHandler(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]}setCsiHandlerFallback(h){this._csiHandlerFb=h}registerDcsHandler(h,d){return this._dcsParser.registerHandler(this._identifier(h),d)}clearDcsHandler(h){this._dcsParser.clearHandler(this._identifier(h))}setDcsHandlerFallback(h){this._dcsParser.setHandlerFallback(h)}registerOscHandler(h,d){return this._oscParser.registerHandler(h,d)}clearOscHandler(h){this._oscParser.clearHandler(h)}setOscHandlerFallback(h){this._oscParser.setHandlerFallback(h)}setErrorHandler(h){this._errorHandler=h}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(h,d,f,v,C){this._parseStack.state=h,this._parseStack.handlers=d,this._parseStack.handlerPos=f,this._parseStack.transition=v,this._parseStack.chunkPos=C}parse(h,d,f){let v,C=0,S=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(f===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let _=this._parseStack.handlers,b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(f===!1&&b>-1){for(;b>=0&&(v=_[b](this._params),v!==!0);b--)if(v instanceof Promise)return this._parseStack.handlerPos=b,v}this._parseStack.handlers=[];break;case 4:if(f===!1&&b>-1){for(;b>=0&&(v=_[b](),v!==!0);b--)if(v instanceof Promise)return this._parseStack.handlerPos=b,v}this._parseStack.handlers=[];break;case 6:if(C=h[this._parseStack.chunkPos],v=this._dcsParser.unhook(C!==24&&C!==26,f),v)return v;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=h[this._parseStack.chunkPos],v=this._oscParser.end(C!==24&&C!==26,f),v)return v;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let _=w;_<d;++_){switch(C=h[_],S=this._transitions.table[this.currentState<<8|(C<160?C:y)],S>>4){case 2:for(let I=_+1;;++I){if(I>=d||(C=h[I])<32||C>126&&C<y){this._printHandler(h,_,I),_=I-1;break}if(++I>=d||(C=h[I])<32||C>126&&C<y){this._printHandler(h,_,I),_=I-1;break}if(++I>=d||(C=h[I])<32||C>126&&C<y){this._printHandler(h,_,I),_=I-1;break}if(++I>=d||(C=h[I])<32||C>126&&C<y){this._printHandler(h,_,I),_=I-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:_,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let b=this._csiHandlers[this._collect<<8|C],A=b?b.length-1:-1;for(;A>=0&&(v=b[A](this._params),v!==!0);A--)if(v instanceof Promise)return this._preserveStack(3,b,A,S,_),v;A<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingJoinState=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++_<d&&(C=h[_])>47&&C<60);_--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let T=this._escHandlers[this._collect<<8|C],k=T?T.length-1:-1;for(;k>=0&&(v=T[k](),v!==!0);k--)if(v instanceof Promise)return this._preserveStack(4,T,k,S,_),v;k<0&&this._escHandlerFb(this._collect<<8|C),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let I=_+1;;++I)if(I>=d||(C=h[I])===24||C===26||C===27||C>127&&C<y){this._dcsParser.put(h,_,I),_=I-1;break}break;case 14:if(v=this._dcsParser.unhook(C!==24&&C!==26),v)return this._preserveStack(6,[],0,S,_),v;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let I=_+1;;I++)if(I>=d||(C=h[I])<32||C>127&&C<y){this._oscParser.put(h,_,I),_=I-1;break}break;case 6:if(v=this._oscParser.end(C!==24&&C!==26),v)return this._preserveStack(5,[],0,S,_),v;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&S}}}s.EscapeSequenceParser=g},6242:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;let a=o(5770),l=o(482),c=[];s.OscParser=class{constructor(){this._state=0,this._active=c,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,m){this._handlers[p]===void 0&&(this._handlers[p]=[]);let y=this._handlers[p];return y.push(m),{dispose:()=>{let g=y.indexOf(m);g!==-1&&y.splice(g,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=c}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=c,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||c,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,m,y){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(p,m,y);else this._handlerFb(this._id,"PUT",(0,l.utf32ToString)(p,m,y))}start(){this.reset(),this._state=1}put(p,m,y){if(this._state!==3){if(this._state===1)for(;m<y;){let g=p[m++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&y-m>0&&this._put(p,m,y)}}end(p,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let y=!1,g=this._active.length-1,u=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,y=m,u=this._stack.fallThrough,this._stack.paused=!1),!u&&y===!1){for(;g>=0&&(y=this._active[g].end(p),y!==!0);g--)if(y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,y;g--}for(;g>=0;g--)if(y=this._active[g].end(!1),y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,y}else this._handlerFb(this._id,"END",p);this._active=c,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,m,y){this._hitLimit||(this._data+=(0,l.utf32ToString)(p,m,y),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let m=!1;if(this._hitLimit)m=!1;else if(p&&(m=this._handler(this._data),m instanceof Promise))return m.then(y=>(this._data="",this._hitLimit=!1,y));return this._data="",this._hitLimit=!1,m}}},8742:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;let o=2147483647;class a{static fromArray(c){let p=new a;if(!c.length)return p;for(let m=Array.isArray(c[0])?1:0;m<c.length;++m){let y=c[m];if(Array.isArray(y))for(let g=0;g<y.length;++g)p.addSubParam(y[g]);else p.addParam(y)}return p}constructor(c=32,p=32){if(this.maxLength=c,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(c),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(c),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let c=new a(this.maxLength,this.maxSubParamsLength);return c.params.set(this.params),c.length=this.length,c._subParams.set(this._subParams),c._subParamsLength=this._subParamsLength,c._subParamsIdx.set(this._subParamsIdx),c._rejectDigits=this._rejectDigits,c._rejectSubDigits=this._rejectSubDigits,c._digitIsSub=this._digitIsSub,c}toArray(){let c=[];for(let p=0;p<this.length;++p){c.push(this.params[p]);let m=this._subParamsIdx[p]>>8,y=255&this._subParamsIdx[p];y-m>0&&c.push(Array.prototype.slice.call(this._subParams,m,y))}return c}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(c){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=c>o?o:c}}addSubParam(c){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=c>o?o:c,this._subParamsIdx[this.length-1]++}}hasSubParams(c){return(255&this._subParamsIdx[c])-(this._subParamsIdx[c]>>8)>0}getSubParams(c){let p=this._subParamsIdx[c]>>8,m=255&this._subParamsIdx[c];return m-p>0?this._subParams.subarray(p,m):null}getSubParamsAll(){let c={};for(let p=0;p<this.length;++p){let m=this._subParamsIdx[p]>>8,y=255&this._subParamsIdx[p];y-m>0&&(c[p]=this._subParams.slice(m,y))}return c}addDigit(c){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let m=this._digitIsSub?this._subParams:this.params,y=m[p-1];m[p-1]=~y?Math.min(10*y+c,o):c}}s.Params=a},5741:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,a){let l={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(l),a.dispose=()=>this._wrappedAddonDispose(l),a.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let a=-1;for(let l=0;l<this._addons.length;l++)if(this._addons[l]===o){a=l;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(a,1)}}},8771:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;let a=o(3785),l=o(511);s.BufferApiView=class{constructor(c,p){this._buffer=c,this.type=p}init(c){return this._buffer=c,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(c){let p=this._buffer.lines.get(c);if(p)return new a.BufferLineApiView(p)}getNullCell(){return new l.CellData}}},3785:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;let a=o(511);s.BufferLineApiView=class{constructor(l){this._line=l}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(l,c){if(!(l<0||l>=this._line.length))return c?(this._line.loadCell(l,c),c):this._line.loadCell(l,new a.CellData)}translateToString(l,c,p){return this._line.translateToString(l,c,p)}}},8285:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;let a=o(8771),l=o(8460),c=o(844);class p extends c.Disposable{constructor(y){super(),this._core=y,this._onBufferChange=this.register(new l.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new a.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new a.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=p},7975:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,a){return this._core.registerCsiHandler(o,l=>a(l.toArray()))}addCsiHandler(o,a){return this.registerCsiHandler(o,a)}registerDcsHandler(o,a){return this._core.registerDcsHandler(o,(l,c)=>a(l,c.toArray()))}addDcsHandler(o,a){return this.registerDcsHandler(o,a)}registerEscHandler(o,a){return this._core.registerEscHandler(o,a)}addEscHandler(o,a){return this.registerEscHandler(o,a)}registerOscHandler(o,a){return this._core.registerOscHandler(o,a)}addOscHandler(o,a){return this.registerOscHandler(o,a)}}},7090:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(i,s,o){var a=this&&this.__decorate||function(u,h,d,f){var v,C=arguments.length,S=C<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,d):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(u,h,d,f);else for(var w=u.length-1;w>=0;w--)(v=u[w])&&(S=(C<3?v(S):C>3?v(h,d,S):v(h,d))||S);return C>3&&S&&Object.defineProperty(h,d,S),S},l=this&&this.__param||function(u,h){return function(d,f){h(d,f,u)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;let c=o(8460),p=o(844),m=o(5295),y=o(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let g=s.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(u){super(),this.isUserScrolling=!1,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(u.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(u.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(u,this))}resize(u,h){this.cols=u,this.rows=h,this.buffers.resize(u,h),this._onResize.fire({cols:u,rows:h})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(u,h=!1){let d=this.buffer,f;f=this._cachedBlankLine,f&&f.length===this.cols&&f.getFg(0)===u.fg&&f.getBg(0)===u.bg||(f=d.getBlankLine(u,h),this._cachedBlankLine=f),f.isWrapped=h;let v=d.ybase+d.scrollTop,C=d.ybase+d.scrollBottom;if(d.scrollTop===0){let S=d.lines.isFull;C===d.lines.length-1?S?d.lines.recycle().copyFrom(f):d.lines.push(f.clone()):d.lines.splice(C+1,0,f.clone()),S?this.isUserScrolling&&(d.ydisp=Math.max(d.ydisp-1,0)):(d.ybase++,this.isUserScrolling||d.ydisp++)}else{let S=C-v+1;d.lines.shiftElements(v+1,S-1,-1),d.lines.set(C,f.clone())}this.isUserScrolling||(d.ydisp=d.ybase),this._onScroll.fire(d.ydisp)}scrollLines(u,h,d){let f=this.buffer;if(u<0){if(f.ydisp===0)return;this.isUserScrolling=!0}else u+f.ydisp>=f.ybase&&(this.isUserScrolling=!1);let v=f.ydisp;f.ydisp=Math.max(Math.min(f.ydisp+u,f.ybase),0),v!==f.ydisp&&(h||this._onScroll.fire(f.ydisp))}};s.BufferService=g=a([l(0,y.IOptionsService)],g)},7994:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,a){this._charsets[o]=a,this.glevel===o&&(this.charset=a)}}},1753:function(i,s,o){var a=this&&this.__decorate||function(f,v,C,S){var w,_=arguments.length,b=_<3?v:S===null?S=Object.getOwnPropertyDescriptor(v,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(f,v,C,S);else for(var A=f.length-1;A>=0;A--)(w=f[A])&&(b=(_<3?w(b):_>3?w(v,C,b):w(v,C))||b);return _>3&&b&&Object.defineProperty(v,C,b),b},l=this&&this.__param||function(f,v){return function(C,S){v(C,S,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;let c=o(2585),p=o(8460),m=o(844),y={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:f=>f.button!==4&&f.action===1&&(f.ctrl=!1,f.alt=!1,f.shift=!1,!0)},VT200:{events:19,restrict:f=>f.action!==32},DRAG:{events:23,restrict:f=>f.action!==32||f.button!==3},ANY:{events:31,restrict:f=>!0}};function g(f,v){let C=(f.ctrl?16:0)|(f.shift?4:0)|(f.alt?8:0);return f.button===4?(C|=64,C|=f.action):(C|=3&f.button,4&f.button&&(C|=64),8&f.button&&(C|=128),f.action===32?C|=32:f.action!==0||v||(C|=3)),C}let u=String.fromCharCode,h={DEFAULT:f=>{let v=[g(f,!1)+32,f.col+32,f.row+32];return v[0]>255||v[1]>255||v[2]>255?"":`\x1B[M${u(v[0])}${u(v[1])}${u(v[2])}`},SGR:f=>{let v=f.action===0&&f.button!==4?"m":"M";return`\x1B[<${g(f,!0)};${f.col};${f.row}${v}`},SGR_PIXELS:f=>{let v=f.action===0&&f.button!==4?"m":"M";return`\x1B[<${g(f,!0)};${f.x};${f.y}${v}`}},d=s.CoreMouseService=class extends m.Disposable{constructor(f,v){super(),this._bufferService=f,this._coreService=v,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(y))this.addProtocol(C,y[C]);for(let C of Object.keys(h))this.addEncoding(C,h[C]);this.reset()}addProtocol(f,v){this._protocols[f]=v}addEncoding(f,v){this._encodings[f]=v}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(f){if(!this._protocols[f])throw new Error(`unknown protocol "${f}"`);this._activeProtocol=f,this._onProtocolChange.fire(this._protocols[f].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(f){if(!this._encodings[f])throw new Error(`unknown encoding "${f}"`);this._activeEncoding=f}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(f){if(f.col<0||f.col>=this._bufferService.cols||f.row<0||f.row>=this._bufferService.rows||f.button===4&&f.action===32||f.button===3&&f.action!==32||f.button!==4&&(f.action===2||f.action===3)||(f.col++,f.row++,f.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,f,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(f))return!1;let v=this._encodings[this._activeEncoding](f);return v&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(v):this._coreService.triggerDataEvent(v,!0)),this._lastEvent=f,!0}explainEvents(f){return{down:!!(1&f),up:!!(2&f),drag:!!(4&f),move:!!(8&f),wheel:!!(16&f)}}_equalEvents(f,v,C){if(C){if(f.x!==v.x||f.y!==v.y)return!1}else if(f.col!==v.col||f.row!==v.row)return!1;return f.button===v.button&&f.action===v.action&&f.ctrl===v.ctrl&&f.alt===v.alt&&f.shift===v.shift}};s.CoreMouseService=d=a([l(0,c.IBufferService),l(1,c.ICoreService)],d)},6975:function(i,s,o){var a=this&&this.__decorate||function(d,f,v,C){var S,w=arguments.length,_=w<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,v):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(d,f,v,C);else for(var b=d.length-1;b>=0;b--)(S=d[b])&&(_=(w<3?S(_):w>3?S(f,v,_):S(f,v))||_);return w>3&&_&&Object.defineProperty(f,v,_),_},l=this&&this.__param||function(d,f){return function(v,C){f(v,C,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;let c=o(1439),p=o(8460),m=o(844),y=o(2585),g=Object.freeze({insertMode:!1}),u=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),h=s.CoreService=class extends m.Disposable{constructor(d,f,v){super(),this._bufferService=d,this._logService=f,this._optionsService=v,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,c.clone)(g),this.decPrivateModes=(0,c.clone)(u)}reset(){this.modes=(0,c.clone)(g),this.decPrivateModes=(0,c.clone)(u)}triggerDataEvent(d,f=!1){if(this._optionsService.rawOptions.disableStdin)return;let v=this._bufferService.buffer;f&&this._optionsService.rawOptions.scrollOnUserInput&&v.ybase!==v.ydisp&&this._onRequestScrollToBottom.fire(),f&&this._onUserInput.fire(),this._logService.debug(`sending data "${d}"`,()=>d.split("").map(C=>C.charCodeAt(0))),this._onData.fire(d)}triggerBinaryEvent(d){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${d}"`,()=>d.split("").map(f=>f.charCodeAt(0))),this._onBinary.fire(d))}};s.CoreService=h=a([l(0,y.IBufferService),l(1,y.ILogService),l(2,y.IOptionsService)],h)},9074:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;let a=o(8055),l=o(8460),c=o(844),p=o(6106),m=0,y=0;class g extends c.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(d=>d?.marker.line),this._onDecorationRegistered=this.register(new l.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new l.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,c.toDisposable)(()=>this.reset()))}registerDecoration(d){if(d.marker.isDisposed)return;let f=new u(d);if(f){let v=f.marker.onDispose(()=>f.dispose());f.onDispose(()=>{f&&(this._decorations.delete(f)&&this._onDecorationRemoved.fire(f),v.dispose())}),this._decorations.insert(f),this._onDecorationRegistered.fire(f)}return f}reset(){for(let d of this._decorations.values())d.dispose();this._decorations.clear()}*getDecorationsAtCell(d,f,v){let C=0,S=0;for(let w of this._decorations.getKeyIterator(f))C=w.options.x??0,S=C+(w.options.width??1),d>=C&&d<S&&(!v||(w.options.layer??"bottom")===v)&&(yield w)}forEachDecorationAtCell(d,f,v,C){this._decorations.forEachByKey(f,S=>{m=S.options.x??0,y=m+(S.options.width??1),d>=m&&d<y&&(!v||(S.options.layer??"bottom")===v)&&C(S)})}}s.DecorationService=g;class u extends c.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(d){super(),this.options=d,this.onRenderEmitter=this.register(new l.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=d.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;let a=o(2585),l=o(8343);class c{constructor(...m){this._entries=new Map;for(let[y,g]of m)this.set(y,g)}set(m,y){let g=this._entries.get(m);return this._entries.set(m,y),g}forEach(m){for(let[y,g]of this._entries.entries())m(y,g)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}s.ServiceCollection=c,s.InstantiationService=class{constructor(){this._services=new c,this._services.set(a.IInstantiationService,this)}setService(p,m){this._services.set(p,m)}getService(p){return this._services.get(p)}createInstance(p,...m){let y=(0,l.getServiceDependencies)(p).sort((h,d)=>h.index-d.index),g=[];for(let h of y){let d=this._services.get(h.id);if(!d)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${h.id}.`);g.push(d)}let u=y.length>0?y[0].index:m.length;if(m.length!==u)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${u+1} conflicts with ${m.length} static arguments`);return new p(...m,...g)}}},7866:function(i,s,o){var a=this&&this.__decorate||function(u,h,d,f){var v,C=arguments.length,S=C<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,d):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(u,h,d,f);else for(var w=u.length-1;w>=0;w--)(v=u[w])&&(S=(C<3?v(S):C>3?v(h,d,S):v(h,d))||S);return C>3&&S&&Object.defineProperty(h,d,S),S},l=this&&this.__param||function(u,h){return function(d,f){h(d,f,u)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;let c=o(844),p=o(2585),m={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF},y,g=s.LogService=class extends c.Disposable{get logLevel(){return this._logLevel}constructor(u){super(),this._optionsService=u,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),y=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(u){for(let h=0;h<u.length;h++)typeof u[h]=="function"&&(u[h]=u[h]())}_log(u,h,d){this._evalLazyOptionalParams(d),u.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,...d)}trace(u,...h){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,u,h)}debug(u,...h){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,u,h)}info(u,...h){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,u,h)}warn(u,...h){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,u,h)}error(u,...h){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,u,h)}};s.LogService=g=a([l(0,p.IOptionsService)],g),s.setTraceLogger=function(u){y=u},s.traceCall=function(u,h,d){if(typeof d.value!="function")throw new Error("not supported");let f=d.value;d.value=function(...v){if(y.logLevel!==p.LogLevelEnum.TRACE)return f.apply(this,v);y.trace(`GlyphRenderer#${f.name}(${v.map(S=>JSON.stringify(S)).join(", ")})`);let C=f.apply(this,v);return y.trace(`GlyphRenderer#${f.name} return`,C),C}}},7302:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;let a=o(8460),l=o(844),c=o(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:c.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let p=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends l.Disposable{constructor(g){super(),this._onOptionChange=this.register(new a.EventEmitter),this.onOptionChange=this._onOptionChange.event;let u=H({},s.DEFAULT_OPTIONS);for(let h in g)if(h in u)try{let d=g[h];u[h]=this._sanitizeAndValidateOption(h,d)}catch(d){console.error(d)}this.rawOptions=u,this.options=H({},u),this._setupOptions(),this.register((0,l.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(g,u){return this.onOptionChange(h=>{h===g&&u(this.rawOptions[g])})}onMultipleOptionChange(g,u){return this.onOptionChange(h=>{g.indexOf(h)!==-1&&u()})}_setupOptions(){let g=h=>{if(!(h in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);return this.rawOptions[h]},u=(h,d)=>{if(!(h in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);d=this._sanitizeAndValidateOption(h,d),this.rawOptions[h]!==d&&(this.rawOptions[h]=d,this._onOptionChange.fire(h))};for(let h in this.rawOptions){let d={get:g.bind(this,h),set:u.bind(this,h)};Object.defineProperty(this.options,h,d)}}_sanitizeAndValidateOption(g,u){switch(g){case"cursorStyle":if(u||(u=s.DEFAULT_OPTIONS[g]),!function(h){return h==="block"||h==="underline"||h==="bar"}(u))throw new Error(`"${u}" is not a valid value for ${g}`);break;case"wordSeparator":u||(u=s.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof u=="number"&&1<=u&&u<=1e3)break;u=p.includes(u)?u:s.DEFAULT_OPTIONS[g];break;case"cursorWidth":u=Math.floor(u);case"lineHeight":case"tabStopWidth":if(u<1)throw new Error(`${g} cannot be less than 1, value: ${u}`);break;case"minimumContrastRatio":u=Math.max(1,Math.min(21,Math.round(10*u)/10));break;case"scrollback":if((u=Math.min(u,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${u}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(u<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${u}`);break;case"rows":case"cols":if(!u&&u!==0)throw new Error(`${g} must be numeric, value: ${u}`);break;case"windowsPty":u=u??{}}return u}}s.OptionsService=m},2660:function(i,s,o){var a=this&&this.__decorate||function(m,y,g,u){var h,d=arguments.length,f=d<3?y:u===null?u=Object.getOwnPropertyDescriptor(y,g):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(m,y,g,u);else for(var v=m.length-1;v>=0;v--)(h=m[v])&&(f=(d<3?h(f):d>3?h(y,g,f):h(y,g))||f);return d>3&&f&&Object.defineProperty(y,g,f),f},l=this&&this.__param||function(m,y){return function(g,u){y(g,u,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;let c=o(2585),p=s.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){let y=this._bufferService.buffer;if(m.id===void 0){let v=y.addMarker(y.ybase+y.y),C={data:m,id:this._nextId++,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(C,v)),this._dataByLinkId.set(C.id,C),C.id}let g=m,u=this._getEntryIdKey(g),h=this._entriesWithId.get(u);if(h)return this.addLineToLink(h.id,y.ybase+y.y),h.id;let d=y.addMarker(y.ybase+y.y),f={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[d]};return d.onDispose(()=>this._removeMarkerFromLink(f,d)),this._entriesWithId.set(f.key,f),this._dataByLinkId.set(f.id,f),f.id}addLineToLink(m,y){let g=this._dataByLinkId.get(m);if(g&&g.lines.every(u=>u.line!==y)){let u=this._bufferService.buffer.addMarker(y);g.lines.push(u),u.onDispose(()=>this._removeMarkerFromLink(g,u))}}getLinkData(m){return this._dataByLinkId.get(m)?.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,y){let g=m.lines.indexOf(y);g!==-1&&(m.lines.splice(g,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};s.OscLinkService=p=a([l(0,c.IBufferService)],p)},8343:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;let o="di$target",a="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(l){return l[a]||[]},s.createDecorator=function(l){if(s.serviceRegistry.has(l))return s.serviceRegistry.get(l);let c=function(p,m,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,u,h){u[o]===u?u[a].push({id:g,index:h}):(u[a]=[{id:g,index:h}],u[o]=u)})(c,p,y)};return c.toString=()=>l,s.serviceRegistry.set(l,c),c}},2585:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;let a=o(8343);var l;s.IBufferService=(0,a.createDecorator)("BufferService"),s.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),s.ICoreService=(0,a.createDecorator)("CoreService"),s.ICharsetService=(0,a.createDecorator)("CharsetService"),s.IInstantiationService=(0,a.createDecorator)("InstantiationService"),function(c){c[c.TRACE=0]="TRACE",c[c.DEBUG=1]="DEBUG",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.OFF=5]="OFF"}(l||(s.LogLevelEnum=l={})),s.ILogService=(0,a.createDecorator)("LogService"),s.IOptionsService=(0,a.createDecorator)("OptionsService"),s.IOscLinkService=(0,a.createDecorator)("OscLinkService"),s.IUnicodeService=(0,a.createDecorator)("UnicodeService"),s.IDecorationService=(0,a.createDecorator)("DecorationService")},1480:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;let a=o(8460),l=o(225);class c{static extractShouldJoin(m){return(1&m)!=0}static extractWidth(m){return m>>1&3}static extractCharKind(m){return m>>3}static createPropertyValue(m,y,g=!1){return(16777215&m)<<3|(3&y)<<1|(g?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new a.EventEmitter,this.onChange=this._onChange.event;let m=new l.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let y=0,g=0,u=m.length;for(let h=0;h<u;++h){let d=m.charCodeAt(h);if(55296<=d&&d<=56319){if(++h>=u)return y+this.wcwidth(d);let C=m.charCodeAt(h);56320<=C&&C<=57343?d=1024*(d-55296)+C-56320+65536:y+=this.wcwidth(C)}let f=this.charProperties(d,g),v=c.extractWidth(f);c.extractShouldJoin(f)&&(v-=c.extractWidth(g)),y+=v,g=f}return y}charProperties(m,y){return this._activeProvider.charProperties(m,y)}}s.UnicodeService=c}},e={};function n(i){var s=e[i];if(s!==void 0)return s.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;let s=n(9042),o=n(3236),a=n(844),l=n(5741),c=n(8285),p=n(7975),m=n(7090),y=["cols","rows"];class g extends a.Disposable{constructor(h){super(),this._core=this.register(new o.Terminal(h)),this._addonManager=this.register(new l.AddonManager),this._publicOptions=H({},this._core.options);let d=v=>this._core.options[v],f=(v,C)=>{this._checkReadonlyOptions(v),this._core.options[v]=C};for(let v in this._core.options){let C={get:d.bind(this,v),set:f.bind(this,v)};Object.defineProperty(this._publicOptions,v,C)}}_checkReadonlyOptions(h){if(y.includes(h))throw new Error(`Option "${h}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new c.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let h=this._core.coreService.decPrivateModes,d="none";switch(this._core.coreMouseService.activeProtocol){case"X10":d="x10";break;case"VT200":d="vt200";break;case"DRAG":d="drag";break;case"ANY":d="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:d,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}}get options(){return this._publicOptions}set options(h){for(let d in h)this._publicOptions[d]=h[d]}blur(){this._core.blur()}focus(){this._core.focus()}input(h,d=!0){this._core.input(h,d)}resize(h,d){this._verifyIntegers(h,d),this._core.resize(h,d)}open(h){this._core.open(h)}attachCustomKeyEventHandler(h){this._core.attachCustomKeyEventHandler(h)}attachCustomWheelEventHandler(h){this._core.attachCustomWheelEventHandler(h)}registerLinkProvider(h){return this._core.registerLinkProvider(h)}registerCharacterJoiner(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)}deregisterCharacterJoiner(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)}registerMarker(h=0){return this._verifyIntegers(h),this._core.registerMarker(h)}registerDecoration(h){return this._checkProposedApi(),this._verifyPositiveIntegers(h.x??0,h.width??0,h.height??0),this._core.registerDecoration(h)}hasSelection(){return this._core.hasSelection()}select(h,d,f){this._verifyIntegers(h,d,f),this._core.select(h,d,f)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(h,d){this._verifyIntegers(h,d),this._core.selectLines(h,d)}dispose(){super.dispose()}scrollLines(h){this._verifyIntegers(h),this._core.scrollLines(h)}scrollPages(h){this._verifyIntegers(h),this._core.scrollPages(h)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(h){this._verifyIntegers(h),this._core.scrollToLine(h)}clear(){this._core.clear()}write(h,d){this._core.write(h,d)}writeln(h,d){this._core.write(h),this._core.write(`\r
`,d)}paste(h){this._core.paste(h)}refresh(h,d){this._verifyIntegers(h,d),this._core.refresh(h,d)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(h){this._addonManager.loadAddon(this,h)}static get strings(){return s}_verifyIntegers(...h){for(let d of h)if(d===1/0||isNaN(d)||d%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...h){for(let d of h)if(d&&(d===1/0||isNaN(d)||d%1!=0||d<0))throw new Error("This API only accepts positive integers")}}i.Terminal=g})(),r})())});function dd(t,e){return Object.is(t,e)}var Ve=null,ls=!1,us=1,Gt=Symbol("SIGNAL");function ge(t){let e=Ve;return Ve=t,e}function hd(){return Ve}var oi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Da(t){if(ls)throw new Error("");if(Ve===null)return;Ve.consumerOnSignalRead(t);let e=Ve.nextProducerIndex++;if(ps(Ve),e<Ve.producerNode.length&&Ve.producerNode[e]!==t&&si(Ve)){let n=Ve.producerNode[e];fs(n,Ve.producerIndexOfThis[e])}Ve.producerNode[e]!==t&&(Ve.producerNode[e]=t,Ve.producerIndexOfThis[e]=si(Ve)?md(t,Ve,e):0),Ve.producerLastReadVersion[e]=t.version}function ov(){us++}function fd(t){if(!(si(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===us)){if(!t.producerMustRecompute(t)&&!Ia(t)){t.dirty=!1,t.lastCleanEpoch=us;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=us}}function pd(t){if(t.liveConsumerNode===void 0)return;let e=ls;ls=!0;try{for(let n of t.liveConsumerNode)n.dirty||av(n)}finally{ls=e}}function gd(){return Ve?.consumerAllowSignalWrites!==!1}function av(t){t.dirty=!0,pd(t),t.consumerMarkedDirty?.(t)}function hs(t){return t&&(t.nextProducerIndex=0),ge(t)}function Ea(t,e){if(ge(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(si(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)fs(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ia(t){ps(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(fd(n),r!==n.version))return!0}return!1}function Ma(t){if(ps(t),si(t))for(let e=0;e<t.producerNode.length;e++)fs(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function md(t,e,n){if(vd(t),t.liveConsumerNode.length===0&&_d(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=md(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function fs(t,e){if(vd(t),t.liveConsumerNode.length===1&&_d(t))for(let r=0;r<t.producerNode.length;r++)fs(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ps(i),i.producerIndexOfThis[r]=e}}function si(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ps(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function vd(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function _d(t){return t.producerNode!==void 0}function yd(t){let e=Object.create(cv);e.computation=t;let n=()=>{if(fd(e),Da(e),e.value===ds)throw e.error;return e.value};return n[Gt]=e,n}var wa=Symbol("UNSET"),ba=Symbol("COMPUTING"),ds=Symbol("ERRORED"),cv=_e(H({},oi),{value:wa,dirty:!0,error:null,equal:dd,producerMustRecompute(t){return t.value===wa||t.value===ba},producerRecomputeValue(t){if(t.value===ba)throw new Error("Detected cycle in computations.");let e=t.value;t.value=ba;let n=hs(t),r;try{r=t.computation()}catch(i){r=ds,t.error=i}finally{Ea(t,n)}if(e!==wa&&e!==ds&&r!==ds&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function lv(){throw new Error}var Cd=lv;function Sd(){Cd()}function wd(t){Cd=t}var uv=null;function bd(t){let e=Object.create(Ed);e.value=t;let n=()=>(Da(e),e.value);return n[Gt]=e,n}function xa(t,e){gd()||Sd(),t.equal(t.value,e)||(t.value=e,dv(t))}function Dd(t,e){gd()||Sd(),xa(t,e(t.value))}var Ed=_e(H({},oi),{equal:dd,value:void 0});function dv(t){t.version++,ov(),pd(t),uv?.()}function re(t){return typeof t=="function"}function sr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var gs=sr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ai(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ne=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(s){e=s instanceof gs?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Id(s)}catch(o){e=e??[],o instanceof gs?e=[...e,...o.errors]:e.push(o)}}if(e)throw new gs(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Id(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ai(n,e)}remove(e){let{_finalizers:n}=this;n&&ai(n,e),e instanceof t&&e._removeParent(this)}};Ne.EMPTY=(()=>{let t=new Ne;return t.closed=!0,t})();var Aa=Ne.EMPTY;function ms(t){return t instanceof Ne||t&&"closed"in t&&re(t.remove)&&re(t.add)&&re(t.unsubscribe)}function Id(t){re(t)?t():t.unsubscribe()}var Ct={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var or={setTimeout(t,e,...n){let{delegate:r}=or;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=or;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function vs(t){or.setTimeout(()=>{let{onUnhandledError:e}=Ct;if(e)e(t);else throw t})}function ci(){}var Md=Ta("C",void 0,void 0);function xd(t){return Ta("E",void 0,t)}function Ad(t){return Ta("N",t,void 0)}function Ta(t,e,n){return{kind:t,value:e,error:n}}var Mn=null;function ar(t){if(Ct.useDeprecatedSynchronousErrorHandling){let e=!Mn;if(e&&(Mn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Mn;if(Mn=null,n)throw r}}else t()}function Td(t){Ct.useDeprecatedSynchronousErrorHandling&&Mn&&(Mn.errorThrown=!0,Mn.error=t)}var xn=class extends Ne{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ms(e)&&e.add(this)):this.destination=pv}static create(e,n,r){return new cr(e,n,r)}next(e){this.isStopped?ka(Ad(e),this):this._next(e)}error(e){this.isStopped?ka(xd(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ka(Md,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},hv=Function.prototype.bind;function Ra(t,e){return hv.call(t,e)}var Oa=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){_s(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){_s(r)}else _s(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){_s(n)}}},cr=class extends xn{constructor(e,n,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ct.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ra(e.next,s),error:e.error&&Ra(e.error,s),complete:e.complete&&Ra(e.complete,s)}):i=e}this.destination=new Oa(i)}};function _s(t){Ct.useDeprecatedSynchronousErrorHandling?Td(t):vs(t)}function fv(t){throw t}function ka(t,e){let{onStoppedNotification:n}=Ct;n&&or.setTimeout(()=>n(t,e))}var pv={closed:!0,next:ci,error:fv,complete:ci};var lr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function st(t){return t}function Na(...t){return La(t)}function La(t){return t.length===0?st:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Se=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=mv(n)?n:new cr(n,r,i);return ar(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Rd(r),new r((i,s)=>{let o=new cr({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[lr](){return this}pipe(...n){return La(n)(this)}toPromise(n){return n=Rd(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Rd(t){var e;return(e=t??Ct.Promise)!==null&&e!==void 0?e:Promise}function gv(t){return t&&re(t.next)&&re(t.error)&&re(t.complete)}function mv(t){return t&&t instanceof xn||gv(t)&&ms(t)}function Pa(t){return re(t?.lift)}function ve(t){return e=>{if(Pa(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(t,e,n,r,i){return new Fa(t,e,n,r,i)}var Fa=class extends xn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ur(){return ve((t,e)=>{let n=null;t._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var dr=class extends Se{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Pa(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ne;let n=this.getSubject();e.add(this.source.subscribe(fe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ne.EMPTY)}return e}refCount(){return ur()(this)}};var kd=sr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=(()=>{class t extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ys(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new kd}next(n){ar(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ar(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ar(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Aa:(this.currentObservers=null,s.push(n),new Ne(()=>{this.currentObservers=null,ai(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new Se;return n.source=this,n}}return t.create=(e,n)=>new ys(e,n),t})(),ys=class extends Me{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Aa}};var $e=class extends Me{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ot=new Se(t=>t.complete());function Od(t){return t&&re(t.schedule)}function Nd(t){return t[t.length-1]}function Cs(t){return re(Nd(t))?t.pop():void 0}function ln(t){return Od(Nd(t))?t.pop():void 0}function Pd(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(p){try{c(r.next(p))}catch(m){o(m)}}function l(p){try{c(r.throw(p))}catch(m){o(m)}}function c(p){p.done?s(p.value):i(p.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Ld(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function An(t){return this instanceof An?(this.v=t,this):new An(t)}function Fd(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(u){return Promise.resolve(u).then(g,m)}}function a(g,u){r[g]&&(i[g]=function(h){return new Promise(function(d,f){s.push([g,h,d,f])>1||l(g,h)})},u&&(i[g]=u(i[g])))}function l(g,u){try{c(r[g](u))}catch(h){y(s[0][3],h)}}function c(g){g.value instanceof An?Promise.resolve(g.value.v).then(p,m):y(s[0][2],g)}function p(g){l("next",g)}function m(g){l("throw",g)}function y(g,u){g(u),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Bd(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ld=="function"?Ld(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var Ss=t=>t&&typeof t.length=="number"&&typeof t!="function";function ws(t){return re(t?.then)}function bs(t){return re(t[lr])}function Ds(t){return Symbol.asyncIterator&&re(t?.[Symbol.asyncIterator])}function Es(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function vv(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Is=vv();function Ms(t){return re(t?.[Is])}function xs(t){return Fd(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield An(n.read());if(i)return yield An(void 0);yield yield An(r)}}finally{n.releaseLock()}})}function As(t){return re(t?.getReader)}function Le(t){if(t instanceof Se)return t;if(t!=null){if(bs(t))return _v(t);if(Ss(t))return yv(t);if(ws(t))return Cv(t);if(Ds(t))return Vd(t);if(Ms(t))return Sv(t);if(As(t))return wv(t)}throw Es(t)}function _v(t){return new Se(e=>{let n=t[lr]();if(re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yv(t){return new Se(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Cv(t){return new Se(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,vs)})}function Sv(t){return new Se(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Vd(t){return new Se(e=>{bv(t,e).catch(n=>e.error(n))})}function wv(t){return Vd(xs(t))}function bv(t,e){var n,r,i,s;return Pd(this,void 0,void 0,function*(){try{for(n=Bd(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Xe(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Ts(t,e=0){return ve((n,r)=>{n.subscribe(fe(r,i=>Xe(r,t,()=>r.next(i),e),()=>Xe(r,t,()=>r.complete(),e),i=>Xe(r,t,()=>r.error(i),e)))})}function Rs(t,e=0){return ve((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function jd(t,e){return Le(t).pipe(Rs(e),Ts(e))}function Hd(t,e){return Le(t).pipe(Rs(e),Ts(e))}function Ud(t,e){return new Se(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function $d(t,e){return new Se(n=>{let r;return Xe(n,e,()=>{r=t[Is](),Xe(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function ks(t,e){if(!t)throw new Error("Iterable cannot be null");return new Se(n=>{Xe(n,e,()=>{let r=t[Symbol.asyncIterator]();Xe(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Wd(t,e){return ks(xs(t),e)}function zd(t,e){if(t!=null){if(bs(t))return jd(t,e);if(Ss(t))return Ud(t,e);if(ws(t))return Hd(t,e);if(Ds(t))return ks(t,e);if(Ms(t))return $d(t,e);if(As(t))return Wd(t,e)}throw Es(t)}function Te(t,e){return e?zd(t,e):Le(t)}function ie(...t){let e=ln(t);return Te(t,e)}function hr(t,e){let n=re(t)?t:()=>t,r=i=>i.error(n());return new Se(e?i=>e.schedule(r,0,i):r)}function Ba(t){return!!t&&(t instanceof Se||re(t.lift)&&re(t.subscribe))}var qt=sr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function de(t,e){return ve((n,r)=>{let i=0;n.subscribe(fe(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:Dv}=Array;function Ev(t,e){return Dv(e)?t(...e):t(e)}function Os(t){return de(e=>Ev(t,e))}var{isArray:Iv}=Array,{getPrototypeOf:Mv,prototype:xv,keys:Av}=Object;function Ns(t){if(t.length===1){let e=t[0];if(Iv(e))return{args:e,keys:null};if(Tv(e)){let n=Av(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Tv(t){return t&&typeof t=="object"&&Mv(t)===xv}function Ls(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ps(...t){let e=ln(t),n=Cs(t),{args:r,keys:i}=Ns(t);if(r.length===0)return Te([],e);let s=new Se(Rv(r,e,i?o=>Ls(i,o):st));return n?s.pipe(Os(n)):s}function Rv(t,e,n=st){return r=>{Gd(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)Gd(e,()=>{let c=Te(t[l],e),p=!1;c.subscribe(fe(r,m=>{s[l]=m,p||(p=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Gd(t,e,n){t?Xe(n,t,e):e()}function qd(t,e,n,r,i,s,o,a){let l=[],c=0,p=0,m=!1,y=()=>{m&&!l.length&&!c&&e.complete()},g=h=>c<r?u(h):l.push(h),u=h=>{s&&e.next(h),c++;let d=!1;Le(n(h,p++)).subscribe(fe(e,f=>{i?.(f),s?g(f):e.next(f)},()=>{d=!0},void 0,()=>{if(d)try{for(c--;l.length&&c<r;){let f=l.shift();o?Xe(e,o,()=>u(f)):u(f)}y()}catch(f){e.error(f)}}))};return t.subscribe(fe(e,g,()=>{m=!0,y()})),()=>{a?.()}}function je(t,e,n=1/0){return re(e)?je((r,i)=>de((s,o)=>e(r,s,i,o))(Le(t(r,i))),n):(typeof e=="number"&&(n=e),ve((r,i)=>qd(r,i,t,n)))}function Va(t=1/0){return je(st,t)}function Kd(){return Va(1)}function fr(...t){return Kd()(Te(t,ln(t)))}function Fs(t){return new Se(e=>{Le(t()).subscribe(e)})}function ja(...t){let e=Cs(t),{args:n,keys:r}=Ns(t),i=new Se(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let p=0;p<o;p++){let m=!1;Le(n[p]).subscribe(fe(s,y=>{m||(m=!0,c--),a[p]=y},()=>l--,void 0,()=>{(!l||!m)&&(c||s.next(r?Ls(r,a):a),s.complete())}))}});return e?i.pipe(Os(e)):i}function St(t,e){return ve((n,r)=>{let i=0;n.subscribe(fe(r,s=>t.call(e,s,i++)&&r.next(s)))})}function un(t){return ve((e,n)=>{let r=null,i=!1,s;r=e.subscribe(fe(n,void 0,void 0,o=>{s=Le(t(o,un(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Zd(t,e,n,r,i){return(s,o)=>{let a=n,l=e,c=0;s.subscribe(fe(o,p=>{let m=c++;l=a?t(l,p,m):(a=!0,p),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function pr(t,e){return re(e)?je(t,e,1):je(t,1)}function dn(t){return ve((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Kt(t){return t<=0?()=>ot:ve((e,n)=>{let r=0;e.subscribe(fe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ha(t){return de(()=>t)}function Bs(t=kv){return ve((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function kv(){return new qt}function li(t){return ve((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function kt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?St((i,s)=>t(i,s,r)):st,Kt(1),n?dn(e):Bs(()=>new qt))}function gr(t){return t<=0?()=>ot:ve((e,n)=>{let r=[];e.subscribe(fe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Ua(t,e){let n=arguments.length>=2;return r=>r.pipe(t?St((i,s)=>t(i,s,r)):st,gr(1),n?dn(e):Bs(()=>new qt))}function $a(t,e){return ve(Zd(t,e,arguments.length>=2,!0))}function Wa(...t){let e=ln(t);return ve((n,r)=>{(e?fr(t,n,e):fr(t,n)).subscribe(r)})}function wt(t,e){return ve((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(fe(r,l=>{i?.unsubscribe();let c=0,p=s++;Le(t(l,p)).subscribe(i=fe(r,m=>r.next(e?e(l,m,p,c++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function za(t){return ve((e,n)=>{Le(t).subscribe(fe(n,()=>n.complete(),ci)),!n.closed&&e.subscribe(n)})}function We(t,e,n){let r=re(t)||e||n?{next:t,error:e,complete:n}:t;return r?ve((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(fe(s,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),s.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):st}var Ov="https://g.co/ng/security#xss",Z=class extends Error{constructor(e,n){super(ol(e,n)),this.code=e}};function ol(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function yi(t){return{toString:t}.toString()}var Vs="__parameters__";function Nv(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Nh(t,e,n){return yi(()=>{let r=Nv(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,c,p){let m=l.hasOwnProperty(Vs)?l[Vs]:Object.defineProperty(l,Vs,{value:[]})[Vs];for(;m.length<=p;)m.push(null);return(m[p]=m[p]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var oc=globalThis;function De(t){for(let e in t)if(t[e]===De)return e;throw Error("Could not find renamed property on target object.")}function Lv(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ye(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ye).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function ac(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Pv=De({__forward_ref__:De});function Xt(t){return t.__forward_ref__=Xt,t.toString=function(){return Ye(this())},t}function Ze(t){return Lh(t)?t():t}function Lh(t){return typeof t=="function"&&t.hasOwnProperty(Pv)&&t.__forward_ref__===Xt}function J(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function $n(t){return{providers:t.providers||[],imports:t.imports||[]}}function mo(t){return Yd(t,Fh)||Yd(t,Bh)}function Ph(t){return mo(t)!==null}function Yd(t,e){return t.hasOwnProperty(e)?t[e]:null}function Fv(t){let e=t&&(t[Fh]||t[Bh]);return e||null}function Qd(t){return t&&(t.hasOwnProperty(Xd)||t.hasOwnProperty(Bv))?t[Xd]:null}var Fh=De({\u0275prov:De}),Xd=De({\u0275inj:De}),Bh=De({ngInjectableDef:De}),Bv=De({ngInjectorDef:De}),te=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=J({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Vh(t){return t&&!!t.\u0275providers}var Vv=De({\u0275cmp:De}),jv=De({\u0275dir:De}),Hv=De({\u0275pipe:De}),Uv=De({\u0275mod:De}),Ks=De({\u0275fac:De}),ui=De({__NG_ELEMENT_ID__:De}),Jd=De({__NG_ENV_ID__:De});function al(t){return typeof t=="string"?t:t==null?"":String(t)}function $v(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():al(t)}function Wv(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Z(-200,t)}function cl(t,e){throw new Z(-201,!1)}var le=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(le||{}),cc;function jh(){return cc}function dt(t){let e=cc;return cc=t,e}function Hh(t,e,n){let r=mo(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&le.Optional)return null;if(e!==void 0)return e;cl(t,"Injector")}var zv={},di=zv,lc="__NG_DI_FLAG__",Zs="ngTempTokenPath",Gv="ngTokenPath",qv=/\n/gm,Kv="\u0275",eh="__source",yr;function Zv(){return yr}function hn(t){let e=yr;return yr=t,e}function Yv(t,e=le.Default){if(yr===void 0)throw new Z(-203,!1);return yr===null?Hh(t,void 0,e):yr.get(t,e&le.Optional?null:void 0,e)}function pe(t,e=le.Default){return(jh()||Yv)(Ze(t),e)}function U(t,e=le.Default){return pe(t,vo(e))}function vo(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function uc(t){let e=[];for(let n=0;n<t.length;n++){let r=Ze(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,s=le.Default;for(let o=0;o<r.length;o++){let a=r[o],l=Qv(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(pe(i,s))}else e.push(pe(r))}return e}function Uh(t,e){return t[lc]=e,t.prototype[lc]=e,t}function Qv(t){return t[lc]}function Xv(t,e,n,r){let i=t[Zs];throw e[eh]&&i.unshift(e[eh]),t.message=Jv(`
`+t.message,i,n,r),t[Gv]=i,t[Zs]=null,t}function Jv(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Kv?t.slice(2):t;let i=Ye(e);if(Array.isArray(e))i=e.map(Ye).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ye(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(qv,`
  `)}`}var ll=Uh(Nh("Optional"),8);var $h=Uh(Nh("SkipSelf"),4);function Sr(t,e){let n=t.hasOwnProperty(Ks);return n?t[Ks]:null}function e_(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function t_(t){return t.flat(Number.POSITIVE_INFINITY)}function ul(t,e){t.forEach(n=>Array.isArray(n)?ul(n,e):e(n))}function Wh(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ys(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function n_(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function _o(t,e,n){let r=Ci(t,e);return r>=0?t[r|1]=n:(r=~r,n_(t,r,e,n)),r}function Ga(t,e){let n=Ci(t,e);if(n>=0)return t[n|1]}function Ci(t,e){return r_(t,e,1)}function r_(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var wr={},Je=[],br=new te(""),zh=new te("",-1),Gh=new te(""),Qs=class{get(e,n=di){if(n===di){let r=new Error(`NullInjectorError: No provider for ${Ye(e)}!`);throw r.name="NullInjectorError",r}return n}},qh=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(qh||{}),Lt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Lt||{}),gn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(gn||{});function i_(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function dc(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];o_(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function s_(t){return t===3||t===4||t===6}function o_(t){return t.charCodeAt(0)===64}function hi(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?th(t,n,i,null,e[++r]):th(t,n,i,null,null))}}return t}function th(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Kh="ng-template";function a_(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&i_(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(dl(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function dl(t){return t.type===4&&t.value!==Kh}function c_(t,e,n){let r=t.type===4&&!n?Kh:t.value;return e===r}function l_(t,e,n){let r=4,i=t.attrs,s=i!==null?h_(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!bt(r)&&!bt(l))return!1;if(o&&bt(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!c_(t,l,n)||l===""&&e.length===1){if(bt(r))return!1;o=!0}}else if(r&8){if(i===null||!a_(t,i,l,n)){if(bt(r))return!1;o=!0}}else{let c=e[++a],p=u_(l,i,dl(t),n);if(p===-1){if(bt(r))return!1;o=!0;continue}if(c!==""){let m;if(p>s?m="":m=i[p+1].toLowerCase(),r&2&&c!==m){if(bt(r))return!1;o=!0}}}}return bt(r)||o}function bt(t){return(t&1)===0}function u_(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return f_(e,t)}function d_(t,e,n=!1){for(let r=0;r<e.length;r++)if(l_(t,e[r],n))return!0;return!1}function h_(t){for(let e=0;e<t.length;e++){let n=t[e];if(s_(n))return e}return t.length}function f_(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function nh(t,e){return t?":not("+e.trim()+")":e}function p_(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!bt(o)&&(e+=nh(s,i),i=""),r=o,s=s||!bt(r);n++}return i!==""&&(e+=nh(s,i)),e}function g_(t){return t.map(p_).join(",")}function m_(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!bt(i))break;i=s}r++}return{attrs:e,classes:n}}function nt(t){return yi(()=>{let e=Jh(t),n=_e(H({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===qh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Lt.Emulated,styles:t.styles||Je,_:null,schemas:t.schemas||null,tView:null,id:""});ef(n);let r=t.dependencies;return n.directiveDefs=ih(r,!1),n.pipeDefs=ih(r,!0),n.id=y_(n),n})}function v_(t){return kn(t)||Zh(t)}function __(t){return t!==null}function Wn(t){return yi(()=>({type:t.type,bootstrap:t.bootstrap||Je,declarations:t.declarations||Je,imports:t.imports||Je,exports:t.exports||Je,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function rh(t,e){if(t==null)return wr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=gn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==gn.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Ue(t){return yi(()=>{let e=Jh(t);return ef(e),e})}function kn(t){return t[Vv]||null}function Zh(t){return t[jv]||null}function Yh(t){return t[Hv]||null}function Qh(t){let e=kn(t)||Zh(t)||Yh(t);return e!==null?e.standalone:!1}function Xh(t,e){let n=t[Uv]||null;if(!n&&e===!0)throw new Error(`Type ${Ye(t)} does not have '\u0275mod' property.`);return n}function Jh(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||wr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Je,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:rh(t.inputs,e),outputs:rh(t.outputs),debugInfo:null}}function ef(t){t.features?.forEach(e=>e(t))}function ih(t,e){if(!t)return null;let n=e?Yh:v_;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(__)}function y_(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function yo(t){return{\u0275providers:t}}function C_(...t){return{\u0275providers:tf(!0,t),\u0275fromNgModule:!0}}function tf(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return ul(e,o=>{let a=o;hc(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&nf(i,s),n}function nf(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];hl(i,s=>{e(s,r)})}}function hc(t,e,n,r){if(t=Ze(t),!t)return!1;let i=null,s=Qd(t),o=!s&&kn(t);if(!s&&!o){let l=t.ngModule;if(s=Qd(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)hc(c,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;try{ul(s.imports,p=>{hc(p,e,n,r)&&(c||=[],c.push(p))})}finally{}c!==void 0&&nf(c,e)}if(!a){let c=Sr(i)||(()=>new i);e({provide:i,useFactory:c,deps:Je},i),e({provide:Gh,useValue:i,multi:!0},i),e({provide:br,useValue:()=>pe(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let c=t;hl(l,p=>{e(p,c)})}}else return!1;return i!==t&&t.providers!==void 0}function hl(t,e){for(let n of t)Vh(n)&&(n=n.\u0275providers),Array.isArray(n)?hl(n,e):e(n)}var S_=De({provide:String,useValue:De});function rf(t){return t!==null&&typeof t=="object"&&S_ in t}function w_(t){return!!(t&&t.useExisting)}function b_(t){return!!(t&&t.useFactory)}function Dr(t){return typeof t=="function"}function D_(t){return!!t.useClass}var Co=new te(""),Us={},E_={},qa;function fl(){return qa===void 0&&(qa=new Qs),qa}var ft=class{},fi=class extends ft{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,pc(e,o=>this.processProvider(o)),this.records.set(zh,mr(void 0,this)),i.has("environment")&&this.records.set(ft,mr(void 0,this));let s=this.records.get(Co);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Gh,Je,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=hn(this),r=dt(void 0),i;try{return e()}finally{hn(n),dt(r)}}get(e,n=di,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Jd))return e[Jd](this);r=vo(r);let i,s=hn(this),o=dt(void 0);try{if(!(r&le.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=T_(e)&&mo(e);c&&this.injectableDefInScope(c)?l=mr(fc(e),Us):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&le.Self?fl():this.parent;return n=r&le.Optional&&n===di?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Zs]=a[Zs]||[]).unshift(Ye(e)),s)throw a;return Xv(a,e,"R3InjectorError",this.source)}else throw a}finally{dt(o),hn(s)}}resolveInjectorInitializers(){let e=ge(null),n=hn(this),r=dt(void 0),i;try{let s=this.get(br,Je,le.Self);for(let o of s)o()}finally{hn(n),dt(r),ge(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ye(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Z(205,!1)}processProvider(e){e=Ze(e);let n=Dr(e)?e:Ze(e&&e.provide),r=M_(e);if(!Dr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=mr(void 0,Us,!0),i.factory=()=>uc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ge(null);try{return n.value===Us&&(n.value=E_,n.value=n.factory()),typeof n.value=="object"&&n.value&&A_(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ge(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ze(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function fc(t){let e=mo(t),n=e!==null?e.factory:Sr(t);if(n!==null)return n;if(t instanceof te)throw new Z(204,!1);if(t instanceof Function)return I_(t);throw new Z(204,!1)}function I_(t){if(t.length>0)throw new Z(204,!1);let n=Fv(t);return n!==null?()=>n.factory(t):()=>new t}function M_(t){if(rf(t))return mr(void 0,t.useValue);{let e=sf(t);return mr(e,Us)}}function sf(t,e,n){let r;if(Dr(t)){let i=Ze(t);return Sr(i)||fc(i)}else if(rf(t))r=()=>Ze(t.useValue);else if(b_(t))r=()=>t.useFactory(...uc(t.deps||[]));else if(w_(t))r=()=>pe(Ze(t.useExisting));else{let i=Ze(t&&(t.useClass||t.provide));if(x_(t))r=()=>new i(...uc(t.deps));else return Sr(i)||fc(i)}return r}function mr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function x_(t){return!!t.deps}function A_(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function T_(t){return typeof t=="function"||typeof t=="object"&&t instanceof te}function pc(t,e){for(let n of t)Array.isArray(n)?pc(n,e):n&&Vh(n)?pc(n.\u0275providers,e):e(n)}function Ht(t,e){t instanceof fi&&t.assertNotDestroyed();let n,r=hn(t),i=dt(void 0);try{return e()}finally{hn(r),dt(i)}}function of(){return jh()!==void 0||Zv()!=null}function R_(t){if(!of())throw new Z(-203,!1)}function k_(t){return typeof t=="function"}var Jt=0,se=1,ee=2,Ke=3,Dt=4,Et=5,Xs=6,Js=7,pt=8,Er=9,Zt=10,Oe=11,pi=12,sh=13,kr=14,Pt=15,On=16,vr=17,Yt=18,So=19,af=20,fn=21,Ka=22,ht=23,Ft=25,cf=1;var Nn=7,eo=8,Ir=9,tt=10,to=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(to||{});function pn(t){return Array.isArray(t)&&typeof t[cf]=="object"}function en(t){return Array.isArray(t)&&t[cf]===!0}function lf(t){return(t.flags&4)!==0}function wo(t){return t.componentOffset>-1}function pl(t){return(t.flags&1)===1}function mn(t){return!!t.template}function gc(t){return(t[ee]&512)!==0}var mc=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function uf(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function _n(){return df}function df(t){return t.type.prototype.ngOnChanges&&(t.setInput=N_),O_}_n.ngInherit=!0;function O_(){let t=ff(this),e=t?.current;if(e){let n=t.previous;if(n===wr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function N_(t,e,n,r,i){let s=this.declaredInputs[r],o=ff(t)||L_(t,{previous:wr,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new mc(c&&c.currentValue,n,l===wr),uf(t,e,i,n)}var hf="__ngSimpleChanges__";function ff(t){return t[hf]||null}function L_(t,e){return t[hf]=e}var oh=null;var Ot=function(t,e,n){oh?.(t,e,n)},P_="svg",F_="math";function Bt(t){for(;Array.isArray(t);)t=t[Jt];return t}function pf(t,e){return Bt(e[t])}function gt(t,e){return Bt(e[t.index])}function gl(t,e){return t.data[e]}function yn(t,e){let n=e[t];return pn(n)?n:n[Jt]}function B_(t){return(t[ee]&4)===4}function ml(t){return(t[ee]&128)===128}function V_(t){return en(t[Ke])}function no(t,e){return e==null?null:t[e]}function gf(t){t[vr]=0}function mf(t){t[ee]&1024||(t[ee]|=1024,ml(t)&&bo(t))}function j_(t,e){for(;t>0;)e=e[kr],t--;return e}function gi(t){return!!(t[ee]&9216||t[ht]?.dirty)}function vc(t){t[Zt].changeDetectionScheduler?.notify(7),t[ee]&64&&(t[ee]|=1024),gi(t)&&bo(t)}function bo(t){t[Zt].changeDetectionScheduler?.notify(0);let e=Ln(t);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!ml(e)));)e=Ln(e)}function vf(t,e){if((t[ee]&256)===256)throw new Z(911,!1);t[fn]===null&&(t[fn]=[]),t[fn].push(e)}function H_(t,e){if(t[fn]===null)return;let n=t[fn].indexOf(e);n!==-1&&t[fn].splice(n,1)}function Ln(t){let e=t[Ke];return en(e)?e[Ke]:e}var ue={lFrame:Mf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var _f=!1;function U_(){return ue.lFrame.elementDepthCount}function $_(){ue.lFrame.elementDepthCount++}function W_(){ue.lFrame.elementDepthCount--}function yf(){return ue.bindingsEnabled}function z_(){return ue.skipHydrationRootTNode!==null}function G_(t){return ue.skipHydrationRootTNode===t}function q_(){ue.skipHydrationRootTNode=null}function Ce(){return ue.lFrame.lView}function ze(){return ue.lFrame.tView}function Pe(t){return ue.lFrame.contextLView=t,t[pt]}function Fe(t){return ue.lFrame.contextLView=null,t}function rt(){let t=Cf();for(;t!==null&&t.type===64;)t=t.parent;return t}function Cf(){return ue.lFrame.currentTNode}function K_(){let t=ue.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Si(t,e){let n=ue.lFrame;n.currentTNode=t,n.isParent=e}function Sf(){return ue.lFrame.isParent}function Z_(){ue.lFrame.isParent=!1}function wf(){return _f}function ah(t){_f=t}function Y_(){let t=ue.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Q_(t){return ue.lFrame.bindingIndex=t}function wi(){return ue.lFrame.bindingIndex++}function bf(t){let e=ue.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function X_(){return ue.lFrame.inI18n}function J_(t,e){let n=ue.lFrame;n.bindingIndex=n.bindingRootIndex=t,_c(e)}function ey(){return ue.lFrame.currentDirectiveIndex}function _c(t){ue.lFrame.currentDirectiveIndex=t}function ty(t){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Df(){return ue.lFrame.currentQueryIndex}function vl(t){ue.lFrame.currentQueryIndex=t}function ny(t){let e=t[se];return e.type===2?e.declTNode:e.type===1?t[Et]:null}function Ef(t,e,n){if(n&le.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&le.Host);)if(i=ny(s),i===null||(s=s[kr],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ue.lFrame=If();return r.currentTNode=e,r.lView=t,!0}function _l(t){let e=If(),n=t[se];ue.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function If(){let t=ue.lFrame,e=t===null?null:t.child;return e===null?Mf(t):e}function Mf(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function xf(){let t=ue.lFrame;return ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Af=xf;function yl(){let t=xf();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ry(t){return(ue.lFrame.contextLView=j_(t,ue.lFrame.contextLView))[pt]}function zn(){return ue.lFrame.selectedIndex}function Pn(t){ue.lFrame.selectedIndex=t}function Do(){let t=ue.lFrame;return gl(t.tView,t.selectedIndex)}function iy(){return ue.lFrame.currentNamespace}var Tf=!0;function Cl(){return Tf}function Sl(t){Tf=t}function sy(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=df(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function wl(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:p}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),p!=null&&(t.destroyHooks??=[]).push(n,p)}}function $s(t,e,n){Rf(t,e,3,n)}function Ws(t,e,n,r){(t[ee]&3)===n&&Rf(t,e,n,r)}function Za(t,e){let n=t[ee];(n&3)===e&&(n&=16383,n+=1,t[ee]=n)}function Rf(t,e,n,r){let i=r!==void 0?t[vr]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[vr]+=65536),(a<s||s==-1)&&(oy(t,n,e,l),t[vr]=(t[vr]&4294901760)+l+2),l++}function ch(t,e){Ot(4,t,e);let n=ge(null);try{e.call(t)}finally{ge(n),Ot(5,t,e)}}function oy(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[ee]>>14<t[vr]>>16&&(t[ee]&3)===e&&(t[ee]+=16384,ch(a,s)):ch(a,s)}var Cr=-1,Fn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function ay(t){return t instanceof Fn}function cy(t){return(t.flags&8)!==0}function ly(t){return(t.flags&16)!==0}var Ya={},yc=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=vo(r);let i=this.injector.get(e,Ya,r);return i!==Ya||n===Ya?i:this.parentInjector.get(e,n,r)}};function kf(t){return t!==Cr}function ro(t){return t&32767}function uy(t){return t>>16}function io(t,e){let n=uy(t),r=e;for(;n>0;)r=r[kr],n--;return r}var Cc=!0;function lh(t){let e=Cc;return Cc=t,e}var dy=256,Of=dy-1,Nf=5,hy=0,Nt={};function fy(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ui)&&(r=n[ui]),r==null&&(r=n[ui]=hy++);let i=r&Of,s=1<<i;e.data[t+(i>>Nf)]|=s}function so(t,e){let n=Lf(t,e);if(n!==-1)return n;let r=e[se];r.firstCreatePass&&(t.injectorIndex=e.length,Qa(r.data,t),Qa(e,null),Qa(r.blueprint,null));let i=bl(t,e),s=t.injectorIndex;if(kf(i)){let o=ro(i),a=io(i,e),l=a[se].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function Qa(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Lf(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function bl(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=jf(i),r===null)return Cr;if(n++,i=i[kr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Cr}function Sc(t,e,n){fy(t,e,n)}function Pf(t,e,n){if(n&le.Optional||t!==void 0)return t;cl(e,"NodeInjector")}function Ff(t,e,n,r){if(n&le.Optional&&r===void 0&&(r=null),!(n&(le.Self|le.Host))){let i=t[Er],s=dt(void 0);try{return i?i.get(e,r,n&le.Optional):Hh(e,r,n&le.Optional)}finally{dt(s)}}return Pf(r,e,n)}function Bf(t,e,n,r=le.Default,i){if(t!==null){if(e[ee]&2048&&!(r&le.Self)){let o=vy(t,e,n,r,Nt);if(o!==Nt)return o}let s=Vf(t,e,n,r,Nt);if(s!==Nt)return s}return Ff(e,n,r,i)}function Vf(t,e,n,r,i){let s=gy(n);if(typeof s=="function"){if(!Ef(e,t,r))return r&le.Host?Pf(i,n,r):Ff(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&le.Optional))cl(n);else return o}finally{Af()}}else if(typeof s=="number"){let o=null,a=Lf(t,e),l=Cr,c=r&le.Host?e[Pt][Et]:null;for((a===-1||r&le.SkipSelf)&&(l=a===-1?bl(t,e):e[a+8],l===Cr||!dh(r,!1)?a=-1:(o=e[se],a=ro(l),e=io(l,e)));a!==-1;){let p=e[se];if(uh(s,a,p.data)){let m=py(a,e,n,o,r,c);if(m!==Nt)return m}l=e[a+8],l!==Cr&&dh(r,e[se].data[a+8]===c)&&uh(s,a,e)?(o=p,a=ro(l),e=io(l,e)):a=-1}}return i}function py(t,e,n,r,i,s){let o=e[se],a=o.data[t+8],l=r==null?wo(a)&&Cc:r!=o&&(a.type&3)!==0,c=i&le.Host&&s===a,p=zs(a,o,n,l,c);return p!==null?Bn(e,o,p,a):Nt}function zs(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,l=t.directiveStart,c=t.directiveEnd,p=s>>20,m=r?a:a+p,y=i?a+p:c;for(let g=m;g<y;g++){let u=o[g];if(g<l&&n===u||g>=l&&u.type===n)return g}if(i){let g=o[l];if(g&&mn(g)&&g.type===n)return l}return null}function Bn(t,e,n,r){let i=t[n],s=e.data;if(ay(i)){let o=i;o.resolving&&Wv($v(s[n]));let a=lh(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?dt(o.injectImpl):null,p=Ef(t,r,le.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&sy(n,s[n],e)}finally{c!==null&&dt(c),lh(a),o.resolving=!1,Af()}}return i}function gy(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ui)?t[ui]:void 0;return typeof e=="number"?e>=0?e&Of:my:e}function uh(t,e,n){let r=1<<t;return!!(n[e+(t>>Nf)]&r)}function dh(t,e){return!(t&le.Self)&&!(t&le.Host&&e)}var Rn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Bf(this._tNode,this._lView,e,vo(r),n)}};function my(){return new Rn(rt(),Ce())}function Cn(t){return yi(()=>{let e=t.prototype.constructor,n=e[Ks]||wc(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ks]||wc(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function wc(t){return Lh(t)?()=>{let e=wc(Ze(t));return e&&e()}:Sr(t)}function vy(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[ee]&2048&&!(o[ee]&512);){let a=Vf(s,o,n,r|le.Self,Nt);if(a!==Nt)return a;let l=s.parent;if(!l){let c=o[af];if(c){let p=c.get(n,Nt,r);if(p!==Nt)return p}l=jf(o),o=o[kr]}s=l}return i}function jf(t){let e=t[se],n=e.type;return n===2?e.declTNode:n===1?t[Et]:null}function hh(t,e=null,n=null,r){let i=Hf(t,e,n,r);return i.resolveInjectorInitializers(),i}function Hf(t,e=null,n=null,r,i=new Set){let s=[n||Je,C_(t)];return r=r||(typeof t=="object"?void 0:Ye(t)),new fi(s,e||fl(),r||null,i)}var Tn=class Tn{static create(e,n){if(Array.isArray(e))return hh({name:""},n,e,"");{let r=e.name??"";return hh({name:r},e.parent,e.providers,r)}}};Tn.THROW_IF_NOT_FOUND=di,Tn.NULL=new Qs,Tn.\u0275prov=J({token:Tn,providedIn:"any",factory:()=>pe(zh)}),Tn.__NG_ELEMENT_ID__=-1;var Vt=Tn;var _y=new te("");_y.__NG_ELEMENT_ID__=t=>{let e=rt();if(e===null)throw new Z(204,!1);if(e.type&2)return e.value;if(t&le.Optional)return null;throw new Z(204,!1)};var yy="ngOriginalError";function Xa(t){return t[yy]}var jt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Xa(e);for(;n&&Xa(n);)n=Xa(n);return n||null}},Uf=new te("",{providedIn:"root",factory:()=>U(jt).handleError.bind(void 0)}),Dl=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Cy,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),bc=class extends Dl{constructor(e){super(),this._lView=e}onDestroy(e){return vf(this._lView,e),()=>H_(this._lView,e)}};function Cy(){return new bc(Ce())}function Sy(){return Or(rt(),Ce())}function Or(t,e){return new mt(gt(t,e))}var mt=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=Sy;let t=e;return t})();function wy(t){return t instanceof mt?t.nativeElement:t}var Nr=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new $e(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=J({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var Dc=class extends Me{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,of()&&(this.destroyRef=U(Dl,{optional:!0})??void 0,this.pendingTasks=U(Nr,{optional:!0})??void 0)}emit(e){let n=ge(null);try{super.next(e)}finally{ge(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ne&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Re=Dc;function by(){return this._results[Symbol.iterator]()}var Ec=class t{get changes(){return this._changes??=new Re}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=by)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=t_(e);(this._changesDetected=!e_(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function $f(t){return(t.flags&128)===128}var Wf=new Map,Dy=0;function Ey(){return Dy++}function Iy(t){Wf.set(t[So],t)}function My(t){Wf.delete(t[So])}var fh="__ngContext__";function Vn(t,e){pn(e)?(t[fh]=e[So],Iy(e)):t[fh]=e}function zf(t){return qf(t[pi])}function Gf(t){return qf(t[Dt])}function qf(t){for(;t!==null&&!en(t);)t=t[Dt];return t}var Ic;function Kf(t){Ic=t}function xy(){if(Ic!==void 0)return Ic;if(typeof document<"u")return document;throw new Z(210,!1)}var El=new te("",{providedIn:"root",factory:()=>Ay}),Ay="ng",Il=new te(""),Gn=new te("",{providedIn:"platform",factory:()=>"unknown"});var Ml=new te("",{providedIn:"root",factory:()=>xy().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ty="h",Ry="b";var ky=()=>null;function xl(t,e,n=!1){return ky(t,e,n)}var Zf=!1,Oy=new te("",{providedIn:"root",factory:()=>Zf});var Mc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ov})`}};function bi(t){return t instanceof Mc?t.changingThisBreaksApplicationSecurity:t}function Eo(t){return t.ownerDocument.defaultView}function Yf(t){return t instanceof Function?t():t}function Ny(t){return(t??U(Vt)).get(Gn)==="browser"}var Qt=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Qt||{}),Ly;function Al(t,e){return Ly(t,e)}function _r(t,e,n,r,i){if(r!=null){let s,o=!1;en(r)?s=r:pn(r)&&(o=!0,r=r[Jt]);let a=Bt(r);t===0&&n!==null?i==null?ep(e,n,a):ao(e,n,a,i||null,!0):t===1&&n!==null?ao(e,n,a,i||null,!0):t===2?Qy(e,a,o):t===3&&e.destroyNode(a),s!=null&&Jy(e,t,s,n,i)}}function Py(t,e){return t.createText(e)}function Fy(t,e,n){t.setValue(e,n)}function Qf(t,e,n){return t.createElement(e,n)}function By(t,e){Xf(t,e),e[Jt]=null,e[Et]=null}function Vy(t,e,n,r,i,s){r[Jt]=i,r[Et]=e,Io(t,r,n,1,i,s)}function Xf(t,e){e[Zt].changeDetectionScheduler?.notify(8),Io(t,e,e[Oe],2,null,null)}function jy(t){let e=t[pi];if(!e)return Ja(t[se],t);for(;e;){let n=null;if(pn(e))n=e[pi];else{let r=e[tt];r&&(n=r)}if(!n){for(;e&&!e[Dt]&&e!==t;)pn(e)&&Ja(e[se],e),e=e[Ke];e===null&&(e=t),pn(e)&&Ja(e[se],e),n=e&&e[Dt]}e=n}}function Hy(t,e,n,r){let i=tt+r,s=n.length;r>0&&(n[i-1][Dt]=e),r<s-tt?(e[Dt]=n[i],Wh(n,tt+r,e)):(n.push(e),e[Dt]=null),e[Ke]=n;let o=e[On];o!==null&&n!==o&&Jf(o,e);let a=e[Yt];a!==null&&a.insertView(t),vc(e),e[ee]|=128}function Jf(t,e){let n=t[Ir],r=e[Ke];if(pn(r))t[ee]|=to.HasTransplantedViews;else{let i=r[Ke][Pt];e[Pt]!==i&&(t[ee]|=to.HasTransplantedViews)}n===null?t[Ir]=[e]:n.push(e)}function Tl(t,e){let n=t[Ir],r=n.indexOf(e);n.splice(r,1)}function oo(t,e){if(t.length<=tt)return;let n=tt+e,r=t[n];if(r){let i=r[On];i!==null&&i!==t&&Tl(i,r),e>0&&(t[n-1][Dt]=r[Dt]);let s=Ys(t,tt+e);By(r[se],r);let o=s[Yt];o!==null&&o.detachView(s[se]),r[Ke]=null,r[Dt]=null,r[ee]&=-129}return r}function Rl(t,e){if(!(e[ee]&256)){let n=e[Oe];n.destroyNode&&Io(t,e,n,3,null,null),jy(e)}}function Ja(t,e){if(e[ee]&256)return;let n=ge(null);try{e[ee]&=-129,e[ee]|=256,e[ht]&&Ma(e[ht]),$y(t,e),Uy(t,e),e[se].type===1&&e[Oe].destroy();let r=e[On];if(r!==null&&en(e[Ke])){r!==e[Ke]&&Tl(r,e);let i=e[Yt];i!==null&&i.detachView(t)}My(e)}finally{ge(n)}}function Uy(t,e){let n=t.cleanup,r=e[Js];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Js]=null);let i=e[fn];if(i!==null){e[fn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function $y(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Fn)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];Ot(4,a,l);try{l.call(a)}finally{Ot(5,a,l)}}else{Ot(4,i,s);try{s.call(i)}finally{Ot(5,i,s)}}}}}function Wy(t,e,n){return zy(t,e.parent,n)}function zy(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Jt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Lt.None||s===Lt.Emulated)return null}return gt(r,n)}}function ao(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ep(t,e,n){t.appendChild(e,n)}function ph(t,e,n,r,i){r!==null?ao(t,e,n,r,i):ep(t,e,n)}function Gy(t,e,n,r){t.removeChild(e,n,r)}function kl(t,e){return t.parentNode(e)}function qy(t,e){return t.nextSibling(e)}function Ky(t,e,n){return Yy(t,e,n)}function Zy(t,e,n){return t.type&40?gt(t,n):null}var Yy=Zy,gh;function Ol(t,e,n,r){let i=Wy(t,r,e),s=e[Oe],o=r.parent||e[Et],a=Ky(o,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)ph(s,i,n[l],a,!1);else ph(s,i,n,a,!1);gh!==void 0&&gh(s,r,e,n,i)}function Gs(t,e){if(e!==null){let n=e.type;if(n&3)return gt(e,t);if(n&4)return xc(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Gs(t,r);{let i=t[e.index];return en(i)?xc(-1,i):Bt(i)}}else{if(n&32)return Al(e,t)()||Bt(t[e.index]);{let r=tp(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ln(t[Pt]);return Gs(i,r)}else return Gs(t,e.next)}}}return null}function tp(t,e){if(e!==null){let r=t[Pt][Et],i=e.projection;return r.projection[i]}return null}function xc(t,e){let n=tt+t+1;if(n<e.length){let r=e[n],i=r[se].firstChild;if(i!==null)return Gs(r,i)}return e[Nn]}function Qy(t,e,n){let r=kl(t,e);r&&Gy(t,r,e,n)}function Nl(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],l=n.type;if(o&&e===0&&(a&&Vn(Bt(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)Nl(t,e,n.child,r,i,s,!1),_r(e,t,i,a,s);else if(l&32){let c=Al(n,r),p;for(;p=c();)_r(e,t,i,p,s);_r(e,t,i,a,s)}else l&16?Xy(t,e,r,n,i,s):_r(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Io(t,e,n,r,i,s){Nl(n,r,t.firstChild,e,i,s,!1)}function Xy(t,e,n,r,i,s){let o=n[Pt],l=o[Et].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let p=l[c];_r(e,t,i,p,s)}else{let c=l,p=o[Ke];$f(r)&&(c.flags|=128),Nl(t,e,c,p,i,s,!0)}}function Jy(t,e,n,r,i){let s=n[Nn],o=Bt(n);s!==o&&_r(e,t,r,s,i);for(let a=tt;a<n.length;a++){let l=n[a];Io(l[se],l,t,e,r,s)}}function e0(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Qt.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Qt.Important),t.setStyle(n,r,i,s))}}function t0(t,e,n){t.setAttribute(e,"style",n)}function np(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function rp(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&dc(t,e,r),i!==null&&np(t,e,i),s!==null&&t0(t,e,s)}var It={};function he(t=1){ip(ze(),Ce(),zn()+t,!1)}function ip(t,e,n,r){if(!r)if((e[ee]&3)===3){let s=t.preOrderCheckHooks;s!==null&&$s(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Ws(e,s,0,n)}Pn(n)}function Q(t,e=le.Default){let n=Ce();if(n===null)return pe(t,e);let r=rt();return Bf(r,n,Ze(t),e)}function sp(t,e,n,r,i,s){let o=ge(null);try{let a=null;i&gn.SignalBased&&(a=e[r][Gt]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&gn.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):uf(e,a,r,s)}finally{ge(o)}}function n0(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Pn(~i);else{let s=i,o=n[++r],a=n[++r];J_(o,s);let l=e[s];a(2,l)}}}finally{Pn(-1)}}function Mo(t,e,n,r,i,s,o,a,l,c,p){let m=e.blueprint.slice();return m[Jt]=i,m[ee]=r|4|128|8|64,(c!==null||t&&t[ee]&2048)&&(m[ee]|=2048),gf(m),m[Ke]=m[kr]=t,m[pt]=n,m[Zt]=o||t&&t[Zt],m[Oe]=a||t&&t[Oe],m[Er]=l||t&&t[Er]||null,m[Et]=s,m[So]=Ey(),m[Xs]=p,m[af]=c,m[Pt]=e.type==2?t[Pt]:m,m}function xo(t,e,n,r,i){let s=t.data[e];if(s===null)s=r0(t,e,n,r,i),X_()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=K_();s.injectorIndex=o===null?-1:o.injectorIndex}return Si(s,!0),s}function r0(t,e,n,r,i){let s=Cf(),o=Sf(),a=o?s:s&&s.parent,l=t.data[e]=l0(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function op(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ap(t,e,n,r,i){let s=zn(),o=r&2;try{Pn(-1),o&&e.length>Ft&&ip(t,e,Ft,!1),Ot(o?2:0,i),n(r,i)}finally{Pn(s),Ot(o?3:1,i)}}function cp(t,e,n){if(lf(e)){let r=ge(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{ge(r)}}}function lp(t,e,n){yf()&&(g0(t,e,n,gt(n,e)),(n.flags&64)===64&&pp(t,e,n))}function up(t,e,n=gt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function dp(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ll(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Ll(t,e,n,r,i,s,o,a,l,c,p){let m=Ft+r,y=m+i,g=i0(m,y),u=typeof c=="function"?c():c;return g[se]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:u,incompleteFirstPass:!1,ssrId:p}}function i0(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:It);return n}function s0(t,e,n,r){let s=r.get(Oy,Zf)||n===Lt.ShadowDom,o=t.selectRootElement(e,s);return o0(o),o}function o0(t){a0(t)}var a0=()=>null;function c0(t,e,n,r){let i=vp(e);i.push(n),t.firstCreatePass&&_p(t).push(r,i.length-1)}function l0(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return z_()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function mh(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,l=gn.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(i!==null){if(!i.hasOwnProperty(s))continue;c=i[s]}t===0?vh(r,n,c,a,l):vh(r,n,c,a)}return r}function vh(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function u0(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],l=null,c=null;for(let p=r;p<i;p++){let m=s[p],y=n?n.get(m):null,g=y?y.inputs:null,u=y?y.outputs:null;l=mh(0,m.inputs,p,l,g),c=mh(1,m.outputs,p,c,u);let h=l!==null&&o!==null&&!dl(e)?I0(l,p,o):null;a.push(h)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function d0(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Pl(t,e,n,r,i,s,o,a){let l=gt(e,n),c=e.inputs,p;!a&&c!=null&&(p=c[r])?(Fl(t,n,p,r,i),wo(e)&&h0(n,e.index)):e.type&3?(r=d0(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(l,r,i)):e.type&12}function h0(t,e){let n=yn(e,t);n[ee]&16||(n[ee]|=64)}function hp(t,e,n,r){if(yf()){let i=r===null?null:{"":-1},s=v0(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&fp(t,e,n,o,i,a),i&&_0(n,r,i)}n.mergedAttrs=hi(n.mergedAttrs,n.attrs)}function fp(t,e,n,r,i,s){for(let c=0;c<r.length;c++)Sc(so(n,e),t,r[c].type);C0(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let p=r[c];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,l=op(t,e,r.length,null);for(let c=0;c<r.length;c++){let p=r[c];n.mergedAttrs=hi(n.mergedAttrs,p.hostAttrs),S0(t,n,e,l,p),y0(l,p,i),p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let m=p.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}u0(t,n,s)}function f0(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;p0(o)!=a&&o.push(a),o.push(n,r,s)}}function p0(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function g0(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;wo(n)&&w0(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||so(n,e),Vn(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let l=t.data[a],c=Bn(e,t,a,n);if(Vn(c,e),o!==null&&E0(e,a-i,c,l,n,o),mn(l)){let p=yn(n.index,e);p[pt]=Bn(e,t,a,n)}}}function pp(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=ey();try{Pn(s);for(let a=r;a<i;a++){let l=t.data[a],c=e[a];_c(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&m0(l,c)}}finally{Pn(-1),_c(o)}}function m0(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function v0(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(d_(e,o.selectors,!1))if(r||(r=[]),mn(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let l=a.length;Ac(t,e,l)}else r.unshift(o),Ac(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Ac(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function _0(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new Z(-301,!1);r.push(e[i],s)}}}function y0(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mn(e)&&(n[""]=t)}}function C0(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function S0(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Sr(i.type,!0)),o=new Fn(s,mn(i),Q);t.blueprint[r]=o,n[r]=o,f0(t,e,r,op(t,n,i.hostVars,It),i)}function w0(t,e,n){let r=gt(e,t),i=dp(n),s=t[Zt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Ao(t,Mo(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function b0(t,e,n,r,i,s){let o=gt(t,e);D0(e[Oe],o,s,t.value,n,r,i)}function D0(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?al(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function E0(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],p=o[a++],m=o[a++];sp(r,n,l,c,p,m)}}function I0(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function gp(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function mp(t,e){let n=t.contentQueries;if(n!==null){let r=ge(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];vl(s),a.contentQueries(2,e[o],o)}}}finally{ge(r)}}}function Ao(t,e){return t[pi]?t[sh][Dt]=e:t[pi]=e,t[sh]=e,e}function Tc(t,e,n){vl(0);let r=ge(null);try{e(t,n)}finally{ge(r)}}function vp(t){return t[Js]??=[]}function _p(t){return t.cleanup??=[]}function yp(t,e){let n=t[Er],r=n?n.get(jt,null):null;r&&r.handleError(e)}function Fl(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],l=n[s++],c=e[o],p=t.data[o];sp(p,c,r,a,l,i)}}function M0(t,e,n){let r=pf(e,t);Fy(t[Oe],r,n)}function x0(t,e){let n=yn(e,t),r=n[se];A0(r,n);let i=n[Jt];i!==null&&n[Xs]===null&&(n[Xs]=xl(i,n[Er])),Bl(r,n,n[pt])}function A0(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Bl(t,e,n){_l(e);try{let r=t.viewQuery;r!==null&&Tc(1,r,n);let i=t.template;i!==null&&ap(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Yt]?.finishViewCreation(t),t.staticContentQueries&&mp(t,e),t.staticViewQueries&&Tc(2,t.viewQuery,n);let s=t.components;s!==null&&T0(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ee]&=-5,yl()}}function T0(t,e){for(let n=0;n<e.length;n++)x0(t,e[n])}function Cp(t,e,n,r){let i=ge(null);try{let s=e.tView,a=t[ee]&4096?4096:16,l=Mo(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];l[On]=c;let p=t[Yt];return p!==null&&(l[Yt]=p.createEmbeddedView(s)),Bl(s,l,n),l}finally{ge(i)}}function R0(t,e){let n=tt+e;if(n<t.length)return t[n]}function Rc(t,e){return!e||e.firstChild===null||$f(t)}function Sp(t,e,n,r=!0){let i=e[se];if(Hy(i,e,t,n),r){let o=xc(n,t),a=e[Oe],l=kl(a,t[Nn]);l!==null&&Vy(i,t[Et],a,e,l,o)}let s=e[Xs];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function k0(t,e){let n=oo(t,e);return n!==void 0&&Rl(n[se],n),n}function co(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Bt(s)),en(s)&&O0(s,r);let o=n.type;if(o&8)co(t,e,n.child,r);else if(o&32){let a=Al(n,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=tp(e,n);if(Array.isArray(a))r.push(...a);else{let l=Ln(e[Pt]);co(l[se],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function O0(t,e){for(let n=tt;n<t.length;n++){let r=t[n],i=r[se].firstChild;i!==null&&co(r[se],r,i,e)}t[Nn]!==t[Jt]&&e.push(t[Nn])}var wp=[];function N0(t){return t[ht]??L0(t)}function L0(t){let e=wp.pop()??Object.create(F0);return e.lView=t,e}function P0(t){t.lView[ht]!==t&&(t.lView=null,wp.push(t))}var F0=_e(H({},oi),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{bo(t.lView)},consumerOnSignalRead(){this.lView[ht]=this}});function B0(t){let e=t[ht]??Object.create(V0);return e.lView=t,e}var V0=_e(H({},oi),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Ln(t.lView);for(;e&&!bp(e[se]);)e=Ln(e);e&&mf(e)},consumerOnSignalRead(){this.lView[ht]=this}});function bp(t){return t.type!==2}var j0=100;function Dp(t,e=!0,n=0){let r=t[Zt],i=r.rendererFactory,s=!1;s||i.begin?.();try{H0(t,n)}catch(o){throw e&&yp(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function H0(t,e){let n=wf();try{ah(!0),kc(t,e);let r=0;for(;gi(t);){if(r===j0)throw new Z(103,!1);r++,kc(t,1)}}finally{ah(n)}}function U0(t,e,n,r){let i=e[ee];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Zt].inlineEffectRunner?.flush(),_l(e);let a=!0,l=null,c=null;s||(bp(t)?(c=N0(e),l=hs(c)):hd()===null?(a=!1,c=B0(e),l=hs(c)):e[ht]&&(Ma(e[ht]),e[ht]=null));try{gf(e),Q_(t.bindingStartIndex),n!==null&&ap(t,e,n,2,r);let p=(i&3)===3;if(!s)if(p){let g=t.preOrderCheckHooks;g!==null&&$s(e,g,null)}else{let g=t.preOrderHooks;g!==null&&Ws(e,g,0,null),Za(e,0)}if(o||$0(e),Ep(e,0),t.contentQueries!==null&&mp(t,e),!s)if(p){let g=t.contentCheckHooks;g!==null&&$s(e,g)}else{let g=t.contentHooks;g!==null&&Ws(e,g,1),Za(e,1)}n0(t,e);let m=t.components;m!==null&&Mp(e,m,0);let y=t.viewQuery;if(y!==null&&Tc(2,y,r),!s)if(p){let g=t.viewCheckHooks;g!==null&&$s(e,g)}else{let g=t.viewHooks;g!==null&&Ws(e,g,2),Za(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ka]){for(let g of e[Ka])g();e[Ka]=null}s||(e[ee]&=-73)}catch(p){throw s||bo(e),p}finally{c!==null&&(Ea(c,l),a&&P0(c)),yl()}}function Ep(t,e){for(let n=zf(t);n!==null;n=Gf(n))for(let r=tt;r<n.length;r++){let i=n[r];Ip(i,e)}}function $0(t){for(let e=zf(t);e!==null;e=Gf(e)){if(!(e[ee]&to.HasTransplantedViews))continue;let n=e[Ir];for(let r=0;r<n.length;r++){let i=n[r];mf(i)}}}function W0(t,e,n){let r=yn(e,t);Ip(r,n)}function Ip(t,e){ml(t)&&kc(t,e)}function kc(t,e){let r=t[se],i=t[ee],s=t[ht],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Ia(s)),o||=!1,s&&(s.dirty=!1),t[ee]&=-9217,o)U0(r,t,r.template,t[pt]);else if(i&8192){Ep(t,1);let a=r.components;a!==null&&Mp(t,a,1)}}function Mp(t,e,n){for(let r=0;r<e.length;r++)W0(t,e[r],n)}function Vl(t,e){let n=wf()?64:1088;for(t[Zt].changeDetectionScheduler?.notify(e);t;){t[ee]|=n;let r=Ln(t);if(gc(t)&&!r)return t;t=r}return null}var jn=class{get rootNodes(){let e=this._lView,n=e[se];return co(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[pt]}set context(e){this._lView[pt]=e}get destroyed(){return(this._lView[ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ke];if(en(e)){let n=e[eo],r=n?n.indexOf(this):-1;r>-1&&(oo(e,r),Ys(n,r))}this._attachedToViewContainer=!1}Rl(this._lView[se],this._lView)}onDestroy(e){vf(this._lView,e)}markForCheck(){Vl(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){vc(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,Dp(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=gc(this._lView),n=this._lView[On];n!==null&&!e&&Tl(n,this._lView),Xf(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let n=gc(this._lView),r=this._lView[On];r!==null&&!n&&Jf(r,this._lView),vc(this._lView)}},Hn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=q0;let t=e;return t})(),z0=Hn,G0=class extends z0{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Cp(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new jn(i)}};function q0(){return jl(rt(),Ce())}function jl(t,e){return t.type&4?new G0(e,t,Or(t,e)):null}var tT=new RegExp(`^(\\d+)*(${Ry}|${Ty})*(.*)`);var K0=()=>null;function Oc(t,e){return K0(t,e)}var Mr=class{},Hl=new te("",{providedIn:"root",factory:()=>!1});var xp=new te(""),Nc=class{},lo=class{};function Z0(t){let e=Error(`No component factory found for ${Ye(t)}.`);return e[Y0]=t,e}var Y0="ngComponent";var Lc=class{resolveComponentFactory(e){throw Z0(e)}},tu=class tu{};tu.NULL=new Lc;var xr=tu,Ar=class{},Sn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>Q0();let t=e;return t})();function Q0(){let t=Ce(),e=rt(),n=yn(e.index,t);return(pn(n)?n:t)[Oe]}var X0=(()=>{let e=class e{};e.\u0275prov=J({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var _h=new Set;function qn(t){_h.has(t)||(_h.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Ap(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof oc.requestAnimationFrame=="function"&&oc.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function yh(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function Ch(...t){}var ke=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Re(!1),this.onMicrotaskEmpty=new Re(!1),this.onStable=new Re(!1),this.onError=new Re(!1),typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,tC(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Z(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,J0,Ch,Ch);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},J0={};function Ul(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function eC(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{Ap(()=>{t.callbackScheduled=!1,Pc(t),t.isCheckStableRunning=!0,Ul(t),t.isCheckStableRunning=!1})}),Pc(t))}function tC(t){let e=()=>{eC(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(nC(a))return n.invokeTask(i,s,o,a);try{return Sh(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),wh(t)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return Sh(t),n.invoke(i,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!rC(a)&&e(),wh(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Pc(t),Ul(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Pc(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Sh(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function wh(t){t._nesting--,Ul(t)}var Fc=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Re,this.onMicrotaskEmpty=new Re,this.onStable=new Re,this.onError=new Re}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function nC(t){return Tp(t,"__ignore_ng_zone__")}function rC(t){return Tp(t,"__scheduler_tick__")}function Tp(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var et=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(et||{}),iC={destroy(){}};function $l(t,e){!e&&R_($l);let n=e?.injector??U(Vt);return Ny(n)?(qn("NgAfterRender"),oC(t,n,!1,e?.phase??et.MixedReadWrite)):iC}function sC(t,e){if(t instanceof Function)switch(e){case et.EarlyRead:return{earlyRead:t};case et.Write:return{write:t};case et.MixedReadWrite:return{mixedReadWrite:t};case et.Read:return{read:t}}return t}function oC(t,e,n,r){let i=sC(t,r),s=e.get(Wl),o=s.handler??=new Vc,a=[],l=[],c=()=>{for(let y of l)o.unregister(y);p()},p=e.get(Dl).onDestroy(c),m=(y,g)=>{if(!g)return;let u=n?(...d)=>{c(),g(...d)}:g,h=Ht(e,()=>new Bc(y,a,u));o.register(h),l.push(h)};return m(et.EarlyRead,i.earlyRead),m(et.Write,i.write),m(et.MixedReadWrite,i.mixedReadWrite),m(et.Read,i.read),{destroy:c}}var Bc=class{constructor(e,n,r){this.phase=e,this.pipelinedArgs=n,this.callbackFn=r,this.zone=U(ke),this.errorHandler=U(jt,{optional:!0}),U(Mr,{optional:!0})?.notify(6)}invoke(){try{let e=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,e)}catch(e){this.errorHandler?.handleError(e)}}},Vc=class{constructor(){this.executingCallbacks=!1,this.buckets={[et.EarlyRead]:new Set,[et.Write]:new Set,[et.MixedReadWrite]:new Set,[et.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Wl=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=J({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function jc(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=ac(i,a);else if(s==2){let l=a,c=e[++o];r=ac(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var uo=class extends xr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=kn(e);return new mi(n,this.ngModule)}};function bh(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:gn.None;e?n.push({propName:o,templateName:r,isSignal:(a&gn.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function aC(t){let e=t.toLowerCase();return e==="svg"?P_:e==="math"?F_:null}var mi=class extends lo{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=bh(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return bh(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=g_(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=ge(null);try{i=i||this.ngModule;let o=i instanceof ft?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new yc(e,o):e,l=a.get(Ar,null);if(l===null)throw new Z(407,!1);let c=a.get(X0,null),p=a.get(Wl,null),m=a.get(Mr,null),y={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:p,changeDetectionScheduler:m},g=l.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",h=r?s0(g,r,this.componentDef.encapsulation,a):Qf(g,u,aC(u)),d=512;this.componentDef.signals?d|=4096:this.componentDef.onPush||(d|=16);let f=null;h!==null&&(f=xl(h,a,!0));let v=Ll(0,null,null,1,0,null,null,null,null,null,null),C=Mo(null,v,null,d,null,null,y,g,a,null,f);_l(C);let S,w;try{let _=this.componentDef,b,A=null;_.findHostDirectiveDefs?(b=[],A=new Map,_.findHostDirectiveDefs(_,b,A),b.push(_)):b=[_];let T=cC(C,h),k=lC(T,h,_,b,C,y,g);w=gl(v,Ft),h&&hC(g,_,h,r),n!==void 0&&fC(w,this.ngContentSelectors,n),S=dC(k,_,b,A,C,[pC]),Bl(v,C,null)}finally{yl()}return new Hc(this.componentType,S,Or(w,C),C,w)}finally{ge(s)}}},Hc=class extends Nc{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new jn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Fl(s[se],s,i,e,n),this.previousInputValues.set(e,n);let o=yn(this._tNode.index,s);Vl(o,1)}}get injector(){return new Rn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function cC(t,e){let n=t[se],r=Ft;return t[r]=e,xo(n,r,2,"#host",null)}function lC(t,e,n,r,i,s,o){let a=i[se];uC(r,t,e,o);let l=null;e!==null&&(l=xl(e,i[Er]));let c=s.rendererFactory.createRenderer(e,n),p=16;n.signals?p=4096:n.onPush&&(p=64);let m=Mo(i,dp(n),null,p,i[t.index],t,s,c,null,null,l);return a.firstCreatePass&&Ac(a,t,r.length-1),Ao(i,m),i[t.index]=m}function uC(t,e,n,r){for(let i of t)e.mergedAttrs=hi(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(jc(e,e.mergedAttrs,!0),n!==null&&rp(r,n,e))}function dC(t,e,n,r,i,s){let o=rt(),a=i[se],l=gt(o,i);fp(a,i,o,n,null,r);for(let p=0;p<n.length;p++){let m=o.directiveStart+p,y=Bn(i,a,m,o);Vn(y,i)}pp(a,i,o),l&&Vn(l,i);let c=Bn(i,a,o.directiveStart+o.componentOffset,o);if(t[pt]=i[pt]=c,s!==null)for(let p of s)p(c,e);return cp(a,o,i),c}function hC(t,e,n,r){if(r)dc(t,n,["ng-version","18.1.0"]);else{let{attrs:i,classes:s}=m_(e.selectors[0]);i&&dc(t,n,i),s&&s.length>0&&np(t,n,s.join(" "))}}function fC(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function pC(){let t=rt();wl(Ce()[se],t)}var wn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=gC;let t=e;return t})();function gC(){let t=rt();return kp(t,Ce())}var mC=wn,Rp=class extends mC{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Or(this._hostTNode,this._hostLView)}get injector(){return new Rn(this._hostTNode,this._hostLView)}get parentInjector(){let e=bl(this._hostTNode,this._hostLView);if(kf(e)){let n=io(e,this._hostLView),r=ro(e),i=n[se].data[r+8];return new Rn(i,n)}else return new Rn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Dh(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-tt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Oc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Rc(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!k_(e),a;if(o)a=n;else{let u=n||{};a=u.index,r=u.injector,i=u.projectableNodes,s=u.environmentInjector||u.ngModuleRef}let l=o?e:new mi(kn(e)),c=r||this.parentInjector;if(!s&&l.ngModule==null){let h=(o?c:this.parentInjector).get(ft,null);h&&(s=h)}let p=kn(l.componentType??{}),m=Oc(this._lContainer,p?.id??null),y=m?.firstChild??null,g=l.create(c,i,y,s);return this.insertImpl(g.hostView,a,Rc(this._hostTNode,m)),g}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(V_(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Ke],c=new Rp(l,l[Et],l[Ke]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Sp(o,i,s,r),e.attachToViewContainerRef(),Wh(ec(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Dh(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=oo(this._lContainer,n);r&&(Ys(ec(this._lContainer),n),Rl(r[se],r))}detach(e){let n=this._adjustIndex(e,-1),r=oo(this._lContainer,n);return r&&Ys(ec(this._lContainer),n)!=null?new jn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Dh(t){return t[eo]}function ec(t){return t[eo]||(t[eo]=[])}function kp(t,e){let n,r=e[t.index];return en(r)?n=r:(n=gp(r,e,null,t),e[t.index]=n,Ao(e,n)),_C(n,e,t,r),new Rp(n,t,e)}function vC(t,e){let n=t[Oe],r=n.createComment(""),i=gt(e,t),s=kl(n,i);return ao(n,s,r,qy(n,i),!1),r}var _C=SC,yC=()=>!1;function CC(t,e,n){return yC(t,e,n)}function SC(t,e,n,r){if(t[Nn])return;let i;n.type&8?i=Bt(r):i=vC(e,n),t[Nn]=i}var Uc=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},$c=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)zl(e,n).matches!==null&&this.queries[n].setDirty()}},Wc=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=AC(e):this.predicate=e}},zc=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Gc=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,wC(n,s)),this.matchTNodeWithReadOption(e,n,zs(n,e,s,!1,!1))}else r===Hn?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,zs(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===mt||i===wn||i===Hn&&n.type&4)this.addMatch(n.index,-2);else{let s=zs(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function wC(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function bC(t,e){return t.type&11?Or(t,e):t.type&4?jl(t,e):null}function DC(t,e,n,r){return n===-1?bC(e,t):n===-2?EC(t,e,r):Bn(t,t[se],n,e)}function EC(t,e,n){if(n===mt)return Or(e,t);if(n===Hn)return jl(e,t);if(n===wn)return kp(e,t)}function Op(t,e,n,r){let i=e[Yt].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let p=s[c];a.push(DC(e,p,o[l+1],n.metadata.read))}}i.matches=a}return i.matches}function qc(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=Op(t,e,i,n);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)r.push(o[a/2]);else{let c=s[a+1],p=e[-l];for(let m=tt;m<p.length;m++){let y=p[m];y[On]===y[Ke]&&qc(y[se],y,c,r)}if(p[Ir]!==null){let m=p[Ir];for(let y=0;y<m.length;y++){let g=m[y];qc(g[se],g,c,r)}}}}}return r}function IC(t,e){return t[Yt].queries[e].queryList}function MC(t,e,n){let r=new Ec((n&4)===4);return c0(t,e,r,r.destroy),(e[Yt]??=new $c).queries.push(new Uc(r))-1}function xC(t,e,n){let r=ze();return r.firstCreatePass&&(TC(r,new Wc(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),MC(r,Ce(),e)}function AC(t){return t.split(",").map(e=>e.trim())}function TC(t,e,n){t.queries===null&&(t.queries=new zc),t.queries.track(new Gc(e,n))}function zl(t,e){return t.queries.getByIndex(e)}function RC(t,e){let n=t[se],r=zl(n,e);return r.crossesNgTemplate?qc(n,t,e,[]):Op(n,t,r,e)}function kC(t){return typeof t=="function"&&t[Gt]!==void 0}function Di(t,e){qn("NgSignals");let n=bd(t),r=n[Gt];return e?.equal&&(r.equal=e.equal),n.set=i=>xa(r,i),n.update=i=>Dd(r,i),n.asReadonly=OC.bind(n),n}function OC(){let t=this[Gt];if(t.readonlyFn===void 0){let e=()=>this();e[Gt]=t,t.readonlyFn=e}return t.readonlyFn}function Np(t){return kC(t)&&typeof t.set=="function"}function NC(t){return Object.getPrototypeOf(t.prototype).constructor}function Mt(t){let e=NC(t.type),n=!0,r=[t];for(;e;){let i;if(mn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Z(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=js(t.inputs),o.inputTransforms=js(t.inputTransforms),o.declaredInputs=js(t.declaredInputs),o.outputs=js(t.outputs);let a=i.hostBindings;a&&VC(t,a);let l=i.viewQuery,c=i.contentQueries;if(l&&FC(t,l),c&&BC(t,c),LC(t,i),Lv(t.outputs,i.outputs),mn(i)&&i.data.animation){let p=t.data;p.animation=(p.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Mt&&(n=!1)}}e=Object.getPrototypeOf(e)}PC(r)}function LC(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function PC(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=hi(i.hostAttrs,n=hi(n,i.hostAttrs))}}function js(t){return t===wr?{}:t===Je?[]:t}function FC(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function BC(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function VC(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var vn=class{},vi=class{};var Kc=class extends vn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new uo(this);let i=Xh(e);this._bootstrapComponents=Yf(i.bootstrap),this._r3Injector=Hf(e,n,[{provide:vn,useValue:this},{provide:xr,useValue:this.componentFactoryResolver},...r],Ye(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Zc=class extends vi{constructor(e){super(),this.moduleType=e}create(e){return new Kc(this.moduleType,e,[])}};var ho=class extends vn{constructor(e){super(),this.componentFactoryResolver=new uo(this),this.instance=null;let n=new fi([...e.providers,{provide:vn,useValue:this},{provide:xr,useValue:this.componentFactoryResolver}],e.parent||fl(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Gl(t,e,n=null){return new ho({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function Lp(t){return HC(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function jC(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function HC(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function UC(t,e,n){return t[e]=n}function $C(t,e){return t[e]}function Kn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function WC(t){return(t.flags&32)===32}function zC(t,e,n,r,i,s,o,a,l){let c=e.consts,p=xo(e,t,4,o||null,a||null);hp(e,n,p,no(c,l)),wl(e,p);let m=p.tView=Ll(2,p,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,p),m.queries=e.queries.embeddedTView(p)),p}function GC(t,e,n,r,i,s,o,a,l,c){let p=n+Ft,m=e.firstCreatePass?zC(p,e,t,r,i,s,o,a,l):e.data[p];Si(m,!1);let y=qC(e,t,m,n);Cl()&&Ol(e,t,y,m),Vn(y,t);let g=gp(y,t,y,m);return t[p]=g,Ao(t,g),CC(g,m,t),pl(m)&&lp(e,t,m),l!=null&&up(t,m,c),m}function Be(t,e,n,r,i,s,o,a){let l=Ce(),c=ze(),p=no(c.consts,s);return GC(l,c,t,e,n,r,i,p,o,a),Be}var qC=KC;function KC(t,e,n,r){return Sl(!0),e[Oe].createComment("")}function Zn(t,e,n,r){let i=Ce(),s=wi();if(Kn(i,s,e)){let o=ze(),a=Do();b0(a,i,t,e,n,r)}return Zn}function Pp(t,e,n,r){return Kn(t,wi(),n)?e+al(n)+r:It}function Hs(t,e){return t<<17|e<<2}function Un(t){return t>>17&32767}function ZC(t){return(t&2)==2}function YC(t,e){return t&131071|e<<17}function Yc(t){return t|2}function Tr(t){return(t&131068)>>2}function tc(t,e){return t&-131069|e<<2}function QC(t){return(t&1)===1}function Qc(t){return t|1}function XC(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Un(o),l=Tr(o);t[r]=n;let c=!1,p;if(Array.isArray(n)){let m=n;p=m[1],(p===null||Ci(m,p)>0)&&(c=!0)}else p=n;if(i)if(l!==0){let y=Un(t[a+1]);t[r+1]=Hs(y,a),y!==0&&(t[y+1]=tc(t[y+1],r)),t[a+1]=YC(t[a+1],r)}else t[r+1]=Hs(a,0),a!==0&&(t[a+1]=tc(t[a+1],r)),a=r;else t[r+1]=Hs(l,0),a===0?a=r:t[l+1]=tc(t[l+1],r),l=r;c&&(t[r+1]=Yc(t[r+1])),Eh(t,p,r,!0),Eh(t,p,r,!1),JC(e,p,t,r,s),o=Hs(a,l),s?e.classBindings=o:e.styleBindings=o}function JC(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Ci(s,e)>=0&&(n[r+1]=Qc(n[r+1]))}function Eh(t,e,n,r){let i=t[n+1],s=e===null,o=r?Un(i):Tr(i),a=!1;for(;o!==0&&(a===!1||s);){let l=t[o],c=t[o+1];eS(l,e)&&(a=!0,t[o+1]=r?Qc(c):Yc(c)),o=r?Un(c):Tr(c)}a&&(t[n+1]=r?Yc(i):Qc(i))}function eS(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ci(t,e)>=0:!1}var He={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Fp(t){return t.substring(He.key,He.keyEnd)}function tS(t){return t.substring(He.value,He.valueEnd)}function nS(t){return jp(t),Bp(t,Rr(t,0,He.textEnd))}function Bp(t,e){let n=He.textEnd;return n===e?-1:(e=He.keyEnd=iS(t,He.key=e,n),Rr(t,e,n))}function rS(t){return jp(t),Vp(t,Rr(t,0,He.textEnd))}function Vp(t,e){let n=He.textEnd,r=He.key=Rr(t,e,n);return n===r?-1:(r=He.keyEnd=sS(t,r,n),r=Ih(t,r,n,58),r=He.value=Rr(t,r,n),r=He.valueEnd=oS(t,r,n),Ih(t,r,n,59))}function jp(t){He.key=0,He.keyEnd=0,He.value=0,He.valueEnd=0,He.textEnd=t.length}function Rr(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function iS(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function sS(t,e,n){let r;for(;e<n&&((r=t.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function Ih(t,e,n,r){return e=Rr(t,e,n),e<n&&e++,e}function oS(t,e,n){let r=-1,i=-1,s=-1,o=e,a=o;for(;o<n;){let l=t.charCodeAt(o++);if(l===59)return a;l===34||l===39?a=o=Mh(t,l,o,n):e===o-4&&s===85&&i===82&&r===76&&l===40?a=o=Mh(t,41,o,n):l>32&&(a=o),s=i,i=r,r=l&-33}return a}function Mh(t,e,n,r){let i=-1,s=n;for(;s<r;){let o=t.charCodeAt(s++);if(o==e&&i!==92)return s;o==92&&i===92?i=0:i=o}throw new Error}function ye(t,e,n){let r=Ce(),i=wi();if(Kn(r,i,e)){let s=ze(),o=Do();Pl(s,o,r,t,e,r[Oe],n,!1)}return ye}function Xc(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Fl(t,n,s[o],o,r)}function To(t,e){return lS(t,e,null,!0),To}function ql(t){Hp(Wp,aS,t,!1)}function aS(t,e){for(let n=rS(e);n>=0;n=Vp(e,n))Wp(t,Fp(e),tS(e))}function bn(t){Hp(gS,cS,t,!0)}function cS(t,e){for(let n=nS(e);n>=0;n=Bp(e,n))_o(t,Fp(e),!0)}function lS(t,e,n,r){let i=Ce(),s=ze(),o=bf(2);if(s.firstUpdatePass&&$p(s,t,o,r),e!==It&&Kn(i,o,e)){let a=s.data[zn()];zp(s,a,i,i[Oe],t,i[o+1]=vS(e,n),r,o)}}function Hp(t,e,n,r){let i=ze(),s=bf(2);i.firstUpdatePass&&$p(i,null,s,r);let o=Ce();if(n!==It&&Kn(o,s,n)){let a=i.data[zn()];if(Gp(a,r)&&!Up(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=ac(l,n||"")),Xc(i,a,o,n,r)}else mS(i,a,o,o[Oe],o[s+1],o[s+1]=pS(t,e,n),r,s)}}function Up(t,e){return e>=t.expandoStartIndex}function $p(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[zn()],o=Up(t,n);Gp(s,r)&&e===null&&!o&&(e=!1),e=uS(i,s,e,r),XC(i,s,e,n,o,r)}}function uS(t,e,n,r){let i=ty(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=nc(null,t,e,n,r),n=_i(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=nc(i,t,e,n,r),s===null){let l=dS(t,e,r);l!==void 0&&Array.isArray(l)&&(l=nc(null,t,e,l[1],r),l=_i(l,e.attrs,r),hS(t,e,r,l))}else s=fS(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function dS(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Tr(r)!==0)return t[Un(r)]}function hS(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Un(i)]=r}function fS(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=_i(r,o,n)}return _i(r,e.attrs,n)}function nc(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=_i(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function _i(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),_o(t,o,n?!0:e[++s]))}return t===void 0?null:t}function pS(t,e,n){if(n==null||n==="")return Je;let r=[],i=bi(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function Wp(t,e,n){_o(t,e,bi(n))}function gS(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&_o(t,r,n)}function mS(t,e,n,r,i,s,o,a){i===It&&(i=Je);let l=0,c=0,p=0<i.length?i[0]:null,m=0<s.length?s[0]:null;for(;p!==null||m!==null;){let y=l<i.length?i[l+1]:void 0,g=c<s.length?s[c+1]:void 0,u=null,h;p===m?(l+=2,c+=2,y!==g&&(u=m,h=g)):m===null||p!==null&&p<m?(l+=2,u=p):(c+=2,u=m,h=g),u!==null&&zp(t,e,n,r,u,h,o,a),p=l<i.length?i[l]:null,m=c<s.length?s[c]:null}}function zp(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],p=QC(c)?xh(l,e,n,i,Tr(c),o):void 0;if(!fo(p)){fo(s)||ZC(c)&&(s=xh(l,null,n,i,a,o));let m=pf(zn(),n);e0(r,o,m,i,s)}}function xh(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let l=t[i],c=Array.isArray(l),p=c?l[1]:l,m=p===null,y=n[i+1];y===It&&(y=m?Je:void 0);let g=m?Ga(y,r):p===r?y:void 0;if(c&&!fo(g)&&(g=Ga(l,r)),fo(g)&&(a=g,o))return a;let u=t[i+1];i=o?Un(u):Tr(u)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=Ga(l,r))}return a}function fo(t){return t!==void 0}function vS(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ye(bi(t)))),t}function Gp(t,e){return(t.flags&(e?8:16))!==0}function Lr(t,e){qn("NgControlFlow");let n=Ce(),r=wi(),i=n[r]!==It?n[r]:-1,s=i!==-1?Ah(n,Ft+i):void 0,o=0;if(Kn(n,r,t)){let a=ge(null);try{if(s!==void 0&&k0(s,o),t!==-1){let l=Ft+t,c=Ah(n,l),p=_S(n[se],l),m=Oc(c,p.tView.ssrId),y=Cp(n,p,e,{dehydratedView:m});Sp(c,y,o,Rc(p,m))}}finally{ge(a)}}else if(s!==void 0){let a=R0(s,o);a!==void 0&&(a[pt]=e)}}function Ah(t,e){return t[e]}function _S(t,e){return gl(t,e)}function yS(t,e,n,r,i,s){let o=e.consts,a=no(o,i),l=xo(e,t,2,r,a);return hp(e,n,l,no(o,s)),l.attrs!==null&&jc(l,l.attrs,!1),l.mergedAttrs!==null&&jc(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function z(t,e,n,r){let i=Ce(),s=ze(),o=Ft+t,a=i[Oe],l=s.firstCreatePass?yS(o,s,i,e,n,r):s.data[o],c=CS(s,i,l,a,e,t);i[o]=c;let p=pl(l);return Si(l,!0),rp(a,c,l),!WC(l)&&Cl()&&Ol(s,i,c,l),U_()===0&&Vn(c,i),$_(),p&&(lp(s,i,l),cp(s,l,i)),r!==null&&up(i,l),z}function G(){let t=rt();Sf()?Z_():(t=t.parent,Si(t,!1));let e=t;G_(e)&&q_(),W_();let n=ze();return n.firstCreatePass&&(wl(n,t),lf(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&cy(e)&&Xc(n,e,Ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ly(e)&&Xc(n,e,Ce(),e.stylesWithoutHost,!1),G}function be(t,e,n,r){return z(t,e,n,r),G(),be}var CS=(t,e,n,r,i,s)=>(Sl(!0),Qf(r,i,iy()));function Dn(){return Ce()}var po="en-US";var SS=po;function wS(t){typeof t=="string"&&(SS=t.toLowerCase().replace(/_/g,"-"))}var bS=(t,e,n)=>{};function Ee(t,e,n,r){let i=Ce(),s=ze(),o=rt();return qp(s,i,i[Oe],o,t,e,r),Ee}function DS(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Js],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function qp(t,e,n,r,i,s,o){let a=pl(r),c=t.firstCreatePass&&_p(t),p=e[pt],m=vp(e),y=!0;if(r.type&3||o){let h=gt(r,e),d=o?o(h):h,f=m.length,v=o?S=>o(Bt(S[r.index])):r.index,C=null;if(!o&&a&&(C=DS(t,e,i,r.index)),C!==null){let S=C.__ngLastListenerFn__||C;S.__ngNextListenerFn__=s,C.__ngLastListenerFn__=s,y=!1}else{s=Rh(r,e,p,s),bS(h,i,s);let S=n.listen(d,i,s);m.push(s,S),c&&c.push(i,v,f,f+1)}}else s=Rh(r,e,p,s);let g=r.outputs,u;if(y&&g!==null&&(u=g[i])){let h=u.length;if(h)for(let d=0;d<h;d+=2){let f=u[d],v=u[d+1],w=e[f][v].subscribe(s),_=m.length;m.push(s,w),c&&c.push(i,r.index,_,-(_+1))}}}function Th(t,e,n,r){let i=ge(null);try{return Ot(6,e,n),n(r)!==!1}catch(s){return yp(t,s),!1}finally{Ot(7,e,n),ge(i)}}function Rh(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?yn(t.index,e):e;Vl(o,5);let a=Th(e,n,r,s),l=i.__ngNextListenerFn__;for(;l;)a=Th(e,n,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function oe(t=1){return ry(t)}function Kl(t,e,n){return Kp(t,"",e,"",n),Kl}function Kp(t,e,n,r,i){let s=Ce(),o=Pp(s,e,n,r);if(o!==It){let a=ze(),l=Do();Pl(a,l,s,t,o,s[Oe],i,!1)}return Kp}function Zp(t,e,n){xC(t,e,n)}function Zl(t){let e=Ce(),n=ze(),r=Df();vl(r+1);let i=zl(n,r);if(t.dirty&&B_(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=RC(e,r);t.reset(s,wy),t.notifyOnChanges()}return!0}return!1}function Yl(){return IC(Ce(),Df())}function ae(t,e=""){let n=Ce(),r=ze(),i=t+Ft,s=r.firstCreatePass?xo(r,i,1,e,null):r.data[i],o=ES(r,n,s,e,t);n[i]=o,Cl()&&Ol(r,n,o,s),Si(s,!1)}var ES=(t,e,n,r,i)=>(Sl(!0),Py(e[Oe],r));function Ei(t){return Ro("",t,""),Ei}function Ro(t,e,n){let r=Ce(),i=Pp(r,t,e,n);return i!==It&&M0(r,zn(),i),Ro}function Ut(t,e,n){Np(e)&&(e=e());let r=Ce(),i=wi();if(Kn(r,i,e)){let s=ze(),o=Do();Pl(s,o,r,t,e,r[Oe],n,!1)}return Ut}function tn(t,e){let n=Np(t);return n&&t.set(e),n}function $t(t,e){let n=Ce(),r=ze(),i=rt();return qp(r,n,n[Oe],i,t,e),$t}function IS(t,e,n){let r=ze();if(r.firstCreatePass){let i=mn(t);Jc(n,r.data,r.blueprint,i,!0),Jc(e,r.data,r.blueprint,i,!1)}}function Jc(t,e,n,r,i){if(t=Ze(t),Array.isArray(t))for(let s=0;s<t.length;s++)Jc(t[s],e,n,r,i);else{let s=ze(),o=Ce(),a=rt(),l=Dr(t)?t:Ze(t.provide),c=sf(t),p=a.providerIndexes&1048575,m=a.directiveStart,y=a.providerIndexes>>20;if(Dr(t)||!t.multi){let g=new Fn(c,i,Q),u=ic(l,e,i?p:p+y,m);u===-1?(Sc(so(a,o),s,l),rc(s,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),o.push(g)):(n[u]=g,o[u]=g)}else{let g=ic(l,e,p+y,m),u=ic(l,e,p,p+y),h=g>=0&&n[g],d=u>=0&&n[u];if(i&&!d||!i&&!h){Sc(so(a,o),s,l);let f=AS(i?xS:MS,n.length,i,r,c);!i&&d&&(n[u].providerFactory=f),rc(s,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)}else{let f=Yp(n[i?u:g],c,!i&&r);rc(s,t,g>-1?g:u,f)}!i&&r&&d&&n[u].componentProviders++}}}function rc(t,e,n,r){let i=Dr(e),s=D_(e);if(i||s){let l=(s?Ze(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let p=c.indexOf(n);p===-1?c.push(n,[r,l]):c[p+1].push(r,l)}else c.push(n,l)}}}function Yp(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ic(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function MS(t,e,n,r){return el(this.multi,[])}function xS(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Bn(n,n[se],this.providerFactory.index,r);s=a.slice(0,o),el(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],el(i,s);return s}function el(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function AS(t,e,n,r,i){let s=new Fn(t,n,Q);return s.multi=[],s.index=e,s.componentProviders=0,Yp(s,i,r&&!n),s}function Yn(t,e=[]){return n=>{n.providersResolver=(r,i)=>IS(r,i?i(t):t,e)}}var TS=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=tf(!1,r.type),s=i.length>0?Gl([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=J({token:e,providedIn:"environment",factory:()=>new e(pe(ft))});let t=e;return t})();function it(t){qn("NgStandalone"),t.getStandaloneInjector=e=>e.get(TS).getOrCreateStandaloneInjector(t)}function Qn(t,e,n){let r=Y_()+t,i=Ce();return i[r]===It?UC(i,r,n?e.call(n):e()):$C(i,r)}var ko=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Qp=new te("");function Xn(t){return!!t&&typeof t.then=="function"}function Xp(t){return!!t&&typeof t.subscribe=="function"}var Jp=new te(""),eg=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=U(Jp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Xn(o))r.push(o);else if(Xp(o)){let a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ql=new te("");function RS(){wd(()=>{throw new Z(600,!1)})}function kS(t){return t.isBoundToModule}var OS=10;function NS(t,e,n){try{let r=n();return Xn(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Pr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=U(Uf),this.afterRenderEffectManager=U(Wl),this.zonelessEnabled=U(Hl),this.externalTestViews=new Set,this.beforeRender=new Me,this.afterTick=new Me,this.componentTypes=[],this.components=[],this.isStable=U(Nr).hasPendingTasks.pipe(de(r=>!r)),this._injector=U(ft)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof lo;if(!this._injector.get(eg).done){let g=!s&&Qh(r),u=!1;throw new Z(405,u)}let a;s?a=r:a=this._injector.get(xr).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=kS(a)?void 0:this._injector.get(vn),c=i||a.selector,p=a.create(Vt.NULL,[],c,l),m=p.location.nativeElement,y=p.injector.get(Qp,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),sc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),p}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Z(101,!1);let i=ge(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,ge(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(Ar,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<OS;){let a=s===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:l,notifyErrorHandler:c}of this._views)LS(l,c,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:l})=>gi(l))&&(o.execute(),!this.allViews.some(({_lView:l})=>gi(l))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;sc(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ql,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>sc(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Z(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function LS(t,e,n,r){if(!n&&!gi(t))return;Dp(t,e,n&&!r?0:1)}var tl=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Xl=(()=>{let e=class e{compileModuleSync(r){return new Zc(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=Xh(r),o=Yf(s.declarations).reduce((a,l)=>{let c=kn(l);return c&&a.push(new mi(c)),a},[]);return new tl(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var PS=(()=>{let e=class e{constructor(){this.zone=U(ke),this.changeDetectionScheduler=U(Mr),this.applicationRef=U(Pr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),FS=new te("",{factory:()=>!1});function tg({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new ke(rg()),[{provide:ke,useFactory:t},{provide:br,multi:!0,useFactory:()=>{let n=U(PS,{optional:!0});return()=>n.initialize()}},{provide:br,multi:!0,useFactory:()=>{let n=U(VS);return()=>{n.initialize()}}},{provide:Uf,useFactory:BS},e===!0?{provide:xp,useValue:!0}:[]]}function BS(){let t=U(ke),e=U(jt);return n=>t.runOutsideAngular(()=>e.handleError(n))}function ng(t){let e=t?.ignoreChangesOutsideZone,n=tg({ngZoneFactory:()=>{let r=rg(t);return r.shouldCoalesceEventChangeDetection&&qn("NgZone_CoalesceEvent"),new ke(r)},ignoreChangesOutsideZone:e});return yo([{provide:FS,useValue:!0},{provide:Hl,useValue:!1},n])}function rg(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var VS=(()=>{let e=class e{constructor(){this.subscription=new Ne,this.initialized=!1,this.zone=U(ke),this.pendingTasks=U(Nr)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ke.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ke.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var jS=(()=>{let e=class e{constructor(){this.appRef=U(Pr),this.taskService=U(Nr),this.ngZone=U(ke),this.zonelessEnabled=U(Hl),this.disableScheduling=U(xp,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ne,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Fc||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?yh:Ap;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&ke.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yh(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function HS(){return typeof $localize<"u"&&$localize.locale||po}var Jl=new te("",{providedIn:"root",factory:()=>U(Jl,le.Optional|le.SkipSelf)||HS()});var ig=new te("");var qs=null;function US(t=[],e){return Vt.create({name:e,providers:[{provide:Co,useValue:"platform"},{provide:ig,useValue:new Set([()=>qs=null])},...t]})}function $S(t=[]){if(qs)return qs;let e=US(t);return qs=e,RS(),WS(e),e}function WS(t){t.get(Il,null)?.forEach(n=>n())}var Ge=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=zS;let t=e;return t})();function zS(t){return GS(rt(),Ce(),(t&16)===16)}function GS(t,e,n){if(wo(t)&&!n){let r=yn(t.index,e);return new jn(r,r)}else if(t.type&175){let r=e[Pt];return new jn(r,e)}return null}var nl=class{constructor(){}supports(e){return Lp(e)}create(e){return new rl(e)}},qS=(t,e)=>e,rl=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||qS}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<kh(r,i,s)?n:r,a=kh(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let c=a-i,p=l-i;if(c!=p){for(let y=0;y<c;y++){let g=y<s.length?s[y]:s[y]=0,u=g+y;p<=u&&u<c&&(s[y]=g+1)}let m=o.previousIndex;s[m]=p-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Lp(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,jC(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new il(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new go),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new go),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},il=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},sl=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},go=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new sl,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function kh(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Oh(){return new eu([new nl])}var eu=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Oh()),deps:[[e,new $h,new ll]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new Z(901,!1)}};e.\u0275prov=J({token:e,providedIn:"root",factory:Oh});let t=e;return t})();function sg(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=$S(r),s=[tg({}),{provide:Mr,useExisting:jS},...n||[]],a=new ho({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(ke);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(jt,null),p;l.runOutsideAngular(()=>{p=l.onError.subscribe({next:g=>{c.handleError(g)}})});let m=()=>a.destroy(),y=i.get(ig);return y.add(m),a.onDestroy(()=>{p.unsubscribe(),y.delete(m)}),NS(c,l,()=>{let g=a.get(eg);return g.runInitializers(),g.donePromise.then(()=>{let u=a.get(Jl,po);wS(u||po);let h=a.get(Pr);return e!==void 0&&h.bootstrap(e),h})})})}catch(e){return Promise.reject(e)}}var og=new te("");function Oo(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Ii(t,e){qn("NgSignals");let n=yd(t);return e?.equal&&(n[Gt].equal=e.equal),n}function nn(t){let e=ge(null);try{return t()}finally{ge(e)}}var dg=null;function rn(){return dg}function hg(t){dg??=t}var No=class{};var at=new te(""),fg=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:()=>U(YS),providedIn:"platform"});let t=e;return t})();var YS=(()=>{let e=class e extends fg{constructor(){super(),this._doc=U(at),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return rn().getBaseHref(this._doc)}onPopState(r){let i=rn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=rn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function pg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function ag(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Jn(t){return t&&t[0]!=="?"?"?"+t:t}var Po=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:()=>U(gg),providedIn:"root"});let t=e;return t})(),QS=new te(""),gg=(()=>{let e=class e extends Po{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??U(at).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return pg(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Jn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Jn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Jn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(pe(fg),pe(QS,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Mi=(()=>{let e=class e{constructor(r){this._subject=new Re,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=ew(ag(cg(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Jn(i))}normalize(r){return e.stripTrailingSlash(JS(this._basePath,cg(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Jn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Jn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Jn,e.joinWithSlash=pg,e.stripTrailingSlash=ag,e.\u0275fac=function(i){return new(i||e)(pe(Po))},e.\u0275prov=J({token:e,factory:()=>XS(),providedIn:"root"});let t=e;return t})();function XS(){return new Mi(pe(Po))}function JS(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function cg(t){return t.replace(/\/index.html$/,"")}function ew(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function mg(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var nu=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Fo=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new nu(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,a),lg(l,s)}});for(let s=0,o=i.length;s<o;s++){let l=i.get(s).context;l.index=s,l.count=o,l.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);lg(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Q(wn),Q(Hn),Q(eu))},e.\u0275dir=Ue({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function lg(t,e){t.context.$implicit=e.item}var En=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new ru,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){ug("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){ug("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Q(wn),Q(Hn))},e.\u0275dir=Ue({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),ru=class{constructor(){this.$implicit=null,this.ngIf=null}};function ug(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ye(e)}'.`)}var At=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Wn({type:e}),e.\u0275inj=$n({});let t=e;return t})(),vg="browser",tw="server";function su(t){return t===tw}var Lo=class{};var cu=class extends No{constructor(){super(...arguments),this.supportsDOMEvents=!0}},lu=class t extends cu{static makeCurrent(){hg(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=nw();return n==null?null:rw(n)}resetBaseElement(){Ai=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return mg(document.cookie,e)}},Ai=null;function nw(){return Ai=Ai||document.querySelector("base"),Ai?Ai.getAttribute("href"):null}function rw(t){return new URL(t,document.baseURI).pathname}var iw=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),Bo=new te(""),Sg=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new Z(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(pe(Bo),pe(ke))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),Ti=class{constructor(e){this._doc=e}},ou="ng-app-id",wg=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=su(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${ou}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(ou),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(ou,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(pe(at),pe(El),pe(Ml,8),pe(Gn))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),au={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},du=/%COMP%/g,bg="%COMP%",sw=`_nghost-${bg}`,ow=`_ngcontent-${bg}`,aw=!0,cw=new te("",{providedIn:"root",factory:()=>aw});function lw(t){return ow.replace(du,t)}function uw(t){return sw.replace(du,t)}function Dg(t,e){return e.map(n=>n.replace(du,t))}var _g=(()=>{let e=class e{constructor(r,i,s,o,a,l,c,p=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=su(l),this.defaultRenderer=new Ri(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Lt.ShadowDom&&(i=_e(H({},i),{encapsulation:Lt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Vo?s.applyToHost(r):s instanceof ki&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,p=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(i.encapsulation){case Lt.Emulated:o=new Vo(c,p,i,this.appId,m,a,l,y);break;case Lt.ShadowDom:return new uu(c,p,r,i,a,l,this.nonce,y);default:o=new ki(c,p,i,m,a,l,y);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(pe(Sg),pe(wg),pe(El),pe(cw),pe(at),pe(Gn),pe(ke),pe(Ml))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),Ri=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(au[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(yg(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(yg(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=au[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=au[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Qt.DashCase|Qt.Important)?e.style.setProperty(n,r,i&Qt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Qt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=rn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function yg(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var uu=class extends Ri{constructor(e,n,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Dg(i.id,i.styles);for(let p of c){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ki=class extends Ri{constructor(e,n,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?Dg(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Vo=class extends ki{constructor(e,n,r,i,s,o,a,l){let c=i+"-"+r.id;super(e,n,r,s,o,a,l,c),this.contentAttr=lw(c),this.hostAttr=uw(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},dw=(()=>{let e=class e extends Ti{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(pe(at))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),hw=(()=>{let e=class e extends Ti{constructor(r){super(r),this.delegate=U(og,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(pe(at))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),Cg=["alt","control","meta","shift"],fw={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pw={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},gw=(()=>{let e=class e extends Ti{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),Cg.forEach(p=>{let m=i.indexOf(p);m>-1&&(i.splice(m,1),a+=p+".")}),a+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let s=fw[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Cg.forEach(a=>{if(a!==s){let l=pw[a];l(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(pe(at))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})();function Eg(t,e){return sg(H({rootComponent:t},mw(e)))}function mw(t){return{appProviders:[...Sw,...t?.providers??[]],platformProviders:Cw}}function vw(){lu.makeCurrent()}function _w(){return new jt}function yw(){return Kf(document),document}var Cw=[{provide:Gn,useValue:vg},{provide:Il,useValue:vw,multi:!0},{provide:at,useFactory:yw,deps:[]}];var Sw=[{provide:Co,useValue:"root"},{provide:jt,useFactory:_w,deps:[]},{provide:Bo,useClass:dw,multi:!0,deps:[at,ke,Gn]},{provide:Bo,useClass:gw,multi:!0,deps:[at]},{provide:Bo,useClass:hw,multi:!0},_g,wg,Sg,{provide:Ar,useExisting:_g},{provide:Lo,useClass:iw,deps:[]},[]];var Ig=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(pe(at))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ce="primary",Zi=Symbol("RouteTitle"),mu=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ur(t){return new mu(t)}function bw(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Dw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Wt(t[n],e[n]))return!1;return!0}function Wt(t,e){let n=t?vu(t):void 0,r=e?vu(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Ng(t[i],e[i]))return!1;return!0}function vu(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Ng(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function Lg(t){return t.length>0?t[t.length-1]:null}function In(t){return Ba(t)?t:Xn(t)?Te(Promise.resolve(t)):ie(t)}var Ew={exact:Fg,subset:Bg},Pg={exact:Iw,subset:Mw,ignored:()=>!0};function Mg(t,e,n){return Ew[n.paths](t.root,e.root,n.matrixParams)&&Pg[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Iw(t,e){return Wt(t,e)}function Fg(t,e,n){if(!tr(t.segments,e.segments)||!Uo(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Fg(t.children[r],e.children[r],n))return!1;return!0}function Mw(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ng(t[n],e[n]))}function Bg(t,e,n){return Vg(t,e,e.segments,n)}function Vg(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!tr(i,n)||e.hasChildren()||!Uo(i,n,r))}else if(t.segments.length===n.length){if(!tr(t.segments,n)||!Uo(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Bg(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!tr(t.segments,i)||!Uo(t.segments,i,r)||!t.children[ce]?!1:Vg(t.children[ce],e,s,r)}}function Uo(t,e,n){return e.every((r,i)=>Pg[n](t[i].parameters,r.parameters))}var on=class{constructor(e=new we([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ur(this.queryParams),this._queryParamMap}toString(){return Tw.serialize(this)}},we=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $o(this)}},er=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ur(this.parameters),this._parameterMap}toString(){return Hg(this)}};function xw(t,e){return tr(t,e)&&t.every((n,r)=>Wt(n.parameters,e[r].parameters))}function tr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Aw(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ce&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ce&&(n=n.concat(e(i,r)))}),n}var $u=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:()=>new Vi,providedIn:"root"});let t=e;return t})(),Vi=class{parse(e){let n=new yu(e);return new on(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Oi(e.root,!0)}`,r=Ow(e.queryParams),i=typeof e.fragment=="string"?`#${Rw(e.fragment)}`:"";return`${n}${r}${i}`}},Tw=new Vi;function $o(t){return t.segments.map(e=>Hg(e)).join("/")}function Oi(t,e){if(!t.hasChildren())return $o(t);if(e){let n=t.children[ce]?Oi(t.children[ce],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ce&&r.push(`${i}:${Oi(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Aw(t,(r,i)=>i===ce?[Oi(t.children[ce],!1)]:[`${i}:${Oi(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ce]!=null?`${$o(t)}/${n[0]}`:`${$o(t)}/(${n.join("//")})`}}function jg(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jo(t){return jg(t).replace(/%3B/gi,";")}function Rw(t){return encodeURI(t)}function _u(t){return jg(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wo(t){return decodeURIComponent(t)}function xg(t){return Wo(t.replace(/\+/g,"%20"))}function Hg(t){return`${_u(t.path)}${kw(t.parameters)}`}function kw(t){return Object.entries(t).map(([e,n])=>`;${_u(e)}=${_u(n)}`).join("")}function Ow(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${jo(n)}=${jo(i)}`).join("&"):`${jo(n)}=${jo(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Nw=/^[^\/()?;#]+/;function hu(t){let e=t.match(Nw);return e?e[0]:""}var Lw=/^[^\/()?;=#]+/;function Pw(t){let e=t.match(Lw);return e?e[0]:""}var Fw=/^[^=?&#]+/;function Bw(t){let e=t.match(Fw);return e?e[0]:""}var Vw=/^[^&#]+/;function jw(t){let e=t.match(Vw);return e?e[0]:""}var yu=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ce]=new we(e,n)),r}parseSegment(){let e=hu(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new er(Wo(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Pw(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=hu(this.remaining);i&&(r=i,this.capture(r))}e[Wo(n)]=Wo(r)}parseQueryParam(e){let n=Bw(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=jw(this.remaining);o&&(r=o,this.capture(r))}let i=xg(n),s=xg(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=hu(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ce);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ce]:new we([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function Ug(t){return t.segments.length>0?new we([],{[ce]:t}):t}function $g(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=$g(i);if(r===ce&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new we(t.segments,e);return Hw(n)}function Hw(t){if(t.numberOfChildren===1&&t.children[ce]){let e=t.children[ce];return new we(t.segments.concat(e.segments),e.children)}return t}function ji(t){return t instanceof on}function Uw(t,e,n=null,r=null){let i=Wg(t);return zg(i,e,n,r)}function Wg(t){let e;function n(s){let o={};for(let l of s.children){let c=n(l);o[l.outlet]=c}let a=new we(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=Ug(r);return e??i}function zg(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return fu(i,i,i,n,r);let s=$w(e);if(s.toRoot())return fu(i,i,new we([],{}),n,r);let o=Ww(s,i,t),a=o.processChildren?Pi(o.segmentGroup,o.index,s.commands):qg(o.segmentGroup,o.index,s.commands);return fu(i,o.segmentGroup,a,n,r)}function zo(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Hi(t){return typeof t=="object"&&t!=null&&t.outlets}function fu(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(p=>`${p}`):`${c}`});let o;t===e?o=n:o=Gg(t,e,n);let a=Ug($g(o));return new on(a,s,i)}function Gg(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=Gg(s,e,n)}),new we(t.segments,r)}var Go=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&zo(r[0]))throw new Z(4003,!1);let i=r.find(Hi);if(i&&i!==Lg(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function $w(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Go(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Go(n,e,r)}var Vr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Ww(t,e,n){if(t.isAbsolute)return new Vr(e,!0,0);if(!n)return new Vr(e,!1,NaN);if(n.parent===null)return new Vr(n,!0,0);let r=zo(t.commands[0])?0:1,i=n.segments.length-1+r;return zw(n,i,t.numberOfDoubleDots)}function zw(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new Vr(r,!1,i-s)}function Gw(t){return Hi(t[0])?t[0].outlets:{[ce]:t}}function qg(t,e,n){if(t??=new we([],{}),t.segments.length===0&&t.hasChildren())return Pi(t,e,n);let r=qw(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new we(t.segments.slice(0,r.pathIndex),{});return s.children[ce]=new we(t.segments.slice(r.pathIndex),t.children),Pi(s,0,i)}else return r.match&&i.length===0?new we(t.segments,{}):r.match&&!t.hasChildren()?Cu(t,e,n):r.match?Pi(t,0,i):Cu(t,e,n)}function Pi(t,e,n){if(n.length===0)return new we(t.segments,{});{let r=Gw(n),i={};if(Object.keys(r).some(s=>s!==ce)&&t.children[ce]&&t.numberOfChildren===1&&t.children[ce].segments.length===0){let s=Pi(t.children[ce],e,n);return new we(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=qg(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new we(t.segments,i)}}function qw(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Hi(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Tg(l,c,o))return s;r+=2}else{if(!Tg(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cu(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Hi(s)){let l=Kw(s.outlets);return new we(r,l)}if(i===0&&zo(n[0])){let l=t.segments[e];r.push(new er(l.path,Ag(n[0]))),i++;continue}let o=Hi(s)?s.outlets[ce]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&zo(a)?(r.push(new er(o,Ag(a))),i+=2):(r.push(new er(o,{})),i++)}return new we(r,{})}function Kw(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Cu(new we([],{}),0,r))}),e}function Ag(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Tg(t,e,n){return t==n.path&&Wt(e,n.parameters)}var Fi="imperative",qe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(qe||{}),vt=class{constructor(e,n){this.id=e,this.url=n}},Ui=class extends vt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},nr=class extends vt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},lt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(lt||{}),Su=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Su||{}),sn=class extends vt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},rr=class extends vt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationSkipped}},$i=class extends vt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},qo=class extends vt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wu=class extends vt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bu=class extends vt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Du=class extends vt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Eu=class extends vt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iu=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mu=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},xu=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Au=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tu=class{constructor(e){this.snapshot=e,this.type=qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ru=class{constructor(e){this.snapshot=e,this.type=qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Wi=class{},$r=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function Zw(t,e){return t.providers&&!t._injector&&(t._injector=Gl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Tt(t){return t.outlet||ce}function Yw(t,e){let n=t.filter(r=>Tt(r)===e);return n.push(...t.filter(r=>Tt(r)!==e)),n}function Yi(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ku=class{get injector(){return Yi(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ea(this.rootInjector),this.attachRef=null}},ea=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new ku(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(pe(ft))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ko=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ou(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Ou(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Nu(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Nu(e,this._root).map(n=>n.value)}};function Ou(t,e){if(t===e.value)return e;for(let n of e.children){let r=Ou(t,n);if(r)return r}return null}function Nu(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Nu(t,n);if(r.length)return r.unshift(e),r}return[]}var ct=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Br(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Zo=class extends Ko{constructor(e,n){super(e),this.snapshot=n,Wu(this,e)}toString(){return this.snapshot.toString()}};function Kg(t){let e=Qw(t),n=new $e([new er("",{})]),r=new $e({}),i=new $e({}),s=new $e({}),o=new $e(""),a=new Wr(n,r,s,o,i,ce,t,e.root);return a.snapshot=e.root,new Zo(new ct(a,[]),e)}function Qw(t){let e={},n={},r={},i="",s=new jr([],e,r,i,n,ce,t,null,{});return new Qo("",new ct(s,[]))}var Wr=class{constructor(e,n,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(de(c=>c[Zi]))??ie(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(de(e=>Ur(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(de(e=>Ur(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yo(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),t.params),data:H(H({},e.data),t.data),resolve:H(H(H(H({},t.data),e.data),i?.data),t._resolvedData)}:r={params:H({},t.params),data:H({},t.data),resolve:H(H({},t.data),t._resolvedData??{})},i&&Yg(i)&&(r.resolve[Zi]=i.title),r}var jr=class{get title(){return this.data?.[Zi]}constructor(e,n,r,i,s,o,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ur(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ur(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Qo=class extends Ko{constructor(e,n){super(n),this.url=e,Wu(this,n)}toString(){return Zg(this._root)}};function Wu(t,e){e.value._routerState=t,e.children.forEach(n=>Wu(t,n))}function Zg(t){let e=t.children.length>0?` { ${t.children.map(Zg).join(", ")} } `:"";return`${t.value}${e}`}function pu(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Wt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Wt(e.params,n.params)||t.paramsSubject.next(n.params),Dw(e.url,n.url)||t.urlSubject.next(n.url),Wt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Lu(t,e){let n=Wt(t.params,e.params)&&xw(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Lu(t.parent,e.parent))}function Yg(t){return typeof t.title=="string"||t.title===null}var Xw=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ce,this.activateEvents=new Re,this.deactivateEvents=new Re,this.attachEvents=new Re,this.detachEvents=new Re,this.parentContexts=U(ea),this.location=U(wn),this.changeDetector=U(Ge),this.inputBinder=U(zu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new Pu(r,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ue({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_n]});let t=e;return t})(),Pu=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Wr?this.route:e===ea?this.childContexts:this.parent.get(e,n)}},zu=new te("");function Jw(t,e,n){let r=zi(t,e._root,n?n._root:void 0);return new Zo(r,e)}function zi(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=eb(t,e,n);return new ct(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>zi(t,a)),o}}let r=tb(e.value),i=e.children.map(s=>zi(t,s));return new ct(r,i)}}function eb(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return zi(t,r,i);return zi(t,r)})}function tb(t){return new Wr(new $e(t.url),new $e(t.params),new $e(t.queryParams),new $e(t.fragment),new $e(t.data),t.outlet,t.component,t)}var Gi=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Qg="ngNavigationCancelingError";function Xo(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ji(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Xg(!1,lt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Xg(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Qg]=!0,n.cancellationCode=e,n}function nb(t){return Jg(t)&&ji(t.url)}function Jg(t){return!!t&&t[Qg]}var rb=(t,e,n,r)=>de(i=>(new Fu(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Fu=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),pu(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Br(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Br(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Br(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Br(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ru(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Au(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(pu(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),pu(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Jo=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Hr=class{constructor(e,n){this.component=e,this.route=n}};function ib(t,e,n){let r=t._root,i=e?e._root:null;return Ni(r,i,n,[r.value])}function sb(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Gr(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Ph(t)?t:e.get(t):r}function Ni(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Br(e);return t.children.forEach(o=>{ob(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Bi(a,n.getContext(o),i)),i}function ob(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=ab(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Jo(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ni(t,e,a?a.children:null,r,i):Ni(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Hr(a.outlet.component,o))}else o&&Bi(e,a,i),i.canActivateChecks.push(new Jo(r)),s.component?Ni(t,null,a?a.children:null,r,i):Ni(t,null,n,r,i);return i}function ab(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!tr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!tr(t.url,e.url)||!Wt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Lu(t,e)||!Wt(t.queryParams,e.queryParams);case"paramsChange":default:return!Lu(t,e)}}function Bi(t,e,n){let r=Br(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Bi(o,e.children.getContext(s),n):Bi(o,null,n):Bi(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Hr(e.outlet.component,i)):n.canDeactivateChecks.push(new Hr(null,i)):n.canDeactivateChecks.push(new Hr(null,i))}function Qi(t){return typeof t=="function"}function cb(t){return typeof t=="boolean"}function lb(t){return t&&Qi(t.canLoad)}function ub(t){return t&&Qi(t.canActivate)}function db(t){return t&&Qi(t.canActivateChild)}function hb(t){return t&&Qi(t.canDeactivate)}function fb(t){return t&&Qi(t.canMatch)}function em(t){return t instanceof qt||t?.name==="EmptyError"}var Ho=Symbol("INITIAL_VALUE");function zr(){return wt(t=>Ps(t.map(e=>e.pipe(Kt(1),Wa(Ho)))).pipe(de(e=>{for(let n of e)if(n!==!0){if(n===Ho)return Ho;if(n===!1||pb(n))return n}return!0}),St(e=>e!==Ho),Kt(1)))}function pb(t){return ji(t)||t instanceof Gi}function gb(t,e){return je(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?ie(_e(H({},n),{guardsResult:!0})):mb(o,r,i,t).pipe(je(a=>a&&cb(a)?vb(r,s,t,e):ie(a)),de(a=>_e(H({},n),{guardsResult:a})))})}function mb(t,e,n,r){return Te(t).pipe(je(i=>wb(i.component,i.route,n,e,r)),kt(i=>i!==!0,!0))}function vb(t,e,n,r){return Te(e).pipe(pr(i=>fr(yb(i.route.parent,r),_b(i.route,r),Sb(t,i.path,n),Cb(t,i.route,n))),kt(i=>i!==!0,!0))}function _b(t,e){return t!==null&&e&&e(new Tu(t)),ie(!0)}function yb(t,e){return t!==null&&e&&e(new xu(t)),ie(!0)}function Cb(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ie(!0);let i=r.map(s=>Fs(()=>{let o=Yi(e)??n,a=Gr(s,o),l=ub(a)?a.canActivate(e,t):Ht(o,()=>a(e,t));return In(l).pipe(kt())}));return ie(i).pipe(zr())}function Sb(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>sb(o)).filter(o=>o!==null).map(o=>Fs(()=>{let a=o.guards.map(l=>{let c=Yi(o.node)??n,p=Gr(l,c),m=db(p)?p.canActivateChild(r,t):Ht(c,()=>p(r,t));return In(m).pipe(kt())});return ie(a).pipe(zr())}));return ie(s).pipe(zr())}function wb(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ie(!0);let o=s.map(a=>{let l=Yi(e)??i,c=Gr(a,l),p=hb(c)?c.canDeactivate(t,e,n,r):Ht(l,()=>c(t,e,n,r));return In(p).pipe(kt())});return ie(o).pipe(zr())}function bb(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return ie(!0);let s=i.map(o=>{let a=Gr(o,t),l=lb(a)?a.canLoad(e,n):Ht(t,()=>a(e,n));return In(l)});return ie(s).pipe(zr(),tm(r))}function tm(t){return Na(We(e=>{if(typeof e!="boolean")throw Xo(t,e)}),de(e=>e===!0))}function Db(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return ie(!0);let s=i.map(o=>{let a=Gr(o,t),l=fb(a)?a.canMatch(e,n):Ht(t,()=>a(e,n));return In(l)});return ie(s).pipe(zr(),tm(r))}var qi=class{constructor(e){this.segmentGroup=e||null}},Ki=class extends Error{constructor(e){super(),this.urlTree=e}};function Fr(t){return hr(new qi(t))}function Eb(t){return hr(new Z(4e3,!1))}function Ib(t){return hr(Xg(!1,lt.GuardRejected))}var Bu=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ie(r);if(i.numberOfChildren>1||!i.children[ce])return Eb(`${e.redirectTo}`);i=i.children[ce]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:l,fragment:c,routeConfig:p,url:m,outlet:y,params:g,data:u,title:h}=i,d=Ht(s,()=>a({params:g,data:u,queryParams:l,fragment:c,routeConfig:p,url:m,outlet:y,title:h}));if(d instanceof on)throw new Ki(d);n=d}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Ki(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new on(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new we(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Vu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Mb(t,e,n,r,i){let s=Gu(t,e,n);return s.matched?(r=Zw(e,r),Db(r,e,n,i).pipe(de(o=>o===!0?s:H({},Vu)))):ie(s)}function Gu(t,e,n){if(e.path==="**")return xb(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?H({},Vu):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||bw)(n,t,e);if(!i)return H({},Vu);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?H(H({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function xb(t){return{matched:!0,parameters:t.length>0?Lg(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Rg(t,e,n,r){return n.length>0&&Rb(t,n,r)?{segmentGroup:new we(e,Tb(r,new we(n,t.children))),slicedSegments:[]}:n.length===0&&kb(t,n,r)?{segmentGroup:new we(t.segments,Ab(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new we(t.segments,t.children),slicedSegments:n}}function Ab(t,e,n,r){let i={};for(let s of n)if(ta(t,e,s)&&!r[Tt(s)]){let o=new we([],{});i[Tt(s)]=o}return H(H({},r),i)}function Tb(t,e){let n={};n[ce]=e;for(let r of t)if(r.path===""&&Tt(r)!==ce){let i=new we([],{});n[Tt(r)]=i}return n}function Rb(t,e,n){return n.some(r=>ta(t,e,r)&&Tt(r)!==ce)}function kb(t,e,n){return n.some(r=>ta(t,e,r))}function ta(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Ob(t,e,n,r){return Tt(t)!==r&&(r===ce||!ta(e,n,t))?!1:Gu(e,t,n).matched}function Nb(t,e,n){return e.length===0&&!t.children[n]}var ju=class{};function Lb(t,e,n,r,i,s,o="emptyOnly"){return new Hu(t,e,n,r,i,o,s).recognize()}var Pb=31,Hu=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Bu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=Rg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(de(({children:n,rootSnapshot:r})=>{let i=new ct(r,n),s=new Qo("",i),o=Uw(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new jr([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ce,n).pipe(de(r=>({children:r,rootSnapshot:n})),un(r=>{if(r instanceof Ki)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof qi?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(de(o=>o instanceof ct?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Te(s).pipe(pr(o=>{let a=r.children[o],l=Yw(n,o);return this.processSegmentGroup(e,l,a,o,i)}),$a((o,a)=>(o.push(...a),o)),dn(null),Ua(),je(o=>{if(o===null)return Fr(r);let a=nm(o);return Fb(a),ie(a)}))}processSegment(e,n,r,i,s,o,a){return Te(n).pipe(pr(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,r,i,s,o,a).pipe(un(c=>{if(c instanceof qi)return ie(null);throw c}))),kt(l=>!!l),un(l=>{if(em(l))return Nb(r,i,s)?ie(new ju):Fr(r);throw l}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,l){return Ob(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,l):Fr(i):Fr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:l,parameters:c,consumedSegments:p,positionalParamSegments:m,remainingSegments:y}=Gu(n,i,s);if(!l)return Fr(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Pb&&(this.allowRedirects=!1));let g=new jr(s,c,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,kg(i),Tt(i),i.component??i._loadedComponent??null,i,Og(i)),u=Yo(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(u.params),g.data=Object.freeze(u.data);let h=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,m,g,e);return this.applyRedirects.lineralizeSegments(i,h).pipe(je(d=>this.processSegment(e,r,n,d.concat(y),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=Mb(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(wt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(wt(({routes:c})=>{let p=r._loadedInjector??e,{parameters:m,consumedSegments:y,remainingSegments:g}=l,u=new jr(y,m,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,kg(r),Tt(r),r.component??r._loadedComponent??null,r,Og(r)),h=Yo(u,o,this.paramsInheritanceStrategy);u.params=Object.freeze(h.params),u.data=Object.freeze(h.data);let{segmentGroup:d,slicedSegments:f}=Rg(n,y,g,c);if(f.length===0&&d.hasChildren())return this.processChildren(p,c,d,u).pipe(de(C=>new ct(u,C)));if(c.length===0&&f.length===0)return ie(new ct(u,[]));let v=Tt(r)===s;return this.processSegment(p,c,d,f,v?ce:s,!0,u).pipe(de(C=>new ct(u,C instanceof ct?[C]:[])))}))):Fr(n)))}getChildConfig(e,n,r){return n.children?ie({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ie({routes:n._loadedRoutes,injector:n._loadedInjector}):bb(e,n,r,this.urlSerializer).pipe(je(i=>i?this.configLoader.loadChildren(e,n).pipe(We(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Ib(n))):ie({routes:[],injector:e})}};function Fb(t){t.sort((e,n)=>e.value.outlet===ce?-1:n.value.outlet===ce?1:e.value.outlet.localeCompare(n.value.outlet))}function Bb(t){let e=t.value.routeConfig;return e&&e.path===""}function nm(t){let e=[],n=new Set;for(let r of t){if(!Bb(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=nm(r.children);e.push(new ct(r.value,i))}return e.filter(r=>!n.has(r))}function kg(t){return t.data||{}}function Og(t){return t.resolve||{}}function Vb(t,e,n,r,i,s){return je(o=>Lb(t,e,n,r,o.extractedUrl,i,s).pipe(de(({state:a,tree:l})=>_e(H({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function jb(t,e){return je(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ie(n);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of rm(l))o.add(c);let a=0;return Te(o).pipe(pr(l=>s.has(l)?Hb(l,r,t,e):(l.data=Yo(l,l.parent,t).resolve,ie(void 0))),We(()=>a++),gr(1),je(l=>a===o.size?ie(n):ot))})}function rm(t){let e=t.children.map(n=>rm(n)).flat();return[t,...e]}function Hb(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!Yg(i)&&(s[Zi]=i.title),Ub(s,t,e,r).pipe(de(o=>(t._resolvedData=o,t.data=Yo(t,t.parent,n).resolve,null)))}function Ub(t,e,n,r){let i=vu(t);if(i.length===0)return ie({});let s={};return Te(i).pipe(je(o=>$b(t[o],e,n,r).pipe(kt(),We(a=>{if(a instanceof Gi)throw Xo(new Vi,a);s[o]=a}))),gr(1),Ha(s),un(o=>em(o)?ot:hr(o)))}function $b(t,e,n,r){let i=Yi(e)??r,s=Gr(t,i),o=s.resolve?s.resolve(e,n):Ht(i,()=>s(e,n));return In(o)}function gu(t){return wt(e=>{let n=t(e);return n?Te(n).pipe(de(()=>e)):ie(e)})}var im=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ce);return i}getResolvedTitleForRoute(r){return r.data[Zi]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:()=>U(Wb),providedIn:"root"});let t=e;return t})(),Wb=(()=>{let e=class e extends im{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(pe(Ig))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qu=new te("",{providedIn:"root",factory:()=>({})}),zb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=nt({type:e,selectors:[["ng-component"]],standalone:!0,features:[it],decls:1,vars:0,template:function(i,s){i&1&&be(0,"router-outlet")},dependencies:[Xw],encapsulation:2});let t=e;return t})();function Ku(t){let e=t.children&&t.children.map(Ku),n=e?_e(H({},t),{children:e}):H({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ce&&(n.component=zb),n}var Zu=new te(""),Gb=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(Xl)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ie(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=In(r.loadComponent()).pipe(de(sm),We(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),li(()=>{this.componentLoaders.delete(r)})),s=new dr(i,()=>new Me).pipe(ur());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ie({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=qb(i,this.compiler,r,this.onLoadEndListener).pipe(li(()=>{this.childrenLoaders.delete(i)})),a=new dr(o,()=>new Me).pipe(ur());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qb(t,e,n,r){return In(t.loadChildren()).pipe(de(sm),je(i=>i instanceof vi||Array.isArray(i)?ie(i):Te(e.compileModuleAsync(i))),de(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Zu,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ku),injector:s}}))}function Kb(t){return t&&typeof t=="object"&&"default"in t}function sm(t){return Kb(t)?t.default:t}var Yu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:()=>U(Zb),providedIn:"root"});let t=e;return t})(),Zb=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yb=new te("");var Qb=new te(""),Xb=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Me,this.transitionAbortSubject=new Me,this.configLoader=U(Gb),this.environmentInjector=U(ft),this.urlSerializer=U($u),this.rootContexts=U(ea),this.location=U(Mi),this.inputBindingEnabled=U(zu,{optional:!0})!==null,this.titleStrategy=U(im),this.options=U(qu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(Yu),this.createViewTransition=U(Yb,{optional:!0}),this.navigationErrorHandler=U(Qb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ie(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Iu(s)),i=s=>this.events.next(new Mu(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(_e(H(H({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new $e({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Fi,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(St(o=>o.id!==0),de(o=>_e(H({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),wt(o=>{let a=!1,l=!1;return ie(o).pipe(wt(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",lt.SupersededByNewNavigation),ot;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?_e(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!p&&m!=="reload"){let y="";return this.events.next(new rr(c.id,this.urlSerializer.serialize(c.rawUrl),y,Su.IgnoredSameUrlNavigation)),c.resolve(!1),ot}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ie(c).pipe(wt(y=>{let g=this.transitions?.getValue();return this.events.next(new Ui(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),g!==this.transitions?.getValue()?ot:Promise.resolve(y)}),Vb(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),We(y=>{o.targetSnapshot=y.targetSnapshot,o.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation=_e(H({},this.currentNavigation),{finalUrl:y.urlAfterRedirects});let g=new qo(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(g)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:y,extractedUrl:g,source:u,restoredState:h,extras:d}=c,f=new Ui(y,this.urlSerializer.serialize(g),u,h);this.events.next(f);let v=Kg(this.rootComponentType).snapshot;return this.currentTransition=o=_e(H({},c),{targetSnapshot:v,urlAfterRedirects:g,extras:_e(H({},d),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,ie(o)}else{let y="";return this.events.next(new rr(c.id,this.urlSerializer.serialize(c.extractedUrl),y,Su.IgnoredByUrlHandlingStrategy)),c.resolve(!1),ot}}),We(c=>{let p=new wu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(p)}),de(c=>(this.currentTransition=o=_e(H({},c),{guards:ib(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),gb(this.environmentInjector,c=>this.events.next(c)),We(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Xo(this.urlSerializer,c.guardsResult);let p=new bu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(p)}),St(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",lt.GuardRejected),!1)),gu(c=>{if(c.guards.canActivateChecks.length)return ie(c).pipe(We(p=>{let m=new Du(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}),wt(p=>{let m=!1;return ie(p).pipe(jb(this.paramsInheritanceStrategy,this.environmentInjector),We({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(p,"",lt.NoDataFromResolver)}}))}),We(p=>{let m=new Eu(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}))}),gu(c=>{let p=m=>{let y=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(m.routeConfig).pipe(We(g=>{m.component=g}),de(()=>{})));for(let g of m.children)y.push(...p(g));return y};return Ps(p(c.targetSnapshot.root)).pipe(dn(null),Kt(1))}),gu(()=>this.afterPreactivation()),wt(()=>{let{currentSnapshot:c,targetSnapshot:p}=o,m=this.createViewTransition?.(this.environmentInjector,c.root,p.root);return m?Te(m).pipe(de(()=>o)):ie(o)}),de(c=>{let p=Jw(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=_e(H({},c),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,o}),We(()=>{this.events.next(new Wi)}),rb(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Kt(1),We({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new nr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),za(this.transitionAbortSubject.pipe(We(c=>{throw c}))),li(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",lt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),un(c=>{if(l=!0,Jg(c))this.events.next(new sn(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),nb(c)?this.events.next(new $r(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let p=new $i(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let m=Ht(this.environmentInjector,()=>this.navigationErrorHandler?.(p));if(m instanceof Gi){let{message:y,cancellationCode:g}=Xo(this.urlSerializer,m);this.events.next(new sn(o.id,this.urlSerializer.serialize(o.extractedUrl),y,g)),this.events.next(new $r(m.redirectTo,m.navigationBehaviorOptions))}else{this.events.next(p);let y=r.errorHandler(c);o.resolve(!!y)}}catch(m){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(m)}}return ot}))}))}cancelNavigationTransition(r,i,s){let o=new sn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Jb(t){return t!==Fi}var eD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:()=>U(tD),providedIn:"root"});let t=e;return t})(),Uu=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},tD=(()=>{let e=class e extends Uu{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Cn(e)))(s||e)}})(),e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),om=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:()=>U(nD),providedIn:"root"});let t=e;return t})(),nD=(()=>{let e=class e extends om{constructor(){super(...arguments),this.location=U(Mi),this.urlSerializer=U($u),this.options=U(qu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(Yu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new on,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Kg(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ui)this.stateMemento=this.createStateMemento();else if(r instanceof rr)this.rawUrlTree=i.initialUrl;else if(r instanceof qo){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof Wi?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof sn&&(r.code===lt.GuardRejected||r.code===lt.NoDataFromResolver)?this.restoreHistory(i):r instanceof $i?this.restoreHistory(i,!0):r instanceof nr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof on?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=H(H({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=H(H({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Cn(e)))(s||e)}})(),e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Li=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Li||{});function rD(t,e){t.events.pipe(St(n=>n instanceof nr||n instanceof sn||n instanceof $i||n instanceof rr),de(n=>n instanceof nr||n instanceof rr?Li.COMPLETE:(n instanceof sn?n.code===lt.Redirect||n.code===lt.SupersededByNewNavigation:!1)?Li.REDIRECTING:Li.FAILED),St(n=>n!==Li.REDIRECTING),Kt(1)).subscribe(()=>{e()})}function iD(t){throw t}var sD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},am=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=U(ko),this.stateManager=U(om),this.options=U(qu,{optional:!0})||{},this.pendingTasks=U(Nr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(Xb),this.urlSerializer=U($u),this.location=U(Mi),this.urlHandlingStrategy=U(Yu),this._events=new Me,this.errorHandler=this.options.errorHandler||iD,this.navigated=!1,this.routeReuseStrategy=U(eD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(Zu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(zu,{optional:!0}),this.eventsSubscription=new Ne,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof sn&&i.code!==lt.Redirect&&i.code!==lt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof nr)this.navigated=!0;else if(i instanceof $r){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c=H({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Jb(s.source)},a);this.scheduleNavigation(l,Fi,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}cD(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=H({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Ku),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,p=c?this.currentUrlTree.fragment:a,m=null;switch(l){case"merge":m=H(H({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let y;try{let g=s?s.snapshot:this.routerState.snapshot.root;y=Wg(g)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),y=this.currentUrlTree.root}return zg(y,r,m,p??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=ji(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Fi,null,i)}navigate(r,i={skipLocationChange:!1}){return aD(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=H({},sD):i===!1?s=H({},oD):s=i,ji(r))return Mg(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Mg(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,p;a?(l=a.resolve,c=a.reject,p=a.promise):p=new Promise((y,g)=>{l=y,c=g});let m=this.pendingTasks.add();return rD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:l,reject:c,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(y=>Promise.reject(y))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aD(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Z(4008,!1)}function cD(t){return!(t instanceof Wi)&&!(t instanceof $r)}var lD=new te("");function cm(t,...e){return yo([{provide:Zu,multi:!0,useValue:t},[],{provide:Wr,useFactory:uD,deps:[am]},{provide:Ql,multi:!0,useFactory:dD},e.map(n=>n.\u0275providers)])}function uD(t){return t.routerState.root}function dD(){let t=U(Vt);return e=>{let n=t.get(Pr);if(e!==n.components[0])return;let r=t.get(am),i=t.get(hD);t.get(fD)===1&&r.initialNavigation(),t.get(pD,null,le.Optional)?.setUpPreloading(),t.get(lD,null,le.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var hD=new te("",{factory:()=>new Me}),fD=new te("",{providedIn:"root",factory:()=>1});var pD=new te("");var lm=[];var um={providers:[ng({eventCoalescing:!0}),cm(lm)]};var ym=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(Q(Sn),Q(mt))},e.\u0275dir=Ue({type:e});let t=e;return t})(),la=(()=>{let e=class e extends ym{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Cn(e)))(s||e)}})(),e.\u0275dir=Ue({type:e,features:[Mt]});let t=e;return t})(),is=new te("");var gD={provide:is,useExisting:Xt(()=>Qr),multi:!0};function mD(){let t=rn()?rn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var vD=new te(""),Qr=(()=>{let e=class e extends ym{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!mD())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(Q(Sn),Q(mt),Q(vD,8))},e.\u0275dir=Ue({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Ee("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Yn([gD]),Mt]});let t=e;return t})();var Cm=new te(""),Sm=new te("");function wm(t){return t!=null}function bm(t){return Xn(t)?Te(t):t}function Dm(t){let e={};return t.forEach(n=>{e=n!=null?H(H({},e),n):e}),Object.keys(e).length===0?null:e}function Em(t,e){return e.map(n=>n(t))}function _D(t){return!t.validate}function Im(t){return t.map(e=>_D(e)?e:n=>e.validate(n))}function yD(t){if(!t)return null;let e=t.filter(wm);return e.length==0?null:function(n){return Dm(Em(n,e))}}function Xu(t){return t!=null?yD(Im(t)):null}function CD(t){if(!t)return null;let e=t.filter(wm);return e.length==0?null:function(n){let r=Em(n,e).map(bm);return ja(r).pipe(de(Dm))}}function Ju(t){return t!=null?CD(Im(t)):null}function dm(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function SD(t){return t._rawValidators}function wD(t){return t._rawAsyncValidators}function Qu(t){return t?Array.isArray(t)?t:[t]:[]}function ra(t,e){return Array.isArray(t)?t.includes(e):t===e}function hm(t,e){let n=Qu(e);return Qu(t).forEach(i=>{ra(n,i)||n.push(i)}),n}function fm(t,e){return Qu(e).filter(n=>!ra(t,n))}var ia=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xu(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ju(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Zr=class extends ia{get formDirective(){return null}get path(){return null}},rs=class extends ia{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},sa=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},bD={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ZR=_e(H({},bD),{"[class.ng-submitted]":"isSubmitted"}),ua=(()=>{let e=class e extends sa{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(Q(rs,2))},e.\u0275dir=Ue({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&To("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Mt]});let t=e;return t})(),Mm=(()=>{let e=class e extends sa{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(Q(Zr,10))},e.\u0275dir=Ue({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&To("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Mt]});let t=e;return t})();var Xi="VALID",na="INVALID",qr="PENDING",Ji="DISABLED",Yr=class{},oa=class extends Yr{constructor(e,n){super(),this.value=e,this.source=n}},ts=class extends Yr{constructor(e,n){super(),this.pristine=e,this.source=n}},ns=class extends Yr{constructor(e,n){super(),this.touched=e,this.source=n}},Kr=class extends Yr{constructor(e,n){super(),this.status=e,this.source=n}};function xm(t){return(da(t)?t.validators:t)||null}function DD(t){return Array.isArray(t)?Xu(t):t||null}function Am(t,e){return(da(e)?e.asyncValidators:t)||null}function ED(t){return Array.isArray(t)?Ju(t):t||null}function da(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function ID(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new Z(1e3,"");if(!r[n])throw new Z(1001,"")}function MD(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new Z(1002,"")})}var aa=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ii(()=>this.statusReactive()),this.statusReactive=Di(void 0),this._pristine=Ii(()=>this.pristineReactive()),this.pristineReactive=Di(!0),this._touched=Ii(()=>this.touchedReactive()),this.touchedReactive=Di(!1),this._events=new Me,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return nn(this.statusReactive)}set status(e){nn(()=>this.statusReactive.set(e))}get valid(){return this.status===Xi}get invalid(){return this.status===na}get pending(){return this.status==qr}get disabled(){return this.status===Ji}get enabled(){return this.status!==Ji}get pristine(){return nn(this.pristineReactive)}set pristine(e){nn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return nn(this.touchedReactive)}set touched(e){nn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(hm(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(hm(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(fm(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(fm(e,this._rawAsyncValidators))}hasValidator(e){return ra(this._rawValidators,e)}hasAsyncValidator(e){return ra(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(_e(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ns(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new ns(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(_e(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ts(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new ts(!0,r))}markAsPending(e={}){this.status=qr;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Kr(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(_e(H({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ji,this.errors=null,this._forEachChild(i=>{i.disable(_e(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new oa(this.value,r)),this._events.next(new Kr(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(_e(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Xi,this._forEachChild(r=>{r.enable(_e(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(_e(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xi||this.status===qr)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new oa(this.value,n)),this._events.next(new Kr(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(_e(H({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ji:Xi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=qr,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=bm(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Kr(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Re,this.statusChanges=new Re}_calculateStatus(){return this._allControlsDisabled()?Ji:this.errors?na:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qr)?qr:this._anyControlsHaveStatus(na)?na:Xi}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new ts(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new ns(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){da(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=DD(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=ED(this._rawAsyncValidators)}},ca=class extends aa{constructor(e,n,r){super(xm(n),Am(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){MD(this,!0,e),Object.keys(e).forEach(r=>{ID(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ed=new te("CallSetDisabledState",{providedIn:"root",factory:()=>td}),td="always";function xD(t,e){return[...e.path,t]}function Tm(t,e,n=td){Rm(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),TD(t,e),kD(t,e),RD(t,e),AD(t,e)}function pm(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function AD(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Rm(t,e){let n=SD(t);e.validator!==null?t.setValidators(dm(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=wD(t);e.asyncValidator!==null?t.setAsyncValidators(dm(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();pm(e._rawValidators,i),pm(e._rawAsyncValidators,i)}function TD(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&km(t,e)})}function RD(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&km(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function km(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function kD(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function OD(t,e){t==null,Rm(t,e)}function ND(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function LD(t){return Object.getPrototypeOf(t.constructor)===la}function PD(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function FD(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Qr?n=s:LD(s)?r=s:i=s}),i||r||n||null}var BD={provide:Zr,useExisting:Xt(()=>nd)},es=Promise.resolve(),nd=(()=>{let e=class e extends Zr{get submitted(){return nn(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Ii(()=>this.submittedReactive()),this.submittedReactive=Di(!1),this._directives=new Set,this.ngSubmit=new Re,this.form=new ca({},Xu(r),Ju(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){es.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),Tm(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){es.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){es.then(()=>{let i=this._findContainer(r.path),s=new ca({});OD(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){es.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){es.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),PD(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(Q(Cm,10),Q(Sm,10),Q(ed,8))},e.\u0275dir=Ue({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Ee("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Yn([BD]),Mt]});let t=e;return t})();function gm(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function mm(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var VD=class extends aa{constructor(e=null,n,r){super(xm(n),Am(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),da(n)&&(n.nonNullable||n.initialValueIsDefault)&&(mm(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){mm(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var jD={provide:rs,useExisting:Xt(()=>ss)},vm=Promise.resolve(),ss=(()=>{let e=class e extends rs{constructor(r,i,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new VD,this._registered=!1,this.name="",this.update=new Re,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=FD(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),ND(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Tm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){vm.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Oo(i);vm.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?xD(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(Q(Zr,9),Q(Cm,10),Q(Sm,10),Q(is,10),Q(Ge,8),Q(ed,8))},e.\u0275dir=Ue({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Yn([jD]),Mt,_n]});let t=e;return t})(),Om=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ue({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),HD={provide:is,useExisting:Xt(()=>rd),multi:!0},rd=(()=>{let e=class e extends la{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Cn(e)))(s||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Ee("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[Yn([HD]),Mt]});let t=e;return t})();var UD={provide:is,useExisting:Xt(()=>ha),multi:!0};function Nm(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function $D(t){return t.split(":")[0]}var ha=(()=>{let e=class e extends la{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=Nm(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=$D(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Cn(e)))(s||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&Ee("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Yn([UD]),Mt]});let t=e;return t})(),Lm=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(Nm(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(Q(mt),Q(Sn),Q(ha,9))},e.\u0275dir=Ue({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),WD={provide:is,useExisting:Xt(()=>Pm),multi:!0};function _m(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function zD(t){return t.split(":")[0]}var Pm=(()=>{let e=class e extends la{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let l=0;l<a.length;l++){let c=a[l],p=this._getOptionValue(c.value);s.push(p)}}else{let a=i.options;for(let l=0;l<a.length;l++){let c=a[l];if(c.selected){let p=this._getOptionValue(c.value);s.push(p)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=zD(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Cn(e)))(s||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&Ee("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Yn([WD]),Mt]});let t=e;return t})(),Fm=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(_m(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(_m(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(Q(mt),Q(Sn),Q(Pm,9))},e.\u0275dir=Ue({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var GD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Wn({type:e}),e.\u0275inj=$n({});let t=e;return t})();var Xr=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:ed,useValue:r.callSetDisabledState??td}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Wn({type:e}),e.\u0275inj=$n({imports:[GD]});let t=e;return t})();var fa=class{_sessionDataEvent=new Me;buffer=[];reader=void 0;readStopFlag=!0;name=void 0;serial_port=void 0;opened=!1;get SessionDataEvent(){return this._sessionDataEvent.asObservable()}serial_options={baudRate:115200,dataBits:8,stopBits:1,parity:"none",bufferSize:1e6,rtscts:!1,xon:!1,xoff:!1,xany:!1,line_feed:"LF"};constructor(e,n){this.name=e,this.serial_options=n}open(){return zt(this,null,function*(){this.serial_port!=null&&(yield this.serial_port.open(this.serial_options),this.serial_port.readable&&(this.opened=!0,this.reader=this.serial_port.readable.getReader(),this.reader!=null&&this.fetchStream()))})}close(){return zt(this,null,function*(){if(this.serial_port!=null){this.readStopFlag=!0;try{this.reader.cancel(),this.reader.releaseLock()}catch{}this.serial_port.close(),this.opened=!1}})}write(e){if(e.length>0&&this.serial_port!=null&&this.serial_port.writable!=null){let n=this.serial_port.writable.getWriter();n.write(e),n.releaseLock()}}getNewLineCharacter(){return this.serial_options.line_feed=="CR"?"\r":this.serial_options.line_feed=="LF"?`
`:(this.serial_options.line_feed="CRLF")?`\r
`:""}readBuffer(){return[...this.buffer]}fetchStream(){return zt(this,null,function*(){if(this.serial_port!=null)for(this.readStopFlag=!1;this.reader!=null&&!this.readStopFlag;)try{let{value:e,done:n}=yield this.reader.read();if(n){this.reader.releaseLock();break}else this.buffer.push(...e),this._sessionDataEvent.next(e)}catch{yield new Promise(n=>{setTimeout(n,10)}),this.reader=this.serial_port.readable.getReader()}})}};var _t=function(){return _t=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_t.apply(this,arguments)},qD=function(){function t(e){this.options=e,this.listeners={}}return t.prototype.on=function(e,n){var r=this.listeners[e]||[];this.listeners[e]=r.concat([n])},t.prototype.triggerEvent=function(e,n){var r=this,i=this.listeners[e]||[];i.forEach(function(s){return s({target:r,event:n})})},t}(),os=function(t){return t[t.Add=0]="Add",t[t.Remove=1]="Remove",t}(os||{}),KD=function(){function t(){this.notifications=[]}return t.prototype.push=function(e){this.notifications.push(e),this.updateFn(e,os.Add,this.notifications)},t.prototype.splice=function(e,n){var r=this.notifications.splice(e,n)[0];return this.updateFn(r,os.Remove,this.notifications),r},t.prototype.indexOf=function(e){return this.notifications.indexOf(e)},t.prototype.onUpdate=function(e){this.updateFn=e},t}(),ir=function(t){return t.Dismiss="dismiss",t.Click="click",t}(ir||{}),Vm={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!1},ZD=function(){function t(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var e=document.createDocumentFragment(),n=this._createHTMLElement({tagName:"div",className:"notyf"});e.appendChild(n),document.body.appendChild(e),this.container=n,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}return t.prototype.on=function(e,n){var r;this.events=_t(_t({},this.events),(r={},r[e]=n,r))},t.prototype.update=function(e,n){n===os.Add?this.addNotification(e):n===os.Remove&&this.removeNotification(e)},t.prototype.removeNotification=function(e){var n=this,r=this._popRenderedNotification(e),i;if(r){i=r.node,i.classList.add("notyf__toast--disappear");var s;i.addEventListener(this.animationEndEventName,s=function(o){o.target===i&&(i.removeEventListener(n.animationEndEventName,s),n.container.removeChild(i))})}},t.prototype.addNotification=function(e){var n=this._renderNotification(e);this.notifications.push({notification:e,node:n}),this._announce(e.options.message||"Notification")},t.prototype._renderNotification=function(e){var n,r=this._buildNotificationCard(e),i=e.options.className;return i&&(n=r.classList).add.apply(n,i.split(" ")),this.container.appendChild(r),r},t.prototype._popRenderedNotification=function(e){for(var n=-1,r=0;r<this.notifications.length&&n<0;r++)this.notifications[r].notification===e&&(n=r);if(n!==-1)return this.notifications.splice(n,1)[0]},t.prototype.getXPosition=function(e){var n;return((n=e?.position)===null||n===void 0?void 0:n.x)||"right"},t.prototype.getYPosition=function(e){var n;return((n=e?.position)===null||n===void 0?void 0:n.y)||"bottom"},t.prototype.adjustContainerAlignment=function(e){var n=this.X_POSITION_FLEX_MAP[this.getXPosition(e)],r=this.Y_POSITION_FLEX_MAP[this.getYPosition(e)],i=this.container.style;i.setProperty("justify-content",r),i.setProperty("align-items",n)},t.prototype._buildNotificationCard=function(e){var n=this,r=e.options,i=r.icon;this.adjustContainerAlignment(r);var s=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),o=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),a=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),l=this._createHTMLElement({tagName:"div",className:"notyf__message"});l.innerHTML=r.message||"";var c=r.background||r.backgroundColor;if(i){var p=this._createHTMLElement({tagName:"div",className:"notyf__icon"});if((typeof i=="string"||i instanceof String)&&(p.innerHTML=new String(i).valueOf()),typeof i=="object"){var m=i.tagName,y=m===void 0?"i":m,g=i.className,u=i.text,h=i.color,d=h===void 0?c:h,f=this._createHTMLElement({tagName:y,className:g,text:u});d&&(f.style.color=d),p.appendChild(f)}a.appendChild(p)}if(a.appendChild(l),s.appendChild(a),c&&(r.ripple?(o.style.background=c,s.appendChild(o)):s.style.background=c),r.dismissible){var v=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),C=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"});v.appendChild(C),a.appendChild(v),s.classList.add("notyf__toast--dismissible"),C.addEventListener("click",function(w){var _,b;(b=(_=n.events)[ir.Dismiss])===null||b===void 0||b.call(_,{target:e,event:w}),w.stopPropagation()})}s.addEventListener("click",function(w){var _,b;return(b=(_=n.events)[ir.Click])===null||b===void 0?void 0:b.call(_,{target:e,event:w})});var S=this.getYPosition(r)==="top"?"upper":"lower";return s.classList.add("notyf__toast--"+S),s},t.prototype._createHTMLElement=function(e){var n=e.tagName,r=e.className,i=e.text,s=document.createElement(n);return r&&(s.className=r),s.textContent=i||null,s},t.prototype._createA11yContainer=function(){var e=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),e.style.border="0",e.style.clip="rect(0 0 0 0)",e.style.height="1px",e.style.margin="-1px",e.style.overflow="hidden",e.style.padding="0",e.style.position="absolute",e.style.width="1px",e.style.outline="0",document.body.appendChild(e),this.a11yContainer=e},t.prototype._announce=function(e){var n=this;this.a11yContainer.textContent="",setTimeout(function(){n.a11yContainer.textContent=e},100)},t.prototype._getAnimationEndEventName=function(){var e=document.createElement("_fake"),n={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"},r;for(r in n)if(e.style[r]!==void 0)return n[r];return"animationend"},t}(),jm=function(){function t(e){var n=this;this.dismiss=this._removeNotification,this.notifications=new KD,this.view=new ZD;var r=this.registerTypes(e);this.options=_t(_t({},Vm),e),this.options.types=r,this.notifications.onUpdate(function(i,s){return n.view.update(i,s)}),this.view.on(ir.Dismiss,function(i){var s=i.target,o=i.event;n._removeNotification(s),s.triggerEvent(ir.Dismiss,o)}),this.view.on(ir.Click,function(i){var s=i.target,o=i.event;return s.triggerEvent(ir.Click,o)})}return t.prototype.error=function(e){var n=this.normalizeOptions("error",e);return this.open(n)},t.prototype.success=function(e){var n=this.normalizeOptions("success",e);return this.open(n)},t.prototype.open=function(e){var n=this.options.types.find(function(s){var o=s.type;return o===e.type})||{},r=_t(_t({},n),e);this.assignProps(["ripple","position","dismissible"],r);var i=new qD(r);return this._pushNotification(i),i},t.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},t.prototype.assignProps=function(e,n){var r=this;e.forEach(function(i){n[i]=n[i]==null?r.options[i]:n[i]})},t.prototype._pushNotification=function(e){var n=this;this.notifications.push(e);var r=e.options.duration!==void 0?e.options.duration:this.options.duration;r&&setTimeout(function(){return n._removeNotification(e)},r)},t.prototype._removeNotification=function(e){var n=this.notifications.indexOf(e);n!==-1&&this.notifications.splice(n,1)},t.prototype.normalizeOptions=function(e,n){var r={type:e};return typeof n=="string"?r.message=n:typeof n=="object"&&(r=_t(_t({},r),n)),r},t.prototype.registerTypes=function(e){var n=(e&&e.types||[]).slice(),r=Vm.types.map(function(i){var s=-1;n.forEach(function(a,l){a.type===i.type&&(s=l)});var o=s!==-1?n.splice(s,1)[0]:{};return _t(_t({},i),o)});return r.concat(n)},t}();var yt=(()=>{class t{sessions=[];layout_mode="grid";active_session=0;notyf=void 0;constructor(){this.notyf=new jm}_resizeEvent=new Me;get ResizeEvent(){return this._resizeEvent.asObservable()}triggerResizeEvent(){this._resizeEvent.next(void 0)}_sessionChangeEvent=new Me;get SessionChangeEvent(){return this._sessionChangeEvent.asObservable()}_sessionLayoutChangeEvent=new Me;get SessionLayoutChangeEvent(){return this._sessionLayoutChangeEvent.asObservable()}newSession(){let n=new fa(`Session${this.sessions.length+1}`,this.getDefaultSerialOptions());this.sessions.push(n),this._sessionChangeEvent.next(n)}removeSession(n){this.sessions.includes(n)&&(n.opened&&n.close(),this.sessions.splice(this.sessions.indexOf(n),1),this._sessionChangeEvent.next(n))}saveDefaultSerialOptions(n){localStorage.setItem("default_serial_options",JSON.stringify(n))}getDefaultSerialOptions(){let n,r=localStorage.getItem("default_serial_options");return r!=null&&r.length>0&&(n=JSON.parse(r)),n==null&&(n={baudRate:115200,dataBits:8,stopBits:1,parity:"none",bufferSize:1e6,rtscts:!1,xon:!1,xoff:!1,xany:!1,line_feed:"LF"}),n}changeLayout(n){this.layout_mode=n,this._sessionLayoutChangeEvent.next(this.layout_mode)}showInfo(n){this.notyf.success({message:n,duration:5e3,icon:!1})}showError(n){this.notyf.error({message:n,duration:5e3,icon:!1})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function YD(t,e){if(t&1){let n=Dn();z(0,"i",12),Ee("click",function(){Pe(n);let i=oe();return Fe(i.changeLayout(i.appService.layout_mode!="grid"?"grid":"tab"))}),G()}if(t&2){let n=oe();bn("toggle-sidebar-btn clickable-icon bi "+(n.appService.layout_mode!="grid"?"bi-window-stack":"bi-grid"))}}var Hm=(()=>{class t{changeDetectorRef;appService;constructor(n,r){this.changeDetectorRef=n,this.appService=r,this.appService.SessionChangeEvent.subscribe(()=>{this.changeDetectorRef.detectChanges()})}addSession(){this.appService.newSession()}changeLayout(n){this.appService.changeLayout(n)}toggleFullscreen(){let n=window.document;n.fullScreenElement&&n.fullScreenElement!==null||!n.mozFullScreen&&!n.webkitIsFullScreen?n.documentElement.requestFullScreen?n.documentElement.requestFullScreen():n.documentElement.mozRequestFullScreen?n.documentElement.mozRequestFullScreen():n.documentElement.webkitRequestFullScreen?n.documentElement.webkitRequestFullScreen():n.msRequestFullscreen&&n.documentElement.msRequestFullscreen():n.cancelFullScreen?n.cancelFullScreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitCancelFullScreen?n.webkitCancelFullScreen():n.msExitFullscreen&&n.msExitFullscreen()}isFullscreen(){let n=window.document;return n.fullScreenElement&&n.fullScreenElement!==null||!n.mozFullScreen&&!n.webkitIsFullScreen}static \u0275fac=function(r){return new(r||t)(Q(Ge),Q(yt))};static \u0275cmp=nt({type:t,selectors:[["app-header"]],standalone:!0,features:[it],decls:13,vars:1,consts:[["id","header",1,"header","fixed-top","d-flex","align-items-center"],[1,"d-flex","align-items-center","justify-content-between"],[1,"logo","d-flex","align-items-center"],["src","img/logo.png","alt",""],[1,"d-none","d-lg-block"],["data-bs-toggle","tooltip","data-bs-placement","top","title","New Session",1,"bi","bi-terminal-plus","toggle-sidebar-btn","clickable-icon",3,"click"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Session Layout",3,"class","click",4,"ngIf"],[1,"d-flex","ms-2","align-items-center","justify-content-between"],[1,"header-nav","ms-auto"],[1,"d-flex","align-items-center"],[1,"nav-item","me-2"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Enter Fullscreen",1,"bi","bi-arrows-fullscreen","toggle-sidebar-btn","clickable-icon",3,"click"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Session Layout",3,"click"]],template:function(r,i){r&1&&(z(0,"header",0)(1,"div",1)(2,"div",2),be(3,"img",3),z(4,"span",4),ae(5,"VTerm"),G()(),z(6,"i",5),Ee("click",function(){return i.addSession()}),G(),Be(7,YD,1,2,"i",6),G(),be(8,"div",7),z(9,"nav",8)(10,"ul",9)(11,"li",10)(12,"i",11),Ee("click",function(){return i.toggleFullscreen()}),G()()()()()),r&2&&(he(7),ye("ngIf",i.appService.sessions.length>1))},dependencies:[At,En],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return t})();var Gm=ud(Um()),qm=ud(Wm());var ei=()=>({standalone:!0});function QD(t,e){if(t&1){let n=Dn();z(0,"div",12)(1,"form")(2,"div",13)(3,"label",14),ae(4,"BaudRate:"),G(),z(5,"select",15),$t("ngModelChange",function(i){Pe(n);let s=oe();return tn(s.session.serial_options.baudRate,i)||(s.session.serial_options.baudRate=i),Fe(i)}),z(6,"option",16),ae(7,"110"),G(),z(8,"option",17),ae(9,"300"),G(),z(10,"option",18),ae(11,"1200"),G(),z(12,"option",19),ae(13,"2400"),G(),z(14,"option",20),ae(15,"4800"),G(),z(16,"option",21),ae(17,"9600"),G(),z(18,"option",22),ae(19,"14400"),G(),z(20,"option",23),ae(21,"19200"),G(),z(22,"option",24),ae(23,"38400"),G(),z(24,"option",25),ae(25,"57600"),G(),z(26,"option",26),ae(27,"115200"),G(),z(28,"option",27),ae(29,"230400"),G(),z(30,"option",28),ae(31,"460800"),G(),z(32,"option",29),ae(33,"921600"),G()()(),z(34,"div",13)(35,"label",30),ae(36,"DataBits:"),G(),z(37,"input",31),$t("ngModelChange",function(i){Pe(n);let s=oe();return tn(s.session.serial_options.dataBits,i)||(s.session.serial_options.dataBits=i),Fe(i)}),G()(),z(38,"div",13)(39,"label",32),ae(40,"StopBits:"),G(),z(41,"input",33),$t("ngModelChange",function(i){Pe(n);let s=oe();return tn(s.session.serial_options.stopBits,i)||(s.session.serial_options.stopBits=i),Fe(i)}),G()(),z(42,"div",13)(43,"label",34),ae(44,"Parity:"),G(),z(45,"select",35),$t("ngModelChange",function(i){Pe(n);let s=oe();return tn(s.session.serial_options.parity,i)||(s.session.serial_options.parity=i),Fe(i)}),z(46,"option",36),ae(47,"none"),G(),z(48,"option",37),ae(49,"odd"),G(),z(50,"option",38),ae(51,"even"),G()()(),z(52,"div",13)(53,"label",39),ae(54,"BufferSize:"),G(),z(55,"input",40),$t("ngModelChange",function(i){Pe(n);let s=oe();return tn(s.session.serial_options.bufferSize,i)||(s.session.serial_options.bufferSize=i),Fe(i)}),G()(),z(56,"div",13)(57,"label",41),ae(58,"Send New Line:"),G(),z(59,"select",42),$t("ngModelChange",function(i){Pe(n);let s=oe();return tn(s.session.serial_options.line_feed,i)||(s.session.serial_options.line_feed=i),Fe(i)}),z(60,"option",43),ae(61,"NONE"),G(),z(62,"option",44),ae(63,"CR"),G(),z(64,"option",45),ae(65,"LF"),G(),z(66,"option",46),ae(67,"CRLF"),G()()()()()}if(t&2){let n=oe();he(5),Ut("ngModel",n.session.serial_options.baudRate),ye("ngModelOptions",Qn(12,ei)),he(32),Ut("ngModel",n.session.serial_options.dataBits),ye("ngModelOptions",Qn(13,ei)),he(4),Ut("ngModel",n.session.serial_options.stopBits),ye("ngModelOptions",Qn(14,ei)),he(4),Ut("ngModel",n.session.serial_options.parity),ye("ngModelOptions",Qn(15,ei)),he(10),Ut("ngModel",n.session.serial_options.bufferSize),ye("ngModelOptions",Qn(16,ei)),he(4),Ut("ngModel",n.session.serial_options.line_feed),ye("ngModelOptions",Qn(17,ei))}}var zm=(()=>{class t{appService;session=void 0;dialog_id="";constructor(n){this.appService=n}saveAsDefault(){this.session!=null&&this.appService.saveDefaultSerialOptions(this.session.serial_options)}static \u0275fac=function(r){return new(r||t)(Q(yt))};static \u0275cmp=nt({type:t,selectors:[["serial-session-config"]],inputs:{session:"session",dialog_id:"dialog_id"},standalone:!0,features:[it],decls:16,vars:5,consts:[["tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","fs-5",3,"id"],[1,"text-primary"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["class","row align-items-center pb-1 px-3",4,"ngIf"],[1,"modal-footer","d-flex","justify-content-between"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"row","align-items-center","pb-1","px-3"],[1,"mb-1"],["for","serial-baud-rate",1,"col-form-label"],["id","serial-baud-rate",1,"form-select","form-select-sm",3,"ngModelChange","ngModel","ngModelOptions"],["value","110"],["value","300"],["value","1200"],["value","2400"],["value","4800"],["value","9600"],["value","14400"],["value","19200"],["value","38400"],["value","57600"],["value","115200"],["value","230400"],["value","460800"],["value","921600"],["for","serial-data-bits",1,"col-form-label"],["type","number","id","serial-data-bits",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngModelOptions"],["for","serial-stop-bits",1,"col-form-label"],["type","number","id","serial-stop-bits",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngModelOptions"],["for","serial-parity",1,"col-form-label"],["id","serial-parity",1,"form-select","form-select-sm",3,"ngModelChange","ngModel","ngModelOptions"],["value","none"],["value","odd"],["value","even"],["for","serial-buffer-size",1,"col-form-label"],["type","number","id","serial-buffer-size",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngModelOptions"],["for","serial-new-line-character",1,"col-form-label"],["id","serial-new-line-character",1,"form-select","form-select-sm",3,"ngModelChange","ngModel","ngModelOptions"],["value","NONE"],["value","CR"],["value","LF"],["value","CRLF"]],template:function(r,i){r&1&&(z(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),ae(5,"Serial Parameters for "),z(6,"span",5),ae(7),G()(),be(8,"button",6),G(),z(9,"div",7),Be(10,QD,68,18,"div",8),G(),z(11,"div",9)(12,"button",10),Ee("click",function(){return i.saveAsDefault()}),ae(13,"Save as Default"),G(),z(14,"button",11),ae(15,"Close"),G()()()()()),r&2&&(ye("id",i.dialog_id),Zn("aria-labelledby",i.dialog_id+"_label"),he(4),ye("id",i.dialog_id+"_label"),he(3),Ei(i.session.name),he(3),ye("ngIf",!i.session.opened))},dependencies:[At,En,Xr,Om,Lm,Fm,Qr,rd,ha,ua,Mm,ss,nd],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return t})();var XD=["terminal_container"];function JD(t,e){if(t&1){let n=Dn();z(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"button",6),ae(5),G(),z(6,"ul",7)(7,"li")(8,"a",8),be(9,"i",9),ae(10,"Config"),G()(),be(11,"div",10),z(12,"li")(13,"a",11),Ee("click",function(){Pe(n);let i=oe();return Fe(i.saveSessionData())}),be(14,"i",12),ae(15,"Save Data"),G()(),be(16,"div",10),z(17,"li")(18,"a",11),Ee("click",function(){Pe(n);let i=oe();return Fe(i.removeSession())}),be(19,"i",13),ae(20,"Remove"),G()()()()(),z(21,"div",14)(22,"button",15),Ee("click",function(){Pe(n);let i=oe();return Fe(i.selectPort())}),be(23,"i",16),G()(),z(24,"div",14)(25,"button",17),Ee("click",function(){Pe(n);let i=oe();return Fe(i.toggleConnection())}),be(26,"i"),G()(),z(27,"div",18)(28,"input",19),$t("ngModelChange",function(i){Pe(n);let s=oe();return tn(s.input_command,i)||(s.input_command=i),Fe(i)}),Ee("keydown.enter",function(){Pe(n);let i=oe();return Fe(i.sendCommand())}),G()(),z(29,"div",20)(30,"button",21),Ee("click",function(){Pe(n);let i=oe();return Fe(i.sendCommand())}),be(31,"i",22),G()()(),be(32,"hr",23),z(33,"div",24,0),Ee("resize",function(i){Pe(n);let s=oe();return Fe(s.onResize(i))},!1,Eo),G(),be(35,"serial-session-config",25),G()}if(t&2){let n=oe();he(5),Ro(" ",n.session.name," "),he(3),Zn("data-bs-target","#"+n.config_dialog_id),he(14),ye("disabled",n.session.opened),he(3),Kl("title",n.session.opened?"Close Port":"Open Port"),ye("disabled",n.session.serial_port==null),he(),bn("bi "+(n.session.opened?"bi-pause-fill":"bi-play-fill")),he(2),Ut("ngModel",n.input_command),ye("disabled",!n.session.opened),he(2),ye("disabled",!n.session.opened),he(5),ye("dialog_id",n.config_dialog_id)("session",n.session)}}var ma=(()=>{class t{changeDetectorRef;appService;terminalContainer;session=void 0;sessionSubscription=void 0;resizeSubscription=void 0;terminal=void 0;fitAddon=void 0;input_command="";line_feed="LF";resizeTimeout=void 0;config_dialog_id="";controlCodeMap=[{key:"@",ctrlKey:!0,mapCode:0},{key:"a",ctrlKey:!0,mapCode:1},{key:"b",ctrlKey:!0,mapCode:2},{key:"c",ctrlKey:!0,mapCode:3},{key:"d",ctrlKey:!0,mapCode:4},{key:"e",ctrlKey:!0,mapCode:5},{key:"f",ctrlKey:!0,mapCode:6},{key:"g",ctrlKey:!0,mapCode:7},{key:"h",ctrlKey:!0,mapCode:8},{key:"i",ctrlKey:!0,mapCode:9},{key:"j",ctrlKey:!0,mapCode:10},{key:"k",ctrlKey:!0,mapCode:11},{key:"l",ctrlKey:!0,mapCode:12},{key:"m",ctrlKey:!0,mapCode:13},{key:"n",ctrlKey:!0,mapCode:14},{key:"o",ctrlKey:!0,mapCode:15},{key:"p",ctrlKey:!0,mapCode:16},{key:"q",ctrlKey:!0,mapCode:17},{key:"r",ctrlKey:!0,mapCode:18},{key:"s",ctrlKey:!0,mapCode:19},{key:"t",ctrlKey:!0,mapCode:20},{key:"u",ctrlKey:!0,mapCode:21},{key:"v",ctrlKey:!0,mapCode:22},{key:"w",ctrlKey:!0,mapCode:23},{key:"x",ctrlKey:!0,mapCode:24},{key:"y",ctrlKey:!0,mapCode:25},{key:"z",ctrlKey:!0,mapCode:26},{key:"[",ctrlKey:!0,mapCode:27},{key:"\\",ctrlKey:!0,mapCode:28},{key:"]",ctrlKey:!0,mapCode:29},{key:"^",ctrlKey:!0,mapCode:30},{key:"_",ctrlKey:!0,mapCode:31},{key:"Backspace",ctrlKey:!1,mapCode:8},{key:"Tab",ctrlKey:!1,mapCode:9},{key:"Escape",ctrlKey:!1,mapCode:27}];constructor(n,r){this.changeDetectorRef=n,this.appService=r,$l(()=>{this.terminal!=null&&this.fitAddon!=null&&this.fitAddon.fit()}),this.resizeSubscription=this.appService.ResizeEvent.subscribe(()=>{this.terminal!=null&&this.fitAddon!=null&&(this.resizeTimeout!=null&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.fitAddon.fit()},200))})}ngAfterViewInit(){this.terminal==null&&this.terminalContainer!=null&&(this.terminal=new qm.Terminal({convertEol:!0,rows:10,cols:50}),this.fitAddon=new Gm.FitAddon,this.terminal.loadAddon(this.fitAddon),this.terminal.open(this.terminalContainer.nativeElement),this.fitAddon.fit(),this.terminal.attachCustomKeyEventHandler(n=>this.processKeyEvent(n))),this.session!=null&&(this.config_dialog_id=`${this.session.name}_config_dialog`,this.terminal!=null&&this.terminal.write(Uint8Array.from(this.session.readBuffer())),this.sessionSubscription=this.session.SessionDataEvent.subscribe(n=>{this.terminal.write(n)}))}ngOnChanges(n){n.session!=null&&this.terminal!=null&&(this.sessionSubscription!=null&&this.sessionSubscription.unsubscribe(),this.terminal.reset(),this.session!=null&&(this.config_dialog_id=`${this.session.name}_config_dialog`,this.terminal.write(Uint8Array.from(this.session.readBuffer())),this.sessionSubscription=this.session.SessionDataEvent.subscribe(r=>{this.terminal.write(r)})))}ngOnDestroy(){this.resizeSubscription!=null&&this.resizeSubscription.unsubscribe()}removeSession(){this.appService.removeSession(this.session)}saveSessionData(){if(this.session!=null){let n=new Date,r=`${n.getFullYear()}${n.getMonth()+1}${n.getDate()}${n.getHours()}${n.getMinutes()}${n.getSeconds()}`,i=`${this.session.name}_${r}.txt`,s=new Blob([Uint8Array.from(this.session.readBuffer())],{type:"text/html"});new FormData().append("file",s,i);let a=window.URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=i,l.click(),window.URL.revokeObjectURL(a),this.appService.showInfo(`Session data downloaded: ${i}`)}else this.appService.showError("No session data available!")}sendCommand(){if(this.input_command.length>0&&this.session!=null){let n=new TextEncoder;this.session.write(n.encode(this.input_command+this.session.getNewLineCharacter()))}}selectPort(){return zt(this,null,function*(){try{let n=yield navigator.serial.requestPort({});this.session.serial_port=n,this.session.serial_port!=null&&(yield this.session.open()),this.changeDetectorRef.markForCheck()}catch(n){this.appService.showError(n.message)}})}toggleConnection(){return zt(this,null,function*(){try{this.session.opened?yield this.session.close():yield this.session.open(),this.changeDetectorRef.markForCheck()}catch(n){this.appService.showError(n.message)}})}onResize(n){}processKeyEvent(n){if(this.session!=null&&n.type==="keydown"&&!n.repeat){let r=this.getControlCode(n),i=[];if(r!=null)i.push(r);else{let s=new TextEncoder;n.code=="Enter"?i.push(...s.encode(`
`).values()):n.code=="ArrowUp"?(i.push(27),i.push(...s.encode("[A"))):n.code=="ArrowDown"?(i.push(27),i.push(...s.encode("[B"))):n.code=="ArrowLeft"?(i.push(27),i.push(...s.encode("[D"))):n.code=="ArrowRight"?(i.push(27),i.push(...s.encode("[C"))):n.key.length==1&&i.push(...s.encode(n.key).values())}this.session.write(Uint8Array.from(i))}return!0}getControlCode(n){for(let r=0;r<this.controlCodeMap.length;r++)if(this.controlCodeMap[r].key==n.key&&this.controlCodeMap[r].ctrlKey==n.ctrlKey)return this.controlCodeMap[r].mapCode}static \u0275fac=function(r){return new(r||t)(Q(Ge),Q(yt))};static \u0275cmp=nt({type:t,selectors:[["serial-session"]],viewQuery:function(r,i){if(r&1&&Zp(XD,5),r&2){let s;Zl(s=Yl())&&(i.terminalContainer=s.first)}},inputs:{session:"session"},standalone:!0,features:[_n,it],decls:1,vars:1,consts:[["terminal_container",""],["class","d-flex flex-column p-1 mb-1 bd-highlight border border-primary h-100",4,"ngIf"],[1,"d-flex","flex-column","p-1","mb-1","bd-highlight","border","border-primary","h-100"],[1,"row","align-items-center","mb-1"],[1,"col-auto","pe-0"],[1,"btn-group","dropend"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-primary","btn-sm","dropdown-toggle"],[1,"dropdown-menu"],["data-bs-toggle","modal","disabled","",1,"dropdown-item","px-2","py-1",2,"cursor","pointer"],[1,"bi","bi-gear"],[1,"dropdown-divider"],["disabled","",1,"dropdown-item","px-2","py-1",2,"cursor","pointer",3,"click"],[1,"bi","bi-save2"],[1,"bi","bi-x-circle"],[1,"col-auto","ps-1","pe-0"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Select Port",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"bi","bi-search"],["data-bs-toggle","tooltip","data-bs-placement","top",1,"btn","btn-outline-primary","btn-sm",3,"click","title","disabled"],[1,"col","ps-1","pe-0"],["type","text","placeholder","","tooltip","input command","spellcheck","false",1,"form-control","form-control-sm",3,"ngModelChange","keydown.enter","ngModel","disabled"],[1,"col-auto","ps-1"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Send",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"bi","bi-send-fill"],[1,"mt-0","mb-1"],[1,"align-self-stretch","flex-grow-1",3,"resize"],[3,"dialog_id","session"]],template:function(r,i){r&1&&Be(0,JD,36,12,"div",1),r&2&&ye("ngIf",i.session!=null)},dependencies:[At,En,Xr,Qr,ua,ss,zm],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return t})();function eE(t,e){if(t&1){let n=Dn();z(0,"button",5),Ee("click",function(){let i=Pe(n).index,s=oe();return Fe(s.setActiveSession(i))}),ae(1),G()}if(t&2){let n=e.$implicit,r=e.index,i=oe();bn("nav-link"+(i.appService.active_session==r?" active":"")),he(),Ei(n.name)}}function tE(t,e){if(t&1&&(z(0,"div",6),be(1,"serial-session",7),G()),t&2){let n=oe();he(),ye("session",n.appService.sessions[n.appService.active_session])}}var Km=(()=>{class t{changeDetectorRef;appService;constructor(n,r){this.changeDetectorRef=n,this.appService=r,this.appService.SessionChangeEvent.subscribe(()=>{this.changeDetectorRef.markForCheck()})}setActiveSession(n){this.appService.active_session=n}static \u0275fac=function(r){return new(r||t)(Q(Ge),Q(yt))};static \u0275cmp=nt({type:t,selectors:[["app-tab-view"]],standalone:!0,features:[it],decls:5,vars:2,consts:[[1,"d-flex","flex-column","align-items-stretch","w-100","h-100"],[1,"align-items-center"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],[3,"class","click",4,"ngFor","ngForOf"],["class","tab-content flex-grow-1",4,"ngIf"],[3,"click"],[1,"tab-content","flex-grow-1"],[1,"col","h-100","px-1",3,"session"]],template:function(r,i){r&1&&(z(0,"div",0)(1,"nav",1)(2,"div",2),Be(3,eE,2,3,"button",3),G()(),Be(4,tE,2,1,"div",4),G()),r&2&&(he(3),ye("ngForOf",i.appService.sessions),he(),ye("ngIf",i.appService.sessions.length>0))},dependencies:[At,Fo,En,ma],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return t})();function nE(t,e){if(t&1&&be(0,"serial-session",1),t&2){let n=oe();ye("session",n.appService.sessions[0])}}function rE(t,e){if(t&1&&be(0,"serial-session",6),t&2){let n=oe().index,r=oe().index,i=oe(2);ye("session",i.appService.sessions[r*i.max_col_num+n])}}function iE(t,e){if(t&1&&(z(0,"td",5),Be(1,rE,1,1,"serial-session",6),G()),t&2){let n=e.index,r=oe().index,i=oe(2);ql("width: "+100/i.cols.length+"%;height: "+100/i.rows.length+"%;"),he(),Lr(r*i.max_col_num+n<i.appService.sessions.length?1:-1)}}function sE(t,e){if(t&1&&(z(0,"tr"),Be(1,iE,2,3,"td",4),G()),t&2){let n=oe(2);he(),ye("ngForOf",n.cols)}}function oE(t,e){if(t&1&&(z(0,"table",2)(1,"tbody"),Be(2,sE,2,1,"tr",3),G()()),t&2){let n=oe();he(2),ye("ngForOf",n.rows)}}function aE(t,e){if(t&1&&be(0,"serial-session",6),t&2){let n=oe().index,r=oe().index,i=oe(2);ye("session",i.appService.sessions[r*i.max_col_num+n])}}function cE(t,e){if(t&1&&(z(0,"td",5),Be(1,aE,1,1,"serial-session",6),G()),t&2){let n=e.index,r=oe().index,i=oe(2);ql("width: "+100/i.cols.length+"%;height: "+100/i.rows.length+"%;"),he(),Lr(r*i.max_col_num+n<i.appService.sessions.length?1:-1)}}function lE(t,e){if(t&1&&(z(0,"tr"),Be(1,cE,2,3,"td",4),G()),t&2){let n=oe(2);he(),ye("ngForOf",n.cols)}}function uE(t,e){if(t&1&&(z(0,"table",2)(1,"tbody"),Be(2,lE,2,1,"tr",3),G()()),t&2){let n=oe();he(2),ye("ngForOf",n.rows)}}var Zm=(()=>{class t{changeDetectorRef;appService;max_col_num=2;row_num=0;col_num=0;rows=new Array(0);cols=new Array(0);constructor(n,r){this.changeDetectorRef=n,this.appService=r,this.appService.SessionChangeEvent.subscribe(()=>{this.updateLayout(),this.changeDetectorRef.markForCheck()}),this.updateLayout()}updateLayout(){this.row_num=Math.round(this.appService.sessions.length/this.max_col_num),this.rows=new Array(this.row_num),this.cols=new Array(this.max_col_num)}static \u0275fac=function(r){return new(r||t)(Q(Ge),Q(yt))};static \u0275cmp=nt({type:t,selectors:[["app-grid-view"]],standalone:!0,features:[it],decls:4,vars:1,consts:[[1,"d-flex","flex-wrap","h-100"],[1,"col","px-1",3,"session"],[1,"table","table-borderless","mb-0",2,"height","100%","max-height","100%"],[4,"ngFor","ngForOf"],["class","p-1",3,"style",4,"ngFor","ngForOf"],[1,"p-1"],[2,"height","100%",3,"session"]],template:function(r,i){r&1&&(z(0,"div",0),Be(1,nE,1,1,"serial-session",1)(2,oE,3,1,"table",2)(3,uE,3,1,"table",2),G()),r&2&&(he(),Lr(i.appService.sessions.length==1?1:i.rows.length%2==0?2:3))},dependencies:[At,Fo,ma],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return t})();function dE(t,e){t&1&&be(0,"app-grid-view",1)}function hE(t,e){t&1&&be(0,"app-tab-view",1)}var Ym=(()=>{class t{changeDetectorRef;appService;title="vterm";constructor(n,r){this.changeDetectorRef=n,this.appService=r,window.onbeforeunload=function(i){i.preventDefault()},this.appService.SessionChangeEvent.subscribe(()=>{this.changeDetectorRef.detectChanges()})}onResize(n){this.appService.triggerResizeEvent()}static \u0275fac=function(r){return new(r||t)(Q(Ge),Q(yt))};static \u0275cmp=nt({type:t,selectors:[["app-root"]],standalone:!0,features:[it],decls:4,vars:3,consts:[["id","main",3,"resize"],[1,"col"]],template:function(r,i){r&1&&(be(0,"app-header"),z(1,"main",0),Ee("resize",function(o){return i.onResize(o)},!1,Eo),Be(2,dE,1,0,"app-grid-view",1)(3,hE,1,0,"app-tab-view",1),G()),r&2&&(he(),bn("main d-flex"+(i.appService.layout_mode=="grid"&&i.appService.sessions.length>4?" overflow-scroll":"")),he(),Lr(i.appService.layout_mode=="grid"?2:3))},dependencies:[Xr,Hm,Km,Zm]})}return t})();Eg(Ym,um).catch(t=>console.error(t));
