(function(it,je){typeof exports=="object"&&typeof module<"u"?je(exports):typeof define=="function"&&define.amd?define(["exports"],je):je((it=typeof globalThis<"u"?globalThis:it||self).Popper={})})(this,function(it){"use strict";function je(G){if(G==null)return window;if(G.toString()!=="[object Window]"){var K=G.ownerDocument;return K&&K.defaultView||window}return G}function dt(G){return G instanceof je(G).Element||G instanceof Element}function Be(G){return G instanceof je(G).HTMLElement||G instanceof HTMLElement}function he(G){return typeof ShadowRoot<"u"&&(G instanceof je(G).ShadowRoot||G instanceof ShadowRoot)}var p=Math.max,g=Math.min,x=Math.round;function E(){var G=navigator.userAgentData;return G!=null&&G.brands&&Array.isArray(G.brands)?G.brands.map(function(K){return K.brand+"/"+K.version}).join(" "):navigator.userAgent}function m(){return!/^((?!chrome|android).)*safari/i.test(E())}function k(G,K,re){K===void 0&&(K=!1),re===void 0&&(re=!1);var le=G.getBoundingClientRect(),Ee=1,_e=1;K&&Be(G)&&(Ee=G.offsetWidth>0&&x(le.width)/G.offsetWidth||1,_e=G.offsetHeight>0&&x(le.height)/G.offsetHeight||1);var ke=(dt(G)?je(G):window).visualViewport,pe=!m()&&re,we=(le.left+(pe&&ke?ke.offsetLeft:0))/Ee,Fe=(le.top+(pe&&ke?ke.offsetTop:0))/_e,Ie=le.width/Ee,Re=le.height/_e;return{width:Ie,height:Re,top:Fe,right:we+Ie,bottom:Fe+Re,left:we,x:we,y:Fe}}function D(G){var K=je(G);return{scrollLeft:K.pageXOffset,scrollTop:K.pageYOffset}}function T(G){return G?(G.nodeName||"").toLowerCase():null}function S(G){return((dt(G)?G.ownerDocument:G.document)||window.document).documentElement}function d(G){return k(S(G)).left+D(G).scrollLeft}function u(G){return je(G).getComputedStyle(G)}function l(G){var K=u(G),re=K.overflow,le=K.overflowX,Ee=K.overflowY;return/auto|scroll|overlay|hidden/.test(re+Ee+le)}function c(G,K,re){re===void 0&&(re=!1);var le,Ee,_e=Be(K),ke=Be(K)&&function(Re){var at=Re.getBoundingClientRect(),qe=x(at.width)/Re.offsetWidth||1,Ge=x(at.height)/Re.offsetHeight||1;return qe!==1||Ge!==1}(K),pe=S(K),we=k(G,ke,re),Fe={scrollLeft:0,scrollTop:0},Ie={x:0,y:0};return(_e||!_e&&!re)&&((T(K)!=="body"||l(pe))&&(Fe=(le=K)!==je(le)&&Be(le)?{scrollLeft:(Ee=le).scrollLeft,scrollTop:Ee.scrollTop}:D(le)),Be(K)?((Ie=k(K,!0)).x+=K.clientLeft,Ie.y+=K.clientTop):pe&&(Ie.x=d(pe))),{x:we.left+Fe.scrollLeft-Ie.x,y:we.top+Fe.scrollTop-Ie.y,width:we.width,height:we.height}}function b(G){var K=k(G),re=G.offsetWidth,le=G.offsetHeight;return Math.abs(K.width-re)<=1&&(re=K.width),Math.abs(K.height-le)<=1&&(le=K.height),{x:G.offsetLeft,y:G.offsetTop,width:re,height:le}}function M(G){return T(G)==="html"?G:G.assignedSlot||G.parentNode||(he(G)?G.host:null)||S(G)}function A(G){return["html","body","#document"].indexOf(T(G))>=0?G.ownerDocument.body:Be(G)&&l(G)?G:A(M(G))}function R(G,K){var re;K===void 0&&(K=[]);var le=A(G),Ee=le===((re=G.ownerDocument)==null?void 0:re.body),_e=je(le),ke=Ee?[_e].concat(_e.visualViewport||[],l(le)?le:[]):le,pe=K.concat(ke);return Ee?pe:pe.concat(R(M(ke)))}function w(G){return["table","td","th"].indexOf(T(G))>=0}function I(G){return Be(G)&&u(G).position!=="fixed"?G.offsetParent:null}function V(G){for(var K=je(G),re=I(G);re&&w(re)&&u(re).position==="static";)re=I(re);return re&&(T(re)==="html"||T(re)==="body"&&u(re).position==="static")?K:re||function(le){var Ee=/firefox/i.test(E());if(/Trident/i.test(E())&&Be(le)&&u(le).position==="fixed")return null;var _e=M(le);for(he(_e)&&(_e=_e.host);Be(_e)&&["html","body"].indexOf(T(_e))<0;){var ke=u(_e);if(ke.transform!=="none"||ke.perspective!=="none"||ke.contain==="paint"||["transform","perspective"].indexOf(ke.willChange)!==-1||Ee&&ke.willChange==="filter"||Ee&&ke.filter&&ke.filter!=="none")return _e;_e=_e.parentNode}return null}(G)||K}var j="top",ee="bottom",W="right",se="left",ce="auto",ve=[j,ee,W,se],Se="start",ge="end",B="viewport",z="popper",U=ve.reduce(function(G,K){return G.concat([K+"-"+Se,K+"-"+ge])},[]),J=[].concat(ve,[ce]).reduce(function(G,K){return G.concat([K,K+"-"+Se,K+"-"+ge])},[]),X=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function be(G){var K=new Map,re=new Set,le=[];function Ee(_e){re.add(_e.name),[].concat(_e.requires||[],_e.requiresIfExists||[]).forEach(function(ke){if(!re.has(ke)){var pe=K.get(ke);pe&&Ee(pe)}}),le.push(_e)}return G.forEach(function(_e){K.set(_e.name,_e)}),G.forEach(function(_e){re.has(_e.name)||Ee(_e)}),le}function Ne(G,K){var re=K.getRootNode&&K.getRootNode();if(G.contains(K))return!0;if(re&&he(re)){var le=K;do{if(le&&G.isSameNode(le))return!0;le=le.parentNode||le.host}while(le)}return!1}function We(G){return Object.assign({},G,{left:G.x,top:G.y,right:G.x+G.width,bottom:G.y+G.height})}function ie(G,K,re){return K===B?We(function(le,Ee){var _e=je(le),ke=S(le),pe=_e.visualViewport,we=ke.clientWidth,Fe=ke.clientHeight,Ie=0,Re=0;if(pe){we=pe.width,Fe=pe.height;var at=m();(at||!at&&Ee==="fixed")&&(Ie=pe.offsetLeft,Re=pe.offsetTop)}return{width:we,height:Fe,x:Ie+d(le),y:Re}}(G,re)):dt(K)?function(le,Ee){var _e=k(le,!1,Ee==="fixed");return _e.top=_e.top+le.clientTop,_e.left=_e.left+le.clientLeft,_e.bottom=_e.top+le.clientHeight,_e.right=_e.left+le.clientWidth,_e.width=le.clientWidth,_e.height=le.clientHeight,_e.x=_e.left,_e.y=_e.top,_e}(K,re):We(function(le){var Ee,_e=S(le),ke=D(le),pe=(Ee=le.ownerDocument)==null?void 0:Ee.body,we=p(_e.scrollWidth,_e.clientWidth,pe?pe.scrollWidth:0,pe?pe.clientWidth:0),Fe=p(_e.scrollHeight,_e.clientHeight,pe?pe.scrollHeight:0,pe?pe.clientHeight:0),Ie=-ke.scrollLeft+d(le),Re=-ke.scrollTop;return u(pe||_e).direction==="rtl"&&(Ie+=p(_e.clientWidth,pe?pe.clientWidth:0)-we),{width:we,height:Fe,x:Ie,y:Re}}(S(G)))}function N(G,K,re,le){var Ee=K==="clippingParents"?function(we){var Fe=R(M(we)),Ie=["absolute","fixed"].indexOf(u(we).position)>=0&&Be(we)?V(we):we;return dt(Ie)?Fe.filter(function(Re){return dt(Re)&&Ne(Re,Ie)&&T(Re)!=="body"}):[]}(G):[].concat(K),_e=[].concat(Ee,[re]),ke=_e[0],pe=_e.reduce(function(we,Fe){var Ie=ie(G,Fe,le);return we.top=p(Ie.top,we.top),we.right=g(Ie.right,we.right),we.bottom=g(Ie.bottom,we.bottom),we.left=p(Ie.left,we.left),we},ie(G,ke,le));return pe.width=pe.right-pe.left,pe.height=pe.bottom-pe.top,pe.x=pe.left,pe.y=pe.top,pe}function ne(G){return G.split("-")[0]}function ue(G){return G.split("-")[1]}function oe(G){return["top","bottom"].indexOf(G)>=0?"x":"y"}function ye(G){var K,re=G.reference,le=G.element,Ee=G.placement,_e=Ee?ne(Ee):null,ke=Ee?ue(Ee):null,pe=re.x+re.width/2-le.width/2,we=re.y+re.height/2-le.height/2;switch(_e){case j:K={x:pe,y:re.y-le.height};break;case ee:K={x:pe,y:re.y+re.height};break;case W:K={x:re.x+re.width,y:we};break;case se:K={x:re.x-le.width,y:we};break;default:K={x:re.x,y:re.y}}var Fe=_e?oe(_e):null;if(Fe!=null){var Ie=Fe==="y"?"height":"width";switch(ke){case Se:K[Fe]=K[Fe]-(re[Ie]/2-le[Ie]/2);break;case ge:K[Fe]=K[Fe]+(re[Ie]/2-le[Ie]/2)}}return K}function Ke(G){return Object.assign({},{top:0,right:0,bottom:0,left:0},G)}function ct(G,K){return K.reduce(function(re,le){return re[le]=G,re},{})}function ht(G,K){K===void 0&&(K={});var re=K,le=re.placement,Ee=le===void 0?G.placement:le,_e=re.strategy,ke=_e===void 0?G.strategy:_e,pe=re.boundary,we=pe===void 0?"clippingParents":pe,Fe=re.rootBoundary,Ie=Fe===void 0?B:Fe,Re=re.elementContext,at=Re===void 0?z:Re,qe=re.altBoundary,Ge=qe!==void 0&&qe,Je=re.padding,$e=Je===void 0?0:Je,ft=Ke(typeof $e!="number"?$e:ct($e,ve)),pt=at===z?"reference":z,st=G.rects.popper,rt=G.elements[Ge?pt:at],Ye=N(dt(rt)?rt:rt.contextElement||S(G.elements.popper),we,Ie,ke),Ue=k(G.elements.reference),nt=ye({reference:Ue,element:st,strategy:"absolute",placement:Ee}),Xe=We(Object.assign({},st,nt)),tt=at===z?Xe:Ue,yt={top:Ye.top-tt.top+ft.top,bottom:tt.bottom-Ye.bottom+ft.bottom,left:Ye.left-tt.left+ft.left,right:tt.right-Ye.right+ft.right},Dt=G.modifiersData.offset;if(at===z&&Dt){var qt=Dt[Ee];Object.keys(yt).forEach(function(Ht){var $t=[W,ee].indexOf(Ht)>=0?1:-1,jt=[j,ee].indexOf(Ht)>=0?"y":"x";yt[Ht]+=qt[jt]*$t})}return yt}var Qe={placement:"bottom",modifiers:[],strategy:"absolute"};function ze(){for(var G=arguments.length,K=new Array(G),re=0;re<G;re++)K[re]=arguments[re];return!K.some(function(le){return!(le&&typeof le.getBoundingClientRect=="function")})}function ot(G){G===void 0&&(G={});var K=G,re=K.defaultModifiers,le=re===void 0?[]:re,Ee=K.defaultOptions,_e=Ee===void 0?Qe:Ee;return function(ke,pe,we){we===void 0&&(we=_e);var Fe,Ie,Re={placement:"bottom",orderedModifiers:[],options:Object.assign({},Qe,_e),modifiersData:{},elements:{reference:ke,popper:pe},attributes:{},styles:{}},at=[],qe=!1,Ge={state:Re,setOptions:function($e){var ft=typeof $e=="function"?$e(Re.options):$e;Je(),Re.options=Object.assign({},_e,Re.options,ft),Re.scrollParents={reference:dt(ke)?R(ke):ke.contextElement?R(ke.contextElement):[],popper:R(pe)};var pt,st,rt=function(Ye){var Ue=be(Ye);return X.reduce(function(nt,Xe){return nt.concat(Ue.filter(function(tt){return tt.phase===Xe}))},[])}((pt=[].concat(le,Re.options.modifiers),st=pt.reduce(function(Ye,Ue){var nt=Ye[Ue.name];return Ye[Ue.name]=nt?Object.assign({},nt,Ue,{options:Object.assign({},nt.options,Ue.options),data:Object.assign({},nt.data,Ue.data)}):Ue,Ye},{}),Object.keys(st).map(function(Ye){return st[Ye]})));return Re.orderedModifiers=rt.filter(function(Ye){return Ye.enabled}),Re.orderedModifiers.forEach(function(Ye){var Ue=Ye.name,nt=Ye.options,Xe=nt===void 0?{}:nt,tt=Ye.effect;if(typeof tt=="function"){var yt=tt({state:Re,name:Ue,instance:Ge,options:Xe}),Dt=function(){};at.push(yt||Dt)}}),Ge.update()},forceUpdate:function(){if(!qe){var $e=Re.elements,ft=$e.reference,pt=$e.popper;if(ze(ft,pt)){Re.rects={reference:c(ft,V(pt),Re.options.strategy==="fixed"),popper:b(pt)},Re.reset=!1,Re.placement=Re.options.placement,Re.orderedModifiers.forEach(function(tt){return Re.modifiersData[tt.name]=Object.assign({},tt.data)});for(var st=0;st<Re.orderedModifiers.length;st++)if(Re.reset!==!0){var rt=Re.orderedModifiers[st],Ye=rt.fn,Ue=rt.options,nt=Ue===void 0?{}:Ue,Xe=rt.name;typeof Ye=="function"&&(Re=Ye({state:Re,options:nt,name:Xe,instance:Ge})||Re)}else Re.reset=!1,st=-1}}},update:(Fe=function(){return new Promise(function($e){Ge.forceUpdate(),$e(Re)})},function(){return Ie||(Ie=new Promise(function($e){Promise.resolve().then(function(){Ie=void 0,$e(Fe())})})),Ie}),destroy:function(){Je(),qe=!0}};if(!ze(ke,pe))return Ge;function Je(){at.forEach(function($e){return $e()}),at=[]}return Ge.setOptions(we).then(function($e){!qe&&we.onFirstUpdate&&we.onFirstUpdate($e)}),Ge}}var Ft={passive:!0},Ot={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(G){var K=G.state,re=G.instance,le=G.options,Ee=le.scroll,_e=Ee===void 0||Ee,ke=le.resize,pe=ke===void 0||ke,we=je(K.elements.popper),Fe=[].concat(K.scrollParents.reference,K.scrollParents.popper);return _e&&Fe.forEach(function(Ie){Ie.addEventListener("scroll",re.update,Ft)}),pe&&we.addEventListener("resize",re.update,Ft),function(){_e&&Fe.forEach(function(Ie){Ie.removeEventListener("scroll",re.update,Ft)}),pe&&we.removeEventListener("resize",re.update,Ft)}},data:{}},Yt={name:"popperOffsets",enabled:!0,phase:"read",fn:function(G){var K=G.state,re=G.name;K.modifiersData[re]=ye({reference:K.rects.reference,element:K.rects.popper,strategy:"absolute",placement:K.placement})},data:{}},Bt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Rt(G){var K,re=G.popper,le=G.popperRect,Ee=G.placement,_e=G.variation,ke=G.offsets,pe=G.position,we=G.gpuAcceleration,Fe=G.adaptive,Ie=G.roundOffsets,Re=G.isFixed,at=ke.x,qe=at===void 0?0:at,Ge=ke.y,Je=Ge===void 0?0:Ge,$e=typeof Ie=="function"?Ie({x:qe,y:Je}):{x:qe,y:Je};qe=$e.x,Je=$e.y;var ft=ke.hasOwnProperty("x"),pt=ke.hasOwnProperty("y"),st=se,rt=j,Ye=window;if(Fe){var Ue=V(re),nt="clientHeight",Xe="clientWidth";Ue===je(re)&&u(Ue=S(re)).position!=="static"&&pe==="absolute"&&(nt="scrollHeight",Xe="scrollWidth"),Ue=Ue,(Ee===j||(Ee===se||Ee===W)&&_e===ge)&&(rt=ee,Je-=(Re&&Ue===Ye&&Ye.visualViewport?Ye.visualViewport.height:Ue[nt])-le.height,Je*=we?1:-1),(Ee===se||(Ee===j||Ee===ee)&&_e===ge)&&(st=W,qe-=(Re&&Ue===Ye&&Ye.visualViewport?Ye.visualViewport.width:Ue[Xe])-le.width,qe*=we?1:-1)}var tt,yt=Object.assign({position:pe},Fe&&Bt),Dt=Ie===!0?function(qt,Ht){var $t=qt.x,jt=qt.y,mt=Ht.devicePixelRatio||1;return{x:x($t*mt)/mt||0,y:x(jt*mt)/mt||0}}({x:qe,y:Je},je(re)):{x:qe,y:Je};return qe=Dt.x,Je=Dt.y,we?Object.assign({},yt,((tt={})[rt]=pt?"0":"",tt[st]=ft?"0":"",tt.transform=(Ye.devicePixelRatio||1)<=1?"translate("+qe+"px, "+Je+"px)":"translate3d("+qe+"px, "+Je+"px, 0)",tt)):Object.assign({},yt,((K={})[rt]=pt?Je+"px":"",K[st]=ft?qe+"px":"",K.transform="",K))}var Xt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(G){var K=G.state,re=G.options,le=re.gpuAcceleration,Ee=le===void 0||le,_e=re.adaptive,ke=_e===void 0||_e,pe=re.roundOffsets,we=pe===void 0||pe,Fe={placement:ne(K.placement),variation:ue(K.placement),popper:K.elements.popper,popperRect:K.rects.popper,gpuAcceleration:Ee,isFixed:K.options.strategy==="fixed"};K.modifiersData.popperOffsets!=null&&(K.styles.popper=Object.assign({},K.styles.popper,Rt(Object.assign({},Fe,{offsets:K.modifiersData.popperOffsets,position:K.options.strategy,adaptive:ke,roundOffsets:we})))),K.modifiersData.arrow!=null&&(K.styles.arrow=Object.assign({},K.styles.arrow,Rt(Object.assign({},Fe,{offsets:K.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:we})))),K.attributes.popper=Object.assign({},K.attributes.popper,{"data-popper-placement":K.placement})},data:{}},It={name:"applyStyles",enabled:!0,phase:"write",fn:function(G){var K=G.state;Object.keys(K.elements).forEach(function(re){var le=K.styles[re]||{},Ee=K.attributes[re]||{},_e=K.elements[re];Be(_e)&&T(_e)&&(Object.assign(_e.style,le),Object.keys(Ee).forEach(function(ke){var pe=Ee[ke];pe===!1?_e.removeAttribute(ke):_e.setAttribute(ke,pe===!0?"":pe)}))})},effect:function(G){var K=G.state,re={popper:{position:K.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(K.elements.popper.style,re.popper),K.styles=re,K.elements.arrow&&Object.assign(K.elements.arrow.style,re.arrow),function(){Object.keys(K.elements).forEach(function(le){var Ee=K.elements[le],_e=K.attributes[le]||{},ke=Object.keys(K.styles.hasOwnProperty(le)?K.styles[le]:re[le]).reduce(function(pe,we){return pe[we]="",pe},{});Be(Ee)&&T(Ee)&&(Object.assign(Ee.style,ke),Object.keys(_e).forEach(function(pe){Ee.removeAttribute(pe)}))})}},requires:["computeStyles"]},ni={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(G){var K=G.state,re=G.options,le=G.name,Ee=re.offset,_e=Ee===void 0?[0,0]:Ee,ke=J.reduce(function(Ie,Re){return Ie[Re]=function(at,qe,Ge){var Je=ne(at),$e=[se,j].indexOf(Je)>=0?-1:1,ft=typeof Ge=="function"?Ge(Object.assign({},qe,{placement:at})):Ge,pt=ft[0],st=ft[1];return pt=pt||0,st=(st||0)*$e,[se,W].indexOf(Je)>=0?{x:st,y:pt}:{x:pt,y:st}}(Re,K.rects,_e),Ie},{}),pe=ke[K.placement],we=pe.x,Fe=pe.y;K.modifiersData.popperOffsets!=null&&(K.modifiersData.popperOffsets.x+=we,K.modifiersData.popperOffsets.y+=Fe),K.modifiersData[le]=ke}},Gt={left:"right",right:"left",bottom:"top",top:"bottom"};function bt(G){return G.replace(/left|right|bottom|top/g,function(K){return Gt[K]})}var oi={start:"end",end:"start"};function kt(G){return G.replace(/start|end/g,function(K){return oi[K]})}function Wt(G,K){K===void 0&&(K={});var re=K,le=re.placement,Ee=re.boundary,_e=re.rootBoundary,ke=re.padding,pe=re.flipVariations,we=re.allowedAutoPlacements,Fe=we===void 0?J:we,Ie=ue(le),Re=Ie?pe?U:U.filter(function(Ge){return ue(Ge)===Ie}):ve,at=Re.filter(function(Ge){return Fe.indexOf(Ge)>=0});at.length===0&&(at=Re);var qe=at.reduce(function(Ge,Je){return Ge[Je]=ht(G,{placement:Je,boundary:Ee,rootBoundary:_e,padding:ke})[ne(Je)],Ge},{});return Object.keys(qe).sort(function(Ge,Je){return qe[Ge]-qe[Je]})}var et={name:"flip",enabled:!0,phase:"main",fn:function(G){var K=G.state,re=G.options,le=G.name;if(!K.modifiersData[le]._skip){for(var Ee=re.mainAxis,_e=Ee===void 0||Ee,ke=re.altAxis,pe=ke===void 0||ke,we=re.fallbackPlacements,Fe=re.padding,Ie=re.boundary,Re=re.rootBoundary,at=re.altBoundary,qe=re.flipVariations,Ge=qe===void 0||qe,Je=re.allowedAutoPlacements,$e=K.options.placement,ft=ne($e),pt=we||(ft===$e||!Ge?[bt($e)]:function(Ut){if(ne(Ut)===ce)return[];var Et=bt(Ut);return[kt(Ut),Et,kt(Et)]}($e)),st=[$e].concat(pt).reduce(function(Ut,Et){return Ut.concat(ne(Et)===ce?Wt(K,{placement:Et,boundary:Ie,rootBoundary:Re,padding:Fe,flipVariations:Ge,allowedAutoPlacements:Je}):Et)},[]),rt=K.rects.reference,Ye=K.rects.popper,Ue=new Map,nt=!0,Xe=st[0],tt=0;tt<st.length;tt++){var yt=st[tt],Dt=ne(yt),qt=ue(yt)===Se,Ht=[j,ee].indexOf(Dt)>=0,$t=Ht?"width":"height",jt=ht(K,{placement:yt,boundary:Ie,rootBoundary:Re,altBoundary:at,padding:Fe}),mt=Ht?qt?W:se:qt?ee:j;rt[$t]>Ye[$t]&&(mt=bt(mt));var hi=bt(mt),vi=[];if(_e&&vi.push(jt[Dt]<=0),pe&&vi.push(jt[mt]<=0,jt[hi]<=0),vi.every(function(Ut){return Ut})){Xe=yt,nt=!1;break}Ue.set(yt,vi)}if(nt)for(var Jt=function(Ut){var Et=st.find(function(Zt){var Li=Ue.get(Zt);if(Li)return Li.slice(0,Ut).every(function(fi){return fi})});if(Et)return Xe=Et,"break"},Mt=Ge?3:1;Mt>0&&Jt(Mt)!=="break";Mt--);K.placement!==Xe&&(K.modifiersData[le]._skip=!0,K.placement=Xe,K.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ut(G,K,re){return p(G,g(K,re))}var vs={name:"preventOverflow",enabled:!0,phase:"main",fn:function(G){var K=G.state,re=G.options,le=G.name,Ee=re.mainAxis,_e=Ee===void 0||Ee,ke=re.altAxis,pe=ke!==void 0&&ke,we=re.boundary,Fe=re.rootBoundary,Ie=re.altBoundary,Re=re.padding,at=re.tether,qe=at===void 0||at,Ge=re.tetherOffset,Je=Ge===void 0?0:Ge,$e=ht(K,{boundary:we,rootBoundary:Fe,padding:Re,altBoundary:Ie}),ft=ne(K.placement),pt=ue(K.placement),st=!pt,rt=oe(ft),Ye=rt==="x"?"y":"x",Ue=K.modifiersData.popperOffsets,nt=K.rects.reference,Xe=K.rects.popper,tt=typeof Je=="function"?Je(Object.assign({},K.rects,{placement:K.placement})):Je,yt=typeof tt=="number"?{mainAxis:tt,altAxis:tt}:Object.assign({mainAxis:0,altAxis:0},tt),Dt=K.modifiersData.offset?K.modifiersData.offset[K.placement]:null,qt={x:0,y:0};if(Ue){if(_e){var Ht,$t=rt==="y"?j:se,jt=rt==="y"?ee:W,mt=rt==="y"?"height":"width",hi=Ue[rt],vi=hi+$e[$t],Jt=hi-$e[jt],Mt=qe?-Xe[mt]/2:0,Ut=pt===Se?nt[mt]:Xe[mt],Et=pt===Se?-Xe[mt]:-nt[mt],Zt=K.elements.arrow,Li=qe&&Zt?b(Zt):{width:0,height:0},fi=K.modifiersData["arrow#persistent"]?K.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ts=fi[$t],Ts=fi[jt],gt=ut(0,nt[mt],Li[mt]),is=st?nt[mt]/2-Mt-gt-ts-yt.mainAxis:Ut-gt-ts-yt.mainAxis,ss=st?-nt[mt]/2+Mt+gt+Ts+yt.mainAxis:Et+gt+Ts+yt.mainAxis,Pt=K.elements.arrow&&V(K.elements.arrow),Ui=Pt?rt==="y"?Pt.clientTop||0:Pt.clientLeft||0:0,rs=(Ht=Dt?.[rt])!=null?Ht:0,Os=hi+ss-rs,_i=ut(qe?g(vi,hi+is-rs-Ui):vi,hi,qe?p(Jt,Os):Jt);Ue[rt]=_i,qt[rt]=_i-hi}if(pe){var Rs,li=rt==="x"?j:se,bi=rt==="x"?ee:W,pi=Ue[Ye],Ti=Ye==="y"?"height":"width",ns=pi+$e[li],os=pi-$e[bi],as=[j,se].indexOf(ft)!==-1,yi=(Rs=Dt?.[Ye])!=null?Rs:0,hs=as?ns:pi-nt[Ti]-Xe[Ti]-yi+yt.altAxis,Qt=as?pi+nt[Ti]+Xe[Ti]-yi-yt.altAxis:os,Si=qe&&as?function(Vi,qi,vt){var Oi=ut(Vi,qi,vt);return Oi>vt?vt:Oi}(hs,pi,Qt):ut(qe?hs:ns,pi,qe?Qt:os);Ue[Ye]=Si,qt[Ye]=Si-pi}K.modifiersData[le]=qt}},requiresIfExists:["offset"]},Ai={name:"arrow",enabled:!0,phase:"main",fn:function(G){var K,re=G.state,le=G.name,Ee=G.options,_e=re.elements.arrow,ke=re.modifiersData.popperOffsets,pe=ne(re.placement),we=oe(pe),Fe=[se,W].indexOf(pe)>=0?"height":"width";if(_e&&ke){var Ie=function(Xe,tt){return Ke(typeof(Xe=typeof Xe=="function"?Xe(Object.assign({},tt.rects,{placement:tt.placement})):Xe)!="number"?Xe:ct(Xe,ve))}(Ee.padding,re),Re=b(_e),at=we==="y"?j:se,qe=we==="y"?ee:W,Ge=re.rects.reference[Fe]+re.rects.reference[we]-ke[we]-re.rects.popper[Fe],Je=ke[we]-re.rects.reference[we],$e=V(_e),ft=$e?we==="y"?$e.clientHeight||0:$e.clientWidth||0:0,pt=Ge/2-Je/2,st=Ie[at],rt=ft-Re[Fe]-Ie[qe],Ye=ft/2-Re[Fe]/2+pt,Ue=ut(st,Ye,rt),nt=we;re.modifiersData[le]=((K={})[nt]=Ue,K.centerOffset=Ue-Ye,K)}},effect:function(G){var K=G.state,re=G.options.element,le=re===void 0?"[data-popper-arrow]":re;le!=null&&(typeof le!="string"||(le=K.elements.popper.querySelector(le)))&&Ne(K.elements.popper,le)&&(K.elements.arrow=le)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function es(G,K,re){return re===void 0&&(re={x:0,y:0}),{top:G.top-K.height-re.y,right:G.right-K.width+re.x,bottom:G.bottom-K.height+re.y,left:G.left-K.width-re.x}}function Ls(G){return[j,W,ee,se].some(function(K){return G[K]>=0})}var Vt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(G){var K=G.state,re=G.name,le=K.rects.reference,Ee=K.rects.popper,_e=K.modifiersData.preventOverflow,ke=ht(K,{elementContext:"reference"}),pe=ht(K,{altBoundary:!0}),we=es(ke,le),Fe=es(pe,Ee,_e),Ie=Ls(we),Re=Ls(Fe);K.modifiersData[re]={referenceClippingOffsets:we,popperEscapeOffsets:Fe,isReferenceHidden:Ie,hasPopperEscaped:Re},K.attributes.popper=Object.assign({},K.attributes.popper,{"data-popper-reference-hidden":Ie,"data-popper-escaped":Re})}},$i=ot({defaultModifiers:[Ot,Yt,Xt,It]}),ai=[Ot,Yt,Xt,It,ni,et,vs,Ai,Vt],ji=ot({defaultModifiers:ai});it.applyStyles=It,it.arrow=Ai,it.computeStyles=Xt,it.createPopper=ji,it.createPopperLite=$i,it.defaultModifiers=ai,it.detectOverflow=ht,it.eventListeners=Ot,it.flip=et,it.hide=Vt,it.offset=ni,it.popperGenerator=ot,it.popperOffsets=Yt,it.preventOverflow=vs,Object.defineProperty(it,"__esModule",{value:!0})});/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(it,je){typeof exports=="object"&&typeof module<"u"?module.exports=je(require("@popperjs/core")):typeof define=="function"&&define.amd?define(["@popperjs/core"],je):(it=typeof globalThis<"u"?globalThis:it||self).bootstrap=je(it.Popper)})(this,function(it){"use strict";function je(Y){const f=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(Y){for(const O in Y)if(O!=="default"){const q=Object.getOwnPropertyDescriptor(Y,O);Object.defineProperty(f,O,q.get?q:{enumerable:!0,get:()=>Y[O]})}}return f.default=Y,Object.freeze(f)}const dt=je(it),Be=new Map,he={set(Y,f,O){Be.has(Y)||Be.set(Y,new Map);const q=Be.get(Y);q.has(f)||q.size===0?q.set(f,O):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(q.keys())[0]}.`)},get:(Y,f)=>Be.has(Y)&&Be.get(Y).get(f)||null,remove(Y,f){if(!Be.has(Y))return;const O=Be.get(Y);O.delete(f),O.size===0&&Be.delete(Y)}},p="transitionend",g=Y=>(Y&&window.CSS&&window.CSS.escape&&(Y=Y.replace(/#([^\s"#']+)/g,(f,O)=>`#${CSS.escape(O)}`)),Y),x=Y=>{Y.dispatchEvent(new Event(p))},E=Y=>!(!Y||typeof Y!="object")&&(Y.jquery!==void 0&&(Y=Y[0]),Y.nodeType!==void 0),m=Y=>E(Y)?Y.jquery?Y[0]:Y:typeof Y=="string"&&Y.length>0?document.querySelector(g(Y)):null,k=Y=>{if(!E(Y)||Y.getClientRects().length===0)return!1;const f=getComputedStyle(Y).getPropertyValue("visibility")==="visible",O=Y.closest("details:not([open])");if(!O)return f;if(O!==Y){const q=Y.closest("summary");if(q&&q.parentNode!==O||q===null)return!1}return f},D=Y=>!Y||Y.nodeType!==Node.ELEMENT_NODE||!!Y.classList.contains("disabled")||(Y.disabled!==void 0?Y.disabled:Y.hasAttribute("disabled")&&Y.getAttribute("disabled")!=="false"),T=Y=>{if(!document.documentElement.attachShadow)return null;if(typeof Y.getRootNode=="function"){const f=Y.getRootNode();return f instanceof ShadowRoot?f:null}return Y instanceof ShadowRoot?Y:Y.parentNode?T(Y.parentNode):null},S=()=>{},d=Y=>{Y.offsetHeight},u=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,l=[],c=()=>document.documentElement.dir==="rtl",b=Y=>{var f;f=()=>{const O=u();if(O){const q=Y.NAME,de=O.fn[q];O.fn[q]=Y.jQueryInterface,O.fn[q].Constructor=Y,O.fn[q].noConflict=()=>(O.fn[q]=de,Y.jQueryInterface)}},document.readyState==="loading"?(l.length||document.addEventListener("DOMContentLoaded",()=>{for(const O of l)O()}),l.push(f)):f()},M=(Y,f=[],O=Y)=>typeof Y=="function"?Y(...f):O,A=(Y,f,O=!0)=>{if(!O)return void M(Y);const q=(Oe=>{if(!Oe)return 0;let{transitionDuration:Ze,transitionDelay:St}=window.getComputedStyle(Oe);const xt=Number.parseFloat(Ze),Ct=Number.parseFloat(St);return xt||Ct?(Ze=Ze.split(",")[0],St=St.split(",")[0],1e3*(Number.parseFloat(Ze)+Number.parseFloat(St))):0})(f)+5;let de=!1;const xe=({target:Oe})=>{Oe===f&&(de=!0,f.removeEventListener(p,xe),M(Y))};f.addEventListener(p,xe),setTimeout(()=>{de||x(f)},q)},R=(Y,f,O,q)=>{const de=Y.length;let xe=Y.indexOf(f);return xe===-1?!O&&q?Y[de-1]:Y[0]:(xe+=O?1:-1,q&&(xe=(xe+de)%de),Y[Math.max(0,Math.min(xe,de-1))])},w=/[^.]*(?=\..*)\.|.*/,I=/\..*/,V=/::\d+$/,j={};let ee=1;const W={mouseenter:"mouseover",mouseleave:"mouseout"},se=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ce(Y,f){return f&&`${f}::${ee++}`||Y.uidEvent||ee++}function ve(Y){const f=ce(Y);return Y.uidEvent=f,j[f]=j[f]||{},j[f]}function Se(Y,f,O=null){return Object.values(Y).find(q=>q.callable===f&&q.delegationSelector===O)}function ge(Y,f,O){const q=typeof f=="string",de=q?O:f||O;let xe=J(Y);return se.has(xe)||(xe=Y),[q,de,xe]}function B(Y,f,O,q,de){if(typeof f!="string"||!Y)return;let[xe,Oe,Ze]=ge(f,O,q);f in W&&(Oe=(Fi=>function(ii){if(!ii.relatedTarget||ii.relatedTarget!==ii.delegateTarget&&!ii.delegateTarget.contains(ii.relatedTarget))return Fi.call(this,ii)})(Oe));const St=ve(Y),xt=St[Ze]||(St[Ze]={}),Ct=Se(xt,Oe,xe?O:null);if(Ct)return void(Ct.oneOff=Ct.oneOff&&de);const ci=ce(Oe,f.replace(w,"")),ti=xe?function(gi,Fi,ii){return function Ds(Ni){const zr=gi.querySelectorAll(Fi);for(let{target:Zi}=Ni;Zi&&Zi!==this;Zi=Zi.parentNode)for(const Wi of zr)if(Wi===Zi)return be(Ni,{delegateTarget:Zi}),Ds.oneOff&&X.off(gi,Ni.type,Fi,ii),ii.apply(Zi,[Ni])}}(Y,O,Oe):function(gi,Fi){return function ii(Ds){return be(Ds,{delegateTarget:gi}),ii.oneOff&&X.off(gi,Ds.type,Fi),Fi.apply(gi,[Ds])}}(Y,Oe);ti.delegationSelector=xe?O:null,ti.callable=Oe,ti.oneOff=de,ti.uidEvent=ci,xt[ci]=ti,Y.addEventListener(Ze,ti,xe)}function z(Y,f,O,q,de){const xe=Se(f[O],q,de);xe&&(Y.removeEventListener(O,xe,!!de),delete f[O][xe.uidEvent])}function U(Y,f,O,q){const de=f[O]||{};for(const[xe,Oe]of Object.entries(de))xe.includes(q)&&z(Y,f,O,Oe.callable,Oe.delegationSelector)}function J(Y){return Y=Y.replace(I,""),W[Y]||Y}const X={on(Y,f,O,q){B(Y,f,O,q,!1)},one(Y,f,O,q){B(Y,f,O,q,!0)},off(Y,f,O,q){if(typeof f!="string"||!Y)return;const[de,xe,Oe]=ge(f,O,q),Ze=Oe!==f,St=ve(Y),xt=St[Oe]||{},Ct=f.startsWith(".");if(xe===void 0){if(Ct)for(const ci of Object.keys(St))U(Y,St,ci,f.slice(1));for(const[ci,ti]of Object.entries(xt)){const gi=ci.replace(V,"");Ze&&!f.includes(gi)||z(Y,St,Oe,ti.callable,ti.delegationSelector)}}else{if(!Object.keys(xt).length)return;z(Y,St,Oe,xe,de?O:null)}},trigger(Y,f,O){if(typeof f!="string"||!Y)return null;const q=u();let de=null,xe=!0,Oe=!0,Ze=!1;f!==J(f)&&q&&(de=q.Event(f,O),q(Y).trigger(de),xe=!de.isPropagationStopped(),Oe=!de.isImmediatePropagationStopped(),Ze=de.isDefaultPrevented());const St=be(new Event(f,{bubbles:xe,cancelable:!0}),O);return Ze&&St.preventDefault(),Oe&&Y.dispatchEvent(St),St.defaultPrevented&&de&&de.preventDefault(),St}};function be(Y,f={}){for(const[O,q]of Object.entries(f))try{Y[O]=q}catch{Object.defineProperty(Y,O,{configurable:!0,get:()=>q})}return Y}function Ne(Y){if(Y==="true")return!0;if(Y==="false")return!1;if(Y===Number(Y).toString())return Number(Y);if(Y===""||Y==="null")return null;if(typeof Y!="string")return Y;try{return JSON.parse(decodeURIComponent(Y))}catch{return Y}}function We(Y){return Y.replace(/[A-Z]/g,f=>`-${f.toLowerCase()}`)}const ie={setDataAttribute(Y,f,O){Y.setAttribute(`data-bs-${We(f)}`,O)},removeDataAttribute(Y,f){Y.removeAttribute(`data-bs-${We(f)}`)},getDataAttributes(Y){if(!Y)return{};const f={},O=Object.keys(Y.dataset).filter(q=>q.startsWith("bs")&&!q.startsWith("bsConfig"));for(const q of O){let de=q.replace(/^bs/,"");de=de.charAt(0).toLowerCase()+de.slice(1,de.length),f[de]=Ne(Y.dataset[q])}return f},getDataAttribute:(Y,f)=>Ne(Y.getAttribute(`data-bs-${We(f)}`))};class N{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(f){return f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f}_mergeConfigObj(f,O){const q=E(O)?ie.getDataAttribute(O,"config"):{};return{...this.constructor.Default,...typeof q=="object"?q:{},...E(O)?ie.getDataAttributes(O):{},...typeof f=="object"?f:{}}}_typeCheckConfig(f,O=this.constructor.DefaultType){for(const[de,xe]of Object.entries(O)){const Oe=f[de],Ze=E(Oe)?"element":(q=Oe)==null?`${q}`:Object.prototype.toString.call(q).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(xe).test(Ze))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${de}" provided type "${Ze}" but expected type "${xe}".`)}var q}}class ne extends N{constructor(f,O){super(),(f=m(f))&&(this._element=f,this._config=this._getConfig(O),he.set(this._element,this.constructor.DATA_KEY,this))}dispose(){he.remove(this._element,this.constructor.DATA_KEY),X.off(this._element,this.constructor.EVENT_KEY);for(const f of Object.getOwnPropertyNames(this))this[f]=null}_queueCallback(f,O,q=!0){A(f,O,q)}_getConfig(f){return f=this._mergeConfigObj(f,this._element),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}static getInstance(f){return he.get(m(f),this.DATA_KEY)}static getOrCreateInstance(f,O={}){return this.getInstance(f)||new this(f,typeof O=="object"?O:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(f){return`${f}${this.EVENT_KEY}`}}const ue=Y=>{let f=Y.getAttribute("data-bs-target");if(!f||f==="#"){let O=Y.getAttribute("href");if(!O||!O.includes("#")&&!O.startsWith("."))return null;O.includes("#")&&!O.startsWith("#")&&(O=`#${O.split("#")[1]}`),f=O&&O!=="#"?O.trim():null}return f?f.split(",").map(O=>g(O)).join(","):null},oe={find:(Y,f=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(f,Y)),findOne:(Y,f=document.documentElement)=>Element.prototype.querySelector.call(f,Y),children:(Y,f)=>[].concat(...Y.children).filter(O=>O.matches(f)),parents(Y,f){const O=[];let q=Y.parentNode.closest(f);for(;q;)O.push(q),q=q.parentNode.closest(f);return O},prev(Y,f){let O=Y.previousElementSibling;for(;O;){if(O.matches(f))return[O];O=O.previousElementSibling}return[]},next(Y,f){let O=Y.nextElementSibling;for(;O;){if(O.matches(f))return[O];O=O.nextElementSibling}return[]},focusableChildren(Y){const f=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(O=>`${O}:not([tabindex^="-"])`).join(",");return this.find(f,Y).filter(O=>!D(O)&&k(O))},getSelectorFromElement(Y){const f=ue(Y);return f&&oe.findOne(f)?f:null},getElementFromSelector(Y){const f=ue(Y);return f?oe.findOne(f):null},getMultipleElementsFromSelector(Y){const f=ue(Y);return f?oe.find(f):[]}},ye=(Y,f="hide")=>{const O=`click.dismiss${Y.EVENT_KEY}`,q=Y.NAME;X.on(document,O,`[data-bs-dismiss="${q}"]`,function(de){if(["A","AREA"].includes(this.tagName)&&de.preventDefault(),D(this))return;const xe=oe.getElementFromSelector(this)||this.closest(`.${q}`);Y.getOrCreateInstance(xe)[f]()})},Ke=".bs.alert",ct=`close${Ke}`,ht=`closed${Ke}`;class Qe extends ne{static get NAME(){return"alert"}close(){if(X.trigger(this._element,ct).defaultPrevented)return;this._element.classList.remove("show");const f=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,f)}_destroyElement(){this._element.remove(),X.trigger(this._element,ht),this.dispose()}static jQueryInterface(f){return this.each(function(){const O=Qe.getOrCreateInstance(this);if(typeof f=="string"){if(O[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);O[f](this)}})}}ye(Qe,"close"),b(Qe);const ze='[data-bs-toggle="button"]';class ot extends ne{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(f){return this.each(function(){const O=ot.getOrCreateInstance(this);f==="toggle"&&O[f]()})}}X.on(document,"click.bs.button.data-api",ze,Y=>{Y.preventDefault();const f=Y.target.closest(ze);ot.getOrCreateInstance(f).toggle()}),b(ot);const Ft=".bs.swipe",Ot=`touchstart${Ft}`,Yt=`touchmove${Ft}`,Bt=`touchend${Ft}`,Rt=`pointerdown${Ft}`,Xt=`pointerup${Ft}`,It={endCallback:null,leftCallback:null,rightCallback:null},ni={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Gt extends N{constructor(f,O){super(),this._element=f,f&&Gt.isSupported()&&(this._config=this._getConfig(O),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return It}static get DefaultType(){return ni}static get NAME(){return"swipe"}dispose(){X.off(this._element,Ft)}_start(f){this._supportPointerEvents?this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX):this._deltaX=f.touches[0].clientX}_end(f){this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX-this._deltaX),this._handleSwipe(),M(this._config.endCallback)}_move(f){this._deltaX=f.touches&&f.touches.length>1?0:f.touches[0].clientX-this._deltaX}_handleSwipe(){const f=Math.abs(this._deltaX);if(f<=40)return;const O=f/this._deltaX;this._deltaX=0,O&&M(O>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(X.on(this._element,Rt,f=>this._start(f)),X.on(this._element,Xt,f=>this._end(f)),this._element.classList.add("pointer-event")):(X.on(this._element,Ot,f=>this._start(f)),X.on(this._element,Yt,f=>this._move(f)),X.on(this._element,Bt,f=>this._end(f)))}_eventIsPointerPenTouch(f){return this._supportPointerEvents&&(f.pointerType==="pen"||f.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const bt=".bs.carousel",oi=".data-api",kt="next",Wt="prev",et="left",ut="right",vs=`slide${bt}`,Ai=`slid${bt}`,es=`keydown${bt}`,Ls=`mouseenter${bt}`,Vt=`mouseleave${bt}`,$i=`dragstart${bt}`,ai=`load${bt}${oi}`,ji=`click${bt}${oi}`,G="carousel",K="active",re=".active",le=".carousel-item",Ee=re+le,_e={ArrowLeft:ut,ArrowRight:et},ke={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},pe={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class we extends ne{constructor(f,O){super(f,O),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=oe.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===G&&this.cycle()}static get Default(){return ke}static get DefaultType(){return pe}static get NAME(){return"carousel"}next(){this._slide(kt)}nextWhenVisible(){!document.hidden&&k(this._element)&&this.next()}prev(){this._slide(Wt)}pause(){this._isSliding&&x(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?X.one(this._element,Ai,()=>this.cycle()):this.cycle())}to(f){const O=this._getItems();if(f>O.length-1||f<0)return;if(this._isSliding)return void X.one(this._element,Ai,()=>this.to(f));const q=this._getItemIndex(this._getActive());if(q===f)return;const de=f>q?kt:Wt;this._slide(de,O[f])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(f){return f.defaultInterval=f.interval,f}_addEventListeners(){this._config.keyboard&&X.on(this._element,es,f=>this._keydown(f)),this._config.pause==="hover"&&(X.on(this._element,Ls,()=>this.pause()),X.on(this._element,Vt,()=>this._maybeEnableCycle())),this._config.touch&&Gt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const O of oe.find(".carousel-item img",this._element))X.on(O,$i,q=>q.preventDefault());const f={leftCallback:()=>this._slide(this._directionToOrder(et)),rightCallback:()=>this._slide(this._directionToOrder(ut)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Gt(this._element,f)}_keydown(f){if(/input|textarea/i.test(f.target.tagName))return;const O=_e[f.key];O&&(f.preventDefault(),this._slide(this._directionToOrder(O)))}_getItemIndex(f){return this._getItems().indexOf(f)}_setActiveIndicatorElement(f){if(!this._indicatorsElement)return;const O=oe.findOne(re,this._indicatorsElement);O.classList.remove(K),O.removeAttribute("aria-current");const q=oe.findOne(`[data-bs-slide-to="${f}"]`,this._indicatorsElement);q&&(q.classList.add(K),q.setAttribute("aria-current","true"))}_updateInterval(){const f=this._activeElement||this._getActive();if(!f)return;const O=Number.parseInt(f.getAttribute("data-bs-interval"),10);this._config.interval=O||this._config.defaultInterval}_slide(f,O=null){if(this._isSliding)return;const q=this._getActive(),de=f===kt,xe=O||R(this._getItems(),q,de,this._config.wrap);if(xe===q)return;const Oe=this._getItemIndex(xe),Ze=ci=>X.trigger(this._element,ci,{relatedTarget:xe,direction:this._orderToDirection(f),from:this._getItemIndex(q),to:Oe});if(Ze(vs).defaultPrevented||!q||!xe)return;const St=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Oe),this._activeElement=xe;const xt=de?"carousel-item-start":"carousel-item-end",Ct=de?"carousel-item-next":"carousel-item-prev";xe.classList.add(Ct),d(xe),q.classList.add(xt),xe.classList.add(xt),this._queueCallback(()=>{xe.classList.remove(xt,Ct),xe.classList.add(K),q.classList.remove(K,Ct,xt),this._isSliding=!1,Ze(Ai)},q,this._isAnimated()),St&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return oe.findOne(Ee,this._element)}_getItems(){return oe.find(le,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(f){return c()?f===et?Wt:kt:f===et?kt:Wt}_orderToDirection(f){return c()?f===Wt?et:ut:f===Wt?ut:et}static jQueryInterface(f){return this.each(function(){const O=we.getOrCreateInstance(this,f);if(typeof f!="number"){if(typeof f=="string"){if(O[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);O[f]()}}else O.to(f)})}}X.on(document,ji,"[data-bs-slide], [data-bs-slide-to]",function(Y){const f=oe.getElementFromSelector(this);if(!f||!f.classList.contains(G))return;Y.preventDefault();const O=we.getOrCreateInstance(f),q=this.getAttribute("data-bs-slide-to");return q?(O.to(q),void O._maybeEnableCycle()):ie.getDataAttribute(this,"slide")==="next"?(O.next(),void O._maybeEnableCycle()):(O.prev(),void O._maybeEnableCycle())}),X.on(window,ai,()=>{const Y=oe.find('[data-bs-ride="carousel"]');for(const f of Y)we.getOrCreateInstance(f)}),b(we);const Fe=".bs.collapse",Ie=`show${Fe}`,Re=`shown${Fe}`,at=`hide${Fe}`,qe=`hidden${Fe}`,Ge=`click${Fe}.data-api`,Je="show",$e="collapse",ft="collapsing",pt=`:scope .${$e} .${$e}`,st='[data-bs-toggle="collapse"]',rt={parent:null,toggle:!0},Ye={parent:"(null|element)",toggle:"boolean"};class Ue extends ne{constructor(f,O){super(f,O),this._isTransitioning=!1,this._triggerArray=[];const q=oe.find(st);for(const de of q){const xe=oe.getSelectorFromElement(de),Oe=oe.find(xe).filter(Ze=>Ze===this._element);xe!==null&&Oe.length&&this._triggerArray.push(de)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return rt}static get DefaultType(){return Ye}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let f=[];if(this._config.parent&&(f=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(de=>de!==this._element).map(de=>Ue.getOrCreateInstance(de,{toggle:!1}))),f.length&&f[0]._isTransitioning||X.trigger(this._element,Ie).defaultPrevented)return;for(const de of f)de.hide();const O=this._getDimension();this._element.classList.remove($e),this._element.classList.add(ft),this._element.style[O]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const q=`scroll${O[0].toUpperCase()+O.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ft),this._element.classList.add($e,Je),this._element.style[O]="",X.trigger(this._element,Re)},this._element,!0),this._element.style[O]=`${this._element[q]}px`}hide(){if(this._isTransitioning||!this._isShown()||X.trigger(this._element,at).defaultPrevented)return;const f=this._getDimension();this._element.style[f]=`${this._element.getBoundingClientRect()[f]}px`,d(this._element),this._element.classList.add(ft),this._element.classList.remove($e,Je);for(const O of this._triggerArray){const q=oe.getElementFromSelector(O);q&&!this._isShown(q)&&this._addAriaAndCollapsedClass([O],!1)}this._isTransitioning=!0,this._element.style[f]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ft),this._element.classList.add($e),X.trigger(this._element,qe)},this._element,!0)}_isShown(f=this._element){return f.classList.contains(Je)}_configAfterMerge(f){return f.toggle=!!f.toggle,f.parent=m(f.parent),f}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const f=this._getFirstLevelChildren(st);for(const O of f){const q=oe.getElementFromSelector(O);q&&this._addAriaAndCollapsedClass([O],this._isShown(q))}}_getFirstLevelChildren(f){const O=oe.find(pt,this._config.parent);return oe.find(f,this._config.parent).filter(q=>!O.includes(q))}_addAriaAndCollapsedClass(f,O){if(f.length)for(const q of f)q.classList.toggle("collapsed",!O),q.setAttribute("aria-expanded",O)}static jQueryInterface(f){const O={};return typeof f=="string"&&/show|hide/.test(f)&&(O.toggle=!1),this.each(function(){const q=Ue.getOrCreateInstance(this,O);if(typeof f=="string"){if(q[f]===void 0)throw new TypeError(`No method named "${f}"`);q[f]()}})}}X.on(document,Ge,st,function(Y){(Y.target.tagName==="A"||Y.delegateTarget&&Y.delegateTarget.tagName==="A")&&Y.preventDefault();for(const f of oe.getMultipleElementsFromSelector(this))Ue.getOrCreateInstance(f,{toggle:!1}).toggle()}),b(Ue);const nt="dropdown",Xe=".bs.dropdown",tt=".data-api",yt="ArrowUp",Dt="ArrowDown",qt=`hide${Xe}`,Ht=`hidden${Xe}`,$t=`show${Xe}`,jt=`shown${Xe}`,mt=`click${Xe}${tt}`,hi=`keydown${Xe}${tt}`,vi=`keyup${Xe}${tt}`,Jt="show",Mt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ut=`${Mt}.${Jt}`,Et=".dropdown-menu",Zt=c()?"top-end":"top-start",Li=c()?"top-start":"top-end",fi=c()?"bottom-end":"bottom-start",ts=c()?"bottom-start":"bottom-end",Ts=c()?"left-start":"right-start",gt=c()?"right-start":"left-start",is={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},ss={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Pt extends ne{constructor(f,O){super(f,O),this._popper=null,this._parent=this._element.parentNode,this._menu=oe.next(this._element,Et)[0]||oe.prev(this._element,Et)[0]||oe.findOne(Et,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return is}static get DefaultType(){return ss}static get NAME(){return nt}toggle(){return this._isShown()?this.hide():this.show()}show(){if(D(this._element)||this._isShown())return;const f={relatedTarget:this._element};if(!X.trigger(this._element,$t,f).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const O of[].concat(...document.body.children))X.on(O,"mouseover",S);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Jt),this._element.classList.add(Jt),X.trigger(this._element,jt,f)}}hide(){if(D(this._element)||!this._isShown())return;const f={relatedTarget:this._element};this._completeHide(f)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(f){if(!X.trigger(this._element,qt,f).defaultPrevented){if("ontouchstart"in document.documentElement)for(const O of[].concat(...document.body.children))X.off(O,"mouseover",S);this._popper&&this._popper.destroy(),this._menu.classList.remove(Jt),this._element.classList.remove(Jt),this._element.setAttribute("aria-expanded","false"),ie.removeDataAttribute(this._menu,"popper"),X.trigger(this._element,Ht,f)}}_getConfig(f){if(typeof(f=super._getConfig(f)).reference=="object"&&!E(f.reference)&&typeof f.reference.getBoundingClientRect!="function")throw new TypeError(`${nt.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return f}_createPopper(){if(dt===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let f=this._element;this._config.reference==="parent"?f=this._parent:E(this._config.reference)?f=m(this._config.reference):typeof this._config.reference=="object"&&(f=this._config.reference);const O=this._getPopperConfig();this._popper=dt.createPopper(f,this._menu,O)}_isShown(){return this._menu.classList.contains(Jt)}_getPlacement(){const f=this._parent;if(f.classList.contains("dropend"))return Ts;if(f.classList.contains("dropstart"))return gt;if(f.classList.contains("dropup-center"))return"top";if(f.classList.contains("dropdown-center"))return"bottom";const O=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return f.classList.contains("dropup")?O?Li:Zt:O?ts:fi}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:f}=this._config;return typeof f=="string"?f.split(",").map(O=>Number.parseInt(O,10)):typeof f=="function"?O=>f(O,this._element):f}_getPopperConfig(){const f={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ie.setDataAttribute(this._menu,"popper","static"),f.modifiers=[{name:"applyStyles",enabled:!1}]),{...f,...M(this._config.popperConfig,[f])}}_selectMenuItem({key:f,target:O}){const q=oe.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(de=>k(de));q.length&&R(q,O,f===Dt,!q.includes(O)).focus()}static jQueryInterface(f){return this.each(function(){const O=Pt.getOrCreateInstance(this,f);if(typeof f=="string"){if(O[f]===void 0)throw new TypeError(`No method named "${f}"`);O[f]()}})}static clearMenus(f){if(f.button===2||f.type==="keyup"&&f.key!=="Tab")return;const O=oe.find(Ut);for(const q of O){const de=Pt.getInstance(q);if(!de||de._config.autoClose===!1)continue;const xe=f.composedPath(),Oe=xe.includes(de._menu);if(xe.includes(de._element)||de._config.autoClose==="inside"&&!Oe||de._config.autoClose==="outside"&&Oe||de._menu.contains(f.target)&&(f.type==="keyup"&&f.key==="Tab"||/input|select|option|textarea|form/i.test(f.target.tagName)))continue;const Ze={relatedTarget:de._element};f.type==="click"&&(Ze.clickEvent=f),de._completeHide(Ze)}}static dataApiKeydownHandler(f){const O=/input|textarea/i.test(f.target.tagName),q=f.key==="Escape",de=[yt,Dt].includes(f.key);if(!de&&!q||O&&!q)return;f.preventDefault();const xe=this.matches(Mt)?this:oe.prev(this,Mt)[0]||oe.next(this,Mt)[0]||oe.findOne(Mt,f.delegateTarget.parentNode),Oe=Pt.getOrCreateInstance(xe);if(de)return f.stopPropagation(),Oe.show(),void Oe._selectMenuItem(f);Oe._isShown()&&(f.stopPropagation(),Oe.hide(),xe.focus())}}X.on(document,hi,Mt,Pt.dataApiKeydownHandler),X.on(document,hi,Et,Pt.dataApiKeydownHandler),X.on(document,mt,Pt.clearMenus),X.on(document,vi,Pt.clearMenus),X.on(document,mt,Mt,function(Y){Y.preventDefault(),Pt.getOrCreateInstance(this).toggle()}),b(Pt);const Ui="backdrop",rs="show",Os=`mousedown.bs.${Ui}`,_i={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Rs={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class li extends N{constructor(f){super(),this._config=this._getConfig(f),this._isAppended=!1,this._element=null}static get Default(){return _i}static get DefaultType(){return Rs}static get NAME(){return Ui}show(f){if(!this._config.isVisible)return void M(f);this._append();const O=this._getElement();this._config.isAnimated&&d(O),O.classList.add(rs),this._emulateAnimation(()=>{M(f)})}hide(f){this._config.isVisible?(this._getElement().classList.remove(rs),this._emulateAnimation(()=>{this.dispose(),M(f)})):M(f)}dispose(){this._isAppended&&(X.off(this._element,Os),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const f=document.createElement("div");f.className=this._config.className,this._config.isAnimated&&f.classList.add("fade"),this._element=f}return this._element}_configAfterMerge(f){return f.rootElement=m(f.rootElement),f}_append(){if(this._isAppended)return;const f=this._getElement();this._config.rootElement.append(f),X.on(f,Os,()=>{M(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(f){A(f,this._getElement(),this._config.isAnimated)}}const bi=".bs.focustrap",pi=`focusin${bi}`,Ti=`keydown.tab${bi}`,ns="backward",os={autofocus:!0,trapElement:null},as={autofocus:"boolean",trapElement:"element"};class yi extends N{constructor(f){super(),this._config=this._getConfig(f),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return os}static get DefaultType(){return as}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),X.off(document,bi),X.on(document,pi,f=>this._handleFocusin(f)),X.on(document,Ti,f=>this._handleKeydown(f)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,X.off(document,bi))}_handleFocusin(f){const{trapElement:O}=this._config;if(f.target===document||f.target===O||O.contains(f.target))return;const q=oe.focusableChildren(O);q.length===0?O.focus():this._lastTabNavDirection===ns?q[q.length-1].focus():q[0].focus()}_handleKeydown(f){f.key==="Tab"&&(this._lastTabNavDirection=f.shiftKey?ns:"forward")}}const hs=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Qt=".sticky-top",Si="padding-right",Vi="margin-right";class qi{constructor(){this._element=document.body}getWidth(){const f=document.documentElement.clientWidth;return Math.abs(window.innerWidth-f)}hide(){const f=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Si,O=>O+f),this._setElementAttributes(hs,Si,O=>O+f),this._setElementAttributes(Qt,Vi,O=>O-f)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Si),this._resetElementAttributes(hs,Si),this._resetElementAttributes(Qt,Vi)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(f,O,q){const de=this.getWidth();this._applyManipulationCallback(f,xe=>{if(xe!==this._element&&window.innerWidth>xe.clientWidth+de)return;this._saveInitialAttribute(xe,O);const Oe=window.getComputedStyle(xe).getPropertyValue(O);xe.style.setProperty(O,`${q(Number.parseFloat(Oe))}px`)})}_saveInitialAttribute(f,O){const q=f.style.getPropertyValue(O);q&&ie.setDataAttribute(f,O,q)}_resetElementAttributes(f,O){this._applyManipulationCallback(f,q=>{const de=ie.getDataAttribute(q,O);de!==null?(ie.removeDataAttribute(q,O),q.style.setProperty(O,de)):q.style.removeProperty(O)})}_applyManipulationCallback(f,O){if(E(f))O(f);else for(const q of oe.find(f,this._element))O(q)}}const vt=".bs.modal",Oi=`hide${vt}`,bs=`hidePrevented${vt}`,Ks=`hidden${vt}`,Ys=`show${vt}`,Qr=`shown${vt}`,en=`resize${vt}`,Ri=`click.dismiss${vt}`,ls=`mousedown.dismiss${vt}`,Ps=`keydown.dismiss${vt}`,Ki=`click${vt}.data-api`,Bs="modal-open",pr="show",ys="modal-static",gr={backdrop:!0,focus:!0,keyboard:!0},mr={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Yi extends ne{constructor(f,O){super(f,O),this._dialog=oe.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new qi,this._addEventListeners()}static get Default(){return gr}static get DefaultType(){return mr}static get NAME(){return"modal"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||this._isTransitioning||X.trigger(this._element,Ys,{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Bs),this._adjustDialog(),this._backdrop.show(()=>this._showElement(f)))}hide(){this._isShown&&!this._isTransitioning&&(X.trigger(this._element,Oi).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(pr),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){X.off(window,vt),X.off(this._dialog,vt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new li({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new yi({trapElement:this._element})}_showElement(f){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const O=oe.findOne(".modal-body",this._dialog);O&&(O.scrollTop=0),d(this._element),this._element.classList.add(pr),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,X.trigger(this._element,Qr,{relatedTarget:f})},this._dialog,this._isAnimated())}_addEventListeners(){X.on(this._element,Ps,f=>{f.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),X.on(window,en,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),X.on(this._element,ls,f=>{X.one(this._element,Ri,O=>{this._element===f.target&&this._element===O.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Bs),this._resetAdjustments(),this._scrollBar.reset(),X.trigger(this._element,Ks)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(X.trigger(this._element,bs).defaultPrevented)return;const f=this._element.scrollHeight>document.documentElement.clientHeight,O=this._element.style.overflowY;O==="hidden"||this._element.classList.contains(ys)||(f||(this._element.style.overflowY="hidden"),this._element.classList.add(ys),this._queueCallback(()=>{this._element.classList.remove(ys),this._queueCallback(()=>{this._element.style.overflowY=O},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const f=this._element.scrollHeight>document.documentElement.clientHeight,O=this._scrollBar.getWidth(),q=O>0;if(q&&!f){const de=c()?"paddingLeft":"paddingRight";this._element.style[de]=`${O}px`}if(!q&&f){const de=c()?"paddingRight":"paddingLeft";this._element.style[de]=`${O}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(f,O){return this.each(function(){const q=Yi.getOrCreateInstance(this,f);if(typeof f=="string"){if(q[f]===void 0)throw new TypeError(`No method named "${f}"`);q[f](O)}})}}X.on(document,Ki,'[data-bs-toggle="modal"]',function(Y){const f=oe.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&Y.preventDefault(),X.one(f,Ys,q=>{q.defaultPrevented||X.one(f,Ks,()=>{k(this)&&this.focus()})});const O=oe.findOne(".modal.show");O&&Yi.getInstance(O).hide(),Yi.getOrCreateInstance(f).toggle(this)}),ye(Yi),b(Yi);const wi=".bs.offcanvas",Is=".data-api",vr=`load${wi}${Is}`,Xs="show",Gs="showing",Hs="hiding",br=".offcanvas.show",cs=`show${wi}`,yr=`shown${wi}`,Sr=`hide${wi}`,Js=`hidePrevented${wi}`,Ss=`hidden${wi}`,wr=`resize${wi}`,Fs=`click${wi}${Is}`,xr=`keydown.dismiss${wi}`,Cr={backdrop:!0,keyboard:!0,scroll:!1},ds={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Nt extends ne{constructor(f,O){super(f,O),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Cr}static get DefaultType(){return ds}static get NAME(){return"offcanvas"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||X.trigger(this._element,cs,{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new qi().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Gs),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Xs),this._element.classList.remove(Gs),X.trigger(this._element,yr,{relatedTarget:f})},this._element,!0))}hide(){this._isShown&&(X.trigger(this._element,Sr).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Hs),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Xs,Hs),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new qi().reset(),X.trigger(this._element,Ss)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const f=!!this._config.backdrop;return new li({className:"offcanvas-backdrop",isVisible:f,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:f?()=>{this._config.backdrop!=="static"?this.hide():X.trigger(this._element,Js)}:null})}_initializeFocusTrap(){return new yi({trapElement:this._element})}_addEventListeners(){X.on(this._element,xr,f=>{f.key==="Escape"&&(this._config.keyboard?this.hide():X.trigger(this._element,Js))})}static jQueryInterface(f){return this.each(function(){const O=Nt.getOrCreateInstance(this,f);if(typeof f=="string"){if(O[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);O[f](this)}})}}X.on(document,Fs,'[data-bs-toggle="offcanvas"]',function(Y){const f=oe.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&Y.preventDefault(),D(this))return;X.one(f,Ss,()=>{k(this)&&this.focus()});const O=oe.findOne(br);O&&O!==f&&Nt.getInstance(O).hide(),Nt.getOrCreateInstance(f).toggle(this)}),X.on(window,vr,()=>{for(const Y of oe.find(br))Nt.getOrCreateInstance(Y).show()}),X.on(window,wr,()=>{for(const Y of oe.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(Y).position!=="fixed"&&Nt.getOrCreateInstance(Y).hide()}),ye(Nt),b(Nt);const Zs={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Er=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),tn=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,sn=(Y,f)=>{const O=Y.nodeName.toLowerCase();return f.includes(O)?!Er.has(O)||!!tn.test(Y.nodeValue):f.filter(q=>q instanceof RegExp).some(q=>q.test(O))},kr={allowList:Zs,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},rn={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ns={entry:"(string|element|function|null)",selector:"(string|element)"};class Qs extends N{constructor(f){super(),this._config=this._getConfig(f)}static get Default(){return kr}static get DefaultType(){return rn}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(f=>this._resolvePossibleFunction(f)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(f){return this._checkContent(f),this._config.content={...this._config.content,...f},this}toHtml(){const f=document.createElement("div");f.innerHTML=this._maybeSanitize(this._config.template);for(const[de,xe]of Object.entries(this._config.content))this._setContent(f,xe,de);const O=f.children[0],q=this._resolvePossibleFunction(this._config.extraClass);return q&&O.classList.add(...q.split(" ")),O}_typeCheckConfig(f){super._typeCheckConfig(f),this._checkContent(f.content)}_checkContent(f){for(const[O,q]of Object.entries(f))super._typeCheckConfig({selector:O,entry:q},Ns)}_setContent(f,O,q){const de=oe.findOne(q,f);de&&((O=this._resolvePossibleFunction(O))?E(O)?this._putElementInTemplate(m(O),de):this._config.html?de.innerHTML=this._maybeSanitize(O):de.textContent=O:de.remove())}_maybeSanitize(f){return this._config.sanitize?function(O,q,de){if(!O.length)return O;if(de&&typeof de=="function")return de(O);const xe=new window.DOMParser().parseFromString(O,"text/html"),Oe=[].concat(...xe.body.querySelectorAll("*"));for(const Ze of Oe){const St=Ze.nodeName.toLowerCase();if(!Object.keys(q).includes(St)){Ze.remove();continue}const xt=[].concat(...Ze.attributes),Ct=[].concat(q["*"]||[],q[St]||[]);for(const ci of xt)sn(ci,Ct)||Ze.removeAttribute(ci.nodeName)}return xe.body.innerHTML}(f,this._config.allowList,this._config.sanitizeFn):f}_resolvePossibleFunction(f){return M(f,[this])}_putElementInTemplate(f,O){if(this._config.html)return O.innerHTML="",void O.append(f);O.textContent=f.textContent}}const Pi=new Set(["sanitize","allowList","sanitizeFn"]),At="fade",wt="show",Xi=".modal",er="hide.bs.modal",Kt="hover",xi="focus",tr={AUTO:"auto",TOP:"top",RIGHT:c()?"left":"right",BOTTOM:"bottom",LEFT:c()?"right":"left"},ir={allowList:Zs,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Dr={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Bi extends ne{constructor(f,O){if(dt===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(f,O),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ir}static get DefaultType(){return Dr}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),X.off(this._element.closest(Xi),er,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const f=X.trigger(this._element,this.constructor.eventName("show")),O=(T(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(f.defaultPrevented||!O)return;this._disposePopper();const q=this._getTipElement();this._element.setAttribute("aria-describedby",q.getAttribute("id"));const{container:de}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(de.append(q),X.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(q),q.classList.add(wt),"ontouchstart"in document.documentElement)for(const xe of[].concat(...document.body.children))X.on(xe,"mouseover",S);this._queueCallback(()=>{X.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!X.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(wt),"ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))X.off(f,"mouseover",S);this._activeTrigger.click=!1,this._activeTrigger[xi]=!1,this._activeTrigger[Kt]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),X.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(f){const O=this._getTemplateFactory(f).toHtml();if(!O)return null;O.classList.remove(At,wt),O.classList.add(`bs-${this.constructor.NAME}-auto`);const q=(de=>{do de+=Math.floor(1e6*Math.random());while(document.getElementById(de));return de})(this.constructor.NAME).toString();return O.setAttribute("id",q),this._isAnimated()&&O.classList.add(At),O}setContent(f){this._newContent=f,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(f){return this._templateFactory?this._templateFactory.changeContent(f):this._templateFactory=new Qs({...this._config,content:f,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(f){return this.constructor.getOrCreateInstance(f.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(At)}_isShown(){return this.tip&&this.tip.classList.contains(wt)}_createPopper(f){const O=M(this._config.placement,[this,f,this._element]),q=tr[O.toUpperCase()];return dt.createPopper(this._element,f,this._getPopperConfig(q))}_getOffset(){const{offset:f}=this._config;return typeof f=="string"?f.split(",").map(O=>Number.parseInt(O,10)):typeof f=="function"?O=>f(O,this._element):f}_resolvePossibleFunction(f){return M(f,[this._element])}_getPopperConfig(f){const O={placement:f,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:q=>{this._getTipElement().setAttribute("data-popper-placement",q.state.placement)}}]};return{...O,...M(this._config.popperConfig,[O])}}_setListeners(){const f=this._config.trigger.split(" ");for(const O of f)if(O==="click")X.on(this._element,this.constructor.eventName("click"),this._config.selector,q=>{this._initializeOnDelegatedTarget(q).toggle()});else if(O!=="manual"){const q=O===Kt?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),de=O===Kt?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");X.on(this._element,q,this._config.selector,xe=>{const Oe=this._initializeOnDelegatedTarget(xe);Oe._activeTrigger[xe.type==="focusin"?xi:Kt]=!0,Oe._enter()}),X.on(this._element,de,this._config.selector,xe=>{const Oe=this._initializeOnDelegatedTarget(xe);Oe._activeTrigger[xe.type==="focusout"?xi:Kt]=Oe._element.contains(xe.relatedTarget),Oe._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},X.on(this._element.closest(Xi),er,this._hideModalHandler)}_fixTitle(){const f=this._element.getAttribute("title");f&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",f),this._element.setAttribute("data-bs-original-title",f),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(f,O){clearTimeout(this._timeout),this._timeout=setTimeout(f,O)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(f){const O=ie.getDataAttributes(this._element);for(const q of Object.keys(O))Pi.has(q)&&delete O[q];return f={...O,...typeof f=="object"&&f?f:{}},f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f.container=f.container===!1?document.body:m(f.container),typeof f.delay=="number"&&(f.delay={show:f.delay,hide:f.delay}),typeof f.title=="number"&&(f.title=f.title.toString()),typeof f.content=="number"&&(f.content=f.content.toString()),f}_getDelegateConfig(){const f={};for(const[O,q]of Object.entries(this._config))this.constructor.Default[O]!==q&&(f[O]=q);return f.selector=!1,f.trigger="manual",f}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(f){return this.each(function(){const O=Bi.getOrCreateInstance(this,f);if(typeof f=="string"){if(O[f]===void 0)throw new TypeError(`No method named "${f}"`);O[f]()}})}}b(Bi);const sr={...Bi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},rr={...Bi.DefaultType,content:"(null|string|element|function)"};class ws extends Bi{static get Default(){return sr}static get DefaultType(){return rr}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(f){return this.each(function(){const O=ws.getOrCreateInstance(this,f);if(typeof f=="string"){if(O[f]===void 0)throw new TypeError(`No method named "${f}"`);O[f]()}})}}b(ws);const Ws=".bs.scrollspy",Mr=`activate${Ws}`,Ar=`click${Ws}`,nn=`load${Ws}.data-api`,us="active",Gi="[href]",zs=".nav-link",on=`${zs}, .nav-item > ${zs}, .list-group-item`,nr={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Lr={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class fs extends ne{constructor(f,O){super(f,O),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return nr}static get DefaultType(){return Lr}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const f of this._observableSections.values())this._observer.observe(f)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(f){return f.target=m(f.target)||document.body,f.rootMargin=f.offset?`${f.offset}px 0px -30%`:f.rootMargin,typeof f.threshold=="string"&&(f.threshold=f.threshold.split(",").map(O=>Number.parseFloat(O))),f}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(X.off(this._config.target,Ar),X.on(this._config.target,Ar,Gi,f=>{const O=this._observableSections.get(f.target.hash);if(O){f.preventDefault();const q=this._rootElement||window,de=O.offsetTop-this._element.offsetTop;if(q.scrollTo)return void q.scrollTo({top:de,behavior:"smooth"});q.scrollTop=de}}))}_getNewObserver(){const f={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(O=>this._observerCallback(O),f)}_observerCallback(f){const O=Oe=>this._targetLinks.get(`#${Oe.target.id}`),q=Oe=>{this._previousScrollData.visibleEntryTop=Oe.target.offsetTop,this._process(O(Oe))},de=(this._rootElement||document.documentElement).scrollTop,xe=de>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=de;for(const Oe of f){if(!Oe.isIntersecting){this._activeTarget=null,this._clearActiveClass(O(Oe));continue}const Ze=Oe.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(xe&&Ze){if(q(Oe),!de)return}else xe||Ze||q(Oe)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const f=oe.find(Gi,this._config.target);for(const O of f){if(!O.hash||D(O))continue;const q=oe.findOne(decodeURI(O.hash),this._element);k(q)&&(this._targetLinks.set(decodeURI(O.hash),O),this._observableSections.set(O.hash,q))}}_process(f){this._activeTarget!==f&&(this._clearActiveClass(this._config.target),this._activeTarget=f,f.classList.add(us),this._activateParents(f),X.trigger(this._element,Mr,{relatedTarget:f}))}_activateParents(f){if(f.classList.contains("dropdown-item"))oe.findOne(".dropdown-toggle",f.closest(".dropdown")).classList.add(us);else for(const O of oe.parents(f,".nav, .list-group"))for(const q of oe.prev(O,on))q.classList.add(us)}_clearActiveClass(f){f.classList.remove(us);const O=oe.find(`${Gi}.${us}`,f);for(const q of O)q.classList.remove(us)}static jQueryInterface(f){return this.each(function(){const O=fs.getOrCreateInstance(this,f);if(typeof f=="string"){if(O[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);O[f]()}})}}X.on(window,nn,()=>{for(const Y of oe.find('[data-bs-spy="scroll"]'))fs.getOrCreateInstance(Y)}),b(fs);const Ii=".bs.tab",xs=`hide${Ii}`,Tr=`hidden${Ii}`,Cs=`show${Ii}`,an=`shown${Ii}`,Or=`click${Ii}`,Rr=`keydown${Ii}`,hn=`load${Ii}`,ln="ArrowLeft",_s="ArrowRight",$s="ArrowUp",or="ArrowDown",Lt="Home",js="End",Hi="active",Es="fade",ar="show",hr=".dropdown-toggle",Us=`:not(${hr})`,Pr='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ps=`.nav-link${Us}, .list-group-item${Us}, [role="tab"]${Us}, ${Pr}`,cn=`.${Hi}[data-bs-toggle="tab"], .${Hi}[data-bs-toggle="pill"], .${Hi}[data-bs-toggle="list"]`;class Ji extends ne{constructor(f){super(f),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),X.on(this._element,Rr,O=>this._keydown(O)))}static get NAME(){return"tab"}show(){const f=this._element;if(this._elemIsActive(f))return;const O=this._getActiveElem(),q=O?X.trigger(O,xs,{relatedTarget:f}):null;X.trigger(f,Cs,{relatedTarget:O}).defaultPrevented||q&&q.defaultPrevented||(this._deactivate(O,f),this._activate(f,O))}_activate(f,O){f&&(f.classList.add(Hi),this._activate(oe.getElementFromSelector(f)),this._queueCallback(()=>{f.getAttribute("role")==="tab"?(f.removeAttribute("tabindex"),f.setAttribute("aria-selected",!0),this._toggleDropDown(f,!0),X.trigger(f,an,{relatedTarget:O})):f.classList.add(ar)},f,f.classList.contains(Es)))}_deactivate(f,O){f&&(f.classList.remove(Hi),f.blur(),this._deactivate(oe.getElementFromSelector(f)),this._queueCallback(()=>{f.getAttribute("role")==="tab"?(f.setAttribute("aria-selected",!1),f.setAttribute("tabindex","-1"),this._toggleDropDown(f,!1),X.trigger(f,Tr,{relatedTarget:O})):f.classList.remove(ar)},f,f.classList.contains(Es)))}_keydown(f){if(![ln,_s,$s,or,Lt,js].includes(f.key))return;f.stopPropagation(),f.preventDefault();const O=this._getChildren().filter(de=>!D(de));let q;if([Lt,js].includes(f.key))q=O[f.key===Lt?0:O.length-1];else{const de=[_s,or].includes(f.key);q=R(O,f.target,de,!0)}q&&(q.focus({preventScroll:!0}),Ji.getOrCreateInstance(q).show())}_getChildren(){return oe.find(ps,this._parent)}_getActiveElem(){return this._getChildren().find(f=>this._elemIsActive(f))||null}_setInitialAttributes(f,O){this._setAttributeIfNotExists(f,"role","tablist");for(const q of O)this._setInitialAttributesOnChild(q)}_setInitialAttributesOnChild(f){f=this._getInnerElement(f);const O=this._elemIsActive(f),q=this._getOuterElement(f);f.setAttribute("aria-selected",O),q!==f&&this._setAttributeIfNotExists(q,"role","presentation"),O||f.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(f,"role","tab"),this._setInitialAttributesOnTargetPanel(f)}_setInitialAttributesOnTargetPanel(f){const O=oe.getElementFromSelector(f);O&&(this._setAttributeIfNotExists(O,"role","tabpanel"),f.id&&this._setAttributeIfNotExists(O,"aria-labelledby",`${f.id}`))}_toggleDropDown(f,O){const q=this._getOuterElement(f);if(!q.classList.contains("dropdown"))return;const de=(xe,Oe)=>{const Ze=oe.findOne(xe,q);Ze&&Ze.classList.toggle(Oe,O)};de(hr,Hi),de(".dropdown-menu",ar),q.setAttribute("aria-expanded",O)}_setAttributeIfNotExists(f,O,q){f.hasAttribute(O)||f.setAttribute(O,q)}_elemIsActive(f){return f.classList.contains(Hi)}_getInnerElement(f){return f.matches(ps)?f:oe.findOne(ps,f)}_getOuterElement(f){return f.closest(".nav-item, .list-group-item")||f}static jQueryInterface(f){return this.each(function(){const O=Ji.getOrCreateInstance(this);if(typeof f=="string"){if(O[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);O[f]()}})}}X.on(document,Or,Pr,function(Y){["A","AREA"].includes(this.tagName)&&Y.preventDefault(),D(this)||Ji.getOrCreateInstance(this).show()}),X.on(window,hn,()=>{for(const Y of oe.find(cn))Ji.getOrCreateInstance(Y)}),b(Ji);const ei=".bs.toast",Br=`mouseover${ei}`,Ir=`mouseout${ei}`,dn=`focusin${ei}`,lr=`focusout${ei}`,un=`hide${ei}`,Hr=`hidden${ei}`,Fr=`show${ei}`,Nr=`shown${ei}`,cr="hide",Vs="show",ks="showing",dr={animation:"boolean",autohide:"boolean",delay:"number"},Wr={animation:!0,autohide:!0,delay:5e3};class gs extends ne{constructor(f,O){super(f,O),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Wr}static get DefaultType(){return dr}static get NAME(){return"toast"}show(){X.trigger(this._element,Fr).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(cr),d(this._element),this._element.classList.add(Vs,ks),this._queueCallback(()=>{this._element.classList.remove(ks),X.trigger(this._element,Nr),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(X.trigger(this._element,un).defaultPrevented||(this._element.classList.add(ks),this._queueCallback(()=>{this._element.classList.add(cr),this._element.classList.remove(ks,Vs),X.trigger(this._element,Hr)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Vs),super.dispose()}isShown(){return this._element.classList.contains(Vs)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(f,O){switch(f.type){case"mouseover":case"mouseout":this._hasMouseInteraction=O;break;case"focusin":case"focusout":this._hasKeyboardInteraction=O}if(O)return void this._clearTimeout();const q=f.relatedTarget;this._element===q||this._element.contains(q)||this._maybeScheduleHide()}_setListeners(){X.on(this._element,Br,f=>this._onInteraction(f,!0)),X.on(this._element,Ir,f=>this._onInteraction(f,!1)),X.on(this._element,dn,f=>this._onInteraction(f,!0)),X.on(this._element,lr,f=>this._onInteraction(f,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(f){return this.each(function(){const O=gs.getOrCreateInstance(this,f);if(typeof f=="string"){if(O[f]===void 0)throw new TypeError(`No method named "${f}"`);O[f](this)}})}}return ye(gs),b(gs),{Alert:Qe,Button:ot,Carousel:we,Collapse:Ue,Dropdown:Pt,Modal:Yi,Offcanvas:Nt,Popover:ws,ScrollSpy:fs,Tab:Ji,Toast:gs,Tooltip:Bi}});/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */(function(it,je){typeof exports=="object"&&typeof module<"u"?module.exports=je():typeof define=="function"&&define.amd?define(je):(it=typeof globalThis<"u"?globalThis:it||self).Chart=je()})(this,function(){"use strict";var it=Object.freeze({__proto__:null,get Colors(){return pa},get Decimation(){return ga},get Filler(){return xa},get Legend(){return Ca},get SubTitle(){return ka},get Title(){return Ea},get Tooltip(){return Aa}});function je(){}const dt=(()=>{let i=0;return()=>i++})();function Be(i){return i==null}function he(i){if(Array.isArray&&Array.isArray(i))return!0;const e=Object.prototype.toString.call(i);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function p(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function g(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function x(i,e){return g(i)?i:e}function E(i,e){return i===void 0?e:i}const m=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/e,k=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*e:+i;function D(i,e,t){if(i&&typeof i.call=="function")return i.apply(t,e)}function T(i,e,t,s){let r,n,o;if(he(i))if(n=i.length,s)for(r=n-1;r>=0;r--)e.call(t,i[r],r);else for(r=0;r<n;r++)e.call(t,i[r],r);else if(p(i))for(o=Object.keys(i),n=o.length,r=0;r<n;r++)e.call(t,i[o[r]],o[r])}function S(i,e){let t,s,r,n;if(!i||!e||i.length!==e.length)return!1;for(t=0,s=i.length;t<s;++t)if(r=i[t],n=e[t],r.datasetIndex!==n.datasetIndex||r.index!==n.index)return!1;return!0}function d(i){if(he(i))return i.map(d);if(p(i)){const e=Object.create(null),t=Object.keys(i),s=t.length;let r=0;for(;r<s;++r)e[t[r]]=d(i[t[r]]);return e}return i}function u(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function l(i,e,t,s){if(!u(i))return;const r=e[i],n=t[i];p(r)&&p(n)?c(r,n,s):e[i]=d(n)}function c(i,e,t){const s=he(e)?e:[e],r=s.length;if(!p(i))return i;const n=(t=t||{}).merger||l;let o;for(let a=0;a<r;++a){if(o=s[a],!p(o))continue;const h=Object.keys(o);for(let _=0,y=h.length;_<y;++_)n(h[_],i,o,t)}return i}function b(i,e){return c(i,e,{merger:M})}function M(i,e,t){if(!u(i))return;const s=e[i],r=t[i];p(s)&&p(r)?b(s,r):Object.prototype.hasOwnProperty.call(e,i)||(e[i]=d(r))}const A={"":i=>i,x:i=>i.x,y:i=>i.y};function R(i){const e=i.split("."),t=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(t.push(s),s="");return t}function w(i,e){return(A[e]||(A[e]=function(s){const r=R(s);return n=>{for(const o of r){if(o==="")break;n=n&&n[o]}return n}}(e)))(i)}function I(i){return i.charAt(0).toUpperCase()+i.slice(1)}const V=i=>i!==void 0,j=i=>typeof i=="function",ee=(i,e)=>{if(i.size!==e.size)return!1;for(const t of i)if(!e.has(t))return!1;return!0};function W(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const se=Math.PI,ce=2*se,ve=ce+se,Se=Number.POSITIVE_INFINITY,ge=se/180,B=se/2,z=se/4,U=2*se/3,J=Math.log10,X=Math.sign;function be(i,e,t){return Math.abs(i-e)<t}function Ne(i){const e=Math.round(i);i=be(i,e,i/1e3)?e:i;const t=Math.pow(10,Math.floor(J(i))),s=i/t;return(s<=1?1:s<=2?2:s<=5?5:10)*t}function We(i){const e=[],t=Math.sqrt(i);let s;for(s=1;s<t;s++)i%s==0&&(e.push(s),e.push(i/s));return t===(0|t)&&e.push(t),e.sort((r,n)=>r-n).pop(),e}function ie(i){return!isNaN(parseFloat(i))&&isFinite(i)}function N(i,e){const t=Math.round(i);return t-e<=i&&t+e>=i}function ne(i,e,t){let s,r,n;for(s=0,r=i.length;s<r;s++)n=i[s][t],isNaN(n)||(e.min=Math.min(e.min,n),e.max=Math.max(e.max,n))}function ue(i){return i*(se/180)}function oe(i){return i*(180/se)}function ye(i){if(!g(i))return;let e=1,t=0;for(;Math.round(i*e)/e!==i;)e*=10,t++;return t}function Ke(i,e){const t=e.x-i.x,s=e.y-i.y,r=Math.sqrt(t*t+s*s);let n=Math.atan2(s,t);return n<-.5*se&&(n+=ce),{angle:n,distance:r}}function ct(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function ht(i,e){return(i-e+ve)%ce-se}function Qe(i){return(i%ce+ce)%ce}function ze(i,e,t,s){const r=Qe(i),n=Qe(e),o=Qe(t),a=Qe(n-r),h=Qe(o-r),_=Qe(r-n),y=Qe(r-o);return r===n||r===o||s&&n===o||a>h&&_<y}function ot(i,e,t){return Math.max(e,Math.min(t,i))}function Ft(i){return ot(i,-32768,32767)}function Ot(i,e,t,s=1e-6){return i>=Math.min(e,t)-s&&i<=Math.max(e,t)+s}function Yt(i,e,t){t=t||(o=>i[o]<e);let s,r=i.length-1,n=0;for(;r-n>1;)s=n+r>>1,t(s)?n=s:r=s;return{lo:n,hi:r}}const Bt=(i,e,t,s)=>Yt(i,t,s?r=>{const n=i[r][e];return n<t||n===t&&i[r+1][e]===t}:r=>i[r][e]<t),Rt=(i,e,t)=>Yt(i,t,s=>i[s][e]>=t);function Xt(i,e,t){let s=0,r=i.length;for(;s<r&&i[s]<e;)s++;for(;r>s&&i[r-1]>t;)r--;return s>0||r<i.length?i.slice(s,r):i}const It=["push","pop","shift","splice","unshift"];function ni(i,e){i._chartjs?i._chartjs.listeners.push(e):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),It.forEach(t=>{const s="_onData"+I(t),r=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...n){const o=r.apply(this,n);return i._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...n)}),o}})}))}function Gt(i,e){const t=i._chartjs;if(!t)return;const s=t.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),s.length>0||(It.forEach(n=>{delete i[n]}),delete i._chartjs)}function bt(i){const e=new Set(i);return e.size===i.length?i:Array.from(e)}const oi=typeof window>"u"?function(i){return i()}:window.requestAnimationFrame;function kt(i,e){let t=[],s=!1;return function(...r){t=r,s||(s=!0,oi.call(window,()=>{s=!1,i.apply(e,t)}))}}function Wt(i,e){let t;return function(...s){return e?(clearTimeout(t),t=setTimeout(i,e,s)):i.apply(this,s),e}}const et=i=>i==="start"?"left":i==="end"?"right":"center",ut=(i,e,t)=>i==="start"?e:i==="end"?t:(e+t)/2,vs=(i,e,t,s)=>i===(s?"left":"right")?t:i==="center"?(e+t)/2:e;function Ai(i,e,t){const s=e.length;let r=0,n=s;if(i._sorted){const{iScale:o,_parsed:a}=i,h=o.axis,{min:_,max:y,minDefined:v,maxDefined:C}=o.getUserBounds();v&&(r=ot(Math.min(Bt(a,h,_).lo,t?s:Bt(e,h,o.getPixelForValue(_)).lo),0,s-1)),n=C?ot(Math.max(Bt(a,o.axis,y,!0).hi+1,t?0:Bt(e,h,o.getPixelForValue(y),!0).hi+1),r,s)-r:s-r}return{start:r,count:n}}function es(i){const{xScale:e,yScale:t,_scaleRanges:s}=i,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!s)return i._scaleRanges=r,!0;const n=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==t.min||s.ymax!==t.max;return Object.assign(s,r),n}class Ls{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,r){const n=t.listeners[r],o=t.duration;n.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(s-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=oi.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const n=s.items;let o,a=n.length-1,h=!1;for(;a>=0;--a)o=n[a],o._active?(o._total>s.duration&&(s.duration=o._total),o.tick(e),h=!0):(n[a]=n[n.length-1],n.pop());h&&(r.draw(),this._notify(r,s,e,"progress")),n.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),t+=n.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Vt=new Ls;/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function $i(i){return i+.5|0}const ai=(i,e,t)=>Math.max(Math.min(i,t),e);function ji(i){return ai($i(2.55*i),0,255)}function G(i){return ai($i(255*i),0,255)}function K(i){return ai($i(i/2.55)/100,0,1)}function re(i){return ai($i(100*i),0,100)}const le={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ee=[..."0123456789ABCDEF"],_e=i=>Ee[15&i],ke=i=>Ee[(240&i)>>4]+Ee[15&i],pe=i=>(240&i)>>4==(15&i);function we(i){var e=(t=>pe(t.r)&&pe(t.g)&&pe(t.b)&&pe(t.a))(i)?_e:ke;return i?"#"+e(i.r)+e(i.g)+e(i.b)+((t,s)=>t<255?s(t):"")(i.a,e):void 0}const Fe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ie(i,e,t){const s=e*Math.min(t,1-t),r=(n,o=(n+i/30)%12)=>t-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Re(i,e,t){const s=(r,n=(r+i/60)%6)=>t-t*e*Math.max(Math.min(n,4-n,1),0);return[s(5),s(3),s(1)]}function at(i,e,t){const s=Ie(i,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)s[r]*=1-e-t,s[r]+=e;return s}function qe(i){const e=i.r/255,t=i.g/255,s=i.b/255,r=Math.max(e,t,s),n=Math.min(e,t,s),o=(r+n)/2;let a,h,_;return r!==n&&(_=r-n,h=o>.5?_/(2-r-n):_/(r+n),a=function(y,v,C,L,H){return y===H?(v-C)/L+(v<C?6:0):v===H?(C-y)/L+2:(y-v)/L+4}(e,t,s,_,r),a=60*a+.5),[0|a,h||0,o]}function Ge(i,e,t,s){return(Array.isArray(e)?i(e[0],e[1],e[2]):i(e,t,s)).map(G)}function Je(i,e,t){return Ge(Ie,i,e,t)}function $e(i){return(i%360+360)%360}function ft(i){const e=Fe.exec(i);let t,s=255;if(!e)return;e[5]!==t&&(s=e[6]?ji(+e[5]):G(+e[5]));const r=$e(+e[2]),n=+e[3]/100,o=+e[4]/100;return t=e[1]==="hwb"?function(a,h,_){return Ge(at,a,h,_)}(r,n,o):e[1]==="hsv"?function(a,h,_){return Ge(Re,a,h,_)}(r,n,o):Je(r,n,o),{r:t[0],g:t[1],b:t[2],a:s}}const pt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},st={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let rt;function Ye(i){rt||(rt=function(){const t={},s=Object.keys(st),r=Object.keys(pt);let n,o,a,h,_;for(n=0;n<s.length;n++){for(h=_=s[n],o=0;o<r.length;o++)a=r[o],_=_.replace(a,pt[a]);a=parseInt(st[h],16),t[_]=[a>>16&255,a>>8&255,255&a]}return t}(),rt.transparent=[0,0,0,0]);const e=rt[i.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Ue=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,nt=i=>i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,Xe=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function tt(i,e,t){if(i){let s=qe(i);s[e]=Math.max(0,Math.min(s[e]+s[e]*t,e===0?360:1)),s=Je(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function yt(i,e){return i&&Object.assign(e||{},i)}function Dt(i){var e={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(e={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(e.a=G(i[3]))):(e=yt(i,{r:0,g:0,b:0,a:1})).a=G(e.a),e}function qt(i){return i.charAt(0)==="r"?function(e){const t=Ue.exec(e);let s,r,n,o=255;if(t){if(t[7]!==s){const a=+t[7];o=t[8]?ji(a):ai(255*a,0,255)}return s=+t[1],r=+t[3],n=+t[5],s=255&(t[2]?ji(s):ai(s,0,255)),r=255&(t[4]?ji(r):ai(r,0,255)),n=255&(t[6]?ji(n):ai(n,0,255)),{r:s,g:r,b:n,a:o}}}(i):ft(i)}class Ht{constructor(e){if(e instanceof Ht)return e;const t=typeof e;let s;var r,n,o;t==="object"?s=Dt(e):t==="string"&&(o=(r=e).length,r[0]==="#"&&(o===4||o===5?n={r:255&17*le[r[1]],g:255&17*le[r[2]],b:255&17*le[r[3]],a:o===5?17*le[r[4]]:255}:o!==7&&o!==9||(n={r:le[r[1]]<<4|le[r[2]],g:le[r[3]]<<4|le[r[4]],b:le[r[5]]<<4|le[r[6]],a:o===9?le[r[7]]<<4|le[r[8]]:255})),s=n||Ye(e)||qt(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=yt(this._rgb);return e&&(e.a=K(e.a)),e}set rgb(e){this._rgb=Dt(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${K(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0;var e}hexString(){return this._valid?we(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=qe(e),s=t[0],r=re(t[1]),n=re(t[2]);return e.a<255?`hsla(${s}, ${r}%, ${n}%, ${K(e.a)})`:`hsl(${s}, ${r}%, ${n}%)`}(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,r=e.rgb;let n;const o=t===n?.5:t,a=2*o-1,h=s.a-r.a,_=((a*h==-1?a:(a+h)/(1+a*h))+1)/2;n=1-_,s.r=255&_*s.r+n*r.r+.5,s.g=255&_*s.g+n*r.g+.5,s.b=255&_*s.b+n*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=function(s,r,n){const o=Xe(K(s.r)),a=Xe(K(s.g)),h=Xe(K(s.b));return{r:G(nt(o+n*(Xe(K(r.r))-o))),g:G(nt(a+n*(Xe(K(r.g))-a))),b:G(nt(h+n*(Xe(K(r.b))-h))),a:s.a+n*(r.a-s.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Ht(this.rgb)}alpha(e){return this._rgb.a=G(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=$i(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return tt(this._rgb,2,e),this}darken(e){return tt(this._rgb,2,-e),this}saturate(e){return tt(this._rgb,1,e),this}desaturate(e){return tt(this._rgb,1,-e),this}rotate(e){return function(t,s){var r=qe(t);r[0]=$e(r[0]+s),r=Je(r),t.r=r[0],t.g=r[1],t.b=r[2]}(this._rgb,e),this}}function $t(i){if(i&&typeof i=="object"){const e=i.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function jt(i){return $t(i)?i:new Ht(i)}function mt(i){return $t(i)?i:new Ht(i).saturate(.5).darken(.1).hexString()}const hi=["x","y","borderWidth","radius","tension"],vi=["color","borderColor","backgroundColor"],Jt=new Map;function Mt(i,e,t){return function(s,r){r=r||{};const n=s+JSON.stringify(r);let o=Jt.get(n);return o||(o=new Intl.NumberFormat(s,r),Jt.set(n,o)),o}(e,t).format(i)}const Ut={values:i=>he(i)?i:""+i,numeric(i,e,t){if(i===0)return"0";const s=this.chart.options.locale;let r,n=i;if(t.length>1){const _=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(_<1e-4||_>1e15)&&(r="scientific"),n=function(y,v){let C=v.length>3?v[2].value-v[1].value:v[1].value-v[0].value;return Math.abs(C)>=1&&y!==Math.floor(y)&&(C=y-Math.floor(y)),C}(i,t)}const o=J(Math.abs(n)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),h={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(h,this.options.ticks.format),Mt(i,s,h)},logarithmic(i,e,t){if(i===0)return"0";const s=t[e].significand||i/Math.pow(10,Math.floor(J(i)));return[1,2,3,5,10,15].includes(s)||e>.8*t.length?Ut.numeric.call(this,i,e,t):""}};var Et={formatters:Ut};const Zt=Object.create(null),Li=Object.create(null);function fi(i,e){if(!e)return i;const t=e.split(".");for(let s=0,r=t.length;s<r;++s){const n=t[s];i=i[n]||(i[n]=Object.create(null))}return i}function ts(i,e,t){return typeof e=="string"?c(fi(i,e),t):c(fi(i,""),e)}class Ts{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>mt(r.backgroundColor),this.hoverBorderColor=(s,r)=>mt(r.borderColor),this.hoverColor=(s,r)=>mt(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return ts(this,e,t)}get(e){return fi(this,e)}describe(e,t){return ts(Li,e,t)}override(e,t){return ts(Zt,e,t)}route(e,t,s,r){const n=fi(this,e),o=fi(this,s),a="_"+t;Object.defineProperties(n,{[a]:{value:n[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[a],_=o[r];return p(h)?Object.assign({},_,h):E(h,_)},set(h){this[a]=h}}})}apply(e){e.forEach(t=>t(this))}}var gt=new Ts({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),i.set("animations",{colors:{type:"color",properties:vi},numbers:{type:"number",properties:hi}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Et.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}]);function is(){return typeof window<"u"&&typeof document<"u"}function ss(i){let e=i.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Pt(i,e,t){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*e.parentNode[t])):s=i,s}const Ui=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function rs(i,e){return Ui(i).getPropertyValue(e)}const Os=["top","right","bottom","left"];function _i(i,e,t){const s={};t=t?"-"+t:"";for(let r=0;r<4;r++){const n=Os[r];s[n]=parseFloat(i[e+"-"+n+t])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Rs=(i,e,t)=>(i>0||e>0)&&(!t||!t.shadowRoot);function li(i,e){if("native"in i)return i;const{canvas:t,currentDevicePixelRatio:s}=e,r=Ui(t),n=r.boxSizing==="border-box",o=_i(r,"padding"),a=_i(r,"border","width"),{x:h,y:_,box:y}=function(P,F){const $=P.touches,te=$&&$.length?$[0]:P,{offsetX:Q,offsetY:Z}=te;let ae,fe,me=!1;if(Rs(Q,Z,P.target))ae=Q,fe=Z;else{const Ce=F.getBoundingClientRect();ae=te.clientX-Ce.left,fe=te.clientY-Ce.top,me=!0}return{x:ae,y:fe,box:me}}(i,t),v=o.left+(y&&a.left),C=o.top+(y&&a.top);let{width:L,height:H}=e;return n&&(L-=o.width+a.width,H-=o.height+a.height),{x:Math.round((h-v)/L*t.width/s),y:Math.round((_-C)/H*t.height/s)}}const bi=i=>Math.round(10*i)/10;function pi(i,e,t,s){const r=Ui(i),n=_i(r,"margin"),o=Pt(r.maxWidth,i,"clientWidth")||Se,a=Pt(r.maxHeight,i,"clientHeight")||Se,h=function(v,C,L){let H,P;if(C===void 0||L===void 0){const F=v&&ss(v);if(F){const $=F.getBoundingClientRect(),te=Ui(F),Q=_i(te,"border","width"),Z=_i(te,"padding");C=$.width-Z.width-Q.width,L=$.height-Z.height-Q.height,H=Pt(te.maxWidth,F,"clientWidth"),P=Pt(te.maxHeight,F,"clientHeight")}else C=v.clientWidth,L=v.clientHeight}return{width:C,height:L,maxWidth:H||Se,maxHeight:P||Se}}(i,e,t);let{width:_,height:y}=h;if(r.boxSizing==="content-box"){const v=_i(r,"border","width"),C=_i(r,"padding");_-=C.width+v.width,y-=C.height+v.height}return _=Math.max(0,_-n.width),y=Math.max(0,s?_/s:y-n.height),_=bi(Math.min(_,o,h.maxWidth)),y=bi(Math.min(y,a,h.maxHeight)),_&&!y&&(y=bi(_/2)),(e!==void 0||t!==void 0)&&s&&h.height&&y>h.height&&(y=h.height,_=bi(Math.floor(y*s))),{width:_,height:y}}function Ti(i,e,t){const s=e||1,r=Math.floor(i.height*s),n=Math.floor(i.width*s);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const o=i.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),(i.currentDevicePixelRatio!==s||o.height!==r||o.width!==n)&&(i.currentDevicePixelRatio=s,o.height=r,o.width=n,i.ctx.setTransform(s,0,0,s,0,0),!0)}const ns=function(){let i=!1;try{const e={get passive(){return i=!0,!1}};is()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return i}();function os(i,e){const t=rs(i,e),s=t&&t.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function as(i){return!i||Be(i.size)||Be(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function yi(i,e,t,s,r){let n=e[r];return n||(n=e[r]=i.measureText(r).width,t.push(r)),n>s&&(s=n),s}function hs(i,e,t,s){let r=(s=s||{}).data=s.data||{},n=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(r=s.data={},n=s.garbageCollect=[],s.font=e),i.save(),i.font=e;let o=0;const a=t.length;let h,_,y,v,C;for(h=0;h<a;h++)if(v=t[h],v==null||he(v)){if(he(v))for(_=0,y=v.length;_<y;_++)C=v[_],C==null||he(C)||(o=yi(i,r,n,o,C))}else o=yi(i,r,n,o,v);i.restore();const L=n.length/2;if(L>t.length){for(h=0;h<L;h++)delete r[n[h]];n.splice(0,L)}return o}function Qt(i,e,t){const s=i.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*s)/s+r}function Si(i,e){(e||i)&&((e=e||i.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,i.width,i.height),e.restore())}function Vi(i,e,t,s){qi(i,e,t,s,null)}function qi(i,e,t,s,r){let n,o,a,h,_,y,v,C;const L=e.pointStyle,H=e.rotation,P=e.radius;let F=(H||0)*ge;if(L&&typeof L=="object"&&(n=L.toString(),n==="[object HTMLImageElement]"||n==="[object HTMLCanvasElement]"))return i.save(),i.translate(t,s),i.rotate(F),i.drawImage(L,-L.width/2,-L.height/2,L.width,L.height),void i.restore();if(!(isNaN(P)||P<=0)){switch(i.beginPath(),L){default:r?i.ellipse(t,s,r/2,P,0,0,ce):i.arc(t,s,P,0,ce),i.closePath();break;case"triangle":y=r?r/2:P,i.moveTo(t+Math.sin(F)*y,s-Math.cos(F)*P),F+=U,i.lineTo(t+Math.sin(F)*y,s-Math.cos(F)*P),F+=U,i.lineTo(t+Math.sin(F)*y,s-Math.cos(F)*P),i.closePath();break;case"rectRounded":_=.516*P,h=P-_,o=Math.cos(F+z)*h,v=Math.cos(F+z)*(r?r/2-_:h),a=Math.sin(F+z)*h,C=Math.sin(F+z)*(r?r/2-_:h),i.arc(t-v,s-a,_,F-se,F-B),i.arc(t+C,s-o,_,F-B,F),i.arc(t+v,s+a,_,F,F+B),i.arc(t-C,s+o,_,F+B,F+se),i.closePath();break;case"rect":if(!H){h=Math.SQRT1_2*P,y=r?r/2:h,i.rect(t-y,s-h,2*y,2*h);break}F+=z;case"rectRot":v=Math.cos(F)*(r?r/2:P),o=Math.cos(F)*P,a=Math.sin(F)*P,C=Math.sin(F)*(r?r/2:P),i.moveTo(t-v,s-a),i.lineTo(t+C,s-o),i.lineTo(t+v,s+a),i.lineTo(t-C,s+o),i.closePath();break;case"crossRot":F+=z;case"cross":v=Math.cos(F)*(r?r/2:P),o=Math.cos(F)*P,a=Math.sin(F)*P,C=Math.sin(F)*(r?r/2:P),i.moveTo(t-v,s-a),i.lineTo(t+v,s+a),i.moveTo(t+C,s-o),i.lineTo(t-C,s+o);break;case"star":v=Math.cos(F)*(r?r/2:P),o=Math.cos(F)*P,a=Math.sin(F)*P,C=Math.sin(F)*(r?r/2:P),i.moveTo(t-v,s-a),i.lineTo(t+v,s+a),i.moveTo(t+C,s-o),i.lineTo(t-C,s+o),F+=z,v=Math.cos(F)*(r?r/2:P),o=Math.cos(F)*P,a=Math.sin(F)*P,C=Math.sin(F)*(r?r/2:P),i.moveTo(t-v,s-a),i.lineTo(t+v,s+a),i.moveTo(t+C,s-o),i.lineTo(t-C,s+o);break;case"line":o=r?r/2:Math.cos(F)*P,a=Math.sin(F)*P,i.moveTo(t-o,s-a),i.lineTo(t+o,s+a);break;case"dash":i.moveTo(t,s),i.lineTo(t+Math.cos(F)*(r?r/2:P),s+Math.sin(F)*P);break;case!1:i.closePath()}i.fill(),e.borderWidth>0&&i.stroke()}}function vt(i,e,t){return t=t||.5,!e||i&&i.x>e.left-t&&i.x<e.right+t&&i.y>e.top-t&&i.y<e.bottom+t}function Oi(i,e){i.save(),i.beginPath(),i.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),i.clip()}function bs(i){i.restore()}function Ks(i,e,t,s,r){if(!e)return i.lineTo(t.x,t.y);if(r==="middle"){const n=(e.x+t.x)/2;i.lineTo(n,e.y),i.lineTo(n,t.y)}else r==="after"!=!!s?i.lineTo(e.x,t.y):i.lineTo(t.x,e.y);i.lineTo(t.x,t.y)}function Ys(i,e,t,s){if(!e)return i.lineTo(t.x,t.y);i.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?t.cp2x:t.cp1x,s?t.cp2y:t.cp1y,t.x,t.y)}function Qr(i,e,t,s,r){if(r.strikethrough||r.underline){const n=i.measureText(s),o=e-n.actualBoundingBoxLeft,a=e+n.actualBoundingBoxRight,h=t-n.actualBoundingBoxAscent,_=t+n.actualBoundingBoxDescent,y=r.strikethrough?(h+_)/2:_;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(o,y),i.lineTo(a,y),i.stroke()}}function en(i,e){const t=i.fillStyle;i.fillStyle=e.color,i.fillRect(e.left,e.top,e.width,e.height),i.fillStyle=t}function Ri(i,e,t,s,r,n={}){const o=he(e)?e:[e],a=n.strokeWidth>0&&n.strokeColor!=="";let h,_;for(i.save(),i.font=r.string,function(y,v){v.translation&&y.translate(v.translation[0],v.translation[1]),Be(v.rotation)||y.rotate(v.rotation),v.color&&(y.fillStyle=v.color),v.textAlign&&(y.textAlign=v.textAlign),v.textBaseline&&(y.textBaseline=v.textBaseline)}(i,n),h=0;h<o.length;++h)_=o[h],n.backdrop&&en(i,n.backdrop),a&&(n.strokeColor&&(i.strokeStyle=n.strokeColor),Be(n.strokeWidth)||(i.lineWidth=n.strokeWidth),i.strokeText(_,t,s,n.maxWidth)),i.fillText(_,t,s,n.maxWidth),Qr(i,t,s,_,n),s+=Number(r.lineHeight);i.restore()}function ls(i,e){const{x:t,y:s,w:r,h:n,radius:o}=e;i.arc(t+o.topLeft,s+o.topLeft,o.topLeft,1.5*se,se,!0),i.lineTo(t,s+n-o.bottomLeft),i.arc(t+o.bottomLeft,s+n-o.bottomLeft,o.bottomLeft,se,B,!0),i.lineTo(t+r-o.bottomRight,s+n),i.arc(t+r-o.bottomRight,s+n-o.bottomRight,o.bottomRight,B,0,!0),i.lineTo(t+r,s+o.topRight),i.arc(t+r-o.topRight,s+o.topRight,o.topRight,0,-B,!0),i.lineTo(t+o.topLeft,s)}function Ps(i,e=[""],t,s,r=()=>i[0]){const n=t||i;s===void 0&&(s=Xs("_fallback",i));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:n,_fallback:s,_getTarget:r,override:a=>Ps([a,...i],e,n,s)};return new Proxy(o,{deleteProperty:(a,h)=>(delete a[h],delete a._keys,delete i[0][h],!0),get:(a,h)=>gr(a,h,()=>function(_,y,v,C){let L;for(const H of y)if(L=Xs(pr(H,_),v),L!==void 0)return ys(_,L)?Is(v,C,_,L):L}(h,e,i,a)),getOwnPropertyDescriptor:(a,h)=>Reflect.getOwnPropertyDescriptor(a._scopes[0],h),getPrototypeOf:()=>Reflect.getPrototypeOf(i[0]),has:(a,h)=>Gs(a).includes(h),ownKeys:a=>Gs(a),set(a,h,_){const y=a._storage||(a._storage=r());return a[h]=y[h]=_,delete a._keys,!0}})}function Ki(i,e,t,s){const r={_cacheable:!1,_proxy:i,_context:e,_subProxy:t,_stack:new Set,_descriptors:Bs(i,s),setContext:n=>Ki(i,n,t,s),override:n=>Ki(i.override(n),e,t,s)};return new Proxy(r,{deleteProperty:(n,o)=>(delete n[o],delete i[o],!0),get:(n,o,a)=>gr(n,o,()=>function(h,_,y){const{_proxy:v,_context:C,_subProxy:L,_descriptors:H}=h;let P=v[_];return j(P)&&H.isScriptable(_)&&(P=function(F,$,te,Q){const{_proxy:Z,_context:ae,_subProxy:fe,_stack:me}=te;if(me.has(F))throw new Error("Recursion detected: "+Array.from(me).join("->")+"->"+F);me.add(F);let Ce=$(ae,fe||Q);return me.delete(F),ys(F,Ce)&&(Ce=Is(Z._scopes,Z,F,Ce)),Ce}(_,P,h,y)),he(P)&&P.length&&(P=function(F,$,te,Q){const{_proxy:Z,_context:ae,_subProxy:fe,_descriptors:me}=te;if(ae.index!==void 0&&Q(F))return $[ae.index%$.length];if(p($[0])){const Ce=$,Ae=Z._scopes.filter(De=>De!==Ce);$=[];for(const De of Ce){const He=Is(Ae,Z,F,De);$.push(Ki(He,ae,fe&&fe[F],me))}}return $}(_,P,h,H.isIndexable)),ys(_,P)&&(P=Ki(P,C,L&&L[_],H)),P}(n,o,a)),getOwnPropertyDescriptor:(n,o)=>n._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o),getPrototypeOf:()=>Reflect.getPrototypeOf(i),has:(n,o)=>Reflect.has(i,o),ownKeys:()=>Reflect.ownKeys(i),set:(n,o,a)=>(i[o]=a,delete n[o],!0)})}function Bs(i,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=i;return{allKeys:r,scriptable:t,indexable:s,isScriptable:j(t)?t:()=>t,isIndexable:j(s)?s:()=>s}}const pr=(i,e)=>i?i+I(e):e,ys=(i,e)=>p(e)&&i!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function gr(i,e,t){if(Object.prototype.hasOwnProperty.call(i,e)||e==="constructor")return i[e];const s=t();return i[e]=s,s}function mr(i,e,t){return j(i)?i(e,t):i}const Yi=(i,e)=>i===!0?e:typeof i=="string"?w(e,i):void 0;function wi(i,e,t,s,r){for(const n of e){const o=Yi(t,n);if(o){i.add(o);const a=mr(o._fallback,t,r);if(a!==void 0&&a!==t&&a!==s)return a}else if(o===!1&&s!==void 0&&t!==s)return null}return!1}function Is(i,e,t,s){const r=e._rootScopes,n=mr(e._fallback,t,s),o=[...i,...r],a=new Set;a.add(s);let h=vr(a,o,t,n||t,s);return h!==null&&(n===void 0||n===t||(h=vr(a,o,n,h,s),h!==null))&&Ps(Array.from(a),[""],r,n,()=>function(_,y,v){const C=_._getTarget();y in C||(C[y]={});const L=C[y];return he(L)&&p(v)?v:L||{}}(e,t,s))}function vr(i,e,t,s,r){for(;t;)t=wi(i,e,t,s,r);return t}function Xs(i,e){for(const t of e){if(!t)continue;const s=t[i];if(s!==void 0)return s}}function Gs(i){let e=i._keys;return e||(e=i._keys=function(t){const s=new Set;for(const r of t)for(const n of Object.keys(r).filter(o=>!o.startsWith("_")))s.add(n);return Array.from(s)}(i._scopes)),e}function Hs(i,e,t,s){const{iScale:r}=i,{key:n="r"}=this._parsing,o=new Array(s);let a,h,_,y;for(a=0,h=s;a<h;++a)_=a+t,y=e[_],o[a]={r:r.parse(w(y,n),_)};return o}const br=Number.EPSILON||1e-14,cs=(i,e)=>e<i.length&&!i[e].skip&&i[e],yr=i=>i==="x"?"y":"x";function Sr(i,e,t,s){const r=i.skip?e:i,n=e,o=t.skip?e:t,a=ct(n,r),h=ct(o,n);let _=a/(a+h),y=h/(a+h);_=isNaN(_)?0:_,y=isNaN(y)?0:y;const v=s*_,C=s*y;return{previous:{x:n.x-v*(o.x-r.x),y:n.y-v*(o.y-r.y)},next:{x:n.x+C*(o.x-r.x),y:n.y+C*(o.y-r.y)}}}function Js(i,e="x"){const t=yr(e),s=i.length,r=Array(s).fill(0),n=Array(s);let o,a,h,_=cs(i,0);for(o=0;o<s;++o)if(a=h,h=_,_=cs(i,o+1),h){if(_){const y=_[e]-h[e];r[o]=y!==0?(_[t]-h[t])/y:0}n[o]=a?_?X(r[o-1])!==X(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}(function(y,v,C){const L=y.length;let H,P,F,$,te,Q=cs(y,0);for(let Z=0;Z<L-1;++Z)te=Q,Q=cs(y,Z+1),te&&Q&&(be(v[Z],0,br)?C[Z]=C[Z+1]=0:(H=C[Z]/v[Z],P=C[Z+1]/v[Z],$=Math.pow(H,2)+Math.pow(P,2),$<=9||(F=3/Math.sqrt($),C[Z]=H*F*v[Z],C[Z+1]=P*F*v[Z])))})(i,r,n),function(y,v,C="x"){const L=yr(C),H=y.length;let P,F,$,te=cs(y,0);for(let Q=0;Q<H;++Q){if(F=$,$=te,te=cs(y,Q+1),!$)continue;const Z=$[C],ae=$[L];F&&(P=(Z-F[C])/3,$[`cp1${C}`]=Z-P,$[`cp1${L}`]=ae-P*v[Q]),te&&(P=(te[C]-Z)/3,$[`cp2${C}`]=Z+P,$[`cp2${L}`]=ae+P*v[Q])}}(i,n,e)}function Ss(i,e,t){return Math.max(Math.min(i,t),e)}function wr(i,e,t,s,r){let n,o,a,h;if(e.spanGaps&&(i=i.filter(_=>!_.skip)),e.cubicInterpolationMode==="monotone")Js(i,r);else{let _=s?i[i.length-1]:i[0];for(n=0,o=i.length;n<o;++n)a=i[n],h=Sr(_,a,i[Math.min(n+1,o-(s?0:1))%o],e.tension),a.cp1x=h.previous.x,a.cp1y=h.previous.y,a.cp2x=h.next.x,a.cp2y=h.next.y,_=a}e.capBezierPoints&&function(_,y){let v,C,L,H,P,F=vt(_[0],y);for(v=0,C=_.length;v<C;++v)P=H,H=F,F=v<C-1&&vt(_[v+1],y),H&&(L=_[v],P&&(L.cp1x=Ss(L.cp1x,y.left,y.right),L.cp1y=Ss(L.cp1y,y.top,y.bottom)),F&&(L.cp2x=Ss(L.cp2x,y.left,y.right),L.cp2y=Ss(L.cp2y,y.top,y.bottom)))}(i,t)}const Fs=i=>i===0||i===1,xr=(i,e,t)=>-Math.pow(2,10*(i-=1))*Math.sin((i-e)*ce/t),Cr=(i,e,t)=>Math.pow(2,-10*i)*Math.sin((i-e)*ce/t)+1,ds={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>1-Math.cos(i*B),easeOutSine:i=>Math.sin(i*B),easeInOutSine:i=>-.5*(Math.cos(se*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>Fs(i)?i:i<.5?.5*Math.pow(2,10*(2*i-1)):.5*(2-Math.pow(2,-10*(2*i-1))),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Fs(i)?i:xr(i,.075,.3),easeOutElastic:i=>Fs(i)?i:Cr(i,.075,.3),easeInOutElastic(i){return Fs(i)?i:i<.5?.5*xr(2*i,.1125,.45):.5+.5*Cr(2*i-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let e=1.70158;return(i/=.5)<1?i*i*((1+(e*=1.525))*i-e)*.5:.5*((i-=2)*i*((1+(e*=1.525))*i+e)+2)},easeInBounce:i=>1-ds.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?.5*ds.easeInBounce(2*i):.5*ds.easeOutBounce(2*i-1)+.5};function Nt(i,e,t,s){return{x:i.x+t*(e.x-i.x),y:i.y+t*(e.y-i.y)}}function Zs(i,e,t,s){return{x:i.x+t*(e.x-i.x),y:s==="middle"?t<.5?i.y:e.y:s==="after"?t<1?i.y:e.y:t>0?e.y:i.y}}function Er(i,e,t,s){const r={x:i.cp2x,y:i.cp2y},n={x:e.cp1x,y:e.cp1y},o=Nt(i,r,t),a=Nt(r,n,t),h=Nt(n,e,t),_=Nt(o,a,t),y=Nt(a,h,t);return Nt(_,y,t)}const tn=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,sn=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function kr(i,e){const t=(""+i).match(tn);if(!t||t[1]==="normal")return 1.2*e;switch(i=+t[2],t[3]){case"px":return i;case"%":i/=100}return e*i}const rn=i=>+i||0;function Ns(i,e){const t={},s=p(e),r=s?Object.keys(e):e,n=p(i)?s?o=>E(i[o],i[e[o]]):o=>i[o]:()=>i;for(const o of r)t[o]=rn(n(o));return t}function Qs(i){return Ns(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Pi(i){return Ns(i,["topLeft","topRight","bottomLeft","bottomRight"])}function At(i){const e=Qs(i);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function wt(i,e){i=i||{},e=e||gt.font;let t=E(i.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let s=E(i.style,e.style);s&&!(""+s).match(sn)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:E(i.family,e.family),lineHeight:kr(E(i.lineHeight,e.lineHeight),t),size:t,style:s,weight:E(i.weight,e.weight),string:""};return r.string=as(r),r}function Xi(i,e,t,s){let r,n,o,a=!0;for(r=0,n=i.length;r<n;++r)if(o=i[r],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e),a=!1),t!==void 0&&he(o)&&(o=o[t%o.length],a=!1),o!==void 0))return s&&!a&&(s.cacheable=!1),o}function er(i,e,t){const{min:s,max:r}=i,n=k(e,(r-s)/2),o=(a,h)=>t&&a===0?0:a+h;return{min:o(s,-Math.abs(n)),max:o(r,n)}}function Kt(i,e){return Object.assign(Object.create(i),e)}function xi(i,e,t){return i?function(s,r){return{x:n=>s+s+r-n,setWidth(n){r=n},textAlign:n=>n==="center"?n:n==="right"?"left":"right",xPlus:(n,o)=>n-o,leftForLtr:(n,o)=>n-o}}(e,t):{x:s=>s,setWidth(s){},textAlign:s=>s,xPlus:(s,r)=>s+r,leftForLtr:(s,r)=>s}}function tr(i,e){let t,s;e!=="ltr"&&e!=="rtl"||(t=i.canvas.style,s=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),i.prevTextDirection=s)}function ir(i,e){e!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",e[0],e[1]))}function Dr(i){return i==="angle"?{between:ze,compare:ht,normalize:Qe}:{between:Ot,compare:(e,t)=>e-t,normalize:e=>e}}function Bi({start:i,end:e,count:t,loop:s,style:r}){return{start:i%t,end:e%t,loop:s&&(e-i+1)%t==0,style:r}}function sr(i,e,t){if(!t)return[i];const{property:s,start:r,end:n}=t,o=e.length,{compare:a,between:h,normalize:_}=Dr(s),{start:y,end:v,loop:C,style:L}=function(fe,me,Ce){const{property:Ae,start:De,end:He}=Ce,{between:Pe,normalize:Me}=Dr(Ae),Te=me.length;let Le,Ve,{start:_t,end:lt,loop:zt}=fe;if(zt){for(_t+=Te,lt+=Te,Le=0,Ve=Te;Le<Ve&&Pe(Me(me[_t%Te][Ae]),De,He);++Le)_t--,lt--;_t%=Te,lt%=Te}return lt<_t&&(lt+=Te),{start:_t,end:lt,loop:zt,style:fe.style}}(i,e,t),H=[];let P,F,$,te=!1,Q=null;const Z=()=>te||h(r,$,P)&&a(r,$)!==0,ae=()=>!te||a(n,P)===0||h(n,$,P);for(let fe=y,me=y;fe<=v;++fe)F=e[fe%o],F.skip||(P=_(F[s]),P!==$&&(te=h(P,r,n),Q===null&&Z()&&(Q=a(P,r)===0?fe:me),Q!==null&&ae()&&(H.push(Bi({start:Q,end:fe,loop:C,count:o,style:L})),Q=null),me=fe,$=P));return Q!==null&&H.push(Bi({start:Q,end:v,loop:C,count:o,style:L})),H}function rr(i,e){const t=[],s=i.segments;for(let r=0;r<s.length;r++){const n=sr(s[r],i.points,e);n.length&&t.push(...n)}return t}function ws(i,e){const t=i.points,s=i.options.spanGaps,r=t.length;if(!r)return[];const n=!!i._loop,{start:o,end:a}=function(h,_,y,v){let C=0,L=_-1;if(y&&!v)for(;C<_&&!h[C].skip;)C++;for(;C<_&&h[C].skip;)C++;for(C%=_,y&&(L+=C);L>C&&h[L%_].skip;)L--;return L%=_,{start:C,end:L}}(t,r,n,s);return s===!0?Ws(i,[{start:o,end:a,loop:n}],t,e):Ws(i,function(h,_,y,v){const C=h.length,L=[];let H,P=_,F=h[_];for(H=_+1;H<=y;++H){const $=h[H%C];$.skip||$.stop?F.skip||(v=!1,L.push({start:_%C,end:(H-1)%C,loop:v}),_=P=$.stop?H:null):(P=H,F.skip&&(_=H)),F=$}return P!==null&&L.push({start:_%C,end:P%C,loop:v}),L}(t,o,a<o?a+r:a,!!i._fullLoop&&o===0&&a===r-1),t,e)}function Ws(i,e,t,s){return s&&s.setContext&&t?function(r,n,o,a){const h=r._chart.getContext(),_=Mr(r.options),{_datasetIndex:y,options:{spanGaps:v}}=r,C=o.length,L=[];let H=_,P=n[0].start,F=P;function $(te,Q,Z,ae){const fe=v?-1:1;if(te!==Q){for(te+=C;o[te%C].skip;)te-=fe;for(;o[Q%C].skip;)Q+=fe;te%C!=Q%C&&(L.push({start:te%C,end:Q%C,loop:Z,style:ae}),H=ae,P=Q%C)}}for(const te of n){P=v?P:te.start;let Q,Z=o[P%C];for(F=P+1;F<=te.end;F++){const ae=o[F%C];Q=Mr(a.setContext(Kt(h,{type:"segment",p0:Z,p1:ae,p0DataIndex:(F-1)%C,p1DataIndex:F%C,datasetIndex:y}))),Ar(Q,H)&&$(P,F-1,te.loop,H),Z=ae,H=Q}P<F-1&&$(P,F-1,te.loop,H)}return L}(i,e,t,s):e}function Mr(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function Ar(i,e){if(!e)return!1;const t=[],s=function(r,n){return $t(n)?(t.includes(n)||t.push(n),t.indexOf(n)):n};return JSON.stringify(i,s)!==JSON.stringify(e,s)}var nn=Object.freeze({__proto__:null,HALF_PI:B,INFINITY:Se,PI:se,PITAU:ve,QUARTER_PI:z,RAD_PER_DEG:ge,TAU:ce,TWO_THIRDS_PI:U,_addGrace:er,_alignPixel:Qt,_alignStartEnd:ut,_angleBetween:ze,_angleDiff:ht,_arrayUnique:bt,_attachContext:Ki,_bezierCurveTo:Ys,_bezierInterpolation:Er,_boundSegment:sr,_boundSegments:rr,_capitalize:I,_computeSegments:ws,_createResolver:Ps,_decimalPlaces:ye,_deprecated:function(i,e,t,s){e!==void 0&&console.warn(i+': "'+t+'" is deprecated. Please use "'+s+'" instead')},_descriptors:Bs,_elementsEqual:S,_factorize:We,_filterBetween:Xt,_getParentNode:ss,_getStartAndCountOfVisiblePoints:Ai,_int16Range:Ft,_isBetween:Ot,_isClickEvent:W,_isDomSupported:is,_isPointInArea:vt,_limitValue:ot,_longestText:hs,_lookup:Yt,_lookupByKey:Bt,_measureText:yi,_merger:l,_mergerIf:M,_normalizeAngle:Qe,_parseObjectDataRadialScale:Hs,_pointInLine:Nt,_readValueToProps:Ns,_rlookupByKey:Rt,_scaleRangesChanged:es,_setMinAndMaxByKey:ne,_splitKey:R,_steppedInterpolation:Zs,_steppedLineTo:Ks,_textX:vs,_toLeftRightCenter:et,_updateBezierControlPoints:wr,addRoundedRectPath:ls,almostEquals:be,almostWhole:N,callback:D,clearCanvas:Si,clipArea:Oi,clone:d,color:jt,createContext:Kt,debounce:Wt,defined:V,distanceBetweenPoints:ct,drawPoint:Vi,drawPointLegend:qi,each:T,easingEffects:ds,finiteOrDefault:x,fontString:function(i,e,t){return e+" "+i+"px "+t},formatNumber:Mt,getAngleFromPoint:Ke,getHoverColor:mt,getMaximumSize:pi,getRelativePosition:li,getRtlAdapter:xi,getStyle:rs,isArray:he,isFinite:g,isFunction:j,isNullOrUndef:Be,isNumber:ie,isObject:p,isPatternOrGradient:$t,listenArrayEvents:ni,log10:J,merge:c,mergeIf:b,niceNum:Ne,noop:je,overrideTextDirection:tr,readUsedSize:os,renderText:Ri,requestAnimFrame:oi,resolve:Xi,resolveObjectKey:w,restoreTextDirection:ir,retinaScale:Ti,setsEqual:ee,sign:X,splineCurve:Sr,splineCurveMonotone:Js,supportsEventListenerOptions:ns,throttled:kt,toDegrees:oe,toDimension:k,toFont:wt,toFontString:as,toLineHeight:kr,toPadding:At,toPercentage:m,toRadians:ue,toTRBL:Qs,toTRBLCorners:Pi,uid:dt,unclipArea:bs,unlistenArrayEvents:Gt,valueOrDefault:E});function us(i,e,t,s){const{controller:r,data:n,_sorted:o}=i,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&n.length){const h=a._reversePixels?Rt:Bt;if(!s)return h(n,e,t);if(r._sharedOptions){const _=n[0],y=typeof _.getRange=="function"&&_.getRange(e);if(y){const v=h(n,e,t-y),C=h(n,e,t+y);return{lo:v.lo,hi:C.hi}}}}return{lo:0,hi:n.length-1}}function Gi(i,e,t,s,r){const n=i.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,h=n.length;a<h;++a){const{index:_,data:y}=n[a],{lo:v,hi:C}=us(n[a],e,o,r);for(let L=v;L<=C;++L){const H=y[L];H.skip||s(H,_,L)}}}function zs(i,e,t,s,r){const n=[];return!r&&!i.isPointInArea(e)||Gi(i,t,e,function(o,a,h){(r||vt(o,i.chartArea,0))&&o.inRange(e.x,e.y,s)&&n.push({element:o,datasetIndex:a,index:h})},!0),n}function on(i,e,t,s,r,n){let o=[];const a=function(_){const y=_.indexOf("x")!==-1,v=_.indexOf("y")!==-1;return function(C,L){const H=y?Math.abs(C.x-L.x):0,P=v?Math.abs(C.y-L.y):0;return Math.sqrt(Math.pow(H,2)+Math.pow(P,2))}}(t);let h=Number.POSITIVE_INFINITY;return Gi(i,t,e,function(_,y,v){const C=_.inRange(e.x,e.y,r);if(s&&!C)return;const L=_.getCenterPoint(r);if(!(n||i.isPointInArea(L))&&!C)return;const H=a(e,L);H<h?(o=[{element:_,datasetIndex:y,index:v}],h=H):H===h&&o.push({element:_,datasetIndex:y,index:v})}),o}function nr(i,e,t,s,r,n){return n||i.isPointInArea(e)?t!=="r"||s?on(i,e,t,s,r,n):function(o,a,h,_){let y=[];return Gi(o,h,a,function(v,C,L){const{startAngle:H,endAngle:P}=v.getProps(["startAngle","endAngle"],_),{angle:F}=Ke(v,{x:a.x,y:a.y});ze(F,H,P)&&y.push({element:v,datasetIndex:C,index:L})}),y}(i,e,t,r):[]}function Lr(i,e,t,s,r){const n=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Gi(i,t,e,(h,_,y)=>{h[o](e[t],r)&&(n.push({element:h,datasetIndex:_,index:y}),a=a||h.inRange(e.x,e.y,r))}),s&&!a?[]:n}var fs={evaluateInteractionItems:Gi,modes:{index(i,e,t,s){const r=li(e,i),n=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?zs(i,r,n,s,o):nr(i,r,n,!1,s,o),h=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(_=>{const y=a[0].index,v=_.data[y];v&&!v.skip&&h.push({element:v,datasetIndex:_.index,index:y})}),h):[]},dataset(i,e,t,s){const r=li(e,i),n=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?zs(i,r,n,s,o):nr(i,r,n,!1,s,o);if(a.length>0){const h=a[0].datasetIndex,_=i.getDatasetMeta(h).data;a=[];for(let y=0;y<_.length;++y)a.push({element:_[y],datasetIndex:h,index:y})}return a},point:(i,e,t,s)=>zs(i,li(e,i),t.axis||"xy",s,t.includeInvisible||!1),nearest(i,e,t,s){const r=li(e,i),n=t.axis||"xy",o=t.includeInvisible||!1;return nr(i,r,n,t.intersect,s,o)},x:(i,e,t,s)=>Lr(i,li(e,i),"x",t.intersect,s),y:(i,e,t,s)=>Lr(i,li(e,i),"y",t.intersect,s)}};const Ii=["left","top","right","bottom"];function xs(i,e){return i.filter(t=>t.pos===e)}function Tr(i,e){return i.filter(t=>Ii.indexOf(t.pos)===-1&&t.box.axis===e)}function Cs(i,e){return i.sort((t,s)=>{const r=e?s:t,n=e?t:s;return r.weight===n.weight?r.index-n.index:r.weight-n.weight})}function an(i,e){const t=function(h){const _={};for(const y of h){const{stack:v,pos:C,stackWeight:L}=y;if(!v||!Ii.includes(C))continue;const H=_[v]||(_[v]={count:0,placed:0,weight:0,size:0});H.count++,H.weight+=L}return _}(i),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let n,o,a;for(n=0,o=i.length;n<o;++n){a=i[n];const{fullSize:h}=a.box,_=t[a.stack],y=_&&a.stackWeight/_.weight;a.horizontal?(a.width=y?y*s:h&&e.availableWidth,a.height=r):(a.width=s,a.height=y?y*r:h&&e.availableHeight)}return t}function Or(i,e,t,s){return Math.max(i[t],e[t])+Math.max(i[s],e[s])}function Rr(i,e){i.top=Math.max(i.top,e.top),i.left=Math.max(i.left,e.left),i.bottom=Math.max(i.bottom,e.bottom),i.right=Math.max(i.right,e.right)}function hn(i,e,t,s){const{pos:r,box:n}=t,o=i.maxPadding;if(!p(r)){t.size&&(i[r]-=t.size);const v=s[t.stack]||{size:0,count:1};v.size=Math.max(v.size,t.horizontal?n.height:n.width),t.size=v.size/v.count,i[r]+=t.size}n.getPadding&&Rr(o,n.getPadding());const a=Math.max(0,e.outerWidth-Or(o,i,"left","right")),h=Math.max(0,e.outerHeight-Or(o,i,"top","bottom")),_=a!==i.w,y=h!==i.h;return i.w=a,i.h=h,t.horizontal?{same:_,other:y}:{same:y,other:_}}function ln(i,e){const t=e.maxPadding;function s(r){const n={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{n[o]=Math.max(e[o],t[o])}),n}return s(i?["left","right"]:["top","bottom"])}function _s(i,e,t,s){const r=[];let n,o,a,h,_,y;for(n=0,o=i.length,_=0;n<o;++n){a=i[n],h=a.box,h.update(a.width||e.w,a.height||e.h,ln(a.horizontal,e));const{same:v,other:C}=hn(e,t,a,s);_|=v&&r.length,y=y||C,h.fullSize||r.push(a)}return _&&_s(r,e,t,s)||y}function $s(i,e,t,s,r){i.top=t,i.left=e,i.right=e+s,i.bottom=t+r,i.width=s,i.height=r}function or(i,e,t,s){const r=t.padding;let{x:n,y:o}=e;for(const a of i){const h=a.box,_=s[a.stack]||{count:1,placed:0,weight:1},y=a.stackWeight/_.weight||1;if(a.horizontal){const v=e.w*y,C=_.size||h.height;V(_.start)&&(o=_.start),h.fullSize?$s(h,r.left,o,t.outerWidth-r.right-r.left,C):$s(h,e.left+_.placed,o,v,C),_.start=o,_.placed+=v,o=h.bottom}else{const v=e.h*y,C=_.size||h.width;V(_.start)&&(n=_.start),h.fullSize?$s(h,n,r.top,C,t.outerHeight-r.bottom-r.top):$s(h,n,e.top+_.placed,C,v),_.start=n,_.placed+=v,n=h.right}}e.x=n,e.y=o}var Lt={addBox(i,e){i.boxes||(i.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},i.boxes.push(e)},removeBox(i,e){const t=i.boxes?i.boxes.indexOf(e):-1;t!==-1&&i.boxes.splice(t,1)},configure(i,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(i,e,t,s){if(!i)return;const r=At(i.options.layout.padding),n=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=function(P){const F=function(Ce){const Ae=[];let De,He,Pe,Me,Te,Le;for(De=0,He=(Ce||[]).length;De<He;++De)Pe=Ce[De],{position:Me,options:{stack:Te,stackWeight:Le=1}}=Pe,Ae.push({index:De,box:Pe,pos:Me,horizontal:Pe.isHorizontal(),weight:Pe.weight,stack:Te&&Me+Te,stackWeight:Le});return Ae}(P),$=Cs(F.filter(Ce=>Ce.box.fullSize),!0),te=Cs(xs(F,"left"),!0),Q=Cs(xs(F,"right")),Z=Cs(xs(F,"top"),!0),ae=Cs(xs(F,"bottom")),fe=Tr(F,"x"),me=Tr(F,"y");return{fullSize:$,leftAndTop:te.concat(Z),rightAndBottom:Q.concat(me).concat(ae).concat(fe),chartArea:xs(F,"chartArea"),vertical:te.concat(Q).concat(me),horizontal:Z.concat(ae).concat(fe)}}(i.boxes),h=a.vertical,_=a.horizontal;T(i.boxes,P=>{typeof P.beforeLayout=="function"&&P.beforeLayout()});const y=h.reduce((P,F)=>F.box.options&&F.box.options.display===!1?P:P+1,0)||1,v=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:n,availableHeight:o,vBoxMaxWidth:n/2/y,hBoxMaxHeight:o/2}),C=Object.assign({},r);Rr(C,At(s));const L=Object.assign({maxPadding:C,w:n,h:o,x:r.left,y:r.top},r),H=an(h.concat(_),v);_s(a.fullSize,L,v,H),_s(h,L,v,H),_s(_,L,v,H)&&_s(h,L,v,H),function(P){const F=P.maxPadding;function $(te){const Q=Math.max(F[te]-P[te],0);return P[te]+=Q,Q}P.y+=$("top"),P.x+=$("left"),$("right"),$("bottom")}(L),or(a.leftAndTop,L,v,H),L.x+=L.w,L.y+=L.h,or(a.rightAndBottom,L,v,H),i.chartArea={left:L.left,top:L.top,right:L.left+L.w,bottom:L.top+L.h,height:L.h,width:L.w},T(a.chartArea,P=>{const F=P.box;Object.assign(F,i.chartArea),F.update(L.w,L.h,{left:0,top:0,right:0,bottom:0})})}};class js{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,r){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):s)}}isAttached(e){return!0}updateConfig(e){}}class Hi extends js{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Es="$chartjs",ar={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hr=i=>i===null||i==="",Us=!!ns&&{passive:!0};function Pr(i,e,t){i&&i.canvas&&i.canvas.removeEventListener(e,t,Us)}function ps(i,e){for(const t of i)if(t===e||t.contains(e))return!0}function cn(i,e,t){const s=i.canvas,r=new MutationObserver(n=>{let o=!1;for(const a of n)o=o||ps(a.addedNodes,s),o=o&&!ps(a.removedNodes,s);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function Ji(i,e,t){const s=i.canvas,r=new MutationObserver(n=>{let o=!1;for(const a of n)o=o||ps(a.removedNodes,s),o=o&&!ps(a.addedNodes,s);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const ei=new Map;let Br=0;function Ir(){const i=window.devicePixelRatio;i!==Br&&(Br=i,ei.forEach((e,t)=>{t.currentDevicePixelRatio!==i&&e()}))}function dn(i,e,t){const s=i.canvas,r=s&&ss(s);if(!r)return;const n=kt((a,h)=>{const _=r.clientWidth;t(a,h),_<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{const h=a[0],_=h.contentRect.width,y=h.contentRect.height;_===0&&y===0||n(_,y)});return o.observe(r),function(a,h){ei.size||window.addEventListener("resize",Ir),ei.set(a,h)}(i,n),o}function lr(i,e,t){t&&t.disconnect(),e==="resize"&&function(s){ei.delete(s),ei.size||window.removeEventListener("resize",Ir)}(i)}function un(i,e,t){const s=i.canvas,r=kt(n=>{i.ctx!==null&&t(function(o,a){const h=ar[o.type]||o.type,{x:_,y}=li(o,a);return{type:h,chart:a,native:o,x:_!==void 0?_:null,y:y!==void 0?y:null}}(n,i))},i);return function(n,o,a){n&&n.addEventListener(o,a,Us)}(s,e,r),r}class Hr extends js{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(function(r,n){const o=r.style,a=r.getAttribute("height"),h=r.getAttribute("width");if(r[Es]={initial:{height:a,width:h,style:{display:o.display,height:o.height,width:o.width}}},o.display=o.display||"block",o.boxSizing=o.boxSizing||"border-box",hr(h)){const _=os(r,"width");_!==void 0&&(r.width=_)}if(hr(a))if(r.style.height==="")r.height=r.width/(n||2);else{const _=os(r,"height");_!==void 0&&(r.height=_)}}(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[Es])return!1;const s=t[Es].initial;["height","width"].forEach(n=>{const o=s[n];Be(o)?t.removeAttribute(n):t.setAttribute(n,o)});const r=s.style||{};return Object.keys(r).forEach(n=>{t.style[n]=r[n]}),t.width=t.width,delete t[Es],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),n={attach:cn,detach:Ji,resize:dn}[t]||un;r[t]=n(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),r=s[t];r&&(({attach:lr,detach:lr,resize:lr}[t]||Pr)(e,t,r),s[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,r){return pi(e,t,s,r)}isAttached(e){const t=e&&ss(e);return!(!t||!t.isConnected)}}function Fr(i){return!is()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?Hi:Hr}var Nr=Object.freeze({__proto__:null,BasePlatform:js,BasicPlatform:Hi,DomPlatform:Hr,_detectPlatform:Fr});const cr="transparent",Vs={boolean:(i,e,t)=>t>.5?e:i,color(i,e,t){const s=jt(i||cr),r=s.valid&&jt(e||cr);return r&&r.valid?r.mix(s,t).hexString():e},number:(i,e,t)=>i+(e-i)*t};class ks{constructor(e,t,s,r){const n=t[s];r=Xi([e.to,r,n,e.from]);const o=Xi([e.from,n,r]);this._active=!0,this._fn=e.fn||Vs[e.type||typeof o],this._easing=ds[e.easing]||ds.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const r=this._target[this._prop],n=s-this._start,o=this._duration-n;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=n,this._loop=!!e.loop,this._to=Xi([e.to,t,r,e.from]),this._from=Xi([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,r=this._prop,n=this._from,o=this._loop,a=this._to;let h;if(this._active=n!==a&&(o||t<s),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=n:(h=t/s%2,h=o&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[r]=this._fn(n,a,h))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][t]()}}class dr{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!p(e))return;const t=Object.keys(gt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const n=e[r];if(!p(n))return;const o={};for(const a of t)o[a]=n[a];(he(n.properties)&&n.properties||[r]).forEach(a=>{a!==r&&s.has(a)||s.set(a,o)})})}_animateOptions(e,t){const s=t.options,r=function(o,a){if(!a)return;let h=o.options;return h?(h.$shared&&(o.options=h=Object.assign({},h,{$shared:!1,$animations:{}})),h):void(o.options=a)}(e,s);if(!r)return[];const n=this._createAnimations(r,s);return s.$shared&&function(o,a){const h=[],_=Object.keys(a);for(let y=0;y<_.length;y++){const v=o[_[y]];v&&v.active()&&h.push(v.wait())}return Promise.all(h)}(e.options.$animations,s).then(()=>{e.options=s},()=>{}),n}_createAnimations(e,t){const s=this._properties,r=[],n=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let h;for(h=o.length-1;h>=0;--h){const _=o[h];if(_.charAt(0)==="$")continue;if(_==="options"){r.push(...this._animateOptions(e,t));continue}const y=t[_];let v=n[_];const C=s.get(_);if(v){if(C&&v.active()){v.update(C,y,a);continue}v.cancel()}C&&C.duration?(n[_]=v=new ks(C,e,_,y),r.push(v)):e[_]=y}return r}update(e,t){if(this._properties.size===0)return void Object.assign(e,t);const s=this._createAnimations(e,t);return s.length?(Vt.add(this._chart,s),!0):void 0}}function Wr(i,e){const t=i&&i.options||{},s=t.reverse,r=t.min===void 0?e:0,n=t.max===void 0?e:0;return{start:s?n:r,end:s?r:n}}function gs(i,e){const t=[],s=i._getSortedDatasetMetas(e);let r,n;for(r=0,n=s.length;r<n;++r)t.push(s[r].index);return t}function Y(i,e,t,s={}){const r=i.keys,n=s.mode==="single";let o,a,h,_;if(e!==null){for(o=0,a=r.length;o<a;++o){if(h=+r[o],h===t){if(s.all)continue;break}_=i.values[h],g(_)&&(n||e===0||X(e)===X(_))&&(e+=_)}return e}}function f(i,e){const t=i&&i.options.stacked;return t||t===void 0&&e.stack!==void 0}function O(i,e,t){const s=i[e]||(i[e]={});return s[t]||(s[t]={})}function q(i,e,t,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const n=i[r.index];if(t&&n>0||!t&&n<0)return r.index}return null}function de(i,e){const{chart:t,_cachedMeta:s}=i,r=t._stacks||(t._stacks={}),{iScale:n,vScale:o,index:a}=s,h=n.axis,_=o.axis,y=function(L,H,P){return`${L.id}.${H.id}.${P.stack||P.type}`}(n,o,s),v=e.length;let C;for(let L=0;L<v;++L){const H=e[L],{[h]:P,[_]:F}=H;C=(H._stacks||(H._stacks={}))[_]=O(r,y,P),C[a]=F,C._top=q(C,o,!0,s.type),C._bottom=q(C,o,!1,s.type),(C._visualValues||(C._visualValues={}))[a]=F}}function xe(i,e){const t=i.scales;return Object.keys(t).filter(s=>t[s].axis===e).shift()}function Oe(i,e){const t=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){e=e||i._parsed;for(const r of e){const n=r._stacks;if(!n||n[s]===void 0||n[s][t]===void 0)return;delete n[s][t],n[s]._visualValues!==void 0&&n[s]._visualValues[t]!==void 0&&delete n[s]._visualValues[t]}}}const Ze=i=>i==="reset"||i==="none",St=(i,e)=>e?i:Object.assign({},i);class xt{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=f(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Oe(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),r=(v,C,L,H)=>v==="x"?C:v==="r"?H:L,n=t.xAxisID=E(s.xAxisID,xe(e,"x")),o=t.yAxisID=E(s.yAxisID,xe(e,"y")),a=t.rAxisID=E(s.rAxisID,xe(e,"r")),h=t.indexAxis,_=t.iAxisID=r(h,n,o,a),y=t.vAxisID=r(h,o,n,a);t.xScale=this.getScaleForId(n),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(_),t.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Gt(this._data,this),e._stacked&&Oe(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(p(t)){const r=this._cachedMeta;this._data=function(n,o){const{iScale:a,vScale:h}=o,_=a.axis==="x"?"x":"y",y=h.axis==="x"?"x":"y",v=Object.keys(n),C=new Array(v.length);let L,H,P;for(L=0,H=v.length;L<H;++L)P=v[L],C[L]={[_]:P,[y]:n[P]};return C}(t,r)}else if(s!==t){if(s){Gt(s,this);const r=this._cachedMeta;Oe(r),r._parsed=[]}t&&Object.isExtensible(t)&&ni(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const n=t._stacked;t._stacked=f(t.vScale,t),t.stack!==s.stack&&(r=!0,Oe(t),t.stack=s.stack),this._resyncElements(e),(r||n!==t._stacked)&&de(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:r}=this,{iScale:n,_stacked:o}=s,a=n.axis;let h,_,y,v=e===0&&t===r.length||s._sorted,C=e>0&&s._parsed[e-1];if(this._parsing===!1)s._parsed=r,s._sorted=!0,y=r;else{y=he(r[e])?this.parseArrayData(s,r,e,t):p(r[e])?this.parseObjectData(s,r,e,t):this.parsePrimitiveData(s,r,e,t);const L=()=>_[a]===null||C&&_[a]<C[a];for(h=0;h<t;++h)s._parsed[h+e]=_=y[h],v&&(L()&&(v=!1),C=_);s._sorted=v}o&&de(this,y)}parsePrimitiveData(e,t,s,r){const{iScale:n,vScale:o}=e,a=n.axis,h=o.axis,_=n.getLabels(),y=n===o,v=new Array(r);let C,L,H;for(C=0,L=r;C<L;++C)H=C+s,v[C]={[a]:y||n.parse(_[H],H),[h]:o.parse(t[H],H)};return v}parseArrayData(e,t,s,r){const{xScale:n,yScale:o}=e,a=new Array(r);let h,_,y,v;for(h=0,_=r;h<_;++h)y=h+s,v=t[y],a[h]={x:n.parse(v[0],y),y:o.parse(v[1],y)};return a}parseObjectData(e,t,s,r){const{xScale:n,yScale:o}=e,{xAxisKey:a="x",yAxisKey:h="y"}=this._parsing,_=new Array(r);let y,v,C,L;for(y=0,v=r;y<v;++y)C=y+s,L=t[C],_[y]={x:n.parse(w(L,a),C),y:o.parse(w(L,h),C)};return _}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const r=this.chart,n=this._cachedMeta,o=t[e.axis];return Y({keys:gs(r,!0),values:t._stacks[e.axis]._visualValues},o,n.index,{mode:s})}updateRangeFromParsed(e,t,s,r){const n=s[t.axis];let o=n===null?NaN:n;const a=r&&s._stacks[t.axis];r&&a&&(r.values=a,o=Y(r,n,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const s=this._cachedMeta,r=s._parsed,n=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),h=((P,F,$)=>P&&!F.hidden&&F._stacked&&{keys:gs($,!0),values:null})(t,s,this.chart),_={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:v}=function(P){const{min:F,max:$,minDefined:te,maxDefined:Q}=P.getUserBounds();return{min:te?F:Number.NEGATIVE_INFINITY,max:Q?$:Number.POSITIVE_INFINITY}}(a);let C,L;function H(){L=r[C];const P=L[a.axis];return!g(L[e.axis])||y>P||v<P}for(C=0;C<o&&(H()||(this.updateRangeFromParsed(_,e,L,h),!n));++C);if(n){for(C=o-1;C>=0;--C)if(!H()){this.updateRangeFromParsed(_,e,L,h);break}}return _}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let r,n,o;for(r=0,n=t.length;r<n;++r)o=t[r][e.axis],g(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,r=t.vScale,n=this.getParsed(e);return{label:s?""+s.getLabelForValue(n[s.axis]):"",value:r?""+r.getLabelForValue(n[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(s){let r,n,o,a;return p(s)?(r=s.top,n=s.right,o=s.bottom,a=s.left):r=n=o=a=s,{top:r,right:n,bottom:o,left:a,disabled:s===!1}}(E(this.options.clip,function(s,r,n){if(n===!1)return!1;const o=Wr(s,n),a=Wr(r,n);return{top:a.end,right:o.end,bottom:a.start,left:o.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,r=s.data||[],n=t.chartArea,o=[],a=this._drawStart||0,h=this._drawCount||r.length-a,_=this.options.drawActiveElementsOnTop;let y;for(s.dataset&&s.dataset.draw(e,n,a,h),y=a;y<a+h;++y){const v=r[y];v.hidden||(v.active&&_?o.push(v):v.draw(e,n))}for(y=0;y<o.length;++y)o[y].draw(e,n)}getStyle(e,t){const s=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const r=this.getDataset();let n;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];n=o.$context||(o.$context=function(a,h,_){return Kt(a,{active:!1,dataIndex:h,parsed:void 0,raw:void 0,element:_,index:h,mode:"default",type:"data"})}(this.getContext(),e,o)),n.parsed=this.getParsed(e),n.raw=r.data[e],n.index=n.dataIndex=e}else n=this.$context||(this.$context=function(o,a){return Kt(o,{active:!1,dataset:void 0,datasetIndex:a,index:a,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),n.dataset=r,n.index=n.datasetIndex=this.index;return n.active=!!t,n.mode=s,n}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const r=t==="active",n=this._cachedDataOpts,o=e+"-"+t,a=n[o],h=this.enableOptionSharing&&V(s);if(a)return St(a,h);const _=this.chart.config,y=_.datasetElementScopeKeys(this._type,e),v=r?[`${e}Hover`,"hover",e,""]:[e,""],C=_.getOptionScopes(this.getDataset(),y),L=Object.keys(gt.elements[e]),H=_.resolveNamedOptions(C,L,()=>this.getContext(s,r,t),v);return H.$shared&&(H.$shared=h,n[o]=Object.freeze(St(H,h))),H}_resolveAnimations(e,t,s){const r=this.chart,n=this._cachedDataOpts,o=`animation-${t}`,a=n[o];if(a)return a;let h;if(r.options.animation!==!1){const y=this.chart.config,v=y.datasetAnimationScopeKeys(this._type,t),C=y.getOptionScopes(this.getDataset(),v);h=y.createResolver(C,this.getContext(e,s,t))}const _=new dr(r,h&&h.animations);return h&&h._cacheable&&(n[o]=Object.freeze(_)),_}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Ze(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),r=this._sharedOptions,n=this.getSharedOptions(s),o=this.includeOptions(t,n)||n!==r;return this.updateSharedOptions(n,t,s),{sharedOptions:n,includeOptions:o}}updateElement(e,t,s,r){Ze(r)?Object.assign(e,s):this._resolveAnimations(t,r).update(e,s)}updateSharedOptions(e,t,s){e&&!Ze(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,r){e.active=r;const n=this.getStyle(t,r);this._resolveAnimations(t,s,r).update(e,{options:!r&&this.getSharedOptions(n)||n})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[a,h,_]of this._syncList)this[a](h,_);this._syncList=[];const r=s.length,n=t.length,o=Math.min(n,r);o&&this.parse(0,o),n>r?this._insertElements(r,n-r,e):n<r&&this._removeElements(n,r-n)}_insertElements(e,t,s=!0){const r=this._cachedMeta,n=r.data,o=e+t;let a;const h=_=>{for(_.length+=t,a=_.length-1;a>=o;a--)_[a]=_[a-t]};for(h(n),a=e;a<o;++a)n[a]=new this.dataElementType;this._parsing&&h(r._parsed),this.parse(e,t),s&&this.updateElements(n,e,t,"reset")}updateElements(e,t,s,r){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,t);s._stacked&&Oe(s,r)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,r]=e;this[t](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Ct{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return ie(this.x)&&ie(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const r={};return e.forEach(n=>{r[n]=s[n]&&s[n].active()?s[n]._to:this[n]}),r}}function ci(i,e){const t=i.options.ticks,s=function(v){const C=v.options.offset,L=v._tickSize(),H=v._length/L+(C?0:1),P=v._maxLength/L;return Math.floor(Math.min(H,P))}(i),r=Math.min(t.maxTicksLimit||s,s),n=t.major.enabled?function(v){const C=[];let L,H;for(L=0,H=v.length;L<H;L++)v[L].major&&C.push(L);return C}(e):[],o=n.length,a=n[0],h=n[o-1],_=[];if(o>r)return function(v,C,L,H){let P,F=0,$=L[0];for(H=Math.ceil(H),P=0;P<v.length;P++)P===$&&(C.push(v[P]),F++,$=L[F*H])}(e,_,n,o/r),_;const y=function(v,C,L){const H=function($){const te=$.length;let Q,Z;if(te<2)return!1;for(Z=$[0],Q=1;Q<te;++Q)if($[Q]-$[Q-1]!==Z)return!1;return Z}(v),P=C.length/L;if(!H)return Math.max(P,1);const F=We(H);for(let $=0,te=F.length-1;$<te;$++){const Q=F[$];if(Q>P)return Q}return Math.max(P,1)}(n,e,r);if(o>0){let v,C;const L=o>1?Math.round((h-a)/(o-1)):null;for(ti(e,_,y,Be(L)?0:a-L,a),v=0,C=o-1;v<C;v++)ti(e,_,y,n[v],n[v+1]);return ti(e,_,y,h,Be(L)?e.length:h+L),_}return ti(e,_,y),_}function ti(i,e,t,s,r){const n=E(s,0),o=Math.min(E(r,i.length),i.length);let a,h,_,y=0;for(t=Math.ceil(t),r&&(a=r-s,t=a/Math.floor(a/t)),_=n;_<0;)y++,_=Math.round(n+y*t);for(h=Math.max(n,0);h<o;h++)h===_&&(e.push(i[h]),y++,_=Math.round(n+y*t))}const gi=(i,e,t)=>e==="top"||e==="left"?i[e]+t:i[e]-t,Fi=(i,e)=>Math.min(e||i,i);function ii(i,e){const t=[],s=i.length/e,r=i.length;let n=0;for(;n<r;n+=s)t.push(i[Math.floor(n)]);return t}function Ds(i,e,t){const s=i.ticks.length,r=Math.min(e,s-1),n=i._startPixel,o=i._endPixel,a=1e-6;let h,_=i.getPixelForTick(r);if(!(t&&(h=s===1?Math.max(_-n,o-_):e===0?(i.getPixelForTick(1)-_)/2:(_-i.getPixelForTick(r-1))/2,_+=r<e?h:-h,_<n-a||_>o+a)))return _}function Ni(i){return i.drawTicks?i.tickLength:0}function zr(i,e){if(!i.display)return 0;const t=wt(i.font,e),s=At(i.padding);return(he(i.text)?i.text.length:1)*t.lineHeight+s.height}function Zi(i,e,t){let s=et(i);return(t&&e!=="right"||!t&&e==="right")&&(s=(r=>r==="left"?"right":r==="right"?"left":r)(s)),s}class Wi extends Ct{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:r}=this;return e=x(e,Number.POSITIVE_INFINITY),t=x(t,Number.NEGATIVE_INFINITY),s=x(s,Number.POSITIVE_INFINITY),r=x(r,Number.NEGATIVE_INFINITY),{min:x(e,s),max:x(t,r),minDefined:g(e),maxDefined:g(t)}}getMinMax(e){let t,{min:s,max:r,minDefined:n,maxDefined:o}=this.getUserBounds();if(n&&o)return{min:s,max:r};const a=this.getMatchingVisibleMetas();for(let h=0,_=a.length;h<_;++h)t=a[h].controller.getMinMax(this,e),n||(s=Math.min(s,t.min)),o||(r=Math.max(r,t.max));return s=o&&s>r?r:s,r=n&&s>r?s:r,{min:x(s,x(r,s)),max:x(r,x(s,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){D(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:r,grace:n,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=er(this,n,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=a<this.ticks.length;this._convertTicksToLabels(h?ii(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=ci(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,s=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,s=!s),this._startPixel=e,this._endPixel=t,this._reversePixels=s,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){D(this.options.afterUpdate,[this])}beforeSetDimensions(){D(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){D(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),D(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){D(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,r,n;for(s=0,r=e.length;s<r;s++)n=e[s],n.label=D(t.callback,[n.value,s,e],this)}afterTickToLabelConversion(){D(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){D(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=Fi(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,n=t.maxRotation;let o,a,h,_=r;if(!this._isVisible()||!t.display||r>=n||s<=1||!this.isHorizontal())return void(this.labelRotation=r);const y=this._getLabelSizes(),v=y.widest.width,C=y.highest.height,L=ot(this.chart.width-v,0,this.maxWidth);o=e.offset?this.maxWidth/s:L/(s-1),v+6>o&&(o=L/(s-(e.offset?.5:1)),a=this.maxHeight-Ni(e.grid)-t.padding-zr(e.title,this.chart.options.font),h=Math.sqrt(v*v+C*C),_=oe(Math.min(Math.asin(ot((y.highest.height+6)/o,-1,1)),Math.asin(ot(a/h,-1,1))-Math.asin(ot(C/h,-1,1)))),_=Math.max(r,Math.min(n,_))),this.labelRotation=_}afterCalculateLabelRotation(){D(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){D(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:r,grid:n}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const h=zr(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=Ni(n)+h):(e.height=this.maxHeight,e.width=Ni(n)+h),s.display&&this.ticks.length){const{first:_,last:y,widest:v,highest:C}=this._getLabelSizes(),L=2*s.padding,H=ue(this.labelRotation),P=Math.cos(H),F=Math.sin(H);if(a){const $=s.mirror?0:F*v.width+P*C.height;e.height=Math.min(this.maxHeight,e.height+$+L)}else{const $=s.mirror?0:P*v.width+F*C.height;e.width=Math.min(this.maxWidth,e.width+$+L)}this._calculatePadding(_,y,F,P)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,r){const{ticks:{align:n,padding:o},position:a}=this.options,h=this.labelRotation!==0,_=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let C=0,L=0;h?_?(C=r*e.width,L=s*t.height):(C=s*e.height,L=r*t.width):n==="start"?L=t.width:n==="end"?C=e.width:n!=="inner"&&(C=e.width/2,L=t.width/2),this.paddingLeft=Math.max((C-y+o)*this.width/(this.width-y),0),this.paddingRight=Math.max((L-v+o)*this.width/(this.width-v),0)}else{let y=t.height/2,v=e.height/2;n==="start"?(y=0,v=e.height):n==="end"&&(y=t.height,v=0),this.paddingTop=y+o,this.paddingBottom=v+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){D(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,s;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,s=e.length;t<s;t++)Be(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=ii(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:r,_longestTextCache:n}=this,o=[],a=[],h=Math.floor(t/Fi(t,s));let _,y,v,C,L,H,P,F,$,te,Q,Z=0,ae=0;for(_=0;_<t;_+=h){if(C=e[_].label,L=this._resolveTickFontOptions(_),r.font=H=L.string,P=n[H]=n[H]||{data:{},gc:[]},F=L.lineHeight,$=te=0,Be(C)||he(C)){if(he(C))for(y=0,v=C.length;y<v;++y)Q=C[y],Be(Q)||he(Q)||($=yi(r,P.data,P.gc,$,Q),te+=F)}else $=yi(r,P.data,P.gc,$,C),te=F;o.push($),a.push(te),Z=Math.max($,Z),ae=Math.max(te,ae)}(function(Ae,De){T(Ae,He=>{const Pe=He.gc,Me=Pe.length/2;let Te;if(Me>De){for(Te=0;Te<Me;++Te)delete He.data[Pe[Te]];Pe.splice(0,Me)}})})(n,t);const fe=o.indexOf(Z),me=a.indexOf(ae),Ce=Ae=>({width:o[Ae]||0,height:a[Ae]||0});return{first:Ce(0),last:Ce(t-1),widest:Ce(fe),highest:Ce(me),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Ft(this._alignToPixels?Qt(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=function(r,n,o){return Kt(r,{tick:o,index:n,type:"tick"})}(this.getContext(),e,s))}return this.$context||(this.$context=Kt(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=ue(this.labelRotation),s=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),n=this._getLabelSizes(),o=e.autoSkipPadding||0,a=n?n.widest.width+o:0,h=n?n.highest.height+o:0;return this.isHorizontal()?h*s>a*r?a/s:h/r:h*r<a*s?h/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,r=this.options,{grid:n,position:o,border:a}=r,h=n.offset,_=this.isHorizontal(),y=this.ticks.length+(h?1:0),v=Ni(n),C=[],L=a.setContext(this.getContext()),H=L.display?L.width:0,P=H/2,F=function(Le){return Qt(s,Le,H)};let $,te,Q,Z,ae,fe,me,Ce,Ae,De,He,Pe;if(o==="top")$=F(this.bottom),fe=this.bottom-v,Ce=$-P,De=F(e.top)+P,Pe=e.bottom;else if(o==="bottom")$=F(this.top),De=e.top,Pe=F(e.bottom)-P,fe=$+P,Ce=this.top+v;else if(o==="left")$=F(this.right),ae=this.right-v,me=$-P,Ae=F(e.left)+P,He=e.right;else if(o==="right")$=F(this.left),Ae=e.left,He=F(e.right)-P,ae=$+P,me=this.left+v;else if(t==="x"){if(o==="center")$=F((e.top+e.bottom)/2+.5);else if(p(o)){const Le=Object.keys(o)[0],Ve=o[Le];$=F(this.chart.scales[Le].getPixelForValue(Ve))}De=e.top,Pe=e.bottom,fe=$+P,Ce=fe+v}else if(t==="y"){if(o==="center")$=F((e.left+e.right)/2);else if(p(o)){const Le=Object.keys(o)[0],Ve=o[Le];$=F(this.chart.scales[Le].getPixelForValue(Ve))}ae=$-P,me=ae-v,Ae=e.left,He=e.right}const Me=E(r.ticks.maxTicksLimit,y),Te=Math.max(1,Math.ceil(y/Me));for(te=0;te<y;te+=Te){const Le=this.getContext(te),Ve=n.setContext(Le),_t=a.setContext(Le),lt=Ve.lineWidth,zt=Ve.color,di=_t.dash||[],ui=_t.dashOffset,mi=Ve.tickWidth,Ei=Ve.tickColor,ki=Ve.tickBorderDash||[],Di=Ve.tickBorderDashOffset;Q=Ds(this,te,h),Q!==void 0&&(Z=Qt(s,Q,lt),_?ae=me=Ae=He=Z:fe=Ce=De=Pe=Z,C.push({tx1:ae,ty1:fe,tx2:me,ty2:Ce,x1:Ae,y1:De,x2:He,y2:Pe,width:lt,color:zt,borderDash:di,borderDashOffset:ui,tickWidth:mi,tickColor:Ei,tickBorderDash:ki,tickBorderDashOffset:Di}))}return this._ticksLength=y,this._borderValue=$,C}_computeLabelItems(e){const t=this.axis,s=this.options,{position:r,ticks:n}=s,o=this.isHorizontal(),a=this.ticks,{align:h,crossAlign:_,padding:y,mirror:v}=n,C=Ni(s.grid),L=C+y,H=v?-y:L,P=-ue(this.labelRotation),F=[];let $,te,Q,Z,ae,fe,me,Ce,Ae,De,He,Pe,Me="middle";if(r==="top")fe=this.bottom-H,me=this._getXAxisLabelAlignment();else if(r==="bottom")fe=this.top+H,me=this._getXAxisLabelAlignment();else if(r==="left"){const Le=this._getYAxisLabelAlignment(C);me=Le.textAlign,ae=Le.x}else if(r==="right"){const Le=this._getYAxisLabelAlignment(C);me=Le.textAlign,ae=Le.x}else if(t==="x"){if(r==="center")fe=(e.top+e.bottom)/2+L;else if(p(r)){const Le=Object.keys(r)[0],Ve=r[Le];fe=this.chart.scales[Le].getPixelForValue(Ve)+L}me=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")ae=(e.left+e.right)/2-L;else if(p(r)){const Le=Object.keys(r)[0],Ve=r[Le];ae=this.chart.scales[Le].getPixelForValue(Ve)}me=this._getYAxisLabelAlignment(C).textAlign}t==="y"&&(h==="start"?Me="top":h==="end"&&(Me="bottom"));const Te=this._getLabelSizes();for($=0,te=a.length;$<te;++$){Q=a[$],Z=Q.label;const Le=n.setContext(this.getContext($));Ce=this.getPixelForTick($)+n.labelOffset,Ae=this._resolveTickFontOptions($),De=Ae.lineHeight,He=he(Z)?Z.length:1;const Ve=He/2,_t=Le.color,lt=Le.textStrokeColor,zt=Le.textStrokeWidth;let di,ui=me;if(o?(ae=Ce,me==="inner"&&(ui=$===te-1?this.options.reverse?"left":"right":$===0?this.options.reverse?"right":"left":"center"),Pe=r==="top"?_==="near"||P!==0?-He*De+De/2:_==="center"?-Te.highest.height/2-Ve*De+De:-Te.highest.height+De/2:_==="near"||P!==0?De/2:_==="center"?Te.highest.height/2-Ve*De:Te.highest.height-He*De,v&&(Pe*=-1),P===0||Le.showLabelBackdrop||(ae+=De/2*Math.sin(P))):(fe=Ce,Pe=(1-He)*De/2),Le.showLabelBackdrop){const mi=At(Le.backdropPadding),Ei=Te.heights[$],ki=Te.widths[$];let Di=Pe-mi.top,Mi=0-mi.left;switch(Me){case"middle":Di-=Ei/2;break;case"bottom":Di-=Ei}switch(me){case"center":Mi-=ki/2;break;case"right":Mi-=ki;break;case"inner":$===te-1?Mi-=ki:$>0&&(Mi-=ki/2)}di={left:Mi,top:Di,width:ki+mi.width,height:Ei+mi.height,color:Le.backdropColor}}F.push({label:Z,font:Ae,textOffset:Pe,options:{rotation:P,color:_t,strokeColor:lt,strokeWidth:zt,textAlign:ui,textBaseline:Me,translation:[ae,fe],backdrop:di}})}return F}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-ue(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:r,padding:n}}=this.options,o=e+n,a=this._getLabelSizes().widest.width;let h,_;return t==="left"?r?(_=this.right+n,s==="near"?h="left":s==="center"?(h="center",_+=a/2):(h="right",_+=a)):(_=this.right-o,s==="near"?h="right":s==="center"?(h="center",_-=a/2):(h="left",_=this.left)):t==="right"?r?(_=this.left+n,s==="near"?h="right":s==="center"?(h="center",_-=a/2):(h="left",_-=a)):(_=this.left+o,s==="near"?h="left":s==="center"?(h="center",_+=a/2):(h="right",_=this.right)):h="right",{textAlign:h,x:_}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return t==="left"||t==="right"?{top:0,left:this.left,bottom:e.height,right:this.right}:t==="top"||t==="bottom"?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:r,width:n,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,r,n,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let n,o;const a=(h,_,y)=>{y.width&&y.color&&(s.save(),s.lineWidth=y.width,s.strokeStyle=y.color,s.setLineDash(y.borderDash||[]),s.lineDashOffset=y.borderDashOffset,s.beginPath(),s.moveTo(h.x,h.y),s.lineTo(_.x,_.y),s.stroke(),s.restore())};if(t.display)for(n=0,o=r.length;n<o;++n){const h=r[n];t.drawOnChartArea&&a({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&a({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:r}}=this,n=s.setContext(this.getContext()),o=s.display?n.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let _,y,v,C;this.isHorizontal()?(_=Qt(e,this.left,o)-o/2,y=Qt(e,this.right,a)+a/2,v=C=h):(v=Qt(e,this.top,o)-o/2,C=Qt(e,this.bottom,a)+a/2,_=y=h),t.save(),t.lineWidth=n.width,t.strokeStyle=n.color,t.beginPath(),t.moveTo(_,v),t.lineTo(y,C),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,s=this._computeLabelArea();s&&Oi(t,s);const r=this.getLabelItems(e);for(const n of r){const o=n.options,a=n.font;Ri(t,n.label,0,n.textOffset,a,o)}s&&bs(t)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:r}}=this;if(!s.display)return;const n=wt(s.font),o=At(s.padding),a=s.align;let h=n.lineHeight/2;t==="bottom"||t==="center"||p(t)?(h+=o.bottom,he(s.text)&&(h+=n.lineHeight*(s.text.length-1))):h+=o.top;const{titleX:_,titleY:y,maxWidth:v,rotation:C}=function(L,H,P,F){const{top:$,left:te,bottom:Q,right:Z,chart:ae}=L,{chartArea:fe,scales:me}=ae;let Ce,Ae,De,He=0;const Pe=Q-$,Me=Z-te;if(L.isHorizontal()){if(Ae=ut(F,te,Z),p(P)){const Te=Object.keys(P)[0],Le=P[Te];De=me[Te].getPixelForValue(Le)+Pe-H}else De=P==="center"?(fe.bottom+fe.top)/2+Pe-H:gi(L,P,H);Ce=Z-te}else{if(p(P)){const Te=Object.keys(P)[0],Le=P[Te];Ae=me[Te].getPixelForValue(Le)-Me+H}else Ae=P==="center"?(fe.left+fe.right)/2-Me+H:gi(L,P,H);De=ut(F,Q,$),He=P==="left"?-B:B}return{titleX:Ae,titleY:De,maxWidth:Ce,rotation:He}}(this,h,t,a);Ri(e,s.text,0,0,n,{color:s.color,maxWidth:v,rotation:C,textAlign:Zi(a,t,r),textBaseline:"middle",translation:[_,y]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=E(e.grid&&e.grid.z,-1),r=E(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Wi.prototype.draw?[{z:s,draw:n=>{this.drawBackground(),this.drawGrid(n),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:n=>{this.drawLabels(n)}}]:[{z:t,draw:n=>{this.draw(n)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let n,o;for(n=0,o=t.length;n<o;++n){const a=t[n];a[s]!==this.id||e&&a.type!==e||r.push(a)}return r}_resolveTickFontOptions(e){return wt(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $r{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;(function(a){return"id"in a&&"defaults"in a})(t)&&(s=this.register(t));const r=this.items,n=e.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+e);return n in r||(r[n]=e,function(a,h,_){const y=c(Object.create(null),[_?gt.get(_):{},gt.get(h),a.defaults]);gt.set(h,y),a.defaultRoutes&&function(v,C){Object.keys(C).forEach(L=>{const H=L.split("."),P=H.pop(),F=[v].concat(H).join("."),$=C[L].split("."),te=$.pop(),Q=$.join(".");gt.route(F,P,Q,te)})}(h,a.defaultRoutes),a.descriptors&&gt.describe(h,a.descriptors)}(e,o,s),this.override&&gt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,r=this.scope;s in t&&delete t[s],r&&s in gt[r]&&(delete gt[r][s],this.override&&delete Zt[s])}}class Io{constructor(){this.controllers=new $r(xt,"datasets",!0),this.elements=new $r(Ct,"elements"),this.plugins=new $r(Object,"plugins"),this.scales=new $r(Wi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,s){[...t].forEach(r=>{const n=s||this._getRegistryForType(r);s||n.isForType(r)||n===this.plugins&&r.id?this._exec(e,n,r):T(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,s){const r=I(e);D(s["before"+r],[],s),t[e](s),D(s["after"+r],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var Ci=new Io;class Ho{constructor(){this._init=[]}notify(e,t,s,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const n=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(n,e,t,s);return t==="afterDestroy"&&(this._notify(n,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,s,r){r=r||{};for(const n of e){const o=n.plugin;if(D(o[s],[t,r,n.options],o)===!1&&r.cancelable)return!1}return!0}invalidate(){Be(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,r=E(s.options&&s.options.plugins,{}),n=function(o){const a={},h=[],_=Object.keys(Ci.plugins.items);for(let v=0;v<_.length;v++)h.push(Ci.getPlugin(_[v]));const y=o.plugins||[];for(let v=0;v<y.length;v++){const C=y[v];h.indexOf(C)===-1&&(h.push(C),a[C.id]=!0)}return{plugins:h,localIds:a}}(s);return r!==!1||t?function(o,{plugins:a,localIds:h},_,y){const v=[],C=o.getContext();for(const L of a){const H=L.id,P=Fo(_[H],y);P!==null&&v.push({plugin:L,options:No(o.config,{plugin:L,local:h[H]},P,C)})}return v}(e,n,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,r=(n,o)=>n.filter(a=>!o.some(h=>a.plugin.id===h.plugin.id));this._notify(r(t,s),e,"stop"),this._notify(r(s,t),e,"start")}}function Fo(i,e){return e||i!==!1?i===!0?{}:i:null}function No(i,{plugin:e,local:t},s,r){const n=i.pluginScopeKeys(e),o=i.getOptionScopes(s,n);return t&&e.defaults&&o.push(e.defaults),i.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function fn(i,e){const t=gt.datasets[i]||{};return((e.datasets||{})[i]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function An(i){if(i==="x"||i==="y"||i==="r")return i}function _n(i,...e){if(An(i))return i;for(const s of e){const r=s.axis||((t=s.position)==="top"||t==="bottom"?"x":t==="left"||t==="right"?"y":void 0)||i.length>1&&An(i[0].toLowerCase());if(r)return r}var t;throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Ln(i,e,t){if(t[e+"AxisID"]===i)return{axis:e}}function Wo(i,e){const t=Zt[i.type]||{scales:{}},s=e.scales||{},r=fn(i.type,e),n=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!p(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const h=_n(o,a,function(v,C){if(C.data&&C.data.datasets){const L=C.data.datasets.filter(H=>H.xAxisID===v||H.yAxisID===v);if(L.length)return Ln(v,"x",L[0])||Ln(v,"y",L[0])}return{}}(o,i),gt.scales[a.type]),_=function(v,C){return v===C?"_index_":"_value_"}(h,r),y=t.scales||{};n[o]=b(Object.create(null),[{axis:h},a,y[h],y[_]])}),i.data.datasets.forEach(o=>{const a=o.type||i.type,h=o.indexAxis||fn(a,e),_=(Zt[a]||{}).scales||{};Object.keys(_).forEach(y=>{const v=function(L,H){let P=L;return L==="_index_"?P=H:L==="_value_"&&(P=H==="x"?"y":"x"),P}(y,h),C=o[v+"AxisID"]||v;n[C]=n[C]||Object.create(null),b(n[C],[{axis:v},s[C],_[y]])})}),Object.keys(n).forEach(o=>{const a=n[o];b(a,[gt.scales[a.type],gt.scale])}),n}function Tn(i){const e=i.options||(i.options={});e.plugins=E(e.plugins,{}),e.scales=Wo(i,e)}function On(i){return(i=i||{}).datasets=i.datasets||[],i.labels=i.labels||[],i}const Rn=new Map,Pn=new Set;function jr(i,e){let t=Rn.get(i);return t||(t=e(),Rn.set(i,t),Pn.add(t)),t}const ur=(i,e,t)=>{const s=w(e,t);s!==void 0&&i.add(s)};class zo{constructor(e){this._config=function(t){return(t=t||{}).data=On(t.data),Tn(t),t}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=On(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Tn(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return jr(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return jr(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return jr(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return jr(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let r=s.get(e);return r&&!t||(r=new Map,s.set(e,r)),r}getOptionScopes(e,t,s){const{options:r,type:n}=this,o=this._cachedScopes(e,s),a=o.get(t);if(a)return a;const h=new Set;t.forEach(y=>{e&&(h.add(e),y.forEach(v=>ur(h,e,v))),y.forEach(v=>ur(h,r,v)),y.forEach(v=>ur(h,Zt[n]||{},v)),y.forEach(v=>ur(h,gt,v)),y.forEach(v=>ur(h,Li,v))});const _=Array.from(h);return _.length===0&&_.push(Object.create(null)),Pn.has(t)&&o.set(t,_),_}chartOptionScopes(){const{options:e,type:t}=this;return[e,Zt[t]||{},gt.datasets[t]||{},{type:t},gt,Li]}resolveNamedOptions(e,t,s,r=[""]){const n={$shared:!0},{resolver:o,subPrefixes:a}=Bn(this._resolverCache,e,r);let h=o;(function(_,y){const{isScriptable:v,isIndexable:C}=Bs(_);for(const L of y){const H=v(L),P=C(L),F=(P||H)&&_[L];if(H&&(j(F)||$o(F))||P&&he(F))return!0}return!1})(o,t)&&(n.$shared=!1,h=Ki(o,s=j(s)?s():s,this.createResolver(e,s,a)));for(const _ of t)n[_]=h[_];return n}createResolver(e,t,s=[""],r){const{resolver:n}=Bn(this._resolverCache,e,s);return p(t)?Ki(n,t,void 0,r):n}}function Bn(i,e,t){let s=i.get(e);s||(s=new Map,i.set(e,s));const r=t.join();let n=s.get(r);return n||(n={resolver:Ps(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},s.set(r,n)),n}const $o=i=>p(i)&&Object.getOwnPropertyNames(i).some(e=>j(i[e])),jo=["top","bottom","left","right","chartArea"];function In(i,e){return i==="top"||i==="bottom"||jo.indexOf(i)===-1&&e==="x"}function Hn(i,e){return function(t,s){return t[i]===s[i]?t[e]-s[e]:t[i]-s[i]}}function Fn(i){const e=i.chart,t=e.options.animation;e.notifyPlugins("afterRender"),D(t&&t.onComplete,[i],e)}function Uo(i){const e=i.chart,t=e.options.animation;D(t&&t.onProgress,[i],e)}function Nn(i){return is()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const Ur={},Wn=i=>{const e=Nn(i);return Object.values(Ur).filter(t=>t.canvas===e).pop()};function Vo(i,e,t){const s=Object.keys(i);for(const r of s){const n=+r;if(n>=e){const o=i[r];delete i[r],(t>0||n>e)&&(i[n+t]=o)}}}function Vr(i,e,t){return i.options.clip?i[t]:e[t]}class Tt{static defaults=gt;static instances=Ur;static overrides=Zt;static registry=Ci;static version="4.4.3";static getChart=Wn;static register(...e){Ci.add(...e),zn()}static unregister(...e){Ci.remove(...e),zn()}constructor(e,t){const s=this.config=new zo(t),r=Nn(e),n=Wn(r);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Fr(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),h=a&&a.canvas,_=h&&h.height,y=h&&h.width;this.id=dt(),this.ctx=a,this.canvas=h,this.width=y,this.height=_,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Ho,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Wt(v=>this.update(v),o.resizeDelay||0),this._dataChanges=[],Ur[this.id]=this,a&&h?(Vt.listen(this,"complete",Fn),Vt.listen(this,"progress",Uo),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:r,_aspectRatio:n}=this;return Be(e)?t&&n?n:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ci}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ti(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Si(this.canvas,this.ctx),this}stop(){return Vt.stop(this),this}resize(e,t){Vt.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,r=this.canvas,n=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,n),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ti(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),D(s.onResize,[this,o],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){T(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let n=[];t&&(n=n.concat(Object.keys(t).map(o=>{const a=t[o],h=_n(o,a),_=h==="r",y=h==="x";return{options:a,dposition:_?"chartArea":y?"bottom":"left",dtype:_?"radialLinear":y?"category":"linear"}}))),T(n,o=>{const a=o.options,h=a.id,_=_n(h,a),y=E(a.type,o.dtype);a.position!==void 0&&In(a.position,_)===In(o.dposition)||(a.position=o.dposition),r[h]=!0;let v=null;h in s&&s[h].type===y?v=s[h]:(v=new(Ci.getScale(y))({id:h,type:y,ctx:this.ctx,chart:this}),s[v.id]=v),v.init(a,e)}),T(r,(o,a)=>{o||delete s[a]}),T(s,o=>{Lt.configure(this,o,o.options),Lt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((r,n)=>r.index-n.index),s>t){for(let r=t;r<s;++r)this._destroyDatasetMeta(r);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(Hn("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,r)=>{t.filter(n=>n===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=t.length;s<r;s++){const n=t[s];let o=this.getDatasetMeta(s);const a=n.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=n.indexAxis||fn(a,this.options),o.order=n.order||0,o.index=s,o.label=""+n.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const h=Ci.getController(a),{datasetElementType:_,dataElementType:y}=gt.datasets[a];Object.assign(h,{dataElementType:Ci.getElement(y),datasetElementType:_&&Ci.getElement(_)}),o.controller=new h(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){T(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let _=0,y=this.data.datasets.length;_<y;_++){const{controller:v}=this.getDatasetMeta(_),C=!r&&n.indexOf(v)===-1;v.buildOrUpdateElements(C),o=Math.max(+v.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||T(n,_=>{_.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Hn("z","_idx"));const{_active:a,_lastEvent:h}=this;h?this._eventHandler(h,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){T(this.scales,e=>{Lt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);ee(t,s)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:n}of t)Vo(e,r,s==="_removeElements"?-n:n)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=n=>new Set(e.filter(o=>o[0]===n).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let n=1;n<t;n++)if(!ee(r,s(n)))return;return Array.from(r).map(n=>n.split(",")).map(n=>({method:n[1],start:+n[2],count:+n[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Lt.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],T(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,n)=>{r._idx=n}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,j(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Vt.has(this)?this.attached&&!Vt.running(this)&&Vt.start(this):(this.draw(),Fn({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resize(s,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let r,n;for(r=0,n=t.length;r<n;++r){const o=t[r];e&&!o.visible||s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s=e._clip,r=!s.disabled,n=function(a,h){const{xScale:_,yScale:y}=a;return _&&y?{left:Vr(_,h,"left"),right:Vr(_,h,"right"),top:Vr(y,h,"top"),bottom:Vr(y,h,"bottom")}:h}(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&Oi(t,{left:s.left===!1?0:n.left-s.left,right:s.right===!1?this.width:n.right+s.right,top:s.top===!1?0:n.top-s.top,bottom:s.bottom===!1?this.height:n.bottom+s.bottom}),e.controller.draw(),r&&bs(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return vt(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,r){const n=fs.modes[t];return typeof n=="function"?n(this,e,s,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let r=s.filter(n=>n&&n._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Kt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const r=s?"show":"hide",n=this.getDatasetMeta(e),o=n.controller._resolveAnimations(void 0,r);V(t)?(n.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(n,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Vt.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Si(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Ur[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(n,o)=>{t.addEventListener(this,n,o),e[n]=o},r=(n,o,a)=>{n.offsetX=o,n.offsetY=a,this._eventHandler(n)};T(this.options.events,n=>s(n,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(h,_)=>{t.addEventListener(this,h,_),e[h]=_},r=(h,_)=>{e[h]&&(t.removeEventListener(this,h,_),delete e[h])},n=(h,_)=>{this.canvas&&this.resize(h,_)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",n),s("detach",o)};o=()=>{this.attached=!1,r("resize",n),this._stop(),this._resize(0,0),s("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){T(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},T(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const r=s?"set":"remove";let n,o,a,h;for(t==="dataset"&&(n=this.getDatasetMeta(e[0].datasetIndex),n.controller["_"+r+"DatasetHoverStyle"]()),a=0,h=e.length;a<h;++a){o=e[a];const _=o&&this.getDatasetMeta(o.datasetIndex).controller;_&&_[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:r,index:n})=>{const o=this.getDatasetMeta(r);if(!o)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:o.data[n],index:n}});!S(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,s){const r=this.options.hover,n=(h,_)=>h.filter(y=>!_.some(v=>y.datasetIndex===v.datasetIndex&&y.index===v.index)),o=n(t,e),a=s?e:n(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const n=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(n||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:r=[],options:n}=this,o=t,a=this._getActiveElements(e,r,s,o),h=W(e),_=function(v,C,L,H){return L&&v.type!=="mouseout"?H?C:v:null}(e,this._lastEvent,s,h);s&&(this._lastEvent=null,D(n.onHover,[e,a,this],this),h&&D(n.onClick,[e,a,this],this));const y=!S(a,r);return(y||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=_,y}_getActiveElements(e,t,s,r){if(e.type==="mouseout")return[];if(!s)return t;const n=this.options.hover;return this.getElementsAtEventForMode(e,n.mode,n,r)}}function zn(){return T(Tt.instances,i=>i._plugins.invalidate())}function Ms(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pn{static override(e){Object.assign(pn.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ms()}parse(){return Ms()}format(){return Ms()}add(){return Ms()}diff(){return Ms()}startOf(){return Ms()}endOf(){return Ms()}}var $n={_date:pn};function qo(i){const e=i.iScale,t=function(_,y){if(!_._cache.$bar){const v=_.getMatchingVisibleMetas(y);let C=[];for(let L=0,H=v.length;L<H;L++)C=C.concat(v[L].controller.getAllParsedValues(_));_._cache.$bar=bt(C.sort((L,H)=>L-H))}return _._cache.$bar}(e,i.type);let s,r,n,o,a=e._length;const h=()=>{n!==32767&&n!==-32768&&(V(o)&&(a=Math.min(a,Math.abs(n-o)||a)),o=n)};for(s=0,r=t.length;s<r;++s)n=e.getPixelForValue(t[s]),h();for(o=void 0,s=0,r=e.ticks.length;s<r;++s)n=e.getPixelForTick(s),h();return a}function jn(i,e,t,s){return he(i)?function(r,n,o,a){const h=o.parse(r[0],a),_=o.parse(r[1],a),y=Math.min(h,_),v=Math.max(h,_);let C=y,L=v;Math.abs(y)>Math.abs(v)&&(C=v,L=y),n[o.axis]=L,n._custom={barStart:C,barEnd:L,start:h,end:_,min:y,max:v}}(i,e,t,s):e[t.axis]=t.parse(i,s),e}function Un(i,e,t,s){const r=i.iScale,n=i.vScale,o=r.getLabels(),a=r===n,h=[];let _,y,v,C;for(_=t,y=t+s;_<y;++_)C=e[_],v={},v[r.axis]=a||r.parse(o[_],_),h.push(jn(C,v,n,_));return h}function gn(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function Ko(i,e,t,s){let r=e.borderSkipped;const n={};if(!r)return void(i.borderSkipped=n);if(r===!0)return void(i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:h,top:_,bottom:y}=function(v){let C,L,H,P,F;return v.horizontal?(C=v.base>v.x,L="left",H="right"):(C=v.base<v.y,L="bottom",H="top"),C?(P="end",F="start"):(P="start",F="end"),{start:L,end:H,reverse:C,top:P,bottom:F}}(i);r==="middle"&&t&&(i.enableBorderRadius=!0,(t._top||0)===s?r=_:(t._bottom||0)===s?r=y:(n[Vn(y,o,a,h)]=!0,r=_)),n[Vn(r,o,a,h)]=!0,i.borderSkipped=n}function Vn(i,e,t,s){var r,n,o;return s?(o=t,i=qn(i=(r=i)===(n=e)?o:r===o?n:r,t,e)):i=qn(i,e,t),i}function qn(i,e,t){return i==="start"?e:i==="end"?t:i}function Yo(i,{inflateAmount:e},t){i.inflateAmount=e==="auto"?t===1?.33:0:e}class mn extends xt{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:r}}=e.legend.options;return t.labels.map((n,o)=>{const a=e.getDatasetMeta(0).controller.getStyle(o);return{text:n,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let n,o,a=h=>+s[h];if(p(s[e])){const{key:h="value"}=this._parsing;a=_=>+w(s[_],h)}for(n=e,o=e+t;n<o;++n)r._parsed[n]=a(n)}}_getRotation(){return ue(this.options.rotation-90)}_getCircumference(){return ue(this.options.circumference)}_getRotationExtents(){let e=ce,t=-ce;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,n=r._getRotation(),o=r._getCircumference();e=Math.min(e,n),t=Math.max(t,n+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,r=this._cachedMeta,n=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),h=Math.min(m(this.options.cutout,a),1),_=this._getRingWeight(this.index),{circumference:y,rotation:v}=this._getRotationExtents(),{ratioX:C,ratioY:L,offsetX:H,offsetY:P}=function(ae,fe,me){let Ce=1,Ae=1,De=0,He=0;if(fe<ce){const Pe=ae,Me=Pe+fe,Te=Math.cos(Pe),Le=Math.sin(Pe),Ve=Math.cos(Me),_t=Math.sin(Me),lt=(ki,Di,Mi)=>ze(ki,Pe,Me,!0)?1:Math.max(Di,Di*me,Mi,Mi*me),zt=(ki,Di,Mi)=>ze(ki,Pe,Me,!0)?-1:Math.min(Di,Di*me,Mi,Mi*me),di=lt(0,Te,Ve),ui=lt(B,Le,_t),mi=zt(se,Te,Ve),Ei=zt(se+B,Le,_t);Ce=(di-mi)/2,Ae=(ui-Ei)/2,De=-(di+mi)/2,He=-(ui+Ei)/2}return{ratioX:Ce,ratioY:Ae,offsetX:De,offsetY:He}}(v,y,h),F=(s.width-o)/C,$=(s.height-o)/L,te=Math.max(Math.min(F,$)/2,0),Q=k(this.options.radius,te),Z=(Q-Math.max(Q*h,0))/this._getVisibleDatasetWeightTotal();this.offsetX=H*Q,this.offsetY=P*Q,r.total=this.calculateTotal(),this.outerRadius=Q-Z*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Z*_,0),this.updateElements(n,0,n.length,e)}_circumference(e,t){const s=this.options,r=this._cachedMeta,n=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*n/ce)}updateElements(e,t,s,r){const n=r==="reset",o=this.chart,a=o.chartArea,h=o.options.animation,_=(a.left+a.right)/2,y=(a.top+a.bottom)/2,v=n&&h.animateScale,C=v?0:this.innerRadius,L=v?0:this.outerRadius,{sharedOptions:H,includeOptions:P}=this._getSharedOptions(t,r);let F,$=this._getRotation();for(F=0;F<t;++F)$+=this._circumference(F,n);for(F=t;F<t+s;++F){const te=this._circumference(F,n),Q=e[F],Z={x:_+this.offsetX,y:y+this.offsetY,startAngle:$,endAngle:$+te,circumference:te,outerRadius:L,innerRadius:C};P&&(Z.options=H||this.resolveDataElementOptions(F,Q.active?"active":r)),$+=te,this.updateElement(Q,F,Z,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s,r=0;for(s=0;s<t.length;s++){const n=e._parsed[s];n===null||isNaN(n)||!this.chart.getDataVisibility(s)||t[s].hidden||(r+=Math.abs(n))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ce*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,r=s.data.labels||[],n=Mt(t._parsed[e],s.options.locale);return{label:r[e]||"",value:n}}getMaxBorderWidth(e){let t=0;const s=this.chart;let r,n,o,a,h;if(!e){for(r=0,n=s.data.datasets.length;r<n;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,n=e.length;r<n;++r)h=a.resolveDataElementOptions(r),h.borderAlign!=="inner"&&(t=Math.max(t,h.borderWidth||0,h.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,r=e.length;s<r;++s){const n=this.resolveDataElementOptions(s);t=Math.max(t,n.offset||0,n.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(E(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Kn extends xt{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:r}}=e.legend.options;return t.labels.map((n,o)=>{const a=e.getDatasetMeta(0).controller.getStyle(o);return{text:n,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,r=s.data.labels||[],n=Mt(t._parsed[e].r,s.options.locale);return{label:r[e]||"",value:n}}parseObjectData(e,t,s,r){return Hs.bind(this)(e,t,s,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((s,r)=>{const n=this.getParsed(r).r;!isNaN(n)&&this.chart.getDataVisibility(r)&&(n<t.min&&(t.min=n),n>t.max&&(t.max=n))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,s=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),n=Math.max(r/2,0),o=(n-Math.max(s.cutoutPercentage?n/100*s.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=n-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,s,r){const n=r==="reset",o=this.chart,a=o.options.animation,h=this._cachedMeta.rScale,_=h.xCenter,y=h.yCenter,v=h.getIndexAngle(0)-.5*se;let C,L=v;const H=360/this.countVisibleElements();for(C=0;C<t;++C)L+=this._computeAngle(C,r,H);for(C=t;C<t+s;C++){const P=e[C];let F=L,$=L+this._computeAngle(C,r,H),te=o.getDataVisibility(C)?h.getDistanceFromCenterForValue(this.getParsed(C).r):0;L=$,n&&(a.animateScale&&(te=0),a.animateRotate&&(F=$=v));const Q={x:_,y,innerRadius:0,outerRadius:te,startAngle:F,endAngle:$,options:this.resolveDataElementOptions(C,P.active?"active":r)};this.updateElement(P,C,Q,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((s,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&t++}),t}_computeAngle(e,t,s){return this.chart.getDataVisibility(e)?ue(this.resolveDataElementOptions(e,t).angle||s):0}}var Yn=Object.freeze({__proto__:null,BarController:class extends xt{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(i,e,t,s){return Un(i,e,t,s)}parseArrayData(i,e,t,s){return Un(i,e,t,s)}parseObjectData(i,e,t,s){const{iScale:r,vScale:n}=i,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,h=r.axis==="x"?o:a,_=n.axis==="x"?o:a,y=[];let v,C,L,H;for(v=t,C=t+s;v<C;++v)H=e[v],L={},L[r.axis]=r.parse(w(H,h),v),y.push(jn(w(H,_),L,n,v));return y}updateRangeFromParsed(i,e,t,s){super.updateRangeFromParsed(i,e,t,s);const r=t._custom;r&&e===this._cachedMeta.vScale&&(i.min=Math.min(i.min,r.min),i.max=Math.max(i.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(i){const e=this._cachedMeta,{iScale:t,vScale:s}=e,r=this.getParsed(i),n=r._custom,o=gn(n)?"["+n.start+", "+n.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+t.getLabelForValue(r[t.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(i){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,i)}updateElements(i,e,t,s){const r=s==="reset",{index:n,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),h=o.isHorizontal(),_=this._getRuler(),{sharedOptions:y,includeOptions:v}=this._getSharedOptions(e,s);for(let C=e;C<e+t;C++){const L=this.getParsed(C),H=r||Be(L[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(C),P=this._calculateBarIndexPixels(C,_),F=(L._stacks||{})[o.axis],$={horizontal:h,base:H.base,enableBorderRadius:!F||gn(L._custom)||n===F._top||n===F._bottom,x:h?H.head:P.center,y:h?P.center:H.head,height:h?P.size:Math.abs(H.size),width:h?Math.abs(H.size):P.size};v&&($.options=y||this.resolveDataElementOptions(C,i[C].active?"active":s));const te=$.options||i[C].options;Ko($,te,F,n),Yo($,te,_.ratio),this.updateElement(i[C],C,$,s)}}_getStacks(i,e){const{iScale:t}=this._cachedMeta,s=t.getMatchingVisibleMetas(this._type).filter(a=>a.controller.options.grouped),r=t.options.stacked,n=[],o=a=>{const h=a.controller.getParsed(e),_=h&&h[a.vScale.axis];if(Be(_)||isNaN(_))return!0};for(const a of s)if((e===void 0||!o(a))&&((r===!1||n.indexOf(a.stack)===-1||r===void 0&&a.stack===void 0)&&n.push(a.stack),a.index===i))break;return n.length||n.push(void 0),n}_getStackCount(i){return this._getStacks(void 0,i).length}_getStackIndex(i,e,t){const s=this._getStacks(i,t),r=e!==void 0?s.indexOf(e):-1;return r===-1?s.length-1:r}_getRuler(){const i=this.options,e=this._cachedMeta,t=e.iScale,s=[];let r,n;for(r=0,n=e.data.length;r<n;++r)s.push(t.getPixelForValue(this.getParsed(r)[t.axis],r));const o=i.barThickness;return{min:o||qo(e),pixels:s,start:t._startPixel,end:t._endPixel,stackCount:this._getStackCount(),scale:t,grouped:i.grouped,ratio:o?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(i){const{_cachedMeta:{vScale:e,_stacked:t,index:s},options:{base:r,minBarLength:n}}=this,o=r||0,a=this.getParsed(i),h=a._custom,_=gn(h);let y,v,C=a[e.axis],L=0,H=t?this.applyStack(e,a,t):C;H!==C&&(L=H-C,H=C),_&&(C=h.barStart,H=h.barEnd-h.barStart,C!==0&&X(C)!==X(h.barEnd)&&(L=0),L+=C);const P=Be(r)||_?L:r;let F=e.getPixelForValue(P);if(y=this.chart.getDataVisibility(i)?e.getPixelForValue(L+H):F,v=y-F,Math.abs(v)<n){v=function(ae,fe,me){return ae!==0?X(ae):(fe.isHorizontal()?1:-1)*(fe.min>=me?1:-1)}(v,e,o)*n,C===o&&(F-=v/2);const $=e.getPixelForDecimal(0),te=e.getPixelForDecimal(1),Q=Math.min($,te),Z=Math.max($,te);F=Math.max(Math.min(F,Z),Q),y=F+v,t&&!_&&(a._stacks[e.axis]._visualValues[s]=e.getValueForPixel(y)-e.getValueForPixel(F))}if(F===e.getPixelForValue(o)){const $=X(v)*e.getLineWidthForValue(o)/2;F+=$,v-=$}return{size:v,base:F,head:y,center:y+v/2}}_calculateBarIndexPixels(i,e){const t=e.scale,s=this.options,r=s.skipNull,n=E(s.maxBarThickness,1/0);let o,a;if(e.grouped){const h=r?this._getStackCount(i):e.stackCount,_=s.barThickness==="flex"?function(v,C,L,H){const P=C.pixels,F=P[v];let $=v>0?P[v-1]:null,te=v<P.length-1?P[v+1]:null;const Q=L.categoryPercentage;$===null&&($=F-(te===null?C.end-C.start:te-F)),te===null&&(te=F+F-$);const Z=F-(F-Math.min($,te))/2*Q;return{chunk:Math.abs(te-$)/2*Q/H,ratio:L.barPercentage,start:Z}}(i,e,s,h):function(v,C,L,H){const P=L.barThickness;let F,$;return Be(P)?(F=C.min*L.categoryPercentage,$=L.barPercentage):(F=P*H,$=1),{chunk:F/H,ratio:$,start:C.pixels[v]-F/2}}(i,e,s,h),y=this._getStackIndex(this.index,this._cachedMeta.stack,r?i:void 0);o=_.start+_.chunk*y+_.chunk/2,a=Math.min(n,_.chunk*_.ratio)}else o=t.getPixelForValue(this.getParsed(i)[t.axis],i),a=Math.min(n,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const i=this._cachedMeta,e=i.vScale,t=i.data,s=t.length;let r=0;for(;r<s;++r)this.getParsed(r)[e.axis]===null||t[r].hidden||t[r].draw(this._ctx)}},BubbleController:class extends xt{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(i,e,t,s){const r=super.parsePrimitiveData(i,e,t,s);for(let n=0;n<r.length;n++)r[n]._custom=this.resolveDataElementOptions(n+t).radius;return r}parseArrayData(i,e,t,s){const r=super.parseArrayData(i,e,t,s);for(let n=0;n<r.length;n++){const o=e[t+n];r[n]._custom=E(o[2],this.resolveDataElementOptions(n+t).radius)}return r}parseObjectData(i,e,t,s){const r=super.parseObjectData(i,e,t,s);for(let n=0;n<r.length;n++){const o=e[t+n];r[n]._custom=E(o&&o.r&&+o.r,this.resolveDataElementOptions(n+t).radius)}return r}getMaxOverflow(){const i=this._cachedMeta.data;let e=0;for(let t=i.length-1;t>=0;--t)e=Math.max(e,i[t].size(this.resolveDataElementOptions(t))/2);return e>0&&e}getLabelAndValue(i){const e=this._cachedMeta,t=this.chart.data.labels||[],{xScale:s,yScale:r}=e,n=this.getParsed(i),o=s.getLabelForValue(n.x),a=r.getLabelForValue(n.y),h=n._custom;return{label:t[i]||"",value:"("+o+", "+a+(h?", "+h:"")+")"}}update(i){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,i)}updateElements(i,e,t,s){const r=s==="reset",{iScale:n,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:h}=this._getSharedOptions(e,s),_=n.axis,y=o.axis;for(let v=e;v<e+t;v++){const C=i[v],L=!r&&this.getParsed(v),H={},P=H[_]=r?n.getPixelForDecimal(.5):n.getPixelForValue(L[_]),F=H[y]=r?o.getBasePixel():o.getPixelForValue(L[y]);H.skip=isNaN(P)||isNaN(F),h&&(H.options=a||this.resolveDataElementOptions(v,C.active?"active":s),r&&(H.options.radius=0)),this.updateElement(C,v,H,s)}}resolveDataElementOptions(i,e){const t=this.getParsed(i);let s=super.resolveDataElementOptions(i,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return e!=="active"&&(s.radius=0),s.radius+=E(t&&t._custom,r),s}},DoughnutController:mn,LineController:class extends xt{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(i){const e=this._cachedMeta,{dataset:t,data:s=[],_dataset:r}=e,n=this.chart._animationsDisabled;let{start:o,count:a}=Ai(e,s,n);this._drawStart=o,this._drawCount=a,es(e)&&(o=0,a=s.length),t._chart=this.chart,t._datasetIndex=this.index,t._decimated=!!r._decimated,t.points=s;const h=this.resolveDatasetElementOptions(i);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(t,void 0,{animated:!n,options:h},i),this.updateElements(s,o,a,i)}updateElements(i,e,t,s){const r=s==="reset",{iScale:n,vScale:o,_stacked:a,_dataset:h}=this._cachedMeta,{sharedOptions:_,includeOptions:y}=this._getSharedOptions(e,s),v=n.axis,C=o.axis,{spanGaps:L,segment:H}=this.options,P=ie(L)?L:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||r||s==="none",$=e+t,te=i.length;let Q=e>0&&this.getParsed(e-1);for(let Z=0;Z<te;++Z){const ae=i[Z],fe=F?ae:{};if(Z<e||Z>=$){fe.skip=!0;continue}const me=this.getParsed(Z),Ce=Be(me[C]),Ae=fe[v]=n.getPixelForValue(me[v],Z),De=fe[C]=r||Ce?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,me,a):me[C],Z);fe.skip=isNaN(Ae)||isNaN(De)||Ce,fe.stop=Z>0&&Math.abs(me[v]-Q[v])>P,H&&(fe.parsed=me,fe.raw=h.data[Z]),y&&(fe.options=_||this.resolveDataElementOptions(Z,ae.active?"active":s)),F||this.updateElement(ae,Z,fe,s),Q=me}}getMaxOverflow(){const i=this._cachedMeta,e=i.dataset,t=e.options&&e.options.borderWidth||0,s=i.data||[];if(!s.length)return t;const r=s[0].size(this.resolveDataElementOptions(0)),n=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(t,r,n)/2}draw(){const i=this._cachedMeta;i.dataset.updateControlPoints(this.chart.chartArea,i.iScale.axis),super.draw()}},PieController:class extends mn{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:Kn,RadarController:class extends xt{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(i){const e=this._cachedMeta.vScale,t=this.getParsed(i);return{label:e.getLabels()[i],value:""+e.getLabelForValue(t[e.axis])}}parseObjectData(i,e,t,s){return Hs.bind(this)(i,e,t,s)}update(i){const e=this._cachedMeta,t=e.dataset,s=e.data||[],r=e.iScale.getLabels();if(t.points=s,i!=="resize"){const n=this.resolveDatasetElementOptions(i);this.options.showLine||(n.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===s.length,options:n};this.updateElement(t,void 0,o,i)}this.updateElements(s,0,s.length,i)}updateElements(i,e,t,s){const r=this._cachedMeta.rScale,n=s==="reset";for(let o=e;o<e+t;o++){const a=i[o],h=this.resolveDataElementOptions(o,a.active?"active":s),_=r.getPointPositionForValue(o,this.getParsed(o).r),y=n?r.xCenter:_.x,v=n?r.yCenter:_.y,C={x:y,y:v,angle:_.angle,skip:isNaN(y)||isNaN(v),options:h};this.updateElement(a,o,C,s)}}},ScatterController:class extends xt{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(i){const e=this._cachedMeta,t=this.chart.data.labels||[],{xScale:s,yScale:r}=e,n=this.getParsed(i),o=s.getLabelForValue(n.x),a=r.getLabelForValue(n.y);return{label:t[i]||"",value:"("+o+", "+a+")"}}update(i){const e=this._cachedMeta,{data:t=[]}=e,s=this.chart._animationsDisabled;let{start:r,count:n}=Ai(e,t,s);if(this._drawStart=r,this._drawCount=n,es(e)&&(r=0,n=t.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:a}=e;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!a._decimated,o.points=t;const h=this.resolveDatasetElementOptions(i);h.segment=this.options.segment,this.updateElement(o,void 0,{animated:!s,options:h},i)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(t,r,n,i)}addElements(){const{showLine:i}=this.options;!this.datasetElementType&&i&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(i,e,t,s){const r=s==="reset",{iScale:n,vScale:o,_stacked:a,_dataset:h}=this._cachedMeta,_=this.resolveDataElementOptions(e,s),y=this.getSharedOptions(_),v=this.includeOptions(s,y),C=n.axis,L=o.axis,{spanGaps:H,segment:P}=this.options,F=ie(H)?H:Number.POSITIVE_INFINITY,$=this.chart._animationsDisabled||r||s==="none";let te=e>0&&this.getParsed(e-1);for(let Q=e;Q<e+t;++Q){const Z=i[Q],ae=this.getParsed(Q),fe=$?Z:{},me=Be(ae[L]),Ce=fe[C]=n.getPixelForValue(ae[C],Q),Ae=fe[L]=r||me?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,ae,a):ae[L],Q);fe.skip=isNaN(Ce)||isNaN(Ae)||me,fe.stop=Q>0&&Math.abs(ae[C]-te[C])>F,P&&(fe.parsed=ae,fe.raw=h.data[Q]),v&&(fe.options=y||this.resolveDataElementOptions(Q,Z.active?"active":s)),$||this.updateElement(Z,Q,fe,s),te=ae}this.updateSharedOptions(y,s,_)}getMaxOverflow(){const i=this._cachedMeta,e=i.data||[];if(!this.options.showLine){let o=0;for(let a=e.length-1;a>=0;--a)o=Math.max(o,e[a].size(this.resolveDataElementOptions(a))/2);return o>0&&o}const t=i.dataset,s=t.options&&t.options.borderWidth||0;if(!e.length)return s;const r=e[0].size(this.resolveDataElementOptions(0)),n=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(s,r,n)/2}}});function Xo(i,e,t,s){const r=Ns(i.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),n=(t-e)/2,o=Math.min(n,s*e/2),a=h=>{const _=(t-Math.min(n,h))*s/2;return ot(h,0,Math.min(n,_))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ot(r.innerStart,0,o),innerEnd:ot(r.innerEnd,0,o)}}function qs(i,e,t,s){return{x:t+i*Math.cos(e),y:s+i*Math.sin(e)}}function qr(i,e,t,s,r,n){const{x:o,y:a,startAngle:h,pixelMargin:_,innerRadius:y}=e,v=Math.max(e.outerRadius+s+t-_,0),C=y>0?y+s+t+_:0;let L=0;const H=r-h;if(s){const Te=((y>0?y-s:0)+(v>0?v-s:0))/2;L=(H-(Te!==0?H*Te/(Te+s):H))/2}const P=(H-Math.max(.001,H*v-t/se)/v)/2,F=h+P+L,$=r-P-L,{outerStart:te,outerEnd:Q,innerStart:Z,innerEnd:ae}=Xo(e,C,v,$-F),fe=v-te,me=v-Q,Ce=F+te/fe,Ae=$-Q/me,De=C+Z,He=C+ae,Pe=F+Z/De,Me=$-ae/He;if(i.beginPath(),n){const Te=(Ce+Ae)/2;if(i.arc(o,a,v,Ce,Te),i.arc(o,a,v,Te,Ae),Q>0){const lt=qs(me,Ae,o,a);i.arc(lt.x,lt.y,Q,Ae,$+B)}const Le=qs(He,$,o,a);if(i.lineTo(Le.x,Le.y),ae>0){const lt=qs(He,Me,o,a);i.arc(lt.x,lt.y,ae,$+B,Me+Math.PI)}const Ve=($-ae/C+(F+Z/C))/2;if(i.arc(o,a,C,$-ae/C,Ve,!0),i.arc(o,a,C,Ve,F+Z/C,!0),Z>0){const lt=qs(De,Pe,o,a);i.arc(lt.x,lt.y,Z,Pe+Math.PI,F-B)}const _t=qs(fe,F,o,a);if(i.lineTo(_t.x,_t.y),te>0){const lt=qs(fe,Ce,o,a);i.arc(lt.x,lt.y,te,F-B,Ce)}}else{i.moveTo(o,a);const Te=Math.cos(Ce)*v+o,Le=Math.sin(Ce)*v+a;i.lineTo(Te,Le);const Ve=Math.cos(Ae)*v+o,_t=Math.sin(Ae)*v+a;i.lineTo(Ve,_t)}i.closePath()}function Go(i,e,t,s,r){const{fullCircles:n,startAngle:o,circumference:a,options:h}=e,{borderWidth:_,borderJoinStyle:y,borderDash:v,borderDashOffset:C}=h,L=h.borderAlign==="inner";if(!_)return;i.setLineDash(v||[]),i.lineDashOffset=C,L?(i.lineWidth=2*_,i.lineJoin=y||"round"):(i.lineWidth=_,i.lineJoin=y||"bevel");let H=e.endAngle;if(n){qr(i,e,t,s,H,r);for(let P=0;P<n;++P)i.stroke();isNaN(a)||(H=o+(a%ce||ce))}L&&function(P,F,$){const{startAngle:te,pixelMargin:Q,x:Z,y:ae,outerRadius:fe,innerRadius:me}=F;let Ce=Q/fe;P.beginPath(),P.arc(Z,ae,fe,te-Ce,$+Ce),me>Q?(Ce=Q/me,P.arc(Z,ae,me,$+Ce,te-Ce,!0)):P.arc(Z,ae,Q,$+B,te-B),P.closePath(),P.clip()}(i,e,H),n||(qr(i,e,t,s,H,r),i.stroke())}function Xn(i,e,t=e){i.lineCap=E(t.borderCapStyle,e.borderCapStyle),i.setLineDash(E(t.borderDash,e.borderDash)),i.lineDashOffset=E(t.borderDashOffset,e.borderDashOffset),i.lineJoin=E(t.borderJoinStyle,e.borderJoinStyle),i.lineWidth=E(t.borderWidth,e.borderWidth),i.strokeStyle=E(t.borderColor,e.borderColor)}function Jo(i,e,t){i.lineTo(t.x,t.y)}function Gn(i,e,t={}){const s=i.length,{start:r=0,end:n=s-1}=t,{start:o,end:a}=e,h=Math.max(r,o),_=Math.min(n,a),y=r<o&&n<o||r>a&&n>a;return{count:s,start:h,loop:e.loop,ilen:_<h&&!y?s+_-h:_-h}}function Zo(i,e,t,s){const{points:r,options:n}=e,{count:o,start:a,loop:h,ilen:_}=Gn(r,t,s),y=function(F){return F.stepped?Ks:F.tension||F.cubicInterpolationMode==="monotone"?Ys:Jo}(n);let v,C,L,{move:H=!0,reverse:P}=s||{};for(v=0;v<=_;++v)C=r[(a+(P?_-v:v))%o],C.skip||(H?(i.moveTo(C.x,C.y),H=!1):y(i,L,C,P,n.stepped),L=C);return h&&(C=r[(a+(P?_:0))%o],y(i,L,C,P,n.stepped)),!!h}function Qo(i,e,t,s){const r=e.points,{count:n,start:o,ilen:a}=Gn(r,t,s),{move:h=!0,reverse:_}=s||{};let y,v,C,L,H,P,F=0,$=0;const te=Z=>(o+(_?a-Z:Z))%n,Q=()=>{L!==H&&(i.lineTo(F,H),i.lineTo(F,L),i.lineTo(F,P))};for(h&&(v=r[te(0)],i.moveTo(v.x,v.y)),y=0;y<=a;++y){if(v=r[te(y)],v.skip)continue;const Z=v.x,ae=v.y,fe=0|Z;fe===C?(ae<L?L=ae:ae>H&&(H=ae),F=($*F+Z)/++$):(Q(),i.lineTo(Z,ae),C=fe,$=0,L=H=ae),P=ae}Q()}function vn(i){const e=i.options,t=e.borderDash&&e.borderDash.length;return i._decimated||i._loop||e.tension||e.cubicInterpolationMode==="monotone"||e.stepped||t?Zo:Qo}const ea=typeof Path2D=="function";function ta(i,e,t,s){ea&&!e.options.segment?function(r,n,o,a){let h=n._path;h||(h=n._path=new Path2D,n.path(h,o,a)&&h.closePath()),Xn(r,n.options),r.stroke(h)}(i,e,t,s):function(r,n,o,a){const{segments:h,options:_}=n,y=vn(n);for(const v of h)Xn(r,_,v.style),r.beginPath(),y(r,n,v,{start:o,end:o+a-1})&&r.closePath(),r.stroke()}(i,e,t,s)}class Kr extends Ct{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;wr(this._points,s,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ws(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,r=e[t],n=this.points,o=rr(this,{property:t,start:r,end:r});if(!o.length)return;const a=[],h=function(v){return v.stepped?Zs:v.tension||v.cubicInterpolationMode==="monotone"?Er:Nt}(s);let _,y;for(_=0,y=o.length;_<y;++_){const{start:v,end:C}=o[_],L=n[v],H=n[C];if(L===H){a.push(L);continue}const P=h(L,H,Math.abs((r-L[t])/(H[t]-L[t])),s.stepped);P[t]=e[t],a.push(P)}return a.length===1?a[0]:a}pathSegment(e,t,s){return vn(this)(e,this,t,s)}path(e,t,s){const r=this.segments,n=vn(this);let o=this._loop;t=t||0,s=s||this.points.length-t;for(const a of r)o&=n(e,this,a,{start:t,end:t+s-1});return!!o}draw(e,t,s,r){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(e.save(),ta(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Jn(i,e,t,s){const r=i.options,{[t]:n}=i.getProps([t],s);return Math.abs(e-n)<r.radius+r.hitRadius}function Zn(i,e){const{x:t,y:s,base:r,width:n,height:o}=i.getProps(["x","y","base","width","height"],e);let a,h,_,y,v;return i.horizontal?(v=o/2,a=Math.min(t,r),h=Math.max(t,r),_=s-v,y=s+v):(v=n/2,a=t-v,h=t+v,_=Math.min(s,r),y=Math.max(s,r)),{left:a,top:_,right:h,bottom:y}}function ms(i,e,t,s){return i?0:ot(e,t,s)}function ia(i){const e=Zn(i),t=e.right-e.left,s=e.bottom-e.top,r=function(o,a,h){const _=o.options.borderWidth,y=o.borderSkipped,v=Qs(_);return{t:ms(y.top,v.top,0,h),r:ms(y.right,v.right,0,a),b:ms(y.bottom,v.bottom,0,h),l:ms(y.left,v.left,0,a)}}(i,t/2,s/2),n=function(o,a,h){const{enableBorderRadius:_}=o.getProps(["enableBorderRadius"]),y=o.options.borderRadius,v=Pi(y),C=Math.min(a,h),L=o.borderSkipped,H=_||p(y);return{topLeft:ms(!H||L.top||L.left,v.topLeft,0,C),topRight:ms(!H||L.top||L.right,v.topRight,0,C),bottomLeft:ms(!H||L.bottom||L.left,v.bottomLeft,0,C),bottomRight:ms(!H||L.bottom||L.right,v.bottomRight,0,C)}}(i,t/2,s/2);return{outer:{x:e.left,y:e.top,w:t,h:s,radius:n},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,n.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(r.b,r.r))}}}}function bn(i,e,t,s){const r=e===null,n=t===null,o=i&&!(r&&n)&&Zn(i,s);return o&&(r||Ot(e,o.left,o.right))&&(n||Ot(t,o.top,o.bottom))}function sa(i,e){i.rect(e.x,e.y,e.w,e.h)}function yn(i,e,t={}){const s=i.x!==t.x?-e:0,r=i.y!==t.y?-e:0,n=(i.x+i.w!==t.x+t.w?e:0)-s,o=(i.y+i.h!==t.y+t.h?e:0)-r;return{x:i.x+s,y:i.y+r,w:i.w+n,h:i.h+o,radius:i.radius}}var Sn=Object.freeze({__proto__:null,ArcElement:class extends Ct{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(i){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,e,t){const s=this.getProps(["x","y"],t),{angle:r,distance:n}=Ke(s,{x:i,y:e}),{startAngle:o,endAngle:a,innerRadius:h,outerRadius:_,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],t),v=(this.options.spacing+this.options.borderWidth)/2,C=E(y,a-o)>=ce||ze(r,o,a),L=Ot(n,h+v,_+v);return C&&L}getCenterPoint(i){const{x:e,y:t,startAngle:s,endAngle:r,innerRadius:n,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:a,spacing:h}=this.options,_=(s+r)/2,y=(n+o+h+a)/2;return{x:e+Math.cos(_)*y,y:t+Math.sin(_)*y}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){const{options:e,circumference:t}=this,s=(e.offset||0)/4,r=(e.spacing||0)/2,n=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=t>ce?Math.floor(t/ce):0,t===0||this.innerRadius<0||this.outerRadius<0)return;i.save();const o=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(o)*s,Math.sin(o)*s);const a=s*(1-Math.sin(Math.min(se,t||0)));i.fillStyle=e.backgroundColor,i.strokeStyle=e.borderColor,function(h,_,y,v,C){const{fullCircles:L,startAngle:H,circumference:P}=_;let F=_.endAngle;if(L){qr(h,_,y,v,F,C);for(let $=0;$<L;++$)h.fill();isNaN(P)||(F=H+(P%ce||ce))}qr(h,_,y,v,F,C),h.fill()}(i,this,a,r,n),Go(i,this,a,r,n),i.restore()}},BarElement:class extends Ct{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,i&&Object.assign(this,i)}draw(i){const{inflateAmount:e,options:{borderColor:t,backgroundColor:s}}=this,{inner:r,outer:n}=ia(this),o=(a=n.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?ls:sa;var a;i.save(),n.w===r.w&&n.h===r.h||(i.beginPath(),o(i,yn(n,e,r)),i.clip(),o(i,yn(r,-e,n)),i.fillStyle=t,i.fill("evenodd")),i.beginPath(),o(i,yn(r,e)),i.fillStyle=s,i.fill(),i.restore()}inRange(i,e,t){return bn(this,i,e,t)}inXRange(i,e){return bn(this,i,null,e)}inYRange(i,e){return bn(this,null,i,e)}getCenterPoint(i){const{x:e,y:t,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],i);return{x:r?(e+s)/2:e,y:r?t:(t+s)/2}}getRange(i){return i==="x"?this.width/2:this.height/2}},LineElement:Kr,PointElement:class extends Ct{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,e,t){const s=this.options,{x:r,y:n}=this.getProps(["x","y"],t);return Math.pow(i-r,2)+Math.pow(e-n,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(i,e){return Jn(this,i,"x",e)}inYRange(i,e){return Jn(this,i,"y",e)}getCenterPoint(i){const{x:e,y:t}=this.getProps(["x","y"],i);return{x:e,y:t}}size(i){let e=(i=i||this.options||{}).radius||0;return e=Math.max(e,e&&i.hoverRadius||0),2*(e+(e&&i.borderWidth||0))}draw(i,e){const t=this.options;this.skip||t.radius<.1||!vt(this,e,this.size(t)/2)||(i.strokeStyle=t.borderColor,i.lineWidth=t.borderWidth,i.fillStyle=t.backgroundColor,Vi(i,t,this.x,this.y))}getRange(){const i=this.options||{};return i.radius+i.hitRadius}}});function ra(i,e,t,s){const r=i.indexOf(e);return r===-1?((n,o,a,h)=>(typeof o=="string"?(a=n.push(o)-1,h.unshift({index:a,label:o})):isNaN(o)&&(a=null),a))(i,e,t,s):r!==i.lastIndexOf(e)?t:r}function Qn(i){const e=this.getLabels();return i>=0&&i<e.length?e[i]:i}function eo(i,e,{horizontal:t,minRotation:s}){const r=ue(s),n=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+i).length;return Math.min(e/n,o)}class Yr extends Wi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Be(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:r,max:n}=this;const o=h=>r=t?r:h,a=h=>n=s?n:h;if(e){const h=X(r),_=X(n);h<0&&_<0?a(0):h>0&&_>0&&o(0)}if(r===n){let h=n===0?1:Math.abs(.05*n);a(n+h),e||o(r-h)}this.min=r,this.max=n}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:s,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),s=s||11),s&&(t=Math.min(s,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r=function(n,o){const a=[],{bounds:h,step:_,min:y,max:v,precision:C,count:L,maxTicks:H,maxDigits:P,includeBounds:F}=n,$=_||1,te=H-1,{min:Q,max:Z}=o,ae=!Be(y),fe=!Be(v),me=!Be(L),Ce=(Z-Q)/(P+1);let Ae,De,He,Pe,Me=Ne((Z-Q)/te/$)*$;if(Me<1e-14&&!ae&&!fe)return[{value:Q},{value:Z}];Pe=Math.ceil(Z/Me)-Math.floor(Q/Me),Pe>te&&(Me=Ne(Pe*Me/te/$)*$),Be(C)||(Ae=Math.pow(10,C),Me=Math.ceil(Me*Ae)/Ae),h==="ticks"?(De=Math.floor(Q/Me)*Me,He=Math.ceil(Z/Me)*Me):(De=Q,He=Z),ae&&fe&&_&&N((v-y)/_,Me/1e3)?(Pe=Math.round(Math.min((v-y)/Me,H)),Me=(v-y)/Pe,De=y,He=v):me?(De=ae?y:De,He=fe?v:He,Pe=L-1,Me=(He-De)/Pe):(Pe=(He-De)/Me,Pe=be(Pe,Math.round(Pe),Me/1e3)?Math.round(Pe):Math.ceil(Pe));const Te=Math.max(ye(Me),ye(De));Ae=Math.pow(10,Be(C)?Te:C),De=Math.round(De*Ae)/Ae,He=Math.round(He*Ae)/Ae;let Le=0;for(ae&&(F&&De!==y?(a.push({value:y}),De<y&&Le++,be(Math.round((De+Le*Me)*Ae)/Ae,y,eo(y,Ce,n))&&Le++):De<y&&Le++);Le<Pe;++Le){const Ve=Math.round((De+Le*Me)*Ae)/Ae;if(fe&&Ve>v)break;a.push({value:Ve})}return fe&&F&&He!==v?a.length&&be(a[a.length-1].value,v,eo(v,Ce,n))?a[a.length-1].value=v:a.push({value:v}):fe&&He!==v||a.push({value:He}),a}({maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},this._range||this);return e.bounds==="ticks"&&ne(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-t)/Math.max(e.length-1,1)/2;t-=r,s+=r}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return Mt(e,this.chart.options.locale,this.options.ticks.format)}}class na extends Yr{static id="linear";static defaults={ticks:{callback:Et.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=g(e)?e:0,this.max=g(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=ue(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,n.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const fr=i=>Math.floor(J(i)),As=(i,e)=>Math.pow(10,fr(i)+e);function to(i){return i/Math.pow(10,fr(i))===1}function io(i,e,t){const s=Math.pow(10,t),r=Math.floor(i/s);return Math.ceil(e/s)-r}function oa(i,{min:e,max:t}){e=x(i.min,e);const s=[],r=fr(e);let n=function(H,P){let F=fr(P-H);for(;io(H,P,F)>10;)F++;for(;io(H,P,F)<10;)F--;return Math.min(F,fr(H))}(e,t),o=n<0?Math.pow(10,Math.abs(n)):1;const a=Math.pow(10,n),h=r>n?Math.pow(10,r):0,_=Math.round((e-h)*o)/o,y=Math.floor((e-h)/a/10)*a*10;let v=Math.floor((_-y)/Math.pow(10,n)),C=x(i.min,Math.round((h+y+v*Math.pow(10,n))*o)/o);for(;C<t;)s.push({value:C,major:to(C),significand:v}),v>=10?v=v<15?15:20:v++,v>=20&&(n++,v=2,o=n>=0?1:o),C=Math.round((h+y+v*Math.pow(10,n))*o)/o;const L=x(i.max,C);return s.push({value:L,major:to(L),significand:v}),s}class aa extends Wi{static id="logarithmic";static defaults={ticks:{callback:Et.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const s=Yr.prototype.parse.apply(this,[e,t]);if(s!==0)return g(s)&&s>0?s:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=g(e)?Math.max(0,e):null,this.max=g(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!g(this._userMin)&&(this.min=e===As(this.min,0)?As(this.min,-1):As(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let s=this.min,r=this.max;const n=a=>s=e?s:a,o=a=>r=t?r:a;s===r&&(s<=0?(n(1),o(10)):(n(As(s,-1)),o(As(r,1)))),s<=0&&n(As(r,-1)),r<=0&&o(As(s,1)),this.min=s,this.max=r}buildTicks(){const e=this.options,t=oa({min:this._userMin,max:this._userMax},this);return e.bounds==="ticks"&&ne(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return e===void 0?"0":Mt(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=J(e),this._valueRange=J(this.max)-J(e)}getPixelForValue(e){return e!==void 0&&e!==0||(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(J(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function wn(i){const e=i.ticks;if(e.display&&i.display){const t=At(e.backdropPadding);return E(e.font&&e.font.size,gt.font.size)+t.height}return 0}function so(i,e,t,s,r){return i===s||i===r?{start:e-t/2,end:e+t/2}:i<s||i>r?{start:e-t,end:e}:{start:e,end:e+t}}function ha(i){const e={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},t=Object.assign({},e),s=[],r=[],n=i._pointLabels.length,o=i.options.pointLabels,a=o.centerPointLabels?se/n:0;for(let v=0;v<n;v++){const C=o.setContext(i.getPointLabelContext(v));r[v]=C.padding;const L=i.getPointPosition(v,i.drawingArea+r[v],a),H=wt(C.font),P=(h=i.ctx,_=H,y=he(y=i._pointLabels[v])?y:[y],{w:hs(h,_.string,y),h:y.length*_.lineHeight});s[v]=P;const F=Qe(i.getIndexAngle(v)+a),$=Math.round(oe(F));la(t,e,F,so($,L.x,P.w,0,180),so($,L.y,P.h,90,270))}var h,_,y;i.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),i._pointLabelItems=function(v,C,L){const H=[],P=v._pointLabels.length,F=v.options,{centerPointLabels:$,display:te}=F.pointLabels,Q={extra:wn(F)/2,additionalAngle:$?se/P:0};let Z;for(let ae=0;ae<P;ae++){Q.padding=L[ae],Q.size=C[ae];const fe=ca(v,ae,Q);H.push(fe),te==="auto"&&(fe.visible=da(fe,Z),fe.visible&&(Z=fe))}return H}(i,s,r)}function la(i,e,t,s,r){const n=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,h=0;s.start<e.l?(a=(e.l-s.start)/n,i.l=Math.min(i.l,e.l-a)):s.end>e.r&&(a=(s.end-e.r)/n,i.r=Math.max(i.r,e.r+a)),r.start<e.t?(h=(e.t-r.start)/o,i.t=Math.min(i.t,e.t-h)):r.end>e.b&&(h=(r.end-e.b)/o,i.b=Math.max(i.b,e.b+h))}function ca(i,e,t){const s=i.drawingArea,{extra:r,additionalAngle:n,padding:o,size:a}=t,h=i.getPointPosition(e,s+r+o,n),_=Math.round(oe(Qe(h.angle+B))),y=function(L,H,P){return P===90||P===270?L-=H/2:(P>270||P<90)&&(L-=H),L}(h.y,a.h,_),v=function(L){return L===0||L===180?"center":L<180?"left":"right"}(_),C=function(L,H,P){return P==="right"?L-=H:P==="center"&&(L-=H/2),L}(h.x,a.w,v);return{visible:!0,x:h.x,y,textAlign:v,left:C,top:y,right:C+a.w,bottom:y+a.h}}function da(i,e){if(!e)return!0;const{left:t,top:s,right:r,bottom:n}=i;return!(vt({x:t,y:s},e)||vt({x:t,y:n},e)||vt({x:r,y:s},e)||vt({x:r,y:n},e))}function ua(i,e,t){const{left:s,top:r,right:n,bottom:o}=t,{backdropColor:a}=e;if(!Be(a)){const h=Pi(e.borderRadius),_=At(e.backdropPadding);i.fillStyle=a;const y=s-_.left,v=r-_.top,C=n-s+_.width,L=o-r+_.height;Object.values(h).some(H=>H!==0)?(i.beginPath(),ls(i,{x:y,y:v,w:C,h:L,radius:h}),i.fill()):i.fillRect(y,v,C,L)}}function ro(i,e,t,s){const{ctx:r}=i;if(t)r.arc(i.xCenter,i.yCenter,e,0,ce);else{let n=i.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let o=1;o<s;o++)n=i.getPointPosition(o,e),r.lineTo(n.x,n.y)}}class fa extends Yr{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Et.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=At(wn(this.options)/2),t=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(t,s)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=g(e)&&!isNaN(e)?e:0,this.max=g(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/wn(this.options))}generateTickLabels(e){Yr.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,s)=>{const r=D(this.options.pointLabels.callback,[t,s],this);return r||r===0?r:""}).filter((t,s)=>this.chart.getDataVisibility(s))}fit(){const e=this.options;e.display&&e.pointLabels.display?ha(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,s,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((s-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,s,r))}getIndexAngle(e){return Qe(e*(ce/(this._pointLabels.length||1))+ue(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Be(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Be(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const s=t[e];return function(r,n,o){return Kt(r,{label:o,index:n,type:"pointLabel"})}(this.getContext(),e,s)}}getPointPosition(e,t,s=0){const r=this.getIndexAngle(e)-B+s;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:s,right:r,bottom:n}=this._pointLabelItems[e];return{left:t,top:s,right:r,bottom:n}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),ro(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:s,grid:r,border:n}=t,o=this._pointLabels.length;let a,h,_;if(t.pointLabels.display&&function(y,v){const{ctx:C,options:{pointLabels:L}}=y;for(let H=v-1;H>=0;H--){const P=y._pointLabelItems[H];if(!P.visible)continue;const F=L.setContext(y.getPointLabelContext(H));ua(C,F,P);const $=wt(F.font),{x:te,y:Q,textAlign:Z}=P;Ri(C,y._pointLabels[H],te,Q+$.lineHeight/2,$,{color:F.color,textAlign:Z,textBaseline:"middle"})}}(this,o),r.display&&this.ticks.forEach((y,v)=>{if(v!==0||v===0&&this.min<0){h=this.getDistanceFromCenterForValue(y.value);const C=this.getContext(v),L=r.setContext(C),H=n.setContext(C);(function(P,F,$,te,Q){const Z=P.ctx,ae=F.circular,{color:fe,lineWidth:me}=F;!ae&&!te||!fe||!me||$<0||(Z.save(),Z.strokeStyle=fe,Z.lineWidth=me,Z.setLineDash(Q.dash),Z.lineDashOffset=Q.dashOffset,Z.beginPath(),ro(P,$,ae,te),Z.closePath(),Z.stroke(),Z.restore())})(this,L,h,o,H)}}),s.display){for(e.save(),a=o-1;a>=0;a--){const y=s.setContext(this.getPointLabelContext(a)),{color:v,lineWidth:C}=y;C&&v&&(e.lineWidth=C,e.strokeStyle=v,e.setLineDash(y.borderDash),e.lineDashOffset=y.borderDashOffset,h=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),_=this.getPointPosition(a,h),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(_.x,_.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,s=t.ticks;if(!s.display)return;const r=this.getIndexAngle(0);let n,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,h)=>{if(h===0&&this.min>=0&&!t.reverse)return;const _=s.setContext(this.getContext(h)),y=wt(_.font);if(n=this.getDistanceFromCenterForValue(this.ticks[h].value),_.showLabelBackdrop){e.font=y.string,o=e.measureText(a.label).width,e.fillStyle=_.backdropColor;const v=At(_.backdropPadding);e.fillRect(-o/2-v.left,-n-y.size/2-v.top,o+v.width,y.size+v.height)}Ri(e,a.label,0,-n,y,{color:_.color,strokeColor:_.textStrokeColor,strokeWidth:_.textStrokeWidth})}),e.restore()}drawTitle(){}}const Xr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},si=Object.keys(Xr);function no(i,e){return i-e}function oo(i,e){if(Be(e))return null;const t=i._adapter,{parser:s,round:r,isoWeekday:n}=i._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),g(o)||(o=typeof s=="string"?t.parse(o,s):t.parse(o)),o===null?null:(r&&(o=r!=="week"||!ie(n)&&n!==!0?t.startOf(o,r):t.startOf(o,"isoWeek",n)),+o)}function ao(i,e,t,s){const r=si.length;for(let n=si.indexOf(i);n<r-1;++n){const o=Xr[si[n]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=s)return si[n]}return si[r-1]}function ho(i,e,t){if(t){if(t.length){const{lo:s,hi:r}=Yt(t,e);i[t[s]>=e?t[s]:t[r]]=!0}}else i[e]=!0}function lo(i,e,t){const s=[],r={},n=e.length;let o,a;for(o=0;o<n;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return n!==0&&t?function(h,_,y,v){const C=h._adapter,L=+C.startOf(_[0].value,v),H=_[_.length-1].value;let P,F;for(P=L;P<=H;P=+C.add(P,1,v))F=y[P],F>=0&&(_[F].major=!0);return _}(i,s,r,t):s}class xn extends Wi{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),r=this._adapter=new $n._date(e.adapters.date);r.init(t),b(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:oo(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:r,max:n,minDefined:o,maxDefined:a}=this.getUserBounds();function h(_){o||isNaN(_.min)||(r=Math.min(r,_.min)),a||isNaN(_.max)||(n=Math.max(n,_.max))}o&&a||(h(this._getLabelBounds()),e.bounds==="ticks"&&e.ticks.source==="labels"||h(this.getMinMax(!1))),r=g(r)&&!isNaN(r)?r:+t.startOf(Date.now(),s),n=g(n)&&!isNaN(n)?n:+t.endOf(Date.now(),s)+1,this.min=Math.min(r,n-1),this.max=Math.max(r+1,n)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const n=this.min,o=Xt(r,n,this.max);return this._unit=t.unit||(s.autoSkip?ao(t.minUnit,this.min,this.max,this._getLabelCapacity(n)):function(a,h,_,y,v){for(let C=si.length-1;C>=si.indexOf(_);C--){const L=si[C];if(Xr[L].common&&a._adapter.diff(v,y,L)>=h-1)return L}return si[_?si.indexOf(_):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&this._unit!=="year"?function(a){for(let h=si.indexOf(a)+1,_=si.length;h<_;++h)if(Xr[si[h]].common)return si[h]}(this._unit):void 0,this.initOffsets(r),e.reverse&&o.reverse(),lo(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t,s,r=0,n=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=e.length===1?1-t:(this.getDecimalForValue(e[1])-t)/2,s=this.getDecimalForValue(e[e.length-1]),n=e.length===1?s:(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;r=ot(r,0,o),n=ot(n,0,o),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,t=this.min,s=this.max,r=this.options,n=r.time,o=n.unit||ao(n.minUnit,t,s,this._getLabelCapacity(t)),a=E(r.ticks.stepSize,1),h=o==="week"&&n.isoWeekday,_=ie(h)||h===!0,y={};let v,C,L=t;if(_&&(L=+e.startOf(L,"isoWeek",h)),L=+e.startOf(L,_?"day":o),e.diff(s,t,o)>1e5*a)throw new Error(t+" and "+s+" are too far apart with stepSize of "+a+" "+o);const H=r.ticks.source==="data"&&this.getDataTimestamps();for(v=L,C=0;v<s;v=+e.add(v,a,o),C++)ho(y,v,H);return v!==s&&r.bounds!=="ticks"&&C!==1||ho(y,v,H),Object.keys(y).sort(no).map(P=>+P)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,r=this._unit,n=t||s[r];return this._adapter.format(e,n)}_tickFormatFunction(e,t,s,r){const n=this.options,o=n.ticks.callback;if(o)return D(o,[e,t,s],this);const a=n.time.displayFormats,h=this._unit,_=this._majorUnit,y=h&&a[h],v=_&&a[_],C=s[t],L=_&&v&&C&&C.major;return this._adapter.format(e,r||(L?v:y))}generateTickLabels(e){let t,s,r;for(t=0,s=e.length;t<s;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,r=ue(this.isHorizontal()?t.maxRotation:t.minRotation),n=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*n+a*o,h:s*o+a*n}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,r=s[t.unit]||s.millisecond,n=this._tickFormatFunction(e,0,lo(this,[e],this._majorUnit),r),o=this._getLabelSize(n),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,s=this._cache.data||[];if(s.length)return s;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)s=s.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const r=this.getLabels();for(t=0,s=r.length;t<s;++t)e.push(oo(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return bt(e.sort(no))}}function Gr(i,e,t){let s,r,n,o,a=0,h=i.length-1;t?(e>=i[a].pos&&e<=i[h].pos&&({lo:a,hi:h}=Bt(i,"pos",e)),{pos:s,time:n}=i[a],{pos:r,time:o}=i[h]):(e>=i[a].time&&e<=i[h].time&&({lo:a,hi:h}=Bt(i,"time",e)),{time:s,pos:n}=i[a],{time:r,pos:o}=i[h]);const _=r-s;return _?n+(o-n)*(e-s)/_:n}var co=Object.freeze({__proto__:null,CategoryScale:class extends Wi{static id="category";static defaults={ticks:{callback:Qn}};constructor(i){super(i),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(i){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:s,label:r}of e)t[s]===r&&t.splice(s,1);this._addedLabels=[]}super.init(i)}parse(i,e){if(Be(i))return null;const t=this.getLabels();return((s,r)=>s===null?null:ot(Math.round(s),0,r))(e=isFinite(e)&&t[e]===i?e:ra(t,i,E(e,i),this._addedLabels),t.length-1)}determineDataLimits(){const{minDefined:i,maxDefined:e}=this.getUserBounds();let{min:t,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(i||(t=0),e||(s=this.getLabels().length-1)),this.min=t,this.max=s}buildTicks(){const i=this.min,e=this.max,t=this.options.offset,s=[];let r=this.getLabels();r=i===0&&e===r.length-1?r:r.slice(i,e+1),this._valueRange=Math.max(r.length-(t?0:1),1),this._startValue=this.min-(t?.5:0);for(let n=i;n<=e;n++)s.push({value:n});return s}getLabelForValue(i){return Qn.call(this,i)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(i){return typeof i!="number"&&(i=this.parse(i)),i===null?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getPixelForTick(i){const e=this.ticks;return i<0||i>e.length-1?null:this.getPixelForValue(e[i].value)}getValueForPixel(i){return Math.round(this._startValue+this.getDecimalForPixel(i)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:na,LogarithmicScale:aa,RadialLinearScale:fa,TimeScale:xn,TimeSeriesScale:class extends xn{static id="timeseries";static defaults=xn.defaults;constructor(i){super(i),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const i=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(i);this._minPos=Gr(e,this.min),this._tableRange=Gr(e,this.max)-this._minPos,super.initOffsets(i)}buildLookupTable(i){const{min:e,max:t}=this,s=[],r=[];let n,o,a,h,_;for(n=0,o=i.length;n<o;++n)h=i[n],h>=e&&h<=t&&s.push(h);if(s.length<2)return[{time:e,pos:0},{time:t,pos:1}];for(n=0,o=s.length;n<o;++n)_=s[n+1],a=s[n-1],h=s[n],Math.round((_+a)/2)!==h&&r.push({time:h,pos:n/(o-1)});return r}_generate(){const i=this.min,e=this.max;let t=super.getDataTimestamps();return t.includes(i)&&t.length||t.splice(0,0,i),t.includes(e)&&t.length!==1||t.push(e),t.sort((s,r)=>s-r)}_getTimestampsForTable(){let i=this._cache.all||[];if(i.length)return i;const e=this.getDataTimestamps(),t=this.getLabelTimestamps();return i=e.length&&t.length?this.normalize(e.concat(t)):e.length?e:t,i=this._cache.all=i,i}getDecimalForValue(i){return(Gr(this._table,i)-this._minPos)/this._tableRange}getValueForPixel(i){const e=this._offsets,t=this.getDecimalForPixel(i)/e.factor-e.end;return Gr(this._table,t*this._tableRange+this._minPos,!0)}}});const Cn=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],uo=Cn.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function fo(i){return Cn[i%Cn.length]}function _o(i){return uo[i%uo.length]}function _a(i){let e=0;return(t,s)=>{const r=i.getDatasetMeta(s).controller;r instanceof mn?e=function(n,o){return n.backgroundColor=n.data.map(()=>fo(o++)),o}(t,e):r instanceof Kn?e=function(n,o){return n.backgroundColor=n.data.map(()=>_o(o++)),o}(t,e):r&&(e=function(n,o){return n.borderColor=fo(o),n.backgroundColor=_o(o),++o}(t,e))}}function po(i){let e;for(e in i)if(i[e].borderColor||i[e].backgroundColor)return!0;return!1}var pa={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,e,t){if(!t.enabled)return;const{data:{datasets:s},options:r}=i.config,{elements:n}=r;if(!t.forceOverride&&(po(s)||(o=r)&&(o.borderColor||o.backgroundColor)||n&&po(n)))return;var o;const a=_a(i);s.forEach(a)}};function go(i){if(i._decimated){const e=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function mo(i){i.data.datasets.forEach(e=>{go(e)})}var ga={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,e,t)=>{if(!t.enabled)return void mo(i);const s=i.width;i.data.datasets.forEach((r,n)=>{const{_data:o,indexAxis:a}=r,h=i.getDatasetMeta(n),_=o||r.data;if(Xi([a,i.options.indexAxis])==="y"||!h.controller.supportsDecimation)return;const y=i.scales[h.xAxisID];if(y.type!=="linear"&&y.type!=="time"||i.options.parsing)return;let{start:v,count:C}=function(H,P){const F=P.length;let $,te=0;const{iScale:Q}=H,{min:Z,max:ae,minDefined:fe,maxDefined:me}=Q.getUserBounds();return fe&&(te=ot(Bt(P,Q.axis,Z).lo,0,F-1)),$=me?ot(Bt(P,Q.axis,ae).hi+1,te,F)-te:F-te,{start:te,count:$}}(h,_);if(C<=(t.threshold||4*s))return void go(r);let L;switch(Be(o)&&(r._data=_,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(H){this._data=H}})),t.algorithm){case"lttb":L=function(H,P,F,$,te){const Q=te.samples||$;if(Q>=F)return H.slice(P,P+F);const Z=[],ae=(F-2)/(Q-2);let fe=0;const me=P+F-1;let Ce,Ae,De,He,Pe,Me=P;for(Z[fe++]=H[Me],Ce=0;Ce<Q-2;Ce++){let Te,Le=0,Ve=0;const _t=Math.floor((Ce+1)*ae)+1+P,lt=Math.min(Math.floor((Ce+2)*ae)+1,F)+P,zt=lt-_t;for(Te=_t;Te<lt;Te++)Le+=H[Te].x,Ve+=H[Te].y;Le/=zt,Ve/=zt;const di=Math.floor(Ce*ae)+1+P,ui=Math.min(Math.floor((Ce+1)*ae)+1,F)+P,{x:mi,y:Ei}=H[Me];for(De=He=-1,Te=di;Te<ui;Te++)He=.5*Math.abs((mi-Le)*(H[Te].y-Ei)-(mi-H[Te].x)*(Ve-Ei)),He>De&&(De=He,Ae=H[Te],Pe=Te);Z[fe++]=Ae,Me=Pe}return Z[fe++]=H[me],Z}(_,v,C,s,t);break;case"min-max":L=function(H,P,F,$){let te,Q,Z,ae,fe,me,Ce,Ae,De,He,Pe=0,Me=0;const Te=[],Le=P+F-1,Ve=H[P].x,_t=H[Le].x-Ve;for(te=P;te<P+F;++te){Q=H[te],Z=(Q.x-Ve)/_t*$,ae=Q.y;const lt=0|Z;if(lt===fe)ae<De?(De=ae,me=te):ae>He&&(He=ae,Ce=te),Pe=(Me*Pe+Q.x)/++Me;else{const zt=te-1;if(!Be(me)&&!Be(Ce)){const di=Math.min(me,Ce),ui=Math.max(me,Ce);di!==Ae&&di!==zt&&Te.push({...H[di],x:Pe}),ui!==Ae&&ui!==zt&&Te.push({...H[ui],x:Pe})}te>0&&zt!==Ae&&Te.push(H[zt]),Te.push(Q),fe=lt,Me=0,De=He=ae,me=Ce=Ae=te}}return Te}(_,v,C,s);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=L})},destroy(i){mo(i)}};function En(i,e,t,s){if(s)return;let r=e[i],n=t[i];return i==="angle"&&(r=Qe(r),n=Qe(n)),{property:i,start:r,end:n}}function kn(i,e,t){for(;e>i;e--){const s=t[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function vo(i,e,t,s){return i&&e?s(i[t],e[t]):i?i[t]:e?e[t]:0}function bo(i,e){let t=[],s=!1;return he(i)?(s=!0,t=i):t=function(r,n){const{x:o=null,y:a=null}=r||{},h=n.points,_=[];return n.segments.forEach(({start:y,end:v})=>{v=kn(y,v,h);const C=h[y],L=h[v];a!==null?(_.push({x:C.x,y:a}),_.push({x:L.x,y:a})):o!==null&&(_.push({x:o,y:C.y}),_.push({x:o,y:L.y}))}),_}(i,e),t.length?new Kr({points:t,options:{tension:0},_loop:s,_fullLoop:s}):null}function yo(i){return i&&i.fill!==!1}function ma(i,e,t){let s=i[e].fill;const r=[e];let n;if(!t)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!g(s))return s;if(n=i[s],!n)return!1;if(n.visible)return s;r.push(s),s=n.fill}return!1}function va(i,e,t){const s=function(n){const o=n.options,a=o.fill;let h=E(a&&a.target,a);return h===void 0&&(h=!!o.backgroundColor),h===!1||h===null?!1:h===!0?"origin":h}(i);if(p(s))return!isNaN(s.value)&&s;let r=parseFloat(s);return g(r)&&Math.floor(r)===r?function(n,o,a,h){return n!=="-"&&n!=="+"||(a=o+a),a===o||a<0||a>=h?!1:a}(s[0],e,r,t):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function ba(i,e,t){const s=[];for(let r=0;r<t.length;r++){const n=t[r],{first:o,last:a,point:h}=ya(n,e,"x");if(!(!h||o&&a)){if(o)s.unshift(h);else if(i.push(h),!a)break}}i.push(...s)}function ya(i,e,t){const s=i.interpolate(e,t);if(!s)return{};const r=s[t],n=i.segments,o=i.points;let a=!1,h=!1;for(let _=0;_<n.length;_++){const y=n[_],v=o[y.start][t],C=o[y.end][t];if(Ot(r,v,C)){a=r===v,h=r===C;break}}return{first:a,last:h,point:s}}class So{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,s){const{x:r,y:n,radius:o}=this;return t=t||{start:0,end:ce},e.arc(r,n,o,t.end,t.start,!0),!s.bounds}interpolate(e){const{x:t,y:s,radius:r}=this,n=e.angle;return{x:t+Math.cos(n)*r,y:s+Math.sin(n)*r,angle:n}}}function Sa(i){const{chart:e,fill:t,line:s}=i;if(g(t))return function(n,o){const a=n.getDatasetMeta(o);return a&&n.isDatasetVisible(o)?a.dataset:null}(e,t);if(t==="stack")return function(n){const{scale:o,index:a,line:h}=n,_=[],y=h.segments,v=h.points,C=function(L,H){const P=[],F=L.getMatchingVisibleMetas("line");for(let $=0;$<F.length;$++){const te=F[$];if(te.index===H)break;te.hidden||P.unshift(te.dataset)}return P}(o,a);C.push(bo({x:null,y:o.bottom},h));for(let L=0;L<y.length;L++){const H=y[L];for(let P=H.start;P<=H.end;P++)ba(_,v[P],C)}return new Kr({points:_,options:{}})}(i);if(t==="shape")return!0;const r=function(n){return(n.scale||{}).getPointPositionForValue?function(a){const{scale:h,fill:_}=a,y=h.options,v=h.getLabels().length,C=y.reverse?h.max:h.min,L=function(P,F,$){let te;return te=P==="start"?$:P==="end"?F.options.reverse?F.min:F.max:p(P)?P.value:F.getBaseValue(),te}(_,h,C),H=[];if(y.grid.circular){const P=h.getPointPositionForValue(0,C);return new So({x:P.x,y:P.y,radius:h.getDistanceFromCenterForValue(L)})}for(let P=0;P<v;++P)H.push(h.getPointPositionForValue(P,L));return H}(n):function(a){const{scale:h={},fill:_}=a,y=function(v,C){let L=null;return v==="start"?L=C.bottom:v==="end"?L=C.top:p(v)?L=C.getPixelForValue(v.value):C.getBasePixel&&(L=C.getBasePixel()),L}(_,h);if(g(y)){const v=h.isHorizontal();return{x:v?y:null,y:v?null:y}}return null}(n)}(i);return r instanceof So?r:bo(r,s)}function Dn(i,e,t){const s=Sa(e),{line:r,scale:n,axis:o}=e,a=r.options,h=a.fill,_=a.backgroundColor,{above:y=_,below:v=_}=h||{};s&&r.points.length&&(Oi(i,t),function(C,L){const{line:H,target:P,above:F,below:$,area:te,scale:Q}=L,Z=H._loop?"angle":L.axis;C.save(),Z==="x"&&$!==F&&(wo(C,P,te.top),xo(C,{line:H,target:P,color:F,scale:Q,property:Z}),C.restore(),C.save(),wo(C,P,te.bottom)),xo(C,{line:H,target:P,color:$,scale:Q,property:Z}),C.restore()}(i,{line:r,target:s,above:y,below:v,area:t,scale:n,axis:o}),bs(i))}function wo(i,e,t){const{segments:s,points:r}=e;let n=!0,o=!1;i.beginPath();for(const a of s){const{start:h,end:_}=a,y=r[h],v=r[kn(h,_,r)];n?(i.moveTo(y.x,y.y),n=!1):(i.lineTo(y.x,t),i.lineTo(y.x,y.y)),o=!!e.pathSegment(i,a,{move:o}),o?i.closePath():i.lineTo(v.x,t)}i.lineTo(e.first().x,t),i.closePath(),i.clip()}function xo(i,e){const{line:t,target:s,property:r,color:n,scale:o}=e,a=function(h,_,y){const v=h.segments,C=h.points,L=_.points,H=[];for(const P of v){let{start:F,end:$}=P;$=kn(F,$,C);const te=En(y,C[F],C[$],P.loop);if(!_.segments){H.push({source:P,target:te,start:C[F],end:C[$]});continue}const Q=rr(_,te);for(const Z of Q){const ae=En(y,L[Z.start],L[Z.end],Z.loop),fe=sr(P,C,ae);for(const me of fe)H.push({source:me,target:Z,start:{[y]:vo(te,ae,"start",Math.max)},end:{[y]:vo(te,ae,"end",Math.min)}})}}return H}(t,s,r);for(const{source:h,target:_,start:y,end:v}of a){const{style:{backgroundColor:C=n}={}}=h,L=s!==!0;i.save(),i.fillStyle=C,wa(i,o,L&&En(r,y,v)),i.beginPath();const H=!!t.pathSegment(i,h);let P;if(L){H?i.closePath():Co(i,s,v,r);const F=!!s.pathSegment(i,_,{move:H,reverse:!0});P=H&&F,P||Co(i,s,y,r)}i.closePath(),i.fill(P?"evenodd":"nonzero"),i.restore()}}function wa(i,e,t){const{top:s,bottom:r}=e.chart.chartArea,{property:n,start:o,end:a}=t||{};n==="x"&&(i.beginPath(),i.rect(o,s,a-o,r-s),i.clip())}function Co(i,e,t,s){const r=e.interpolate(t,s);r&&i.lineTo(r.x,r.y)}var xa={id:"filler",afterDatasetsUpdate(i,e,t){const s=(i.data.datasets||[]).length,r=[];let n,o,a,h;for(o=0;o<s;++o)n=i.getDatasetMeta(o),a=n.dataset,h=null,a&&a.options&&a instanceof Kr&&(h={visible:i.isDatasetVisible(o),index:o,fill:va(a,o,s),chart:i,axis:n.controller.options.indexAxis,scale:n.vScale,line:a}),n.$filler=h,r.push(h);for(o=0;o<s;++o)h=r[o],h&&h.fill!==!1&&(h.fill=ma(r,o,t.propagate))},beforeDraw(i,e,t){const s=t.drawTime==="beforeDraw",r=i.getSortedVisibleDatasetMetas(),n=i.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(n,a.axis),s&&a.fill&&Dn(i.ctx,a,n))}},beforeDatasetsDraw(i,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const s=i.getSortedVisibleDatasetMetas();for(let r=s.length-1;r>=0;--r){const n=s[r].$filler;yo(n)&&Dn(i.ctx,n,i.chartArea)}},beforeDatasetDraw(i,e,t){const s=e.meta.$filler;yo(s)&&t.drawTime==="beforeDatasetDraw"&&Dn(i.ctx,s,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Eo=(i,e)=>{let{boxHeight:t=e,boxWidth:s=e}=i;return i.usePointStyle&&(t=Math.min(t,e),s=i.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:t,itemHeight:Math.max(e,t)}};class ko extends Ct{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=D(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(s=>e.filter(s,this.chart.data))),e.sort&&(t=t.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const s=e.labels,r=wt(s.font),n=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:h}=Eo(s,n);let _,y;t.font=r.string,this.isHorizontal()?(_=this.maxWidth,y=this._fitRows(o,n,a,h)+10):(y=this.maxHeight,_=this._fitCols(o,r,a,h)+10),this.width=Math.min(_,e.maxWidth||this.maxWidth),this.height=Math.min(y,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,r){const{ctx:n,maxWidth:o,options:{labels:{padding:a}}}=this,h=this.legendHitBoxes=[],_=this.lineWidths=[0],y=r+a;let v=e;n.textAlign="left",n.textBaseline="middle";let C=-1,L=-y;return this.legendItems.forEach((H,P)=>{const F=s+t/2+n.measureText(H.text).width;(P===0||_[_.length-1]+F+2*a>o)&&(v+=y,_[_.length-(P>0?0:1)]=0,L+=y,C++),h[P]={left:0,top:L,row:C,width:F,height:r},_[_.length-1]+=F+a}),v}_fitCols(e,t,s,r){const{ctx:n,maxHeight:o,options:{labels:{padding:a}}}=this,h=this.legendHitBoxes=[],_=this.columnSizes=[],y=o-e;let v=a,C=0,L=0,H=0,P=0;return this.legendItems.forEach((F,$)=>{const{itemWidth:te,itemHeight:Q}=function(Z,ae,fe,me,Ce){const Ae=function(He,Pe,Me,Te){let Le=He.text;return Le&&typeof Le!="string"&&(Le=Le.reduce((Ve,_t)=>Ve.length>_t.length?Ve:_t)),Pe+Me.size/2+Te.measureText(Le).width}(me,Z,ae,fe),De=function(He,Pe,Me){let Te=He;return typeof Pe.text!="string"&&(Te=Do(Pe,Me)),Te}(Ce,me,ae.lineHeight);return{itemWidth:Ae,itemHeight:De}}(s,t,n,F,r);$>0&&L+Q+2*a>y&&(v+=C+a,_.push({width:C,height:L}),H+=C+a,P++,C=L=0),h[$]={left:H,top:L,col:P,width:te,height:Q},C=Math.max(C,te),L+=Q+a}),v+=C,_.push({width:C,height:L}),v}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:r},rtl:n}}=this,o=xi(n,this.left,this.width);if(this.isHorizontal()){let a=0,h=ut(s,this.left+r,this.right-this.lineWidths[a]);for(const _ of t)a!==_.row&&(a=_.row,h=ut(s,this.left+r,this.right-this.lineWidths[a])),_.top+=this.top+e+r,_.left=o.leftForLtr(o.x(h),_.width),h+=_.width+r}else{let a=0,h=ut(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const _ of t)_.col!==a&&(a=_.col,h=ut(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),_.top=h,_.left+=this.left+r,_.left=o.leftForLtr(o.x(_.left),_.width),h+=_.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Oi(e,this),this._draw(),bs(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:r}=this,{align:n,labels:o}=e,a=gt.color,h=xi(e.rtl,this.left,this.width),_=wt(o.font),{padding:y}=o,v=_.size,C=v/2;let L;this.drawTitle(),r.textAlign=h.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=_.string;const{boxWidth:H,boxHeight:P,itemHeight:F}=Eo(o,v),$=this.isHorizontal(),te=this._computeTitleHeight();L=$?{x:ut(n,this.left+y,this.right-s[0]),y:this.top+y+te,line:0}:{x:this.left+y,y:ut(n,this.top+te+y,this.bottom-t[0].height),line:0},tr(this.ctx,e.textDirection);const Q=F+y;this.legendItems.forEach((Z,ae)=>{r.strokeStyle=Z.fontColor,r.fillStyle=Z.fontColor;const fe=r.measureText(Z.text).width,me=h.textAlign(Z.textAlign||(Z.textAlign=o.textAlign)),Ce=H+C+fe;let Ae=L.x,De=L.y;if(h.setWidth(this.width),$?ae>0&&Ae+Ce+y>this.right&&(De=L.y+=Q,L.line++,Ae=L.x=ut(n,this.left+y,this.right-s[L.line])):ae>0&&De+Q>this.bottom&&(Ae=L.x=Ae+t[L.line].width+y,L.line++,De=L.y=ut(n,this.top+te+y,this.bottom-t[L.line].height)),function(He,Pe,Me){if(isNaN(H)||H<=0||isNaN(P)||P<0)return;r.save();const Te=E(Me.lineWidth,1);if(r.fillStyle=E(Me.fillStyle,a),r.lineCap=E(Me.lineCap,"butt"),r.lineDashOffset=E(Me.lineDashOffset,0),r.lineJoin=E(Me.lineJoin,"miter"),r.lineWidth=Te,r.strokeStyle=E(Me.strokeStyle,a),r.setLineDash(E(Me.lineDash,[])),o.usePointStyle){const Le={radius:P*Math.SQRT2/2,pointStyle:Me.pointStyle,rotation:Me.rotation,borderWidth:Te},Ve=h.xPlus(He,H/2);qi(r,Le,Ve,Pe+C,o.pointStyleWidth&&H)}else{const Le=Pe+Math.max((v-P)/2,0),Ve=h.leftForLtr(He,H),_t=Pi(Me.borderRadius);r.beginPath(),Object.values(_t).some(lt=>lt!==0)?ls(r,{x:Ve,y:Le,w:H,h:P,radius:_t}):r.rect(Ve,Le,H,P),r.fill(),Te!==0&&r.stroke()}r.restore()}(h.x(Ae),De,Z),Ae=vs(me,Ae+H+C,$?Ae+Ce:this.right,e.rtl),function(He,Pe,Me){Ri(r,Me.text,He,Pe+F/2,_,{strikethrough:Me.hidden,textAlign:h.textAlign(Me.textAlign)})}(h.x(Ae),De,Z),$)L.x+=Ce+y;else if(typeof Z.text!="string"){const He=_.lineHeight;L.y+=Do(Z,He)+y}else L.y+=Q}),ir(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=wt(t.font),r=At(t.padding);if(!t.display)return;const n=xi(e.rtl,this.left,this.width),o=this.ctx,a=t.position,h=s.size/2,_=r.top+h;let y,v=this.left,C=this.width;if(this.isHorizontal())C=Math.max(...this.lineWidths),y=this.top+_,v=ut(e.align,v,this.right-C);else{const H=this.columnSizes.reduce((P,F)=>Math.max(P,F.height),0);y=_+ut(e.align,this.top,this.bottom-H-e.labels.padding-this._computeTitleHeight())}const L=ut(a,v,v+C);o.textAlign=n.textAlign(et(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=s.string,Ri(o,t.text,L,y,s)}_computeTitleHeight(){const e=this.options.title,t=wt(e.font),s=At(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,r,n;if(Ot(e,this.left,this.right)&&Ot(t,this.top,this.bottom)){for(n=this.legendHitBoxes,s=0;s<n.length;++s)if(r=n[s],Ot(e,r.left,r.left+r.width)&&Ot(t,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const t=this.options;if(!function(o,a){return!!((o==="mousemove"||o==="mouseout")&&(a.onHover||a.onLeave)||a.onClick&&(o==="click"||o==="mouseup"))}(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const o=this._hoveredItem,a=(n=s,(r=o)!==null&&n!==null&&r.datasetIndex===n.datasetIndex&&r.index===n.index);o&&!a&&D(t.onLeave,[e,o,this],this),this._hoveredItem=s,s&&!a&&D(t.onHover,[e,s,this],this)}else s&&D(t.onClick,[e,s,this],this);var r,n}}function Do(i,e){return e*(i.text?i.text.length:0)}var Ca={id:"legend",_element:ko,start(i,e,t){const s=i.legend=new ko({ctx:i.ctx,options:t,chart:i});Lt.configure(i,s,t),Lt.addBox(i,s)},stop(i){Lt.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,e,t){const s=i.legend;Lt.configure(i,s,t),s.options=t},afterUpdate(i){const e=i.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(i,e){e.replay||i.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,e,t){const s=e.datasetIndex,r=t.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const e=i.data.datasets,{labels:{usePointStyle:t,pointStyle:s,textAlign:r,color:n,useBorderRadius:o,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(h=>{const _=h.controller.getStyle(t?0:void 0),y=At(_.borderWidth);return{text:e[h.index].label,fillStyle:_.backgroundColor,fontColor:n,hidden:!h.visible,lineCap:_.borderCapStyle,lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:_.borderColor,pointStyle:s||_.pointStyle,rotation:_.rotation,textAlign:r||_.textAlign,borderRadius:o&&(a||_.borderRadius),datasetIndex:h.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Mn extends Ct{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=he(s.text)?s.text.length:1;this._padding=At(s.padding);const n=r*wt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:s,bottom:r,right:n,options:o}=this,a=o.align;let h,_,y,v=0;return this.isHorizontal()?(_=ut(a,s,n),y=t+e,h=n-s):(o.position==="left"?(_=s+e,y=ut(a,r,t),v=-.5*se):(_=n-e,y=ut(a,t,r),v=.5*se),h=r-t),{titleX:_,titleY:y,maxWidth:h,rotation:v}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=wt(t.font),r=s.lineHeight/2+this._padding.top,{titleX:n,titleY:o,maxWidth:a,rotation:h}=this._drawArgs(r);Ri(e,t.text,0,0,s,{color:t.color,maxWidth:a,rotation:h,textAlign:et(t.align),textBaseline:"middle",translation:[n,o]})}}var Ea={id:"title",_element:Mn,start(i,e,t){(function(s,r){const n=new Mn({ctx:s.ctx,options:r,chart:s});Lt.configure(s,n,r),Lt.addBox(s,n),s.titleBlock=n})(i,t)},stop(i){const e=i.titleBlock;Lt.removeBox(i,e),delete i.titleBlock},beforeUpdate(i,e,t){const s=i.titleBlock;Lt.configure(i,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Jr=new WeakMap;var ka={id:"subtitle",start(i,e,t){const s=new Mn({ctx:i.ctx,options:t,chart:i});Lt.configure(i,s,t),Lt.addBox(i,s),Jr.set(i,s)},stop(i){Lt.removeBox(i,Jr.get(i)),Jr.delete(i)},beforeUpdate(i,e,t){const s=Jr.get(i);Lt.configure(i,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const _r={average(i){if(!i.length)return!1;let e,t,s=new Set,r=0,n=0;for(e=0,t=i.length;e<t;++e){const o=i[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();s.add(a.x),r+=a.y,++n}}return{x:[...s].reduce((o,a)=>o+a)/s.size,y:r/n}},nearest(i,e){if(!i.length)return!1;let t,s,r,n=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(t=0,s=i.length;t<s;++t){const h=i[t].element;if(h&&h.hasValue()){const _=ct(e,h.getCenterPoint());_<a&&(a=_,r=h)}}if(r){const h=r.tooltipPosition();n=h.x,o=h.y}return{x:n,y:o}}};function zi(i,e){return e&&(he(e)?Array.prototype.push.apply(i,e):i.push(e)),i}function Qi(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function Da(i,e){const{element:t,datasetIndex:s,index:r}=e,n=i.getDatasetMeta(s).controller,{label:o,value:a}=n.getLabelAndValue(r);return{chart:i,label:o,parsed:n.getParsed(r),raw:i.data.datasets[s].data[r],formattedValue:a,dataset:n.getDataset(),dataIndex:r,datasetIndex:s,element:t}}function Mo(i,e){const t=i.chart.ctx,{body:s,footer:r,title:n}=i,{boxWidth:o,boxHeight:a}=e,h=wt(e.bodyFont),_=wt(e.titleFont),y=wt(e.footerFont),v=n.length,C=r.length,L=s.length,H=At(e.padding);let P=H.height,F=0,$=s.reduce((Z,ae)=>Z+ae.before.length+ae.lines.length+ae.after.length,0);$+=i.beforeBody.length+i.afterBody.length,v&&(P+=v*_.lineHeight+(v-1)*e.titleSpacing+e.titleMarginBottom),$&&(P+=L*(e.displayColors?Math.max(a,h.lineHeight):h.lineHeight)+($-L)*h.lineHeight+($-1)*e.bodySpacing),C&&(P+=e.footerMarginTop+C*y.lineHeight+(C-1)*e.footerSpacing);let te=0;const Q=function(Z){F=Math.max(F,t.measureText(Z).width+te)};return t.save(),t.font=_.string,T(i.title,Q),t.font=h.string,T(i.beforeBody.concat(i.afterBody),Q),te=e.displayColors?o+2+e.boxPadding:0,T(s,Z=>{T(Z.before,Q),T(Z.lines,Q),T(Z.after,Q)}),te=0,t.font=y.string,T(i.footer,Q),t.restore(),F+=H.width,{width:F,height:P}}function Ma(i,e,t,s){const{x:r,width:n}=t,{width:o,chartArea:{left:a,right:h}}=i;let _="center";return s==="center"?_=r<=(a+h)/2?"left":"right":r<=n/2?_="left":r>=o-n/2&&(_="right"),function(y,v,C,L){const{x:H,width:P}=L,F=C.caretSize+C.caretPadding;return y==="left"&&H+P+F>v.width||y==="right"&&H-P-F<0||void 0}(_,i,e,t)&&(_="center"),_}function Ao(i,e,t){const s=t.yAlign||e.yAlign||function(r,n){const{y:o,height:a}=n;return o<a/2?"top":o>r.height-a/2?"bottom":"center"}(i,t);return{xAlign:t.xAlign||e.xAlign||Ma(i,e,t,s),yAlign:s}}function Lo(i,e,t,s){const{caretSize:r,caretPadding:n,cornerRadius:o}=i,{xAlign:a,yAlign:h}=t,_=r+n,{topLeft:y,topRight:v,bottomLeft:C,bottomRight:L}=Pi(o);let H=function(F,$){let{x:te,width:Q}=F;return $==="right"?te-=Q:$==="center"&&(te-=Q/2),te}(e,a);const P=function(F,$,te){let{y:Q,height:Z}=F;return $==="top"?Q+=te:Q-=$==="bottom"?Z+te:Z/2,Q}(e,h,_);return h==="center"?a==="left"?H+=_:a==="right"&&(H-=_):a==="left"?H-=Math.max(y,C)+r:a==="right"&&(H+=Math.max(v,L)+r),{x:ot(H,0,s.width-e.width),y:ot(P,0,s.height-e.height)}}function Zr(i,e,t){const s=At(t.padding);return e==="center"?i.x+i.width/2:e==="right"?i.x+i.width-s.right:i.x+s.left}function To(i){return zi([],Qi(i))}function Oo(i,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?i.override(t):i}const Ro={beforeTitle:je,title(i){if(i.length>0){const e=i[0],t=e.chart.data.labels,s=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return t[e.dataIndex]}return""},afterTitle:je,beforeBody:je,beforeLabel:je,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let e=i.dataset.label||"";e&&(e+=": ");const t=i.formattedValue;return Be(t)||(e+=t),e},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:je,afterBody:je,beforeFooter:je,footer:je,afterFooter:je};function ri(i,e,t,s){const r=i[e].call(t,s);return r===void 0?Ro[e].call(t,s):r}class Po extends Ct{static positioners=_r;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&t.options.animation&&s.animations,n=new dr(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,s=this._tooltipItems,Kt(e,{tooltip:t,tooltipItems:s,type:"tooltip"})));var e,t,s}getTitle(e,t){const{callbacks:s}=t,r=ri(s,"beforeTitle",this,e),n=ri(s,"title",this,e),o=ri(s,"afterTitle",this,e);let a=[];return a=zi(a,Qi(r)),a=zi(a,Qi(n)),a=zi(a,Qi(o)),a}getBeforeBody(e,t){return To(ri(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,r=[];return T(e,n=>{const o={before:[],lines:[],after:[]},a=Oo(s,n);zi(o.before,Qi(ri(a,"beforeLabel",this,n))),zi(o.lines,ri(a,"label",this,n)),zi(o.after,Qi(ri(a,"afterLabel",this,n))),r.push(o)}),r}getAfterBody(e,t){return To(ri(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,r=ri(s,"beforeFooter",this,e),n=ri(s,"footer",this,e),o=ri(s,"afterFooter",this,e);let a=[];return a=zi(a,Qi(r)),a=zi(a,Qi(n)),a=zi(a,Qi(o)),a}_createItems(e){const t=this._active,s=this.chart.data,r=[],n=[],o=[];let a,h,_=[];for(a=0,h=t.length;a<h;++a)_.push(Da(this.chart,t[a]));return e.filter&&(_=_.filter((y,v,C)=>e.filter(y,v,C,s))),e.itemSort&&(_=_.sort((y,v)=>e.itemSort(y,v,s))),T(_,y=>{const v=Oo(e.callbacks,y);r.push(ri(v,"labelColor",this,y)),n.push(ri(v,"labelPointStyle",this,y)),o.push(ri(v,"labelTextColor",this,y))}),this.labelColors=r,this.labelPointStyles=n,this.labelTextColors=o,this.dataPoints=_,_}update(e,t){const s=this.options.setContext(this.getContext()),r=this._active;let n,o=[];if(r.length){const a=_r[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const h=this._size=Mo(this,s),_=Object.assign({},a,h),y=Ao(this.chart,s,_),v=Lo(s,_,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,n={opacity:1,x:v.x,y:v.y,width:h.width,height:h.height,caretX:a.x,caretY:a.y}}else this.opacity!==0&&(n={opacity:0});this._tooltipItems=o,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,r){const n=this.getCaretPosition(e,s,r);t.lineTo(n.x1,n.y1),t.lineTo(n.x2,n.y2),t.lineTo(n.x3,n.y3)}getCaretPosition(e,t,s){const{xAlign:r,yAlign:n}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:h,topRight:_,bottomLeft:y,bottomRight:v}=Pi(a),{x:C,y:L}=e,{width:H,height:P}=t;let F,$,te,Q,Z,ae;return n==="center"?(Z=L+P/2,r==="left"?(F=C,$=F-o,Q=Z+o,ae=Z-o):(F=C+H,$=F+o,Q=Z-o,ae=Z+o),te=F):($=r==="left"?C+Math.max(h,y)+o:r==="right"?C+H-Math.max(_,v)-o:this.caretX,n==="top"?(Q=L,Z=Q-o,F=$-o,te=$+o):(Q=L+P,Z=Q+o,F=$+o,te=$-o),ae=Q),{x1:F,x2:$,x3:te,y1:Q,y2:Z,y3:ae}}drawTitle(e,t,s){const r=this.title,n=r.length;let o,a,h;if(n){const _=xi(s.rtl,this.x,this.width);for(e.x=Zr(this,s.titleAlign,s),t.textAlign=_.textAlign(s.titleAlign),t.textBaseline="middle",o=wt(s.titleFont),a=s.titleSpacing,t.fillStyle=s.titleColor,t.font=o.string,h=0;h<n;++h)t.fillText(r[h],_.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,h+1===n&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,t,s,r,n){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:h,boxWidth:_}=n,y=wt(n.bodyFont),v=Zr(this,"left",n),C=r.x(v),L=h<y.lineHeight?(y.lineHeight-h)/2:0,H=t.y+L;if(n.usePointStyle){const P={radius:Math.min(_,h)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},F=r.leftForLtr(C,_)+_/2,$=H+h/2;e.strokeStyle=n.multiKeyBackground,e.fillStyle=n.multiKeyBackground,Vi(e,P,F,$),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Vi(e,P,F,$)}else{e.lineWidth=p(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const P=r.leftForLtr(C,_),F=r.leftForLtr(r.xPlus(C,1),_-2),$=Pi(o.borderRadius);Object.values($).some(te=>te!==0)?(e.beginPath(),e.fillStyle=n.multiKeyBackground,ls(e,{x:P,y:H,w:_,h,radius:$}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),ls(e,{x:F,y:H+1,w:_-2,h:h-2,radius:$}),e.fill()):(e.fillStyle=n.multiKeyBackground,e.fillRect(P,H,_,h),e.strokeRect(P,H,_,h),e.fillStyle=o.backgroundColor,e.fillRect(F,H+1,_-2,h-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:r}=this,{bodySpacing:n,bodyAlign:o,displayColors:a,boxHeight:h,boxWidth:_,boxPadding:y}=s,v=wt(s.bodyFont);let C=v.lineHeight,L=0;const H=xi(s.rtl,this.x,this.width),P=function(Ce){t.fillText(Ce,H.x(e.x+L),e.y+C/2),e.y+=C+n},F=H.textAlign(o);let $,te,Q,Z,ae,fe,me;for(t.textAlign=o,t.textBaseline="middle",t.font=v.string,e.x=Zr(this,F,s),t.fillStyle=s.bodyColor,T(this.beforeBody,P),L=a&&F!=="right"?o==="center"?_/2+y:_+2+y:0,Z=0,fe=r.length;Z<fe;++Z){for($=r[Z],te=this.labelTextColors[Z],t.fillStyle=te,T($.before,P),Q=$.lines,a&&Q.length&&(this._drawColorBox(t,e,Z,H,s),C=Math.max(v.lineHeight,h)),ae=0,me=Q.length;ae<me;++ae)P(Q[ae]),C=v.lineHeight;T($.after,P)}L=0,C=v.lineHeight,T(this.afterBody,P),e.y-=n}drawFooter(e,t,s){const r=this.footer,n=r.length;let o,a;if(n){const h=xi(s.rtl,this.x,this.width);for(e.x=Zr(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=h.textAlign(s.footerAlign),t.textBaseline="middle",o=wt(s.footerFont),t.fillStyle=s.footerColor,t.font=o.string,a=0;a<n;++a)t.fillText(r[a],h.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,t,s,r){const{xAlign:n,yAlign:o}=this,{x:a,y:h}=e,{width:_,height:y}=s,{topLeft:v,topRight:C,bottomLeft:L,bottomRight:H}=Pi(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+v,h),o==="top"&&this.drawCaret(e,t,s,r),t.lineTo(a+_-C,h),t.quadraticCurveTo(a+_,h,a+_,h+C),o==="center"&&n==="right"&&this.drawCaret(e,t,s,r),t.lineTo(a+_,h+y-H),t.quadraticCurveTo(a+_,h+y,a+_-H,h+y),o==="bottom"&&this.drawCaret(e,t,s,r),t.lineTo(a+L,h+y),t.quadraticCurveTo(a,h+y,a,h+y-L),o==="center"&&n==="left"&&this.drawCaret(e,t,s,r),t.lineTo(a,h+v),t.quadraticCurveTo(a,h,a+v,h),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,r=s&&s.x,n=s&&s.y;if(r||n){const o=_r[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Mo(this,e),h=Object.assign({},o,this._size),_=Ao(t,e,h),y=Lo(e,h,_,t);r._to===y.x&&n._to===y.y||(this.xAlign=_.xAlign,this.yAlign=_.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},n={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=At(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(n,e,r,t),tr(e,t.textDirection),n.y+=o.top,this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),ir(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,r=e.map(({datasetIndex:a,index:h})=>{const _=this.chart.getDatasetMeta(a);if(!_)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:_.data[h],index:h}}),n=!S(s,r),o=this._positionChanged(r,t);(n||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,n=this._active||[],o=this._getActiveElements(e,n,t,s),a=this._positionChanged(o,e),h=t||!S(o,n)||a;return h&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,s,r){const n=this.options;if(e.type==="mouseout")return[];if(!r)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,n.mode,n,s);return n.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:s,caretY:r,options:n}=this,o=_r[n.position].call(this,e,t);return o!==!1&&(s!==o.x||r!==o.y)}}var Aa={id:"tooltip",_element:Po,positioners:_r,afterInit(i,e,t){t&&(i.tooltip=new Po({chart:i,options:t}))},beforeUpdate(i,e,t){i.tooltip&&i.tooltip.initialize(t)},reset(i,e,t){i.tooltip&&i.tooltip.initialize(t)},afterDraw(i){const e=i.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(i.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",t)}},afterEvent(i,e){if(i.tooltip){const t=e.replay;i.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,e)=>e.bodyFont.size,boxWidth:(i,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ro},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};return Tt.register(Yn,co,Sn,it),Tt.helpers={...nn},Tt._adapters=$n,Tt.Animation=ks,Tt.Animations=dr,Tt.animator=Vt,Tt.controllers=Ci.controllers.items,Tt.DatasetController=xt,Tt.Element=Ct,Tt.elements=Sn,Tt.Interaction=fs,Tt.layouts=Lt,Tt.platforms=Nr,Tt.Scale=Wi,Tt.Ticks=Et,Object.assign(Tt,Yn,co,Sn,it,Nr),Tt.Chart=Tt,typeof window<"u"&&(window.Chart=Tt),Tt}),function(it,je){if(typeof exports=="object"&&typeof module=="object")module.exports=je();else if(typeof define=="function"&&define.amd)define([],je);else{var dt=je();for(var Be in dt)(typeof exports=="object"?exports:it)[Be]=dt[Be]}}(globalThis,()=>(()=>{"use strict";var it={4567:function(he,p,g){var x=this&&this.__decorate||function(l,c,b,M){var A,R=arguments.length,w=R<3?c:M===null?M=Object.getOwnPropertyDescriptor(c,b):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(l,c,b,M);else for(var I=l.length-1;I>=0;I--)(A=l[I])&&(w=(R<3?A(w):R>3?A(c,b,w):A(c,b))||w);return R>3&&w&&Object.defineProperty(c,b,w),w},E=this&&this.__param||function(l,c){return function(b,M){c(b,M,l)}};Object.defineProperty(p,"__esModule",{value:!0}),p.AccessibilityManager=void 0;const m=g(9042),k=g(9924),D=g(844),T=g(4725),S=g(2585),d=g(3656);let u=p.AccessibilityManager=class extends D.Disposable{constructor(l,c,b,M){super(),this._terminal=l,this._coreBrowserService=b,this._renderService=M,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let A=0;A<this._terminal.rows;A++)this._rowElements[A]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[A]);if(this._topBoundaryFocusListener=A=>this._handleBoundaryFocus(A,0),this._bottomBoundaryFocusListener=A=>this._handleBoundaryFocus(A,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new k.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(A=>this._handleResize(A.rows))),this.register(this._terminal.onRender(A=>this._refreshRows(A.start,A.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(A=>this._handleChar(A))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(A=>this._handleTab(A))),this.register(this._terminal.onKey(A=>this._handleKey(A.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,d.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,D.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(l){for(let c=0;c<l;c++)this._handleChar(" ")}_handleChar(l){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==l&&(this._charsToAnnounce+=l):this._charsToAnnounce+=l,l===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=m.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(l){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(l)||this._charsToConsume.push(l)}_refreshRows(l,c){this._liveRegionDebouncer.refresh(l,c,this._terminal.rows)}_renderRows(l,c){const b=this._terminal.buffer,M=b.lines.length.toString();for(let A=l;A<=c;A++){const R=b.lines.get(b.ydisp+A),w=[],I=R?.translateToString(!0,void 0,void 0,w)||"",V=(b.ydisp+A+1).toString(),j=this._rowElements[A];j&&(I.length===0?(j.innerText="\xA0",this._rowColumns.set(j,[0,1])):(j.textContent=I,this._rowColumns.set(j,w)),j.setAttribute("aria-posinset",V),j.setAttribute("aria-setsize",M))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(l,c){const b=l.target,M=this._rowElements[c===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")===(c===0?"1":`${this._terminal.buffer.lines.length}`)||l.relatedTarget!==M)return;let A,R;if(c===0?(A=b,R=this._rowElements.pop(),this._rowContainer.removeChild(R)):(A=this._rowElements.shift(),R=b,this._rowContainer.removeChild(A)),A.removeEventListener("focus",this._topBoundaryFocusListener),R.removeEventListener("focus",this._bottomBoundaryFocusListener),c===0){const w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else{const w=this._createAccessibilityTreeNode();this._rowElements.push(w),this._rowContainer.appendChild(w)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(c===0?-1:1),this._rowElements[c===0?1:this._rowElements.length-2].focus(),l.preventDefault(),l.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const l=document.getSelection();if(!l)return;if(l.isCollapsed)return void(this._rowContainer.contains(l.anchorNode)&&this._terminal.clearSelection());if(!l.anchorNode||!l.focusNode)return void console.error("anchorNode and/or focusNode are null");let c={node:l.anchorNode,offset:l.anchorOffset},b={node:l.focusNode,offset:l.focusOffset};if((c.node.compareDocumentPosition(b.node)&Node.DOCUMENT_POSITION_PRECEDING||c.node===b.node&&c.offset>b.offset)&&([c,b]=[b,c]),c.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(c={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(c.node))return;const M=this._rowElements.slice(-1)[0];if(b.node.compareDocumentPosition(M)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(b={node:M,offset:M.textContent?.length??0}),!this._rowContainer.contains(b.node))return;const A=({node:I,offset:V})=>{const j=I instanceof Text?I.parentNode:I;let ee=parseInt(j?.getAttribute("aria-posinset"),10)-1;if(isNaN(ee))return console.warn("row is invalid. Race condition?"),null;const W=this._rowColumns.get(j);if(!W)return console.warn("columns is null. Race condition?"),null;let se=V<W.length?W[V]:W.slice(-1)[0]+1;return se>=this._terminal.cols&&(++ee,se=0),{row:ee,column:se}},R=A(c),w=A(b);if(R&&w){if(R.row>w.row||R.row===w.row&&R.column>=w.column)throw new Error("invalid range");this._terminal.select(R.column,R.row,(w.row-R.row)*this._terminal.cols-R.column+w.column)}}_handleResize(l){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>l;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const l=this._coreBrowserService.mainDocument.createElement("div");return l.setAttribute("role","listitem"),l.tabIndex=-1,this._refreshRowDimensions(l),l}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let l=0;l<this._terminal.rows;l++)this._refreshRowDimensions(this._rowElements[l])}}_refreshRowDimensions(l){l.style.height=`${this._renderService.dimensions.css.cell.height}px`}};p.AccessibilityManager=u=x([E(1,S.IInstantiationService),E(2,T.ICoreBrowserService),E(3,T.IRenderService)],u)},3614:(he,p)=>{function g(k){return k.replace(/\r?\n/g,"\r")}function x(k,D){return D?"\x1B[200~"+k+"\x1B[201~":k}function E(k,D,T,S){k=x(k=g(k),T.decPrivateModes.bracketedPasteMode&&S.rawOptions.ignoreBracketedPasteMode!==!0),T.triggerDataEvent(k,!0),D.value=""}function m(k,D,T){const S=T.getBoundingClientRect(),d=k.clientX-S.left-10,u=k.clientY-S.top-10;D.style.width="20px",D.style.height="20px",D.style.left=`${d}px`,D.style.top=`${u}px`,D.style.zIndex="1000",D.focus()}Object.defineProperty(p,"__esModule",{value:!0}),p.rightClickHandler=p.moveTextAreaUnderMouseCursor=p.paste=p.handlePasteEvent=p.copyHandler=p.bracketTextForPaste=p.prepareTextForTerminal=void 0,p.prepareTextForTerminal=g,p.bracketTextForPaste=x,p.copyHandler=function(k,D){k.clipboardData&&k.clipboardData.setData("text/plain",D.selectionText),k.preventDefault()},p.handlePasteEvent=function(k,D,T,S){k.stopPropagation(),k.clipboardData&&E(k.clipboardData.getData("text/plain"),D,T,S)},p.paste=E,p.moveTextAreaUnderMouseCursor=m,p.rightClickHandler=function(k,D,T,S,d){m(k,D,T),d&&S.rightClickSelect(k),D.value=S.selectionText,D.select()}},7239:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ColorContrastCache=void 0;const x=g(1505);p.ColorContrastCache=class{constructor(){this._color=new x.TwoKeyMap,this._css=new x.TwoKeyMap}setCss(E,m,k){this._css.set(E,m,k)}getCss(E,m){return this._css.get(E,m)}setColor(E,m,k){this._color.set(E,m,k)}getColor(E,m){return this._color.get(E,m)}clear(){this._color.clear(),this._css.clear()}}},3656:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.addDisposableDomListener=void 0,p.addDisposableDomListener=function(g,x,E,m){g.addEventListener(x,E,m);let k=!1;return{dispose:()=>{k||(k=!0,g.removeEventListener(x,E,m))}}}},3551:function(he,p,g){var x=this&&this.__decorate||function(u,l,c,b){var M,A=arguments.length,R=A<3?l:b===null?b=Object.getOwnPropertyDescriptor(l,c):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(u,l,c,b);else for(var w=u.length-1;w>=0;w--)(M=u[w])&&(R=(A<3?M(R):A>3?M(l,c,R):M(l,c))||R);return A>3&&R&&Object.defineProperty(l,c,R),R},E=this&&this.__param||function(u,l){return function(c,b){l(c,b,u)}};Object.defineProperty(p,"__esModule",{value:!0}),p.Linkifier=void 0;const m=g(3656),k=g(8460),D=g(844),T=g(2585),S=g(4725);let d=p.Linkifier=class extends D.Disposable{get currentLink(){return this._currentLink}constructor(u,l,c,b,M){super(),this._element=u,this._mouseService=l,this._renderService=c,this._bufferService=b,this._linkProviderService=M,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new k.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new k.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,D.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,D.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,m.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,m.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,m.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,m.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(u){this._lastMouseEvent=u;const l=this._positionFromMouseEvent(u,this._element,this._mouseService);if(!l)return;this._isMouseOut=!1;const c=u.composedPath();for(let b=0;b<c.length;b++){const M=c[b];if(M.classList.contains("xterm"))break;if(M.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._handleHover(l),this._lastBufferCell=l)}_handleHover(u){if(this._activeLine!==u.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(u,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,u)||(this._clearCurrentLink(),this._askForLink(u,!0))}_askForLink(u,l){this._activeProviderReplies&&l||(this._activeProviderReplies?.forEach(b=>{b?.forEach(M=>{M.link.dispose&&M.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=u.y);let c=!1;for(const[b,M]of this._linkProviderService.linkProviders.entries())l?this._activeProviderReplies?.get(b)&&(c=this._checkLinkProviderResult(b,u,c)):M.provideLinks(u.y,A=>{if(this._isMouseOut)return;const R=A?.map(w=>({link:w}));this._activeProviderReplies?.set(b,R),c=this._checkLinkProviderResult(b,u,c),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(u.y,this._activeProviderReplies)})}_removeIntersectingLinks(u,l){const c=new Set;for(let b=0;b<l.size;b++){const M=l.get(b);if(M)for(let A=0;A<M.length;A++){const R=M[A],w=R.link.range.start.y<u?0:R.link.range.start.x,I=R.link.range.end.y>u?this._bufferService.cols:R.link.range.end.x;for(let V=w;V<=I;V++){if(c.has(V)){M.splice(A--,1);break}c.add(V)}}}}_checkLinkProviderResult(u,l,c){if(!this._activeProviderReplies)return c;const b=this._activeProviderReplies.get(u);let M=!1;for(let A=0;A<u;A++)this._activeProviderReplies.has(A)&&!this._activeProviderReplies.get(A)||(M=!0);if(!M&&b){const A=b.find(R=>this._linkAtPosition(R.link,l));A&&(c=!0,this._handleNewLink(A))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!c)for(let A=0;A<this._activeProviderReplies.size;A++){const R=this._activeProviderReplies.get(A)?.find(w=>this._linkAtPosition(w.link,l));if(R){c=!0,this._handleNewLink(R);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(u){if(!this._currentLink)return;const l=this._positionFromMouseEvent(u,this._element,this._mouseService);l&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(u,this._currentLink.link.text)}_clearCurrentLink(u,l){this._currentLink&&this._lastMouseEvent&&(!u||!l||this._currentLink.link.range.start.y>=u&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,D.disposeArray)(this._linkCacheDisposables))}_handleNewLink(u){if(!this._lastMouseEvent)return;const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(u.link,l)&&(this._currentLink=u,this._currentLink.state={decorations:{underline:u.link.decorations===void 0||u.link.decorations.underline,pointerCursor:u.link.decorations===void 0||u.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,u.link,this._lastMouseEvent),u.link.decorations={},Object.defineProperties(u.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:c=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",c))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:c=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(u.link,c))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(c=>{if(!this._currentLink)return;const b=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,M=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=b&&this._currentLink.link.range.end.y<=M&&(this._clearCurrentLink(b,M),this._lastMouseEvent)){const A=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);A&&this._askForLink(A,!1)}})))}_linkHover(u,l,c){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&u.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(c,l.text)}_fireUnderlineEvent(u,l){const c=u.range,b=this._bufferService.buffer.ydisp,M=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-b-1,c.end.x,c.end.y-b-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(M)}_linkLeave(u,l,c){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&u.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(c,l.text)}_linkAtPosition(u,l){const c=u.range.start.y*this._bufferService.cols+u.range.start.x,b=u.range.end.y*this._bufferService.cols+u.range.end.x,M=l.y*this._bufferService.cols+l.x;return c<=M&&M<=b}_positionFromMouseEvent(u,l,c){const b=c.getCoords(u,l,this._bufferService.cols,this._bufferService.rows);if(b)return{x:b[0],y:b[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(u,l,c,b,M){return{x1:u,y1:l,x2:c,y2:b,cols:this._bufferService.cols,fg:M}}};p.Linkifier=d=x([E(1,S.IMouseService),E(2,S.IRenderService),E(3,T.IBufferService),E(4,S.ILinkProviderService)],d)},9042:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.tooMuchOutput=p.promptLabel=void 0,p.promptLabel="Terminal input",p.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(he,p,g){var x=this&&this.__decorate||function(S,d,u,l){var c,b=arguments.length,M=b<3?d:l===null?l=Object.getOwnPropertyDescriptor(d,u):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(S,d,u,l);else for(var A=S.length-1;A>=0;A--)(c=S[A])&&(M=(b<3?c(M):b>3?c(d,u,M):c(d,u))||M);return b>3&&M&&Object.defineProperty(d,u,M),M},E=this&&this.__param||function(S,d){return function(u,l){d(u,l,S)}};Object.defineProperty(p,"__esModule",{value:!0}),p.OscLinkProvider=void 0;const m=g(511),k=g(2585);let D=p.OscLinkProvider=class{constructor(S,d,u){this._bufferService=S,this._optionsService=d,this._oscLinkService=u}provideLinks(S,d){const u=this._bufferService.buffer.lines.get(S-1);if(!u)return void d(void 0);const l=[],c=this._optionsService.rawOptions.linkHandler,b=new m.CellData,M=u.getTrimmedLength();let A=-1,R=-1,w=!1;for(let I=0;I<M;I++)if(R!==-1||u.hasContent(I)){if(u.loadCell(I,b),b.hasExtendedAttrs()&&b.extended.urlId){if(R===-1){R=I,A=b.extended.urlId;continue}w=b.extended.urlId!==A}else R!==-1&&(w=!0);if(w||R!==-1&&I===M-1){const V=this._oscLinkService.getLinkData(A)?.uri;if(V){const j={start:{x:R+1,y:S},end:{x:I+(w||I!==M-1?0:1),y:S}};let ee=!1;if(!c?.allowNonHttpProtocols)try{const W=new URL(V);["http:","https:"].includes(W.protocol)||(ee=!0)}catch{ee=!0}ee||l.push({text:V,range:j,activate:(W,se)=>c?c.activate(W,se,j):T(0,se),hover:(W,se)=>c?.hover?.(W,se,j),leave:(W,se)=>c?.leave?.(W,se,j)})}w=!1,b.hasExtendedAttrs()&&b.extended.urlId?(R=I,A=b.extended.urlId):(R=-1,A=-1)}}d(l)}};function T(S,d){if(confirm(`Do you want to navigate to ${d}?

WARNING: This link could potentially be dangerous`)){const u=window.open();if(u){try{u.opener=null}catch{}u.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}}p.OscLinkProvider=D=x([E(0,k.IBufferService),E(1,k.IOptionsService),E(2,k.IOscLinkService)],D)},6193:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.RenderDebouncer=void 0,p.RenderDebouncer=class{constructor(g,x){this._renderCallback=g,this._coreBrowserService=x,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(g){return this._refreshCallbacks.push(g),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(g,x,E){this._rowCount=E,g=g!==void 0?g:0,x=x!==void 0?x:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,g):g,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,x):x,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const g=Math.max(this._rowStart,0),x=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(g,x),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const g of this._refreshCallbacks)g(0);this._refreshCallbacks=[]}}},3236:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Terminal=void 0;const x=g(3614),E=g(3656),m=g(3551),k=g(9042),D=g(3730),T=g(1680),S=g(3107),d=g(5744),u=g(2950),l=g(1296),c=g(428),b=g(4269),M=g(5114),A=g(8934),R=g(3230),w=g(9312),I=g(4725),V=g(6731),j=g(8055),ee=g(8969),W=g(8460),se=g(844),ce=g(6114),ve=g(8437),Se=g(2584),ge=g(7399),B=g(5941),z=g(9074),U=g(2585),J=g(5435),X=g(4567),be=g(779);class Ne extends ee.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(ie={}){super(ie),this.browser=ce,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new se.MutableDisposable),this._onCursorMove=this.register(new W.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new W.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new W.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new W.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new W.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new W.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new W.EventEmitter),this._onBlur=this.register(new W.EventEmitter),this._onA11yCharEmitter=this.register(new W.EventEmitter),this._onA11yTabEmitter=this.register(new W.EventEmitter),this._onWillOpen=this.register(new W.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(z.DecorationService),this._instantiationService.setService(U.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(be.LinkProviderService),this._instantiationService.setService(I.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(D.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((N,ne)=>this.refresh(N,ne))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(N=>this._reportWindowsOptions(N))),this.register(this._inputHandler.onColor(N=>this._handleColorEvent(N))),this.register((0,W.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,W.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,W.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,W.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(N=>this._afterResize(N.cols,N.rows))),this.register((0,se.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(ie){if(this._themeService)for(const N of ie){let ne,ue="";switch(N.index){case 256:ne="foreground",ue="10";break;case 257:ne="background",ue="11";break;case 258:ne="cursor",ue="12";break;default:ne="ansi",ue="4;"+N.index}switch(N.type){case 0:const oe=j.color.toColorRGB(ne==="ansi"?this._themeService.colors.ansi[N.index]:this._themeService.colors[ne]);this.coreService.triggerDataEvent(`${Se.C0.ESC}]${ue};${(0,B.toRgbString)(oe)}${Se.C1_ESCAPED.ST}`);break;case 1:if(ne==="ansi")this._themeService.modifyColors(ye=>ye.ansi[N.index]=j.channels.toColor(...N.color));else{const ye=ne;this._themeService.modifyColors(Ke=>Ke[ye]=j.channels.toColor(...N.color))}break;case 2:this._themeService.restoreColor(N.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(ie){ie?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(X.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(ie){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Se.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Se.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const ie=this.buffer.ybase+this.buffer.y,N=this.buffer.lines.get(ie);if(!N)return;const ne=Math.min(this.buffer.x,this.cols-1),ue=this._renderService.dimensions.css.cell.height,oe=N.getWidth(ne),ye=this._renderService.dimensions.css.cell.width*oe,Ke=this.buffer.y*this._renderService.dimensions.css.cell.height,ct=ne*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ct+"px",this.textarea.style.top=Ke+"px",this.textarea.style.width=ye+"px",this.textarea.style.height=ue+"px",this.textarea.style.lineHeight=ue+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,E.addDisposableDomListener)(this.element,"copy",N=>{this.hasSelection()&&(0,x.copyHandler)(N,this._selectionService)}));const ie=N=>(0,x.handlePasteEvent)(N,this.textarea,this.coreService,this.optionsService);this.register((0,E.addDisposableDomListener)(this.textarea,"paste",ie)),this.register((0,E.addDisposableDomListener)(this.element,"paste",ie)),ce.isFirefox?this.register((0,E.addDisposableDomListener)(this.element,"mousedown",N=>{N.button===2&&(0,x.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,E.addDisposableDomListener)(this.element,"contextmenu",N=>{(0,x.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),ce.isLinux&&this.register((0,E.addDisposableDomListener)(this.element,"auxclick",N=>{N.button===1&&(0,x.moveTextAreaUnderMouseCursor)(N,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,E.addDisposableDomListener)(this.textarea,"keyup",ie=>this._keyUp(ie),!0)),this.register((0,E.addDisposableDomListener)(this.textarea,"keydown",ie=>this._keyDown(ie),!0)),this.register((0,E.addDisposableDomListener)(this.textarea,"keypress",ie=>this._keyPress(ie),!0)),this.register((0,E.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,E.addDisposableDomListener)(this.textarea,"compositionupdate",ie=>this._compositionHelper.compositionupdate(ie))),this.register((0,E.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,E.addDisposableDomListener)(this.textarea,"input",ie=>this._inputEvent(ie),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(ie){if(!ie)throw new Error("Terminal requires a parent element.");if(ie.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=ie.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),ie.appendChild(this.element);const N=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),N.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,E.addDisposableDomListener)(this.screenElement,"mousemove",ne=>this.updateCursorStyle(ne))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),N.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",k.promptLabel),ce.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(M.CoreBrowserService,this.textarea,ie.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(I.ICoreBrowserService,this._coreBrowserService),this.register((0,E.addDisposableDomListener)(this.textarea,"focus",ne=>this._handleTextAreaFocus(ne))),this.register((0,E.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(I.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(V.ThemeService),this._instantiationService.setService(I.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(b.CharacterJoinerService),this._instantiationService.setService(I.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(R.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(I.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(ne=>this._onRender.fire(ne))),this.onResize(ne=>this._renderService.resize(ne.cols,ne.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(u.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(A.MouseService),this._instantiationService.setService(I.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(m.Linkifier,this.screenElement)),this.element.appendChild(N);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(T.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(ne=>this.scrollLines(ne.amount,ne.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(w.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(I.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(ne=>this.scrollLines(ne.amount,ne.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(ne=>this._renderService.handleSelectionChanged(ne.start,ne.end,ne.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(ne=>{this.textarea.value=ne,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(ne=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,E.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(S.BufferDecorationRenderer,this.screenElement)),this.register((0,E.addDisposableDomListener)(this.element,"mousedown",ne=>this._selectionService.handleMouseDown(ne))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(X.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",ne=>this._handleScreenReaderModeOptionChange(ne))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(d.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",ne=>{!this._overviewRulerRenderer&&ne&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(d.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(l.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const ie=this,N=this.element;function ne(ye){const Ke=ie._mouseService.getMouseReportCoords(ye,ie.screenElement);if(!Ke)return!1;let ct,ht;switch(ye.overrideType||ye.type){case"mousemove":ht=32,ye.buttons===void 0?(ct=3,ye.button!==void 0&&(ct=ye.button<3?ye.button:3)):ct=1&ye.buttons?0:4&ye.buttons?1:2&ye.buttons?2:3;break;case"mouseup":ht=0,ct=ye.button<3?ye.button:3;break;case"mousedown":ht=1,ct=ye.button<3?ye.button:3;break;case"wheel":if(ie._customWheelEventHandler&&ie._customWheelEventHandler(ye)===!1||ie.viewport.getLinesScrolled(ye)===0)return!1;ht=ye.deltaY<0?0:1,ct=4;break;default:return!1}return!(ht===void 0||ct===void 0||ct>4)&&ie.coreMouseService.triggerMouseEvent({col:Ke.col,row:Ke.row,x:Ke.x,y:Ke.y,button:ct,action:ht,ctrl:ye.ctrlKey,alt:ye.altKey,shift:ye.shiftKey})}const ue={mouseup:null,wheel:null,mousedrag:null,mousemove:null},oe={mouseup:ye=>(ne(ye),ye.buttons||(this._document.removeEventListener("mouseup",ue.mouseup),ue.mousedrag&&this._document.removeEventListener("mousemove",ue.mousedrag)),this.cancel(ye)),wheel:ye=>(ne(ye),this.cancel(ye,!0)),mousedrag:ye=>{ye.buttons&&ne(ye)},mousemove:ye=>{ye.buttons||ne(ye)}};this.register(this.coreMouseService.onProtocolChange(ye=>{ye?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ye)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ye?ue.mousemove||(N.addEventListener("mousemove",oe.mousemove),ue.mousemove=oe.mousemove):(N.removeEventListener("mousemove",ue.mousemove),ue.mousemove=null),16&ye?ue.wheel||(N.addEventListener("wheel",oe.wheel,{passive:!1}),ue.wheel=oe.wheel):(N.removeEventListener("wheel",ue.wheel),ue.wheel=null),2&ye?ue.mouseup||(ue.mouseup=oe.mouseup):(this._document.removeEventListener("mouseup",ue.mouseup),ue.mouseup=null),4&ye?ue.mousedrag||(ue.mousedrag=oe.mousedrag):(this._document.removeEventListener("mousemove",ue.mousedrag),ue.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,E.addDisposableDomListener)(N,"mousedown",ye=>{if(ye.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ye))return ne(ye),ue.mouseup&&this._document.addEventListener("mouseup",ue.mouseup),ue.mousedrag&&this._document.addEventListener("mousemove",ue.mousedrag),this.cancel(ye)})),this.register((0,E.addDisposableDomListener)(N,"wheel",ye=>{if(!ue.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(ye)===!1)return!1;if(!this.buffer.hasScrollback){const Ke=this.viewport.getLinesScrolled(ye);if(Ke===0)return;const ct=Se.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ye.deltaY<0?"A":"B");let ht="";for(let Qe=0;Qe<Math.abs(Ke);Qe++)ht+=ct;return this.coreService.triggerDataEvent(ht,!0),this.cancel(ye,!0)}return this.viewport.handleWheel(ye)?this.cancel(ye):void 0}},{passive:!1})),this.register((0,E.addDisposableDomListener)(N,"touchstart",ye=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ye),this.cancel(ye)},{passive:!0})),this.register((0,E.addDisposableDomListener)(N,"touchmove",ye=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ye)?void 0:this.cancel(ye)},{passive:!1}))}refresh(ie,N){this._renderService?.refreshRows(ie,N)}updateCursorStyle(ie){this._selectionService?.shouldColumnSelect(ie)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(ie,N,ne=0){ne===1?(super.scrollLines(ie,N,ne),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(ie)}paste(ie){(0,x.paste)(ie,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(ie){this._customKeyEventHandler=ie}attachCustomWheelEventHandler(ie){this._customWheelEventHandler=ie}registerLinkProvider(ie){return this._linkProviderService.registerLinkProvider(ie)}registerCharacterJoiner(ie){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const N=this._characterJoinerService.register(ie);return this.refresh(0,this.rows-1),N}deregisterCharacterJoiner(ie){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(ie)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(ie){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+ie)}registerDecoration(ie){return this._decorationService.registerDecoration(ie)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(ie,N,ne){this._selectionService.setSelection(ie,N,ne)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(ie,N){this._selectionService?.selectLines(ie,N)}_keyDown(ie){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(ie)===!1)return!1;const N=this.browser.isMac&&this.options.macOptionIsMeta&&ie.altKey;if(!N&&!this._compositionHelper.keydown(ie))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;N||ie.key!=="Dead"&&ie.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ne=(0,ge.evaluateKeyboardEvent)(ie,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(ie),ne.type===3||ne.type===2){const ue=this.rows-1;return this.scrollLines(ne.type===2?-ue:ue),this.cancel(ie,!0)}return ne.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,ie)||(ne.cancel&&this.cancel(ie,!0),!ne.key||!!(ie.key&&!ie.ctrlKey&&!ie.altKey&&!ie.metaKey&&ie.key.length===1&&ie.key.charCodeAt(0)>=65&&ie.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ne.key!==Se.C0.ETX&&ne.key!==Se.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ne.key,domEvent:ie}),this._showCursor(),this.coreService.triggerDataEvent(ne.key,!0),!this.optionsService.rawOptions.screenReaderMode||ie.altKey||ie.ctrlKey?this.cancel(ie,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(ie,N){const ne=ie.isMac&&!this.options.macOptionIsMeta&&N.altKey&&!N.ctrlKey&&!N.metaKey||ie.isWindows&&N.altKey&&N.ctrlKey&&!N.metaKey||ie.isWindows&&N.getModifierState("AltGraph");return N.type==="keypress"?ne:ne&&(!N.keyCode||N.keyCode>47)}_keyUp(ie){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(ie)===!1||(function(N){return N.keyCode===16||N.keyCode===17||N.keyCode===18}(ie)||this.focus(),this.updateCursorStyle(ie),this._keyPressHandled=!1)}_keyPress(ie){let N;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(ie)===!1)return!1;if(this.cancel(ie),ie.charCode)N=ie.charCode;else if(ie.which===null||ie.which===void 0)N=ie.keyCode;else{if(ie.which===0||ie.charCode===0)return!1;N=ie.which}return!(!N||(ie.altKey||ie.ctrlKey||ie.metaKey)&&!this._isThirdLevelShift(this.browser,ie)||(N=String.fromCharCode(N),this._onKey.fire({key:N,domEvent:ie}),this._showCursor(),this.coreService.triggerDataEvent(N,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(ie){if(ie.data&&ie.inputType==="insertText"&&(!ie.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const N=ie.data;return this.coreService.triggerDataEvent(N,!0),this.cancel(ie),!0}return!1}resize(ie,N){ie!==this.cols||N!==this.rows?super.resize(ie,N):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(ie,N){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let ie=1;ie<this.rows;ie++)this.buffer.lines.push(this.buffer.getBlankLine(ve.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const ie=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=ie,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(Se.C0.ESC+"[I"):this.coreService.triggerDataEvent(Se.C0.ESC+"[O")}_reportWindowsOptions(ie){if(this._renderService)switch(ie){case J.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const N=this._renderService.dimensions.css.canvas.width.toFixed(0),ne=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Se.C0.ESC}[4;${ne};${N}t`);break;case J.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ue=this._renderService.dimensions.css.cell.width.toFixed(0),oe=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Se.C0.ESC}[6;${oe};${ue}t`)}}cancel(ie,N){if(this.options.cancelEvents||N)return ie.preventDefault(),ie.stopPropagation(),!1}}p.Terminal=Ne},9924:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.TimeBasedDebouncer=void 0,p.TimeBasedDebouncer=class{constructor(g,x=1e3){this._renderCallback=g,this._debounceThresholdMS=x,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(g,x,E){this._rowCount=E,g=g!==void 0?g:0,x=x!==void 0?x:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,g):g,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,x):x;const m=Date.now();if(m-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=m,this._innerRefresh();else if(!this._additionalRefreshRequested){const k=m-this._lastRefreshMs,D=this._debounceThresholdMS-k;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},D)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const g=Math.max(this._rowStart,0),x=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(g,x)}}},1680:function(he,p,g){var x=this&&this.__decorate||function(u,l,c,b){var M,A=arguments.length,R=A<3?l:b===null?b=Object.getOwnPropertyDescriptor(l,c):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(u,l,c,b);else for(var w=u.length-1;w>=0;w--)(M=u[w])&&(R=(A<3?M(R):A>3?M(l,c,R):M(l,c))||R);return A>3&&R&&Object.defineProperty(l,c,R),R},E=this&&this.__param||function(u,l){return function(c,b){l(c,b,u)}};Object.defineProperty(p,"__esModule",{value:!0}),p.Viewport=void 0;const m=g(3656),k=g(4725),D=g(8460),T=g(844),S=g(2585);let d=p.Viewport=class extends T.Disposable{constructor(u,l,c,b,M,A,R,w){super(),this._viewportElement=u,this._scrollArea=l,this._bufferService=c,this._optionsService=b,this._charSizeService=M,this._renderService=A,this._coreBrowserService=R,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new D.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,m.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(I=>this._activeBuffer=I.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(I=>this._renderDimensions=I)),this._handleThemeChange(w.colors),this.register(w.onChangeColors(I=>this._handleThemeChange(I))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(u){this._viewportElement.style.backgroundColor=u.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(u){if(u)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const l=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==l&&(this._lastRecordedBufferHeight=l,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==u&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=u),this._refreshAnimationFrame=null}syncScrollArea(u=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(u);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(u)}_handleScroll(u){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const u=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(u*(this._smoothScrollState.target-this._smoothScrollState.origin)),u<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(u,l){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(l<0&&this._viewportElement.scrollTop!==0||l>0&&c<this._lastRecordedBufferHeight)||(u.cancelable&&u.preventDefault(),!1)}handleWheel(u){const l=this._getPixelsScrolled(u);return l!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+l:this._smoothScrollState.target+=l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=l,this._bubbleScroll(u,l))}scrollLines(u){if(u!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const l=u*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!1})}_getPixelsScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let l=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l}getBufferElements(u,l){let c,b="";const M=[],A=l??this._bufferService.buffer.lines.length,R=this._bufferService.buffer.lines;for(let w=u;w<A;w++){const I=R.get(w);if(!I)continue;const V=R.get(w+1)?.isWrapped;if(b+=I.translateToString(!V),!V||w===R.length-1){const j=document.createElement("div");j.textContent=b,M.push(j),b.length>0&&(c=j),b=""}}return{bufferElements:M,cursorElement:c}}getLinesScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let l=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l}_applyScrollModifier(u,l){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&l.altKey||c==="ctrl"&&l.ctrlKey||c==="shift"&&l.shiftKey?u*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:u*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(u){this._lastTouchY=u.touches[0].pageY}handleTouchMove(u){const l=this._lastTouchY-u.touches[0].pageY;return this._lastTouchY=u.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(u,l))}};p.Viewport=d=x([E(2,S.IBufferService),E(3,S.IOptionsService),E(4,k.ICharSizeService),E(5,k.IRenderService),E(6,k.ICoreBrowserService),E(7,k.IThemeService)],d)},3107:function(he,p,g){var x=this&&this.__decorate||function(S,d,u,l){var c,b=arguments.length,M=b<3?d:l===null?l=Object.getOwnPropertyDescriptor(d,u):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(S,d,u,l);else for(var A=S.length-1;A>=0;A--)(c=S[A])&&(M=(b<3?c(M):b>3?c(d,u,M):c(d,u))||M);return b>3&&M&&Object.defineProperty(d,u,M),M},E=this&&this.__param||function(S,d){return function(u,l){d(u,l,S)}};Object.defineProperty(p,"__esModule",{value:!0}),p.BufferDecorationRenderer=void 0;const m=g(4725),k=g(844),D=g(2585);let T=p.BufferDecorationRenderer=class extends k.Disposable{constructor(S,d,u,l,c){super(),this._screenElement=S,this._bufferService=d,this._coreBrowserService=u,this._decorationService=l,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(b=>this._removeDecoration(b))),this.register((0,k.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const S of this._decorationService.decorations)this._renderDecoration(S);this._dimensionsChanged=!1}_renderDecoration(S){this._refreshStyle(S),this._dimensionsChanged&&this._refreshXPosition(S)}_createElement(S){const d=this._coreBrowserService.mainDocument.createElement("div");d.classList.add("xterm-decoration"),d.classList.toggle("xterm-decoration-top-layer",S?.options?.layer==="top"),d.style.width=`${Math.round((S.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,d.style.height=(S.options.height||1)*this._renderService.dimensions.css.cell.height+"px",d.style.top=(S.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",d.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const u=S.options.x??0;return u&&u>this._bufferService.cols&&(d.style.display="none"),this._refreshXPosition(S,d),d}_refreshStyle(S){const d=S.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)S.element&&(S.element.style.display="none",S.onRenderEmitter.fire(S.element));else{let u=this._decorationElements.get(S);u||(u=this._createElement(S),S.element=u,this._decorationElements.set(S,u),this._container.appendChild(u),S.onDispose(()=>{this._decorationElements.delete(S),u.remove()})),u.style.top=d*this._renderService.dimensions.css.cell.height+"px",u.style.display=this._altBufferIsActive?"none":"block",S.onRenderEmitter.fire(u)}}_refreshXPosition(S,d=S.element){if(!d)return;const u=S.options.x??0;(S.options.anchor||"left")==="right"?d.style.right=u?u*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=u?u*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(S){this._decorationElements.get(S)?.remove(),this._decorationElements.delete(S),S.dispose()}};p.BufferDecorationRenderer=T=x([E(1,D.IBufferService),E(2,m.ICoreBrowserService),E(3,D.IDecorationService),E(4,m.IRenderService)],T)},5871:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ColorZoneStore=void 0,p.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(g){if(g.options.overviewRulerOptions){for(const x of this._zones)if(x.color===g.options.overviewRulerOptions.color&&x.position===g.options.overviewRulerOptions.position){if(this._lineIntersectsZone(x,g.marker.line))return;if(this._lineAdjacentToZone(x,g.marker.line,g.options.overviewRulerOptions.position))return void this._addLineToZone(x,g.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=g.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=g.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=g.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=g.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:g.options.overviewRulerOptions.color,position:g.options.overviewRulerOptions.position,startBufferLine:g.marker.line,endBufferLine:g.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(g){this._linePadding=g}_lineIntersectsZone(g,x){return x>=g.startBufferLine&&x<=g.endBufferLine}_lineAdjacentToZone(g,x,E){return x>=g.startBufferLine-this._linePadding[E||"full"]&&x<=g.endBufferLine+this._linePadding[E||"full"]}_addLineToZone(g,x){g.startBufferLine=Math.min(g.startBufferLine,x),g.endBufferLine=Math.max(g.endBufferLine,x)}}},5744:function(he,p,g){var x=this&&this.__decorate||function(c,b,M,A){var R,w=arguments.length,I=w<3?b:A===null?A=Object.getOwnPropertyDescriptor(b,M):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(c,b,M,A);else for(var V=c.length-1;V>=0;V--)(R=c[V])&&(I=(w<3?R(I):w>3?R(b,M,I):R(b,M))||I);return w>3&&I&&Object.defineProperty(b,M,I),I},E=this&&this.__param||function(c,b){return function(M,A){b(M,A,c)}};Object.defineProperty(p,"__esModule",{value:!0}),p.OverviewRulerRenderer=void 0;const m=g(5871),k=g(4725),D=g(844),T=g(2585),S={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0};let l=p.OverviewRulerRenderer=class extends D.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(c,b,M,A,R,w,I){super(),this._viewportElement=c,this._screenElement=b,this._bufferService=M,this._decorationService=A,this._renderService=R,this._optionsService=w,this._coreBrowserService=I,this._colorZoneStore=new m.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const V=this._canvas.getContext("2d");if(!V)throw new Error("Ctx cannot be null");this._ctx=V,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,D.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const c=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=c,d.center=b,d.right=c,this._refreshDrawHeightConstants(),u.full=0,u.left=0,u.center=d.left,u.right=d.left+d.center}_refreshDrawHeightConstants(){S.full=Math.round(2*this._coreBrowserService.dpr);const c=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(c,12),6)*this._coreBrowserService.dpr);S.left=b,S.center=b,S.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*S.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*S.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*S.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*S.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;const c=this._colorZoneStore.zones;for(const b of c)b.position!=="full"&&this._renderColorZone(b);for(const b of c)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(c){this._ctx.fillStyle=c.color,this._ctx.fillRect(u[c.position||"full"],Math.round((this._canvas.height-1)*(c.startBufferLine/this._bufferService.buffers.active.lines.length)-S[c.position||"full"]/2),d[c.position||"full"],Math.round((this._canvas.height-1)*((c.endBufferLine-c.startBufferLine)/this._bufferService.buffers.active.lines.length)+S[c.position||"full"]))}_queueRefresh(c,b){this._shouldUpdateDimensions=c||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};p.OverviewRulerRenderer=l=x([E(2,T.IBufferService),E(3,T.IDecorationService),E(4,k.IRenderService),E(5,T.IOptionsService),E(6,k.ICoreBrowserService)],l)},2950:function(he,p,g){var x=this&&this.__decorate||function(S,d,u,l){var c,b=arguments.length,M=b<3?d:l===null?l=Object.getOwnPropertyDescriptor(d,u):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(S,d,u,l);else for(var A=S.length-1;A>=0;A--)(c=S[A])&&(M=(b<3?c(M):b>3?c(d,u,M):c(d,u))||M);return b>3&&M&&Object.defineProperty(d,u,M),M},E=this&&this.__param||function(S,d){return function(u,l){d(u,l,S)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CompositionHelper=void 0;const m=g(4725),k=g(2585),D=g(2584);let T=p.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(S,d,u,l,c,b){this._textarea=S,this._compositionView=d,this._bufferService=u,this._optionsService=l,this._coreService=c,this._renderService=b,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(S){this._compositionView.textContent=S.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(S){if(this._isComposing||this._isSendingComposition){if(S.keyCode===229||S.keyCode===16||S.keyCode===17||S.keyCode===18)return!1;this._finalizeComposition(!1)}return S.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(S){if(this._compositionView.classList.remove("active"),this._isComposing=!1,S){const d={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let u;this._isSendingComposition=!1,d.start+=this._dataAlreadySent.length,u=this._isComposing?this._textarea.value.substring(d.start,d.end):this._textarea.value.substring(d.start),u.length>0&&this._coreService.triggerDataEvent(u,!0)}},0)}else{this._isSendingComposition=!1;const d=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(d,!0)}}_handleAnyTextareaChanges(){const S=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const d=this._textarea.value,u=d.replace(S,"");this._dataAlreadySent=u,d.length>S.length?this._coreService.triggerDataEvent(u,!0):d.length<S.length?this._coreService.triggerDataEvent(`${D.C0.DEL}`,!0):d.length===S.length&&d!==S&&this._coreService.triggerDataEvent(d,!0)}},0)}updateCompositionElements(S){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const d=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),u=this._renderService.dimensions.css.cell.height,l=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=d*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=l+"px",this._compositionView.style.height=u+"px",this._compositionView.style.lineHeight=u+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const b=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=l+"px",this._textarea.style.width=Math.max(b.width,1)+"px",this._textarea.style.height=Math.max(b.height,1)+"px",this._textarea.style.lineHeight=b.height+"px"}S||setTimeout(()=>this.updateCompositionElements(!0),0)}}};p.CompositionHelper=T=x([E(2,k.IBufferService),E(3,k.IOptionsService),E(4,k.ICoreService),E(5,m.IRenderService)],T)},9806:(he,p)=>{function g(x,E,m){const k=m.getBoundingClientRect(),D=x.getComputedStyle(m),T=parseInt(D.getPropertyValue("padding-left")),S=parseInt(D.getPropertyValue("padding-top"));return[E.clientX-k.left-T,E.clientY-k.top-S]}Object.defineProperty(p,"__esModule",{value:!0}),p.getCoords=p.getCoordsRelativeToElement=void 0,p.getCoordsRelativeToElement=g,p.getCoords=function(x,E,m,k,D,T,S,d,u){if(!T)return;const l=g(x,E,m);return l?(l[0]=Math.ceil((l[0]+(u?S/2:0))/S),l[1]=Math.ceil(l[1]/d),l[0]=Math.min(Math.max(l[0],1),k+(u?1:0)),l[1]=Math.min(Math.max(l[1],1),D),l):void 0}},9504:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.moveToCellSequence=void 0;const x=g(2584);function E(d,u,l,c){const b=d-m(d,l),M=u-m(u,l),A=Math.abs(b-M)-function(R,w,I){let V=0;const j=R-m(R,I),ee=w-m(w,I);for(let W=0;W<Math.abs(j-ee);W++){const se=k(R,w)==="A"?-1:1;I.buffer.lines.get(j+se*W)?.isWrapped&&V++}return V}(d,u,l);return S(A,T(k(d,u),c))}function m(d,u){let l=0,c=u.buffer.lines.get(d),b=c?.isWrapped;for(;b&&d>=0&&d<u.rows;)l++,c=u.buffer.lines.get(--d),b=c?.isWrapped;return l}function k(d,u){return d>u?"A":"B"}function D(d,u,l,c,b,M){let A=d,R=u,w="";for(;A!==l||R!==c;)A+=b?1:-1,b&&A>M.cols-1?(w+=M.buffer.translateBufferLineToString(R,!1,d,A),A=0,d=0,R++):!b&&A<0&&(w+=M.buffer.translateBufferLineToString(R,!1,0,d+1),A=M.cols-1,d=A,R--);return w+M.buffer.translateBufferLineToString(R,!1,d,A)}function T(d,u){const l=u?"O":"[";return x.C0.ESC+l+d}function S(d,u){d=Math.floor(d);let l="";for(let c=0;c<d;c++)l+=u;return l}p.moveToCellSequence=function(d,u,l,c){const b=l.buffer.x,M=l.buffer.y;if(!l.buffer.hasScrollback)return function(w,I,V,j,ee,W){return E(I,j,ee,W).length===0?"":S(D(w,I,w,I-m(I,ee),!1,ee).length,T("D",W))}(b,M,0,u,l,c)+E(M,u,l,c)+function(w,I,V,j,ee,W){let se;se=E(I,j,ee,W).length>0?j-m(j,ee):I;const ce=j,ve=function(Se,ge,B,z,U,J){let X;return X=E(B,z,U,J).length>0?z-m(z,U):ge,Se<B&&X<=z||Se>=B&&X<z?"C":"D"}(w,I,V,j,ee,W);return S(D(w,se,V,ce,ve==="C",ee).length,T(ve,W))}(b,M,d,u,l,c);let A;if(M===u)return A=b>d?"D":"C",S(Math.abs(b-d),T(A,c));A=M>u?"D":"C";const R=Math.abs(M-u);return S(function(w,I){return I.cols-w}(M>u?d:b,l)+(R-1)*l.cols+1+((M>u?b:d)-1),T(A,c))}},1296:function(he,p,g){var x=this&&this.__decorate||function(W,se,ce,ve){var Se,ge=arguments.length,B=ge<3?se:ve===null?ve=Object.getOwnPropertyDescriptor(se,ce):ve;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(W,se,ce,ve);else for(var z=W.length-1;z>=0;z--)(Se=W[z])&&(B=(ge<3?Se(B):ge>3?Se(se,ce,B):Se(se,ce))||B);return ge>3&&B&&Object.defineProperty(se,ce,B),B},E=this&&this.__param||function(W,se){return function(ce,ve){se(ce,ve,W)}};Object.defineProperty(p,"__esModule",{value:!0}),p.DomRenderer=void 0;const m=g(3787),k=g(2550),D=g(2223),T=g(6171),S=g(6052),d=g(4725),u=g(8055),l=g(8460),c=g(844),b=g(2585),M="xterm-dom-renderer-owner-",A="xterm-rows",R="xterm-fg-",w="xterm-bg-",I="xterm-focus",V="xterm-selection";let j=1,ee=p.DomRenderer=class extends c.Disposable{constructor(W,se,ce,ve,Se,ge,B,z,U,J,X,be,Ne){super(),this._terminal=W,this._document=se,this._element=ce,this._screenElement=ve,this._viewportElement=Se,this._helperContainer=ge,this._linkifier2=B,this._charSizeService=U,this._optionsService=J,this._bufferService=X,this._coreBrowserService=be,this._themeService=Ne,this._terminalClass=j++,this._rowElements=[],this._selectionRenderModel=(0,S.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(A),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(V),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,T.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(We=>this._injectCss(We))),this._injectCss(this._themeService.colors),this._rowFactory=z.createInstance(m.DomRendererRowFactory,document),this._element.classList.add(M+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(We=>this._handleLinkHover(We))),this.register(this._linkifier2.onHideLinkUnderline(We=>this._handleLinkLeave(We))),this.register((0,c.toDisposable)(()=>{this._element.classList.remove(M+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new k.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const W=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*W,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*W),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/W),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/W),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const ce of this._rowElements)ce.style.width=`${this.dimensions.css.canvas.width}px`,ce.style.height=`${this.dimensions.css.cell.height}px`,ce.style.lineHeight=`${this.dimensions.css.cell.height}px`,ce.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const se=`${this._terminalSelector} .${A} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=se,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(W){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let se=`${this._terminalSelector} .${A} { color: ${W.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;se+=`${this._terminalSelector} .${A} .xterm-dim { color: ${u.color.multiplyOpacity(W.foreground,.5).css};}`,se+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const ce=`blink_underline_${this._terminalClass}`,ve=`blink_bar_${this._terminalClass}`,Se=`blink_block_${this._terminalClass}`;se+=`@keyframes ${ce} { 50% {  border-bottom-style: hidden; }}`,se+=`@keyframes ${ve} { 50% {  box-shadow: none; }}`,se+=`@keyframes ${Se} { 0% {  background-color: ${W.cursor.css};  color: ${W.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${W.cursor.css}; }}`,se+=`${this._terminalSelector} .${A}.${I} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${ce} 1s step-end infinite;}${this._terminalSelector} .${A}.${I} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${ve} 1s step-end infinite;}${this._terminalSelector} .${A}.${I} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Se} 1s step-end infinite;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-block { background-color: ${W.cursor.css}; color: ${W.cursorAccent.css};}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${W.cursor.css} !important; color: ${W.cursorAccent.css} !important;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${W.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${W.cursor.css} inset;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${W.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,se+=`${this._terminalSelector} .${V} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${V} div { position: absolute; background-color: ${W.selectionBackgroundOpaque.css};}${this._terminalSelector} .${V} div { position: absolute; background-color: ${W.selectionInactiveBackgroundOpaque.css};}`;for(const[ge,B]of W.ansi.entries())se+=`${this._terminalSelector} .${R}${ge} { color: ${B.css}; }${this._terminalSelector} .${R}${ge}.xterm-dim { color: ${u.color.multiplyOpacity(B,.5).css}; }${this._terminalSelector} .${w}${ge} { background-color: ${B.css}; }`;se+=`${this._terminalSelector} .${R}${D.INVERTED_DEFAULT_COLOR} { color: ${u.color.opaque(W.background).css}; }${this._terminalSelector} .${R}${D.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${u.color.multiplyOpacity(u.color.opaque(W.background),.5).css}; }${this._terminalSelector} .${w}${D.INVERTED_DEFAULT_COLOR} { background-color: ${W.foreground.css}; }`,this._themeStyleElement.textContent=se}_setDefaultSpacing(){const W=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${W}px`,this._rowFactory.defaultSpacing=W}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(W,se){for(let ce=this._rowElements.length;ce<=se;ce++){const ve=this._document.createElement("div");this._rowContainer.appendChild(ve),this._rowElements.push(ve)}for(;this._rowElements.length>se;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(W,se){this._refreshRowElements(W,se),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(I),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(I),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(W,se,ce){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(W,se,ce),this.renderRows(0,this._bufferService.rows-1),!W||!se)return;this._selectionRenderModel.update(this._terminal,W,se,ce);const ve=this._selectionRenderModel.viewportStartRow,Se=this._selectionRenderModel.viewportEndRow,ge=this._selectionRenderModel.viewportCappedStartRow,B=this._selectionRenderModel.viewportCappedEndRow;if(ge>=this._bufferService.rows||B<0)return;const z=this._document.createDocumentFragment();if(ce){const U=W[0]>se[0];z.appendChild(this._createSelectionElement(ge,U?se[0]:W[0],U?W[0]:se[0],B-ge+1))}else{const U=ve===ge?W[0]:0,J=ge===Se?se[0]:this._bufferService.cols;z.appendChild(this._createSelectionElement(ge,U,J));const X=B-ge-1;if(z.appendChild(this._createSelectionElement(ge+1,0,this._bufferService.cols,X)),ge!==B){const be=Se===B?se[0]:this._bufferService.cols;z.appendChild(this._createSelectionElement(B,0,be))}}this._selectionContainer.appendChild(z)}_createSelectionElement(W,se,ce,ve=1){const Se=this._document.createElement("div"),ge=se*this.dimensions.css.cell.width;let B=this.dimensions.css.cell.width*(ce-se);return ge+B>this.dimensions.css.canvas.width&&(B=this.dimensions.css.canvas.width-ge),Se.style.height=ve*this.dimensions.css.cell.height+"px",Se.style.top=W*this.dimensions.css.cell.height+"px",Se.style.left=`${ge}px`,Se.style.width=`${B}px`,Se}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const W of this._rowElements)W.replaceChildren()}renderRows(W,se){const ce=this._bufferService.buffer,ve=ce.ybase+ce.y,Se=Math.min(ce.x,this._bufferService.cols-1),ge=this._optionsService.rawOptions.cursorBlink,B=this._optionsService.rawOptions.cursorStyle,z=this._optionsService.rawOptions.cursorInactiveStyle;for(let U=W;U<=se;U++){const J=U+ce.ydisp,X=this._rowElements[U],be=ce.lines.get(J);if(!X||!be)break;X.replaceChildren(...this._rowFactory.createRow(be,J,J===ve,B,z,Se,ge,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${M}${this._terminalClass}`}_handleLinkHover(W){this._setCellUnderline(W.x1,W.x2,W.y1,W.y2,W.cols,!0)}_handleLinkLeave(W){this._setCellUnderline(W.x1,W.x2,W.y1,W.y2,W.cols,!1)}_setCellUnderline(W,se,ce,ve,Se,ge){ce<0&&(W=0),ve<0&&(se=0);const B=this._bufferService.rows-1;ce=Math.max(Math.min(ce,B),0),ve=Math.max(Math.min(ve,B),0),Se=Math.min(Se,this._bufferService.cols);const z=this._bufferService.buffer,U=z.ybase+z.y,J=Math.min(z.x,Se-1),X=this._optionsService.rawOptions.cursorBlink,be=this._optionsService.rawOptions.cursorStyle,Ne=this._optionsService.rawOptions.cursorInactiveStyle;for(let We=ce;We<=ve;++We){const ie=We+z.ydisp,N=this._rowElements[We],ne=z.lines.get(ie);if(!N||!ne)break;N.replaceChildren(...this._rowFactory.createRow(ne,ie,ie===U,be,Ne,J,X,this.dimensions.css.cell.width,this._widthCache,ge?We===ce?W:0:-1,ge?(We===ve?se:Se)-1:-1))}}};p.DomRenderer=ee=x([E(7,b.IInstantiationService),E(8,d.ICharSizeService),E(9,b.IOptionsService),E(10,b.IBufferService),E(11,d.ICoreBrowserService),E(12,d.IThemeService)],ee)},3787:function(he,p,g){var x=this&&this.__decorate||function(A,R,w,I){var V,j=arguments.length,ee=j<3?R:I===null?I=Object.getOwnPropertyDescriptor(R,w):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(A,R,w,I);else for(var W=A.length-1;W>=0;W--)(V=A[W])&&(ee=(j<3?V(ee):j>3?V(R,w,ee):V(R,w))||ee);return j>3&&ee&&Object.defineProperty(R,w,ee),ee},E=this&&this.__param||function(A,R){return function(w,I){R(w,I,A)}};Object.defineProperty(p,"__esModule",{value:!0}),p.DomRendererRowFactory=void 0;const m=g(2223),k=g(643),D=g(511),T=g(2585),S=g(8055),d=g(4725),u=g(4269),l=g(6171),c=g(3734);let b=p.DomRendererRowFactory=class{constructor(A,R,w,I,V,j,ee){this._document=A,this._characterJoinerService=R,this._optionsService=w,this._coreBrowserService=I,this._coreService=V,this._decorationService=j,this._themeService=ee,this._workCell=new D.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(A,R,w){this._selectionStart=A,this._selectionEnd=R,this._columnSelectMode=w}createRow(A,R,w,I,V,j,ee,W,se,ce,ve){const Se=[],ge=this._characterJoinerService.getJoinedCharacters(R),B=this._themeService.colors;let z,U=A.getNoBgTrimmedLength();w&&U<j+1&&(U=j+1);let J=0,X="",be=0,Ne=0,We=0,ie=!1,N=0,ne=!1,ue=0;const oe=[],ye=ce!==-1&&ve!==-1;for(let Ke=0;Ke<U;Ke++){A.loadCell(Ke,this._workCell);let ct=this._workCell.getWidth();if(ct===0)continue;let ht=!1,Qe=Ke,ze=this._workCell;if(ge.length>0&&Ke===ge[0][0]){ht=!0;const et=ge.shift();ze=new u.JoinedCellData(this._workCell,A.translateToString(!0,et[0],et[1]),et[1]-et[0]),Qe=et[1]-1,ct=ze.getWidth()}const ot=this._isCellInSelection(Ke,R),Ft=w&&Ke===j,Ot=ye&&Ke>=ce&&Ke<=ve;let Yt=!1;this._decorationService.forEachDecorationAtCell(Ke,R,void 0,et=>{Yt=!0});let Bt=ze.getChars()||k.WHITESPACE_CELL_CHAR;if(Bt===" "&&(ze.isUnderline()||ze.isOverline())&&(Bt="\xA0"),ue=ct*W-se.get(Bt,ze.isBold(),ze.isItalic()),z){if(J&&(ot&&ne||!ot&&!ne&&ze.bg===be)&&(ot&&ne&&B.selectionForeground||ze.fg===Ne)&&ze.extended.ext===We&&Ot===ie&&ue===N&&!Ft&&!ht&&!Yt){ze.isInvisible()?X+=k.WHITESPACE_CELL_CHAR:X+=Bt,J++;continue}J&&(z.textContent=X),z=this._document.createElement("span"),J=0,X=""}else z=this._document.createElement("span");if(be=ze.bg,Ne=ze.fg,We=ze.extended.ext,ie=Ot,N=ue,ne=ot,ht&&j>=Ke&&j<=Qe&&(j=Ke),!this._coreService.isCursorHidden&&Ft&&this._coreService.isCursorInitialized){if(oe.push("xterm-cursor"),this._coreBrowserService.isFocused)ee&&oe.push("xterm-cursor-blink"),oe.push(I==="bar"?"xterm-cursor-bar":I==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(V)switch(V){case"outline":oe.push("xterm-cursor-outline");break;case"block":oe.push("xterm-cursor-block");break;case"bar":oe.push("xterm-cursor-bar");break;case"underline":oe.push("xterm-cursor-underline")}}if(ze.isBold()&&oe.push("xterm-bold"),ze.isItalic()&&oe.push("xterm-italic"),ze.isDim()&&oe.push("xterm-dim"),X=ze.isInvisible()?k.WHITESPACE_CELL_CHAR:ze.getChars()||k.WHITESPACE_CELL_CHAR,ze.isUnderline()&&(oe.push(`xterm-underline-${ze.extended.underlineStyle}`),X===" "&&(X="\xA0"),!ze.isUnderlineColorDefault()))if(ze.isUnderlineColorRGB())z.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(ze.getUnderlineColor()).join(",")})`;else{let et=ze.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ze.isBold()&&et<8&&(et+=8),z.style.textDecorationColor=B.ansi[et].css}ze.isOverline()&&(oe.push("xterm-overline"),X===" "&&(X="\xA0")),ze.isStrikethrough()&&oe.push("xterm-strikethrough"),Ot&&(z.style.textDecoration="underline");let Rt=ze.getFgColor(),Xt=ze.getFgColorMode(),It=ze.getBgColor(),ni=ze.getBgColorMode();const Gt=!!ze.isInverse();if(Gt){const et=Rt;Rt=It,It=et;const ut=Xt;Xt=ni,ni=ut}let bt,oi,kt,Wt=!1;switch(this._decorationService.forEachDecorationAtCell(Ke,R,void 0,et=>{et.options.layer!=="top"&&Wt||(et.backgroundColorRGB&&(ni=50331648,It=et.backgroundColorRGB.rgba>>8&16777215,bt=et.backgroundColorRGB),et.foregroundColorRGB&&(Xt=50331648,Rt=et.foregroundColorRGB.rgba>>8&16777215,oi=et.foregroundColorRGB),Wt=et.options.layer==="top")}),!Wt&&ot&&(bt=this._coreBrowserService.isFocused?B.selectionBackgroundOpaque:B.selectionInactiveBackgroundOpaque,It=bt.rgba>>8&16777215,ni=50331648,Wt=!0,B.selectionForeground&&(Xt=50331648,Rt=B.selectionForeground.rgba>>8&16777215,oi=B.selectionForeground)),Wt&&oe.push("xterm-decoration-top"),ni){case 16777216:case 33554432:kt=B.ansi[It],oe.push(`xterm-bg-${It}`);break;case 50331648:kt=S.channels.toColor(It>>16,It>>8&255,255&It),this._addStyle(z,`background-color:#${M((It>>>0).toString(16),"0",6)}`);break;default:Gt?(kt=B.foreground,oe.push(`xterm-bg-${m.INVERTED_DEFAULT_COLOR}`)):kt=B.background}switch(bt||ze.isDim()&&(bt=S.color.multiplyOpacity(kt,.5)),Xt){case 16777216:case 33554432:ze.isBold()&&Rt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Rt+=8),this._applyMinimumContrast(z,kt,B.ansi[Rt],ze,bt,void 0)||oe.push(`xterm-fg-${Rt}`);break;case 50331648:const et=S.channels.toColor(Rt>>16&255,Rt>>8&255,255&Rt);this._applyMinimumContrast(z,kt,et,ze,bt,oi)||this._addStyle(z,`color:#${M(Rt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(z,kt,B.foreground,ze,bt,oi)||Gt&&oe.push(`xterm-fg-${m.INVERTED_DEFAULT_COLOR}`)}oe.length&&(z.className=oe.join(" "),oe.length=0),Ft||ht||Yt?z.textContent=X:J++,ue!==this.defaultSpacing&&(z.style.letterSpacing=`${ue}px`),Se.push(z),Ke=Qe}return z&&J&&(z.textContent=X),Se}_applyMinimumContrast(A,R,w,I,V,j){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,l.treatGlyphAsBackgroundColor)(I.getCode()))return!1;const ee=this._getContrastCache(I);let W;if(V||j||(W=ee.getColor(R.rgba,w.rgba)),W===void 0){const se=this._optionsService.rawOptions.minimumContrastRatio/(I.isDim()?2:1);W=S.color.ensureContrastRatio(V||R,j||w,se),ee.setColor((V||R).rgba,(j||w).rgba,W??null)}return!!W&&(this._addStyle(A,`color:${W.css}`),!0)}_getContrastCache(A){return A.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(A,R){A.setAttribute("style",`${A.getAttribute("style")||""}${R};`)}_isCellInSelection(A,R){const w=this._selectionStart,I=this._selectionEnd;return!(!w||!I)&&(this._columnSelectMode?w[0]<=I[0]?A>=w[0]&&R>=w[1]&&A<I[0]&&R<=I[1]:A<w[0]&&R>=w[1]&&A>=I[0]&&R<=I[1]:R>w[1]&&R<I[1]||w[1]===I[1]&&R===w[1]&&A>=w[0]&&A<I[0]||w[1]<I[1]&&R===I[1]&&A<I[0]||w[1]<I[1]&&R===w[1]&&A>=w[0])}};function M(A,R,w){for(;A.length<w;)A=R+A;return A}p.DomRendererRowFactory=b=x([E(1,d.ICharacterJoinerService),E(2,T.IOptionsService),E(3,d.ICoreBrowserService),E(4,T.ICoreService),E(5,T.IDecorationService),E(6,d.IThemeService)],b)},2550:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.WidthCache=void 0,p.WidthCache=class{constructor(g,x){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=g.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const E=g.createElement("span");E.classList.add("xterm-char-measure-element");const m=g.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontWeight="bold";const k=g.createElement("span");k.classList.add("xterm-char-measure-element"),k.style.fontStyle="italic";const D=g.createElement("span");D.classList.add("xterm-char-measure-element"),D.style.fontWeight="bold",D.style.fontStyle="italic",this._measureElements=[E,m,k,D],this._container.appendChild(E),this._container.appendChild(m),this._container.appendChild(k),this._container.appendChild(D),x.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(g,x,E,m){g===this._font&&x===this._fontSize&&E===this._weight&&m===this._weightBold||(this._font=g,this._fontSize=x,this._weight=E,this._weightBold=m,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${E}`,this._measureElements[1].style.fontWeight=`${m}`,this._measureElements[2].style.fontWeight=`${E}`,this._measureElements[3].style.fontWeight=`${m}`,this.clear())}get(g,x,E){let m=0;if(!x&&!E&&g.length===1&&(m=g.charCodeAt(0))<256){if(this._flat[m]!==-9999)return this._flat[m];const T=this._measure(g,0);return T>0&&(this._flat[m]=T),T}let k=g;x&&(k+="B"),E&&(k+="I");let D=this._holey.get(k);if(D===void 0){let T=0;x&&(T|=1),E&&(T|=2),D=this._measure(g,T),D>0&&this._holey.set(k,D)}return D}_measure(g,x){const E=this._measureElements[x];return E.textContent=g.repeat(32),E.offsetWidth/32}}},2223:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.TEXT_BASELINE=p.DIM_OPACITY=p.INVERTED_DEFAULT_COLOR=void 0;const x=g(6114);p.INVERTED_DEFAULT_COLOR=257,p.DIM_OPACITY=.5,p.TEXT_BASELINE=x.isFirefox||x.isLegacyEdge?"bottom":"ideographic"},6171:(he,p)=>{function g(E){return 57508<=E&&E<=57558}function x(E){return E>=128512&&E<=128591||E>=127744&&E<=128511||E>=128640&&E<=128767||E>=9728&&E<=9983||E>=9984&&E<=10175||E>=65024&&E<=65039||E>=129280&&E<=129535||E>=127462&&E<=127487}Object.defineProperty(p,"__esModule",{value:!0}),p.computeNextVariantOffset=p.createRenderDimensions=p.treatGlyphAsBackgroundColor=p.allowRescaling=p.isEmoji=p.isRestrictedPowerlineGlyph=p.isPowerlineGlyph=p.throwIfFalsy=void 0,p.throwIfFalsy=function(E){if(!E)throw new Error("value must not be falsy");return E},p.isPowerlineGlyph=g,p.isRestrictedPowerlineGlyph=function(E){return 57520<=E&&E<=57527},p.isEmoji=x,p.allowRescaling=function(E,m,k,D){return m===1&&k>Math.ceil(1.5*D)&&E!==void 0&&E>255&&!x(E)&&!g(E)&&!function(T){return 57344<=T&&T<=63743}(E)},p.treatGlyphAsBackgroundColor=function(E){return g(E)||function(m){return 9472<=m&&m<=9631}(E)},p.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},p.computeNextVariantOffset=function(E,m,k=0){return(E-(2*Math.round(m)-k))%(2*Math.round(m))}},6052:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.createSelectionRenderModel=void 0;class g{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(E,m,k,D=!1){if(this.selectionStart=m,this.selectionEnd=k,!m||!k||m[0]===k[0]&&m[1]===k[1])return void this.clear();const T=E.buffers.active.ydisp,S=m[1]-T,d=k[1]-T,u=Math.max(S,0),l=Math.min(d,E.rows-1);u>=E.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=D,this.viewportStartRow=S,this.viewportEndRow=d,this.viewportCappedStartRow=u,this.viewportCappedEndRow=l,this.startCol=m[0],this.endCol=k[0])}isCellSelected(E,m,k){return!!this.hasSelection&&(k-=E.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?m>=this.startCol&&k>=this.viewportCappedStartRow&&m<this.endCol&&k<=this.viewportCappedEndRow:m<this.startCol&&k>=this.viewportCappedStartRow&&m>=this.endCol&&k<=this.viewportCappedEndRow:k>this.viewportStartRow&&k<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&k===this.viewportStartRow&&m>=this.startCol&&m<this.endCol||this.viewportStartRow<this.viewportEndRow&&k===this.viewportEndRow&&m<this.endCol||this.viewportStartRow<this.viewportEndRow&&k===this.viewportStartRow&&m>=this.startCol)}}p.createSelectionRenderModel=function(){return new g}},456:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.SelectionModel=void 0,p.SelectionModel=class{constructor(g){this._bufferService=g,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const g=this.selectionStart[0]+this.selectionStartLength;return g>this._bufferService.cols?g%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(g/this._bufferService.cols)-1]:[g%this._bufferService.cols,this.selectionStart[1]+Math.floor(g/this._bufferService.cols)]:[g,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const g=this.selectionStart[0]+this.selectionStartLength;return g>this._bufferService.cols?[g%this._bufferService.cols,this.selectionStart[1]+Math.floor(g/this._bufferService.cols)]:[Math.max(g,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const g=this.selectionStart,x=this.selectionEnd;return!(!g||!x)&&(g[1]>x[1]||g[1]===x[1]&&g[0]>x[0])}handleTrim(g){return this.selectionStart&&(this.selectionStart[1]-=g),this.selectionEnd&&(this.selectionEnd[1]-=g),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(he,p,g){var x=this&&this.__decorate||function(l,c,b,M){var A,R=arguments.length,w=R<3?c:M===null?M=Object.getOwnPropertyDescriptor(c,b):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(l,c,b,M);else for(var I=l.length-1;I>=0;I--)(A=l[I])&&(w=(R<3?A(w):R>3?A(c,b,w):A(c,b))||w);return R>3&&w&&Object.defineProperty(c,b,w),w},E=this&&this.__param||function(l,c){return function(b,M){c(b,M,l)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CharSizeService=void 0;const m=g(2585),k=g(8460),D=g(844);let T=p.CharSizeService=class extends D.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,c,b){super(),this._optionsService=b,this.width=0,this.height=0,this._onCharSizeChange=this.register(new k.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new u(this._optionsService))}catch{this._measureStrategy=this.register(new d(l,c,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};p.CharSizeService=T=x([E(2,m.IOptionsService)],T);class S extends D.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(c,b){c!==void 0&&c>0&&b!==void 0&&b>0&&(this._result.width=c,this._result.height=b)}}class d extends S{constructor(c,b,M){super(),this._document=c,this._parentElement=b,this._optionsService=M,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class u extends S{constructor(c){super(),this._optionsService=c,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const b=this._ctx.measureText("W");if(!("width"in b&&"fontBoundingBoxAscent"in b&&"fontBoundingBoxDescent"in b))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const c=this._ctx.measureText("W");return this._validateAndSet(c.width,c.fontBoundingBoxAscent+c.fontBoundingBoxDescent),this._result}}},4269:function(he,p,g){var x=this&&this.__decorate||function(u,l,c,b){var M,A=arguments.length,R=A<3?l:b===null?b=Object.getOwnPropertyDescriptor(l,c):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(u,l,c,b);else for(var w=u.length-1;w>=0;w--)(M=u[w])&&(R=(A<3?M(R):A>3?M(l,c,R):M(l,c))||R);return A>3&&R&&Object.defineProperty(l,c,R),R},E=this&&this.__param||function(u,l){return function(c,b){l(c,b,u)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CharacterJoinerService=p.JoinedCellData=void 0;const m=g(3734),k=g(643),D=g(511),T=g(2585);class S extends m.AttributeData{constructor(l,c,b){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=c,this._width=b}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}p.JoinedCellData=S;let d=p.CharacterJoinerService=class Bo{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new D.CellData}register(l){const c={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(c),c.id}deregister(l){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===l)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(l);if(!c||c.length===0)return[];const b=[],M=c.translateToString(!0);let A=0,R=0,w=0,I=c.getFg(0),V=c.getBg(0);for(let j=0;j<c.getTrimmedLength();j++)if(c.loadCell(j,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==I||this._workCell.bg!==V){if(j-A>1){const ee=this._getJoinedRanges(M,w,R,c,A);for(let W=0;W<ee.length;W++)b.push(ee[W])}A=j,w=R,I=this._workCell.fg,V=this._workCell.bg}R+=this._workCell.getChars().length||k.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-A>1){const j=this._getJoinedRanges(M,w,R,c,A);for(let ee=0;ee<j.length;ee++)b.push(j[ee])}return b}_getJoinedRanges(l,c,b,M,A){const R=l.substring(c,b);let w=[];try{w=this._characterJoiners[0].handler(R)}catch(I){console.error(I)}for(let I=1;I<this._characterJoiners.length;I++)try{const V=this._characterJoiners[I].handler(R);for(let j=0;j<V.length;j++)Bo._mergeRanges(w,V[j])}catch(V){console.error(V)}return this._stringRangesToCellRanges(w,M,A),w}_stringRangesToCellRanges(l,c,b){let M=0,A=!1,R=0,w=l[M];if(w){for(let I=b;I<this._bufferService.cols;I++){const V=c.getWidth(I),j=c.getString(I).length||k.WHITESPACE_CELL_CHAR.length;if(V!==0){if(!A&&w[0]<=R&&(w[0]=I,A=!0),w[1]<=R){if(w[1]=I,w=l[++M],!w)break;w[0]<=R?(w[0]=I,A=!0):A=!1}R+=j}}w&&(w[1]=this._bufferService.cols)}}static _mergeRanges(l,c){let b=!1;for(let M=0;M<l.length;M++){const A=l[M];if(b){if(c[1]<=A[0])return l[M-1][1]=c[1],l;if(c[1]<=A[1])return l[M-1][1]=Math.max(c[1],A[1]),l.splice(M,1),l;l.splice(M,1),M--}else{if(c[1]<=A[0])return l.splice(M,0,c),l;if(c[1]<=A[1])return A[0]=Math.min(c[0],A[0]),l;c[0]<A[1]&&(A[0]=Math.min(c[0],A[0]),b=!0)}}return b?l[l.length-1][1]=c[1]:l.push(c),l}};p.CharacterJoinerService=d=x([E(0,T.IBufferService)],d)},5114:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CoreBrowserService=void 0;const x=g(844),E=g(8460),m=g(3656);class k extends x.Disposable{constructor(S,d,u){super(),this._textarea=S,this._window=d,this.mainDocument=u,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new D(this._window),this._onDprChange=this.register(new E.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new E.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(l=>this._screenDprMonitor.setWindow(l))),this.register((0,E.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(S){this._window!==S&&(this._window=S,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}p.CoreBrowserService=k;class D extends x.Disposable{constructor(S){super(),this._parentWindow=S,this._windowResizeListener=this.register(new x.MutableDisposable),this._onDprChange=this.register(new E.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,x.toDisposable)(()=>this.clearListener()))}setWindow(S){this._parentWindow=S,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,m.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.LinkProviderService=void 0;const x=g(844);class E extends x.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,x.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(k){return this.linkProviders.push(k),{dispose:()=>{const D=this.linkProviders.indexOf(k);D!==-1&&this.linkProviders.splice(D,1)}}}}p.LinkProviderService=E},8934:function(he,p,g){var x=this&&this.__decorate||function(T,S,d,u){var l,c=arguments.length,b=c<3?S:u===null?u=Object.getOwnPropertyDescriptor(S,d):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(T,S,d,u);else for(var M=T.length-1;M>=0;M--)(l=T[M])&&(b=(c<3?l(b):c>3?l(S,d,b):l(S,d))||b);return c>3&&b&&Object.defineProperty(S,d,b),b},E=this&&this.__param||function(T,S){return function(d,u){S(d,u,T)}};Object.defineProperty(p,"__esModule",{value:!0}),p.MouseService=void 0;const m=g(4725),k=g(9806);let D=p.MouseService=class{constructor(T,S){this._renderService=T,this._charSizeService=S}getCoords(T,S,d,u,l){return(0,k.getCoords)(window,T,S,d,u,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,l)}getMouseReportCoords(T,S){const d=(0,k.getCoordsRelativeToElement)(window,T,S);if(this._charSizeService.hasValidSize)return d[0]=Math.min(Math.max(d[0],0),this._renderService.dimensions.css.canvas.width-1),d[1]=Math.min(Math.max(d[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(d[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(d[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(d[0]),y:Math.floor(d[1])}}};p.MouseService=D=x([E(0,m.IRenderService),E(1,m.ICharSizeService)],D)},3230:function(he,p,g){var x=this&&this.__decorate||function(l,c,b,M){var A,R=arguments.length,w=R<3?c:M===null?M=Object.getOwnPropertyDescriptor(c,b):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(l,c,b,M);else for(var I=l.length-1;I>=0;I--)(A=l[I])&&(w=(R<3?A(w):R>3?A(c,b,w):A(c,b))||w);return R>3&&w&&Object.defineProperty(c,b,w),w},E=this&&this.__param||function(l,c){return function(b,M){c(b,M,l)}};Object.defineProperty(p,"__esModule",{value:!0}),p.RenderService=void 0;const m=g(6193),k=g(4725),D=g(8460),T=g(844),S=g(7226),d=g(2585);let u=p.RenderService=class extends T.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(l,c,b,M,A,R,w,I){super(),this._rowCount=l,this._charSizeService=M,this._renderer=this.register(new T.MutableDisposable),this._pausedResizeTask=new S.DebouncedIdleTask,this._observerDisposable=this.register(new T.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new D.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new D.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new D.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new D.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new m.RenderDebouncer((V,j)=>this._renderRows(V,j),w),this.register(this._renderDebouncer),this.register(w.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(R.onResize(()=>this._fullRefresh())),this.register(R.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(b.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(A.onDecorationRegistered(()=>this._fullRefresh())),this.register(A.onDecorationRemoved(()=>this._fullRefresh())),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(R.cols,R.rows),this._fullRefresh()})),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(R.buffer.y,R.buffer.y,!0))),this.register(I.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(w.window,c),this.register(w.onWindowChange(V=>this._registerIntersectionObserver(V,c)))}_registerIntersectionObserver(l,c){if("IntersectionObserver"in l){const b=new l.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});b.observe(c),this._observerDisposable.value=(0,T.toDisposable)(()=>b.disconnect())}}_handleIntersectionChange(l){this._isPaused=l.isIntersecting===void 0?l.intersectionRatio===0:!l.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(l,c,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(l,c,this._rowCount))}_renderRows(l,c){this._renderer.value&&(l=Math.min(l,this._rowCount-1),c=Math.min(c,this._rowCount-1),this._renderer.value.renderRows(l,c),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:l,end:c}),this._onRender.fire({start:l,end:c}),this._isNextRenderRedrawOnly=!0)}resize(l,c){this._rowCount=c,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(l){this._renderer.value=l,this._renderer.value&&(this._renderer.value.onRequestRedraw(c=>this.refreshRows(c.start,c.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(l){return this._renderDebouncer.addRefreshCallback(l)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(l,c){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(l,c)):this._renderer.value.handleResize(l,c),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(l,c,b){this._selectionState.start=l,this._selectionState.end=c,this._selectionState.columnSelectMode=b,this._renderer.value?.handleSelectionChanged(l,c,b)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};p.RenderService=u=x([E(2,d.IOptionsService),E(3,k.ICharSizeService),E(4,d.IDecorationService),E(5,d.IBufferService),E(6,k.ICoreBrowserService),E(7,k.IThemeService)],u)},9312:function(he,p,g){var x=this&&this.__decorate||function(w,I,V,j){var ee,W=arguments.length,se=W<3?I:j===null?j=Object.getOwnPropertyDescriptor(I,V):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")se=Reflect.decorate(w,I,V,j);else for(var ce=w.length-1;ce>=0;ce--)(ee=w[ce])&&(se=(W<3?ee(se):W>3?ee(I,V,se):ee(I,V))||se);return W>3&&se&&Object.defineProperty(I,V,se),se},E=this&&this.__param||function(w,I){return function(V,j){I(V,j,w)}};Object.defineProperty(p,"__esModule",{value:!0}),p.SelectionService=void 0;const m=g(9806),k=g(9504),D=g(456),T=g(4725),S=g(8460),d=g(844),u=g(6114),l=g(4841),c=g(511),b=g(2585),M="\xA0",A=new RegExp(M,"g");let R=p.SelectionService=class extends d.Disposable{constructor(w,I,V,j,ee,W,se,ce,ve){super(),this._element=w,this._screenElement=I,this._linkifier=V,this._bufferService=j,this._coreService=ee,this._mouseService=W,this._optionsService=se,this._renderService=ce,this._coreBrowserService=ve,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new S.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new S.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new S.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Se=>this._handleMouseMove(Se),this._mouseUpListener=Se=>this._handleMouseUp(Se),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Se=>this._handleTrim(Se)),this.register(this._bufferService.buffers.onBufferActivate(Se=>this._handleBufferActivate(Se))),this.enable(),this._model=new D.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,d.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const w=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!(!w||!I||w[0]===I[0]&&w[1]===I[1])}get selectionText(){const w=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;if(!w||!I)return"";const V=this._bufferService.buffer,j=[];if(this._activeSelectionMode===3){if(w[0]===I[0])return"";const ee=w[0]<I[0]?w[0]:I[0],W=w[0]<I[0]?I[0]:w[0];for(let se=w[1];se<=I[1];se++){const ce=V.translateBufferLineToString(se,!0,ee,W);j.push(ce)}}else{const ee=w[1]===I[1]?I[0]:void 0;j.push(V.translateBufferLineToString(w[1],!0,w[0],ee));for(let W=w[1]+1;W<=I[1]-1;W++){const se=V.lines.get(W),ce=V.translateBufferLineToString(W,!0);se?.isWrapped?j[j.length-1]+=ce:j.push(ce)}if(w[1]!==I[1]){const W=V.lines.get(I[1]),se=V.translateBufferLineToString(I[1],!0,0,I[0]);W&&W.isWrapped?j[j.length-1]+=se:j.push(se)}}return j.map(ee=>ee.replace(A," ")).join(u.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(w){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),u.isLinux&&w&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(w){const I=this._getMouseBufferCoords(w),V=this._model.finalSelectionStart,j=this._model.finalSelectionEnd;return!!(V&&j&&I)&&this._areCoordsInSelection(I,V,j)}isCellInSelection(w,I){const V=this._model.finalSelectionStart,j=this._model.finalSelectionEnd;return!(!V||!j)&&this._areCoordsInSelection([w,I],V,j)}_areCoordsInSelection(w,I,V){return w[1]>I[1]&&w[1]<V[1]||I[1]===V[1]&&w[1]===I[1]&&w[0]>=I[0]&&w[0]<V[0]||I[1]<V[1]&&w[1]===V[1]&&w[0]<V[0]||I[1]<V[1]&&w[1]===I[1]&&w[0]>=I[0]}_selectWordAtCursor(w,I){const V=this._linkifier.currentLink?.link?.range;if(V)return this._model.selectionStart=[V.start.x-1,V.start.y-1],this._model.selectionStartLength=(0,l.getRangeLength)(V,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const j=this._getMouseBufferCoords(w);return!!j&&(this._selectWordAt(j,I),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(w,I){this._model.clearSelection(),w=Math.max(w,0),I=Math.min(I,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,w],this._model.selectionEnd=[this._bufferService.cols,I],this.refresh(),this._onSelectionChange.fire()}_handleTrim(w){this._model.handleTrim(w)&&this.refresh()}_getMouseBufferCoords(w){const I=this._mouseService.getCoords(w,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(I)return I[0]--,I[1]--,I[1]+=this._bufferService.buffer.ydisp,I}_getMouseEventScrollAmount(w){let I=(0,m.getCoordsRelativeToElement)(this._coreBrowserService.window,w,this._screenElement)[1];const V=this._renderService.dimensions.css.canvas.height;return I>=0&&I<=V?0:(I>V&&(I-=V),I=Math.min(Math.max(I,-50),50),I/=50,I/Math.abs(I)+Math.round(14*I))}shouldForceSelection(w){return u.isMac?w.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:w.shiftKey}handleMouseDown(w){if(this._mouseDownTimeStamp=w.timeStamp,(w.button!==2||!this.hasSelection)&&w.button===0){if(!this._enabled){if(!this.shouldForceSelection(w))return;w.stopPropagation()}w.preventDefault(),this._dragScrollAmount=0,this._enabled&&w.shiftKey?this._handleIncrementalClick(w):w.detail===1?this._handleSingleClick(w):w.detail===2?this._handleDoubleClick(w):w.detail===3&&this._handleTripleClick(w),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(w){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(w))}_handleSingleClick(w){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(w)?3:0,this._model.selectionStart=this._getMouseBufferCoords(w),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const I=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);I&&I.length!==this._model.selectionStart[0]&&I.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(w){this._selectWordAtCursor(w,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(w){const I=this._getMouseBufferCoords(w);I&&(this._activeSelectionMode=2,this._selectLineAt(I[1]))}shouldColumnSelect(w){return w.altKey&&!(u.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(w){if(w.stopImmediatePropagation(),!this._model.selectionStart)return;const I=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(w),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(w),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const V=this._bufferService.buffer;if(this._model.selectionEnd[1]<V.lines.length){const j=V.lines.get(this._model.selectionEnd[1]);j&&j.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}I&&I[0]===this._model.selectionEnd[0]&&I[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const w=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(w.ydisp+this._bufferService.rows,w.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=w.ydisp),this.refresh()}}_handleMouseUp(w){const I=w.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&I<500&&w.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const V=this._mouseService.getCoords(w,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(V&&V[0]!==void 0&&V[1]!==void 0){const j=(0,k.moveToCellSequence)(V[0]-1,V[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(j,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const w=this._model.finalSelectionStart,I=this._model.finalSelectionEnd,V=!(!w||!I||w[0]===I[0]&&w[1]===I[1]);V?w&&I&&(this._oldSelectionStart&&this._oldSelectionEnd&&w[0]===this._oldSelectionStart[0]&&w[1]===this._oldSelectionStart[1]&&I[0]===this._oldSelectionEnd[0]&&I[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(w,I,V)):this._oldHasSelection&&this._fireOnSelectionChange(w,I,V)}_fireOnSelectionChange(w,I,V){this._oldSelectionStart=w,this._oldSelectionEnd=I,this._oldHasSelection=V,this._onSelectionChange.fire()}_handleBufferActivate(w){this.clearSelection(),this._trimListener.dispose(),this._trimListener=w.activeBuffer.lines.onTrim(I=>this._handleTrim(I))}_convertViewportColToCharacterIndex(w,I){let V=I;for(let j=0;I>=j;j++){const ee=w.loadCell(j,this._workCell).getChars().length;this._workCell.getWidth()===0?V--:ee>1&&I!==j&&(V+=ee-1)}return V}setSelection(w,I,V){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[w,I],this._model.selectionStartLength=V,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(w){this._isClickInSelection(w)||(this._selectWordAtCursor(w,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(w,I,V=!0,j=!0){if(w[0]>=this._bufferService.cols)return;const ee=this._bufferService.buffer,W=ee.lines.get(w[1]);if(!W)return;const se=ee.translateBufferLineToString(w[1],!1);let ce=this._convertViewportColToCharacterIndex(W,w[0]),ve=ce;const Se=w[0]-ce;let ge=0,B=0,z=0,U=0;if(se.charAt(ce)===" "){for(;ce>0&&se.charAt(ce-1)===" ";)ce--;for(;ve<se.length&&se.charAt(ve+1)===" ";)ve++}else{let be=w[0],Ne=w[0];W.getWidth(be)===0&&(ge++,be--),W.getWidth(Ne)===2&&(B++,Ne++);const We=W.getString(Ne).length;for(We>1&&(U+=We-1,ve+=We-1);be>0&&ce>0&&!this._isCharWordSeparator(W.loadCell(be-1,this._workCell));){W.loadCell(be-1,this._workCell);const ie=this._workCell.getChars().length;this._workCell.getWidth()===0?(ge++,be--):ie>1&&(z+=ie-1,ce-=ie-1),ce--,be--}for(;Ne<W.length&&ve+1<se.length&&!this._isCharWordSeparator(W.loadCell(Ne+1,this._workCell));){W.loadCell(Ne+1,this._workCell);const ie=this._workCell.getChars().length;this._workCell.getWidth()===2?(B++,Ne++):ie>1&&(U+=ie-1,ve+=ie-1),ve++,Ne++}}ve++;let J=ce+Se-ge+z,X=Math.min(this._bufferService.cols,ve-ce+ge+B-z-U);if(I||se.slice(ce,ve).trim()!==""){if(V&&J===0&&W.getCodePoint(0)!==32){const be=ee.lines.get(w[1]-1);if(be&&W.isWrapped&&be.getCodePoint(this._bufferService.cols-1)!==32){const Ne=this._getWordAt([this._bufferService.cols-1,w[1]-1],!1,!0,!1);if(Ne){const We=this._bufferService.cols-Ne.start;J-=We,X+=We}}}if(j&&J+X===this._bufferService.cols&&W.getCodePoint(this._bufferService.cols-1)!==32){const be=ee.lines.get(w[1]+1);if(be?.isWrapped&&be.getCodePoint(0)!==32){const Ne=this._getWordAt([0,w[1]+1],!1,!1,!0);Ne&&(X+=Ne.length)}}return{start:J,length:X}}}_selectWordAt(w,I){const V=this._getWordAt(w,I);if(V){for(;V.start<0;)V.start+=this._bufferService.cols,w[1]--;this._model.selectionStart=[V.start,w[1]],this._model.selectionStartLength=V.length}}_selectToWordAt(w){const I=this._getWordAt(w,!0);if(I){let V=w[1];for(;I.start<0;)I.start+=this._bufferService.cols,V--;if(!this._model.areSelectionValuesReversed())for(;I.start+I.length>this._bufferService.cols;)I.length-=this._bufferService.cols,V++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?I.start:I.start+I.length,V]}}_isCharWordSeparator(w){return w.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(w.getChars())>=0}_selectLineAt(w){const I=this._bufferService.buffer.getWrappedRangeForLine(w),V={start:{x:0,y:I.first},end:{x:this._bufferService.cols-1,y:I.last}};this._model.selectionStart=[0,I.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,l.getRangeLength)(V,this._bufferService.cols)}};p.SelectionService=R=x([E(3,b.IBufferService),E(4,b.ICoreService),E(5,T.IMouseService),E(6,b.IOptionsService),E(7,T.IRenderService),E(8,T.ICoreBrowserService)],R)},4725:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ILinkProviderService=p.IThemeService=p.ICharacterJoinerService=p.ISelectionService=p.IRenderService=p.IMouseService=p.ICoreBrowserService=p.ICharSizeService=void 0;const x=g(8343);p.ICharSizeService=(0,x.createDecorator)("CharSizeService"),p.ICoreBrowserService=(0,x.createDecorator)("CoreBrowserService"),p.IMouseService=(0,x.createDecorator)("MouseService"),p.IRenderService=(0,x.createDecorator)("RenderService"),p.ISelectionService=(0,x.createDecorator)("SelectionService"),p.ICharacterJoinerService=(0,x.createDecorator)("CharacterJoinerService"),p.IThemeService=(0,x.createDecorator)("ThemeService"),p.ILinkProviderService=(0,x.createDecorator)("LinkProviderService")},6731:function(he,p,g){var x=this&&this.__decorate||function(R,w,I,V){var j,ee=arguments.length,W=ee<3?w:V===null?V=Object.getOwnPropertyDescriptor(w,I):V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(R,w,I,V);else for(var se=R.length-1;se>=0;se--)(j=R[se])&&(W=(ee<3?j(W):ee>3?j(w,I,W):j(w,I))||W);return ee>3&&W&&Object.defineProperty(w,I,W),W},E=this&&this.__param||function(R,w){return function(I,V){w(I,V,R)}};Object.defineProperty(p,"__esModule",{value:!0}),p.ThemeService=p.DEFAULT_ANSI_COLORS=void 0;const m=g(7239),k=g(8055),D=g(8460),T=g(844),S=g(2585),d=k.css.toColor("#ffffff"),u=k.css.toColor("#000000"),l=k.css.toColor("#ffffff"),c=k.css.toColor("#000000"),b={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};p.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const R=[k.css.toColor("#2e3436"),k.css.toColor("#cc0000"),k.css.toColor("#4e9a06"),k.css.toColor("#c4a000"),k.css.toColor("#3465a4"),k.css.toColor("#75507b"),k.css.toColor("#06989a"),k.css.toColor("#d3d7cf"),k.css.toColor("#555753"),k.css.toColor("#ef2929"),k.css.toColor("#8ae234"),k.css.toColor("#fce94f"),k.css.toColor("#729fcf"),k.css.toColor("#ad7fa8"),k.css.toColor("#34e2e2"),k.css.toColor("#eeeeec")],w=[0,95,135,175,215,255];for(let I=0;I<216;I++){const V=w[I/36%6|0],j=w[I/6%6|0],ee=w[I%6];R.push({css:k.channels.toCss(V,j,ee),rgba:k.channels.toRgba(V,j,ee)})}for(let I=0;I<24;I++){const V=8+10*I;R.push({css:k.channels.toCss(V,V,V),rgba:k.channels.toRgba(V,V,V)})}return R})());let M=p.ThemeService=class extends T.Disposable{get colors(){return this._colors}constructor(R){super(),this._optionsService=R,this._contrastCache=new m.ColorContrastCache,this._halfContrastCache=new m.ColorContrastCache,this._onChangeColors=this.register(new D.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:d,background:u,cursor:l,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:b,selectionBackgroundOpaque:k.color.blend(u,b),selectionInactiveBackgroundTransparent:b,selectionInactiveBackgroundOpaque:k.color.blend(u,b),ansi:p.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(R={}){const w=this._colors;if(w.foreground=A(R.foreground,d),w.background=A(R.background,u),w.cursor=A(R.cursor,l),w.cursorAccent=A(R.cursorAccent,c),w.selectionBackgroundTransparent=A(R.selectionBackground,b),w.selectionBackgroundOpaque=k.color.blend(w.background,w.selectionBackgroundTransparent),w.selectionInactiveBackgroundTransparent=A(R.selectionInactiveBackground,w.selectionBackgroundTransparent),w.selectionInactiveBackgroundOpaque=k.color.blend(w.background,w.selectionInactiveBackgroundTransparent),w.selectionForeground=R.selectionForeground?A(R.selectionForeground,k.NULL_COLOR):void 0,w.selectionForeground===k.NULL_COLOR&&(w.selectionForeground=void 0),k.color.isOpaque(w.selectionBackgroundTransparent)&&(w.selectionBackgroundTransparent=k.color.opacity(w.selectionBackgroundTransparent,.3)),k.color.isOpaque(w.selectionInactiveBackgroundTransparent)&&(w.selectionInactiveBackgroundTransparent=k.color.opacity(w.selectionInactiveBackgroundTransparent,.3)),w.ansi=p.DEFAULT_ANSI_COLORS.slice(),w.ansi[0]=A(R.black,p.DEFAULT_ANSI_COLORS[0]),w.ansi[1]=A(R.red,p.DEFAULT_ANSI_COLORS[1]),w.ansi[2]=A(R.green,p.DEFAULT_ANSI_COLORS[2]),w.ansi[3]=A(R.yellow,p.DEFAULT_ANSI_COLORS[3]),w.ansi[4]=A(R.blue,p.DEFAULT_ANSI_COLORS[4]),w.ansi[5]=A(R.magenta,p.DEFAULT_ANSI_COLORS[5]),w.ansi[6]=A(R.cyan,p.DEFAULT_ANSI_COLORS[6]),w.ansi[7]=A(R.white,p.DEFAULT_ANSI_COLORS[7]),w.ansi[8]=A(R.brightBlack,p.DEFAULT_ANSI_COLORS[8]),w.ansi[9]=A(R.brightRed,p.DEFAULT_ANSI_COLORS[9]),w.ansi[10]=A(R.brightGreen,p.DEFAULT_ANSI_COLORS[10]),w.ansi[11]=A(R.brightYellow,p.DEFAULT_ANSI_COLORS[11]),w.ansi[12]=A(R.brightBlue,p.DEFAULT_ANSI_COLORS[12]),w.ansi[13]=A(R.brightMagenta,p.DEFAULT_ANSI_COLORS[13]),w.ansi[14]=A(R.brightCyan,p.DEFAULT_ANSI_COLORS[14]),w.ansi[15]=A(R.brightWhite,p.DEFAULT_ANSI_COLORS[15]),R.extendedAnsi){const I=Math.min(w.ansi.length-16,R.extendedAnsi.length);for(let V=0;V<I;V++)w.ansi[V+16]=A(R.extendedAnsi[V],p.DEFAULT_ANSI_COLORS[V+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(R){this._restoreColor(R),this._onChangeColors.fire(this.colors)}_restoreColor(R){if(R!==void 0)switch(R){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[R]=this._restoreColors.ansi[R]}else for(let w=0;w<this._restoreColors.ansi.length;++w)this._colors.ansi[w]=this._restoreColors.ansi[w]}modifyColors(R){R(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function A(R,w){if(R!==void 0)try{return k.css.toColor(R)}catch{}return w}p.ThemeService=M=x([E(0,S.IOptionsService)],M)},6349:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CircularList=void 0;const x=g(8460),E=g(844);class m extends E.Disposable{constructor(D){super(),this._maxLength=D,this.onDeleteEmitter=this.register(new x.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new x.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new x.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(D){if(this._maxLength===D)return;const T=new Array(D);for(let S=0;S<Math.min(D,this.length);S++)T[S]=this._array[this._getCyclicIndex(S)];this._array=T,this._maxLength=D,this._startIndex=0}get length(){return this._length}set length(D){if(D>this._length)for(let T=this._length;T<D;T++)this._array[T]=void 0;this._length=D}get(D){return this._array[this._getCyclicIndex(D)]}set(D,T){this._array[this._getCyclicIndex(D)]=T}push(D){this._array[this._getCyclicIndex(this._length)]=D,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(D,T,...S){if(T){for(let d=D;d<this._length-T;d++)this._array[this._getCyclicIndex(d)]=this._array[this._getCyclicIndex(d+T)];this._length-=T,this.onDeleteEmitter.fire({index:D,amount:T})}for(let d=this._length-1;d>=D;d--)this._array[this._getCyclicIndex(d+S.length)]=this._array[this._getCyclicIndex(d)];for(let d=0;d<S.length;d++)this._array[this._getCyclicIndex(D+d)]=S[d];if(S.length&&this.onInsertEmitter.fire({index:D,amount:S.length}),this._length+S.length>this._maxLength){const d=this._length+S.length-this._maxLength;this._startIndex+=d,this._length=this._maxLength,this.onTrimEmitter.fire(d)}else this._length+=S.length}trimStart(D){D>this._length&&(D=this._length),this._startIndex+=D,this._length-=D,this.onTrimEmitter.fire(D)}shiftElements(D,T,S){if(!(T<=0)){if(D<0||D>=this._length)throw new Error("start argument out of range");if(D+S<0)throw new Error("Cannot shift elements in list beyond index 0");if(S>0){for(let u=T-1;u>=0;u--)this.set(D+u+S,this.get(D+u));const d=D+T+S-this._length;if(d>0)for(this._length+=d;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let d=0;d<T;d++)this.set(D+d+S,this.get(D+d))}}_getCyclicIndex(D){return(this._startIndex+D)%this._maxLength}}p.CircularList=m},1439:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.clone=void 0,p.clone=function g(x,E=5){if(typeof x!="object")return x;const m=Array.isArray(x)?[]:{};for(const k in x)m[k]=E<=1?x[k]:x[k]&&g(x[k],E-1);return m}},8055:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.contrastRatio=p.toPaddedHex=p.rgba=p.rgb=p.css=p.color=p.channels=p.NULL_COLOR=void 0;let g=0,x=0,E=0,m=0;var k,D,T,S,d;function u(c){const b=c.toString(16);return b.length<2?"0"+b:b}function l(c,b){return c<b?(b+.05)/(c+.05):(c+.05)/(b+.05)}p.NULL_COLOR={css:"#00000000",rgba:0},function(c){c.toCss=function(b,M,A,R){return R!==void 0?`#${u(b)}${u(M)}${u(A)}${u(R)}`:`#${u(b)}${u(M)}${u(A)}`},c.toRgba=function(b,M,A,R=255){return(b<<24|M<<16|A<<8|R)>>>0},c.toColor=function(b,M,A,R){return{css:c.toCss(b,M,A,R),rgba:c.toRgba(b,M,A,R)}}}(k||(p.channels=k={})),function(c){function b(M,A){return m=Math.round(255*A),[g,x,E]=d.toChannels(M.rgba),{css:k.toCss(g,x,E,m),rgba:k.toRgba(g,x,E,m)}}c.blend=function(M,A){if(m=(255&A.rgba)/255,m===1)return{css:A.css,rgba:A.rgba};const R=A.rgba>>24&255,w=A.rgba>>16&255,I=A.rgba>>8&255,V=M.rgba>>24&255,j=M.rgba>>16&255,ee=M.rgba>>8&255;return g=V+Math.round((R-V)*m),x=j+Math.round((w-j)*m),E=ee+Math.round((I-ee)*m),{css:k.toCss(g,x,E),rgba:k.toRgba(g,x,E)}},c.isOpaque=function(M){return(255&M.rgba)==255},c.ensureContrastRatio=function(M,A,R){const w=d.ensureContrastRatio(M.rgba,A.rgba,R);if(w)return k.toColor(w>>24&255,w>>16&255,w>>8&255)},c.opaque=function(M){const A=(255|M.rgba)>>>0;return[g,x,E]=d.toChannels(A),{css:k.toCss(g,x,E),rgba:A}},c.opacity=b,c.multiplyOpacity=function(M,A){return m=255&M.rgba,b(M,m*A/255)},c.toColorRGB=function(M){return[M.rgba>>24&255,M.rgba>>16&255,M.rgba>>8&255]}}(D||(p.color=D={})),function(c){let b,M;try{const A=document.createElement("canvas");A.width=1,A.height=1;const R=A.getContext("2d",{willReadFrequently:!0});R&&(b=R,b.globalCompositeOperation="copy",M=b.createLinearGradient(0,0,1,1))}catch{}c.toColor=function(A){if(A.match(/#[\da-f]{3,8}/i))switch(A.length){case 4:return g=parseInt(A.slice(1,2).repeat(2),16),x=parseInt(A.slice(2,3).repeat(2),16),E=parseInt(A.slice(3,4).repeat(2),16),k.toColor(g,x,E);case 5:return g=parseInt(A.slice(1,2).repeat(2),16),x=parseInt(A.slice(2,3).repeat(2),16),E=parseInt(A.slice(3,4).repeat(2),16),m=parseInt(A.slice(4,5).repeat(2),16),k.toColor(g,x,E,m);case 7:return{css:A,rgba:(parseInt(A.slice(1),16)<<8|255)>>>0};case 9:return{css:A,rgba:parseInt(A.slice(1),16)>>>0}}const R=A.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(R)return g=parseInt(R[1]),x=parseInt(R[2]),E=parseInt(R[3]),m=Math.round(255*(R[5]===void 0?1:parseFloat(R[5]))),k.toColor(g,x,E,m);if(!b||!M)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=M,b.fillStyle=A,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[g,x,E,m]=b.getImageData(0,0,1,1).data,m!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:k.toRgba(g,x,E,m),css:A}}}(T||(p.css=T={})),function(c){function b(M,A,R){const w=M/255,I=A/255,V=R/255;return .2126*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.7152*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))+.0722*(V<=.03928?V/12.92:Math.pow((V+.055)/1.055,2.4))}c.relativeLuminance=function(M){return b(M>>16&255,M>>8&255,255&M)},c.relativeLuminance2=b}(S||(p.rgb=S={})),function(c){function b(A,R,w){const I=A>>24&255,V=A>>16&255,j=A>>8&255;let ee=R>>24&255,W=R>>16&255,se=R>>8&255,ce=l(S.relativeLuminance2(ee,W,se),S.relativeLuminance2(I,V,j));for(;ce<w&&(ee>0||W>0||se>0);)ee-=Math.max(0,Math.ceil(.1*ee)),W-=Math.max(0,Math.ceil(.1*W)),se-=Math.max(0,Math.ceil(.1*se)),ce=l(S.relativeLuminance2(ee,W,se),S.relativeLuminance2(I,V,j));return(ee<<24|W<<16|se<<8|255)>>>0}function M(A,R,w){const I=A>>24&255,V=A>>16&255,j=A>>8&255;let ee=R>>24&255,W=R>>16&255,se=R>>8&255,ce=l(S.relativeLuminance2(ee,W,se),S.relativeLuminance2(I,V,j));for(;ce<w&&(ee<255||W<255||se<255);)ee=Math.min(255,ee+Math.ceil(.1*(255-ee))),W=Math.min(255,W+Math.ceil(.1*(255-W))),se=Math.min(255,se+Math.ceil(.1*(255-se))),ce=l(S.relativeLuminance2(ee,W,se),S.relativeLuminance2(I,V,j));return(ee<<24|W<<16|se<<8|255)>>>0}c.blend=function(A,R){if(m=(255&R)/255,m===1)return R;const w=R>>24&255,I=R>>16&255,V=R>>8&255,j=A>>24&255,ee=A>>16&255,W=A>>8&255;return g=j+Math.round((w-j)*m),x=ee+Math.round((I-ee)*m),E=W+Math.round((V-W)*m),k.toRgba(g,x,E)},c.ensureContrastRatio=function(A,R,w){const I=S.relativeLuminance(A>>8),V=S.relativeLuminance(R>>8);if(l(I,V)<w){if(V<I){const W=b(A,R,w),se=l(I,S.relativeLuminance(W>>8));if(se<w){const ce=M(A,R,w);return se>l(I,S.relativeLuminance(ce>>8))?W:ce}return W}const j=M(A,R,w),ee=l(I,S.relativeLuminance(j>>8));if(ee<w){const W=b(A,R,w);return ee>l(I,S.relativeLuminance(W>>8))?j:W}return j}},c.reduceLuminance=b,c.increaseLuminance=M,c.toChannels=function(A){return[A>>24&255,A>>16&255,A>>8&255,255&A]}}(d||(p.rgba=d={})),p.toPaddedHex=u,p.contrastRatio=l},8969:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CoreTerminal=void 0;const x=g(844),E=g(2585),m=g(4348),k=g(7866),D=g(744),T=g(7302),S=g(6975),d=g(8460),u=g(1753),l=g(1480),c=g(7994),b=g(9282),M=g(5435),A=g(5981),R=g(2660);let w=!1;class I extends x.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new d.EventEmitter),this._onScroll.event(j=>{this._onScrollApi?.fire(j.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(j){for(const ee in j)this.optionsService.options[ee]=j[ee]}constructor(j){super(),this._windowsWrappingHeuristics=this.register(new x.MutableDisposable),this._onBinary=this.register(new d.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new d.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new d.EventEmitter),this._instantiationService=new m.InstantiationService,this.optionsService=this.register(new T.OptionsService(j)),this._instantiationService.setService(E.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(D.BufferService)),this._instantiationService.setService(E.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(k.LogService)),this._instantiationService.setService(E.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(S.CoreService)),this._instantiationService.setService(E.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(u.CoreMouseService)),this._instantiationService.setService(E.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(l.UnicodeService)),this._instantiationService.setService(E.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(E.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(R.OscLinkService),this._instantiationService.setService(E.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new M.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,d.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,d.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,d.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,d.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(ee=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(ee=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new A.WriteBuffer((ee,W)=>this._inputHandler.parse(ee,W))),this.register((0,d.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(j,ee){this._writeBuffer.write(j,ee)}writeSync(j,ee){this._logService.logLevel<=E.LogLevelEnum.WARN&&!w&&(this._logService.warn("writeSync is unreliable and will be removed soon."),w=!0),this._writeBuffer.writeSync(j,ee)}input(j,ee=!0){this.coreService.triggerDataEvent(j,ee)}resize(j,ee){isNaN(j)||isNaN(ee)||(j=Math.max(j,D.MINIMUM_COLS),ee=Math.max(ee,D.MINIMUM_ROWS),this._bufferService.resize(j,ee))}scroll(j,ee=!1){this._bufferService.scroll(j,ee)}scrollLines(j,ee,W){this._bufferService.scrollLines(j,ee,W)}scrollPages(j){this.scrollLines(j*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(j){const ee=j-this._bufferService.buffer.ydisp;ee!==0&&this.scrollLines(ee)}registerEscHandler(j,ee){return this._inputHandler.registerEscHandler(j,ee)}registerDcsHandler(j,ee){return this._inputHandler.registerDcsHandler(j,ee)}registerCsiHandler(j,ee){return this._inputHandler.registerCsiHandler(j,ee)}registerOscHandler(j,ee){return this._inputHandler.registerOscHandler(j,ee)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let j=!1;const ee=this.optionsService.rawOptions.windowsPty;ee&&ee.buildNumber!==void 0&&ee.buildNumber!==void 0?j=ee.backend==="conpty"&&ee.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(j=!0),j?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const j=[];j.push(this.onLineFeed(b.updateWindowsModeWrappedState.bind(null,this._bufferService))),j.push(this.registerCsiHandler({final:"H"},()=>((0,b.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,x.toDisposable)(()=>{for(const ee of j)ee.dispose()})}}}p.CoreTerminal=I},8460:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.runAndSubscribe=p.forwardEvent=p.EventEmitter=void 0,p.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=g=>(this._listeners.push(g),{dispose:()=>{if(!this._disposed){for(let x=0;x<this._listeners.length;x++)if(this._listeners[x]===g)return void this._listeners.splice(x,1)}}})),this._event}fire(g,x){const E=[];for(let m=0;m<this._listeners.length;m++)E.push(this._listeners[m]);for(let m=0;m<E.length;m++)E[m].call(void 0,g,x)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},p.forwardEvent=function(g,x){return g(E=>x.fire(E))},p.runAndSubscribe=function(g,x){return x(void 0),g(E=>x(E))}},5435:function(he,p,g){var x=this&&this.__decorate||function(ge,B,z,U){var J,X=arguments.length,be=X<3?B:U===null?U=Object.getOwnPropertyDescriptor(B,z):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")be=Reflect.decorate(ge,B,z,U);else for(var Ne=ge.length-1;Ne>=0;Ne--)(J=ge[Ne])&&(be=(X<3?J(be):X>3?J(B,z,be):J(B,z))||be);return X>3&&be&&Object.defineProperty(B,z,be),be},E=this&&this.__param||function(ge,B){return function(z,U){B(z,U,ge)}};Object.defineProperty(p,"__esModule",{value:!0}),p.InputHandler=p.WindowsOptionsReportType=void 0;const m=g(2584),k=g(7116),D=g(2015),T=g(844),S=g(482),d=g(8437),u=g(8460),l=g(643),c=g(511),b=g(3734),M=g(2585),A=g(1480),R=g(6242),w=g(6351),I=g(5941),V={"(":0,")":1,"*":2,"+":3,"-":1,".":2},j=131072;function ee(ge,B){if(ge>24)return B.setWinLines||!1;switch(ge){case 1:return!!B.restoreWin;case 2:return!!B.minimizeWin;case 3:return!!B.setWinPosition;case 4:return!!B.setWinSizePixels;case 5:return!!B.raiseWin;case 6:return!!B.lowerWin;case 7:return!!B.refreshWin;case 8:return!!B.setWinSizeChars;case 9:return!!B.maximizeWin;case 10:return!!B.fullscreenWin;case 11:return!!B.getWinState;case 13:return!!B.getWinPosition;case 14:return!!B.getWinSizePixels;case 15:return!!B.getScreenSizePixels;case 16:return!!B.getCellSizePixels;case 18:return!!B.getWinSizeChars;case 19:return!!B.getScreenSizeChars;case 20:return!!B.getIconTitle;case 21:return!!B.getWinTitle;case 22:return!!B.pushTitle;case 23:return!!B.popTitle;case 24:return!!B.setWinLines}return!1}var W;(function(ge){ge[ge.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",ge[ge.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(W||(p.WindowsOptionsReportType=W={}));let se=0;class ce extends T.Disposable{getAttrData(){return this._curAttrData}constructor(B,z,U,J,X,be,Ne,We,ie=new D.EscapeSequenceParser){super(),this._bufferService=B,this._charsetService=z,this._coreService=U,this._logService=J,this._optionsService=X,this._oscLinkService=be,this._coreMouseService=Ne,this._unicodeService=We,this._parser=ie,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new S.StringToUtf32,this._utf8Decoder=new S.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new u.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new u.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new u.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new u.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new u.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new u.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new u.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new u.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new u.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new u.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new u.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ve(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(N=>this._activeBuffer=N.activeBuffer)),this._parser.setCsiHandlerFallback((N,ne)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(N),params:ne.toArray()})}),this._parser.setEscHandlerFallback(N=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(N)})}),this._parser.setExecuteHandlerFallback(N=>{this._logService.debug("Unknown EXECUTE code: ",{code:N})}),this._parser.setOscHandlerFallback((N,ne,ue)=>{this._logService.debug("Unknown OSC code: ",{identifier:N,action:ne,data:ue})}),this._parser.setDcsHandlerFallback((N,ne,ue)=>{ne==="HOOK"&&(ue=ue.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(N),action:ne,payload:ue})}),this._parser.setPrintHandler((N,ne,ue)=>this.print(N,ne,ue)),this._parser.registerCsiHandler({final:"@"},N=>this.insertChars(N)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},N=>this.scrollLeft(N)),this._parser.registerCsiHandler({final:"A"},N=>this.cursorUp(N)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},N=>this.scrollRight(N)),this._parser.registerCsiHandler({final:"B"},N=>this.cursorDown(N)),this._parser.registerCsiHandler({final:"C"},N=>this.cursorForward(N)),this._parser.registerCsiHandler({final:"D"},N=>this.cursorBackward(N)),this._parser.registerCsiHandler({final:"E"},N=>this.cursorNextLine(N)),this._parser.registerCsiHandler({final:"F"},N=>this.cursorPrecedingLine(N)),this._parser.registerCsiHandler({final:"G"},N=>this.cursorCharAbsolute(N)),this._parser.registerCsiHandler({final:"H"},N=>this.cursorPosition(N)),this._parser.registerCsiHandler({final:"I"},N=>this.cursorForwardTab(N)),this._parser.registerCsiHandler({final:"J"},N=>this.eraseInDisplay(N,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},N=>this.eraseInDisplay(N,!0)),this._parser.registerCsiHandler({final:"K"},N=>this.eraseInLine(N,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},N=>this.eraseInLine(N,!0)),this._parser.registerCsiHandler({final:"L"},N=>this.insertLines(N)),this._parser.registerCsiHandler({final:"M"},N=>this.deleteLines(N)),this._parser.registerCsiHandler({final:"P"},N=>this.deleteChars(N)),this._parser.registerCsiHandler({final:"S"},N=>this.scrollUp(N)),this._parser.registerCsiHandler({final:"T"},N=>this.scrollDown(N)),this._parser.registerCsiHandler({final:"X"},N=>this.eraseChars(N)),this._parser.registerCsiHandler({final:"Z"},N=>this.cursorBackwardTab(N)),this._parser.registerCsiHandler({final:"`"},N=>this.charPosAbsolute(N)),this._parser.registerCsiHandler({final:"a"},N=>this.hPositionRelative(N)),this._parser.registerCsiHandler({final:"b"},N=>this.repeatPrecedingCharacter(N)),this._parser.registerCsiHandler({final:"c"},N=>this.sendDeviceAttributesPrimary(N)),this._parser.registerCsiHandler({prefix:">",final:"c"},N=>this.sendDeviceAttributesSecondary(N)),this._parser.registerCsiHandler({final:"d"},N=>this.linePosAbsolute(N)),this._parser.registerCsiHandler({final:"e"},N=>this.vPositionRelative(N)),this._parser.registerCsiHandler({final:"f"},N=>this.hVPosition(N)),this._parser.registerCsiHandler({final:"g"},N=>this.tabClear(N)),this._parser.registerCsiHandler({final:"h"},N=>this.setMode(N)),this._parser.registerCsiHandler({prefix:"?",final:"h"},N=>this.setModePrivate(N)),this._parser.registerCsiHandler({final:"l"},N=>this.resetMode(N)),this._parser.registerCsiHandler({prefix:"?",final:"l"},N=>this.resetModePrivate(N)),this._parser.registerCsiHandler({final:"m"},N=>this.charAttributes(N)),this._parser.registerCsiHandler({final:"n"},N=>this.deviceStatus(N)),this._parser.registerCsiHandler({prefix:"?",final:"n"},N=>this.deviceStatusPrivate(N)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},N=>this.softReset(N)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},N=>this.setCursorStyle(N)),this._parser.registerCsiHandler({final:"r"},N=>this.setScrollRegion(N)),this._parser.registerCsiHandler({final:"s"},N=>this.saveCursor(N)),this._parser.registerCsiHandler({final:"t"},N=>this.windowOptions(N)),this._parser.registerCsiHandler({final:"u"},N=>this.restoreCursor(N)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},N=>this.insertColumns(N)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},N=>this.deleteColumns(N)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},N=>this.selectProtected(N)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},N=>this.requestMode(N,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},N=>this.requestMode(N,!1)),this._parser.setExecuteHandler(m.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(m.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(m.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(m.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(m.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(m.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(m.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(m.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(m.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(m.C1.IND,()=>this.index()),this._parser.setExecuteHandler(m.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(m.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new R.OscHandler(N=>(this.setTitle(N),this.setIconName(N),!0))),this._parser.registerOscHandler(1,new R.OscHandler(N=>this.setIconName(N))),this._parser.registerOscHandler(2,new R.OscHandler(N=>this.setTitle(N))),this._parser.registerOscHandler(4,new R.OscHandler(N=>this.setOrReportIndexedColor(N))),this._parser.registerOscHandler(8,new R.OscHandler(N=>this.setHyperlink(N))),this._parser.registerOscHandler(10,new R.OscHandler(N=>this.setOrReportFgColor(N))),this._parser.registerOscHandler(11,new R.OscHandler(N=>this.setOrReportBgColor(N))),this._parser.registerOscHandler(12,new R.OscHandler(N=>this.setOrReportCursorColor(N))),this._parser.registerOscHandler(104,new R.OscHandler(N=>this.restoreIndexedColor(N))),this._parser.registerOscHandler(110,new R.OscHandler(N=>this.restoreFgColor(N))),this._parser.registerOscHandler(111,new R.OscHandler(N=>this.restoreBgColor(N))),this._parser.registerOscHandler(112,new R.OscHandler(N=>this.restoreCursorColor(N))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const N in k.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:N},()=>this.selectCharset("("+N)),this._parser.registerEscHandler({intermediates:")",final:N},()=>this.selectCharset(")"+N)),this._parser.registerEscHandler({intermediates:"*",final:N},()=>this.selectCharset("*"+N)),this._parser.registerEscHandler({intermediates:"+",final:N},()=>this.selectCharset("+"+N)),this._parser.registerEscHandler({intermediates:"-",final:N},()=>this.selectCharset("-"+N)),this._parser.registerEscHandler({intermediates:".",final:N},()=>this.selectCharset("."+N)),this._parser.registerEscHandler({intermediates:"/",final:N},()=>this.selectCharset("/"+N));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(N=>(this._logService.error("Parsing error: ",N),N)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new w.DcsHandler((N,ne)=>this.requestStatusString(N,ne)))}_preserveStack(B,z,U,J){this._parseStack.paused=!0,this._parseStack.cursorStartX=B,this._parseStack.cursorStartY=z,this._parseStack.decodedLength=U,this._parseStack.position=J}_logSlowResolvingAsync(B){this._logService.logLevel<=M.LogLevelEnum.WARN&&Promise.race([B,new Promise((z,U)=>setTimeout(()=>U("#SLOW_TIMEOUT"),5e3))]).catch(z=>{if(z!=="#SLOW_TIMEOUT")throw z;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(B,z){let U,J=this._activeBuffer.x,X=this._activeBuffer.y,be=0;const Ne=this._parseStack.paused;if(Ne){if(U=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,z))return this._logSlowResolvingAsync(U),U;J=this._parseStack.cursorStartX,X=this._parseStack.cursorStartY,this._parseStack.paused=!1,B.length>j&&(be=this._parseStack.position+j)}if(this._logService.logLevel<=M.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof B=="string"?` "${B}"`:` "${Array.prototype.map.call(B,N=>String.fromCharCode(N)).join("")}"`),typeof B=="string"?B.split("").map(N=>N.charCodeAt(0)):B),this._parseBuffer.length<B.length&&this._parseBuffer.length<j&&(this._parseBuffer=new Uint32Array(Math.min(B.length,j))),Ne||this._dirtyRowTracker.clearRange(),B.length>j)for(let N=be;N<B.length;N+=j){const ne=N+j<B.length?N+j:B.length,ue=typeof B=="string"?this._stringDecoder.decode(B.substring(N,ne),this._parseBuffer):this._utf8Decoder.decode(B.subarray(N,ne),this._parseBuffer);if(U=this._parser.parse(this._parseBuffer,ue))return this._preserveStack(J,X,ue,N),this._logSlowResolvingAsync(U),U}else if(!Ne){const N=typeof B=="string"?this._stringDecoder.decode(B,this._parseBuffer):this._utf8Decoder.decode(B,this._parseBuffer);if(U=this._parser.parse(this._parseBuffer,N))return this._preserveStack(J,X,N,0),this._logSlowResolvingAsync(U),U}this._activeBuffer.x===J&&this._activeBuffer.y===X||this._onCursorMove.fire();const We=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),ie=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);ie<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(ie,this._bufferService.rows-1),Math.min(We,this._bufferService.rows-1))}print(B,z,U){let J,X;const be=this._charsetService.charset,Ne=this._optionsService.rawOptions.screenReaderMode,We=this._bufferService.cols,ie=this._coreService.decPrivateModes.wraparound,N=this._coreService.modes.insertMode,ne=this._curAttrData;let ue=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&U-z>0&&ue.getWidth(this._activeBuffer.x-1)===2&&ue.setCellFromCodepoint(this._activeBuffer.x-1,0,1,ne);let oe=this._parser.precedingJoinState;for(let ye=z;ye<U;++ye){if(J=B[ye],J<127&&be){const Qe=be[String.fromCharCode(J)];Qe&&(J=Qe.charCodeAt(0))}const Ke=this._unicodeService.charProperties(J,oe);X=A.UnicodeService.extractWidth(Ke);const ct=A.UnicodeService.extractShouldJoin(Ke),ht=ct?A.UnicodeService.extractWidth(oe):0;if(oe=Ke,Ne&&this._onA11yChar.fire((0,S.stringFromCodePoint)(J)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+X-ht>We){if(ie){const Qe=ue;let ze=this._activeBuffer.x-ht;for(this._activeBuffer.x=ht,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),ue=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ht>0&&ue instanceof d.BufferLine&&ue.copyCellsFrom(Qe,ze,0,ht,!1);ze<We;)Qe.setCellFromCodepoint(ze++,0,1,ne)}else if(this._activeBuffer.x=We-1,X===2)continue}if(ct&&this._activeBuffer.x){const Qe=ue.getWidth(this._activeBuffer.x-1)?1:2;ue.addCodepointToCell(this._activeBuffer.x-Qe,J,X);for(let ze=X-ht;--ze>=0;)ue.setCellFromCodepoint(this._activeBuffer.x++,0,0,ne)}else if(N&&(ue.insertCells(this._activeBuffer.x,X-ht,this._activeBuffer.getNullCell(ne)),ue.getWidth(We-1)===2&&ue.setCellFromCodepoint(We-1,l.NULL_CELL_CODE,l.NULL_CELL_WIDTH,ne)),ue.setCellFromCodepoint(this._activeBuffer.x++,J,X,ne),X>0)for(;--X;)ue.setCellFromCodepoint(this._activeBuffer.x++,0,0,ne)}this._parser.precedingJoinState=oe,this._activeBuffer.x<We&&U-z>0&&ue.getWidth(this._activeBuffer.x)===0&&!ue.hasContent(this._activeBuffer.x)&&ue.setCellFromCodepoint(this._activeBuffer.x,0,1,ne),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(B,z){return B.final!=="t"||B.prefix||B.intermediates?this._parser.registerCsiHandler(B,z):this._parser.registerCsiHandler(B,U=>!ee(U.params[0],this._optionsService.rawOptions.windowOptions)||z(U))}registerDcsHandler(B,z){return this._parser.registerDcsHandler(B,new w.DcsHandler(z))}registerEscHandler(B,z){return this._parser.registerEscHandler(B,z)}registerOscHandler(B,z){return this._parser.registerOscHandler(B,new R.OscHandler(z))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);B.hasWidth(this._activeBuffer.x)&&!B.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const B=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-B),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(B=this._bufferService.cols-1){this._activeBuffer.x=Math.min(B,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(B,z){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=B,this._activeBuffer.y=this._activeBuffer.scrollTop+z):(this._activeBuffer.x=B,this._activeBuffer.y=z),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(B,z){this._restrictCursor(),this._setCursor(this._activeBuffer.x+B,this._activeBuffer.y+z)}cursorUp(B){const z=this._activeBuffer.y-this._activeBuffer.scrollTop;return z>=0?this._moveCursor(0,-Math.min(z,B.params[0]||1)):this._moveCursor(0,-(B.params[0]||1)),!0}cursorDown(B){const z=this._activeBuffer.scrollBottom-this._activeBuffer.y;return z>=0?this._moveCursor(0,Math.min(z,B.params[0]||1)):this._moveCursor(0,B.params[0]||1),!0}cursorForward(B){return this._moveCursor(B.params[0]||1,0),!0}cursorBackward(B){return this._moveCursor(-(B.params[0]||1),0),!0}cursorNextLine(B){return this.cursorDown(B),this._activeBuffer.x=0,!0}cursorPrecedingLine(B){return this.cursorUp(B),this._activeBuffer.x=0,!0}cursorCharAbsolute(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(B){return this._setCursor(B.length>=2?(B.params[1]||1)-1:0,(B.params[0]||1)-1),!0}charPosAbsolute(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(B){return this._moveCursor(B.params[0]||1,0),!0}linePosAbsolute(B){return this._setCursor(this._activeBuffer.x,(B.params[0]||1)-1),!0}vPositionRelative(B){return this._moveCursor(0,B.params[0]||1),!0}hVPosition(B){return this.cursorPosition(B),!0}tabClear(B){const z=B.params[0];return z===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:z===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let z=B.params[0]||1;for(;z--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let z=B.params[0]||1;for(;z--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(B){const z=B.params[0];return z===1&&(this._curAttrData.bg|=536870912),z!==2&&z!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(B,z,U,J=!1,X=!1){const be=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);be.replaceCells(z,U,this._activeBuffer.getNullCell(this._eraseAttrData()),X),J&&(be.isWrapped=!1)}_resetBufferLine(B,z=!1){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);U&&(U.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),z),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+B),U.isWrapped=!1)}eraseInDisplay(B,z=!1){let U;switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:for(U=this._activeBuffer.y,this._dirtyRowTracker.markDirty(U),this._eraseInBufferLine(U++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,z);U<this._bufferService.rows;U++)this._resetBufferLine(U,z);this._dirtyRowTracker.markDirty(U);break;case 1:for(U=this._activeBuffer.y,this._dirtyRowTracker.markDirty(U),this._eraseInBufferLine(U,0,this._activeBuffer.x+1,!0,z),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(U+1).isWrapped=!1);U--;)this._resetBufferLine(U,z);this._dirtyRowTracker.markDirty(0);break;case 2:for(U=this._bufferService.rows,this._dirtyRowTracker.markDirty(U-1);U--;)this._resetBufferLine(U,z);this._dirtyRowTracker.markDirty(0);break;case 3:const J=this._activeBuffer.lines.length-this._bufferService.rows;J>0&&(this._activeBuffer.lines.trimStart(J),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-J,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-J,0),this._onScroll.fire(0))}return!0}eraseInLine(B,z=!1){switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,z);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,z);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,z)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(B){this._restrictCursor();let z=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=this._activeBuffer.ybase+this._activeBuffer.y,J=this._bufferService.rows-1-this._activeBuffer.scrollBottom,X=this._bufferService.rows-1+this._activeBuffer.ybase-J+1;for(;z--;)this._activeBuffer.lines.splice(X-1,1),this._activeBuffer.lines.splice(U,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(B){this._restrictCursor();let z=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=this._activeBuffer.ybase+this._activeBuffer.y;let J;for(J=this._bufferService.rows-1-this._activeBuffer.scrollBottom,J=this._bufferService.rows-1+this._activeBuffer.ybase-J;z--;)this._activeBuffer.lines.splice(U,1),this._activeBuffer.lines.splice(J,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(B){this._restrictCursor();const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return z&&(z.insertCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(B){this._restrictCursor();const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return z&&(z.deleteCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(B){let z=B.params[0]||1;for(;z--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(B){let z=B.params[0]||1;for(;z--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(d.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=B.params[0]||1;for(let U=this._activeBuffer.scrollTop;U<=this._activeBuffer.scrollBottom;++U){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);J.deleteCells(0,z,this._activeBuffer.getNullCell(this._eraseAttrData())),J.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=B.params[0]||1;for(let U=this._activeBuffer.scrollTop;U<=this._activeBuffer.scrollBottom;++U){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);J.insertCells(0,z,this._activeBuffer.getNullCell(this._eraseAttrData())),J.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=B.params[0]||1;for(let U=this._activeBuffer.scrollTop;U<=this._activeBuffer.scrollBottom;++U){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);J.insertCells(this._activeBuffer.x,z,this._activeBuffer.getNullCell(this._eraseAttrData())),J.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=B.params[0]||1;for(let U=this._activeBuffer.scrollTop;U<=this._activeBuffer.scrollBottom;++U){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);J.deleteCells(this._activeBuffer.x,z,this._activeBuffer.getNullCell(this._eraseAttrData())),J.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(B){this._restrictCursor();const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return z&&(z.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(B.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(B){const z=this._parser.precedingJoinState;if(!z)return!0;const U=B.params[0]||1,J=A.UnicodeService.extractWidth(z),X=this._activeBuffer.x-J,be=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(X),Ne=new Uint32Array(be.length*U);let We=0;for(let N=0;N<be.length;){const ne=be.codePointAt(N)||0;Ne[We++]=ne,N+=ne>65535?2:1}let ie=We;for(let N=1;N<U;++N)Ne.copyWithin(ie,0,We),ie+=We;return this.print(Ne,0,ie),!0}sendDeviceAttributesPrimary(B){return B.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(m.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(m.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(B){return B.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(m.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(m.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(B.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(m.C0.ESC+"[>83;40003;0c")),!0}_is(B){return(this._optionsService.rawOptions.termName+"").indexOf(B)===0}setMode(B){for(let z=0;z<B.length;z++)switch(B.params[z]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(B){for(let z=0;z<B.length;z++)switch(B.params[z]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,k.DEFAULT_CHARSET),this._charsetService.setgCharset(1,k.DEFAULT_CHARSET),this._charsetService.setgCharset(2,k.DEFAULT_CHARSET),this._charsetService.setgCharset(3,k.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(B){for(let z=0;z<B.length;z++)switch(B.params[z]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(B){for(let z=0;z<B.length;z++)switch(B.params[z]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),B.params[z]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(B,z){const U=this._coreService.decPrivateModes,{activeProtocol:J,activeEncoding:X}=this._coreMouseService,be=this._coreService,{buffers:Ne,cols:We}=this._bufferService,{active:ie,alt:N}=Ne,ne=this._optionsService.rawOptions,ue=ct=>ct?1:2,oe=B.params[0];return ye=oe,Ke=z?oe===2?4:oe===4?ue(be.modes.insertMode):oe===12?3:oe===20?ue(ne.convertEol):0:oe===1?ue(U.applicationCursorKeys):oe===3?ne.windowOptions.setWinLines?We===80?2:We===132?1:0:0:oe===6?ue(U.origin):oe===7?ue(U.wraparound):oe===8?3:oe===9?ue(J==="X10"):oe===12?ue(ne.cursorBlink):oe===25?ue(!be.isCursorHidden):oe===45?ue(U.reverseWraparound):oe===66?ue(U.applicationKeypad):oe===67?4:oe===1e3?ue(J==="VT200"):oe===1002?ue(J==="DRAG"):oe===1003?ue(J==="ANY"):oe===1004?ue(U.sendFocus):oe===1005?4:oe===1006?ue(X==="SGR"):oe===1015?4:oe===1016?ue(X==="SGR_PIXELS"):oe===1048?1:oe===47||oe===1047||oe===1049?ue(ie===N):oe===2004?ue(U.bracketedPasteMode):0,be.triggerDataEvent(`${m.C0.ESC}[${z?"":"?"}${ye};${Ke}$y`),!0;var ye,Ke}_updateAttrColor(B,z,U,J,X){return z===2?(B|=50331648,B&=-16777216,B|=b.AttributeData.fromColorRGB([U,J,X])):z===5&&(B&=-50331904,B|=33554432|255&U),B}_extractColor(B,z,U){const J=[0,0,-1,0,0,0];let X=0,be=0;do{if(J[be+X]=B.params[z+be],B.hasSubParams(z+be)){const Ne=B.getSubParams(z+be);let We=0;do J[1]===5&&(X=1),J[be+We+1+X]=Ne[We];while(++We<Ne.length&&We+be+1+X<J.length);break}if(J[1]===5&&be+X>=2||J[1]===2&&be+X>=5)break;J[1]&&(X=1)}while(++be+z<B.length&&be+X<J.length);for(let Ne=2;Ne<J.length;++Ne)J[Ne]===-1&&(J[Ne]=0);switch(J[0]){case 38:U.fg=this._updateAttrColor(U.fg,J[1],J[3],J[4],J[5]);break;case 48:U.bg=this._updateAttrColor(U.bg,J[1],J[3],J[4],J[5]);break;case 58:U.extended=U.extended.clone(),U.extended.underlineColor=this._updateAttrColor(U.extended.underlineColor,J[1],J[3],J[4],J[5])}return be}_processUnderline(B,z){z.extended=z.extended.clone(),(!~B||B>5)&&(B=1),z.extended.underlineStyle=B,z.fg|=268435456,B===0&&(z.fg&=-268435457),z.updateExtended()}_processSGR0(B){B.fg=d.DEFAULT_ATTR_DATA.fg,B.bg=d.DEFAULT_ATTR_DATA.bg,B.extended=B.extended.clone(),B.extended.underlineStyle=0,B.extended.underlineColor&=-67108864,B.updateExtended()}charAttributes(B){if(B.length===1&&B.params[0]===0)return this._processSGR0(this._curAttrData),!0;const z=B.length;let U;const J=this._curAttrData;for(let X=0;X<z;X++)U=B.params[X],U>=30&&U<=37?(J.fg&=-50331904,J.fg|=16777216|U-30):U>=40&&U<=47?(J.bg&=-50331904,J.bg|=16777216|U-40):U>=90&&U<=97?(J.fg&=-50331904,J.fg|=16777224|U-90):U>=100&&U<=107?(J.bg&=-50331904,J.bg|=16777224|U-100):U===0?this._processSGR0(J):U===1?J.fg|=134217728:U===3?J.bg|=67108864:U===4?(J.fg|=268435456,this._processUnderline(B.hasSubParams(X)?B.getSubParams(X)[0]:1,J)):U===5?J.fg|=536870912:U===7?J.fg|=67108864:U===8?J.fg|=1073741824:U===9?J.fg|=2147483648:U===2?J.bg|=134217728:U===21?this._processUnderline(2,J):U===22?(J.fg&=-134217729,J.bg&=-134217729):U===23?J.bg&=-67108865:U===24?(J.fg&=-268435457,this._processUnderline(0,J)):U===25?J.fg&=-536870913:U===27?J.fg&=-67108865:U===28?J.fg&=-1073741825:U===29?J.fg&=2147483647:U===39?(J.fg&=-67108864,J.fg|=16777215&d.DEFAULT_ATTR_DATA.fg):U===49?(J.bg&=-67108864,J.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):U===38||U===48||U===58?X+=this._extractColor(B,X,J):U===53?J.bg|=1073741824:U===55?J.bg&=-1073741825:U===59?(J.extended=J.extended.clone(),J.extended.underlineColor=-1,J.updateExtended()):U===100?(J.fg&=-67108864,J.fg|=16777215&d.DEFAULT_ATTR_DATA.fg,J.bg&=-67108864,J.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",U);return!0}deviceStatus(B){switch(B.params[0]){case 5:this._coreService.triggerDataEvent(`${m.C0.ESC}[0n`);break;case 6:const z=this._activeBuffer.y+1,U=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${m.C0.ESC}[${z};${U}R`)}return!0}deviceStatusPrivate(B){if(B.params[0]===6){const z=this._activeBuffer.y+1,U=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${m.C0.ESC}[?${z};${U}R`)}return!0}softReset(B){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(B){const z=B.params[0]||1;switch(z){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const U=z%2==1;return this._optionsService.options.cursorBlink=U,!0}setScrollRegion(B){const z=B.params[0]||1;let U;return(B.length<2||(U=B.params[1])>this._bufferService.rows||U===0)&&(U=this._bufferService.rows),U>z&&(this._activeBuffer.scrollTop=z-1,this._activeBuffer.scrollBottom=U-1,this._setCursor(0,0)),!0}windowOptions(B){if(!ee(B.params[0],this._optionsService.rawOptions.windowOptions))return!0;const z=B.length>1?B.params[1]:0;switch(B.params[0]){case 14:z!==2&&this._onRequestWindowsOptionsReport.fire(W.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(W.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${m.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:z!==0&&z!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),z!==0&&z!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:z!==0&&z!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),z!==0&&z!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(B){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(B){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(B){return this._windowTitle=B,this._onTitleChange.fire(B),!0}setIconName(B){return this._iconName=B,!0}setOrReportIndexedColor(B){const z=[],U=B.split(";");for(;U.length>1;){const J=U.shift(),X=U.shift();if(/^\d+$/.exec(J)){const be=parseInt(J);if(Se(be))if(X==="?")z.push({type:0,index:be});else{const Ne=(0,I.parseColor)(X);Ne&&z.push({type:1,index:be,color:Ne})}}}return z.length&&this._onColor.fire(z),!0}setHyperlink(B){const z=B.split(";");return!(z.length<2)&&(z[1]?this._createHyperlink(z[0],z[1]):!z[0]&&this._finishHyperlink())}_createHyperlink(B,z){this._getCurrentLinkId()&&this._finishHyperlink();const U=B.split(":");let J;const X=U.findIndex(be=>be.startsWith("id="));return X!==-1&&(J=U[X].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:J,uri:z}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(B,z){const U=B.split(";");for(let J=0;J<U.length&&!(z>=this._specialColors.length);++J,++z)if(U[J]==="?")this._onColor.fire([{type:0,index:this._specialColors[z]}]);else{const X=(0,I.parseColor)(U[J]);X&&this._onColor.fire([{type:1,index:this._specialColors[z],color:X}])}return!0}setOrReportFgColor(B){return this._setOrReportSpecialColor(B,0)}setOrReportBgColor(B){return this._setOrReportSpecialColor(B,1)}setOrReportCursorColor(B){return this._setOrReportSpecialColor(B,2)}restoreIndexedColor(B){if(!B)return this._onColor.fire([{type:2}]),!0;const z=[],U=B.split(";");for(let J=0;J<U.length;++J)if(/^\d+$/.exec(U[J])){const X=parseInt(U[J]);Se(X)&&z.push({type:2,index:X})}return z.length&&this._onColor.fire(z),!0}restoreFgColor(B){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(B){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(B){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,k.DEFAULT_CHARSET),!0}selectCharset(B){return B.length!==2?(this.selectDefaultCharset(),!0):(B[0]==="/"||this._charsetService.setgCharset(V[B[0]],k.CHARSETS[B[1]]||k.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const B=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,B,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(B){return this._charsetService.setgLevel(B),!0}screenAlignmentPattern(){const B=new c.CellData;B.content=4194373,B.fg=this._curAttrData.fg,B.bg=this._curAttrData.bg,this._setCursor(0,0);for(let z=0;z<this._bufferService.rows;++z){const U=this._activeBuffer.ybase+this._activeBuffer.y+z,J=this._activeBuffer.lines.get(U);J&&(J.fill(B),J.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(B,z){const U=this._bufferService.buffer,J=this._optionsService.rawOptions;return(X=>(this._coreService.triggerDataEvent(`${m.C0.ESC}${X}${m.C0.ESC}\\`),!0))(B==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:B==='"p'?'P1$r61;1"p':B==="r"?`P1$r${U.scrollTop+1};${U.scrollBottom+1}r`:B==="m"?"P1$r0m":B===" q"?`P1$r${{block:2,underline:4,bar:6}[J.cursorStyle]-(J.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(B,z){this._dirtyRowTracker.markRangeDirty(B,z)}}p.InputHandler=ce;let ve=class{constructor(ge){this._bufferService=ge,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(ge){ge<this.start?this.start=ge:ge>this.end&&(this.end=ge)}markRangeDirty(ge,B){ge>B&&(se=ge,ge=B,B=se),ge<this.start&&(this.start=ge),B>this.end&&(this.end=B)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Se(ge){return 0<=ge&&ge<256}ve=x([E(0,M.IBufferService)],ve)},844:(he,p)=>{function g(x){for(const E of x)E.dispose();x.length=0}Object.defineProperty(p,"__esModule",{value:!0}),p.getDisposeArrayDisposable=p.disposeArray=p.toDisposable=p.MutableDisposable=p.Disposable=void 0,p.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const x of this._disposables)x.dispose();this._disposables.length=0}register(x){return this._disposables.push(x),x}unregister(x){const E=this._disposables.indexOf(x);E!==-1&&this._disposables.splice(E,1)}},p.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(x){this._isDisposed||x===this._value||(this._value?.dispose(),this._value=x)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},p.toDisposable=function(x){return{dispose:x}},p.disposeArray=g,p.getDisposeArrayDisposable=function(x){return{dispose:()=>g(x)}}},1505:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.FourKeyMap=p.TwoKeyMap=void 0;class g{constructor(){this._data={}}set(E,m,k){this._data[E]||(this._data[E]={}),this._data[E][m]=k}get(E,m){return this._data[E]?this._data[E][m]:void 0}clear(){this._data={}}}p.TwoKeyMap=g,p.FourKeyMap=class{constructor(){this._data=new g}set(x,E,m,k,D){this._data.get(x,E)||this._data.set(x,E,new g),this._data.get(x,E).set(m,k,D)}get(x,E,m,k){return this._data.get(x,E)?.get(m,k)}clear(){this._data.clear()}}},6114:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.isChromeOS=p.isLinux=p.isWindows=p.isIphone=p.isIpad=p.isMac=p.getSafariVersion=p.isSafari=p.isLegacyEdge=p.isFirefox=p.isNode=void 0,p.isNode=typeof process<"u"&&"title"in process;const g=p.isNode?"node":navigator.userAgent,x=p.isNode?"node":navigator.platform;p.isFirefox=g.includes("Firefox"),p.isLegacyEdge=g.includes("Edge"),p.isSafari=/^((?!chrome|android).)*safari/i.test(g),p.getSafariVersion=function(){if(!p.isSafari)return 0;const E=g.match(/Version\/(\d+)/);return E===null||E.length<2?0:parseInt(E[1])},p.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(x),p.isIpad=x==="iPad",p.isIphone=x==="iPhone",p.isWindows=["Windows","Win16","Win32","WinCE"].includes(x),p.isLinux=x.indexOf("Linux")>=0,p.isChromeOS=/\bCrOS\b/.test(g)},6106:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.SortedList=void 0;let g=0;p.SortedList=class{constructor(x){this._getKey=x,this._array=[]}clear(){this._array.length=0}insert(x){this._array.length!==0?(g=this._search(this._getKey(x)),this._array.splice(g,0,x)):this._array.push(x)}delete(x){if(this._array.length===0)return!1;const E=this._getKey(x);if(E===void 0||(g=this._search(E),g===-1)||this._getKey(this._array[g])!==E)return!1;do if(this._array[g]===x)return this._array.splice(g,1),!0;while(++g<this._array.length&&this._getKey(this._array[g])===E);return!1}*getKeyIterator(x){if(this._array.length!==0&&(g=this._search(x),!(g<0||g>=this._array.length)&&this._getKey(this._array[g])===x))do yield this._array[g];while(++g<this._array.length&&this._getKey(this._array[g])===x)}forEachByKey(x,E){if(this._array.length!==0&&(g=this._search(x),!(g<0||g>=this._array.length)&&this._getKey(this._array[g])===x))do E(this._array[g]);while(++g<this._array.length&&this._getKey(this._array[g])===x)}values(){return[...this._array].values()}_search(x){let E=0,m=this._array.length-1;for(;m>=E;){let k=E+m>>1;const D=this._getKey(this._array[k]);if(D>x)m=k-1;else{if(!(D<x)){for(;k>0&&this._getKey(this._array[k-1])===x;)k--;return k}E=k+1}}return E}}},7226:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DebouncedIdleTask=p.IdleTaskQueue=p.PriorityTaskQueue=void 0;const x=g(6114);class E{constructor(){this._tasks=[],this._i=0}enqueue(D){this._tasks.push(D),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(D){this._idleCallback=void 0;let T=0,S=0,d=D.timeRemaining(),u=0;for(;this._i<this._tasks.length;){if(T=Date.now(),this._tasks[this._i]()||this._i++,T=Math.max(1,Date.now()-T),S=Math.max(T,S),u=D.timeRemaining(),1.5*S>u)return d-T<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(d-T))}ms`),void this._start();d=u}this.clear()}}class m extends E{_requestCallback(D){return setTimeout(()=>D(this._createDeadline(16)))}_cancelCallback(D){clearTimeout(D)}_createDeadline(D){const T=Date.now()+D;return{timeRemaining:()=>Math.max(0,T-Date.now())}}}p.PriorityTaskQueue=m,p.IdleTaskQueue=!x.isNode&&"requestIdleCallback"in window?class extends E{_requestCallback(k){return requestIdleCallback(k)}_cancelCallback(k){cancelIdleCallback(k)}}:m,p.DebouncedIdleTask=class{constructor(){this._queue=new p.IdleTaskQueue}set(k){this._queue.clear(),this._queue.enqueue(k)}flush(){this._queue.flush()}}},9282:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.updateWindowsModeWrappedState=void 0;const x=g(643);p.updateWindowsModeWrappedState=function(E){const m=E.buffer.lines.get(E.buffer.ybase+E.buffer.y-1),k=m?.get(E.cols-1),D=E.buffer.lines.get(E.buffer.ybase+E.buffer.y);D&&k&&(D.isWrapped=k[x.CHAR_DATA_CODE_INDEX]!==x.NULL_CELL_CODE&&k[x.CHAR_DATA_CODE_INDEX]!==x.WHITESPACE_CELL_CODE)}},3734:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ExtendedAttrs=p.AttributeData=void 0;class g{constructor(){this.fg=0,this.bg=0,this.extended=new x}static toColorRGB(m){return[m>>>16&255,m>>>8&255,255&m]}static fromColorRGB(m){return(255&m[0])<<16|(255&m[1])<<8|255&m[2]}clone(){const m=new g;return m.fg=this.fg,m.bg=this.bg,m.extended=this.extended.clone(),m}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}p.AttributeData=g;class x{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(m){this._ext=m}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(m){this._ext&=-469762049,this._ext|=m<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(m){this._ext&=-67108864,this._ext|=67108863&m}get urlId(){return this._urlId}set urlId(m){this._urlId=m}get underlineVariantOffset(){const m=(3758096384&this._ext)>>29;return m<0?4294967288^m:m}set underlineVariantOffset(m){this._ext&=536870911,this._ext|=m<<29&3758096384}constructor(m=0,k=0){this._ext=0,this._urlId=0,this._ext=m,this._urlId=k}clone(){return new x(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}p.ExtendedAttrs=x},9092:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Buffer=p.MAX_BUFFER_SIZE=void 0;const x=g(6349),E=g(7226),m=g(3734),k=g(8437),D=g(4634),T=g(511),S=g(643),d=g(4863),u=g(7116);p.MAX_BUFFER_SIZE=4294967295,p.Buffer=class{constructor(l,c,b){this._hasScrollback=l,this._optionsService=c,this._bufferService=b,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=k.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=T.CellData.fromCharData([0,S.NULL_CELL_CHAR,S.NULL_CELL_WIDTH,S.NULL_CELL_CODE]),this._whitespaceCell=T.CellData.fromCharData([0,S.WHITESPACE_CELL_CHAR,S.WHITESPACE_CELL_WIDTH,S.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new E.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new x.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(l){return l?(this._nullCell.fg=l.fg,this._nullCell.bg=l.bg,this._nullCell.extended=l.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new m.ExtendedAttrs),this._nullCell}getWhitespaceCell(l){return l?(this._whitespaceCell.fg=l.fg,this._whitespaceCell.bg=l.bg,this._whitespaceCell.extended=l.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new m.ExtendedAttrs),this._whitespaceCell}getBlankLine(l,c){return new k.BufferLine(this._bufferService.cols,this.getNullCell(l),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const l=this.ybase+this.y-this.ydisp;return l>=0&&l<this._rows}_getCorrectBufferLength(l){if(!this._hasScrollback)return l;const c=l+this._optionsService.rawOptions.scrollback;return c>p.MAX_BUFFER_SIZE?p.MAX_BUFFER_SIZE:c}fillViewportRows(l){if(this.lines.length===0){l===void 0&&(l=k.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(l))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new x.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(l,c){const b=this.getNullCell(k.DEFAULT_ATTR_DATA);let M=0;const A=this._getCorrectBufferLength(c);if(A>this.lines.maxLength&&(this.lines.maxLength=A),this.lines.length>0){if(this._cols<l)for(let w=0;w<this.lines.length;w++)M+=+this.lines.get(w).resize(l,b);let R=0;if(this._rows<c)for(let w=this._rows;w<c;w++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new k.BufferLine(l,b)):this.ybase>0&&this.lines.length<=this.ybase+this.y+R+1?(this.ybase--,R++,this.ydisp>0&&this.ydisp--):this.lines.push(new k.BufferLine(l,b)));else for(let w=this._rows;w>c;w--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(A<this.lines.maxLength){const w=this.lines.length-A;w>0&&(this.lines.trimStart(w),this.ybase=Math.max(this.ybase-w,0),this.ydisp=Math.max(this.ydisp-w,0),this.savedY=Math.max(this.savedY-w,0)),this.lines.maxLength=A}this.x=Math.min(this.x,l-1),this.y=Math.min(this.y,c-1),R&&(this.y+=R),this.savedX=Math.min(this.savedX,l-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(l,c),this._cols>l))for(let R=0;R<this.lines.length;R++)M+=+this.lines.get(R).resize(l,b);this._cols=l,this._rows=c,this._memoryCleanupQueue.clear(),M>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let l=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,l=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return l}get _isReflowEnabled(){const l=this._optionsService.rawOptions.windowsPty;return l&&l.buildNumber?this._hasScrollback&&l.backend==="conpty"&&l.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(l,c){this._cols!==l&&(l>this._cols?this._reflowLarger(l,c):this._reflowSmaller(l,c))}_reflowLarger(l,c){const b=(0,D.reflowLargerGetLinesToRemove)(this.lines,this._cols,l,this.ybase+this.y,this.getNullCell(k.DEFAULT_ATTR_DATA));if(b.length>0){const M=(0,D.reflowLargerCreateNewLayout)(this.lines,b);(0,D.reflowLargerApplyNewLayout)(this.lines,M.layout),this._reflowLargerAdjustViewport(l,c,M.countRemoved)}}_reflowLargerAdjustViewport(l,c,b){const M=this.getNullCell(k.DEFAULT_ATTR_DATA);let A=b;for(;A-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new k.BufferLine(l,M))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-b,0)}_reflowSmaller(l,c){const b=this.getNullCell(k.DEFAULT_ATTR_DATA),M=[];let A=0;for(let R=this.lines.length-1;R>=0;R--){let w=this.lines.get(R);if(!w||!w.isWrapped&&w.getTrimmedLength()<=l)continue;const I=[w];for(;w.isWrapped&&R>0;)w=this.lines.get(--R),I.unshift(w);const V=this.ybase+this.y;if(V>=R&&V<R+I.length)continue;const j=I[I.length-1].getTrimmedLength(),ee=(0,D.reflowSmallerGetNewLineLengths)(I,this._cols,l),W=ee.length-I.length;let se;se=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+W):Math.max(0,this.lines.length-this.lines.maxLength+W);const ce=[];for(let U=0;U<W;U++){const J=this.getBlankLine(k.DEFAULT_ATTR_DATA,!0);ce.push(J)}ce.length>0&&(M.push({start:R+I.length+A,newLines:ce}),A+=ce.length),I.push(...ce);let ve=ee.length-1,Se=ee[ve];Se===0&&(ve--,Se=ee[ve]);let ge=I.length-W-1,B=j;for(;ge>=0;){const U=Math.min(B,Se);if(I[ve]===void 0)break;if(I[ve].copyCellsFrom(I[ge],B-U,Se-U,U,!0),Se-=U,Se===0&&(ve--,Se=ee[ve]),B-=U,B===0){ge--;const J=Math.max(ge,0);B=(0,D.getWrappedLineTrimmedLength)(I,J,this._cols)}}for(let U=0;U<I.length;U++)ee[U]<l&&I[U].setCell(ee[U],b);let z=W-se;for(;z-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+A)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+W,this.ybase+c-1)}if(M.length>0){const R=[],w=[];for(let ve=0;ve<this.lines.length;ve++)w.push(this.lines.get(ve));const I=this.lines.length;let V=I-1,j=0,ee=M[j];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+A);let W=0;for(let ve=Math.min(this.lines.maxLength-1,I+A-1);ve>=0;ve--)if(ee&&ee.start>V+W){for(let Se=ee.newLines.length-1;Se>=0;Se--)this.lines.set(ve--,ee.newLines[Se]);ve++,R.push({index:V+1,amount:ee.newLines.length}),W+=ee.newLines.length,ee=M[++j]}else this.lines.set(ve,w[V--]);let se=0;for(let ve=R.length-1;ve>=0;ve--)R[ve].index+=se,this.lines.onInsertEmitter.fire(R[ve]),se+=R[ve].amount;const ce=Math.max(0,I+A-this.lines.maxLength);ce>0&&this.lines.onTrimEmitter.fire(ce)}}translateBufferLineToString(l,c,b=0,M){const A=this.lines.get(l);return A?A.translateToString(c,b,M):""}getWrappedRangeForLine(l){let c=l,b=l;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;b+1<this.lines.length&&this.lines.get(b+1).isWrapped;)b++;return{first:c,last:b}}setupTabStops(l){for(l!=null?this.tabs[l]||(l=this.prevStop(l)):(this.tabs={},l=0);l<this._cols;l+=this._optionsService.rawOptions.tabStopWidth)this.tabs[l]=!0}prevStop(l){for(l==null&&(l=this.x);!this.tabs[--l]&&l>0;);return l>=this._cols?this._cols-1:l<0?0:l}nextStop(l){for(l==null&&(l=this.x);!this.tabs[++l]&&l<this._cols;);return l>=this._cols?this._cols-1:l<0?0:l}clearMarkers(l){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===l&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].dispose(),this.markers.splice(l--,1);this._isClearing=!1}addMarker(l){const c=new d.Marker(l);return this.markers.push(c),c.register(this.lines.onTrim(b=>{c.line-=b,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(b=>{c.line>=b.index&&(c.line+=b.amount)})),c.register(this.lines.onDelete(b=>{c.line>=b.index&&c.line<b.index+b.amount&&c.dispose(),c.line>b.index&&(c.line-=b.amount)})),c.register(c.onDispose(()=>this._removeMarker(c))),c}_removeMarker(l){this._isClearing||this.markers.splice(this.markers.indexOf(l),1)}}},8437:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferLine=p.DEFAULT_ATTR_DATA=void 0;const x=g(3734),E=g(511),m=g(643),k=g(482);p.DEFAULT_ATTR_DATA=Object.freeze(new x.AttributeData);let D=0;class T{constructor(d,u,l=!1){this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*d);const c=u||E.CellData.fromCharData([0,m.NULL_CELL_CHAR,m.NULL_CELL_WIDTH,m.NULL_CELL_CODE]);for(let b=0;b<d;++b)this.setCell(b,c);this.length=d}get(d){const u=this._data[3*d+0],l=2097151&u;return[this._data[3*d+1],2097152&u?this._combined[d]:l?(0,k.stringFromCodePoint)(l):"",u>>22,2097152&u?this._combined[d].charCodeAt(this._combined[d].length-1):l]}set(d,u){this._data[3*d+1]=u[m.CHAR_DATA_ATTR_INDEX],u[m.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[d]=u[1],this._data[3*d+0]=2097152|d|u[m.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*d+0]=u[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[m.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(d){return this._data[3*d+0]>>22}hasWidth(d){return 12582912&this._data[3*d+0]}getFg(d){return this._data[3*d+1]}getBg(d){return this._data[3*d+2]}hasContent(d){return 4194303&this._data[3*d+0]}getCodePoint(d){const u=this._data[3*d+0];return 2097152&u?this._combined[d].charCodeAt(this._combined[d].length-1):2097151&u}isCombined(d){return 2097152&this._data[3*d+0]}getString(d){const u=this._data[3*d+0];return 2097152&u?this._combined[d]:2097151&u?(0,k.stringFromCodePoint)(2097151&u):""}isProtected(d){return 536870912&this._data[3*d+2]}loadCell(d,u){return D=3*d,u.content=this._data[D+0],u.fg=this._data[D+1],u.bg=this._data[D+2],2097152&u.content&&(u.combinedData=this._combined[d]),268435456&u.bg&&(u.extended=this._extendedAttrs[d]),u}setCell(d,u){2097152&u.content&&(this._combined[d]=u.combinedData),268435456&u.bg&&(this._extendedAttrs[d]=u.extended),this._data[3*d+0]=u.content,this._data[3*d+1]=u.fg,this._data[3*d+2]=u.bg}setCellFromCodepoint(d,u,l,c){268435456&c.bg&&(this._extendedAttrs[d]=c.extended),this._data[3*d+0]=u|l<<22,this._data[3*d+1]=c.fg,this._data[3*d+2]=c.bg}addCodepointToCell(d,u,l){let c=this._data[3*d+0];2097152&c?this._combined[d]+=(0,k.stringFromCodePoint)(u):2097151&c?(this._combined[d]=(0,k.stringFromCodePoint)(2097151&c)+(0,k.stringFromCodePoint)(u),c&=-2097152,c|=2097152):c=u|4194304,l&&(c&=-12582913,c|=l<<22),this._data[3*d+0]=c}insertCells(d,u,l){if((d%=this.length)&&this.getWidth(d-1)===2&&this.setCellFromCodepoint(d-1,0,1,l),u<this.length-d){const c=new E.CellData;for(let b=this.length-d-u-1;b>=0;--b)this.setCell(d+u+b,this.loadCell(d+b,c));for(let b=0;b<u;++b)this.setCell(d+b,l)}else for(let c=d;c<this.length;++c)this.setCell(c,l);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,l)}deleteCells(d,u,l){if(d%=this.length,u<this.length-d){const c=new E.CellData;for(let b=0;b<this.length-d-u;++b)this.setCell(d+b,this.loadCell(d+u+b,c));for(let b=this.length-u;b<this.length;++b)this.setCell(b,l)}else for(let c=d;c<this.length;++c)this.setCell(c,l);d&&this.getWidth(d-1)===2&&this.setCellFromCodepoint(d-1,0,1,l),this.getWidth(d)!==0||this.hasContent(d)||this.setCellFromCodepoint(d,0,1,l)}replaceCells(d,u,l,c=!1){if(c)for(d&&this.getWidth(d-1)===2&&!this.isProtected(d-1)&&this.setCellFromCodepoint(d-1,0,1,l),u<this.length&&this.getWidth(u-1)===2&&!this.isProtected(u)&&this.setCellFromCodepoint(u,0,1,l);d<u&&d<this.length;)this.isProtected(d)||this.setCell(d,l),d++;else for(d&&this.getWidth(d-1)===2&&this.setCellFromCodepoint(d-1,0,1,l),u<this.length&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u,0,1,l);d<u&&d<this.length;)this.setCell(d++,l)}resize(d,u){if(d===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const l=3*d;if(d>this.length){if(this._data.buffer.byteLength>=4*l)this._data=new Uint32Array(this._data.buffer,0,l);else{const c=new Uint32Array(l);c.set(this._data),this._data=c}for(let c=this.length;c<d;++c)this.setCell(c,u)}else{this._data=this._data.subarray(0,l);const c=Object.keys(this._combined);for(let M=0;M<c.length;M++){const A=parseInt(c[M],10);A>=d&&delete this._combined[A]}const b=Object.keys(this._extendedAttrs);for(let M=0;M<b.length;M++){const A=parseInt(b[M],10);A>=d&&delete this._extendedAttrs[A]}}return this.length=d,4*l*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const d=new Uint32Array(this._data.length);return d.set(this._data),this._data=d,1}return 0}fill(d,u=!1){if(u)for(let l=0;l<this.length;++l)this.isProtected(l)||this.setCell(l,d);else{this._combined={},this._extendedAttrs={};for(let l=0;l<this.length;++l)this.setCell(l,d)}}copyFrom(d){this.length!==d.length?this._data=new Uint32Array(d._data):this._data.set(d._data),this.length=d.length,this._combined={};for(const u in d._combined)this._combined[u]=d._combined[u];this._extendedAttrs={};for(const u in d._extendedAttrs)this._extendedAttrs[u]=d._extendedAttrs[u];this.isWrapped=d.isWrapped}clone(){const d=new T(0);d._data=new Uint32Array(this._data),d.length=this.length;for(const u in this._combined)d._combined[u]=this._combined[u];for(const u in this._extendedAttrs)d._extendedAttrs[u]=this._extendedAttrs[u];return d.isWrapped=this.isWrapped,d}getTrimmedLength(){for(let d=this.length-1;d>=0;--d)if(4194303&this._data[3*d+0])return d+(this._data[3*d+0]>>22);return 0}getNoBgTrimmedLength(){for(let d=this.length-1;d>=0;--d)if(4194303&this._data[3*d+0]||50331648&this._data[3*d+2])return d+(this._data[3*d+0]>>22);return 0}copyCellsFrom(d,u,l,c,b){const M=d._data;if(b)for(let R=c-1;R>=0;R--){for(let w=0;w<3;w++)this._data[3*(l+R)+w]=M[3*(u+R)+w];268435456&M[3*(u+R)+2]&&(this._extendedAttrs[l+R]=d._extendedAttrs[u+R])}else for(let R=0;R<c;R++){for(let w=0;w<3;w++)this._data[3*(l+R)+w]=M[3*(u+R)+w];268435456&M[3*(u+R)+2]&&(this._extendedAttrs[l+R]=d._extendedAttrs[u+R])}const A=Object.keys(d._combined);for(let R=0;R<A.length;R++){const w=parseInt(A[R],10);w>=u&&(this._combined[w-u+l]=d._combined[w])}}translateToString(d,u,l,c){u=u??0,l=l??this.length,d&&(l=Math.min(l,this.getTrimmedLength())),c&&(c.length=0);let b="";for(;u<l;){const M=this._data[3*u+0],A=2097151&M,R=2097152&M?this._combined[u]:A?(0,k.stringFromCodePoint)(A):m.WHITESPACE_CELL_CHAR;if(b+=R,c)for(let w=0;w<R.length;++w)c.push(u);u+=M>>22||1}return c&&c.push(u),b}}p.BufferLine=T},4841:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.getRangeLength=void 0,p.getRangeLength=function(g,x){if(g.start.y>g.end.y)throw new Error(`Buffer range end (${g.end.x}, ${g.end.y}) cannot be before start (${g.start.x}, ${g.start.y})`);return x*(g.end.y-g.start.y)+(g.end.x-g.start.x+1)}},4634:(he,p)=>{function g(x,E,m){if(E===x.length-1)return x[E].getTrimmedLength();const k=!x[E].hasContent(m-1)&&x[E].getWidth(m-1)===1,D=x[E+1].getWidth(0)===2;return k&&D?m-1:m}Object.defineProperty(p,"__esModule",{value:!0}),p.getWrappedLineTrimmedLength=p.reflowSmallerGetNewLineLengths=p.reflowLargerApplyNewLayout=p.reflowLargerCreateNewLayout=p.reflowLargerGetLinesToRemove=void 0,p.reflowLargerGetLinesToRemove=function(x,E,m,k,D){const T=[];for(let S=0;S<x.length-1;S++){let d=S,u=x.get(++d);if(!u.isWrapped)continue;const l=[x.get(S)];for(;d<x.length&&u.isWrapped;)l.push(u),u=x.get(++d);if(k>=S&&k<d){S+=l.length-1;continue}let c=0,b=g(l,c,E),M=1,A=0;for(;M<l.length;){const w=g(l,M,E),I=w-A,V=m-b,j=Math.min(I,V);l[c].copyCellsFrom(l[M],A,b,j,!1),b+=j,b===m&&(c++,b=0),A+=j,A===w&&(M++,A=0),b===0&&c!==0&&l[c-1].getWidth(m-1)===2&&(l[c].copyCellsFrom(l[c-1],m-1,b++,1,!1),l[c-1].setCell(m-1,D))}l[c].replaceCells(b,m,D);let R=0;for(let w=l.length-1;w>0&&(w>c||l[w].getTrimmedLength()===0);w--)R++;R>0&&(T.push(S+l.length-R),T.push(R)),S+=l.length-1}return T},p.reflowLargerCreateNewLayout=function(x,E){const m=[];let k=0,D=E[k],T=0;for(let S=0;S<x.length;S++)if(D===S){const d=E[++k];x.onDeleteEmitter.fire({index:S-T,amount:d}),S+=d-1,T+=d,D=E[++k]}else m.push(S);return{layout:m,countRemoved:T}},p.reflowLargerApplyNewLayout=function(x,E){const m=[];for(let k=0;k<E.length;k++)m.push(x.get(E[k]));for(let k=0;k<m.length;k++)x.set(k,m[k]);x.length=E.length},p.reflowSmallerGetNewLineLengths=function(x,E,m){const k=[],D=x.map((u,l)=>g(x,l,E)).reduce((u,l)=>u+l);let T=0,S=0,d=0;for(;d<D;){if(D-d<m){k.push(D-d);break}T+=m;const u=g(x,S,E);T>u&&(T-=u,S++);const l=x[S].getWidth(T-1)===2;l&&T--;const c=l?m-1:m;k.push(c),d+=c}return k},p.getWrappedLineTrimmedLength=g},5295:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferSet=void 0;const x=g(8460),E=g(844),m=g(9092);class k extends E.Disposable{constructor(T,S){super(),this._optionsService=T,this._bufferService=S,this._onBufferActivate=this.register(new x.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new m.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new m.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(T){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(T),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(T,S){this._normal.resize(T,S),this._alt.resize(T,S),this.setupTabStops(T)}setupTabStops(T){this._normal.setupTabStops(T),this._alt.setupTabStops(T)}}p.BufferSet=k},511:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CellData=void 0;const x=g(482),E=g(643),m=g(3734);class k extends m.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new m.ExtendedAttrs,this.combinedData=""}static fromCharData(T){const S=new k;return S.setFromCharData(T),S}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,x.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(T){this.fg=T[E.CHAR_DATA_ATTR_INDEX],this.bg=0;let S=!1;if(T[E.CHAR_DATA_CHAR_INDEX].length>2)S=!0;else if(T[E.CHAR_DATA_CHAR_INDEX].length===2){const d=T[E.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=d&&d<=56319){const u=T[E.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=u&&u<=57343?this.content=1024*(d-55296)+u-56320+65536|T[E.CHAR_DATA_WIDTH_INDEX]<<22:S=!0}else S=!0}else this.content=T[E.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|T[E.CHAR_DATA_WIDTH_INDEX]<<22;S&&(this.combinedData=T[E.CHAR_DATA_CHAR_INDEX],this.content=2097152|T[E.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}p.CellData=k},643:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.WHITESPACE_CELL_CODE=p.WHITESPACE_CELL_WIDTH=p.WHITESPACE_CELL_CHAR=p.NULL_CELL_CODE=p.NULL_CELL_WIDTH=p.NULL_CELL_CHAR=p.CHAR_DATA_CODE_INDEX=p.CHAR_DATA_WIDTH_INDEX=p.CHAR_DATA_CHAR_INDEX=p.CHAR_DATA_ATTR_INDEX=p.DEFAULT_EXT=p.DEFAULT_ATTR=p.DEFAULT_COLOR=void 0,p.DEFAULT_COLOR=0,p.DEFAULT_ATTR=256|p.DEFAULT_COLOR<<9,p.DEFAULT_EXT=0,p.CHAR_DATA_ATTR_INDEX=0,p.CHAR_DATA_CHAR_INDEX=1,p.CHAR_DATA_WIDTH_INDEX=2,p.CHAR_DATA_CODE_INDEX=3,p.NULL_CELL_CHAR="",p.NULL_CELL_WIDTH=1,p.NULL_CELL_CODE=0,p.WHITESPACE_CELL_CHAR=" ",p.WHITESPACE_CELL_WIDTH=1,p.WHITESPACE_CELL_CODE=32},4863:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Marker=void 0;const x=g(8460),E=g(844);class m{get id(){return this._id}constructor(D){this.line=D,this.isDisposed=!1,this._disposables=[],this._id=m._nextId++,this._onDispose=this.register(new x.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,E.disposeArray)(this._disposables),this._disposables.length=0)}register(D){return this._disposables.push(D),D}}p.Marker=m,m._nextId=1},7116:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DEFAULT_CHARSET=p.CHARSETS=void 0,p.CHARSETS={},p.DEFAULT_CHARSET=p.CHARSETS.B,p.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},p.CHARSETS.A={"#":"\xA3"},p.CHARSETS.B=void 0,p.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},p.CHARSETS.C=p.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},p.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},p.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},p.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},p.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},p.CHARSETS.E=p.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},p.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},p.CHARSETS.H=p.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},p.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(he,p)=>{var g,x,E;Object.defineProperty(p,"__esModule",{value:!0}),p.C1_ESCAPED=p.C1=p.C0=void 0,function(m){m.NUL="\0",m.SOH="",m.STX="",m.ETX="",m.EOT="",m.ENQ="",m.ACK="",m.BEL="\x07",m.BS="\b",m.HT="	",m.LF=`
`,m.VT="\v",m.FF="\f",m.CR="\r",m.SO="",m.SI="",m.DLE="",m.DC1="",m.DC2="",m.DC3="",m.DC4="",m.NAK="",m.SYN="",m.ETB="",m.CAN="",m.EM="",m.SUB="",m.ESC="\x1B",m.FS="",m.GS="",m.RS="",m.US="",m.SP=" ",m.DEL="\x7F"}(g||(p.C0=g={})),function(m){m.PAD="\x80",m.HOP="\x81",m.BPH="\x82",m.NBH="\x83",m.IND="\x84",m.NEL="\x85",m.SSA="\x86",m.ESA="\x87",m.HTS="\x88",m.HTJ="\x89",m.VTS="\x8A",m.PLD="\x8B",m.PLU="\x8C",m.RI="\x8D",m.SS2="\x8E",m.SS3="\x8F",m.DCS="\x90",m.PU1="\x91",m.PU2="\x92",m.STS="\x93",m.CCH="\x94",m.MW="\x95",m.SPA="\x96",m.EPA="\x97",m.SOS="\x98",m.SGCI="\x99",m.SCI="\x9A",m.CSI="\x9B",m.ST="\x9C",m.OSC="\x9D",m.PM="\x9E",m.APC="\x9F"}(x||(p.C1=x={})),function(m){m.ST=`${g.ESC}\\`}(E||(p.C1_ESCAPED=E={}))},7399:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.evaluateKeyboardEvent=void 0;const x=g(2584),E={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};p.evaluateKeyboardEvent=function(m,k,D,T){const S={type:0,cancel:!1,key:void 0},d=(m.shiftKey?1:0)|(m.altKey?2:0)|(m.ctrlKey?4:0)|(m.metaKey?8:0);switch(m.keyCode){case 0:m.key==="UIKeyInputUpArrow"?S.key=k?x.C0.ESC+"OA":x.C0.ESC+"[A":m.key==="UIKeyInputLeftArrow"?S.key=k?x.C0.ESC+"OD":x.C0.ESC+"[D":m.key==="UIKeyInputRightArrow"?S.key=k?x.C0.ESC+"OC":x.C0.ESC+"[C":m.key==="UIKeyInputDownArrow"&&(S.key=k?x.C0.ESC+"OB":x.C0.ESC+"[B");break;case 8:S.key=m.ctrlKey?"\b":x.C0.DEL,m.altKey&&(S.key=x.C0.ESC+S.key);break;case 9:if(m.shiftKey){S.key=x.C0.ESC+"[Z";break}S.key=x.C0.HT,S.cancel=!0;break;case 13:S.key=m.altKey?x.C0.ESC+x.C0.CR:x.C0.CR,S.cancel=!0;break;case 27:S.key=x.C0.ESC,m.altKey&&(S.key=x.C0.ESC+x.C0.ESC),S.cancel=!0;break;case 37:if(m.metaKey)break;d?(S.key=x.C0.ESC+"[1;"+(d+1)+"D",S.key===x.C0.ESC+"[1;3D"&&(S.key=x.C0.ESC+(D?"b":"[1;5D"))):S.key=k?x.C0.ESC+"OD":x.C0.ESC+"[D";break;case 39:if(m.metaKey)break;d?(S.key=x.C0.ESC+"[1;"+(d+1)+"C",S.key===x.C0.ESC+"[1;3C"&&(S.key=x.C0.ESC+(D?"f":"[1;5C"))):S.key=k?x.C0.ESC+"OC":x.C0.ESC+"[C";break;case 38:if(m.metaKey)break;d?(S.key=x.C0.ESC+"[1;"+(d+1)+"A",D||S.key!==x.C0.ESC+"[1;3A"||(S.key=x.C0.ESC+"[1;5A")):S.key=k?x.C0.ESC+"OA":x.C0.ESC+"[A";break;case 40:if(m.metaKey)break;d?(S.key=x.C0.ESC+"[1;"+(d+1)+"B",D||S.key!==x.C0.ESC+"[1;3B"||(S.key=x.C0.ESC+"[1;5B")):S.key=k?x.C0.ESC+"OB":x.C0.ESC+"[B";break;case 45:m.shiftKey||m.ctrlKey||(S.key=x.C0.ESC+"[2~");break;case 46:S.key=d?x.C0.ESC+"[3;"+(d+1)+"~":x.C0.ESC+"[3~";break;case 36:S.key=d?x.C0.ESC+"[1;"+(d+1)+"H":k?x.C0.ESC+"OH":x.C0.ESC+"[H";break;case 35:S.key=d?x.C0.ESC+"[1;"+(d+1)+"F":k?x.C0.ESC+"OF":x.C0.ESC+"[F";break;case 33:m.shiftKey?S.type=2:m.ctrlKey?S.key=x.C0.ESC+"[5;"+(d+1)+"~":S.key=x.C0.ESC+"[5~";break;case 34:m.shiftKey?S.type=3:m.ctrlKey?S.key=x.C0.ESC+"[6;"+(d+1)+"~":S.key=x.C0.ESC+"[6~";break;case 112:S.key=d?x.C0.ESC+"[1;"+(d+1)+"P":x.C0.ESC+"OP";break;case 113:S.key=d?x.C0.ESC+"[1;"+(d+1)+"Q":x.C0.ESC+"OQ";break;case 114:S.key=d?x.C0.ESC+"[1;"+(d+1)+"R":x.C0.ESC+"OR";break;case 115:S.key=d?x.C0.ESC+"[1;"+(d+1)+"S":x.C0.ESC+"OS";break;case 116:S.key=d?x.C0.ESC+"[15;"+(d+1)+"~":x.C0.ESC+"[15~";break;case 117:S.key=d?x.C0.ESC+"[17;"+(d+1)+"~":x.C0.ESC+"[17~";break;case 118:S.key=d?x.C0.ESC+"[18;"+(d+1)+"~":x.C0.ESC+"[18~";break;case 119:S.key=d?x.C0.ESC+"[19;"+(d+1)+"~":x.C0.ESC+"[19~";break;case 120:S.key=d?x.C0.ESC+"[20;"+(d+1)+"~":x.C0.ESC+"[20~";break;case 121:S.key=d?x.C0.ESC+"[21;"+(d+1)+"~":x.C0.ESC+"[21~";break;case 122:S.key=d?x.C0.ESC+"[23;"+(d+1)+"~":x.C0.ESC+"[23~";break;case 123:S.key=d?x.C0.ESC+"[24;"+(d+1)+"~":x.C0.ESC+"[24~";break;default:if(!m.ctrlKey||m.shiftKey||m.altKey||m.metaKey)if(D&&!T||!m.altKey||m.metaKey)!D||m.altKey||m.ctrlKey||m.shiftKey||!m.metaKey?m.key&&!m.ctrlKey&&!m.altKey&&!m.metaKey&&m.keyCode>=48&&m.key.length===1?S.key=m.key:m.key&&m.ctrlKey&&(m.key==="_"&&(S.key=x.C0.US),m.key==="@"&&(S.key=x.C0.NUL)):m.keyCode===65&&(S.type=1);else{const u=E[m.keyCode],l=u?.[m.shiftKey?1:0];if(l)S.key=x.C0.ESC+l;else if(m.keyCode>=65&&m.keyCode<=90){const c=m.ctrlKey?m.keyCode-64:m.keyCode+32;let b=String.fromCharCode(c);m.shiftKey&&(b=b.toUpperCase()),S.key=x.C0.ESC+b}else if(m.keyCode===32)S.key=x.C0.ESC+(m.ctrlKey?x.C0.NUL:" ");else if(m.key==="Dead"&&m.code.startsWith("Key")){let c=m.code.slice(3,4);m.shiftKey||(c=c.toLowerCase()),S.key=x.C0.ESC+c,S.cancel=!0}}else m.keyCode>=65&&m.keyCode<=90?S.key=String.fromCharCode(m.keyCode-64):m.keyCode===32?S.key=x.C0.NUL:m.keyCode>=51&&m.keyCode<=55?S.key=String.fromCharCode(m.keyCode-51+27):m.keyCode===56?S.key=x.C0.DEL:m.keyCode===219?S.key=x.C0.ESC:m.keyCode===220?S.key=x.C0.FS:m.keyCode===221&&(S.key=x.C0.GS)}return S}},482:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Utf8ToUtf32=p.StringToUtf32=p.utf32ToString=p.stringFromCodePoint=void 0,p.stringFromCodePoint=function(g){return g>65535?(g-=65536,String.fromCharCode(55296+(g>>10))+String.fromCharCode(g%1024+56320)):String.fromCharCode(g)},p.utf32ToString=function(g,x=0,E=g.length){let m="";for(let k=x;k<E;++k){let D=g[k];D>65535?(D-=65536,m+=String.fromCharCode(55296+(D>>10))+String.fromCharCode(D%1024+56320)):m+=String.fromCharCode(D)}return m},p.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(g,x){const E=g.length;if(!E)return 0;let m=0,k=0;if(this._interim){const D=g.charCodeAt(k++);56320<=D&&D<=57343?x[m++]=1024*(this._interim-55296)+D-56320+65536:(x[m++]=this._interim,x[m++]=D),this._interim=0}for(let D=k;D<E;++D){const T=g.charCodeAt(D);if(55296<=T&&T<=56319){if(++D>=E)return this._interim=T,m;const S=g.charCodeAt(D);56320<=S&&S<=57343?x[m++]=1024*(T-55296)+S-56320+65536:(x[m++]=T,x[m++]=S)}else T!==65279&&(x[m++]=T)}return m}},p.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(g,x){const E=g.length;if(!E)return 0;let m,k,D,T,S=0,d=0,u=0;if(this.interim[0]){let b=!1,M=this.interim[0];M&=(224&M)==192?31:(240&M)==224?15:7;let A,R=0;for(;(A=63&this.interim[++R])&&R<4;)M<<=6,M|=A;const w=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,I=w-R;for(;u<I;){if(u>=E)return 0;if(A=g[u++],(192&A)!=128){u--,b=!0;break}this.interim[R++]=A,M<<=6,M|=63&A}b||(w===2?M<128?u--:x[S++]=M:w===3?M<2048||M>=55296&&M<=57343||M===65279||(x[S++]=M):M<65536||M>1114111||(x[S++]=M)),this.interim.fill(0)}const l=E-4;let c=u;for(;c<E;){for(;!(!(c<l)||128&(m=g[c])||128&(k=g[c+1])||128&(D=g[c+2])||128&(T=g[c+3]));)x[S++]=m,x[S++]=k,x[S++]=D,x[S++]=T,c+=4;if(m=g[c++],m<128)x[S++]=m;else if((224&m)==192){if(c>=E)return this.interim[0]=m,S;if(k=g[c++],(192&k)!=128){c--;continue}if(d=(31&m)<<6|63&k,d<128){c--;continue}x[S++]=d}else if((240&m)==224){if(c>=E)return this.interim[0]=m,S;if(k=g[c++],(192&k)!=128){c--;continue}if(c>=E)return this.interim[0]=m,this.interim[1]=k,S;if(D=g[c++],(192&D)!=128){c--;continue}if(d=(15&m)<<12|(63&k)<<6|63&D,d<2048||d>=55296&&d<=57343||d===65279)continue;x[S++]=d}else if((248&m)==240){if(c>=E)return this.interim[0]=m,S;if(k=g[c++],(192&k)!=128){c--;continue}if(c>=E)return this.interim[0]=m,this.interim[1]=k,S;if(D=g[c++],(192&D)!=128){c--;continue}if(c>=E)return this.interim[0]=m,this.interim[1]=k,this.interim[2]=D,S;if(T=g[c++],(192&T)!=128){c--;continue}if(d=(7&m)<<18|(63&k)<<12|(63&D)<<6|63&T,d<65536||d>1114111)continue;x[S++]=d}}return S}}},225:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.UnicodeV6=void 0;const x=g(1480),E=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],m=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let k;p.UnicodeV6=class{constructor(){if(this.version="6",!k){k=new Uint8Array(65536),k.fill(1),k[0]=0,k.fill(0,1,32),k.fill(0,127,160),k.fill(2,4352,4448),k[9001]=2,k[9002]=2,k.fill(2,11904,42192),k[12351]=1,k.fill(2,44032,55204),k.fill(2,63744,64256),k.fill(2,65040,65050),k.fill(2,65072,65136),k.fill(2,65280,65377),k.fill(2,65504,65511);for(let D=0;D<E.length;++D)k.fill(0,E[D][0],E[D][1]+1)}}wcwidth(D){return D<32?0:D<127?1:D<65536?k[D]:function(T,S){let d,u=0,l=S.length-1;if(T<S[0][0]||T>S[l][1])return!1;for(;l>=u;)if(d=u+l>>1,T>S[d][1])u=d+1;else{if(!(T<S[d][0]))return!0;l=d-1}return!1}(D,m)?0:D>=131072&&D<=196605||D>=196608&&D<=262141?2:1}charProperties(D,T){let S=this.wcwidth(D),d=S===0&&T!==0;if(d){const u=x.UnicodeService.extractWidth(T);u===0?d=!1:u>S&&(S=u)}return x.UnicodeService.createPropertyValue(0,S,d)}}},5981:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.WriteBuffer=void 0;const x=g(8460),E=g(844);class m extends E.Disposable{constructor(D){super(),this._action=D,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new x.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(D,T){if(T!==void 0&&this._syncCalls>T)return void(this._syncCalls=0);if(this._pendingData+=D.length,this._writeBuffer.push(D),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let S;for(this._isSyncWriting=!0;S=this._writeBuffer.shift();){this._action(S);const d=this._callbacks.shift();d&&d()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(D,T){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=D.length,this._writeBuffer.push(D),this._callbacks.push(T),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=D.length,this._writeBuffer.push(D),this._callbacks.push(T)}_innerWrite(D=0,T=!0){const S=D||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const d=this._writeBuffer[this._bufferOffset],u=this._action(d,T);if(u){const c=b=>Date.now()-S>=12?setTimeout(()=>this._innerWrite(0,b)):this._innerWrite(S,b);return void u.catch(b=>(queueMicrotask(()=>{throw b}),Promise.resolve(!1))).then(c)}const l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=d.length,Date.now()-S>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}p.WriteBuffer=m},5941:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.toRgbString=p.parseColor=void 0;const g=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,x=/^[\da-f]+$/;function E(m,k){const D=m.toString(16),T=D.length<2?"0"+D:D;switch(k){case 4:return D[0];case 8:return T;case 12:return(T+T).slice(0,3);default:return T+T}}p.parseColor=function(m){if(!m)return;let k=m.toLowerCase();if(k.indexOf("rgb:")===0){k=k.slice(4);const D=g.exec(k);if(D){const T=D[1]?15:D[4]?255:D[7]?4095:65535;return[Math.round(parseInt(D[1]||D[4]||D[7]||D[10],16)/T*255),Math.round(parseInt(D[2]||D[5]||D[8]||D[11],16)/T*255),Math.round(parseInt(D[3]||D[6]||D[9]||D[12],16)/T*255)]}}else if(k.indexOf("#")===0&&(k=k.slice(1),x.exec(k)&&[3,6,9,12].includes(k.length))){const D=k.length/3,T=[0,0,0];for(let S=0;S<3;++S){const d=parseInt(k.slice(D*S,D*S+D),16);T[S]=D===1?d<<4:D===2?d:D===3?d>>4:d>>8}return T}},p.toRgbString=function(m,k=16){const[D,T,S]=m;return`rgb:${E(D,k)}/${E(T,k)}/${E(S,k)}`}},5770:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.PAYLOAD_LIMIT=void 0,p.PAYLOAD_LIMIT=1e7},6351:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DcsHandler=p.DcsParser=void 0;const x=g(482),E=g(8742),m=g(5770),k=[];p.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=k,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=k}registerHandler(T,S){this._handlers[T]===void 0&&(this._handlers[T]=[]);const d=this._handlers[T];return d.push(S),{dispose:()=>{const u=d.indexOf(S);u!==-1&&d.splice(u,1)}}}clearHandler(T){this._handlers[T]&&delete this._handlers[T]}setHandlerFallback(T){this._handlerFb=T}reset(){if(this._active.length)for(let T=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;T>=0;--T)this._active[T].unhook(!1);this._stack.paused=!1,this._active=k,this._ident=0}hook(T,S){if(this.reset(),this._ident=T,this._active=this._handlers[T]||k,this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].hook(S);else this._handlerFb(this._ident,"HOOK",S)}put(T,S,d){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(T,S,d);else this._handlerFb(this._ident,"PUT",(0,x.utf32ToString)(T,S,d))}unhook(T,S=!0){if(this._active.length){let d=!1,u=this._active.length-1,l=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,d=S,l=this._stack.fallThrough,this._stack.paused=!1),!l&&d===!1){for(;u>=0&&(d=this._active[u].unhook(T),d!==!0);u--)if(d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,d;u--}for(;u>=0;u--)if(d=this._active[u].unhook(!1),d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,d}else this._handlerFb(this._ident,"UNHOOK",T);this._active=k,this._ident=0}};const D=new E.Params;D.addParam(0),p.DcsHandler=class{constructor(T){this._handler=T,this._data="",this._params=D,this._hitLimit=!1}hook(T){this._params=T.length>1||T.params[0]?T.clone():D,this._data="",this._hitLimit=!1}put(T,S,d){this._hitLimit||(this._data+=(0,x.utf32ToString)(T,S,d),this._data.length>m.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(T){let S=!1;if(this._hitLimit)S=!1;else if(T&&(S=this._handler(this._data,this._params),S instanceof Promise))return S.then(d=>(this._params=D,this._data="",this._hitLimit=!1,d));return this._params=D,this._data="",this._hitLimit=!1,S}}},2015:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.EscapeSequenceParser=p.VT500_TRANSITION_TABLE=p.TransitionTable=void 0;const x=g(844),E=g(8742),m=g(6242),k=g(6351);class D{constructor(u){this.table=new Uint8Array(u)}setDefault(u,l){this.table.fill(u<<4|l)}add(u,l,c,b){this.table[l<<8|u]=c<<4|b}addMany(u,l,c,b){for(let M=0;M<u.length;M++)this.table[l<<8|u[M]]=c<<4|b}}p.TransitionTable=D;const T=160;p.VT500_TRANSITION_TABLE=function(){const d=new D(4095),u=Array.apply(null,Array(256)).map((R,w)=>w),l=(R,w)=>u.slice(R,w),c=l(32,127),b=l(0,24);b.push(25),b.push.apply(b,l(28,32));const M=l(0,14);let A;for(A in d.setDefault(1,0),d.addMany(c,0,2,0),M)d.addMany([24,26,153,154],A,3,0),d.addMany(l(128,144),A,3,0),d.addMany(l(144,152),A,3,0),d.add(156,A,0,0),d.add(27,A,11,1),d.add(157,A,4,8),d.addMany([152,158,159],A,0,7),d.add(155,A,11,3),d.add(144,A,11,9);return d.addMany(b,0,3,0),d.addMany(b,1,3,1),d.add(127,1,0,1),d.addMany(b,8,0,8),d.addMany(b,3,3,3),d.add(127,3,0,3),d.addMany(b,4,3,4),d.add(127,4,0,4),d.addMany(b,6,3,6),d.addMany(b,5,3,5),d.add(127,5,0,5),d.addMany(b,2,3,2),d.add(127,2,0,2),d.add(93,1,4,8),d.addMany(c,8,5,8),d.add(127,8,5,8),d.addMany([156,27,24,26,7],8,6,0),d.addMany(l(28,32),8,0,8),d.addMany([88,94,95],1,0,7),d.addMany(c,7,0,7),d.addMany(b,7,0,7),d.add(156,7,0,0),d.add(127,7,0,7),d.add(91,1,11,3),d.addMany(l(64,127),3,7,0),d.addMany(l(48,60),3,8,4),d.addMany([60,61,62,63],3,9,4),d.addMany(l(48,60),4,8,4),d.addMany(l(64,127),4,7,0),d.addMany([60,61,62,63],4,0,6),d.addMany(l(32,64),6,0,6),d.add(127,6,0,6),d.addMany(l(64,127),6,0,0),d.addMany(l(32,48),3,9,5),d.addMany(l(32,48),5,9,5),d.addMany(l(48,64),5,0,6),d.addMany(l(64,127),5,7,0),d.addMany(l(32,48),4,9,5),d.addMany(l(32,48),1,9,2),d.addMany(l(32,48),2,9,2),d.addMany(l(48,127),2,10,0),d.addMany(l(48,80),1,10,0),d.addMany(l(81,88),1,10,0),d.addMany([89,90,92],1,10,0),d.addMany(l(96,127),1,10,0),d.add(80,1,11,9),d.addMany(b,9,0,9),d.add(127,9,0,9),d.addMany(l(28,32),9,0,9),d.addMany(l(32,48),9,9,12),d.addMany(l(48,60),9,8,10),d.addMany([60,61,62,63],9,9,10),d.addMany(b,11,0,11),d.addMany(l(32,128),11,0,11),d.addMany(l(28,32),11,0,11),d.addMany(b,10,0,10),d.add(127,10,0,10),d.addMany(l(28,32),10,0,10),d.addMany(l(48,60),10,8,10),d.addMany([60,61,62,63],10,0,11),d.addMany(l(32,48),10,9,12),d.addMany(b,12,0,12),d.add(127,12,0,12),d.addMany(l(28,32),12,0,12),d.addMany(l(32,48),12,9,12),d.addMany(l(48,64),12,0,11),d.addMany(l(64,127),12,12,13),d.addMany(l(64,127),10,12,13),d.addMany(l(64,127),9,12,13),d.addMany(b,13,13,13),d.addMany(c,13,13,13),d.add(127,13,0,13),d.addMany([27,156,24,26],13,14,0),d.add(T,0,2,0),d.add(T,8,5,8),d.add(T,6,0,6),d.add(T,11,0,11),d.add(T,13,13,13),d}();class S extends x.Disposable{constructor(u=p.VT500_TRANSITION_TABLE){super(),this._transitions=u,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new E.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(l,c,b)=>{},this._executeHandlerFb=l=>{},this._csiHandlerFb=(l,c)=>{},this._escHandlerFb=l=>{},this._errorHandlerFb=l=>l,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,x.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new m.OscParser),this._dcsParser=this.register(new k.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(u,l=[64,126]){let c=0;if(u.prefix){if(u.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=u.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(u.intermediates){if(u.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let M=0;M<u.intermediates.length;++M){const A=u.intermediates.charCodeAt(M);if(32>A||A>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=A}}if(u.final.length!==1)throw new Error("final must be a single byte");const b=u.final.charCodeAt(0);if(l[0]>b||b>l[1])throw new Error(`final must be in range ${l[0]} .. ${l[1]}`);return c<<=8,c|=b,c}identToString(u){const l=[];for(;u;)l.push(String.fromCharCode(255&u)),u>>=8;return l.reverse().join("")}setPrintHandler(u){this._printHandler=u}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(u,l){const c=this._identifier(u,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const b=this._escHandlers[c];return b.push(l),{dispose:()=>{const M=b.indexOf(l);M!==-1&&b.splice(M,1)}}}clearEscHandler(u){this._escHandlers[this._identifier(u,[48,126])]&&delete this._escHandlers[this._identifier(u,[48,126])]}setEscHandlerFallback(u){this._escHandlerFb=u}setExecuteHandler(u,l){this._executeHandlers[u.charCodeAt(0)]=l}clearExecuteHandler(u){this._executeHandlers[u.charCodeAt(0)]&&delete this._executeHandlers[u.charCodeAt(0)]}setExecuteHandlerFallback(u){this._executeHandlerFb=u}registerCsiHandler(u,l){const c=this._identifier(u);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const b=this._csiHandlers[c];return b.push(l),{dispose:()=>{const M=b.indexOf(l);M!==-1&&b.splice(M,1)}}}clearCsiHandler(u){this._csiHandlers[this._identifier(u)]&&delete this._csiHandlers[this._identifier(u)]}setCsiHandlerFallback(u){this._csiHandlerFb=u}registerDcsHandler(u,l){return this._dcsParser.registerHandler(this._identifier(u),l)}clearDcsHandler(u){this._dcsParser.clearHandler(this._identifier(u))}setDcsHandlerFallback(u){this._dcsParser.setHandlerFallback(u)}registerOscHandler(u,l){return this._oscParser.registerHandler(u,l)}clearOscHandler(u){this._oscParser.clearHandler(u)}setOscHandlerFallback(u){this._oscParser.setHandlerFallback(u)}setErrorHandler(u){this._errorHandler=u}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(u,l,c,b,M){this._parseStack.state=u,this._parseStack.handlers=l,this._parseStack.handlerPos=c,this._parseStack.transition=b,this._parseStack.chunkPos=M}parse(u,l,c){let b,M=0,A=0,R=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,R=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const w=this._parseStack.handlers;let I=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&I>-1){for(;I>=0&&(b=w[I](this._params),b!==!0);I--)if(b instanceof Promise)return this._parseStack.handlerPos=I,b}this._parseStack.handlers=[];break;case 4:if(c===!1&&I>-1){for(;I>=0&&(b=w[I](),b!==!0);I--)if(b instanceof Promise)return this._parseStack.handlerPos=I,b}this._parseStack.handlers=[];break;case 6:if(M=u[this._parseStack.chunkPos],b=this._dcsParser.unhook(M!==24&&M!==26,c),b)return b;M===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(M=u[this._parseStack.chunkPos],b=this._oscParser.end(M!==24&&M!==26,c),b)return b;M===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,R=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let w=R;w<l;++w){switch(M=u[w],A=this._transitions.table[this.currentState<<8|(M<160?M:T)],A>>4){case 2:for(let W=w+1;;++W){if(W>=l||(M=u[W])<32||M>126&&M<T){this._printHandler(u,w,W),w=W-1;break}if(++W>=l||(M=u[W])<32||M>126&&M<T){this._printHandler(u,w,W),w=W-1;break}if(++W>=l||(M=u[W])<32||M>126&&M<T){this._printHandler(u,w,W),w=W-1;break}if(++W>=l||(M=u[W])<32||M>126&&M<T){this._printHandler(u,w,W),w=W-1;break}}break;case 3:this._executeHandlers[M]?this._executeHandlers[M]():this._executeHandlerFb(M),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:w,code:M,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const I=this._csiHandlers[this._collect<<8|M];let V=I?I.length-1:-1;for(;V>=0&&(b=I[V](this._params),b!==!0);V--)if(b instanceof Promise)return this._preserveStack(3,I,V,A,w),b;V<0&&this._csiHandlerFb(this._collect<<8|M,this._params),this.precedingJoinState=0;break;case 8:do switch(M){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(M-48)}while(++w<l&&(M=u[w])>47&&M<60);w--;break;case 9:this._collect<<=8,this._collect|=M;break;case 10:const j=this._escHandlers[this._collect<<8|M];let ee=j?j.length-1:-1;for(;ee>=0&&(b=j[ee](),b!==!0);ee--)if(b instanceof Promise)return this._preserveStack(4,j,ee,A,w),b;ee<0&&this._escHandlerFb(this._collect<<8|M),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|M,this._params);break;case 13:for(let W=w+1;;++W)if(W>=l||(M=u[W])===24||M===26||M===27||M>127&&M<T){this._dcsParser.put(u,w,W),w=W-1;break}break;case 14:if(b=this._dcsParser.unhook(M!==24&&M!==26),b)return this._preserveStack(6,[],0,A,w),b;M===27&&(A|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let W=w+1;;W++)if(W>=l||(M=u[W])<32||M>127&&M<T){this._oscParser.put(u,w,W),w=W-1;break}break;case 6:if(b=this._oscParser.end(M!==24&&M!==26),b)return this._preserveStack(5,[],0,A,w),b;M===27&&(A|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&A}}}p.EscapeSequenceParser=S},6242:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.OscHandler=p.OscParser=void 0;const x=g(5770),E=g(482),m=[];p.OscParser=class{constructor(){this._state=0,this._active=m,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(k,D){this._handlers[k]===void 0&&(this._handlers[k]=[]);const T=this._handlers[k];return T.push(D),{dispose:()=>{const S=T.indexOf(D);S!==-1&&T.splice(S,1)}}}clearHandler(k){this._handlers[k]&&delete this._handlers[k]}setHandlerFallback(k){this._handlerFb=k}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}reset(){if(this._state===2)for(let k=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;k>=0;--k)this._active[k].end(!1);this._stack.paused=!1,this._active=m,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||m,this._active.length)for(let k=this._active.length-1;k>=0;k--)this._active[k].start();else this._handlerFb(this._id,"START")}_put(k,D,T){if(this._active.length)for(let S=this._active.length-1;S>=0;S--)this._active[S].put(k,D,T);else this._handlerFb(this._id,"PUT",(0,E.utf32ToString)(k,D,T))}start(){this.reset(),this._state=1}put(k,D,T){if(this._state!==3){if(this._state===1)for(;D<T;){const S=k[D++];if(S===59){this._state=2,this._start();break}if(S<48||57<S)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+S-48}this._state===2&&T-D>0&&this._put(k,D,T)}}end(k,D=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let T=!1,S=this._active.length-1,d=!1;if(this._stack.paused&&(S=this._stack.loopPosition-1,T=D,d=this._stack.fallThrough,this._stack.paused=!1),!d&&T===!1){for(;S>=0&&(T=this._active[S].end(k),T!==!0);S--)if(T instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!1,T;S--}for(;S>=0;S--)if(T=this._active[S].end(!1),T instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!0,T}else this._handlerFb(this._id,"END",k);this._active=m,this._id=-1,this._state=0}}},p.OscHandler=class{constructor(k){this._handler=k,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(k,D,T){this._hitLimit||(this._data+=(0,E.utf32ToString)(k,D,T),this._data.length>x.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(k){let D=!1;if(this._hitLimit)D=!1;else if(k&&(D=this._handler(this._data),D instanceof Promise))return D.then(T=>(this._data="",this._hitLimit=!1,T));return this._data="",this._hitLimit=!1,D}}},8742:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Params=void 0;const g=2147483647;class x{static fromArray(m){const k=new x;if(!m.length)return k;for(let D=Array.isArray(m[0])?1:0;D<m.length;++D){const T=m[D];if(Array.isArray(T))for(let S=0;S<T.length;++S)k.addSubParam(T[S]);else k.addParam(T)}return k}constructor(m=32,k=32){if(this.maxLength=m,this.maxSubParamsLength=k,k>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(m),this.length=0,this._subParams=new Int32Array(k),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(m),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const m=new x(this.maxLength,this.maxSubParamsLength);return m.params.set(this.params),m.length=this.length,m._subParams.set(this._subParams),m._subParamsLength=this._subParamsLength,m._subParamsIdx.set(this._subParamsIdx),m._rejectDigits=this._rejectDigits,m._rejectSubDigits=this._rejectSubDigits,m._digitIsSub=this._digitIsSub,m}toArray(){const m=[];for(let k=0;k<this.length;++k){m.push(this.params[k]);const D=this._subParamsIdx[k]>>8,T=255&this._subParamsIdx[k];T-D>0&&m.push(Array.prototype.slice.call(this._subParams,D,T))}return m}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(m){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(m<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=m>g?g:m}}addSubParam(m){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(m<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=m>g?g:m,this._subParamsIdx[this.length-1]++}}hasSubParams(m){return(255&this._subParamsIdx[m])-(this._subParamsIdx[m]>>8)>0}getSubParams(m){const k=this._subParamsIdx[m]>>8,D=255&this._subParamsIdx[m];return D-k>0?this._subParams.subarray(k,D):null}getSubParamsAll(){const m={};for(let k=0;k<this.length;++k){const D=this._subParamsIdx[k]>>8,T=255&this._subParamsIdx[k];T-D>0&&(m[k]=this._subParams.slice(D,T))}return m}addDigit(m){let k;if(this._rejectDigits||!(k=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const D=this._digitIsSub?this._subParams:this.params,T=D[k-1];D[k-1]=~T?Math.min(10*T+m,g):m}}p.Params=x},5741:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.AddonManager=void 0,p.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let g=this._addons.length-1;g>=0;g--)this._addons[g].instance.dispose()}loadAddon(g,x){const E={instance:x,dispose:x.dispose,isDisposed:!1};this._addons.push(E),x.dispose=()=>this._wrappedAddonDispose(E),x.activate(g)}_wrappedAddonDispose(g){if(g.isDisposed)return;let x=-1;for(let E=0;E<this._addons.length;E++)if(this._addons[E]===g){x=E;break}if(x===-1)throw new Error("Could not dispose an addon that has not been loaded");g.isDisposed=!0,g.dispose.apply(g.instance),this._addons.splice(x,1)}}},8771:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferApiView=void 0;const x=g(3785),E=g(511);p.BufferApiView=class{constructor(m,k){this._buffer=m,this.type=k}init(m){return this._buffer=m,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(m){const k=this._buffer.lines.get(m);if(k)return new x.BufferLineApiView(k)}getNullCell(){return new E.CellData}}},3785:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferLineApiView=void 0;const x=g(511);p.BufferLineApiView=class{constructor(E){this._line=E}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(E,m){if(!(E<0||E>=this._line.length))return m?(this._line.loadCell(E,m),m):this._line.loadCell(E,new x.CellData)}translateToString(E,m,k){return this._line.translateToString(E,m,k)}}},8285:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferNamespaceApi=void 0;const x=g(8771),E=g(8460),m=g(844);class k extends m.Disposable{constructor(T){super(),this._core=T,this._onBufferChange=this.register(new E.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new x.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new x.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}p.BufferNamespaceApi=k},7975:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ParserApi=void 0,p.ParserApi=class{constructor(g){this._core=g}registerCsiHandler(g,x){return this._core.registerCsiHandler(g,E=>x(E.toArray()))}addCsiHandler(g,x){return this.registerCsiHandler(g,x)}registerDcsHandler(g,x){return this._core.registerDcsHandler(g,(E,m)=>x(E,m.toArray()))}addDcsHandler(g,x){return this.registerDcsHandler(g,x)}registerEscHandler(g,x){return this._core.registerEscHandler(g,x)}addEscHandler(g,x){return this.registerEscHandler(g,x)}registerOscHandler(g,x){return this._core.registerOscHandler(g,x)}addOscHandler(g,x){return this.registerOscHandler(g,x)}}},7090:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.UnicodeApi=void 0,p.UnicodeApi=class{constructor(g){this._core=g}register(g){this._core.unicodeService.register(g)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(g){this._core.unicodeService.activeVersion=g}}},744:function(he,p,g){var x=this&&this.__decorate||function(d,u,l,c){var b,M=arguments.length,A=M<3?u:c===null?c=Object.getOwnPropertyDescriptor(u,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(d,u,l,c);else for(var R=d.length-1;R>=0;R--)(b=d[R])&&(A=(M<3?b(A):M>3?b(u,l,A):b(u,l))||A);return M>3&&A&&Object.defineProperty(u,l,A),A},E=this&&this.__param||function(d,u){return function(l,c){u(l,c,d)}};Object.defineProperty(p,"__esModule",{value:!0}),p.BufferService=p.MINIMUM_ROWS=p.MINIMUM_COLS=void 0;const m=g(8460),k=g(844),D=g(5295),T=g(2585);p.MINIMUM_COLS=2,p.MINIMUM_ROWS=1;let S=p.BufferService=class extends k.Disposable{get buffer(){return this.buffers.active}constructor(d){super(),this.isUserScrolling=!1,this._onResize=this.register(new m.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new m.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(d.rawOptions.cols||0,p.MINIMUM_COLS),this.rows=Math.max(d.rawOptions.rows||0,p.MINIMUM_ROWS),this.buffers=this.register(new D.BufferSet(d,this))}resize(d,u){this.cols=d,this.rows=u,this.buffers.resize(d,u),this._onResize.fire({cols:d,rows:u})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(d,u=!1){const l=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===d.fg&&c.getBg(0)===d.bg||(c=l.getBlankLine(d,u),this._cachedBlankLine=c),c.isWrapped=u;const b=l.ybase+l.scrollTop,M=l.ybase+l.scrollBottom;if(l.scrollTop===0){const A=l.lines.isFull;M===l.lines.length-1?A?l.lines.recycle().copyFrom(c):l.lines.push(c.clone()):l.lines.splice(M+1,0,c.clone()),A?this.isUserScrolling&&(l.ydisp=Math.max(l.ydisp-1,0)):(l.ybase++,this.isUserScrolling||l.ydisp++)}else{const A=M-b+1;l.lines.shiftElements(b+1,A-1,-1),l.lines.set(M,c.clone())}this.isUserScrolling||(l.ydisp=l.ybase),this._onScroll.fire(l.ydisp)}scrollLines(d,u,l){const c=this.buffer;if(d<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else d+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const b=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+d,c.ybase),0),b!==c.ydisp&&(u||this._onScroll.fire(c.ydisp))}};p.BufferService=S=x([E(0,T.IOptionsService)],S)},7994:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CharsetService=void 0,p.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(g){this.glevel=g,this.charset=this._charsets[g]}setgCharset(g,x){this._charsets[g]=x,this.glevel===g&&(this.charset=x)}}},1753:function(he,p,g){var x=this&&this.__decorate||function(c,b,M,A){var R,w=arguments.length,I=w<3?b:A===null?A=Object.getOwnPropertyDescriptor(b,M):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(c,b,M,A);else for(var V=c.length-1;V>=0;V--)(R=c[V])&&(I=(w<3?R(I):w>3?R(b,M,I):R(b,M))||I);return w>3&&I&&Object.defineProperty(b,M,I),I},E=this&&this.__param||function(c,b){return function(M,A){b(M,A,c)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CoreMouseService=void 0;const m=g(2585),k=g(8460),D=g(844),T={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function S(c,b){let M=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(M|=64,M|=c.action):(M|=3&c.button,4&c.button&&(M|=64),8&c.button&&(M|=128),c.action===32?M|=32:c.action!==0||b||(M|=3)),M}const d=String.fromCharCode,u={DEFAULT:c=>{const b=[S(c,!1)+32,c.col+32,c.row+32];return b[0]>255||b[1]>255||b[2]>255?"":`\x1B[M${d(b[0])}${d(b[1])}${d(b[2])}`},SGR:c=>{const b=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${S(c,!0)};${c.col};${c.row}${b}`},SGR_PIXELS:c=>{const b=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${S(c,!0)};${c.x};${c.y}${b}`}};let l=p.CoreMouseService=class extends D.Disposable{constructor(c,b){super(),this._bufferService=c,this._coreService=b,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new k.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const M of Object.keys(T))this.addProtocol(M,T[M]);for(const M of Object.keys(u))this.addEncoding(M,u[M]);this.reset()}addProtocol(c,b){this._protocols[c]=b}addEncoding(c,b){this._encodings[c]=b}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const b=this._encodings[this._activeEncoding](c);return b&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(b):this._coreService.triggerDataEvent(b,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,b,M){if(M){if(c.x!==b.x||c.y!==b.y)return!1}else if(c.col!==b.col||c.row!==b.row)return!1;return c.button===b.button&&c.action===b.action&&c.ctrl===b.ctrl&&c.alt===b.alt&&c.shift===b.shift}};p.CoreMouseService=l=x([E(0,m.IBufferService),E(1,m.ICoreService)],l)},6975:function(he,p,g){var x=this&&this.__decorate||function(l,c,b,M){var A,R=arguments.length,w=R<3?c:M===null?M=Object.getOwnPropertyDescriptor(c,b):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(l,c,b,M);else for(var I=l.length-1;I>=0;I--)(A=l[I])&&(w=(R<3?A(w):R>3?A(c,b,w):A(c,b))||w);return R>3&&w&&Object.defineProperty(c,b,w),w},E=this&&this.__param||function(l,c){return function(b,M){c(b,M,l)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CoreService=void 0;const m=g(1439),k=g(8460),D=g(844),T=g(2585),S=Object.freeze({insertMode:!1}),d=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let u=p.CoreService=class extends D.Disposable{constructor(l,c,b){super(),this._bufferService=l,this._logService=c,this._optionsService=b,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new k.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new k.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new k.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new k.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,m.clone)(S),this.decPrivateModes=(0,m.clone)(d)}reset(){this.modes=(0,m.clone)(S),this.decPrivateModes=(0,m.clone)(d)}triggerDataEvent(l,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const b=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&b.ybase!==b.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${l}"`,()=>l.split("").map(M=>M.charCodeAt(0))),this._onData.fire(l)}triggerBinaryEvent(l){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${l}"`,()=>l.split("").map(c=>c.charCodeAt(0))),this._onBinary.fire(l))}};p.CoreService=u=x([E(0,T.IBufferService),E(1,T.ILogService),E(2,T.IOptionsService)],u)},9074:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DecorationService=void 0;const x=g(8055),E=g(8460),m=g(844),k=g(6106);let D=0,T=0;class S extends m.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new k.SortedList(l=>l?.marker.line),this._onDecorationRegistered=this.register(new E.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new E.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,m.toDisposable)(()=>this.reset()))}registerDecoration(l){if(l.marker.isDisposed)return;const c=new d(l);if(c){const b=c.marker.onDispose(()=>c.dispose());c.onDispose(()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),b.dispose())}),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const l of this._decorations.values())l.dispose();this._decorations.clear()}*getDecorationsAtCell(l,c,b){let M=0,A=0;for(const R of this._decorations.getKeyIterator(c))M=R.options.x??0,A=M+(R.options.width??1),l>=M&&l<A&&(!b||(R.options.layer??"bottom")===b)&&(yield R)}forEachDecorationAtCell(l,c,b,M){this._decorations.forEachByKey(c,A=>{D=A.options.x??0,T=D+(A.options.width??1),l>=D&&l<T&&(!b||(A.options.layer??"bottom")===b)&&M(A)})}}p.DecorationService=S;class d extends m.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=x.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=x.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(l){super(),this.options=l,this.onRenderEmitter=this.register(new E.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new E.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=l.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.InstantiationService=p.ServiceCollection=void 0;const x=g(2585),E=g(8343);class m{constructor(...D){this._entries=new Map;for(const[T,S]of D)this.set(T,S)}set(D,T){const S=this._entries.get(D);return this._entries.set(D,T),S}forEach(D){for(const[T,S]of this._entries.entries())D(T,S)}has(D){return this._entries.has(D)}get(D){return this._entries.get(D)}}p.ServiceCollection=m,p.InstantiationService=class{constructor(){this._services=new m,this._services.set(x.IInstantiationService,this)}setService(k,D){this._services.set(k,D)}getService(k){return this._services.get(k)}createInstance(k,...D){const T=(0,E.getServiceDependencies)(k).sort((u,l)=>u.index-l.index),S=[];for(const u of T){const l=this._services.get(u.id);if(!l)throw new Error(`[createInstance] ${k.name} depends on UNKNOWN service ${u.id}.`);S.push(l)}const d=T.length>0?T[0].index:D.length;if(D.length!==d)throw new Error(`[createInstance] First service dependency of ${k.name} at position ${d+1} conflicts with ${D.length} static arguments`);return new k(...D,...S)}}},7866:function(he,p,g){var x=this&&this.__decorate||function(d,u,l,c){var b,M=arguments.length,A=M<3?u:c===null?c=Object.getOwnPropertyDescriptor(u,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(d,u,l,c);else for(var R=d.length-1;R>=0;R--)(b=d[R])&&(A=(M<3?b(A):M>3?b(u,l,A):b(u,l))||A);return M>3&&A&&Object.defineProperty(u,l,A),A},E=this&&this.__param||function(d,u){return function(l,c){u(l,c,d)}};Object.defineProperty(p,"__esModule",{value:!0}),p.traceCall=p.setTraceLogger=p.LogService=void 0;const m=g(844),k=g(2585),D={trace:k.LogLevelEnum.TRACE,debug:k.LogLevelEnum.DEBUG,info:k.LogLevelEnum.INFO,warn:k.LogLevelEnum.WARN,error:k.LogLevelEnum.ERROR,off:k.LogLevelEnum.OFF};let T,S=p.LogService=class extends m.Disposable{get logLevel(){return this._logLevel}constructor(d){super(),this._optionsService=d,this._logLevel=k.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),T=this}_updateLogLevel(){this._logLevel=D[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(d){for(let u=0;u<d.length;u++)typeof d[u]=="function"&&(d[u]=d[u]())}_log(d,u,l){this._evalLazyOptionalParams(l),d.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+u,...l)}trace(d,...u){this._logLevel<=k.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,d,u)}debug(d,...u){this._logLevel<=k.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,d,u)}info(d,...u){this._logLevel<=k.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,d,u)}warn(d,...u){this._logLevel<=k.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,d,u)}error(d,...u){this._logLevel<=k.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,d,u)}};p.LogService=S=x([E(0,k.IOptionsService)],S),p.setTraceLogger=function(d){T=d},p.traceCall=function(d,u,l){if(typeof l.value!="function")throw new Error("not supported");const c=l.value;l.value=function(...b){if(T.logLevel!==k.LogLevelEnum.TRACE)return c.apply(this,b);T.trace(`GlyphRenderer#${c.name}(${b.map(A=>JSON.stringify(A)).join(", ")})`);const M=c.apply(this,b);return T.trace(`GlyphRenderer#${c.name} return`,M),M}}},7302:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.OptionsService=p.DEFAULT_OPTIONS=void 0;const x=g(8460),E=g(844),m=g(6114);p.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:m.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const k=["normal","bold","100","200","300","400","500","600","700","800","900"];class D extends E.Disposable{constructor(S){super(),this._onOptionChange=this.register(new x.EventEmitter),this.onOptionChange=this._onOptionChange.event;const d={...p.DEFAULT_OPTIONS};for(const u in S)if(u in d)try{const l=S[u];d[u]=this._sanitizeAndValidateOption(u,l)}catch(l){console.error(l)}this.rawOptions=d,this.options={...d},this._setupOptions(),this.register((0,E.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(S,d){return this.onOptionChange(u=>{u===S&&d(this.rawOptions[S])})}onMultipleOptionChange(S,d){return this.onOptionChange(u=>{S.indexOf(u)!==-1&&d()})}_setupOptions(){const S=u=>{if(!(u in p.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);return this.rawOptions[u]},d=(u,l)=>{if(!(u in p.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);l=this._sanitizeAndValidateOption(u,l),this.rawOptions[u]!==l&&(this.rawOptions[u]=l,this._onOptionChange.fire(u))};for(const u in this.rawOptions){const l={get:S.bind(this,u),set:d.bind(this,u)};Object.defineProperty(this.options,u,l)}}_sanitizeAndValidateOption(S,d){switch(S){case"cursorStyle":if(d||(d=p.DEFAULT_OPTIONS[S]),!function(u){return u==="block"||u==="underline"||u==="bar"}(d))throw new Error(`"${d}" is not a valid value for ${S}`);break;case"wordSeparator":d||(d=p.DEFAULT_OPTIONS[S]);break;case"fontWeight":case"fontWeightBold":if(typeof d=="number"&&1<=d&&d<=1e3)break;d=k.includes(d)?d:p.DEFAULT_OPTIONS[S];break;case"cursorWidth":d=Math.floor(d);case"lineHeight":case"tabStopWidth":if(d<1)throw new Error(`${S} cannot be less than 1, value: ${d}`);break;case"minimumContrastRatio":d=Math.max(1,Math.min(21,Math.round(10*d)/10));break;case"scrollback":if((d=Math.min(d,4294967295))<0)throw new Error(`${S} cannot be less than 0, value: ${d}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(d<=0)throw new Error(`${S} cannot be less than or equal to 0, value: ${d}`);break;case"rows":case"cols":if(!d&&d!==0)throw new Error(`${S} must be numeric, value: ${d}`);break;case"windowsPty":d=d??{}}return d}}p.OptionsService=D},2660:function(he,p,g){var x=this&&this.__decorate||function(D,T,S,d){var u,l=arguments.length,c=l<3?T:d===null?d=Object.getOwnPropertyDescriptor(T,S):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(D,T,S,d);else for(var b=D.length-1;b>=0;b--)(u=D[b])&&(c=(l<3?u(c):l>3?u(T,S,c):u(T,S))||c);return l>3&&c&&Object.defineProperty(T,S,c),c},E=this&&this.__param||function(D,T){return function(S,d){T(S,d,D)}};Object.defineProperty(p,"__esModule",{value:!0}),p.OscLinkService=void 0;const m=g(2585);let k=p.OscLinkService=class{constructor(D){this._bufferService=D,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(D){const T=this._bufferService.buffer;if(D.id===void 0){const b=T.addMarker(T.ybase+T.y),M={data:D,id:this._nextId++,lines:[b]};return b.onDispose(()=>this._removeMarkerFromLink(M,b)),this._dataByLinkId.set(M.id,M),M.id}const S=D,d=this._getEntryIdKey(S),u=this._entriesWithId.get(d);if(u)return this.addLineToLink(u.id,T.ybase+T.y),u.id;const l=T.addMarker(T.ybase+T.y),c={id:this._nextId++,key:this._getEntryIdKey(S),data:S,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(c,l)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(D,T){const S=this._dataByLinkId.get(D);if(S&&S.lines.every(d=>d.line!==T)){const d=this._bufferService.buffer.addMarker(T);S.lines.push(d),d.onDispose(()=>this._removeMarkerFromLink(S,d))}}getLinkData(D){return this._dataByLinkId.get(D)?.data}_getEntryIdKey(D){return`${D.id};;${D.uri}`}_removeMarkerFromLink(D,T){const S=D.lines.indexOf(T);S!==-1&&(D.lines.splice(S,1),D.lines.length===0&&(D.data.id!==void 0&&this._entriesWithId.delete(D.key),this._dataByLinkId.delete(D.id)))}};p.OscLinkService=k=x([E(0,m.IBufferService)],k)},8343:(he,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.createDecorator=p.getServiceDependencies=p.serviceRegistry=void 0;const g="di$target",x="di$dependencies";p.serviceRegistry=new Map,p.getServiceDependencies=function(E){return E[x]||[]},p.createDecorator=function(E){if(p.serviceRegistry.has(E))return p.serviceRegistry.get(E);const m=function(k,D,T){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(S,d,u){d[g]===d?d[x].push({id:S,index:u}):(d[x]=[{id:S,index:u}],d[g]=d)})(m,k,T)};return m.toString=()=>E,p.serviceRegistry.set(E,m),m}},2585:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.IDecorationService=p.IUnicodeService=p.IOscLinkService=p.IOptionsService=p.ILogService=p.LogLevelEnum=p.IInstantiationService=p.ICharsetService=p.ICoreService=p.ICoreMouseService=p.IBufferService=void 0;const x=g(8343);var E;p.IBufferService=(0,x.createDecorator)("BufferService"),p.ICoreMouseService=(0,x.createDecorator)("CoreMouseService"),p.ICoreService=(0,x.createDecorator)("CoreService"),p.ICharsetService=(0,x.createDecorator)("CharsetService"),p.IInstantiationService=(0,x.createDecorator)("InstantiationService"),function(m){m[m.TRACE=0]="TRACE",m[m.DEBUG=1]="DEBUG",m[m.INFO=2]="INFO",m[m.WARN=3]="WARN",m[m.ERROR=4]="ERROR",m[m.OFF=5]="OFF"}(E||(p.LogLevelEnum=E={})),p.ILogService=(0,x.createDecorator)("LogService"),p.IOptionsService=(0,x.createDecorator)("OptionsService"),p.IOscLinkService=(0,x.createDecorator)("OscLinkService"),p.IUnicodeService=(0,x.createDecorator)("UnicodeService"),p.IDecorationService=(0,x.createDecorator)("DecorationService")},1480:(he,p,g)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.UnicodeService=void 0;const x=g(8460),E=g(225);class m{static extractShouldJoin(D){return(1&D)!=0}static extractWidth(D){return D>>1&3}static extractCharKind(D){return D>>3}static createPropertyValue(D,T,S=!1){return(16777215&D)<<3|(3&T)<<1|(S?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new x.EventEmitter,this.onChange=this._onChange.event;const D=new E.UnicodeV6;this.register(D),this._active=D.version,this._activeProvider=D}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(D){if(!this._providers[D])throw new Error(`unknown Unicode version "${D}"`);this._active=D,this._activeProvider=this._providers[D],this._onChange.fire(D)}register(D){this._providers[D.version]=D}wcwidth(D){return this._activeProvider.wcwidth(D)}getStringCellWidth(D){let T=0,S=0;const d=D.length;for(let u=0;u<d;++u){let l=D.charCodeAt(u);if(55296<=l&&l<=56319){if(++u>=d)return T+this.wcwidth(l);const M=D.charCodeAt(u);56320<=M&&M<=57343?l=1024*(l-55296)+M-56320+65536:T+=this.wcwidth(M)}const c=this.charProperties(l,S);let b=m.extractWidth(c);m.extractShouldJoin(c)&&(b-=m.extractWidth(S)),T+=b,S=c}return T}charProperties(D,T){return this._activeProvider.charProperties(D,T)}}p.UnicodeService=m}},je={};function dt(he){var p=je[he];if(p!==void 0)return p.exports;var g=je[he]={exports:{}};return it[he].call(g.exports,g,g.exports,dt),g.exports}var Be={};return(()=>{var he=Be;Object.defineProperty(he,"__esModule",{value:!0}),he.Terminal=void 0;const p=dt(9042),g=dt(3236),x=dt(844),E=dt(5741),m=dt(8285),k=dt(7975),D=dt(7090),T=["cols","rows"];class S extends x.Disposable{constructor(u){super(),this._core=this.register(new g.Terminal(u)),this._addonManager=this.register(new E.AddonManager),this._publicOptions={...this._core.options};const l=b=>this._core.options[b],c=(b,M)=>{this._checkReadonlyOptions(b),this._core.options[b]=M};for(const b in this._core.options){const M={get:l.bind(this,b),set:c.bind(this,b)};Object.defineProperty(this._publicOptions,b,M)}}_checkReadonlyOptions(u){if(T.includes(u))throw new Error(`Option "${u}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new k.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new D.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new m.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const u=this._core.coreService.decPrivateModes;let l="none";switch(this._core.coreMouseService.activeProtocol){case"X10":l="x10";break;case"VT200":l="vt200";break;case"DRAG":l="drag";break;case"ANY":l="any"}return{applicationCursorKeysMode:u.applicationCursorKeys,applicationKeypadMode:u.applicationKeypad,bracketedPasteMode:u.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:l,originMode:u.origin,reverseWraparoundMode:u.reverseWraparound,sendFocusMode:u.sendFocus,wraparoundMode:u.wraparound}}get options(){return this._publicOptions}set options(u){for(const l in u)this._publicOptions[l]=u[l]}blur(){this._core.blur()}focus(){this._core.focus()}input(u,l=!0){this._core.input(u,l)}resize(u,l){this._verifyIntegers(u,l),this._core.resize(u,l)}open(u){this._core.open(u)}attachCustomKeyEventHandler(u){this._core.attachCustomKeyEventHandler(u)}attachCustomWheelEventHandler(u){this._core.attachCustomWheelEventHandler(u)}registerLinkProvider(u){return this._core.registerLinkProvider(u)}registerCharacterJoiner(u){return this._checkProposedApi(),this._core.registerCharacterJoiner(u)}deregisterCharacterJoiner(u){this._checkProposedApi(),this._core.deregisterCharacterJoiner(u)}registerMarker(u=0){return this._verifyIntegers(u),this._core.registerMarker(u)}registerDecoration(u){return this._checkProposedApi(),this._verifyPositiveIntegers(u.x??0,u.width??0,u.height??0),this._core.registerDecoration(u)}hasSelection(){return this._core.hasSelection()}select(u,l,c){this._verifyIntegers(u,l,c),this._core.select(u,l,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(u,l){this._verifyIntegers(u,l),this._core.selectLines(u,l)}dispose(){super.dispose()}scrollLines(u){this._verifyIntegers(u),this._core.scrollLines(u)}scrollPages(u){this._verifyIntegers(u),this._core.scrollPages(u)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(u){this._verifyIntegers(u),this._core.scrollToLine(u)}clear(){this._core.clear()}write(u,l){this._core.write(u,l)}writeln(u,l){this._core.write(u),this._core.write(`\r
`,l)}paste(u){this._core.paste(u)}refresh(u,l){this._verifyIntegers(u,l),this._core.refresh(u,l)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(u){this._addonManager.loadAddon(this,u)}static get strings(){return p}_verifyIntegers(...u){for(const l of u)if(l===1/0||isNaN(l)||l%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...u){for(const l of u)if(l&&(l===1/0||isNaN(l)||l%1!=0||l<0))throw new Error("This API only accepts positive integers")}}he.Terminal=S})(),Be})()),(()=>{"use strict";const it=()=>localStorage.getItem("theme"),je=p=>localStorage.setItem("theme",p),dt=()=>{const p=it();return p||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},Be=p=>{p==="auto"?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",p)};Be(dt());const he=(p,g=!1)=>{const x=document.querySelector("#bd-theme");if(!x)return;const E=document.querySelector("#bd-theme-text"),m=document.querySelector(".theme-icon-active use"),k=document.querySelector(`[data-bs-theme-value="${p}"]`),D=k.querySelector("svg use").getAttribute("href");document.querySelectorAll("[data-bs-theme-value]").forEach(S=>{S.classList.remove("active"),S.setAttribute("aria-pressed","false")}),k.classList.add("active"),k.setAttribute("aria-pressed","true"),m.setAttribute("href",D);const T=`${E.textContent} (${k.dataset.bsThemeValue})`;x.setAttribute("aria-label",T),g&&x.focus()};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{const p=it();p!=="light"&&p!=="dark"&&Be(dt())}),window.addEventListener("DOMContentLoaded",()=>{he(dt()),document.querySelectorAll("[data-bs-theme-value]").forEach(p=>{p.addEventListener("click",()=>{const g=p.getAttribute("data-bs-theme-value");je(g),Be(g),he(g,!0)})})})})();
