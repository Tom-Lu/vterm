var Xm=Object.create;var xa=Object.defineProperty,Jm=Object.defineProperties,e_=Object.getOwnPropertyDescriptor,t_=Object.getOwnPropertyDescriptors,n_=Object.getOwnPropertyNames,sd=Object.getOwnPropertySymbols,r_=Object.getPrototypeOf,ad=Object.prototype.hasOwnProperty,i_=Object.prototype.propertyIsEnumerable;var od=(t,e,n)=>e in t?xa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$=(t,e)=>{for(var n in e||={})ad.call(e,n)&&od(t,n,e[n]);if(sd)for(var n of sd(e))i_.call(e,n)&&od(t,n,e[n]);return t},we=(t,e)=>Jm(t,t_(e));var cd=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var s_=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of n_(e))!ad.call(t,i)&&i!==n&&xa(t,i,{get:()=>e[i],enumerable:!(r=e_(e,i))||r.enumerable});return t};var ld=(t,e,n)=>(n=t!=null?Xm(r_(t)):{},s_(e||!t||!t.__esModule?xa(n,"default",{value:t,enumerable:!0}):n,t));var en=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(c){i(c)}},o=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())});var Bm=cd((Sa,rd)=>{"use strict";(function(t,e){typeof Sa=="object"&&typeof rd=="object"?rd.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Sa=="object"?Sa.FitAddon=e():t.FitAddon=e()})(self,()=>(()=>{"use strict";var t={};return(()=>{var e=t;Object.defineProperty(e,"__esModule",{value:!0}),e.FitAddon=void 0,e.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let r=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(r._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,r=n._renderService.dimensions;if(r.css.cell.width===0||r.css.cell.height===0)return;let i=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(s.getPropertyValue("height")),a=Math.max(0,parseInt(s.getPropertyValue("width"))),l=window.getComputedStyle(this._terminal.element),c=o-(parseInt(l.getPropertyValue("padding-top"))+parseInt(l.getPropertyValue("padding-bottom"))),p=a-(parseInt(l.getPropertyValue("padding-right"))+parseInt(l.getPropertyValue("padding-left")))-i;return{cols:Math.max(2,Math.floor(p/r.css.cell.width)),rows:Math.max(1,Math.floor(c/r.css.cell.height))}}}})(),t})())});var jm=cd((ba,id)=>{"use strict";(function(t,e){if(typeof ba=="object"&&typeof id=="object")id.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var n=e();for(var r in n)(typeof ba=="object"?ba:t)[r]=n[r]}})(globalThis,()=>(()=>{"use strict";var t={4567:function(i,s,o){var a=this&&this.__decorate||function(d,h,_,C){var S,b=arguments.length,v=b<3?h:C===null?C=Object.getOwnPropertyDescriptor(h,_):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(d,h,_,C);else for(var w=d.length-1;w>=0;w--)(S=d[w])&&(v=(b<3?S(v):b>3?S(h,_,v):S(h,_))||v);return b>3&&v&&Object.defineProperty(h,_,v),v},l=this&&this.__param||function(d,h){return function(_,C){h(_,C,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;let c=o(9042),p=o(9924),m=o(844),y=o(4725),g=o(2585),u=o(3656),f=s.AccessibilityManager=class extends m.Disposable{constructor(d,h,_,C){super(),this._terminal=d,this._coreBrowserService=_,this._renderService=C,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new p.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,u.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,m.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(d){for(let h=0;h<d;h++)this._handleChar(" ")}_handleChar(d){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==d&&(this._charsToAnnounce+=d):this._charsToAnnounce+=d,d===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=c.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(d){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(d)||this._charsToConsume.push(d)}_refreshRows(d,h){this._liveRegionDebouncer.refresh(d,h,this._terminal.rows)}_renderRows(d,h){let _=this._terminal.buffer,C=_.lines.length.toString();for(let S=d;S<=h;S++){let b=_.lines.get(_.ydisp+S),v=[],w=b?.translateToString(!0,void 0,void 0,v)||"",A=(_.ydisp+S+1).toString(),T=this._rowElements[S];T&&(w.length===0?(T.innerText="\xA0",this._rowColumns.set(T,[0,1])):(T.textContent=w,this._rowColumns.set(T,v)),T.setAttribute("aria-posinset",A),T.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(d,h){let _=d.target,C=this._rowElements[h===0?1:this._rowElements.length-2];if(_.getAttribute("aria-posinset")===(h===0?"1":`${this._terminal.buffer.lines.length}`)||d.relatedTarget!==C)return;let S,b;if(h===0?(S=_,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(S=this._rowElements.shift(),b=_,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),h===0){let v=this._createAccessibilityTreeNode();this._rowElements.unshift(v),this._rowContainer.insertAdjacentElement("afterbegin",v)}else{let v=this._createAccessibilityTreeNode();this._rowElements.push(v),this._rowContainer.appendChild(v)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(h===0?-1:1),this._rowElements[h===0?1:this._rowElements.length-2].focus(),d.preventDefault(),d.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let d=document.getSelection();if(!d)return;if(d.isCollapsed)return void(this._rowContainer.contains(d.anchorNode)&&this._terminal.clearSelection());if(!d.anchorNode||!d.focusNode)return void console.error("anchorNode and/or focusNode are null");let h={node:d.anchorNode,offset:d.anchorOffset},_={node:d.focusNode,offset:d.focusOffset};if((h.node.compareDocumentPosition(_.node)&Node.DOCUMENT_POSITION_PRECEDING||h.node===_.node&&h.offset>_.offset)&&([h,_]=[_,h]),h.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(h={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(h.node))return;let C=this._rowElements.slice(-1)[0];if(_.node.compareDocumentPosition(C)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(_={node:C,offset:C.textContent?.length??0}),!this._rowContainer.contains(_.node))return;let S=({node:w,offset:A})=>{let T=w instanceof Text?w.parentNode:w,k=parseInt(T?.getAttribute("aria-posinset"),10)-1;if(isNaN(k))return console.warn("row is invalid. Race condition?"),null;let I=this._rowColumns.get(T);if(!I)return console.warn("columns is null. Race condition?"),null;let N=A<I.length?I[A]:I.slice(-1)[0]+1;return N>=this._terminal.cols&&(++k,N=0),{row:k,column:N}},b=S(h),v=S(_);if(b&&v){if(b.row>v.row||b.row===v.row&&b.column>=v.column)throw new Error("invalid range");this._terminal.select(b.column,b.row,(v.row-b.row)*this._terminal.cols-b.column+v.column)}}_handleResize(d){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let h=this._rowContainer.children.length;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);for(;this._rowElements.length>d;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let d=this._coreBrowserService.mainDocument.createElement("div");return d.setAttribute("role","listitem"),d.tabIndex=-1,this._refreshRowDimensions(d),d}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let d=0;d<this._terminal.rows;d++)this._refreshRowDimensions(this._rowElements[d])}}_refreshRowDimensions(d){d.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=f=a([l(1,g.IInstantiationService),l(2,y.ICoreBrowserService),l(3,y.IRenderService)],f)},3614:(i,s)=>{function o(p){return p.replace(/\r?\n/g,"\r")}function a(p,m){return m?"\x1B[200~"+p+"\x1B[201~":p}function l(p,m,y,g){p=a(p=o(p),y.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),y.triggerDataEvent(p,!0),m.value=""}function c(p,m,y){let g=y.getBoundingClientRect(),u=p.clientX-g.left-10,f=p.clientY-g.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${u}px`,m.style.top=`${f}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=o,s.bracketTextForPaste=a,s.copyHandler=function(p,m){p.clipboardData&&p.clipboardData.setData("text/plain",m.selectionText),p.preventDefault()},s.handlePasteEvent=function(p,m,y,g){p.stopPropagation(),p.clipboardData&&l(p.clipboardData.getData("text/plain"),m,y,g)},s.paste=l,s.moveTextAreaUnderMouseCursor=c,s.rightClickHandler=function(p,m,y,g,u){c(p,m,y),u&&g.rightClickSelect(p),m.value=g.selectionText,m.select()}},7239:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;let a=o(1505);s.ColorContrastCache=class{constructor(){this._color=new a.TwoKeyMap,this._css=new a.TwoKeyMap}setCss(l,c,p){this._css.set(l,c,p)}getCss(l,c){return this._css.get(l,c)}setColor(l,c,p){this._color.set(l,c,p)}getColor(l,c){return this._color.get(l,c)}clear(){this._color.clear(),this._css.clear()}}},3656:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(o,a,l,c){o.addEventListener(a,l,c);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(a,l,c))}}}},3551:function(i,s,o){var a=this&&this.__decorate||function(f,d,h,_){var C,S=arguments.length,b=S<3?d:_===null?_=Object.getOwnPropertyDescriptor(d,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(f,d,h,_);else for(var v=f.length-1;v>=0;v--)(C=f[v])&&(b=(S<3?C(b):S>3?C(d,h,b):C(d,h))||b);return S>3&&b&&Object.defineProperty(d,h,b),b},l=this&&this.__param||function(f,d){return function(h,_){d(h,_,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier=void 0;let c=o(3656),p=o(8460),m=o(844),y=o(2585),g=o(4725),u=s.Linkifier=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(f,d,h,_,C){super(),this._element=f,this._mouseService=d,this._renderService=h,this._bufferService=_,this._linkProviderService=C,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,c.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,c.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(f){this._lastMouseEvent=f;let d=this._positionFromMouseEvent(f,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;let h=f.composedPath();for(let _=0;_<h.length;_++){let C=h[_];if(C.classList.contains("xterm"))break;if(C.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(f){if(this._activeLine!==f.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(f,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,f)||(this._clearCurrentLink(),this._askForLink(f,!0))}_askForLink(f,d){this._activeProviderReplies&&d||(this._activeProviderReplies?.forEach(_=>{_?.forEach(C=>{C.link.dispose&&C.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=f.y);let h=!1;for(let[_,C]of this._linkProviderService.linkProviders.entries())d?this._activeProviderReplies?.get(_)&&(h=this._checkLinkProviderResult(_,f,h)):C.provideLinks(f.y,S=>{if(this._isMouseOut)return;let b=S?.map(v=>({link:v}));this._activeProviderReplies?.set(_,b),h=this._checkLinkProviderResult(_,f,h),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(f.y,this._activeProviderReplies)})}_removeIntersectingLinks(f,d){let h=new Set;for(let _=0;_<d.size;_++){let C=d.get(_);if(C)for(let S=0;S<C.length;S++){let b=C[S],v=b.link.range.start.y<f?0:b.link.range.start.x,w=b.link.range.end.y>f?this._bufferService.cols:b.link.range.end.x;for(let A=v;A<=w;A++){if(h.has(A)){C.splice(S--,1);break}h.add(A)}}}}_checkLinkProviderResult(f,d,h){if(!this._activeProviderReplies)return h;let _=this._activeProviderReplies.get(f),C=!1;for(let S=0;S<f;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(C=!0);if(!C&&_){let S=_.find(b=>this._linkAtPosition(b.link,d));S&&(h=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!h)for(let S=0;S<this._activeProviderReplies.size;S++){let b=this._activeProviderReplies.get(S)?.find(v=>this._linkAtPosition(v.link,d));if(b){h=!0,this._handleNewLink(b);break}}return h}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(f){if(!this._currentLink)return;let d=this._positionFromMouseEvent(f,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(f,this._currentLink.link.text)}_clearCurrentLink(f,d){this._currentLink&&this._lastMouseEvent&&(!f||!d||this._currentLink.link.range.start.y>=f&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(f){if(!this._lastMouseEvent)return;let d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(f.link,d)&&(this._currentLink=f,this._currentLink.state={decorations:{underline:f.link.decorations===void 0||f.link.decorations.underline,pointerCursor:f.link.decorations===void 0||f.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,f.link,this._lastMouseEvent),f.link.decorations={},Object.defineProperties(f.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:h=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==h&&(this._currentLink.state.decorations.pointerCursor=h,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",h))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:h=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==h&&(this._currentLink.state.decorations.underline=h,this._currentLink.state.isHovered&&this._fireUnderlineEvent(f.link,h))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(h=>{if(!this._currentLink)return;let _=h.start===0?0:h.start+1+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.ydisp+1+h.end;if(this._currentLink.link.range.start.y>=_&&this._currentLink.link.range.end.y<=C&&(this._clearCurrentLink(_,C),this._lastMouseEvent)){let S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(f,d,h){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&f.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(h,d.text)}_fireUnderlineEvent(f,d){let h=f.range,_=this._bufferService.buffer.ydisp,C=this._createLinkUnderlineEvent(h.start.x-1,h.start.y-_-1,h.end.x,h.end.y-_-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(C)}_linkLeave(f,d,h){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&f.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(h,d.text)}_linkAtPosition(f,d){let h=f.range.start.y*this._bufferService.cols+f.range.start.x,_=f.range.end.y*this._bufferService.cols+f.range.end.x,C=d.y*this._bufferService.cols+d.x;return h<=C&&C<=_}_positionFromMouseEvent(f,d,h){let _=h.getCoords(f,d,this._bufferService.cols,this._bufferService.rows);if(_)return{x:_[0],y:_[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(f,d,h,_,C){return{x1:f,y1:d,x2:h,y2:_,cols:this._bufferService.cols,fg:C}}};s.Linkifier=u=a([l(1,g.IMouseService),l(2,g.IRenderService),l(3,y.IBufferService),l(4,g.ILinkProviderService)],u)},9042:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(i,s,o){var a=this&&this.__decorate||function(g,u,f,d){var h,_=arguments.length,C=_<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,f):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(g,u,f,d);else for(var S=g.length-1;S>=0;S--)(h=g[S])&&(C=(_<3?h(C):_>3?h(u,f,C):h(u,f))||C);return _>3&&C&&Object.defineProperty(u,f,C),C},l=this&&this.__param||function(g,u){return function(f,d){u(f,d,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;let c=o(511),p=o(2585),m=s.OscLinkProvider=class{constructor(g,u,f){this._bufferService=g,this._optionsService=u,this._oscLinkService=f}provideLinks(g,u){let f=this._bufferService.buffer.lines.get(g-1);if(!f)return void u(void 0);let d=[],h=this._optionsService.rawOptions.linkHandler,_=new c.CellData,C=f.getTrimmedLength(),S=-1,b=-1,v=!1;for(let w=0;w<C;w++)if(b!==-1||f.hasContent(w)){if(f.loadCell(w,_),_.hasExtendedAttrs()&&_.extended.urlId){if(b===-1){b=w,S=_.extended.urlId;continue}v=_.extended.urlId!==S}else b!==-1&&(v=!0);if(v||b!==-1&&w===C-1){let A=this._oscLinkService.getLinkData(S)?.uri;if(A){let T={start:{x:b+1,y:g},end:{x:w+(v||w!==C-1?0:1),y:g}},k=!1;if(!h?.allowNonHttpProtocols)try{let I=new URL(A);["http:","https:"].includes(I.protocol)||(k=!0)}catch{k=!0}k||d.push({text:A,range:T,activate:(I,N)=>h?h.activate(I,N,T):y(0,N),hover:(I,N)=>h?.hover?.(I,N,T),leave:(I,N)=>h?.leave?.(I,N,T)})}v=!1,_.hasExtendedAttrs()&&_.extended.urlId?(b=w,S=_.extended.urlId):(b=-1,S=-1)}}u(d)}};function y(g,u){if(confirm(`Do you want to navigate to ${u}?

WARNING: This link could potentially be dangerous`)){let f=window.open();if(f){try{f.opener=null}catch{}f.location.href=u}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=m=a([l(0,p.IBufferService),l(1,p.IOptionsService),l(2,p.IOscLinkService)],m)},6193:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(o,a){this._renderCallback=o,this._coreBrowserService=a,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,a,l){this._rowCount=l,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;let a=o(3614),l=o(3656),c=o(3551),p=o(9042),m=o(3730),y=o(1680),g=o(3107),u=o(5744),f=o(2950),d=o(1296),h=o(428),_=o(4269),C=o(5114),S=o(8934),b=o(3230),v=o(9312),w=o(4725),A=o(6731),T=o(8055),k=o(8969),I=o(8460),N=o(844),V=o(6114),U=o(8437),Y=o(2584),H=o(7399),D=o(5941),M=o(9074),x=o(2585),R=o(5435),B=o(4567),W=o(779);class te extends k.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(O={}){super(O),this.browser=V,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new I.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new I.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new I.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new I.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new I.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new I.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new I.EventEmitter),this._onBlur=this.register(new I.EventEmitter),this._onA11yCharEmitter=this.register(new I.EventEmitter),this._onA11yTabEmitter=this.register(new I.EventEmitter),this._onWillOpen=this.register(new I.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(x.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(W.LinkProviderService),this._instantiationService.setService(w.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((E,F)=>this.refresh(E,F))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(E=>this._reportWindowsOptions(E))),this.register(this._inputHandler.onColor(E=>this._handleColorEvent(E))),this.register((0,I.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,I.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(E=>this._afterResize(E.cols,E.rows))),this.register((0,N.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(O){if(this._themeService)for(let E of O){let F,j="";switch(E.index){case 256:F="foreground",j="10";break;case 257:F="background",j="11";break;case 258:F="cursor",j="12";break;default:F="ansi",j="4;"+E.index}switch(E.type){case 0:let q=T.color.toColorRGB(F==="ansi"?this._themeService.colors.ansi[E.index]:this._themeService.colors[F]);this.coreService.triggerDataEvent(`${Y.C0.ESC}]${j};${(0,D.toRgbString)(q)}${Y.C1_ESCAPED.ST}`);break;case 1:if(F==="ansi")this._themeService.modifyColors(z=>z.ansi[E.index]=T.channels.toColor(...E.color));else{let z=F;this._themeService.modifyColors(Se=>Se[z]=T.channels.toColor(...E.color))}break;case 2:this._themeService.restoreColor(E.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(O){O?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(B.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let O=this.buffer.ybase+this.buffer.y,E=this.buffer.lines.get(O);if(!E)return;let F=Math.min(this.buffer.x,this.cols-1),j=this._renderService.dimensions.css.cell.height,q=E.getWidth(F),z=this._renderService.dimensions.css.cell.width*q,Se=this.buffer.y*this._renderService.dimensions.css.cell.height,ke=F*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ke+"px",this.textarea.style.top=Se+"px",this.textarea.style.width=z+"px",this.textarea.style.height=j+"px",this.textarea.style.lineHeight=j+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,l.addDisposableDomListener)(this.element,"copy",E=>{this.hasSelection()&&(0,a.copyHandler)(E,this._selectionService)}));let O=E=>(0,a.handlePasteEvent)(E,this.textarea,this.coreService,this.optionsService);this.register((0,l.addDisposableDomListener)(this.textarea,"paste",O)),this.register((0,l.addDisposableDomListener)(this.element,"paste",O)),V.isFirefox?this.register((0,l.addDisposableDomListener)(this.element,"mousedown",E=>{E.button===2&&(0,a.rightClickHandler)(E,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,l.addDisposableDomListener)(this.element,"contextmenu",E=>{(0,a.rightClickHandler)(E,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),V.isLinux&&this.register((0,l.addDisposableDomListener)(this.element,"auxclick",E=>{E.button===1&&(0,a.moveTextAreaUnderMouseCursor)(E,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,l.addDisposableDomListener)(this.textarea,"keyup",O=>this._keyUp(O),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keydown",O=>this._keyDown(O),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keypress",O=>this._keyPress(O),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionupdate",O=>this._compositionHelper.compositionupdate(O))),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,l.addDisposableDomListener)(this.textarea,"input",O=>this._inputEvent(O),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(O){if(!O)throw new Error("Terminal requires a parent element.");if(O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=O.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),O.appendChild(this.element);let E=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),E.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,l.addDisposableDomListener)(this.screenElement,"mousemove",F=>this.updateCursorStyle(F))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),E.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),V.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,O.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,l.addDisposableDomListener)(this.textarea,"focus",F=>this._handleTextAreaFocus(F))),this.register((0,l.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(A.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(_.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(b.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(F=>this._onRender.fire(F))),this.onResize(F=>this._renderService.resize(F.cols,F.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(f.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(c.Linkifier,this.screenElement)),this.element.appendChild(E);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(y.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(F=>this._renderService.handleSelectionChanged(F.start,F.end,F.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(F=>{this.textarea.value=F,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(F=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,l.addDisposableDomListener)(this.element,"mousedown",F=>this._selectionService.handleMouseDown(F))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(B.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",F=>this._handleScreenReaderModeOptionChange(F))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(u.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",F=>{!this._overviewRulerRenderer&&F&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(u.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(d.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let O=this,E=this.element;function F(z){let Se=O._mouseService.getMouseReportCoords(z,O.screenElement);if(!Se)return!1;let ke,Oe;switch(z.overrideType||z.type){case"mousemove":Oe=32,z.buttons===void 0?(ke=3,z.button!==void 0&&(ke=z.button<3?z.button:3)):ke=1&z.buttons?0:4&z.buttons?1:2&z.buttons?2:3;break;case"mouseup":Oe=0,ke=z.button<3?z.button:3;break;case"mousedown":Oe=1,ke=z.button<3?z.button:3;break;case"wheel":if(O._customWheelEventHandler&&O._customWheelEventHandler(z)===!1||O.viewport.getLinesScrolled(z)===0)return!1;Oe=z.deltaY<0?0:1,ke=4;break;default:return!1}return!(Oe===void 0||ke===void 0||ke>4)&&O.coreMouseService.triggerMouseEvent({col:Se.col,row:Se.row,x:Se.x,y:Se.y,button:ke,action:Oe,ctrl:z.ctrlKey,alt:z.altKey,shift:z.shiftKey})}let j={mouseup:null,wheel:null,mousedrag:null,mousemove:null},q={mouseup:z=>(F(z),z.buttons||(this._document.removeEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.removeEventListener("mousemove",j.mousedrag)),this.cancel(z)),wheel:z=>(F(z),this.cancel(z,!0)),mousedrag:z=>{z.buttons&&F(z)},mousemove:z=>{z.buttons||F(z)}};this.register(this.coreMouseService.onProtocolChange(z=>{z?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(z)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&z?j.mousemove||(E.addEventListener("mousemove",q.mousemove),j.mousemove=q.mousemove):(E.removeEventListener("mousemove",j.mousemove),j.mousemove=null),16&z?j.wheel||(E.addEventListener("wheel",q.wheel,{passive:!1}),j.wheel=q.wheel):(E.removeEventListener("wheel",j.wheel),j.wheel=null),2&z?j.mouseup||(j.mouseup=q.mouseup):(this._document.removeEventListener("mouseup",j.mouseup),j.mouseup=null),4&z?j.mousedrag||(j.mousedrag=q.mousedrag):(this._document.removeEventListener("mousemove",j.mousedrag),j.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,l.addDisposableDomListener)(E,"mousedown",z=>{if(z.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(z))return F(z),j.mouseup&&this._document.addEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.addEventListener("mousemove",j.mousedrag),this.cancel(z)})),this.register((0,l.addDisposableDomListener)(E,"wheel",z=>{if(!j.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(z)===!1)return!1;if(!this.buffer.hasScrollback){let Se=this.viewport.getLinesScrolled(z);if(Se===0)return;let ke=Y.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(z.deltaY<0?"A":"B"),Oe="";for(let at=0;at<Math.abs(Se);at++)Oe+=ke;return this.coreService.triggerDataEvent(Oe,!0),this.cancel(z,!0)}return this.viewport.handleWheel(z)?this.cancel(z):void 0}},{passive:!1})),this.register((0,l.addDisposableDomListener)(E,"touchstart",z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(z),this.cancel(z)},{passive:!0})),this.register((0,l.addDisposableDomListener)(E,"touchmove",z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(z)?void 0:this.cancel(z)},{passive:!1}))}refresh(O,E){this._renderService?.refreshRows(O,E)}updateCursorStyle(O){this._selectionService?.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(O,E,F=0){F===1?(super.scrollLines(O,E,F),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(O)}paste(O){(0,a.paste)(O,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(O){this._customKeyEventHandler=O}attachCustomWheelEventHandler(O){this._customWheelEventHandler=O}registerLinkProvider(O){return this._linkProviderService.registerLinkProvider(O)}registerCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let E=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),E}deregisterCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(O){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)}registerDecoration(O){return this._decorationService.registerDecoration(O)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(O,E,F){this._selectionService.setSelection(O,E,F)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(O,E){this._selectionService?.selectLines(O,E)}_keyDown(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;let E=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!E&&!this._compositionHelper.keydown(O))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;E||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let F=(0,H.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),F.type===3||F.type===2){let j=this.rows-1;return this.scrollLines(F.type===2?-j:j),this.cancel(O,!0)}return F.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(F.cancel&&this.cancel(O,!0),!F.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(F.key!==Y.C0.ETX&&F.key!==Y.C0.CR||(this.textarea.value=""),this._onKey.fire({key:F.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(F.key,!0),!this.optionsService.rawOptions.screenReaderMode||O.altKey||O.ctrlKey?this.cancel(O,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(O,E){let F=O.isMac&&!this.options.macOptionIsMeta&&E.altKey&&!E.ctrlKey&&!E.metaKey||O.isWindows&&E.altKey&&E.ctrlKey&&!E.metaKey||O.isWindows&&E.getModifierState("AltGraph");return E.type==="keypress"?F:F&&(!E.keyCode||E.keyCode>47)}_keyUp(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(E){return E.keyCode===16||E.keyCode===17||E.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)}_keyPress(O){let E;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)E=O.charCode;else if(O.which===null||O.which===void 0)E=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;E=O.which}return!(!E||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(E=String.fromCharCode(E),this._onKey.fire({key:E,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(E,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let E=O.data;return this.coreService.triggerDataEvent(E,!0),this.cancel(O),!0}return!1}resize(O,E){O!==this.cols||E!==this.rows?super.resize(O,E):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(O,E){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(U.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let O=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=O,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(Y.C0.ESC+"[I"):this.coreService.triggerDataEvent(Y.C0.ESC+"[O")}_reportWindowsOptions(O){if(this._renderService)switch(O){case R.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let E=this._renderService.dimensions.css.canvas.width.toFixed(0),F=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[4;${F};${E}t`);break;case R.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let j=this._renderService.dimensions.css.cell.width.toFixed(0),q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[6;${q};${j}t`)}}cancel(O,E){if(this.options.cancelEvents||E)return O.preventDefault(),O.stopPropagation(),!1}}s.Terminal=te},9924:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(o,a=1e3){this._renderCallback=o,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,a,l){this._rowCount=l,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;let c=Date.now();if(c-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=c,this._innerRefresh();else if(!this._additionalRefreshRequested){let p=c-this._lastRefreshMs,m=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a)}}},1680:function(i,s,o){var a=this&&this.__decorate||function(f,d,h,_){var C,S=arguments.length,b=S<3?d:_===null?_=Object.getOwnPropertyDescriptor(d,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(f,d,h,_);else for(var v=f.length-1;v>=0;v--)(C=f[v])&&(b=(S<3?C(b):S>3?C(d,h,b):C(d,h))||b);return S>3&&b&&Object.defineProperty(d,h,b),b},l=this&&this.__param||function(f,d){return function(h,_){d(h,_,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;let c=o(3656),p=o(4725),m=o(8460),y=o(844),g=o(2585),u=s.Viewport=class extends y.Disposable{constructor(f,d,h,_,C,S,b,v){super(),this._viewportElement=f,this._scrollArea=d,this._bufferService=h,this._optionsService=_,this._charSizeService=C,this._renderService=S,this._coreBrowserService=b,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,c.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(v.colors),this.register(v.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(f){this._viewportElement.style.backgroundColor=f.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(f){if(f)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let d=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==d&&(this._lastRecordedBufferHeight=d,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let f=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==f&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=f),this._refreshAnimationFrame=null}syncScrollArea(f=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(f);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(f)}_handleScroll(f){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let d=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let f=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(f*(this._smoothScrollState.target-this._smoothScrollState.origin)),f<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(f,d){let h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(d<0&&this._viewportElement.scrollTop!==0||d>0&&h<this._lastRecordedBufferHeight)||(f.cancelable&&f.preventDefault(),!1)}handleWheel(f){let d=this._getPixelsScrolled(f);return d!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+d:this._smoothScrollState.target+=d,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=d,this._bubbleScroll(f,d))}scrollLines(f){if(f!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let d=f*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+d,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:f,suppressScrollEvent:!1})}_getPixelsScrolled(f){if(f.deltaY===0||f.shiftKey)return 0;let d=this._applyScrollModifier(f.deltaY,f);return f.deltaMode===WheelEvent.DOM_DELTA_LINE?d*=this._currentRowHeight:f.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._currentRowHeight*this._bufferService.rows),d}getBufferElements(f,d){let h,_="",C=[],S=d??this._bufferService.buffer.lines.length,b=this._bufferService.buffer.lines;for(let v=f;v<S;v++){let w=b.get(v);if(!w)continue;let A=b.get(v+1)?.isWrapped;if(_+=w.translateToString(!A),!A||v===b.length-1){let T=document.createElement("div");T.textContent=_,C.push(T),_.length>0&&(h=T),_=""}}return{bufferElements:C,cursorElement:h}}getLinesScrolled(f){if(f.deltaY===0||f.shiftKey)return 0;let d=this._applyScrollModifier(f.deltaY,f);return f.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(d/=this._currentRowHeight+0,this._wheelPartialScroll+=d,d=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):f.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._bufferService.rows),d}_applyScrollModifier(f,d){let h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&d.altKey||h==="ctrl"&&d.ctrlKey||h==="shift"&&d.shiftKey?f*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:f*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(f){this._lastTouchY=f.touches[0].pageY}handleTouchMove(f){let d=this._lastTouchY-f.touches[0].pageY;return this._lastTouchY=f.touches[0].pageY,d!==0&&(this._viewportElement.scrollTop+=d,this._bubbleScroll(f,d))}};s.Viewport=u=a([l(2,g.IBufferService),l(3,g.IOptionsService),l(4,p.ICharSizeService),l(5,p.IRenderService),l(6,p.ICoreBrowserService),l(7,p.IThemeService)],u)},3107:function(i,s,o){var a=this&&this.__decorate||function(g,u,f,d){var h,_=arguments.length,C=_<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,f):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(g,u,f,d);else for(var S=g.length-1;S>=0;S--)(h=g[S])&&(C=(_<3?h(C):_>3?h(u,f,C):h(u,f))||C);return _>3&&C&&Object.defineProperty(u,f,C),C},l=this&&this.__param||function(g,u){return function(f,d){u(f,d,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;let c=o(4725),p=o(844),m=o(2585),y=s.BufferDecorationRenderer=class extends p.Disposable{constructor(g,u,f,d,h){super(),this._screenElement=g,this._bufferService=u,this._coreBrowserService=f,this._decorationService=d,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(_=>this._removeDecoration(_))),this.register((0,p.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){let u=this._coreBrowserService.mainDocument.createElement("div");u.classList.add("xterm-decoration"),u.classList.toggle("xterm-decoration-top-layer",g?.options?.layer==="top"),u.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,u.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",u.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",u.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let f=g.options.x??0;return f&&f>this._bufferService.cols&&(u.style.display="none"),this._refreshXPosition(g,u),u}_refreshStyle(g){let u=g.marker.line-this._bufferService.buffers.active.ydisp;if(u<0||u>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let f=this._decorationElements.get(g);f||(f=this._createElement(g),g.element=f,this._decorationElements.set(g,f),this._container.appendChild(f),g.onDispose(()=>{this._decorationElements.delete(g),f.remove()})),f.style.top=u*this._renderService.dimensions.css.cell.height+"px",f.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(f)}}_refreshXPosition(g,u=g.element){if(!u)return;let f=g.options.x??0;(g.options.anchor||"left")==="right"?u.style.right=f?f*this._renderService.dimensions.css.cell.width+"px":"":u.style.left=f?f*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){this._decorationElements.get(g)?.remove(),this._decorationElements.delete(g),g.dispose()}};s.BufferDecorationRenderer=y=a([l(1,m.IBufferService),l(2,c.ICoreBrowserService),l(3,m.IDecorationService),l(4,c.IRenderService)],y)},5871:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(let a of this._zones)if(a.color===o.options.overviewRulerOptions.color&&a.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,o.marker.line))return;if(this._lineAdjacentToZone(a,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(a,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,a){return a>=o.startBufferLine&&a<=o.endBufferLine}_lineAdjacentToZone(o,a,l){return a>=o.startBufferLine-this._linePadding[l||"full"]&&a<=o.endBufferLine+this._linePadding[l||"full"]}_addLineToZone(o,a){o.startBufferLine=Math.min(o.startBufferLine,a),o.endBufferLine=Math.max(o.endBufferLine,a)}}},5744:function(i,s,o){var a=this&&this.__decorate||function(h,_,C,S){var b,v=arguments.length,w=v<3?_:S===null?S=Object.getOwnPropertyDescriptor(_,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(h,_,C,S);else for(var A=h.length-1;A>=0;A--)(b=h[A])&&(w=(v<3?b(w):v>3?b(_,C,w):b(_,C))||w);return v>3&&w&&Object.defineProperty(_,C,w),w},l=this&&this.__param||function(h,_){return function(C,S){_(C,S,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;let c=o(5871),p=o(4725),m=o(844),y=o(2585),g={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0},f={full:0,left:0,center:0,right:0},d=s.OverviewRulerRenderer=class extends m.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(h,_,C,S,b,v,w){super(),this._viewportElement=h,this._screenElement=_,this._bufferService=C,this._decorationService=S,this._renderService=b,this._optionsService=v,this._coreBrowserService=w,this._colorZoneStore=new c.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);let A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let h=Math.floor(this._canvas.width/3),_=Math.ceil(this._canvas.width/3);u.full=this._canvas.width,u.left=h,u.center=_,u.right=h,this._refreshDrawHeightConstants(),f.full=0,f.left=0,f.center=u.left,f.right=u.left+u.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowserService.dpr);let h=this._canvas.height/this._bufferService.buffer.lines.length,_=Math.round(Math.max(Math.min(h,12),6)*this._coreBrowserService.dpr);g.left=_,g.center=_,g.right=_}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let _ of this._decorationService.decorations)this._colorZoneStore.addDecoration(_);this._ctx.lineWidth=1;let h=this._colorZoneStore.zones;for(let _ of h)_.position!=="full"&&this._renderColorZone(_);for(let _ of h)_.position==="full"&&this._renderColorZone(_);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(h){this._ctx.fillStyle=h.color,this._ctx.fillRect(f[h.position||"full"],Math.round((this._canvas.height-1)*(h.startBufferLine/this._bufferService.buffers.active.lines.length)-g[h.position||"full"]/2),u[h.position||"full"],Math.round((this._canvas.height-1)*((h.endBufferLine-h.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[h.position||"full"]))}_queueRefresh(h,_){this._shouldUpdateDimensions=h||this._shouldUpdateDimensions,this._shouldUpdateAnchor=_||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=d=a([l(2,y.IBufferService),l(3,y.IDecorationService),l(4,p.IRenderService),l(5,y.IOptionsService),l(6,p.ICoreBrowserService)],d)},2950:function(i,s,o){var a=this&&this.__decorate||function(g,u,f,d){var h,_=arguments.length,C=_<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,f):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(g,u,f,d);else for(var S=g.length-1;S>=0;S--)(h=g[S])&&(C=(_<3?h(C):_>3?h(u,f,C):h(u,f))||C);return _>3&&C&&Object.defineProperty(u,f,C),C},l=this&&this.__param||function(g,u){return function(f,d){u(f,d,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;let c=o(4725),p=o(2585),m=o(2584),y=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,u,f,d,h,_){this._textarea=g,this._compositionView=u,this._bufferService=f,this._optionsService=d,this._coreService=h,this._renderService=_,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){let u={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let f;this._isSendingComposition=!1,u.start+=this._dataAlreadySent.length,f=this._isComposing?this._textarea.value.substring(u.start,u.end):this._textarea.value.substring(u.start),f.length>0&&this._coreService.triggerDataEvent(f,!0)}},0)}else{this._isSendingComposition=!1;let u=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(u,!0)}}_handleAnyTextareaChanges(){let g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let u=this._textarea.value,f=u.replace(g,"");this._dataAlreadySent=f,u.length>g.length?this._coreService.triggerDataEvent(f,!0):u.length<g.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):u.length===g.length&&u!==g&&this._coreService.triggerDataEvent(u,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let u=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),f=this._renderService.dimensions.css.cell.height,d=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=u*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=d+"px",this._compositionView.style.height=f+"px",this._compositionView.style.lineHeight=f+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let _=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=d+"px",this._textarea.style.width=Math.max(_.width,1)+"px",this._textarea.style.height=Math.max(_.height,1)+"px",this._textarea.style.lineHeight=_.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=y=a([l(2,p.IBufferService),l(3,p.IOptionsService),l(4,p.ICoreService),l(5,c.IRenderService)],y)},9806:(i,s)=>{function o(a,l,c){let p=c.getBoundingClientRect(),m=a.getComputedStyle(c),y=parseInt(m.getPropertyValue("padding-left")),g=parseInt(m.getPropertyValue("padding-top"));return[l.clientX-p.left-y,l.clientY-p.top-g]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=o,s.getCoords=function(a,l,c,p,m,y,g,u,f){if(!y)return;let d=o(a,l,c);return d?(d[0]=Math.ceil((d[0]+(f?g/2:0))/g),d[1]=Math.ceil(d[1]/u),d[0]=Math.min(Math.max(d[0],1),p+(f?1:0)),d[1]=Math.min(Math.max(d[1],1),m),d):void 0}},9504:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;let a=o(2584);function l(u,f,d,h){let _=u-c(u,d),C=f-c(f,d),S=Math.abs(_-C)-function(b,v,w){let A=0,T=b-c(b,w),k=v-c(v,w);for(let I=0;I<Math.abs(T-k);I++){let N=p(b,v)==="A"?-1:1;w.buffer.lines.get(T+N*I)?.isWrapped&&A++}return A}(u,f,d);return g(S,y(p(u,f),h))}function c(u,f){let d=0,h=f.buffer.lines.get(u),_=h?.isWrapped;for(;_&&u>=0&&u<f.rows;)d++,h=f.buffer.lines.get(--u),_=h?.isWrapped;return d}function p(u,f){return u>f?"A":"B"}function m(u,f,d,h,_,C){let S=u,b=f,v="";for(;S!==d||b!==h;)S+=_?1:-1,_&&S>C.cols-1?(v+=C.buffer.translateBufferLineToString(b,!1,u,S),S=0,u=0,b++):!_&&S<0&&(v+=C.buffer.translateBufferLineToString(b,!1,0,u+1),S=C.cols-1,u=S,b--);return v+C.buffer.translateBufferLineToString(b,!1,u,S)}function y(u,f){let d=f?"O":"[";return a.C0.ESC+d+u}function g(u,f){u=Math.floor(u);let d="";for(let h=0;h<u;h++)d+=f;return d}s.moveToCellSequence=function(u,f,d,h){let _=d.buffer.x,C=d.buffer.y;if(!d.buffer.hasScrollback)return function(v,w,A,T,k,I){return l(w,T,k,I).length===0?"":g(m(v,w,v,w-c(w,k),!1,k).length,y("D",I))}(_,C,0,f,d,h)+l(C,f,d,h)+function(v,w,A,T,k,I){let N;N=l(w,T,k,I).length>0?T-c(T,k):w;let V=T,U=function(Y,H,D,M,x,R){let B;return B=l(D,M,x,R).length>0?M-c(M,x):H,Y<D&&B<=M||Y>=D&&B<M?"C":"D"}(v,w,A,T,k,I);return g(m(v,N,A,V,U==="C",k).length,y(U,I))}(_,C,u,f,d,h);let S;if(C===f)return S=_>u?"D":"C",g(Math.abs(_-u),y(S,h));S=C>f?"D":"C";let b=Math.abs(C-f);return g(function(v,w){return w.cols-v}(C>f?u:_,d)+(b-1)*d.cols+1+((C>f?_:u)-1),y(S,h))}},1296:function(i,s,o){var a=this&&this.__decorate||function(I,N,V,U){var Y,H=arguments.length,D=H<3?N:U===null?U=Object.getOwnPropertyDescriptor(N,V):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(I,N,V,U);else for(var M=I.length-1;M>=0;M--)(Y=I[M])&&(D=(H<3?Y(D):H>3?Y(N,V,D):Y(N,V))||D);return H>3&&D&&Object.defineProperty(N,V,D),D},l=this&&this.__param||function(I,N){return function(V,U){N(V,U,I)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;let c=o(3787),p=o(2550),m=o(2223),y=o(6171),g=o(6052),u=o(4725),f=o(8055),d=o(8460),h=o(844),_=o(2585),C="xterm-dom-renderer-owner-",S="xterm-rows",b="xterm-fg-",v="xterm-bg-",w="xterm-focus",A="xterm-selection",T=1,k=s.DomRenderer=class extends h.Disposable{constructor(I,N,V,U,Y,H,D,M,x,R,B,W,te){super(),this._terminal=I,this._document=N,this._element=V,this._screenElement=U,this._viewportElement=Y,this._helperContainer=H,this._linkifier2=D,this._charSizeService=x,this._optionsService=R,this._bufferService=B,this._coreBrowserService=W,this._themeService=te,this._terminalClass=T++,this._rowElements=[],this._selectionRenderModel=(0,g.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(A),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,y.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(re=>this._injectCss(re))),this._injectCss(this._themeService.colors),this._rowFactory=M.createInstance(c.DomRendererRowFactory,document),this._element.classList.add(C+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(re=>this._handleLinkHover(re))),this.register(this._linkifier2.onHideLinkUnderline(re=>this._handleLinkLeave(re))),this.register((0,h.toDisposable)(()=>{this._element.classList.remove(C+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let I=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*I,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*I),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/I),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/I),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let V of this._rowElements)V.style.width=`${this.dimensions.css.canvas.width}px`,V.style.height=`${this.dimensions.css.cell.height}px`,V.style.lineHeight=`${this.dimensions.css.cell.height}px`,V.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let N=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=N,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(I){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let N=`${this._terminalSelector} .${S} { color: ${I.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;N+=`${this._terminalSelector} .${S} .xterm-dim { color: ${f.color.multiplyOpacity(I.foreground,.5).css};}`,N+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let V=`blink_underline_${this._terminalClass}`,U=`blink_bar_${this._terminalClass}`,Y=`blink_block_${this._terminalClass}`;N+=`@keyframes ${V} { 50% {  border-bottom-style: hidden; }}`,N+=`@keyframes ${U} { 50% {  box-shadow: none; }}`,N+=`@keyframes ${Y} { 0% {  background-color: ${I.cursor.css};  color: ${I.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${I.cursor.css}; }}`,N+=`${this._terminalSelector} .${S}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${V} 1s step-end infinite;}${this._terminalSelector} .${S}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${U} 1s step-end infinite;}${this._terminalSelector} .${S}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Y} 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${I.cursor.css}; color: ${I.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${I.cursor.css} !important; color: ${I.cursorAccent.css} !important;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${I.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${I.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${I.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,N+=`${this._terminalSelector} .${A} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${A} div { position: absolute; background-color: ${I.selectionBackgroundOpaque.css};}${this._terminalSelector} .${A} div { position: absolute; background-color: ${I.selectionInactiveBackgroundOpaque.css};}`;for(let[H,D]of I.ansi.entries())N+=`${this._terminalSelector} .${b}${H} { color: ${D.css}; }${this._terminalSelector} .${b}${H}.xterm-dim { color: ${f.color.multiplyOpacity(D,.5).css}; }${this._terminalSelector} .${v}${H} { background-color: ${D.css}; }`;N+=`${this._terminalSelector} .${b}${m.INVERTED_DEFAULT_COLOR} { color: ${f.color.opaque(I.background).css}; }${this._terminalSelector} .${b}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${f.color.multiplyOpacity(f.color.opaque(I.background),.5).css}; }${this._terminalSelector} .${v}${m.INVERTED_DEFAULT_COLOR} { background-color: ${I.foreground.css}; }`,this._themeStyleElement.textContent=N}_setDefaultSpacing(){let I=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${I}px`,this._rowFactory.defaultSpacing=I}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(I,N){for(let V=this._rowElements.length;V<=N;V++){let U=this._document.createElement("div");this._rowContainer.appendChild(U),this._rowElements.push(U)}for(;this._rowElements.length>N;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(I,N){this._refreshRowElements(I,N),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(w),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(w),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(I,N,V){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(I,N,V),this.renderRows(0,this._bufferService.rows-1),!I||!N)return;this._selectionRenderModel.update(this._terminal,I,N,V);let U=this._selectionRenderModel.viewportStartRow,Y=this._selectionRenderModel.viewportEndRow,H=this._selectionRenderModel.viewportCappedStartRow,D=this._selectionRenderModel.viewportCappedEndRow;if(H>=this._bufferService.rows||D<0)return;let M=this._document.createDocumentFragment();if(V){let x=I[0]>N[0];M.appendChild(this._createSelectionElement(H,x?N[0]:I[0],x?I[0]:N[0],D-H+1))}else{let x=U===H?I[0]:0,R=H===Y?N[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(H,x,R));let B=D-H-1;if(M.appendChild(this._createSelectionElement(H+1,0,this._bufferService.cols,B)),H!==D){let W=Y===D?N[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(D,0,W))}}this._selectionContainer.appendChild(M)}_createSelectionElement(I,N,V,U=1){let Y=this._document.createElement("div"),H=N*this.dimensions.css.cell.width,D=this.dimensions.css.cell.width*(V-N);return H+D>this.dimensions.css.canvas.width&&(D=this.dimensions.css.canvas.width-H),Y.style.height=U*this.dimensions.css.cell.height+"px",Y.style.top=I*this.dimensions.css.cell.height+"px",Y.style.left=`${H}px`,Y.style.width=`${D}px`,Y}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let I of this._rowElements)I.replaceChildren()}renderRows(I,N){let V=this._bufferService.buffer,U=V.ybase+V.y,Y=Math.min(V.x,this._bufferService.cols-1),H=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,M=this._optionsService.rawOptions.cursorInactiveStyle;for(let x=I;x<=N;x++){let R=x+V.ydisp,B=this._rowElements[x],W=V.lines.get(R);if(!B||!W)break;B.replaceChildren(...this._rowFactory.createRow(W,R,R===U,D,M,Y,H,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${C}${this._terminalClass}`}_handleLinkHover(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!0)}_handleLinkLeave(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!1)}_setCellUnderline(I,N,V,U,Y,H){V<0&&(I=0),U<0&&(N=0);let D=this._bufferService.rows-1;V=Math.max(Math.min(V,D),0),U=Math.max(Math.min(U,D),0),Y=Math.min(Y,this._bufferService.cols);let M=this._bufferService.buffer,x=M.ybase+M.y,R=Math.min(M.x,Y-1),B=this._optionsService.rawOptions.cursorBlink,W=this._optionsService.rawOptions.cursorStyle,te=this._optionsService.rawOptions.cursorInactiveStyle;for(let re=V;re<=U;++re){let O=re+M.ydisp,E=this._rowElements[re],F=M.lines.get(O);if(!E||!F)break;E.replaceChildren(...this._rowFactory.createRow(F,O,O===x,W,te,R,B,this.dimensions.css.cell.width,this._widthCache,H?re===V?I:0:-1,H?(re===U?N:Y)-1:-1))}}};s.DomRenderer=k=a([l(7,_.IInstantiationService),l(8,u.ICharSizeService),l(9,_.IOptionsService),l(10,_.IBufferService),l(11,u.ICoreBrowserService),l(12,u.IThemeService)],k)},3787:function(i,s,o){var a=this&&this.__decorate||function(S,b,v,w){var A,T=arguments.length,k=T<3?b:w===null?w=Object.getOwnPropertyDescriptor(b,v):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(S,b,v,w);else for(var I=S.length-1;I>=0;I--)(A=S[I])&&(k=(T<3?A(k):T>3?A(b,v,k):A(b,v))||k);return T>3&&k&&Object.defineProperty(b,v,k),k},l=this&&this.__param||function(S,b){return function(v,w){b(v,w,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;let c=o(2223),p=o(643),m=o(511),y=o(2585),g=o(8055),u=o(4725),f=o(4269),d=o(6171),h=o(3734),_=s.DomRendererRowFactory=class{constructor(S,b,v,w,A,T,k){this._document=S,this._characterJoinerService=b,this._optionsService=v,this._coreBrowserService=w,this._coreService=A,this._decorationService=T,this._themeService=k,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,b,v){this._selectionStart=S,this._selectionEnd=b,this._columnSelectMode=v}createRow(S,b,v,w,A,T,k,I,N,V,U){let Y=[],H=this._characterJoinerService.getJoinedCharacters(b),D=this._themeService.colors,M,x=S.getNoBgTrimmedLength();v&&x<T+1&&(x=T+1);let R=0,B="",W=0,te=0,re=0,O=!1,E=0,F=!1,j=0,q=[],z=V!==-1&&U!==-1;for(let Se=0;Se<x;Se++){S.loadCell(Se,this._workCell);let ke=this._workCell.getWidth();if(ke===0)continue;let Oe=!1,at=Se,ae=this._workCell;if(H.length>0&&Se===H[0][0]){Oe=!0;let Re=H.shift();ae=new f.JoinedCellData(this._workCell,S.translateToString(!0,Re[0],Re[1]),Re[1]-Re[0]),at=Re[1]-1,ke=ae.getWidth()}let hi=this._isCellInSelection(Se,b),Da=v&&Se===T,Ea=z&&Se>=V&&Se<=U,Ia=!1;this._decorationService.forEachDecorationAtCell(Se,b,void 0,Re=>{Ia=!0});let _s=ae.getChars()||p.WHITESPACE_CELL_CHAR;if(_s===" "&&(ae.isUnderline()||ae.isOverline())&&(_s="\xA0"),j=ke*I-N.get(_s,ae.isBold(),ae.isItalic()),M){if(R&&(hi&&F||!hi&&!F&&ae.bg===W)&&(hi&&F&&D.selectionForeground||ae.fg===te)&&ae.extended.ext===re&&Ea===O&&j===E&&!Da&&!Oe&&!Ia){ae.isInvisible()?B+=p.WHITESPACE_CELL_CHAR:B+=_s,R++;continue}R&&(M.textContent=B),M=this._document.createElement("span"),R=0,B=""}else M=this._document.createElement("span");if(W=ae.bg,te=ae.fg,re=ae.extended.ext,O=Ea,E=j,F=hi,Oe&&T>=Se&&T<=at&&(T=Se),!this._coreService.isCursorHidden&&Da&&this._coreService.isCursorInitialized){if(q.push("xterm-cursor"),this._coreBrowserService.isFocused)k&&q.push("xterm-cursor-blink"),q.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(A)switch(A){case"outline":q.push("xterm-cursor-outline");break;case"block":q.push("xterm-cursor-block");break;case"bar":q.push("xterm-cursor-bar");break;case"underline":q.push("xterm-cursor-underline")}}if(ae.isBold()&&q.push("xterm-bold"),ae.isItalic()&&q.push("xterm-italic"),ae.isDim()&&q.push("xterm-dim"),B=ae.isInvisible()?p.WHITESPACE_CELL_CHAR:ae.getChars()||p.WHITESPACE_CELL_CHAR,ae.isUnderline()&&(q.push(`xterm-underline-${ae.extended.underlineStyle}`),B===" "&&(B="\xA0"),!ae.isUnderlineColorDefault()))if(ae.isUnderlineColorRGB())M.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(ae.getUnderlineColor()).join(",")})`;else{let Re=ae.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ae.isBold()&&Re<8&&(Re+=8),M.style.textDecorationColor=D.ansi[Re].css}ae.isOverline()&&(q.push("xterm-overline"),B===" "&&(B="\xA0")),ae.isStrikethrough()&&q.push("xterm-strikethrough"),Ea&&(M.style.textDecoration="underline");let yt=ae.getFgColor(),fi=ae.getFgColorMode(),Vt=ae.getBgColor(),pi=ae.getBgColorMode(),Ma=!!ae.isInverse();if(Ma){let Re=yt;yt=Vt,Vt=Re;let Qm=fi;fi=pi,pi=Qm}let yn,vs,Cn,gi=!1;switch(this._decorationService.forEachDecorationAtCell(Se,b,void 0,Re=>{Re.options.layer!=="top"&&gi||(Re.backgroundColorRGB&&(pi=50331648,Vt=Re.backgroundColorRGB.rgba>>8&16777215,yn=Re.backgroundColorRGB),Re.foregroundColorRGB&&(fi=50331648,yt=Re.foregroundColorRGB.rgba>>8&16777215,vs=Re.foregroundColorRGB),gi=Re.options.layer==="top")}),!gi&&hi&&(yn=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,Vt=yn.rgba>>8&16777215,pi=50331648,gi=!0,D.selectionForeground&&(fi=50331648,yt=D.selectionForeground.rgba>>8&16777215,vs=D.selectionForeground)),gi&&q.push("xterm-decoration-top"),pi){case 16777216:case 33554432:Cn=D.ansi[Vt],q.push(`xterm-bg-${Vt}`);break;case 50331648:Cn=g.channels.toColor(Vt>>16,Vt>>8&255,255&Vt),this._addStyle(M,`background-color:#${C((Vt>>>0).toString(16),"0",6)}`);break;default:Ma?(Cn=D.foreground,q.push(`xterm-bg-${c.INVERTED_DEFAULT_COLOR}`)):Cn=D.background}switch(yn||ae.isDim()&&(yn=g.color.multiplyOpacity(Cn,.5)),fi){case 16777216:case 33554432:ae.isBold()&&yt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(yt+=8),this._applyMinimumContrast(M,Cn,D.ansi[yt],ae,yn,void 0)||q.push(`xterm-fg-${yt}`);break;case 50331648:let Re=g.channels.toColor(yt>>16&255,yt>>8&255,255&yt);this._applyMinimumContrast(M,Cn,Re,ae,yn,vs)||this._addStyle(M,`color:#${C(yt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(M,Cn,D.foreground,ae,yn,vs)||Ma&&q.push(`xterm-fg-${c.INVERTED_DEFAULT_COLOR}`)}q.length&&(M.className=q.join(" "),q.length=0),Da||Oe||Ia?M.textContent=B:R++,j!==this.defaultSpacing&&(M.style.letterSpacing=`${j}px`),Y.push(M),Se=at}return M&&R&&(M.textContent=B),Y}_applyMinimumContrast(S,b,v,w,A,T){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,d.treatGlyphAsBackgroundColor)(w.getCode()))return!1;let k=this._getContrastCache(w),I;if(A||T||(I=k.getColor(b.rgba,v.rgba)),I===void 0){let N=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);I=g.color.ensureContrastRatio(A||b,T||v,N),k.setColor((A||b).rgba,(T||v).rgba,I??null)}return!!I&&(this._addStyle(S,`color:${I.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,b){S.setAttribute("style",`${S.getAttribute("style")||""}${b};`)}_isCellInSelection(S,b){let v=this._selectionStart,w=this._selectionEnd;return!(!v||!w)&&(this._columnSelectMode?v[0]<=w[0]?S>=v[0]&&b>=v[1]&&S<w[0]&&b<=w[1]:S<v[0]&&b>=v[1]&&S>=w[0]&&b<=w[1]:b>v[1]&&b<w[1]||v[1]===w[1]&&b===v[1]&&S>=v[0]&&S<w[0]||v[1]<w[1]&&b===w[1]&&S<w[0]||v[1]<w[1]&&b===v[1]&&S>=v[0])}};function C(S,b,v){for(;S.length<v;)S=b+S;return S}s.DomRendererRowFactory=_=a([l(1,u.ICharacterJoinerService),l(2,y.IOptionsService),l(3,u.ICoreBrowserService),l(4,y.ICoreService),l(5,y.IDecorationService),l(6,u.IThemeService)],_)},2550:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(o,a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let l=o.createElement("span");l.classList.add("xterm-char-measure-element");let c=o.createElement("span");c.classList.add("xterm-char-measure-element"),c.style.fontWeight="bold";let p=o.createElement("span");p.classList.add("xterm-char-measure-element"),p.style.fontStyle="italic";let m=o.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontWeight="bold",m.style.fontStyle="italic",this._measureElements=[l,c,p,m],this._container.appendChild(l),this._container.appendChild(c),this._container.appendChild(p),this._container.appendChild(m),a.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,a,l,c){o===this._font&&a===this._fontSize&&l===this._weight&&c===this._weightBold||(this._font=o,this._fontSize=a,this._weight=l,this._weightBold=c,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${l}`,this._measureElements[1].style.fontWeight=`${c}`,this._measureElements[2].style.fontWeight=`${l}`,this._measureElements[3].style.fontWeight=`${c}`,this.clear())}get(o,a,l){let c=0;if(!a&&!l&&o.length===1&&(c=o.charCodeAt(0))<256){if(this._flat[c]!==-9999)return this._flat[c];let y=this._measure(o,0);return y>0&&(this._flat[c]=y),y}let p=o;a&&(p+="B"),l&&(p+="I");let m=this._holey.get(p);if(m===void 0){let y=0;a&&(y|=1),l&&(y|=2),m=this._measure(o,y),m>0&&this._holey.set(p,m)}return m}_measure(o,a){let l=this._measureElements[a];return l.textContent=o.repeat(32),l.offsetWidth/32}}},2223:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;let a=o(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},6171:(i,s)=>{function o(l){return 57508<=l&&l<=57558}function a(l){return l>=128512&&l<=128591||l>=127744&&l<=128511||l>=128640&&l<=128767||l>=9728&&l<=9983||l>=9984&&l<=10175||l>=65024&&l<=65039||l>=129280&&l<=129535||l>=127462&&l<=127487}Object.defineProperty(s,"__esModule",{value:!0}),s.computeNextVariantOffset=s.createRenderDimensions=s.treatGlyphAsBackgroundColor=s.allowRescaling=s.isEmoji=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},s.isPowerlineGlyph=o,s.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},s.isEmoji=a,s.allowRescaling=function(l,c,p,m){return c===1&&p>Math.ceil(1.5*m)&&l!==void 0&&l>255&&!a(l)&&!o(l)&&!function(y){return 57344<=y&&y<=63743}(l)},s.treatGlyphAsBackgroundColor=function(l){return o(l)||function(c){return 9472<=c&&c<=9631}(l)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},s.computeNextVariantOffset=function(l,c,p=0){return(l-(2*Math.round(c)-p))%(2*Math.round(c))}},6052:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(l,c,p,m=!1){if(this.selectionStart=c,this.selectionEnd=p,!c||!p||c[0]===p[0]&&c[1]===p[1])return void this.clear();let y=l.buffers.active.ydisp,g=c[1]-y,u=p[1]-y,f=Math.max(g,0),d=Math.min(u,l.rows-1);f>=l.rows||d<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=g,this.viewportEndRow=u,this.viewportCappedStartRow=f,this.viewportCappedEndRow=d,this.startCol=c[0],this.endCol=p[0])}isCellSelected(l,c,p){return!!this.hasSelection&&(p-=l.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?c>=this.startCol&&p>=this.viewportCappedStartRow&&c<this.endCol&&p<=this.viewportCappedEndRow:c<this.startCol&&p>=this.viewportCappedStartRow&&c>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&c>=this.startCol&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&c>=this.startCol)}}s.createSelectionRenderModel=function(){return new o}},456:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let o=this.selectionStart,a=this.selectionEnd;return!(!o||!a)&&(o[1]>a[1]||o[1]===a[1]&&o[0]>a[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(i,s,o){var a=this&&this.__decorate||function(d,h,_,C){var S,b=arguments.length,v=b<3?h:C===null?C=Object.getOwnPropertyDescriptor(h,_):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(d,h,_,C);else for(var w=d.length-1;w>=0;w--)(S=d[w])&&(v=(b<3?S(v):b>3?S(h,_,v):S(h,_))||v);return b>3&&v&&Object.defineProperty(h,_,v),v},l=this&&this.__param||function(d,h){return function(_,C){h(_,C,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;let c=o(2585),p=o(8460),m=o(844),y=s.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(d,h,_){super(),this._optionsService=_,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new f(this._optionsService))}catch{this._measureStrategy=this.register(new u(d,h,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let d=this._measureStrategy.measure();d.width===this.width&&d.height===this.height||(this.width=d.width,this.height=d.height,this._onCharSizeChange.fire())}};s.CharSizeService=y=a([l(2,c.IOptionsService)],y);class g extends m.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(h,_){h!==void 0&&h>0&&_!==void 0&&_>0&&(this._result.width=h,this._result.height=_)}}class u extends g{constructor(h,_,C){super(),this._document=h,this._parentElement=_,this._optionsService=C,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class f extends g{constructor(h){super(),this._optionsService=h,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let _=this._ctx.measureText("W");if(!("width"in _&&"fontBoundingBoxAscent"in _&&"fontBoundingBoxDescent"in _))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let h=this._ctx.measureText("W");return this._validateAndSet(h.width,h.fontBoundingBoxAscent+h.fontBoundingBoxDescent),this._result}}},4269:function(i,s,o){var a=this&&this.__decorate||function(f,d,h,_){var C,S=arguments.length,b=S<3?d:_===null?_=Object.getOwnPropertyDescriptor(d,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(f,d,h,_);else for(var v=f.length-1;v>=0;v--)(C=f[v])&&(b=(S<3?C(b):S>3?C(d,h,b):C(d,h))||b);return S>3&&b&&Object.defineProperty(d,h,b),b},l=this&&this.__param||function(f,d){return function(h,_){d(h,_,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;let c=o(3734),p=o(643),m=o(511),y=o(2585);class g extends c.AttributeData{constructor(d,h,_){super(),this.content=0,this.combinedData="",this.fg=d.fg,this.bg=d.bg,this.combinedData=h,this._width=_}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(d){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=g;let u=s.CharacterJoinerService=class Vm{constructor(d){this._bufferService=d,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(d){let h={id:this._nextCharacterJoinerId++,handler:d};return this._characterJoiners.push(h),h.id}deregister(d){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===d)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(d){if(this._characterJoiners.length===0)return[];let h=this._bufferService.buffer.lines.get(d);if(!h||h.length===0)return[];let _=[],C=h.translateToString(!0),S=0,b=0,v=0,w=h.getFg(0),A=h.getBg(0);for(let T=0;T<h.getTrimmedLength();T++)if(h.loadCell(T,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==A){if(T-S>1){let k=this._getJoinedRanges(C,v,b,h,S);for(let I=0;I<k.length;I++)_.push(k[I])}S=T,v=b,w=this._workCell.fg,A=this._workCell.bg}b+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let T=this._getJoinedRanges(C,v,b,h,S);for(let k=0;k<T.length;k++)_.push(T[k])}return _}_getJoinedRanges(d,h,_,C,S){let b=d.substring(h,_),v=[];try{v=this._characterJoiners[0].handler(b)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{let A=this._characterJoiners[w].handler(b);for(let T=0;T<A.length;T++)Vm._mergeRanges(v,A[T])}catch(A){console.error(A)}return this._stringRangesToCellRanges(v,C,S),v}_stringRangesToCellRanges(d,h,_){let C=0,S=!1,b=0,v=d[C];if(v){for(let w=_;w<this._bufferService.cols;w++){let A=h.getWidth(w),T=h.getString(w).length||p.WHITESPACE_CELL_CHAR.length;if(A!==0){if(!S&&v[0]<=b&&(v[0]=w,S=!0),v[1]<=b){if(v[1]=w,v=d[++C],!v)break;v[0]<=b?(v[0]=w,S=!0):S=!1}b+=T}}v&&(v[1]=this._bufferService.cols)}}static _mergeRanges(d,h){let _=!1;for(let C=0;C<d.length;C++){let S=d[C];if(_){if(h[1]<=S[0])return d[C-1][1]=h[1],d;if(h[1]<=S[1])return d[C-1][1]=Math.max(h[1],S[1]),d.splice(C,1),d;d.splice(C,1),C--}else{if(h[1]<=S[0])return d.splice(C,0,h),d;if(h[1]<=S[1])return S[0]=Math.min(h[0],S[0]),d;h[0]<S[1]&&(S[0]=Math.min(h[0],S[0]),_=!0)}}return _?d[d.length-1][1]=h[1]:d.push(h),d}};s.CharacterJoinerService=u=a([l(0,y.IBufferService)],u)},5114:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;let a=o(844),l=o(8460),c=o(3656);class p extends a.Disposable{constructor(g,u,f){super(),this._textarea=g,this._window=u,this.mainDocument=f,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new m(this._window),this._onDprChange=this.register(new l.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new l.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(d=>this._screenDprMonitor.setWindow(d))),this.register((0,l.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(g){this._window!==g&&(this._window=g,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}s.CoreBrowserService=p;class m extends a.Disposable{constructor(g){super(),this._parentWindow=g,this._windowResizeListener=this.register(new a.MutableDisposable),this._onDprChange=this.register(new l.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,a.toDisposable)(()=>this.clearListener()))}setWindow(g){this._parentWindow=g,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,c.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkProviderService=void 0;let a=o(844);class l extends a.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,a.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(p){return this.linkProviders.push(p),{dispose:()=>{let m=this.linkProviders.indexOf(p);m!==-1&&this.linkProviders.splice(m,1)}}}}s.LinkProviderService=l},8934:function(i,s,o){var a=this&&this.__decorate||function(y,g,u,f){var d,h=arguments.length,_=h<3?g:f===null?f=Object.getOwnPropertyDescriptor(g,u):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(y,g,u,f);else for(var C=y.length-1;C>=0;C--)(d=y[C])&&(_=(h<3?d(_):h>3?d(g,u,_):d(g,u))||_);return h>3&&_&&Object.defineProperty(g,u,_),_},l=this&&this.__param||function(y,g){return function(u,f){g(u,f,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;let c=o(4725),p=o(9806),m=s.MouseService=class{constructor(y,g){this._renderService=y,this._charSizeService=g}getCoords(y,g,u,f,d){return(0,p.getCoords)(window,y,g,u,f,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,d)}getMouseReportCoords(y,g){let u=(0,p.getCoordsRelativeToElement)(window,y,g);if(this._charSizeService.hasValidSize)return u[0]=Math.min(Math.max(u[0],0),this._renderService.dimensions.css.canvas.width-1),u[1]=Math.min(Math.max(u[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(u[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(u[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(u[0]),y:Math.floor(u[1])}}};s.MouseService=m=a([l(0,c.IRenderService),l(1,c.ICharSizeService)],m)},3230:function(i,s,o){var a=this&&this.__decorate||function(d,h,_,C){var S,b=arguments.length,v=b<3?h:C===null?C=Object.getOwnPropertyDescriptor(h,_):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(d,h,_,C);else for(var w=d.length-1;w>=0;w--)(S=d[w])&&(v=(b<3?S(v):b>3?S(h,_,v):S(h,_))||v);return b>3&&v&&Object.defineProperty(h,_,v),v},l=this&&this.__param||function(d,h){return function(_,C){h(_,C,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;let c=o(6193),p=o(4725),m=o(8460),y=o(844),g=o(7226),u=o(2585),f=s.RenderService=class extends y.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(d,h,_,C,S,b,v,w){super(),this._rowCount=d,this._charSizeService=C,this._renderer=this.register(new y.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._observerDisposable=this.register(new y.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new m.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new m.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new m.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new m.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new c.RenderDebouncer((A,T)=>this._renderRows(A,T),v),this.register(this._renderDebouncer),this.register(v.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(b.onResize(()=>this._fullRefresh())),this.register(b.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(_.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(S.onDecorationRegistered(()=>this._fullRefresh())),this.register(S.onDecorationRemoved(()=>this._fullRefresh())),this.register(_.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()})),this.register(_.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(b.buffer.y,b.buffer.y,!0))),this.register(w.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(v.window,h),this.register(v.onWindowChange(A=>this._registerIntersectionObserver(A,h)))}_registerIntersectionObserver(d,h){if("IntersectionObserver"in d){let _=new d.IntersectionObserver(C=>this._handleIntersectionChange(C[C.length-1]),{threshold:0});_.observe(h),this._observerDisposable.value=(0,y.toDisposable)(()=>_.disconnect())}}_handleIntersectionChange(d){this._isPaused=d.isIntersecting===void 0?d.intersectionRatio===0:!d.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(d,h,_=!1){this._isPaused?this._needsFullRefresh=!0:(_||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(d,h,this._rowCount))}_renderRows(d,h){this._renderer.value&&(d=Math.min(d,this._rowCount-1),h=Math.min(h,this._rowCount-1),this._renderer.value.renderRows(d,h),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:d,end:h}),this._onRender.fire({start:d,end:h}),this._isNextRenderRedrawOnly=!0)}resize(d,h){this._rowCount=h,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(d){this._renderer.value=d,this._renderer.value&&(this._renderer.value.onRequestRedraw(h=>this.refreshRows(h.start,h.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(d){return this._renderDebouncer.addRefreshCallback(d)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(d,h){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(d,h)):this._renderer.value.handleResize(d,h),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(d,h,_){this._selectionState.start=d,this._selectionState.end=h,this._selectionState.columnSelectMode=_,this._renderer.value?.handleSelectionChanged(d,h,_)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};s.RenderService=f=a([l(2,u.IOptionsService),l(3,p.ICharSizeService),l(4,u.IDecorationService),l(5,u.IBufferService),l(6,p.ICoreBrowserService),l(7,p.IThemeService)],f)},9312:function(i,s,o){var a=this&&this.__decorate||function(v,w,A,T){var k,I=arguments.length,N=I<3?w:T===null?T=Object.getOwnPropertyDescriptor(w,A):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(v,w,A,T);else for(var V=v.length-1;V>=0;V--)(k=v[V])&&(N=(I<3?k(N):I>3?k(w,A,N):k(w,A))||N);return I>3&&N&&Object.defineProperty(w,A,N),N},l=this&&this.__param||function(v,w){return function(A,T){w(A,T,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;let c=o(9806),p=o(9504),m=o(456),y=o(4725),g=o(8460),u=o(844),f=o(6114),d=o(4841),h=o(511),_=o(2585),C="\xA0",S=new RegExp(C,"g"),b=s.SelectionService=class extends u.Disposable{constructor(v,w,A,T,k,I,N,V,U){super(),this._element=v,this._screenElement=w,this._linkifier=A,this._bufferService=T,this._coreService=k,this._mouseService=I,this._optionsService=N,this._renderService=V,this._coreBrowserService=U,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Y=>this._handleMouseMove(Y),this._mouseUpListener=Y=>this._handleMouseUp(Y),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Y=>this._handleTrim(Y)),this.register(this._bufferService.buffers.onBufferActivate(Y=>this._handleBufferActivate(Y))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,u.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let v=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!v||!w||v[0]===w[0]&&v[1]===w[1])}get selectionText(){let v=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!v||!w)return"";let A=this._bufferService.buffer,T=[];if(this._activeSelectionMode===3){if(v[0]===w[0])return"";let k=v[0]<w[0]?v[0]:w[0],I=v[0]<w[0]?w[0]:v[0];for(let N=v[1];N<=w[1];N++){let V=A.translateBufferLineToString(N,!0,k,I);T.push(V)}}else{let k=v[1]===w[1]?w[0]:void 0;T.push(A.translateBufferLineToString(v[1],!0,v[0],k));for(let I=v[1]+1;I<=w[1]-1;I++){let N=A.lines.get(I),V=A.translateBufferLineToString(I,!0);N?.isWrapped?T[T.length-1]+=V:T.push(V)}if(v[1]!==w[1]){let I=A.lines.get(w[1]),N=A.translateBufferLineToString(w[1],!0,0,w[0]);I&&I.isWrapped?T[T.length-1]+=N:T.push(N)}}return T.map(k=>k.replace(S," ")).join(f.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(v){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),f.isLinux&&v&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(v){let w=this._getMouseBufferCoords(v),A=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!!(A&&T&&w)&&this._areCoordsInSelection(w,A,T)}isCellInSelection(v,w){let A=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!(!A||!T)&&this._areCoordsInSelection([v,w],A,T)}_areCoordsInSelection(v,w,A){return v[1]>w[1]&&v[1]<A[1]||w[1]===A[1]&&v[1]===w[1]&&v[0]>=w[0]&&v[0]<A[0]||w[1]<A[1]&&v[1]===A[1]&&v[0]<A[0]||w[1]<A[1]&&v[1]===w[1]&&v[0]>=w[0]}_selectWordAtCursor(v,w){let A=this._linkifier.currentLink?.link?.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,d.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let T=this._getMouseBufferCoords(v);return!!T&&(this._selectWordAt(T,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(v,w){this._model.clearSelection(),v=Math.max(v,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,v],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(v){this._model.handleTrim(v)&&this.refresh()}_getMouseBufferCoords(v){let w=this._mouseService.getCoords(v,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(v){let w=(0,c.getCoordsRelativeToElement)(this._coreBrowserService.window,v,this._screenElement)[1],A=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=A?0:(w>A&&(w-=A),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(v){return f.isMac?v.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:v.shiftKey}handleMouseDown(v){if(this._mouseDownTimeStamp=v.timeStamp,(v.button!==2||!this.hasSelection)&&v.button===0){if(!this._enabled){if(!this.shouldForceSelection(v))return;v.stopPropagation()}v.preventDefault(),this._dragScrollAmount=0,this._enabled&&v.shiftKey?this._handleIncrementalClick(v):v.detail===1?this._handleSingleClick(v):v.detail===2?this._handleDoubleClick(v):v.detail===3&&this._handleTripleClick(v),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(v){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(v))}_handleSingleClick(v){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(v)?3:0,this._model.selectionStart=this._getMouseBufferCoords(v),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(v){this._selectWordAtCursor(v,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(v){let w=this._getMouseBufferCoords(v);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(v){return v.altKey&&!(f.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(v){if(v.stopImmediatePropagation(),!this._model.selectionStart)return;let w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(v),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(v),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let A=this._bufferService.buffer;if(this._model.selectionEnd[1]<A.lines.length){let T=A.lines.get(this._model.selectionEnd[1]);T&&T.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let v=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(v.ydisp+this._bufferService.rows,v.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=v.ydisp),this.refresh()}}_handleMouseUp(v){let w=v.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&v.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let A=this._mouseService.getCoords(v,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(A&&A[0]!==void 0&&A[1]!==void 0){let T=(0,p.moveToCellSequence)(A[0]-1,A[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(T,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let v=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,A=!(!v||!w||v[0]===w[0]&&v[1]===w[1]);A?v&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&v[0]===this._oldSelectionStart[0]&&v[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(v,w,A)):this._oldHasSelection&&this._fireOnSelectionChange(v,w,A)}_fireOnSelectionChange(v,w,A){this._oldSelectionStart=v,this._oldSelectionEnd=w,this._oldHasSelection=A,this._onSelectionChange.fire()}_handleBufferActivate(v){this.clearSelection(),this._trimListener.dispose(),this._trimListener=v.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(v,w){let A=w;for(let T=0;w>=T;T++){let k=v.loadCell(T,this._workCell).getChars().length;this._workCell.getWidth()===0?A--:k>1&&w!==T&&(A+=k-1)}return A}setSelection(v,w,A){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[v,w],this._model.selectionStartLength=A,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(v){this._isClickInSelection(v)||(this._selectWordAtCursor(v,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(v,w,A=!0,T=!0){if(v[0]>=this._bufferService.cols)return;let k=this._bufferService.buffer,I=k.lines.get(v[1]);if(!I)return;let N=k.translateBufferLineToString(v[1],!1),V=this._convertViewportColToCharacterIndex(I,v[0]),U=V,Y=v[0]-V,H=0,D=0,M=0,x=0;if(N.charAt(V)===" "){for(;V>0&&N.charAt(V-1)===" ";)V--;for(;U<N.length&&N.charAt(U+1)===" ";)U++}else{let W=v[0],te=v[0];I.getWidth(W)===0&&(H++,W--),I.getWidth(te)===2&&(D++,te++);let re=I.getString(te).length;for(re>1&&(x+=re-1,U+=re-1);W>0&&V>0&&!this._isCharWordSeparator(I.loadCell(W-1,this._workCell));){I.loadCell(W-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(H++,W--):O>1&&(M+=O-1,V-=O-1),V--,W--}for(;te<I.length&&U+1<N.length&&!this._isCharWordSeparator(I.loadCell(te+1,this._workCell));){I.loadCell(te+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,te++):O>1&&(x+=O-1,U+=O-1),U++,te++}}U++;let R=V+Y-H+M,B=Math.min(this._bufferService.cols,U-V+H+D-M-x);if(w||N.slice(V,U).trim()!==""){if(A&&R===0&&I.getCodePoint(0)!==32){let W=k.lines.get(v[1]-1);if(W&&I.isWrapped&&W.getCodePoint(this._bufferService.cols-1)!==32){let te=this._getWordAt([this._bufferService.cols-1,v[1]-1],!1,!0,!1);if(te){let re=this._bufferService.cols-te.start;R-=re,B+=re}}}if(T&&R+B===this._bufferService.cols&&I.getCodePoint(this._bufferService.cols-1)!==32){let W=k.lines.get(v[1]+1);if(W?.isWrapped&&W.getCodePoint(0)!==32){let te=this._getWordAt([0,v[1]+1],!1,!1,!0);te&&(B+=te.length)}}return{start:R,length:B}}}_selectWordAt(v,w){let A=this._getWordAt(v,w);if(A){for(;A.start<0;)A.start+=this._bufferService.cols,v[1]--;this._model.selectionStart=[A.start,v[1]],this._model.selectionStartLength=A.length}}_selectToWordAt(v){let w=this._getWordAt(v,!0);if(w){let A=v[1];for(;w.start<0;)w.start+=this._bufferService.cols,A--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,A++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,A]}}_isCharWordSeparator(v){return v.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(v.getChars())>=0}_selectLineAt(v){let w=this._bufferService.buffer.getWrappedRangeForLine(v),A={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,d.getRangeLength)(A,this._bufferService.cols)}};s.SelectionService=b=a([l(3,_.IBufferService),l(4,_.ICoreService),l(5,y.IMouseService),l(6,_.IOptionsService),l(7,y.IRenderService),l(8,y.ICoreBrowserService)],b)},4725:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ILinkProviderService=s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;let a=o(8343);s.ICharSizeService=(0,a.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,a.createDecorator)("CoreBrowserService"),s.IMouseService=(0,a.createDecorator)("MouseService"),s.IRenderService=(0,a.createDecorator)("RenderService"),s.ISelectionService=(0,a.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,a.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,a.createDecorator)("ThemeService"),s.ILinkProviderService=(0,a.createDecorator)("LinkProviderService")},6731:function(i,s,o){var a=this&&this.__decorate||function(b,v,w,A){var T,k=arguments.length,I=k<3?v:A===null?A=Object.getOwnPropertyDescriptor(v,w):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(b,v,w,A);else for(var N=b.length-1;N>=0;N--)(T=b[N])&&(I=(k<3?T(I):k>3?T(v,w,I):T(v,w))||I);return k>3&&I&&Object.defineProperty(v,w,I),I},l=this&&this.__param||function(b,v){return function(w,A){v(w,A,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;let c=o(7239),p=o(8055),m=o(8460),y=o(844),g=o(2585),u=p.css.toColor("#ffffff"),f=p.css.toColor("#000000"),d=p.css.toColor("#ffffff"),h=p.css.toColor("#000000"),_={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let b=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],v=[0,95,135,175,215,255];for(let w=0;w<216;w++){let A=v[w/36%6|0],T=v[w/6%6|0],k=v[w%6];b.push({css:p.channels.toCss(A,T,k),rgba:p.channels.toRgba(A,T,k)})}for(let w=0;w<24;w++){let A=8+10*w;b.push({css:p.channels.toCss(A,A,A),rgba:p.channels.toRgba(A,A,A)})}return b})());let C=s.ThemeService=class extends y.Disposable{get colors(){return this._colors}constructor(b){super(),this._optionsService=b,this._contrastCache=new c.ColorContrastCache,this._halfContrastCache=new c.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:u,background:f,cursor:d,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:_,selectionBackgroundOpaque:p.color.blend(f,_),selectionInactiveBackgroundTransparent:_,selectionInactiveBackgroundOpaque:p.color.blend(f,_),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(b={}){let v=this._colors;if(v.foreground=S(b.foreground,u),v.background=S(b.background,f),v.cursor=S(b.cursor,d),v.cursorAccent=S(b.cursorAccent,h),v.selectionBackgroundTransparent=S(b.selectionBackground,_),v.selectionBackgroundOpaque=p.color.blend(v.background,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundTransparent=S(b.selectionInactiveBackground,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundOpaque=p.color.blend(v.background,v.selectionInactiveBackgroundTransparent),v.selectionForeground=b.selectionForeground?S(b.selectionForeground,p.NULL_COLOR):void 0,v.selectionForeground===p.NULL_COLOR&&(v.selectionForeground=void 0),p.color.isOpaque(v.selectionBackgroundTransparent)&&(v.selectionBackgroundTransparent=p.color.opacity(v.selectionBackgroundTransparent,.3)),p.color.isOpaque(v.selectionInactiveBackgroundTransparent)&&(v.selectionInactiveBackgroundTransparent=p.color.opacity(v.selectionInactiveBackgroundTransparent,.3)),v.ansi=s.DEFAULT_ANSI_COLORS.slice(),v.ansi[0]=S(b.black,s.DEFAULT_ANSI_COLORS[0]),v.ansi[1]=S(b.red,s.DEFAULT_ANSI_COLORS[1]),v.ansi[2]=S(b.green,s.DEFAULT_ANSI_COLORS[2]),v.ansi[3]=S(b.yellow,s.DEFAULT_ANSI_COLORS[3]),v.ansi[4]=S(b.blue,s.DEFAULT_ANSI_COLORS[4]),v.ansi[5]=S(b.magenta,s.DEFAULT_ANSI_COLORS[5]),v.ansi[6]=S(b.cyan,s.DEFAULT_ANSI_COLORS[6]),v.ansi[7]=S(b.white,s.DEFAULT_ANSI_COLORS[7]),v.ansi[8]=S(b.brightBlack,s.DEFAULT_ANSI_COLORS[8]),v.ansi[9]=S(b.brightRed,s.DEFAULT_ANSI_COLORS[9]),v.ansi[10]=S(b.brightGreen,s.DEFAULT_ANSI_COLORS[10]),v.ansi[11]=S(b.brightYellow,s.DEFAULT_ANSI_COLORS[11]),v.ansi[12]=S(b.brightBlue,s.DEFAULT_ANSI_COLORS[12]),v.ansi[13]=S(b.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),v.ansi[14]=S(b.brightCyan,s.DEFAULT_ANSI_COLORS[14]),v.ansi[15]=S(b.brightWhite,s.DEFAULT_ANSI_COLORS[15]),b.extendedAnsi){let w=Math.min(v.ansi.length-16,b.extendedAnsi.length);for(let A=0;A<w;A++)v.ansi[A+16]=S(b.extendedAnsi[A],s.DEFAULT_ANSI_COLORS[A+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(b){this._restoreColor(b),this._onChangeColors.fire(this.colors)}_restoreColor(b){if(b!==void 0)switch(b){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[b]=this._restoreColors.ansi[b]}else for(let v=0;v<this._restoreColors.ansi.length;++v)this._colors.ansi[v]=this._restoreColors.ansi[v]}modifyColors(b){b(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(b,v){if(b!==void 0)try{return p.css.toColor(b)}catch{}return v}s.ThemeService=C=a([l(0,g.IOptionsService)],C)},6349:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;let a=o(8460),l=o(844);class c extends l.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new a.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new a.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new a.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;let y=new Array(m);for(let g=0;g<Math.min(m,this.length);g++)y[g]=this._array[this._getCyclicIndex(g)];this._array=y,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let y=this._length;y<m;y++)this._array[y]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,y){this._array[this._getCyclicIndex(m)]=y}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,y,...g){if(y){for(let u=m;u<this._length-y;u++)this._array[this._getCyclicIndex(u)]=this._array[this._getCyclicIndex(u+y)];this._length-=y,this.onDeleteEmitter.fire({index:m,amount:y})}for(let u=this._length-1;u>=m;u--)this._array[this._getCyclicIndex(u+g.length)]=this._array[this._getCyclicIndex(u)];for(let u=0;u<g.length;u++)this._array[this._getCyclicIndex(m+u)]=g[u];if(g.length&&this.onInsertEmitter.fire({index:m,amount:g.length}),this._length+g.length>this._maxLength){let u=this._length+g.length-this._maxLength;this._startIndex+=u,this._length=this._maxLength,this.onTrimEmitter.fire(u)}else this._length+=g.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,y,g){if(!(y<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let f=y-1;f>=0;f--)this.set(m+f+g,this.get(m+f));let u=m+y+g-this._length;if(u>0)for(this._length+=u;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let u=0;u<y;u++)this.set(m+u+g,this.get(m+u))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}s.CircularList=c},1439:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function o(a,l=5){if(typeof a!="object")return a;let c=Array.isArray(a)?[]:{};for(let p in a)c[p]=l<=1?a[p]:a[p]&&o(a[p],l-1);return c}},8055:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let o=0,a=0,l=0,c=0;var p,m,y,g,u;function f(h){let _=h.toString(16);return _.length<2?"0"+_:_}function d(h,_){return h<_?(_+.05)/(h+.05):(h+.05)/(_+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(h){h.toCss=function(_,C,S,b){return b!==void 0?`#${f(_)}${f(C)}${f(S)}${f(b)}`:`#${f(_)}${f(C)}${f(S)}`},h.toRgba=function(_,C,S,b=255){return(_<<24|C<<16|S<<8|b)>>>0},h.toColor=function(_,C,S,b){return{css:h.toCss(_,C,S,b),rgba:h.toRgba(_,C,S,b)}}}(p||(s.channels=p={})),function(h){function _(C,S){return c=Math.round(255*S),[o,a,l]=u.toChannels(C.rgba),{css:p.toCss(o,a,l,c),rgba:p.toRgba(o,a,l,c)}}h.blend=function(C,S){if(c=(255&S.rgba)/255,c===1)return{css:S.css,rgba:S.rgba};let b=S.rgba>>24&255,v=S.rgba>>16&255,w=S.rgba>>8&255,A=C.rgba>>24&255,T=C.rgba>>16&255,k=C.rgba>>8&255;return o=A+Math.round((b-A)*c),a=T+Math.round((v-T)*c),l=k+Math.round((w-k)*c),{css:p.toCss(o,a,l),rgba:p.toRgba(o,a,l)}},h.isOpaque=function(C){return(255&C.rgba)==255},h.ensureContrastRatio=function(C,S,b){let v=u.ensureContrastRatio(C.rgba,S.rgba,b);if(v)return p.toColor(v>>24&255,v>>16&255,v>>8&255)},h.opaque=function(C){let S=(255|C.rgba)>>>0;return[o,a,l]=u.toChannels(S),{css:p.toCss(o,a,l),rgba:S}},h.opacity=_,h.multiplyOpacity=function(C,S){return c=255&C.rgba,_(C,c*S/255)},h.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}}(m||(s.color=m={})),function(h){let _,C;try{let S=document.createElement("canvas");S.width=1,S.height=1;let b=S.getContext("2d",{willReadFrequently:!0});b&&(_=b,_.globalCompositeOperation="copy",C=_.createLinearGradient(0,0,1,1))}catch{}h.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return o=parseInt(S.slice(1,2).repeat(2),16),a=parseInt(S.slice(2,3).repeat(2),16),l=parseInt(S.slice(3,4).repeat(2),16),p.toColor(o,a,l);case 5:return o=parseInt(S.slice(1,2).repeat(2),16),a=parseInt(S.slice(2,3).repeat(2),16),l=parseInt(S.slice(3,4).repeat(2),16),c=parseInt(S.slice(4,5).repeat(2),16),p.toColor(o,a,l,c);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}let b=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return o=parseInt(b[1]),a=parseInt(b[2]),l=parseInt(b[3]),c=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),p.toColor(o,a,l,c);if(!_||!C)throw new Error("css.toColor: Unsupported css format");if(_.fillStyle=C,_.fillStyle=S,typeof _.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(_.fillRect(0,0,1,1),[o,a,l,c]=_.getImageData(0,0,1,1).data,c!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,a,l,c),css:S}}}(y||(s.css=y={})),function(h){function _(C,S,b){let v=C/255,w=S/255,A=b/255;return .2126*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}h.relativeLuminance=function(C){return _(C>>16&255,C>>8&255,255&C)},h.relativeLuminance2=_}(g||(s.rgb=g={})),function(h){function _(S,b,v){let w=S>>24&255,A=S>>16&255,T=S>>8&255,k=b>>24&255,I=b>>16&255,N=b>>8&255,V=d(g.relativeLuminance2(k,I,N),g.relativeLuminance2(w,A,T));for(;V<v&&(k>0||I>0||N>0);)k-=Math.max(0,Math.ceil(.1*k)),I-=Math.max(0,Math.ceil(.1*I)),N-=Math.max(0,Math.ceil(.1*N)),V=d(g.relativeLuminance2(k,I,N),g.relativeLuminance2(w,A,T));return(k<<24|I<<16|N<<8|255)>>>0}function C(S,b,v){let w=S>>24&255,A=S>>16&255,T=S>>8&255,k=b>>24&255,I=b>>16&255,N=b>>8&255,V=d(g.relativeLuminance2(k,I,N),g.relativeLuminance2(w,A,T));for(;V<v&&(k<255||I<255||N<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),I=Math.min(255,I+Math.ceil(.1*(255-I))),N=Math.min(255,N+Math.ceil(.1*(255-N))),V=d(g.relativeLuminance2(k,I,N),g.relativeLuminance2(w,A,T));return(k<<24|I<<16|N<<8|255)>>>0}h.blend=function(S,b){if(c=(255&b)/255,c===1)return b;let v=b>>24&255,w=b>>16&255,A=b>>8&255,T=S>>24&255,k=S>>16&255,I=S>>8&255;return o=T+Math.round((v-T)*c),a=k+Math.round((w-k)*c),l=I+Math.round((A-I)*c),p.toRgba(o,a,l)},h.ensureContrastRatio=function(S,b,v){let w=g.relativeLuminance(S>>8),A=g.relativeLuminance(b>>8);if(d(w,A)<v){if(A<w){let I=_(S,b,v),N=d(w,g.relativeLuminance(I>>8));if(N<v){let V=C(S,b,v);return N>d(w,g.relativeLuminance(V>>8))?I:V}return I}let T=C(S,b,v),k=d(w,g.relativeLuminance(T>>8));if(k<v){let I=_(S,b,v);return k>d(w,g.relativeLuminance(I>>8))?T:I}return T}},h.reduceLuminance=_,h.increaseLuminance=C,h.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]}}(u||(s.rgba=u={})),s.toPaddedHex=f,s.contrastRatio=d},8969:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;let a=o(844),l=o(2585),c=o(4348),p=o(7866),m=o(744),y=o(7302),g=o(6975),u=o(8460),f=o(1753),d=o(1480),h=o(7994),_=o(9282),C=o(5435),S=o(5981),b=o(2660),v=!1;class w extends a.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new u.EventEmitter),this._onScroll.event(T=>{this._onScrollApi?.fire(T.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(T){for(let k in T)this.optionsService.options[k]=T[k]}constructor(T){super(),this._windowsWrappingHeuristics=this.register(new a.MutableDisposable),this._onBinary=this.register(new u.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new u.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new u.EventEmitter),this._instantiationService=new c.InstantiationService,this.optionsService=this.register(new y.OptionsService(T)),this._instantiationService.setService(l.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(l.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(l.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(l.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(f.CoreMouseService)),this._instantiationService.setService(l.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(d.UnicodeService)),this._instantiationService.setService(l.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(l.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(b.OscLinkService),this._instantiationService.setService(l.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,u.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,u.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,u.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,u.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((k,I)=>this._inputHandler.parse(k,I))),this.register((0,u.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(T,k){this._writeBuffer.write(T,k)}writeSync(T,k){this._logService.logLevel<=l.LogLevelEnum.WARN&&!v&&(this._logService.warn("writeSync is unreliable and will be removed soon."),v=!0),this._writeBuffer.writeSync(T,k)}input(T,k=!0){this.coreService.triggerDataEvent(T,k)}resize(T,k){isNaN(T)||isNaN(k)||(T=Math.max(T,m.MINIMUM_COLS),k=Math.max(k,m.MINIMUM_ROWS),this._bufferService.resize(T,k))}scroll(T,k=!1){this._bufferService.scroll(T,k)}scrollLines(T,k,I){this._bufferService.scrollLines(T,k,I)}scrollPages(T){this.scrollLines(T*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(T){let k=T-this._bufferService.buffer.ydisp;k!==0&&this.scrollLines(k)}registerEscHandler(T,k){return this._inputHandler.registerEscHandler(T,k)}registerDcsHandler(T,k){return this._inputHandler.registerDcsHandler(T,k)}registerCsiHandler(T,k){return this._inputHandler.registerCsiHandler(T,k)}registerOscHandler(T,k){return this._inputHandler.registerOscHandler(T,k)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let T=!1,k=this.optionsService.rawOptions.windowsPty;k&&k.buildNumber!==void 0&&k.buildNumber!==void 0?T=k.backend==="conpty"&&k.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(T=!0),T?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let T=[];T.push(this.onLineFeed(_.updateWindowsModeWrappedState.bind(null,this._bufferService))),T.push(this.registerCsiHandler({final:"H"},()=>((0,_.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,a.toDisposable)(()=>{for(let k of T)k.dispose()})}}}s.CoreTerminal=w},8460:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.runAndSubscribe=s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===o)return void this._listeners.splice(a,1)}}})),this._event}fire(o,a){let l=[];for(let c=0;c<this._listeners.length;c++)l.push(this._listeners[c]);for(let c=0;c<l.length;c++)l[c].call(void 0,o,a)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(o,a){return o(l=>a.fire(l))},s.runAndSubscribe=function(o,a){return a(void 0),o(l=>a(l))}},5435:function(i,s,o){var a=this&&this.__decorate||function(H,D,M,x){var R,B=arguments.length,W=B<3?D:x===null?x=Object.getOwnPropertyDescriptor(D,M):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(H,D,M,x);else for(var te=H.length-1;te>=0;te--)(R=H[te])&&(W=(B<3?R(W):B>3?R(D,M,W):R(D,M))||W);return B>3&&W&&Object.defineProperty(D,M,W),W},l=this&&this.__param||function(H,D){return function(M,x){D(M,x,H)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;let c=o(2584),p=o(7116),m=o(2015),y=o(844),g=o(482),u=o(8437),f=o(8460),d=o(643),h=o(511),_=o(3734),C=o(2585),S=o(1480),b=o(6242),v=o(6351),w=o(5941),A={"(":0,")":1,"*":2,"+":3,"-":1,".":2},T=131072;function k(H,D){if(H>24)return D.setWinLines||!1;switch(H){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var I;(function(H){H[H.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",H[H.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(I||(s.WindowsOptionsReportType=I={}));let N=0;class V extends y.Disposable{getAttrData(){return this._curAttrData}constructor(D,M,x,R,B,W,te,re,O=new m.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=M,this._coreService=x,this._logService=R,this._optionsService=B,this._oscLinkService=W,this._coreMouseService=te,this._unicodeService=re,this._parser=O,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new f.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new f.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new f.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new f.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new f.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new f.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new f.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new f.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new f.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new f.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new f.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new f.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new U(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._parser.setCsiHandlerFallback((E,F)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(E),params:F.toArray()})}),this._parser.setEscHandlerFallback(E=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(E)})}),this._parser.setExecuteHandlerFallback(E=>{this._logService.debug("Unknown EXECUTE code: ",{code:E})}),this._parser.setOscHandlerFallback((E,F,j)=>{this._logService.debug("Unknown OSC code: ",{identifier:E,action:F,data:j})}),this._parser.setDcsHandlerFallback((E,F,j)=>{F==="HOOK"&&(j=j.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(E),action:F,payload:j})}),this._parser.setPrintHandler((E,F,j)=>this.print(E,F,j)),this._parser.registerCsiHandler({final:"@"},E=>this.insertChars(E)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},E=>this.scrollLeft(E)),this._parser.registerCsiHandler({final:"A"},E=>this.cursorUp(E)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},E=>this.scrollRight(E)),this._parser.registerCsiHandler({final:"B"},E=>this.cursorDown(E)),this._parser.registerCsiHandler({final:"C"},E=>this.cursorForward(E)),this._parser.registerCsiHandler({final:"D"},E=>this.cursorBackward(E)),this._parser.registerCsiHandler({final:"E"},E=>this.cursorNextLine(E)),this._parser.registerCsiHandler({final:"F"},E=>this.cursorPrecedingLine(E)),this._parser.registerCsiHandler({final:"G"},E=>this.cursorCharAbsolute(E)),this._parser.registerCsiHandler({final:"H"},E=>this.cursorPosition(E)),this._parser.registerCsiHandler({final:"I"},E=>this.cursorForwardTab(E)),this._parser.registerCsiHandler({final:"J"},E=>this.eraseInDisplay(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},E=>this.eraseInDisplay(E,!0)),this._parser.registerCsiHandler({final:"K"},E=>this.eraseInLine(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},E=>this.eraseInLine(E,!0)),this._parser.registerCsiHandler({final:"L"},E=>this.insertLines(E)),this._parser.registerCsiHandler({final:"M"},E=>this.deleteLines(E)),this._parser.registerCsiHandler({final:"P"},E=>this.deleteChars(E)),this._parser.registerCsiHandler({final:"S"},E=>this.scrollUp(E)),this._parser.registerCsiHandler({final:"T"},E=>this.scrollDown(E)),this._parser.registerCsiHandler({final:"X"},E=>this.eraseChars(E)),this._parser.registerCsiHandler({final:"Z"},E=>this.cursorBackwardTab(E)),this._parser.registerCsiHandler({final:"`"},E=>this.charPosAbsolute(E)),this._parser.registerCsiHandler({final:"a"},E=>this.hPositionRelative(E)),this._parser.registerCsiHandler({final:"b"},E=>this.repeatPrecedingCharacter(E)),this._parser.registerCsiHandler({final:"c"},E=>this.sendDeviceAttributesPrimary(E)),this._parser.registerCsiHandler({prefix:">",final:"c"},E=>this.sendDeviceAttributesSecondary(E)),this._parser.registerCsiHandler({final:"d"},E=>this.linePosAbsolute(E)),this._parser.registerCsiHandler({final:"e"},E=>this.vPositionRelative(E)),this._parser.registerCsiHandler({final:"f"},E=>this.hVPosition(E)),this._parser.registerCsiHandler({final:"g"},E=>this.tabClear(E)),this._parser.registerCsiHandler({final:"h"},E=>this.setMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"h"},E=>this.setModePrivate(E)),this._parser.registerCsiHandler({final:"l"},E=>this.resetMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"l"},E=>this.resetModePrivate(E)),this._parser.registerCsiHandler({final:"m"},E=>this.charAttributes(E)),this._parser.registerCsiHandler({final:"n"},E=>this.deviceStatus(E)),this._parser.registerCsiHandler({prefix:"?",final:"n"},E=>this.deviceStatusPrivate(E)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},E=>this.softReset(E)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},E=>this.setCursorStyle(E)),this._parser.registerCsiHandler({final:"r"},E=>this.setScrollRegion(E)),this._parser.registerCsiHandler({final:"s"},E=>this.saveCursor(E)),this._parser.registerCsiHandler({final:"t"},E=>this.windowOptions(E)),this._parser.registerCsiHandler({final:"u"},E=>this.restoreCursor(E)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},E=>this.insertColumns(E)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},E=>this.deleteColumns(E)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},E=>this.selectProtected(E)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},E=>this.requestMode(E,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},E=>this.requestMode(E,!1)),this._parser.setExecuteHandler(c.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(c.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(c.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(c.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(c.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(c.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(c.C1.IND,()=>this.index()),this._parser.setExecuteHandler(c.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(c.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new b.OscHandler(E=>(this.setTitle(E),this.setIconName(E),!0))),this._parser.registerOscHandler(1,new b.OscHandler(E=>this.setIconName(E))),this._parser.registerOscHandler(2,new b.OscHandler(E=>this.setTitle(E))),this._parser.registerOscHandler(4,new b.OscHandler(E=>this.setOrReportIndexedColor(E))),this._parser.registerOscHandler(8,new b.OscHandler(E=>this.setHyperlink(E))),this._parser.registerOscHandler(10,new b.OscHandler(E=>this.setOrReportFgColor(E))),this._parser.registerOscHandler(11,new b.OscHandler(E=>this.setOrReportBgColor(E))),this._parser.registerOscHandler(12,new b.OscHandler(E=>this.setOrReportCursorColor(E))),this._parser.registerOscHandler(104,new b.OscHandler(E=>this.restoreIndexedColor(E))),this._parser.registerOscHandler(110,new b.OscHandler(E=>this.restoreFgColor(E))),this._parser.registerOscHandler(111,new b.OscHandler(E=>this.restoreBgColor(E))),this._parser.registerOscHandler(112,new b.OscHandler(E=>this.restoreCursorColor(E))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let E in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:E},()=>this.selectCharset("("+E)),this._parser.registerEscHandler({intermediates:")",final:E},()=>this.selectCharset(")"+E)),this._parser.registerEscHandler({intermediates:"*",final:E},()=>this.selectCharset("*"+E)),this._parser.registerEscHandler({intermediates:"+",final:E},()=>this.selectCharset("+"+E)),this._parser.registerEscHandler({intermediates:"-",final:E},()=>this.selectCharset("-"+E)),this._parser.registerEscHandler({intermediates:".",final:E},()=>this.selectCharset("."+E)),this._parser.registerEscHandler({intermediates:"/",final:E},()=>this.selectCharset("/"+E));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(E=>(this._logService.error("Parsing error: ",E),E)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new v.DcsHandler((E,F)=>this.requestStatusString(E,F)))}_preserveStack(D,M,x,R){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=M,this._parseStack.decodedLength=x,this._parseStack.position=R}_logSlowResolvingAsync(D){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([D,new Promise((M,x)=>setTimeout(()=>x("#SLOW_TIMEOUT"),5e3))]).catch(M=>{if(M!=="#SLOW_TIMEOUT")throw M;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,M){let x,R=this._activeBuffer.x,B=this._activeBuffer.y,W=0,te=this._parseStack.paused;if(te){if(x=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,M))return this._logSlowResolvingAsync(x),x;R=this._parseStack.cursorStartX,B=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>T&&(W=this._parseStack.position+T)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,E=>String.fromCharCode(E)).join("")}"`),typeof D=="string"?D.split("").map(E=>E.charCodeAt(0)):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<T&&(this._parseBuffer=new Uint32Array(Math.min(D.length,T))),te||this._dirtyRowTracker.clearRange(),D.length>T)for(let E=W;E<D.length;E+=T){let F=E+T<D.length?E+T:D.length,j=typeof D=="string"?this._stringDecoder.decode(D.substring(E,F),this._parseBuffer):this._utf8Decoder.decode(D.subarray(E,F),this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,j))return this._preserveStack(R,B,j,E),this._logSlowResolvingAsync(x),x}else if(!te){let E=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,E))return this._preserveStack(R,B,E,0),this._logSlowResolvingAsync(x),x}this._activeBuffer.x===R&&this._activeBuffer.y===B||this._onCursorMove.fire();let re=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),O=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);O<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(O,this._bufferService.rows-1),Math.min(re,this._bufferService.rows-1))}print(D,M,x){let R,B,W=this._charsetService.charset,te=this._optionsService.rawOptions.screenReaderMode,re=this._bufferService.cols,O=this._coreService.decPrivateModes.wraparound,E=this._coreService.modes.insertMode,F=this._curAttrData,j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&x-M>0&&j.getWidth(this._activeBuffer.x-1)===2&&j.setCellFromCodepoint(this._activeBuffer.x-1,0,1,F);let q=this._parser.precedingJoinState;for(let z=M;z<x;++z){if(R=D[z],R<127&&W){let at=W[String.fromCharCode(R)];at&&(R=at.charCodeAt(0))}let Se=this._unicodeService.charProperties(R,q);B=S.UnicodeService.extractWidth(Se);let ke=S.UnicodeService.extractShouldJoin(Se),Oe=ke?S.UnicodeService.extractWidth(q):0;if(q=Se,te&&this._onA11yChar.fire((0,g.stringFromCodePoint)(R)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+B-Oe>re){if(O){let at=j,ae=this._activeBuffer.x-Oe;for(this._activeBuffer.x=Oe,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),Oe>0&&j instanceof u.BufferLine&&j.copyCellsFrom(at,ae,0,Oe,!1);ae<re;)at.setCellFromCodepoint(ae++,0,1,F)}else if(this._activeBuffer.x=re-1,B===2)continue}if(ke&&this._activeBuffer.x){let at=j.getWidth(this._activeBuffer.x-1)?1:2;j.addCodepointToCell(this._activeBuffer.x-at,R,B);for(let ae=B-Oe;--ae>=0;)j.setCellFromCodepoint(this._activeBuffer.x++,0,0,F)}else if(E&&(j.insertCells(this._activeBuffer.x,B-Oe,this._activeBuffer.getNullCell(F)),j.getWidth(re-1)===2&&j.setCellFromCodepoint(re-1,d.NULL_CELL_CODE,d.NULL_CELL_WIDTH,F)),j.setCellFromCodepoint(this._activeBuffer.x++,R,B,F),B>0)for(;--B;)j.setCellFromCodepoint(this._activeBuffer.x++,0,0,F)}this._parser.precedingJoinState=q,this._activeBuffer.x<re&&x-M>0&&j.getWidth(this._activeBuffer.x)===0&&!j.hasContent(this._activeBuffer.x)&&j.setCellFromCodepoint(this._activeBuffer.x,0,1,F),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,M){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,M):this._parser.registerCsiHandler(D,x=>!k(x.params[0],this._optionsService.rawOptions.windowOptions)||M(x))}registerDcsHandler(D,M){return this._parser.registerDcsHandler(D,new v.DcsHandler(M))}registerEscHandler(D,M){return this._parser.registerEscHandler(D,M)}registerOscHandler(D,M){return this._parser.registerOscHandler(D,new b.OscHandler(M))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);D.hasWidth(this._activeBuffer.x)&&!D.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,M){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+M):(this._activeBuffer.x=D,this._activeBuffer.y=M),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,M){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+M)}cursorUp(D){let M=this._activeBuffer.y-this._activeBuffer.scrollTop;return M>=0?this._moveCursor(0,-Math.min(M,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){let M=this._activeBuffer.scrollBottom-this._activeBuffer.y;return M>=0?this._moveCursor(0,Math.min(M,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){let M=D.params[0];return M===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:M===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=D.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=D.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){let M=D.params[0];return M===1&&(this._curAttrData.bg|=536870912),M!==2&&M!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,M,x,R=!1,B=!1){let W=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);W.replaceCells(M,x,this._activeBuffer.getNullCell(this._eraseAttrData()),B),R&&(W.isWrapped=!1)}_resetBufferLine(D,M=!1){let x=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);x&&(x.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),M),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),x.isWrapped=!1)}eraseInDisplay(D,M=!1){let x;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);x<this._bufferService.rows;x++)this._resetBufferLine(x,M);this._dirtyRowTracker.markDirty(x);break;case 1:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x,0,this._activeBuffer.x+1,!0,M),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(x+1).isWrapped=!1);x--;)this._resetBufferLine(x,M);this._dirtyRowTracker.markDirty(0);break;case 2:for(x=this._bufferService.rows,this._dirtyRowTracker.markDirty(x-1);x--;)this._resetBufferLine(x,M);this._dirtyRowTracker.markDirty(0);break;case 3:let R=this._activeBuffer.lines.length-this._bufferService.rows;R>0&&(this._activeBuffer.lines.trimStart(R),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-R,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-R,0),this._onScroll.fire(0))}return!0}eraseInLine(D,M=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,M);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,M)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let M=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,R=this._bufferService.rows-1-this._activeBuffer.scrollBottom,B=this._bufferService.rows-1+this._activeBuffer.ybase-R+1;for(;M--;)this._activeBuffer.lines.splice(B-1,1),this._activeBuffer.lines.splice(x,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let M=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,R;for(R=this._bufferService.rows-1-this._activeBuffer.scrollBottom,R=this._bufferService.rows-1+this._activeBuffer.ybase-R;M--;)this._activeBuffer.lines.splice(x,1),this._activeBuffer.lines.splice(R,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let M=D.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let M=D.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(u.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);R.deleteCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);R.insertCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);R.insertCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);R.deleteCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){let M=this._parser.precedingJoinState;if(!M)return!0;let x=D.params[0]||1,R=S.UnicodeService.extractWidth(M),B=this._activeBuffer.x-R,W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(B),te=new Uint32Array(W.length*x),re=0;for(let E=0;E<W.length;){let F=W.codePointAt(E)||0;te[re++]=F,E+=F>65535?2:1}let O=re;for(let E=1;E<x;++E)te.copyWithin(O,0,re),O+=re;return this.print(te,0,O),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(c.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(c.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(c.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(c.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(c.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[M]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,M){let x=this._coreService.decPrivateModes,{activeProtocol:R,activeEncoding:B}=this._coreMouseService,W=this._coreService,{buffers:te,cols:re}=this._bufferService,{active:O,alt:E}=te,F=this._optionsService.rawOptions,j=ke=>ke?1:2,q=D.params[0];return z=q,Se=M?q===2?4:q===4?j(W.modes.insertMode):q===12?3:q===20?j(F.convertEol):0:q===1?j(x.applicationCursorKeys):q===3?F.windowOptions.setWinLines?re===80?2:re===132?1:0:0:q===6?j(x.origin):q===7?j(x.wraparound):q===8?3:q===9?j(R==="X10"):q===12?j(F.cursorBlink):q===25?j(!W.isCursorHidden):q===45?j(x.reverseWraparound):q===66?j(x.applicationKeypad):q===67?4:q===1e3?j(R==="VT200"):q===1002?j(R==="DRAG"):q===1003?j(R==="ANY"):q===1004?j(x.sendFocus):q===1005?4:q===1006?j(B==="SGR"):q===1015?4:q===1016?j(B==="SGR_PIXELS"):q===1048?1:q===47||q===1047||q===1049?j(O===E):q===2004?j(x.bracketedPasteMode):0,W.triggerDataEvent(`${c.C0.ESC}[${M?"":"?"}${z};${Se}$y`),!0;var z,Se}_updateAttrColor(D,M,x,R,B){return M===2?(D|=50331648,D&=-16777216,D|=_.AttributeData.fromColorRGB([x,R,B])):M===5&&(D&=-50331904,D|=33554432|255&x),D}_extractColor(D,M,x){let R=[0,0,-1,0,0,0],B=0,W=0;do{if(R[W+B]=D.params[M+W],D.hasSubParams(M+W)){let te=D.getSubParams(M+W),re=0;do R[1]===5&&(B=1),R[W+re+1+B]=te[re];while(++re<te.length&&re+W+1+B<R.length);break}if(R[1]===5&&W+B>=2||R[1]===2&&W+B>=5)break;R[1]&&(B=1)}while(++W+M<D.length&&W+B<R.length);for(let te=2;te<R.length;++te)R[te]===-1&&(R[te]=0);switch(R[0]){case 38:x.fg=this._updateAttrColor(x.fg,R[1],R[3],R[4],R[5]);break;case 48:x.bg=this._updateAttrColor(x.bg,R[1],R[3],R[4],R[5]);break;case 58:x.extended=x.extended.clone(),x.extended.underlineColor=this._updateAttrColor(x.extended.underlineColor,R[1],R[3],R[4],R[5])}return W}_processUnderline(D,M){M.extended=M.extended.clone(),(!~D||D>5)&&(D=1),M.extended.underlineStyle=D,M.fg|=268435456,D===0&&(M.fg&=-268435457),M.updateExtended()}_processSGR0(D){D.fg=u.DEFAULT_ATTR_DATA.fg,D.bg=u.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;let M=D.length,x,R=this._curAttrData;for(let B=0;B<M;B++)x=D.params[B],x>=30&&x<=37?(R.fg&=-50331904,R.fg|=16777216|x-30):x>=40&&x<=47?(R.bg&=-50331904,R.bg|=16777216|x-40):x>=90&&x<=97?(R.fg&=-50331904,R.fg|=16777224|x-90):x>=100&&x<=107?(R.bg&=-50331904,R.bg|=16777224|x-100):x===0?this._processSGR0(R):x===1?R.fg|=134217728:x===3?R.bg|=67108864:x===4?(R.fg|=268435456,this._processUnderline(D.hasSubParams(B)?D.getSubParams(B)[0]:1,R)):x===5?R.fg|=536870912:x===7?R.fg|=67108864:x===8?R.fg|=1073741824:x===9?R.fg|=2147483648:x===2?R.bg|=134217728:x===21?this._processUnderline(2,R):x===22?(R.fg&=-134217729,R.bg&=-134217729):x===23?R.bg&=-67108865:x===24?(R.fg&=-268435457,this._processUnderline(0,R)):x===25?R.fg&=-536870913:x===27?R.fg&=-67108865:x===28?R.fg&=-1073741825:x===29?R.fg&=2147483647:x===39?(R.fg&=-67108864,R.fg|=16777215&u.DEFAULT_ATTR_DATA.fg):x===49?(R.bg&=-67108864,R.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):x===38||x===48||x===58?B+=this._extractColor(D,B,R):x===53?R.bg|=1073741824:x===55?R.bg&=-1073741825:x===59?(R.extended=R.extended.clone(),R.extended.underlineColor=-1,R.updateExtended()):x===100?(R.fg&=-67108864,R.fg|=16777215&u.DEFAULT_ATTR_DATA.fg,R.bg&=-67108864,R.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",x);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${c.C0.ESC}[0n`);break;case 6:let M=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[${M};${x}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){let M=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[?${M};${x}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){let M=D.params[0]||1;switch(M){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let x=M%2==1;return this._optionsService.options.cursorBlink=x,!0}setScrollRegion(D){let M=D.params[0]||1,x;return(D.length<2||(x=D.params[1])>this._bufferService.rows||x===0)&&(x=this._bufferService.rows),x>M&&(this._activeBuffer.scrollTop=M-1,this._activeBuffer.scrollBottom=x-1,this._setCursor(0,0)),!0}windowOptions(D){if(!k(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;let M=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:M!==2&&this._onRequestWindowsOptionsReport.fire(I.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(I.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${c.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:M!==0&&M!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),M!==0&&M!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:M!==0&&M!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),M!==0&&M!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){let M=[],x=D.split(";");for(;x.length>1;){let R=x.shift(),B=x.shift();if(/^\d+$/.exec(R)){let W=parseInt(R);if(Y(W))if(B==="?")M.push({type:0,index:W});else{let te=(0,w.parseColor)(B);te&&M.push({type:1,index:W,color:te})}}}return M.length&&this._onColor.fire(M),!0}setHyperlink(D){let M=D.split(";");return!(M.length<2)&&(M[1]?this._createHyperlink(M[0],M[1]):!M[0]&&this._finishHyperlink())}_createHyperlink(D,M){this._getCurrentLinkId()&&this._finishHyperlink();let x=D.split(":"),R,B=x.findIndex(W=>W.startsWith("id="));return B!==-1&&(R=x[B].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:R,uri:M}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,M){let x=D.split(";");for(let R=0;R<x.length&&!(M>=this._specialColors.length);++R,++M)if(x[R]==="?")this._onColor.fire([{type:0,index:this._specialColors[M]}]);else{let B=(0,w.parseColor)(x[R]);B&&this._onColor.fire([{type:1,index:this._specialColors[M],color:B}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;let M=[],x=D.split(";");for(let R=0;R<x.length;++R)if(/^\d+$/.exec(x[R])){let B=parseInt(x[R]);Y(B)&&M.push({type:2,index:B})}return M.length&&this._onColor.fire(M),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(A[D[0]],p.CHARSETS[D[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){let D=new h.CellData;D.content=4194373,D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let M=0;M<this._bufferService.rows;++M){let x=this._activeBuffer.ybase+this._activeBuffer.y+M,R=this._activeBuffer.lines.get(x);R&&(R.fill(D),R.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,M){let x=this._bufferService.buffer,R=this._optionsService.rawOptions;return(B=>(this._coreService.triggerDataEvent(`${c.C0.ESC}${B}${c.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${x.scrollTop+1};${x.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[R.cursorStyle]-(R.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,M){this._dirtyRowTracker.markRangeDirty(D,M)}}s.InputHandler=V;let U=class{constructor(H){this._bufferService=H,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(H){H<this.start?this.start=H:H>this.end&&(this.end=H)}markRangeDirty(H,D){H>D&&(N=H,H=D,D=N),H<this.start&&(this.start=H),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Y(H){return 0<=H&&H<256}U=a([l(0,C.IBufferService)],U)},844:(i,s)=>{function o(a){for(let l of a)l.dispose();a.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let l=this._disposables.indexOf(a);l!==-1&&this._disposables.splice(l,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(a){this._isDisposed||a===this._value||(this._value?.dispose(),this._value=a)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},s.toDisposable=function(a){return{dispose:a}},s.disposeArray=o,s.getDisposeArrayDisposable=function(a){return{dispose:()=>o(a)}}},1505:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(l,c,p){this._data[l]||(this._data[l]={}),this._data[l][c]=p}get(l,c){return this._data[l]?this._data[l][c]:void 0}clear(){this._data={}}}s.TwoKeyMap=o,s.FourKeyMap=class{constructor(){this._data=new o}set(a,l,c,p,m){this._data.get(a,l)||this._data.set(a,l,new o),this._data.get(a,l).set(c,p,m)}get(a,l,c,p){return this._data.get(a,l)?.get(c,p)}clear(){this._data.clear()}}},6114:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof process<"u"&&"title"in process;let o=s.isNode?"node":navigator.userAgent,a=s.isNode?"node":navigator.platform;s.isFirefox=o.includes("Firefox"),s.isLegacyEdge=o.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(o),s.getSafariVersion=function(){if(!s.isSafari)return 0;let l=o.match(/Version\/(\d+)/);return l===null||l.length<2?0:parseInt(l[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),s.isIpad=a==="iPad",s.isIphone=a==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),s.isLinux=a.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(o)},6106:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let o=0;s.SortedList=class{constructor(a){this._getKey=a,this._array=[]}clear(){this._array.length=0}insert(a){this._array.length!==0?(o=this._search(this._getKey(a)),this._array.splice(o,0,a)):this._array.push(a)}delete(a){if(this._array.length===0)return!1;let l=this._getKey(a);if(l===void 0||(o=this._search(l),o===-1)||this._getKey(this._array[o])!==l)return!1;do if(this._array[o]===a)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===l);return!1}*getKeyIterator(a){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===a)}forEachByKey(a,l){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do l(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===a)}values(){return[...this._array].values()}_search(a){let l=0,c=this._array.length-1;for(;c>=l;){let p=l+c>>1,m=this._getKey(this._array[p]);if(m>a)c=p-1;else{if(!(m<a)){for(;p>0&&this._getKey(this._array[p-1])===a;)p--;return p}l=p+1}}return l}}},7226:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;let a=o(6114);class l{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let y=0,g=0,u=m.timeRemaining(),f=0;for(;this._i<this._tasks.length;){if(y=Date.now(),this._tasks[this._i]()||this._i++,y=Math.max(1,Date.now()-y),g=Math.max(y,g),f=m.timeRemaining(),1.5*g>f)return u-y<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(u-y))}ms`),void this._start();u=f}this.clear()}}class c extends l{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){let y=Date.now()+m;return{timeRemaining:()=>Math.max(0,y-Date.now())}}}s.PriorityTaskQueue=c,s.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends l{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:c,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;let a=o(643);s.updateWindowsModeWrappedState=function(l){let c=l.buffer.lines.get(l.buffer.ybase+l.buffer.y-1),p=c?.get(l.cols-1),m=l.buffer.lines.get(l.buffer.ybase+l.buffer.y);m&&p&&(m.isWrapped=p[a.CHAR_DATA_CODE_INDEX]!==a.NULL_CELL_CODE&&p[a.CHAR_DATA_CODE_INDEX]!==a.WHITESPACE_CELL_CODE)}},3734:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(c){return[c>>>16&255,c>>>8&255,255&c]}static fromColorRGB(c){return(255&c[0])<<16|(255&c[1])<<8|255&c[2]}clone(){let c=new o;return c.fg=this.fg,c.bg=this.bg,c.extended=this.extended.clone(),c}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}s.AttributeData=o;class a{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(c){this._ext=c}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(c){this._ext&=-469762049,this._ext|=c<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(c){this._ext&=-67108864,this._ext|=67108863&c}get urlId(){return this._urlId}set urlId(c){this._urlId=c}get underlineVariantOffset(){let c=(3758096384&this._ext)>>29;return c<0?4294967288^c:c}set underlineVariantOffset(c){this._ext&=536870911,this._ext|=c<<29&3758096384}constructor(c=0,p=0){this._ext=0,this._urlId=0,this._ext=c,this._urlId=p}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=a},9092:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;let a=o(6349),l=o(7226),c=o(3734),p=o(8437),m=o(4634),y=o(511),g=o(643),u=o(4863),f=o(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(d,h,_){this._hasScrollback=d,this._optionsService=h,this._bufferService=_,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=f.DEFAULT_CHARSET,this.markers=[],this._nullCell=y.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=y.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new l.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(d){return d?(this._nullCell.fg=d.fg,this._nullCell.bg=d.bg,this._nullCell.extended=d.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new c.ExtendedAttrs),this._nullCell}getWhitespaceCell(d){return d?(this._whitespaceCell.fg=d.fg,this._whitespaceCell.bg=d.bg,this._whitespaceCell.extended=d.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new c.ExtendedAttrs),this._whitespaceCell}getBlankLine(d,h){return new p.BufferLine(this._bufferService.cols,this.getNullCell(d),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let d=this.ybase+this.y-this.ydisp;return d>=0&&d<this._rows}_getCorrectBufferLength(d){if(!this._hasScrollback)return d;let h=d+this._optionsService.rawOptions.scrollback;return h>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:h}fillViewportRows(d){if(this.lines.length===0){d===void 0&&(d=p.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(d))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(d,h){let _=this.getNullCell(p.DEFAULT_ATTR_DATA),C=0,S=this._getCorrectBufferLength(h);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<d)for(let v=0;v<this.lines.length;v++)C+=+this.lines.get(v).resize(d,_);let b=0;if(this._rows<h)for(let v=this._rows;v<h;v++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(d,_)):this.ybase>0&&this.lines.length<=this.ybase+this.y+b+1?(this.ybase--,b++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(d,_)));else for(let v=this._rows;v>h;v--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){let v=this.lines.length-S;v>0&&(this.lines.trimStart(v),this.ybase=Math.max(this.ybase-v,0),this.ydisp=Math.max(this.ydisp-v,0),this.savedY=Math.max(this.savedY-v,0)),this.lines.maxLength=S}this.x=Math.min(this.x,d-1),this.y=Math.min(this.y,h-1),b&&(this.y+=b),this.savedX=Math.min(this.savedX,d-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(d,h),this._cols>d))for(let b=0;b<this.lines.length;b++)C+=+this.lines.get(b).resize(d,_);this._cols=d,this._rows=h,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let d=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,d=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return d}get _isReflowEnabled(){let d=this._optionsService.rawOptions.windowsPty;return d&&d.buildNumber?this._hasScrollback&&d.backend==="conpty"&&d.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(d,h){this._cols!==d&&(d>this._cols?this._reflowLarger(d,h):this._reflowSmaller(d,h))}_reflowLarger(d,h){let _=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,d,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(_.length>0){let C=(0,m.reflowLargerCreateNewLayout)(this.lines,_);(0,m.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(d,h,C.countRemoved)}}_reflowLargerAdjustViewport(d,h,_){let C=this.getNullCell(p.DEFAULT_ATTR_DATA),S=_;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new p.BufferLine(d,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-_,0)}_reflowSmaller(d,h){let _=this.getNullCell(p.DEFAULT_ATTR_DATA),C=[],S=0;for(let b=this.lines.length-1;b>=0;b--){let v=this.lines.get(b);if(!v||!v.isWrapped&&v.getTrimmedLength()<=d)continue;let w=[v];for(;v.isWrapped&&b>0;)v=this.lines.get(--b),w.unshift(v);let A=this.ybase+this.y;if(A>=b&&A<b+w.length)continue;let T=w[w.length-1].getTrimmedLength(),k=(0,m.reflowSmallerGetNewLineLengths)(w,this._cols,d),I=k.length-w.length,N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+I):Math.max(0,this.lines.length-this.lines.maxLength+I);let V=[];for(let x=0;x<I;x++){let R=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);V.push(R)}V.length>0&&(C.push({start:b+w.length+S,newLines:V}),S+=V.length),w.push(...V);let U=k.length-1,Y=k[U];Y===0&&(U--,Y=k[U]);let H=w.length-I-1,D=T;for(;H>=0;){let x=Math.min(D,Y);if(w[U]===void 0)break;if(w[U].copyCellsFrom(w[H],D-x,Y-x,x,!0),Y-=x,Y===0&&(U--,Y=k[U]),D-=x,D===0){H--;let R=Math.max(H,0);D=(0,m.getWrappedLineTrimmedLength)(w,R,this._cols)}}for(let x=0;x<w.length;x++)k[x]<d&&w[x].setCell(k[x],_);let M=I-N;for(;M-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+I,this.ybase+h-1)}if(C.length>0){let b=[],v=[];for(let U=0;U<this.lines.length;U++)v.push(this.lines.get(U));let w=this.lines.length,A=w-1,T=0,k=C[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let I=0;for(let U=Math.min(this.lines.maxLength-1,w+S-1);U>=0;U--)if(k&&k.start>A+I){for(let Y=k.newLines.length-1;Y>=0;Y--)this.lines.set(U--,k.newLines[Y]);U++,b.push({index:A+1,amount:k.newLines.length}),I+=k.newLines.length,k=C[++T]}else this.lines.set(U,v[A--]);let N=0;for(let U=b.length-1;U>=0;U--)b[U].index+=N,this.lines.onInsertEmitter.fire(b[U]),N+=b[U].amount;let V=Math.max(0,w+S-this.lines.maxLength);V>0&&this.lines.onTrimEmitter.fire(V)}}translateBufferLineToString(d,h,_=0,C){let S=this.lines.get(d);return S?S.translateToString(h,_,C):""}getWrappedRangeForLine(d){let h=d,_=d;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;_+1<this.lines.length&&this.lines.get(_+1).isWrapped;)_++;return{first:h,last:_}}setupTabStops(d){for(d!=null?this.tabs[d]||(d=this.prevStop(d)):(this.tabs={},d=0);d<this._cols;d+=this._optionsService.rawOptions.tabStopWidth)this.tabs[d]=!0}prevStop(d){for(d==null&&(d=this.x);!this.tabs[--d]&&d>0;);return d>=this._cols?this._cols-1:d<0?0:d}nextStop(d){for(d==null&&(d=this.x);!this.tabs[++d]&&d<this._cols;);return d>=this._cols?this._cols-1:d<0?0:d}clearMarkers(d){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===d&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let d=0;d<this.markers.length;d++)this.markers[d].dispose(),this.markers.splice(d--,1);this._isClearing=!1}addMarker(d){let h=new u.Marker(d);return this.markers.push(h),h.register(this.lines.onTrim(_=>{h.line-=_,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(_=>{h.line>=_.index&&(h.line+=_.amount)})),h.register(this.lines.onDelete(_=>{h.line>=_.index&&h.line<_.index+_.amount&&h.dispose(),h.line>_.index&&(h.line-=_.amount)})),h.register(h.onDispose(()=>this._removeMarker(h))),h}_removeMarker(d){this._isClearing||this.markers.splice(this.markers.indexOf(d),1)}}},8437:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;let a=o(3734),l=o(511),c=o(643),p=o(482);s.DEFAULT_ATTR_DATA=Object.freeze(new a.AttributeData);let m=0;class y{constructor(u,f,d=!1){this.isWrapped=d,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*u);let h=f||l.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]);for(let _=0;_<u;++_)this.setCell(_,h);this.length=u}get(u){let f=this._data[3*u+0],d=2097151&f;return[this._data[3*u+1],2097152&f?this._combined[u]:d?(0,p.stringFromCodePoint)(d):"",f>>22,2097152&f?this._combined[u].charCodeAt(this._combined[u].length-1):d]}set(u,f){this._data[3*u+1]=f[c.CHAR_DATA_ATTR_INDEX],f[c.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[u]=f[1],this._data[3*u+0]=2097152|u|f[c.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*u+0]=f[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[c.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(u){return this._data[3*u+0]>>22}hasWidth(u){return 12582912&this._data[3*u+0]}getFg(u){return this._data[3*u+1]}getBg(u){return this._data[3*u+2]}hasContent(u){return 4194303&this._data[3*u+0]}getCodePoint(u){let f=this._data[3*u+0];return 2097152&f?this._combined[u].charCodeAt(this._combined[u].length-1):2097151&f}isCombined(u){return 2097152&this._data[3*u+0]}getString(u){let f=this._data[3*u+0];return 2097152&f?this._combined[u]:2097151&f?(0,p.stringFromCodePoint)(2097151&f):""}isProtected(u){return 536870912&this._data[3*u+2]}loadCell(u,f){return m=3*u,f.content=this._data[m+0],f.fg=this._data[m+1],f.bg=this._data[m+2],2097152&f.content&&(f.combinedData=this._combined[u]),268435456&f.bg&&(f.extended=this._extendedAttrs[u]),f}setCell(u,f){2097152&f.content&&(this._combined[u]=f.combinedData),268435456&f.bg&&(this._extendedAttrs[u]=f.extended),this._data[3*u+0]=f.content,this._data[3*u+1]=f.fg,this._data[3*u+2]=f.bg}setCellFromCodepoint(u,f,d,h){268435456&h.bg&&(this._extendedAttrs[u]=h.extended),this._data[3*u+0]=f|d<<22,this._data[3*u+1]=h.fg,this._data[3*u+2]=h.bg}addCodepointToCell(u,f,d){let h=this._data[3*u+0];2097152&h?this._combined[u]+=(0,p.stringFromCodePoint)(f):2097151&h?(this._combined[u]=(0,p.stringFromCodePoint)(2097151&h)+(0,p.stringFromCodePoint)(f),h&=-2097152,h|=2097152):h=f|4194304,d&&(h&=-12582913,h|=d<<22),this._data[3*u+0]=h}insertCells(u,f,d){if((u%=this.length)&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u-1,0,1,d),f<this.length-u){let h=new l.CellData;for(let _=this.length-u-f-1;_>=0;--_)this.setCell(u+f+_,this.loadCell(u+_,h));for(let _=0;_<f;++_)this.setCell(u+_,d)}else for(let h=u;h<this.length;++h)this.setCell(h,d);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,d)}deleteCells(u,f,d){if(u%=this.length,f<this.length-u){let h=new l.CellData;for(let _=0;_<this.length-u-f;++_)this.setCell(u+_,this.loadCell(u+f+_,h));for(let _=this.length-f;_<this.length;++_)this.setCell(_,d)}else for(let h=u;h<this.length;++h)this.setCell(h,d);u&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u-1,0,1,d),this.getWidth(u)!==0||this.hasContent(u)||this.setCellFromCodepoint(u,0,1,d)}replaceCells(u,f,d,h=!1){if(h)for(u&&this.getWidth(u-1)===2&&!this.isProtected(u-1)&&this.setCellFromCodepoint(u-1,0,1,d),f<this.length&&this.getWidth(f-1)===2&&!this.isProtected(f)&&this.setCellFromCodepoint(f,0,1,d);u<f&&u<this.length;)this.isProtected(u)||this.setCell(u,d),u++;else for(u&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u-1,0,1,d),f<this.length&&this.getWidth(f-1)===2&&this.setCellFromCodepoint(f,0,1,d);u<f&&u<this.length;)this.setCell(u++,d)}resize(u,f){if(u===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let d=3*u;if(u>this.length){if(this._data.buffer.byteLength>=4*d)this._data=new Uint32Array(this._data.buffer,0,d);else{let h=new Uint32Array(d);h.set(this._data),this._data=h}for(let h=this.length;h<u;++h)this.setCell(h,f)}else{this._data=this._data.subarray(0,d);let h=Object.keys(this._combined);for(let C=0;C<h.length;C++){let S=parseInt(h[C],10);S>=u&&delete this._combined[S]}let _=Object.keys(this._extendedAttrs);for(let C=0;C<_.length;C++){let S=parseInt(_[C],10);S>=u&&delete this._extendedAttrs[S]}}return this.length=u,4*d*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let u=new Uint32Array(this._data.length);return u.set(this._data),this._data=u,1}return 0}fill(u,f=!1){if(f)for(let d=0;d<this.length;++d)this.isProtected(d)||this.setCell(d,u);else{this._combined={},this._extendedAttrs={};for(let d=0;d<this.length;++d)this.setCell(d,u)}}copyFrom(u){this.length!==u.length?this._data=new Uint32Array(u._data):this._data.set(u._data),this.length=u.length,this._combined={};for(let f in u._combined)this._combined[f]=u._combined[f];this._extendedAttrs={};for(let f in u._extendedAttrs)this._extendedAttrs[f]=u._extendedAttrs[f];this.isWrapped=u.isWrapped}clone(){let u=new y(0);u._data=new Uint32Array(this._data),u.length=this.length;for(let f in this._combined)u._combined[f]=this._combined[f];for(let f in this._extendedAttrs)u._extendedAttrs[f]=this._extendedAttrs[f];return u.isWrapped=this.isWrapped,u}getTrimmedLength(){for(let u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0])return u+(this._data[3*u+0]>>22);return 0}getNoBgTrimmedLength(){for(let u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0]||50331648&this._data[3*u+2])return u+(this._data[3*u+0]>>22);return 0}copyCellsFrom(u,f,d,h,_){let C=u._data;if(_)for(let b=h-1;b>=0;b--){for(let v=0;v<3;v++)this._data[3*(d+b)+v]=C[3*(f+b)+v];268435456&C[3*(f+b)+2]&&(this._extendedAttrs[d+b]=u._extendedAttrs[f+b])}else for(let b=0;b<h;b++){for(let v=0;v<3;v++)this._data[3*(d+b)+v]=C[3*(f+b)+v];268435456&C[3*(f+b)+2]&&(this._extendedAttrs[d+b]=u._extendedAttrs[f+b])}let S=Object.keys(u._combined);for(let b=0;b<S.length;b++){let v=parseInt(S[b],10);v>=f&&(this._combined[v-f+d]=u._combined[v])}}translateToString(u,f,d,h){f=f??0,d=d??this.length,u&&(d=Math.min(d,this.getTrimmedLength())),h&&(h.length=0);let _="";for(;f<d;){let C=this._data[3*f+0],S=2097151&C,b=2097152&C?this._combined[f]:S?(0,p.stringFromCodePoint)(S):c.WHITESPACE_CELL_CHAR;if(_+=b,h)for(let v=0;v<b.length;++v)h.push(f);f+=C>>22||1}return h&&h.push(f),_}}s.BufferLine=y},4841:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(o,a){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return a*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(i,s)=>{function o(a,l,c){if(l===a.length-1)return a[l].getTrimmedLength();let p=!a[l].hasContent(c-1)&&a[l].getWidth(c-1)===1,m=a[l+1].getWidth(0)===2;return p&&m?c-1:c}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(a,l,c,p,m){let y=[];for(let g=0;g<a.length-1;g++){let u=g,f=a.get(++u);if(!f.isWrapped)continue;let d=[a.get(g)];for(;u<a.length&&f.isWrapped;)d.push(f),f=a.get(++u);if(p>=g&&p<u){g+=d.length-1;continue}let h=0,_=o(d,h,l),C=1,S=0;for(;C<d.length;){let v=o(d,C,l),w=v-S,A=c-_,T=Math.min(w,A);d[h].copyCellsFrom(d[C],S,_,T,!1),_+=T,_===c&&(h++,_=0),S+=T,S===v&&(C++,S=0),_===0&&h!==0&&d[h-1].getWidth(c-1)===2&&(d[h].copyCellsFrom(d[h-1],c-1,_++,1,!1),d[h-1].setCell(c-1,m))}d[h].replaceCells(_,c,m);let b=0;for(let v=d.length-1;v>0&&(v>h||d[v].getTrimmedLength()===0);v--)b++;b>0&&(y.push(g+d.length-b),y.push(b)),g+=d.length-1}return y},s.reflowLargerCreateNewLayout=function(a,l){let c=[],p=0,m=l[p],y=0;for(let g=0;g<a.length;g++)if(m===g){let u=l[++p];a.onDeleteEmitter.fire({index:g-y,amount:u}),g+=u-1,y+=u,m=l[++p]}else c.push(g);return{layout:c,countRemoved:y}},s.reflowLargerApplyNewLayout=function(a,l){let c=[];for(let p=0;p<l.length;p++)c.push(a.get(l[p]));for(let p=0;p<c.length;p++)a.set(p,c[p]);a.length=l.length},s.reflowSmallerGetNewLineLengths=function(a,l,c){let p=[],m=a.map((f,d)=>o(a,d,l)).reduce((f,d)=>f+d),y=0,g=0,u=0;for(;u<m;){if(m-u<c){p.push(m-u);break}y+=c;let f=o(a,g,l);y>f&&(y-=f,g++);let d=a[g].getWidth(y-1)===2;d&&y--;let h=d?c-1:c;p.push(h),u+=h}return p},s.getWrappedLineTrimmedLength=o},5295:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;let a=o(8460),l=o(844),c=o(9092);class p extends l.Disposable{constructor(y,g){super(),this._optionsService=y,this._bufferService=g,this._onBufferActivate=this.register(new a.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new c.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new c.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(y){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(y),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(y,g){this._normal.resize(y,g),this._alt.resize(y,g),this.setupTabStops(y)}setupTabStops(y){this._normal.setupTabStops(y),this._alt.setupTabStops(y)}}s.BufferSet=p},511:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;let a=o(482),l=o(643),c=o(3734);class p extends c.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new c.ExtendedAttrs,this.combinedData=""}static fromCharData(y){let g=new p;return g.setFromCharData(y),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(y){this.fg=y[l.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(y[l.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(y[l.CHAR_DATA_CHAR_INDEX].length===2){let u=y[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=u&&u<=56319){let f=y[l.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=f&&f<=57343?this.content=1024*(u-55296)+f-56320+65536|y[l.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=y[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[l.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=y[l.CHAR_DATA_CHAR_INDEX],this.content=2097152|y[l.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=p},643:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;let a=o(8460),l=o(844);class c{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=c._nextId++,this._onDispose=this.register(new a.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,l.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}s.Marker=c,c._nextId=1},7116:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},s.CHARSETS.A={"#":"\xA3"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},s.CHARSETS.C=s.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},s.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},s.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},s.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},s.CHARSETS.E=s.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},s.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},s.CHARSETS.H=s.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(i,s)=>{var o,a,l;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(c){c.NUL="\0",c.SOH="",c.STX="",c.ETX="",c.EOT="",c.ENQ="",c.ACK="",c.BEL="\x07",c.BS="\b",c.HT="	",c.LF=`
`,c.VT="\v",c.FF="\f",c.CR="\r",c.SO="",c.SI="",c.DLE="",c.DC1="",c.DC2="",c.DC3="",c.DC4="",c.NAK="",c.SYN="",c.ETB="",c.CAN="",c.EM="",c.SUB="",c.ESC="\x1B",c.FS="",c.GS="",c.RS="",c.US="",c.SP=" ",c.DEL="\x7F"}(o||(s.C0=o={})),function(c){c.PAD="\x80",c.HOP="\x81",c.BPH="\x82",c.NBH="\x83",c.IND="\x84",c.NEL="\x85",c.SSA="\x86",c.ESA="\x87",c.HTS="\x88",c.HTJ="\x89",c.VTS="\x8A",c.PLD="\x8B",c.PLU="\x8C",c.RI="\x8D",c.SS2="\x8E",c.SS3="\x8F",c.DCS="\x90",c.PU1="\x91",c.PU2="\x92",c.STS="\x93",c.CCH="\x94",c.MW="\x95",c.SPA="\x96",c.EPA="\x97",c.SOS="\x98",c.SGCI="\x99",c.SCI="\x9A",c.CSI="\x9B",c.ST="\x9C",c.OSC="\x9D",c.PM="\x9E",c.APC="\x9F"}(a||(s.C1=a={})),function(c){c.ST=`${o.ESC}\\`}(l||(s.C1_ESCAPED=l={}))},7399:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;let a=o(2584),l={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(c,p,m,y){let g={type:0,cancel:!1,key:void 0},u=(c.shiftKey?1:0)|(c.altKey?2:0)|(c.ctrlKey?4:0)|(c.metaKey?8:0);switch(c.keyCode){case 0:c.key==="UIKeyInputUpArrow"?g.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A":c.key==="UIKeyInputLeftArrow"?g.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D":c.key==="UIKeyInputRightArrow"?g.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C":c.key==="UIKeyInputDownArrow"&&(g.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B");break;case 8:g.key=c.ctrlKey?"\b":a.C0.DEL,c.altKey&&(g.key=a.C0.ESC+g.key);break;case 9:if(c.shiftKey){g.key=a.C0.ESC+"[Z";break}g.key=a.C0.HT,g.cancel=!0;break;case 13:g.key=c.altKey?a.C0.ESC+a.C0.CR:a.C0.CR,g.cancel=!0;break;case 27:g.key=a.C0.ESC,c.altKey&&(g.key=a.C0.ESC+a.C0.ESC),g.cancel=!0;break;case 37:if(c.metaKey)break;u?(g.key=a.C0.ESC+"[1;"+(u+1)+"D",g.key===a.C0.ESC+"[1;3D"&&(g.key=a.C0.ESC+(m?"b":"[1;5D"))):g.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D";break;case 39:if(c.metaKey)break;u?(g.key=a.C0.ESC+"[1;"+(u+1)+"C",g.key===a.C0.ESC+"[1;3C"&&(g.key=a.C0.ESC+(m?"f":"[1;5C"))):g.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C";break;case 38:if(c.metaKey)break;u?(g.key=a.C0.ESC+"[1;"+(u+1)+"A",m||g.key!==a.C0.ESC+"[1;3A"||(g.key=a.C0.ESC+"[1;5A")):g.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A";break;case 40:if(c.metaKey)break;u?(g.key=a.C0.ESC+"[1;"+(u+1)+"B",m||g.key!==a.C0.ESC+"[1;3B"||(g.key=a.C0.ESC+"[1;5B")):g.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B";break;case 45:c.shiftKey||c.ctrlKey||(g.key=a.C0.ESC+"[2~");break;case 46:g.key=u?a.C0.ESC+"[3;"+(u+1)+"~":a.C0.ESC+"[3~";break;case 36:g.key=u?a.C0.ESC+"[1;"+(u+1)+"H":p?a.C0.ESC+"OH":a.C0.ESC+"[H";break;case 35:g.key=u?a.C0.ESC+"[1;"+(u+1)+"F":p?a.C0.ESC+"OF":a.C0.ESC+"[F";break;case 33:c.shiftKey?g.type=2:c.ctrlKey?g.key=a.C0.ESC+"[5;"+(u+1)+"~":g.key=a.C0.ESC+"[5~";break;case 34:c.shiftKey?g.type=3:c.ctrlKey?g.key=a.C0.ESC+"[6;"+(u+1)+"~":g.key=a.C0.ESC+"[6~";break;case 112:g.key=u?a.C0.ESC+"[1;"+(u+1)+"P":a.C0.ESC+"OP";break;case 113:g.key=u?a.C0.ESC+"[1;"+(u+1)+"Q":a.C0.ESC+"OQ";break;case 114:g.key=u?a.C0.ESC+"[1;"+(u+1)+"R":a.C0.ESC+"OR";break;case 115:g.key=u?a.C0.ESC+"[1;"+(u+1)+"S":a.C0.ESC+"OS";break;case 116:g.key=u?a.C0.ESC+"[15;"+(u+1)+"~":a.C0.ESC+"[15~";break;case 117:g.key=u?a.C0.ESC+"[17;"+(u+1)+"~":a.C0.ESC+"[17~";break;case 118:g.key=u?a.C0.ESC+"[18;"+(u+1)+"~":a.C0.ESC+"[18~";break;case 119:g.key=u?a.C0.ESC+"[19;"+(u+1)+"~":a.C0.ESC+"[19~";break;case 120:g.key=u?a.C0.ESC+"[20;"+(u+1)+"~":a.C0.ESC+"[20~";break;case 121:g.key=u?a.C0.ESC+"[21;"+(u+1)+"~":a.C0.ESC+"[21~";break;case 122:g.key=u?a.C0.ESC+"[23;"+(u+1)+"~":a.C0.ESC+"[23~";break;case 123:g.key=u?a.C0.ESC+"[24;"+(u+1)+"~":a.C0.ESC+"[24~";break;default:if(!c.ctrlKey||c.shiftKey||c.altKey||c.metaKey)if(m&&!y||!c.altKey||c.metaKey)!m||c.altKey||c.ctrlKey||c.shiftKey||!c.metaKey?c.key&&!c.ctrlKey&&!c.altKey&&!c.metaKey&&c.keyCode>=48&&c.key.length===1?g.key=c.key:c.key&&c.ctrlKey&&(c.key==="_"&&(g.key=a.C0.US),c.key==="@"&&(g.key=a.C0.NUL)):c.keyCode===65&&(g.type=1);else{let f=l[c.keyCode],d=f?.[c.shiftKey?1:0];if(d)g.key=a.C0.ESC+d;else if(c.keyCode>=65&&c.keyCode<=90){let h=c.ctrlKey?c.keyCode-64:c.keyCode+32,_=String.fromCharCode(h);c.shiftKey&&(_=_.toUpperCase()),g.key=a.C0.ESC+_}else if(c.keyCode===32)g.key=a.C0.ESC+(c.ctrlKey?a.C0.NUL:" ");else if(c.key==="Dead"&&c.code.startsWith("Key")){let h=c.code.slice(3,4);c.shiftKey||(h=h.toLowerCase()),g.key=a.C0.ESC+h,g.cancel=!0}}else c.keyCode>=65&&c.keyCode<=90?g.key=String.fromCharCode(c.keyCode-64):c.keyCode===32?g.key=a.C0.NUL:c.keyCode>=51&&c.keyCode<=55?g.key=String.fromCharCode(c.keyCode-51+27):c.keyCode===56?g.key=a.C0.DEL:c.keyCode===219?g.key=a.C0.ESC:c.keyCode===220?g.key=a.C0.FS:c.keyCode===221&&(g.key=a.C0.GS)}return g}},482:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},s.utf32ToString=function(o,a=0,l=o.length){let c="";for(let p=a;p<l;++p){let m=o[p];m>65535?(m-=65536,c+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):c+=String.fromCharCode(m)}return c},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,a){let l=o.length;if(!l)return 0;let c=0,p=0;if(this._interim){let m=o.charCodeAt(p++);56320<=m&&m<=57343?a[c++]=1024*(this._interim-55296)+m-56320+65536:(a[c++]=this._interim,a[c++]=m),this._interim=0}for(let m=p;m<l;++m){let y=o.charCodeAt(m);if(55296<=y&&y<=56319){if(++m>=l)return this._interim=y,c;let g=o.charCodeAt(m);56320<=g&&g<=57343?a[c++]=1024*(y-55296)+g-56320+65536:(a[c++]=y,a[c++]=g)}else y!==65279&&(a[c++]=y)}return c}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,a){let l=o.length;if(!l)return 0;let c,p,m,y,g=0,u=0,f=0;if(this.interim[0]){let _=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let S,b=0;for(;(S=63&this.interim[++b])&&b<4;)C<<=6,C|=S;let v=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=v-b;for(;f<w;){if(f>=l)return 0;if(S=o[f++],(192&S)!=128){f--,_=!0;break}this.interim[b++]=S,C<<=6,C|=63&S}_||(v===2?C<128?f--:a[g++]=C:v===3?C<2048||C>=55296&&C<=57343||C===65279||(a[g++]=C):C<65536||C>1114111||(a[g++]=C)),this.interim.fill(0)}let d=l-4,h=f;for(;h<l;){for(;!(!(h<d)||128&(c=o[h])||128&(p=o[h+1])||128&(m=o[h+2])||128&(y=o[h+3]));)a[g++]=c,a[g++]=p,a[g++]=m,a[g++]=y,h+=4;if(c=o[h++],c<128)a[g++]=c;else if((224&c)==192){if(h>=l)return this.interim[0]=c,g;if(p=o[h++],(192&p)!=128){h--;continue}if(u=(31&c)<<6|63&p,u<128){h--;continue}a[g++]=u}else if((240&c)==224){if(h>=l)return this.interim[0]=c,g;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=l)return this.interim[0]=c,this.interim[1]=p,g;if(m=o[h++],(192&m)!=128){h--;continue}if(u=(15&c)<<12|(63&p)<<6|63&m,u<2048||u>=55296&&u<=57343||u===65279)continue;a[g++]=u}else if((248&c)==240){if(h>=l)return this.interim[0]=c,g;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=l)return this.interim[0]=c,this.interim[1]=p,g;if(m=o[h++],(192&m)!=128){h--;continue}if(h>=l)return this.interim[0]=c,this.interim[1]=p,this.interim[2]=m,g;if(y=o[h++],(192&y)!=128){h--;continue}if(u=(7&c)<<18|(63&p)<<12|(63&m)<<6|63&y,u<65536||u>1114111)continue;a[g++]=u}}return g}}},225:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;let a=o(1480),l=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],p;s.UnicodeV6=class{constructor(){if(this.version="6",!p){p=new Uint8Array(65536),p.fill(1),p[0]=0,p.fill(0,1,32),p.fill(0,127,160),p.fill(2,4352,4448),p[9001]=2,p[9002]=2,p.fill(2,11904,42192),p[12351]=1,p.fill(2,44032,55204),p.fill(2,63744,64256),p.fill(2,65040,65050),p.fill(2,65072,65136),p.fill(2,65280,65377),p.fill(2,65504,65511);for(let m=0;m<l.length;++m)p.fill(0,l[m][0],l[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?p[m]:function(y,g){let u,f=0,d=g.length-1;if(y<g[0][0]||y>g[d][1])return!1;for(;d>=f;)if(u=f+d>>1,y>g[u][1])f=u+1;else{if(!(y<g[u][0]))return!0;d=u-1}return!1}(m,c)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}charProperties(m,y){let g=this.wcwidth(m),u=g===0&&y!==0;if(u){let f=a.UnicodeService.extractWidth(y);f===0?u=!1:f>g&&(g=f)}return a.UnicodeService.createPropertyValue(0,g,u)}}},5981:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;let a=o(8460),l=o(844);class c extends l.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,y){if(y!==void 0&&this._syncCalls>y)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);let u=this._callbacks.shift();u&&u()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,y){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(y),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(y)}_innerWrite(m=0,y=!0){let g=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let u=this._writeBuffer[this._bufferOffset],f=this._action(u,y);if(f){let h=_=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,_)):this._innerWrite(g,_);return void f.catch(_=>(queueMicrotask(()=>{throw _}),Promise.resolve(!1))).then(h)}let d=this._callbacks[this._bufferOffset];if(d&&d(),this._bufferOffset++,this._pendingData-=u.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=c},5941:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;let o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,a=/^[\da-f]+$/;function l(c,p){let m=c.toString(16),y=m.length<2?"0"+m:m;switch(p){case 4:return m[0];case 8:return y;case 12:return(y+y).slice(0,3);default:return y+y}}s.parseColor=function(c){if(!c)return;let p=c.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);let m=o.exec(p);if(m){let y=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/y*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/y*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/y*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),a.exec(p)&&[3,6,9,12].includes(p.length))){let m=p.length/3,y=[0,0,0];for(let g=0;g<3;++g){let u=parseInt(p.slice(m*g,m*g+m),16);y[g]=m===1?u<<4:m===2?u:m===3?u>>4:u>>8}return y}},s.toRgbString=function(c,p=16){let[m,y,g]=c;return`rgb:${l(m,p)}/${l(y,p)}/${l(g,p)}`}},5770:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;let a=o(482),l=o(8742),c=o(5770),p=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(y,g){this._handlers[y]===void 0&&(this._handlers[y]=[]);let u=this._handlers[y];return u.push(g),{dispose:()=>{let f=u.indexOf(g);f!==-1&&u.splice(f,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}reset(){if(this._active.length)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(y,g){if(this.reset(),this._ident=y,this._active=this._handlers[y]||p,this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(y,g,u){if(this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].put(y,g,u);else this._handlerFb(this._ident,"PUT",(0,a.utf32ToString)(y,g,u))}unhook(y,g=!0){if(this._active.length){let u=!1,f=this._active.length-1,d=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,u=g,d=this._stack.fallThrough,this._stack.paused=!1),!d&&u===!1){for(;f>=0&&(u=this._active[f].unhook(y),u!==!0);f--)if(u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,u;f--}for(;f>=0;f--)if(u=this._active[f].unhook(!1),u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,u}else this._handlerFb(this._ident,"UNHOOK",y);this._active=p,this._ident=0}};let m=new l.Params;m.addParam(0),s.DcsHandler=class{constructor(y){this._handler=y,this._data="",this._params=m,this._hitLimit=!1}hook(y){this._params=y.length>1||y.params[0]?y.clone():m,this._data="",this._hitLimit=!1}put(y,g,u){this._hitLimit||(this._data+=(0,a.utf32ToString)(y,g,u),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(y){let g=!1;if(this._hitLimit)g=!1;else if(y&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(u=>(this._params=m,this._data="",this._hitLimit=!1,u));return this._params=m,this._data="",this._hitLimit=!1,g}}},2015:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;let a=o(844),l=o(8742),c=o(6242),p=o(6351);class m{constructor(f){this.table=new Uint8Array(f)}setDefault(f,d){this.table.fill(f<<4|d)}add(f,d,h,_){this.table[d<<8|f]=h<<4|_}addMany(f,d,h,_){for(let C=0;C<f.length;C++)this.table[d<<8|f[C]]=h<<4|_}}s.TransitionTable=m;let y=160;s.VT500_TRANSITION_TABLE=function(){let u=new m(4095),f=Array.apply(null,Array(256)).map((b,v)=>v),d=(b,v)=>f.slice(b,v),h=d(32,127),_=d(0,24);_.push(25),_.push.apply(_,d(28,32));let C=d(0,14),S;for(S in u.setDefault(1,0),u.addMany(h,0,2,0),C)u.addMany([24,26,153,154],S,3,0),u.addMany(d(128,144),S,3,0),u.addMany(d(144,152),S,3,0),u.add(156,S,0,0),u.add(27,S,11,1),u.add(157,S,4,8),u.addMany([152,158,159],S,0,7),u.add(155,S,11,3),u.add(144,S,11,9);return u.addMany(_,0,3,0),u.addMany(_,1,3,1),u.add(127,1,0,1),u.addMany(_,8,0,8),u.addMany(_,3,3,3),u.add(127,3,0,3),u.addMany(_,4,3,4),u.add(127,4,0,4),u.addMany(_,6,3,6),u.addMany(_,5,3,5),u.add(127,5,0,5),u.addMany(_,2,3,2),u.add(127,2,0,2),u.add(93,1,4,8),u.addMany(h,8,5,8),u.add(127,8,5,8),u.addMany([156,27,24,26,7],8,6,0),u.addMany(d(28,32),8,0,8),u.addMany([88,94,95],1,0,7),u.addMany(h,7,0,7),u.addMany(_,7,0,7),u.add(156,7,0,0),u.add(127,7,0,7),u.add(91,1,11,3),u.addMany(d(64,127),3,7,0),u.addMany(d(48,60),3,8,4),u.addMany([60,61,62,63],3,9,4),u.addMany(d(48,60),4,8,4),u.addMany(d(64,127),4,7,0),u.addMany([60,61,62,63],4,0,6),u.addMany(d(32,64),6,0,6),u.add(127,6,0,6),u.addMany(d(64,127),6,0,0),u.addMany(d(32,48),3,9,5),u.addMany(d(32,48),5,9,5),u.addMany(d(48,64),5,0,6),u.addMany(d(64,127),5,7,0),u.addMany(d(32,48),4,9,5),u.addMany(d(32,48),1,9,2),u.addMany(d(32,48),2,9,2),u.addMany(d(48,127),2,10,0),u.addMany(d(48,80),1,10,0),u.addMany(d(81,88),1,10,0),u.addMany([89,90,92],1,10,0),u.addMany(d(96,127),1,10,0),u.add(80,1,11,9),u.addMany(_,9,0,9),u.add(127,9,0,9),u.addMany(d(28,32),9,0,9),u.addMany(d(32,48),9,9,12),u.addMany(d(48,60),9,8,10),u.addMany([60,61,62,63],9,9,10),u.addMany(_,11,0,11),u.addMany(d(32,128),11,0,11),u.addMany(d(28,32),11,0,11),u.addMany(_,10,0,10),u.add(127,10,0,10),u.addMany(d(28,32),10,0,10),u.addMany(d(48,60),10,8,10),u.addMany([60,61,62,63],10,0,11),u.addMany(d(32,48),10,9,12),u.addMany(_,12,0,12),u.add(127,12,0,12),u.addMany(d(28,32),12,0,12),u.addMany(d(32,48),12,9,12),u.addMany(d(48,64),12,0,11),u.addMany(d(64,127),12,12,13),u.addMany(d(64,127),10,12,13),u.addMany(d(64,127),9,12,13),u.addMany(_,13,13,13),u.addMany(h,13,13,13),u.add(127,13,0,13),u.addMany([27,156,24,26],13,14,0),u.add(y,0,2,0),u.add(y,8,5,8),u.add(y,6,0,6),u.add(y,11,0,11),u.add(y,13,13,13),u}();class g extends a.Disposable{constructor(f=s.VT500_TRANSITION_TABLE){super(),this._transitions=f,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new l.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(d,h,_)=>{},this._executeHandlerFb=d=>{},this._csiHandlerFb=(d,h)=>{},this._escHandlerFb=d=>{},this._errorHandlerFb=d=>d,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,a.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new c.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(f,d=[64,126]){let h=0;if(f.prefix){if(f.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=f.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(f.intermediates){if(f.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<f.intermediates.length;++C){let S=f.intermediates.charCodeAt(C);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=S}}if(f.final.length!==1)throw new Error("final must be a single byte");let _=f.final.charCodeAt(0);if(d[0]>_||_>d[1])throw new Error(`final must be in range ${d[0]} .. ${d[1]}`);return h<<=8,h|=_,h}identToString(f){let d=[];for(;f;)d.push(String.fromCharCode(255&f)),f>>=8;return d.reverse().join("")}setPrintHandler(f){this._printHandler=f}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(f,d){let h=this._identifier(f,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);let _=this._escHandlers[h];return _.push(d),{dispose:()=>{let C=_.indexOf(d);C!==-1&&_.splice(C,1)}}}clearEscHandler(f){this._escHandlers[this._identifier(f,[48,126])]&&delete this._escHandlers[this._identifier(f,[48,126])]}setEscHandlerFallback(f){this._escHandlerFb=f}setExecuteHandler(f,d){this._executeHandlers[f.charCodeAt(0)]=d}clearExecuteHandler(f){this._executeHandlers[f.charCodeAt(0)]&&delete this._executeHandlers[f.charCodeAt(0)]}setExecuteHandlerFallback(f){this._executeHandlerFb=f}registerCsiHandler(f,d){let h=this._identifier(f);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);let _=this._csiHandlers[h];return _.push(d),{dispose:()=>{let C=_.indexOf(d);C!==-1&&_.splice(C,1)}}}clearCsiHandler(f){this._csiHandlers[this._identifier(f)]&&delete this._csiHandlers[this._identifier(f)]}setCsiHandlerFallback(f){this._csiHandlerFb=f}registerDcsHandler(f,d){return this._dcsParser.registerHandler(this._identifier(f),d)}clearDcsHandler(f){this._dcsParser.clearHandler(this._identifier(f))}setDcsHandlerFallback(f){this._dcsParser.setHandlerFallback(f)}registerOscHandler(f,d){return this._oscParser.registerHandler(f,d)}clearOscHandler(f){this._oscParser.clearHandler(f)}setOscHandlerFallback(f){this._oscParser.setHandlerFallback(f)}setErrorHandler(f){this._errorHandler=f}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(f,d,h,_,C){this._parseStack.state=f,this._parseStack.handlers=d,this._parseStack.handlerPos=h,this._parseStack.transition=_,this._parseStack.chunkPos=C}parse(f,d,h){let _,C=0,S=0,b=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,b=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let v=this._parseStack.handlers,w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&w>-1){for(;w>=0&&(_=v[w](this._params),_!==!0);w--)if(_ instanceof Promise)return this._parseStack.handlerPos=w,_}this._parseStack.handlers=[];break;case 4:if(h===!1&&w>-1){for(;w>=0&&(_=v[w](),_!==!0);w--)if(_ instanceof Promise)return this._parseStack.handlerPos=w,_}this._parseStack.handlers=[];break;case 6:if(C=f[this._parseStack.chunkPos],_=this._dcsParser.unhook(C!==24&&C!==26,h),_)return _;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=f[this._parseStack.chunkPos],_=this._oscParser.end(C!==24&&C!==26,h),_)return _;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,b=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let v=b;v<d;++v){switch(C=f[v],S=this._transitions.table[this.currentState<<8|(C<160?C:y)],S>>4){case 2:for(let I=v+1;;++I){if(I>=d||(C=f[I])<32||C>126&&C<y){this._printHandler(f,v,I),v=I-1;break}if(++I>=d||(C=f[I])<32||C>126&&C<y){this._printHandler(f,v,I),v=I-1;break}if(++I>=d||(C=f[I])<32||C>126&&C<y){this._printHandler(f,v,I),v=I-1;break}if(++I>=d||(C=f[I])<32||C>126&&C<y){this._printHandler(f,v,I),v=I-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:v,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let w=this._csiHandlers[this._collect<<8|C],A=w?w.length-1:-1;for(;A>=0&&(_=w[A](this._params),_!==!0);A--)if(_ instanceof Promise)return this._preserveStack(3,w,A,S,v),_;A<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingJoinState=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++v<d&&(C=f[v])>47&&C<60);v--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let T=this._escHandlers[this._collect<<8|C],k=T?T.length-1:-1;for(;k>=0&&(_=T[k](),_!==!0);k--)if(_ instanceof Promise)return this._preserveStack(4,T,k,S,v),_;k<0&&this._escHandlerFb(this._collect<<8|C),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let I=v+1;;++I)if(I>=d||(C=f[I])===24||C===26||C===27||C>127&&C<y){this._dcsParser.put(f,v,I),v=I-1;break}break;case 14:if(_=this._dcsParser.unhook(C!==24&&C!==26),_)return this._preserveStack(6,[],0,S,v),_;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let I=v+1;;I++)if(I>=d||(C=f[I])<32||C>127&&C<y){this._oscParser.put(f,v,I),v=I-1;break}break;case 6:if(_=this._oscParser.end(C!==24&&C!==26),_)return this._preserveStack(5,[],0,S,v),_;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&S}}}s.EscapeSequenceParser=g},6242:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;let a=o(5770),l=o(482),c=[];s.OscParser=class{constructor(){this._state=0,this._active=c,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,m){this._handlers[p]===void 0&&(this._handlers[p]=[]);let y=this._handlers[p];return y.push(m),{dispose:()=>{let g=y.indexOf(m);g!==-1&&y.splice(g,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=c}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=c,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||c,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,m,y){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(p,m,y);else this._handlerFb(this._id,"PUT",(0,l.utf32ToString)(p,m,y))}start(){this.reset(),this._state=1}put(p,m,y){if(this._state!==3){if(this._state===1)for(;m<y;){let g=p[m++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&y-m>0&&this._put(p,m,y)}}end(p,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let y=!1,g=this._active.length-1,u=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,y=m,u=this._stack.fallThrough,this._stack.paused=!1),!u&&y===!1){for(;g>=0&&(y=this._active[g].end(p),y!==!0);g--)if(y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,y;g--}for(;g>=0;g--)if(y=this._active[g].end(!1),y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,y}else this._handlerFb(this._id,"END",p);this._active=c,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,m,y){this._hitLimit||(this._data+=(0,l.utf32ToString)(p,m,y),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let m=!1;if(this._hitLimit)m=!1;else if(p&&(m=this._handler(this._data),m instanceof Promise))return m.then(y=>(this._data="",this._hitLimit=!1,y));return this._data="",this._hitLimit=!1,m}}},8742:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;let o=2147483647;class a{static fromArray(c){let p=new a;if(!c.length)return p;for(let m=Array.isArray(c[0])?1:0;m<c.length;++m){let y=c[m];if(Array.isArray(y))for(let g=0;g<y.length;++g)p.addSubParam(y[g]);else p.addParam(y)}return p}constructor(c=32,p=32){if(this.maxLength=c,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(c),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(c),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let c=new a(this.maxLength,this.maxSubParamsLength);return c.params.set(this.params),c.length=this.length,c._subParams.set(this._subParams),c._subParamsLength=this._subParamsLength,c._subParamsIdx.set(this._subParamsIdx),c._rejectDigits=this._rejectDigits,c._rejectSubDigits=this._rejectSubDigits,c._digitIsSub=this._digitIsSub,c}toArray(){let c=[];for(let p=0;p<this.length;++p){c.push(this.params[p]);let m=this._subParamsIdx[p]>>8,y=255&this._subParamsIdx[p];y-m>0&&c.push(Array.prototype.slice.call(this._subParams,m,y))}return c}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(c){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=c>o?o:c}}addSubParam(c){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=c>o?o:c,this._subParamsIdx[this.length-1]++}}hasSubParams(c){return(255&this._subParamsIdx[c])-(this._subParamsIdx[c]>>8)>0}getSubParams(c){let p=this._subParamsIdx[c]>>8,m=255&this._subParamsIdx[c];return m-p>0?this._subParams.subarray(p,m):null}getSubParamsAll(){let c={};for(let p=0;p<this.length;++p){let m=this._subParamsIdx[p]>>8,y=255&this._subParamsIdx[p];y-m>0&&(c[p]=this._subParams.slice(m,y))}return c}addDigit(c){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let m=this._digitIsSub?this._subParams:this.params,y=m[p-1];m[p-1]=~y?Math.min(10*y+c,o):c}}s.Params=a},5741:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,a){let l={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(l),a.dispose=()=>this._wrappedAddonDispose(l),a.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let a=-1;for(let l=0;l<this._addons.length;l++)if(this._addons[l]===o){a=l;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(a,1)}}},8771:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;let a=o(3785),l=o(511);s.BufferApiView=class{constructor(c,p){this._buffer=c,this.type=p}init(c){return this._buffer=c,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(c){let p=this._buffer.lines.get(c);if(p)return new a.BufferLineApiView(p)}getNullCell(){return new l.CellData}}},3785:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;let a=o(511);s.BufferLineApiView=class{constructor(l){this._line=l}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(l,c){if(!(l<0||l>=this._line.length))return c?(this._line.loadCell(l,c),c):this._line.loadCell(l,new a.CellData)}translateToString(l,c,p){return this._line.translateToString(l,c,p)}}},8285:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;let a=o(8771),l=o(8460),c=o(844);class p extends c.Disposable{constructor(y){super(),this._core=y,this._onBufferChange=this.register(new l.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new a.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new a.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=p},7975:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,a){return this._core.registerCsiHandler(o,l=>a(l.toArray()))}addCsiHandler(o,a){return this.registerCsiHandler(o,a)}registerDcsHandler(o,a){return this._core.registerDcsHandler(o,(l,c)=>a(l,c.toArray()))}addDcsHandler(o,a){return this.registerDcsHandler(o,a)}registerEscHandler(o,a){return this._core.registerEscHandler(o,a)}addEscHandler(o,a){return this.registerEscHandler(o,a)}registerOscHandler(o,a){return this._core.registerOscHandler(o,a)}addOscHandler(o,a){return this.registerOscHandler(o,a)}}},7090:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(i,s,o){var a=this&&this.__decorate||function(u,f,d,h){var _,C=arguments.length,S=C<3?f:h===null?h=Object.getOwnPropertyDescriptor(f,d):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(u,f,d,h);else for(var b=u.length-1;b>=0;b--)(_=u[b])&&(S=(C<3?_(S):C>3?_(f,d,S):_(f,d))||S);return C>3&&S&&Object.defineProperty(f,d,S),S},l=this&&this.__param||function(u,f){return function(d,h){f(d,h,u)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;let c=o(8460),p=o(844),m=o(5295),y=o(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let g=s.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(u){super(),this.isUserScrolling=!1,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(u.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(u.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(u,this))}resize(u,f){this.cols=u,this.rows=f,this.buffers.resize(u,f),this._onResize.fire({cols:u,rows:f})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(u,f=!1){let d=this.buffer,h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===u.fg&&h.getBg(0)===u.bg||(h=d.getBlankLine(u,f),this._cachedBlankLine=h),h.isWrapped=f;let _=d.ybase+d.scrollTop,C=d.ybase+d.scrollBottom;if(d.scrollTop===0){let S=d.lines.isFull;C===d.lines.length-1?S?d.lines.recycle().copyFrom(h):d.lines.push(h.clone()):d.lines.splice(C+1,0,h.clone()),S?this.isUserScrolling&&(d.ydisp=Math.max(d.ydisp-1,0)):(d.ybase++,this.isUserScrolling||d.ydisp++)}else{let S=C-_+1;d.lines.shiftElements(_+1,S-1,-1),d.lines.set(C,h.clone())}this.isUserScrolling||(d.ydisp=d.ybase),this._onScroll.fire(d.ydisp)}scrollLines(u,f,d){let h=this.buffer;if(u<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else u+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);let _=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+u,h.ybase),0),_!==h.ydisp&&(f||this._onScroll.fire(h.ydisp))}};s.BufferService=g=a([l(0,y.IOptionsService)],g)},7994:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,a){this._charsets[o]=a,this.glevel===o&&(this.charset=a)}}},1753:function(i,s,o){var a=this&&this.__decorate||function(h,_,C,S){var b,v=arguments.length,w=v<3?_:S===null?S=Object.getOwnPropertyDescriptor(_,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(h,_,C,S);else for(var A=h.length-1;A>=0;A--)(b=h[A])&&(w=(v<3?b(w):v>3?b(_,C,w):b(_,C))||w);return v>3&&w&&Object.defineProperty(_,C,w),w},l=this&&this.__param||function(h,_){return function(C,S){_(C,S,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;let c=o(2585),p=o(8460),m=o(844),y={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function g(h,_){let C=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(C|=64,C|=h.action):(C|=3&h.button,4&h.button&&(C|=64),8&h.button&&(C|=128),h.action===32?C|=32:h.action!==0||_||(C|=3)),C}let u=String.fromCharCode,f={DEFAULT:h=>{let _=[g(h,!1)+32,h.col+32,h.row+32];return _[0]>255||_[1]>255||_[2]>255?"":`\x1B[M${u(_[0])}${u(_[1])}${u(_[2])}`},SGR:h=>{let _=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${g(h,!0)};${h.col};${h.row}${_}`},SGR_PIXELS:h=>{let _=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${g(h,!0)};${h.x};${h.y}${_}`}},d=s.CoreMouseService=class extends m.Disposable{constructor(h,_){super(),this._bufferService=h,this._coreService=_,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(y))this.addProtocol(C,y[C]);for(let C of Object.keys(f))this.addEncoding(C,f[C]);this.reset()}addProtocol(h,_){this._protocols[h]=_}addEncoding(h,_){this._encodings[h]=_}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;let _=this._encodings[this._activeEncoding](h);return _&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(_):this._coreService.triggerDataEvent(_,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,_,C){if(C){if(h.x!==_.x||h.y!==_.y)return!1}else if(h.col!==_.col||h.row!==_.row)return!1;return h.button===_.button&&h.action===_.action&&h.ctrl===_.ctrl&&h.alt===_.alt&&h.shift===_.shift}};s.CoreMouseService=d=a([l(0,c.IBufferService),l(1,c.ICoreService)],d)},6975:function(i,s,o){var a=this&&this.__decorate||function(d,h,_,C){var S,b=arguments.length,v=b<3?h:C===null?C=Object.getOwnPropertyDescriptor(h,_):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(d,h,_,C);else for(var w=d.length-1;w>=0;w--)(S=d[w])&&(v=(b<3?S(v):b>3?S(h,_,v):S(h,_))||v);return b>3&&v&&Object.defineProperty(h,_,v),v},l=this&&this.__param||function(d,h){return function(_,C){h(_,C,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;let c=o(1439),p=o(8460),m=o(844),y=o(2585),g=Object.freeze({insertMode:!1}),u=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),f=s.CoreService=class extends m.Disposable{constructor(d,h,_){super(),this._bufferService=d,this._logService=h,this._optionsService=_,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,c.clone)(g),this.decPrivateModes=(0,c.clone)(u)}reset(){this.modes=(0,c.clone)(g),this.decPrivateModes=(0,c.clone)(u)}triggerDataEvent(d,h=!1){if(this._optionsService.rawOptions.disableStdin)return;let _=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&_.ybase!==_.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${d}"`,()=>d.split("").map(C=>C.charCodeAt(0))),this._onData.fire(d)}triggerBinaryEvent(d){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${d}"`,()=>d.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(d))}};s.CoreService=f=a([l(0,y.IBufferService),l(1,y.ILogService),l(2,y.IOptionsService)],f)},9074:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;let a=o(8055),l=o(8460),c=o(844),p=o(6106),m=0,y=0;class g extends c.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(d=>d?.marker.line),this._onDecorationRegistered=this.register(new l.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new l.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,c.toDisposable)(()=>this.reset()))}registerDecoration(d){if(d.marker.isDisposed)return;let h=new u(d);if(h){let _=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),_.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(let d of this._decorations.values())d.dispose();this._decorations.clear()}*getDecorationsAtCell(d,h,_){let C=0,S=0;for(let b of this._decorations.getKeyIterator(h))C=b.options.x??0,S=C+(b.options.width??1),d>=C&&d<S&&(!_||(b.options.layer??"bottom")===_)&&(yield b)}forEachDecorationAtCell(d,h,_,C){this._decorations.forEachByKey(h,S=>{m=S.options.x??0,y=m+(S.options.width??1),d>=m&&d<y&&(!_||(S.options.layer??"bottom")===_)&&C(S)})}}s.DecorationService=g;class u extends c.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(d){super(),this.options=d,this.onRenderEmitter=this.register(new l.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=d.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;let a=o(2585),l=o(8343);class c{constructor(...m){this._entries=new Map;for(let[y,g]of m)this.set(y,g)}set(m,y){let g=this._entries.get(m);return this._entries.set(m,y),g}forEach(m){for(let[y,g]of this._entries.entries())m(y,g)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}s.ServiceCollection=c,s.InstantiationService=class{constructor(){this._services=new c,this._services.set(a.IInstantiationService,this)}setService(p,m){this._services.set(p,m)}getService(p){return this._services.get(p)}createInstance(p,...m){let y=(0,l.getServiceDependencies)(p).sort((f,d)=>f.index-d.index),g=[];for(let f of y){let d=this._services.get(f.id);if(!d)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${f.id}.`);g.push(d)}let u=y.length>0?y[0].index:m.length;if(m.length!==u)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${u+1} conflicts with ${m.length} static arguments`);return new p(...m,...g)}}},7866:function(i,s,o){var a=this&&this.__decorate||function(u,f,d,h){var _,C=arguments.length,S=C<3?f:h===null?h=Object.getOwnPropertyDescriptor(f,d):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(u,f,d,h);else for(var b=u.length-1;b>=0;b--)(_=u[b])&&(S=(C<3?_(S):C>3?_(f,d,S):_(f,d))||S);return C>3&&S&&Object.defineProperty(f,d,S),S},l=this&&this.__param||function(u,f){return function(d,h){f(d,h,u)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;let c=o(844),p=o(2585),m={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF},y,g=s.LogService=class extends c.Disposable{get logLevel(){return this._logLevel}constructor(u){super(),this._optionsService=u,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),y=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(u){for(let f=0;f<u.length;f++)typeof u[f]=="function"&&(u[f]=u[f]())}_log(u,f,d){this._evalLazyOptionalParams(d),u.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+f,...d)}trace(u,...f){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,u,f)}debug(u,...f){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,u,f)}info(u,...f){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,u,f)}warn(u,...f){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,u,f)}error(u,...f){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,u,f)}};s.LogService=g=a([l(0,p.IOptionsService)],g),s.setTraceLogger=function(u){y=u},s.traceCall=function(u,f,d){if(typeof d.value!="function")throw new Error("not supported");let h=d.value;d.value=function(..._){if(y.logLevel!==p.LogLevelEnum.TRACE)return h.apply(this,_);y.trace(`GlyphRenderer#${h.name}(${_.map(S=>JSON.stringify(S)).join(", ")})`);let C=h.apply(this,_);return y.trace(`GlyphRenderer#${h.name} return`,C),C}}},7302:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;let a=o(8460),l=o(844),c=o(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:c.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let p=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends l.Disposable{constructor(g){super(),this._onOptionChange=this.register(new a.EventEmitter),this.onOptionChange=this._onOptionChange.event;let u=$({},s.DEFAULT_OPTIONS);for(let f in g)if(f in u)try{let d=g[f];u[f]=this._sanitizeAndValidateOption(f,d)}catch(d){console.error(d)}this.rawOptions=u,this.options=$({},u),this._setupOptions(),this.register((0,l.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(g,u){return this.onOptionChange(f=>{f===g&&u(this.rawOptions[g])})}onMultipleOptionChange(g,u){return this.onOptionChange(f=>{g.indexOf(f)!==-1&&u()})}_setupOptions(){let g=f=>{if(!(f in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${f}"`);return this.rawOptions[f]},u=(f,d)=>{if(!(f in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${f}"`);d=this._sanitizeAndValidateOption(f,d),this.rawOptions[f]!==d&&(this.rawOptions[f]=d,this._onOptionChange.fire(f))};for(let f in this.rawOptions){let d={get:g.bind(this,f),set:u.bind(this,f)};Object.defineProperty(this.options,f,d)}}_sanitizeAndValidateOption(g,u){switch(g){case"cursorStyle":if(u||(u=s.DEFAULT_OPTIONS[g]),!function(f){return f==="block"||f==="underline"||f==="bar"}(u))throw new Error(`"${u}" is not a valid value for ${g}`);break;case"wordSeparator":u||(u=s.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof u=="number"&&1<=u&&u<=1e3)break;u=p.includes(u)?u:s.DEFAULT_OPTIONS[g];break;case"cursorWidth":u=Math.floor(u);case"lineHeight":case"tabStopWidth":if(u<1)throw new Error(`${g} cannot be less than 1, value: ${u}`);break;case"minimumContrastRatio":u=Math.max(1,Math.min(21,Math.round(10*u)/10));break;case"scrollback":if((u=Math.min(u,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${u}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(u<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${u}`);break;case"rows":case"cols":if(!u&&u!==0)throw new Error(`${g} must be numeric, value: ${u}`);break;case"windowsPty":u=u??{}}return u}}s.OptionsService=m},2660:function(i,s,o){var a=this&&this.__decorate||function(m,y,g,u){var f,d=arguments.length,h=d<3?y:u===null?u=Object.getOwnPropertyDescriptor(y,g):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(m,y,g,u);else for(var _=m.length-1;_>=0;_--)(f=m[_])&&(h=(d<3?f(h):d>3?f(y,g,h):f(y,g))||h);return d>3&&h&&Object.defineProperty(y,g,h),h},l=this&&this.__param||function(m,y){return function(g,u){y(g,u,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;let c=o(2585),p=s.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){let y=this._bufferService.buffer;if(m.id===void 0){let _=y.addMarker(y.ybase+y.y),C={data:m,id:this._nextId++,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(C,_)),this._dataByLinkId.set(C.id,C),C.id}let g=m,u=this._getEntryIdKey(g),f=this._entriesWithId.get(u);if(f)return this.addLineToLink(f.id,y.ybase+y.y),f.id;let d=y.addMarker(y.ybase+y.y),h={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[d]};return d.onDispose(()=>this._removeMarkerFromLink(h,d)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(m,y){let g=this._dataByLinkId.get(m);if(g&&g.lines.every(u=>u.line!==y)){let u=this._bufferService.buffer.addMarker(y);g.lines.push(u),u.onDispose(()=>this._removeMarkerFromLink(g,u))}}getLinkData(m){return this._dataByLinkId.get(m)?.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,y){let g=m.lines.indexOf(y);g!==-1&&(m.lines.splice(g,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};s.OscLinkService=p=a([l(0,c.IBufferService)],p)},8343:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;let o="di$target",a="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(l){return l[a]||[]},s.createDecorator=function(l){if(s.serviceRegistry.has(l))return s.serviceRegistry.get(l);let c=function(p,m,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,u,f){u[o]===u?u[a].push({id:g,index:f}):(u[a]=[{id:g,index:f}],u[o]=u)})(c,p,y)};return c.toString=()=>l,s.serviceRegistry.set(l,c),c}},2585:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;let a=o(8343);var l;s.IBufferService=(0,a.createDecorator)("BufferService"),s.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),s.ICoreService=(0,a.createDecorator)("CoreService"),s.ICharsetService=(0,a.createDecorator)("CharsetService"),s.IInstantiationService=(0,a.createDecorator)("InstantiationService"),function(c){c[c.TRACE=0]="TRACE",c[c.DEBUG=1]="DEBUG",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.OFF=5]="OFF"}(l||(s.LogLevelEnum=l={})),s.ILogService=(0,a.createDecorator)("LogService"),s.IOptionsService=(0,a.createDecorator)("OptionsService"),s.IOscLinkService=(0,a.createDecorator)("OscLinkService"),s.IUnicodeService=(0,a.createDecorator)("UnicodeService"),s.IDecorationService=(0,a.createDecorator)("DecorationService")},1480:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;let a=o(8460),l=o(225);class c{static extractShouldJoin(m){return(1&m)!=0}static extractWidth(m){return m>>1&3}static extractCharKind(m){return m>>3}static createPropertyValue(m,y,g=!1){return(16777215&m)<<3|(3&y)<<1|(g?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new a.EventEmitter,this.onChange=this._onChange.event;let m=new l.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let y=0,g=0,u=m.length;for(let f=0;f<u;++f){let d=m.charCodeAt(f);if(55296<=d&&d<=56319){if(++f>=u)return y+this.wcwidth(d);let C=m.charCodeAt(f);56320<=C&&C<=57343?d=1024*(d-55296)+C-56320+65536:y+=this.wcwidth(C)}let h=this.charProperties(d,g),_=c.extractWidth(h);c.extractShouldJoin(h)&&(_-=c.extractWidth(g)),y+=_,g=h}return y}charProperties(m,y){return this._activeProvider.charProperties(m,y)}}s.UnicodeService=c}},e={};function n(i){var s=e[i];if(s!==void 0)return s.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;let s=n(9042),o=n(3236),a=n(844),l=n(5741),c=n(8285),p=n(7975),m=n(7090),y=["cols","rows"];class g extends a.Disposable{constructor(f){super(),this._core=this.register(new o.Terminal(f)),this._addonManager=this.register(new l.AddonManager),this._publicOptions=$({},this._core.options);let d=_=>this._core.options[_],h=(_,C)=>{this._checkReadonlyOptions(_),this._core.options[_]=C};for(let _ in this._core.options){let C={get:d.bind(this,_),set:h.bind(this,_)};Object.defineProperty(this._publicOptions,_,C)}}_checkReadonlyOptions(f){if(y.includes(f))throw new Error(`Option "${f}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new c.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let f=this._core.coreService.decPrivateModes,d="none";switch(this._core.coreMouseService.activeProtocol){case"X10":d="x10";break;case"VT200":d="vt200";break;case"DRAG":d="drag";break;case"ANY":d="any"}return{applicationCursorKeysMode:f.applicationCursorKeys,applicationKeypadMode:f.applicationKeypad,bracketedPasteMode:f.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:d,originMode:f.origin,reverseWraparoundMode:f.reverseWraparound,sendFocusMode:f.sendFocus,wraparoundMode:f.wraparound}}get options(){return this._publicOptions}set options(f){for(let d in f)this._publicOptions[d]=f[d]}blur(){this._core.blur()}focus(){this._core.focus()}input(f,d=!0){this._core.input(f,d)}resize(f,d){this._verifyIntegers(f,d),this._core.resize(f,d)}open(f){this._core.open(f)}attachCustomKeyEventHandler(f){this._core.attachCustomKeyEventHandler(f)}attachCustomWheelEventHandler(f){this._core.attachCustomWheelEventHandler(f)}registerLinkProvider(f){return this._core.registerLinkProvider(f)}registerCharacterJoiner(f){return this._checkProposedApi(),this._core.registerCharacterJoiner(f)}deregisterCharacterJoiner(f){this._checkProposedApi(),this._core.deregisterCharacterJoiner(f)}registerMarker(f=0){return this._verifyIntegers(f),this._core.registerMarker(f)}registerDecoration(f){return this._checkProposedApi(),this._verifyPositiveIntegers(f.x??0,f.width??0,f.height??0),this._core.registerDecoration(f)}hasSelection(){return this._core.hasSelection()}select(f,d,h){this._verifyIntegers(f,d,h),this._core.select(f,d,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(f,d){this._verifyIntegers(f,d),this._core.selectLines(f,d)}dispose(){super.dispose()}scrollLines(f){this._verifyIntegers(f),this._core.scrollLines(f)}scrollPages(f){this._verifyIntegers(f),this._core.scrollPages(f)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(f){this._verifyIntegers(f),this._core.scrollToLine(f)}clear(){this._core.clear()}write(f,d){this._core.write(f,d)}writeln(f,d){this._core.write(f),this._core.write(`\r
`,d)}paste(f){this._core.paste(f)}refresh(f,d){this._verifyIntegers(f,d),this._core.refresh(f,d)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(f){this._addonManager.loadAddon(this,f)}static get strings(){return s}_verifyIntegers(...f){for(let d of f)if(d===1/0||isNaN(d)||d%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...f){for(let d of f)if(d&&(d===1/0||isNaN(d)||d%1!=0||d<0))throw new Error("This API only accepts positive integers")}}i.Terminal=g})(),r})())});function ud(t,e){return Object.is(t,e)}var We=null,ys=!1,Cs=1,tn=Symbol("SIGNAL");function Ce(t){let e=We;return We=t,e}function dd(){return We}var _i={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ra(t){if(ys)throw new Error("");if(We===null)return;We.consumerOnSignalRead(t);let e=We.nextProducerIndex++;if(Ds(We),e<We.producerNode.length&&We.producerNode[e]!==t&&mi(We)){let n=We.producerNode[e];ws(n,We.producerIndexOfThis[e])}We.producerNode[e]!==t&&(We.producerNode[e]=t,We.producerIndexOfThis[e]=mi(We)?gd(t,We,e):0),We.producerLastReadVersion[e]=t.version}function o_(){Cs++}function hd(t){if(!(mi(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Cs)){if(!t.producerMustRecompute(t)&&!Oa(t)){t.dirty=!1,t.lastCleanEpoch=Cs;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Cs}}function fd(t){if(t.liveConsumerNode===void 0)return;let e=ys;ys=!0;try{for(let n of t.liveConsumerNode)n.dirty||a_(n)}finally{ys=e}}function pd(){return We?.consumerAllowSignalWrites!==!1}function a_(t){t.dirty=!0,fd(t),t.consumerMarkedDirty?.(t)}function bs(t){return t&&(t.nextProducerIndex=0),Ce(t)}function ka(t,e){if(Ce(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(mi(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)ws(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Oa(t){Ds(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(hd(n),r!==n.version))return!0}return!1}function Na(t){if(Ds(t),mi(t))for(let e=0;e<t.producerNode.length;e++)ws(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function gd(t,e,n){if(md(t),t.liveConsumerNode.length===0&&_d(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=gd(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function ws(t,e){if(md(t),t.liveConsumerNode.length===1&&_d(t))for(let r=0;r<t.producerNode.length;r++)ws(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ds(i),i.producerIndexOfThis[r]=e}}function mi(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ds(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function md(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function _d(t){return t.producerNode!==void 0}function vd(t){let e=Object.create(c_);e.computation=t;let n=()=>{if(hd(e),Ra(e),e.value===Ss)throw e.error;return e.value};return n[tn]=e,n}var Aa=Symbol("UNSET"),Ta=Symbol("COMPUTING"),Ss=Symbol("ERRORED"),c_=we($({},_i),{value:Aa,dirty:!0,error:null,equal:ud,producerMustRecompute(t){return t.value===Aa||t.value===Ta},producerRecomputeValue(t){if(t.value===Ta)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Ta;let n=bs(t),r;try{r=t.computation()}catch(i){r=Ss,t.error=i}finally{ka(t,n)}if(e!==Aa&&e!==Ss&&r!==Ss&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function l_(){throw new Error}var yd=l_;function Cd(){yd()}function Sd(t){yd=t}var u_=null;function bd(t){let e=Object.create(Dd);e.value=t;let n=()=>(Ra(e),e.value);return n[tn]=e,n}function La(t,e){pd()||Cd(),t.equal(t.value,e)||(t.value=e,d_(t))}function wd(t,e){pd()||Cd(),La(t,e(t.value))}var Dd=we($({},_i),{equal:ud,value:void 0});function d_(t){t.version++,o_(),fd(t),u_?.()}function ce(t){return typeof t=="function"}function pr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Es=pr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function vi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var je=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(s){e=s instanceof Es?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Ed(s)}catch(o){e=e??[],o instanceof Es?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Es(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ed(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&vi(n,e)}remove(e){let{_finalizers:n}=this;n&&vi(n,e),e instanceof t&&e._removeParent(this)}};je.EMPTY=(()=>{let t=new je;return t.closed=!0,t})();var Pa=je.EMPTY;function Is(t){return t instanceof je||t&&"closed"in t&&ce(t.remove)&&ce(t.add)&&ce(t.unsubscribe)}function Ed(t){ce(t)?t():t.unsubscribe()}var At={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var gr={setTimeout(t,e,...n){let{delegate:r}=gr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=gr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ms(t){gr.setTimeout(()=>{let{onUnhandledError:e}=At;if(e)e(t);else throw t})}function yi(){}var Id=Fa("C",void 0,void 0);function Md(t){return Fa("E",void 0,t)}function xd(t){return Fa("N",t,void 0)}function Fa(t,e,n){return{kind:t,value:e,error:n}}var Vn=null;function mr(t){if(At.useDeprecatedSynchronousErrorHandling){let e=!Vn;if(e&&(Vn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Vn;if(Vn=null,n)throw r}}else t()}function Ad(t){At.useDeprecatedSynchronousErrorHandling&&Vn&&(Vn.errorThrown=!0,Vn.error=t)}var jn=class extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Is(e)&&e.add(this)):this.destination=p_}static create(e,n,r){return new _r(e,n,r)}next(e){this.isStopped?Va(xd(e),this):this._next(e)}error(e){this.isStopped?Va(Md(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Va(Id,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},h_=Function.prototype.bind;function Ba(t,e){return h_.call(t,e)}var ja=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){xs(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){xs(r)}else xs(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){xs(n)}}},_r=class extends jn{constructor(e,n,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&At.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ba(e.next,s),error:e.error&&Ba(e.error,s),complete:e.complete&&Ba(e.complete,s)}):i=e}this.destination=new ja(i)}};function xs(t){At.useDeprecatedSynchronousErrorHandling?Ad(t):Ms(t)}function f_(t){throw t}function Va(t,e){let{onStoppedNotification:n}=At;n&&gr.setTimeout(()=>n(t,e))}var p_={closed:!0,next:yi,error:f_,complete:yi};var vr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pt(t){return t}function Ha(...t){return Ua(t)}function Ua(t){return t.length===0?pt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Ie=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=m_(n)?n:new _r(n,r,i);return mr(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Td(r),new r((i,s)=>{let o=new _r({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[vr](){return this}pipe(...n){return Ua(n)(this)}toPromise(n){return n=Td(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Td(t){var e;return(e=t??At.Promise)!==null&&e!==void 0?e:Promise}function g_(t){return t&&ce(t.next)&&ce(t.error)&&ce(t.complete)}function m_(t){return t&&t instanceof jn||g_(t)&&Is(t)}function $a(t){return ce(t?.lift)}function be(t){return e=>{if($a(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ve(t,e,n,r,i){return new Wa(t,e,n,r,i)}var Wa=class extends jn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function yr(){return be((t,e)=>{let n=null;t._refCount++;let r=ve(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Cr=class extends Ie{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,$a(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new je;let n=this.getSubject();e.add(this.source.subscribe(ve(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=je.EMPTY)}return e}refCount(){return yr()(this)}};var Rd=pr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=(()=>{class t extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new As(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Rd}next(n){mr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){mr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){mr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Pa:(this.currentObservers=null,s.push(n),new je(()=>{this.currentObservers=null,vi(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new Ie;return n.source=this,n}}return t.create=(e,n)=>new As(e,n),t})(),As=class extends Ae{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Pa}};var Ze=class extends Ae{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var gt=new Ie(t=>t.complete());function kd(t){return t&&ce(t.schedule)}function Od(t){return t[t.length-1]}function Ts(t){return ce(Od(t))?t.pop():void 0}function Sn(t){return kd(Od(t))?t.pop():void 0}function Ld(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(p){try{c(r.next(p))}catch(m){o(m)}}function l(p){try{c(r.throw(p))}catch(m){o(m)}}function c(p){p.done?s(p.value):i(p.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Nd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hn(t){return this instanceof Hn?(this.v=t,this):new Hn(t)}function Pd(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(u){return Promise.resolve(u).then(g,m)}}function a(g,u){r[g]&&(i[g]=function(f){return new Promise(function(d,h){s.push([g,f,d,h])>1||l(g,f)})},u&&(i[g]=u(i[g])))}function l(g,u){try{c(r[g](u))}catch(f){y(s[0][3],f)}}function c(g){g.value instanceof Hn?Promise.resolve(g.value.v).then(p,m):y(s[0][2],g)}function p(g){l("next",g)}function m(g){l("throw",g)}function y(g,u){g(u),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Fd(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Nd=="function"?Nd(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var Rs=t=>t&&typeof t.length=="number"&&typeof t!="function";function ks(t){return ce(t?.then)}function Os(t){return ce(t[vr])}function Ns(t){return Symbol.asyncIterator&&ce(t?.[Symbol.asyncIterator])}function Ls(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function __(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ps=__();function Fs(t){return ce(t?.[Ps])}function Bs(t){return Pd(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Hn(n.read());if(i)return yield Hn(void 0);yield yield Hn(r)}}finally{n.releaseLock()}})}function Vs(t){return ce(t?.getReader)}function He(t){if(t instanceof Ie)return t;if(t!=null){if(Os(t))return v_(t);if(Rs(t))return y_(t);if(ks(t))return C_(t);if(Ns(t))return Bd(t);if(Fs(t))return S_(t);if(Vs(t))return b_(t)}throw Ls(t)}function v_(t){return new Ie(e=>{let n=t[vr]();if(ce(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function y_(t){return new Ie(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function C_(t){return new Ie(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ms)})}function S_(t){return new Ie(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Bd(t){return new Ie(e=>{w_(t,e).catch(n=>e.error(n))})}function b_(t){return Bd(Bs(t))}function w_(t,e){var n,r,i,s;return Ld(this,void 0,void 0,function*(){try{for(n=Fd(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ct(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function js(t,e=0){return be((n,r)=>{n.subscribe(ve(r,i=>ct(r,t,()=>r.next(i),e),()=>ct(r,t,()=>r.complete(),e),i=>ct(r,t,()=>r.error(i),e)))})}function Hs(t,e=0){return be((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Vd(t,e){return He(t).pipe(Hs(e),js(e))}function jd(t,e){return He(t).pipe(Hs(e),js(e))}function Hd(t,e){return new Ie(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Ud(t,e){return new Ie(n=>{let r;return ct(n,e,()=>{r=t[Ps](),ct(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function Us(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ie(n=>{ct(n,e,()=>{let r=t[Symbol.asyncIterator]();ct(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function $d(t,e){return Us(Bs(t),e)}function Wd(t,e){if(t!=null){if(Os(t))return Vd(t,e);if(Rs(t))return Hd(t,e);if(ks(t))return jd(t,e);if(Ns(t))return Us(t,e);if(Fs(t))return Ud(t,e);if(Vs(t))return $d(t,e)}throw Ls(t)}function Pe(t,e){return e?Wd(t,e):He(t)}function le(...t){let e=Sn(t);return Pe(t,e)}function Sr(t,e){let n=ce(t)?t:()=>t,r=i=>i.error(n());return new Ie(e?i=>e.schedule(r,0,i):r)}function za(t){return!!t&&(t instanceof Ie||ce(t.lift)&&ce(t.subscribe))}var nn=pr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ge(t,e){return be((n,r)=>{let i=0;n.subscribe(ve(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:D_}=Array;function E_(t,e){return D_(e)?t(...e):t(e)}function $s(t){return ge(e=>E_(t,e))}var{isArray:I_}=Array,{getPrototypeOf:M_,prototype:x_,keys:A_}=Object;function Ws(t){if(t.length===1){let e=t[0];if(I_(e))return{args:e,keys:null};if(T_(e)){let n=A_(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function T_(t){return t&&typeof t=="object"&&M_(t)===x_}function zs(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Gs(...t){let e=Sn(t),n=Ts(t),{args:r,keys:i}=Ws(t);if(r.length===0)return Pe([],e);let s=new Ie(R_(r,e,i?o=>zs(i,o):pt));return n?s.pipe($s(n)):s}function R_(t,e,n=pt){return r=>{zd(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)zd(e,()=>{let c=Pe(t[l],e),p=!1;c.subscribe(ve(r,m=>{s[l]=m,p||(p=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function zd(t,e,n){t?ct(n,t,e):e()}function Gd(t,e,n,r,i,s,o,a){let l=[],c=0,p=0,m=!1,y=()=>{m&&!l.length&&!c&&e.complete()},g=f=>c<r?u(f):l.push(f),u=f=>{s&&e.next(f),c++;let d=!1;He(n(f,p++)).subscribe(ve(e,h=>{i?.(h),s?g(h):e.next(h)},()=>{d=!0},void 0,()=>{if(d)try{for(c--;l.length&&c<r;){let h=l.shift();o?ct(e,o,()=>u(h)):u(h)}y()}catch(h){e.error(h)}}))};return t.subscribe(ve(e,g,()=>{m=!0,y()})),()=>{a?.()}}function ze(t,e,n=1/0){return ce(e)?ze((r,i)=>ge((s,o)=>e(r,s,i,o))(He(t(r,i))),n):(typeof e=="number"&&(n=e),be((r,i)=>Gd(r,i,t,n)))}function Ga(t=1/0){return ze(pt,t)}function qd(){return Ga(1)}function br(...t){return qd()(Pe(t,Sn(t)))}function qs(t){return new Ie(e=>{He(t()).subscribe(e)})}function qa(...t){let e=Ts(t),{args:n,keys:r}=Ws(t),i=new Ie(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let p=0;p<o;p++){let m=!1;He(n[p]).subscribe(ve(s,y=>{m||(m=!0,c--),a[p]=y},()=>l--,void 0,()=>{(!l||!m)&&(c||s.next(r?zs(r,a):a),s.complete())}))}});return e?i.pipe($s(e)):i}function Tt(t,e){return be((n,r)=>{let i=0;n.subscribe(ve(r,s=>t.call(e,s,i++)&&r.next(s)))})}function bn(t){return be((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ve(n,void 0,void 0,o=>{s=He(t(o,bn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Kd(t,e,n,r,i){return(s,o)=>{let a=n,l=e,c=0;s.subscribe(ve(o,p=>{let m=c++;l=a?t(l,p,m):(a=!0,p),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function wr(t,e){return ce(e)?ze(t,e,1):ze(t,1)}function wn(t){return be((e,n)=>{let r=!1;e.subscribe(ve(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function rn(t){return t<=0?()=>gt:be((e,n)=>{let r=0;e.subscribe(ve(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ka(t){return ge(()=>t)}function Ks(t=k_){return be((e,n)=>{let r=!1;e.subscribe(ve(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function k_(){return new nn}function Ci(t){return be((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function jt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Tt((i,s)=>t(i,s,r)):pt,rn(1),n?wn(e):Ks(()=>new nn))}function Dr(t){return t<=0?()=>gt:be((e,n)=>{let r=[];e.subscribe(ve(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Za(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Tt((i,s)=>t(i,s,r)):pt,Dr(1),n?wn(e):Ks(()=>new nn))}function Ya(t,e){return be(Kd(t,e,arguments.length>=2,!0))}function Qa(...t){let e=Sn(t);return be((n,r)=>{(e?br(t,n,e):br(t,n)).subscribe(r)})}function Rt(t,e){return be((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ve(r,l=>{i?.unsubscribe();let c=0,p=s++;He(t(l,p)).subscribe(i=ve(r,m=>r.next(e?e(l,m,p,c++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Xa(t){return be((e,n)=>{He(t).subscribe(ve(n,()=>n.complete(),yi)),!n.closed&&e.subscribe(n)})}function Ye(t,e,n){let r=ce(t)||e||n?{next:t,error:e,complete:n}:t;return r?be((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ve(s,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),s.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):pt}var O_="https://g.co/ng/security#xss",ne=class extends Error{constructor(e,n){super(dl(e,n)),this.code=e}};function dl(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ri(t){return{toString:t}.toString()}var Zs="__parameters__";function N_(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Oh(t,e,n){return Ri(()=>{let r=N_(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,c,p){let m=l.hasOwnProperty(Zs)?l[Zs]:Object.defineProperty(l,Zs,{value:[]})[Zs];for(;m.length<=p;)m.push(null);return(m[p]=m[p]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var fc=globalThis;function xe(t){for(let e in t)if(t[e]===xe)return e;throw Error("Could not find renamed property on target object.")}function L_(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function st(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(st).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function pc(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var P_=xe({__forward_ref__:xe});function ln(t){return t.__forward_ref__=ln,t.toString=function(){return st(this())},t}function it(t){return Nh(t)?t():t}function Nh(t){return typeof t=="function"&&t.hasOwnProperty(P_)&&t.__forward_ref__===ln}function ie(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function tr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Io(t){return Zd(t,Ph)||Zd(t,Fh)}function Lh(t){return Io(t)!==null}function Zd(t,e){return t.hasOwnProperty(e)?t[e]:null}function F_(t){let e=t&&(t[Ph]||t[Fh]);return e||null}function Yd(t){return t&&(t.hasOwnProperty(Qd)||t.hasOwnProperty(B_))?t[Qd]:null}var Ph=xe({\u0275prov:xe}),Qd=xe({\u0275inj:xe}),Fh=xe({ngInjectableDef:xe}),B_=xe({ngInjectorDef:xe}),oe=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ie({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Bh(t){return t&&!!t.\u0275providers}var V_=xe({\u0275cmp:xe}),j_=xe({\u0275dir:xe}),H_=xe({\u0275pipe:xe}),U_=xe({\u0275mod:xe}),io=xe({\u0275fac:xe}),Si=xe({__NG_ELEMENT_ID__:xe}),Xd=xe({__NG_ENV_ID__:xe});function hl(t){return typeof t=="string"?t:t==null?"":String(t)}function $_(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():hl(t)}function W_(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ne(-200,t)}function fl(t,e){throw new ne(-201,!1)}var fe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(fe||{}),gc;function Vh(){return gc}function Ct(t){let e=gc;return gc=t,e}function jh(t,e,n){let r=Io(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&fe.Optional)return null;if(e!==void 0)return e;fl(t,"Injector")}var z_={},bi=z_,mc="__NG_DI_FLAG__",so="ngTempTokenPath",G_="ngTokenPath",q_=/\n/gm,K_="\u0275",Jd="__source",xr;function Z_(){return xr}function Dn(t){let e=xr;return xr=t,e}function Y_(t,e=fe.Default){if(xr===void 0)throw new ne(-203,!1);return xr===null?jh(t,void 0,e):xr.get(t,e&fe.Optional?null:void 0,e)}function ye(t,e=fe.Default){return(Vh()||Y_)(it(t),e)}function K(t,e=fe.Default){return ye(t,Mo(e))}function Mo(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function _c(t){let e=[];for(let n=0;n<t.length;n++){let r=it(t[n]);if(Array.isArray(r)){if(r.length===0)throw new ne(900,!1);let i,s=fe.Default;for(let o=0;o<r.length;o++){let a=r[o],l=Q_(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(ye(i,s))}else e.push(ye(r))}return e}function Hh(t,e){return t[mc]=e,t.prototype[mc]=e,t}function Q_(t){return t[mc]}function X_(t,e,n,r){let i=t[so];throw e[Jd]&&i.unshift(e[Jd]),t.message=J_(`
`+t.message,i,n,r),t[G_]=i,t[so]=null,t}function J_(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==K_?t.slice(2):t;let i=st(e);if(Array.isArray(e))i=e.map(st).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):st(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(q_,`
  `)}`}var pl=Hh(Oh("Optional"),8);var Uh=Hh(Oh("SkipSelf"),4);function Tr(t,e){let n=t.hasOwnProperty(io);return n?t[io]:null}function ev(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function tv(t){return t.flat(Number.POSITIVE_INFINITY)}function gl(t,e){t.forEach(n=>Array.isArray(n)?gl(n,e):e(n))}function $h(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function oo(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function nv(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function xo(t,e,n){let r=ki(t,e);return r>=0?t[r|1]=n:(r=~r,nv(t,r,e,n)),r}function Ja(t,e){let n=ki(t,e);if(n>=0)return t[n|1]}function ki(t,e){return rv(t,e,1)}function rv(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Rr={},lt=[],kr=new oe(""),Wh=new oe("",-1),zh=new oe(""),ao=class{get(e,n=bi){if(n===bi){let r=new Error(`NullInjectorError: No provider for ${st(e)}!`);throw r.name="NullInjectorError",r}return n}},Gh=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Gh||{}),$t=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}($t||{}),Mn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Mn||{});function iv(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function vc(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];ov(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function sv(t){return t===3||t===4||t===6}function ov(t){return t.charCodeAt(0)===64}function wi(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?eh(t,n,i,null,e[++r]):eh(t,n,i,null,null))}}return t}function eh(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var qh="ng-template";function av(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&iv(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(ml(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function ml(t){return t.type===4&&t.value!==qh}function cv(t,e,n){let r=t.type===4&&!n?qh:t.value;return e===r}function lv(t,e,n){let r=4,i=t.attrs,s=i!==null?hv(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!kt(r)&&!kt(l))return!1;if(o&&kt(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!cv(t,l,n)||l===""&&e.length===1){if(kt(r))return!1;o=!0}}else if(r&8){if(i===null||!av(t,i,l,n)){if(kt(r))return!1;o=!0}}else{let c=e[++a],p=uv(l,i,ml(t),n);if(p===-1){if(kt(r))return!1;o=!0;continue}if(c!==""){let m;if(p>s?m="":m=i[p+1].toLowerCase(),r&2&&c!==m){if(kt(r))return!1;o=!0}}}}return kt(r)||o}function kt(t){return(t&1)===0}function uv(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return fv(e,t)}function dv(t,e,n=!1){for(let r=0;r<e.length;r++)if(lv(t,e[r],n))return!0;return!1}function hv(t){for(let e=0;e<t.length;e++){let n=t[e];if(sv(n))return e}return t.length}function fv(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function th(t,e){return t?":not("+e.trim()+")":e}function pv(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!kt(o)&&(e+=th(s,i),i=""),r=o,s=s||!kt(r);n++}return i!==""&&(e+=th(s,i)),e}function gv(t){return t.map(pv).join(",")}function mv(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!kt(i))break;i=s}r++}return{attrs:e,classes:n}}function Ne(t){return Ri(()=>{let e=Xh(t),n=we($({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Gh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||$t.Emulated,styles:t.styles||lt,_:null,schemas:t.schemas||null,tView:null,id:""});Jh(n);let r=t.dependencies;return n.directiveDefs=rh(r,!1),n.pipeDefs=rh(r,!0),n.id=yv(n),n})}function _v(t){return Wn(t)||Kh(t)}function vv(t){return t!==null}function nr(t){return Ri(()=>({type:t.type,bootstrap:t.bootstrap||lt,declarations:t.declarations||lt,imports:t.imports||lt,exports:t.exports||lt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nh(t,e){if(t==null)return Rr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Mn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Mn.None?[r,a]:r,e[s]=o):n[s]=r}return n}function qe(t){return Ri(()=>{let e=Xh(t);return Jh(e),e})}function Wn(t){return t[V_]||null}function Kh(t){return t[j_]||null}function Zh(t){return t[H_]||null}function Yh(t){let e=Wn(t)||Kh(t)||Zh(t);return e!==null?e.standalone:!1}function Qh(t,e){let n=t[U_]||null;if(!n&&e===!0)throw new Error(`Type ${st(t)} does not have '\u0275mod' property.`);return n}function Xh(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Rr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||lt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nh(t.inputs,e),outputs:nh(t.outputs),debugInfo:null}}function Jh(t){t.features?.forEach(e=>e(t))}function rh(t,e){if(!t)return null;let n=e?Zh:_v;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(vv)}function yv(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ao(t){return{\u0275providers:t}}function Cv(...t){return{\u0275providers:ef(!0,t),\u0275fromNgModule:!0}}function ef(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return gl(e,o=>{let a=o;yc(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&tf(i,s),n}function tf(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];_l(i,s=>{e(s,r)})}}function yc(t,e,n,r){if(t=it(t),!t)return!1;let i=null,s=Yd(t),o=!s&&Wn(t);if(!s&&!o){let l=t.ngModule;if(s=Yd(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)yc(c,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;try{gl(s.imports,p=>{yc(p,e,n,r)&&(c||=[],c.push(p))})}finally{}c!==void 0&&tf(c,e)}if(!a){let c=Tr(i)||(()=>new i);e({provide:i,useFactory:c,deps:lt},i),e({provide:zh,useValue:i,multi:!0},i),e({provide:kr,useValue:()=>ye(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let c=t;_l(l,p=>{e(p,c)})}}else return!1;return i!==t&&t.providers!==void 0}function _l(t,e){for(let n of t)Bh(n)&&(n=n.\u0275providers),Array.isArray(n)?_l(n,e):e(n)}var Sv=xe({provide:String,useValue:xe});function nf(t){return t!==null&&typeof t=="object"&&Sv in t}function bv(t){return!!(t&&t.useExisting)}function wv(t){return!!(t&&t.useFactory)}function Or(t){return typeof t=="function"}function Dv(t){return!!t.useClass}var To=new oe(""),Xs={},Ev={},ec;function vl(){return ec===void 0&&(ec=new ao),ec}var bt=class{},Di=class extends bt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sc(e,o=>this.processProvider(o)),this.records.set(Wh,Er(void 0,this)),i.has("environment")&&this.records.set(bt,Er(void 0,this));let s=this.records.get(To);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(zh,lt,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Dn(this),r=Ct(void 0),i;try{return e()}finally{Dn(n),Ct(r)}}get(e,n=bi,r=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Xd))return e[Xd](this);r=Mo(r);let i,s=Dn(this),o=Ct(void 0);try{if(!(r&fe.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=Tv(e)&&Io(e);c&&this.injectableDefInScope(c)?l=Er(Cc(e),Xs):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&fe.Self?vl():this.parent;return n=r&fe.Optional&&n===bi?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[so]=a[so]||[]).unshift(st(e)),s)throw a;return X_(a,e,"R3InjectorError",this.source)}else throw a}finally{Ct(o),Dn(s)}}resolveInjectorInitializers(){let e=Ce(null),n=Dn(this),r=Ct(void 0),i;try{let s=this.get(kr,lt,fe.Self);for(let o of s)o()}finally{Dn(n),Ct(r),Ce(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(st(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(e){e=it(e);let n=Or(e)?e:it(e&&e.provide),r=Mv(e);if(!Or(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Er(void 0,Xs,!0),i.factory=()=>_c(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Ce(null);try{return n.value===Xs&&(n.value=Ev,n.value=n.factory()),typeof n.value=="object"&&n.value&&Av(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=it(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Cc(t){let e=Io(t),n=e!==null?e.factory:Tr(t);if(n!==null)return n;if(t instanceof oe)throw new ne(204,!1);if(t instanceof Function)return Iv(t);throw new ne(204,!1)}function Iv(t){if(t.length>0)throw new ne(204,!1);let n=F_(t);return n!==null?()=>n.factory(t):()=>new t}function Mv(t){if(nf(t))return Er(void 0,t.useValue);{let e=rf(t);return Er(e,Xs)}}function rf(t,e,n){let r;if(Or(t)){let i=it(t);return Tr(i)||Cc(i)}else if(nf(t))r=()=>it(t.useValue);else if(wv(t))r=()=>t.useFactory(..._c(t.deps||[]));else if(bv(t))r=()=>ye(it(t.useExisting));else{let i=it(t&&(t.useClass||t.provide));if(xv(t))r=()=>new i(..._c(t.deps));else return Tr(i)||Cc(i)}return r}function Er(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function xv(t){return!!t.deps}function Av(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Tv(t){return typeof t=="function"||typeof t=="object"&&t instanceof oe}function Sc(t,e){for(let n of t)Array.isArray(n)?Sc(n,e):n&&Bh(n)?Sc(n.\u0275providers,e):e(n)}function un(t,e){t instanceof Di&&t.assertNotDestroyed();let n,r=Dn(t),i=Ct(void 0);try{return e()}finally{Dn(r),Ct(i)}}function Rv(){return Vh()!==void 0||Z_()!=null}function kv(t){return typeof t=="function"}var dn=0,ue=1,se=2,tt=3,Ot=4,Nt=5,co=6,lo=7,wt=8,Nr=9,sn=10,Fe=11,Ei=12,ih=13,jr=14,Wt=15,zn=16,Ir=17,on=18,Ro=19,sf=20,En=21,tc=22,St=23,zt=25,of=1;var Gn=7,uo=8,Lr=9,ut=10,ho=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ho||{});function In(t){return Array.isArray(t)&&typeof t[of]=="object"}function hn(t){return Array.isArray(t)&&t[of]===!0}function af(t){return(t.flags&4)!==0}function ko(t){return t.componentOffset>-1}function yl(t){return(t.flags&1)===1}function xn(t){return!!t.template}function bc(t){return(t[se]&512)!==0}var wc=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function cf(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function qt(){return lf}function lf(t){return t.type.prototype.ngOnChanges&&(t.setInput=Nv),Ov}qt.ngInherit=!0;function Ov(){let t=df(this),e=t?.current;if(e){let n=t.previous;if(n===Rr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Nv(t,e,n,r,i){let s=this.declaredInputs[r],o=df(t)||Lv(t,{previous:Rr,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new wc(c&&c.currentValue,n,l===Rr),cf(t,e,i,n)}var uf="__ngSimpleChanges__";function df(t){return t[uf]||null}function Lv(t,e){return t[uf]=e}var sh=null;var Ht=function(t,e,n){sh?.(t,e,n)},Pv="svg",Fv="math";function Gt(t){for(;Array.isArray(t);)t=t[dn];return t}function hf(t,e){return Gt(e[t])}function Dt(t,e){return Gt(e[t.index])}function Cl(t,e){return t.data[e]}function Rn(t,e){let n=e[t];return In(n)?n:n[dn]}function Bv(t){return(t[se]&4)===4}function Sl(t){return(t[se]&128)===128}function Vv(t){return hn(t[tt])}function fo(t,e){return e==null?null:t[e]}function ff(t){t[Ir]=0}function pf(t){t[se]&1024||(t[se]|=1024,Sl(t)&&Oo(t))}function jv(t,e){for(;t>0;)e=e[jr],t--;return e}function Ii(t){return!!(t[se]&9216||t[St]?.dirty)}function Dc(t){t[sn].changeDetectionScheduler?.notify(7),t[se]&64&&(t[se]|=1024),Ii(t)&&Oo(t)}function Oo(t){t[sn].changeDetectionScheduler?.notify(0);let e=qn(t);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!Sl(e)));)e=qn(e)}function gf(t,e){if((t[se]&256)===256)throw new ne(911,!1);t[En]===null&&(t[En]=[]),t[En].push(e)}function Hv(t,e){if(t[En]===null)return;let n=t[En].indexOf(e);n!==-1&&t[En].splice(n,1)}function qn(t){let e=t[tt];return hn(e)?e[tt]:e}var pe={lFrame:Ef(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var mf=!1;function Uv(){return pe.lFrame.elementDepthCount}function $v(){pe.lFrame.elementDepthCount++}function Wv(){pe.lFrame.elementDepthCount--}function _f(){return pe.bindingsEnabled}function zv(){return pe.skipHydrationRootTNode!==null}function Gv(t){return pe.skipHydrationRootTNode===t}function qv(){pe.skipHydrationRootTNode=null}function De(){return pe.lFrame.lView}function Qe(){return pe.lFrame.tView}function me(t){return pe.lFrame.contextLView=t,t[wt]}function _e(t){return pe.lFrame.contextLView=null,t}function dt(){let t=vf();for(;t!==null&&t.type===64;)t=t.parent;return t}function vf(){return pe.lFrame.currentTNode}function Kv(){let t=pe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Oi(t,e){let n=pe.lFrame;n.currentTNode=t,n.isParent=e}function yf(){return pe.lFrame.isParent}function Zv(){pe.lFrame.isParent=!1}function Cf(){return mf}function oh(t){mf=t}function Yv(){let t=pe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Qv(t){return pe.lFrame.bindingIndex=t}function Ni(){return pe.lFrame.bindingIndex++}function Sf(t){let e=pe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Xv(){return pe.lFrame.inI18n}function Jv(t,e){let n=pe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ec(e)}function ey(){return pe.lFrame.currentDirectiveIndex}function Ec(t){pe.lFrame.currentDirectiveIndex=t}function ty(t){let e=pe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function bf(){return pe.lFrame.currentQueryIndex}function bl(t){pe.lFrame.currentQueryIndex=t}function ny(t){let e=t[ue];return e.type===2?e.declTNode:e.type===1?t[Nt]:null}function wf(t,e,n){if(n&fe.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&fe.Host);)if(i=ny(s),i===null||(s=s[jr],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=pe.lFrame=Df();return r.currentTNode=e,r.lView=t,!0}function wl(t){let e=Df(),n=t[ue];pe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Df(){let t=pe.lFrame,e=t===null?null:t.child;return e===null?Ef(t):e}function Ef(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function If(){let t=pe.lFrame;return pe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Mf=If;function Dl(){let t=If();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ry(t){return(pe.lFrame.contextLView=jv(t,pe.lFrame.contextLView))[wt]}function rr(){return pe.lFrame.selectedIndex}function Kn(t){pe.lFrame.selectedIndex=t}function No(){let t=pe.lFrame;return Cl(t.tView,t.selectedIndex)}function iy(){return pe.lFrame.currentNamespace}var xf=!0;function El(){return xf}function Il(t){xf=t}function sy(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=lf(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Ml(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:p}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),p!=null&&(t.destroyHooks??=[]).push(n,p)}}function Js(t,e,n){Af(t,e,3,n)}function eo(t,e,n,r){(t[se]&3)===n&&Af(t,e,n,r)}function nc(t,e){let n=t[se];(n&3)===e&&(n&=16383,n+=1,t[se]=n)}function Af(t,e,n,r){let i=r!==void 0?t[Ir]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[Ir]+=65536),(a<s||s==-1)&&(oy(t,n,e,l),t[Ir]=(t[Ir]&4294901760)+l+2),l++}function ah(t,e){Ht(4,t,e);let n=Ce(null);try{e.call(t)}finally{Ce(n),Ht(5,t,e)}}function oy(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[se]>>14<t[Ir]>>16&&(t[se]&3)===e&&(t[se]+=16384,ah(a,s)):ah(a,s)}var Ar=-1,Zn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function ay(t){return t instanceof Zn}function cy(t){return(t.flags&8)!==0}function ly(t){return(t.flags&16)!==0}var rc={},Ic=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Mo(r);let i=this.injector.get(e,rc,r);return i!==rc||n===rc?i:this.parentInjector.get(e,n,r)}};function Tf(t){return t!==Ar}function po(t){return t&32767}function uy(t){return t>>16}function go(t,e){let n=uy(t),r=e;for(;n>0;)r=r[jr],n--;return r}var Mc=!0;function ch(t){let e=Mc;return Mc=t,e}var dy=256,Rf=dy-1,kf=5,hy=0,Ut={};function fy(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Si)&&(r=n[Si]),r==null&&(r=n[Si]=hy++);let i=r&Rf,s=1<<i;e.data[t+(i>>kf)]|=s}function mo(t,e){let n=Of(t,e);if(n!==-1)return n;let r=e[ue];r.firstCreatePass&&(t.injectorIndex=e.length,ic(r.data,t),ic(e,null),ic(r.blueprint,null));let i=xl(t,e),s=t.injectorIndex;if(Tf(i)){let o=po(i),a=go(i,e),l=a[ue].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function ic(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Of(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function xl(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Bf(i),r===null)return Ar;if(n++,i=i[jr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ar}function xc(t,e,n){fy(t,e,n)}function Nf(t,e,n){if(n&fe.Optional||t!==void 0)return t;fl(e,"NodeInjector")}function Lf(t,e,n,r){if(n&fe.Optional&&r===void 0&&(r=null),!(n&(fe.Self|fe.Host))){let i=t[Nr],s=Ct(void 0);try{return i?i.get(e,r,n&fe.Optional):jh(e,r,n&fe.Optional)}finally{Ct(s)}}return Nf(r,e,n)}function Pf(t,e,n,r=fe.Default,i){if(t!==null){if(e[se]&2048&&!(r&fe.Self)){let o=_y(t,e,n,r,Ut);if(o!==Ut)return o}let s=Ff(t,e,n,r,Ut);if(s!==Ut)return s}return Lf(e,n,r,i)}function Ff(t,e,n,r,i){let s=gy(n);if(typeof s=="function"){if(!wf(e,t,r))return r&fe.Host?Nf(i,n,r):Lf(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&fe.Optional))fl(n);else return o}finally{Mf()}}else if(typeof s=="number"){let o=null,a=Of(t,e),l=Ar,c=r&fe.Host?e[Wt][Nt]:null;for((a===-1||r&fe.SkipSelf)&&(l=a===-1?xl(t,e):e[a+8],l===Ar||!uh(r,!1)?a=-1:(o=e[ue],a=po(l),e=go(l,e)));a!==-1;){let p=e[ue];if(lh(s,a,p.data)){let m=py(a,e,n,o,r,c);if(m!==Ut)return m}l=e[a+8],l!==Ar&&uh(r,e[ue].data[a+8]===c)&&lh(s,a,e)?(o=p,a=po(l),e=go(l,e)):a=-1}}return i}function py(t,e,n,r,i,s){let o=e[ue],a=o.data[t+8],l=r==null?ko(a)&&Mc:r!=o&&(a.type&3)!==0,c=i&fe.Host&&s===a,p=to(a,o,n,l,c);return p!==null?Yn(e,o,p,a):Ut}function to(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,l=t.directiveStart,c=t.directiveEnd,p=s>>20,m=r?a:a+p,y=i?a+p:c;for(let g=m;g<y;g++){let u=o[g];if(g<l&&n===u||g>=l&&u.type===n)return g}if(i){let g=o[l];if(g&&xn(g)&&g.type===n)return l}return null}function Yn(t,e,n,r){let i=t[n],s=e.data;if(ay(i)){let o=i;o.resolving&&W_($_(s[n]));let a=ch(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?Ct(o.injectImpl):null,p=wf(t,r,fe.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&sy(n,s[n],e)}finally{c!==null&&Ct(c),ch(a),o.resolving=!1,Mf()}}return i}function gy(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Si)?t[Si]:void 0;return typeof e=="number"?e>=0?e&Rf:my:e}function lh(t,e,n){let r=1<<t;return!!(n[e+(t>>kf)]&r)}function uh(t,e){return!(t&fe.Self)&&!(t&fe.Host&&e)}var $n=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Pf(this._tNode,this._lView,e,Mo(r),n)}};function my(){return new $n(dt(),De())}function kn(t){return Ri(()=>{let e=t.prototype.constructor,n=e[io]||Ac(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[io]||Ac(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ac(t){return Nh(t)?()=>{let e=Ac(it(t));return e&&e()}:Tr(t)}function _y(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[se]&2048&&!(o[se]&512);){let a=Ff(s,o,n,r|fe.Self,Ut);if(a!==Ut)return a;let l=s.parent;if(!l){let c=o[sf];if(c){let p=c.get(n,Ut,r);if(p!==Ut)return p}l=Bf(o),o=o[jr]}s=l}return i}function Bf(t){let e=t[ue],n=e.type;return n===2?e.declTNode:n===1?t[Nt]:null}function dh(t,e=null,n=null,r){let i=Vf(t,e,n,r);return i.resolveInjectorInitializers(),i}function Vf(t,e=null,n=null,r,i=new Set){let s=[n||lt,Cv(t)];return r=r||(typeof t=="object"?void 0:st(t)),new Di(s,e||vl(),r||null,i)}var Un=class Un{static create(e,n){if(Array.isArray(e))return dh({name:""},n,e,"");{let r=e.name??"";return dh({name:r},e.parent,e.providers,r)}}};Un.THROW_IF_NOT_FOUND=bi,Un.NULL=new ao,Un.\u0275prov=ie({token:Un,providedIn:"any",factory:()=>ye(Wh)}),Un.__NG_ELEMENT_ID__=-1;var An=Un;var vy=new oe("");vy.__NG_ELEMENT_ID__=t=>{let e=dt();if(e===null)throw new ne(204,!1);if(e.type&2)return e.value;if(t&fe.Optional)return null;throw new ne(204,!1)};var yy="ngOriginalError";function sc(t){return t[yy]}var an=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&sc(e);for(;n&&sc(n);)n=sc(n);return n||null}},jf=new oe("",{providedIn:"root",factory:()=>K(an).handleError.bind(void 0)}),Hf=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Cy,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Tc=class extends Hf{constructor(e){super(),this._lView=e}onDestroy(e){return gf(this._lView,e),()=>Hv(this._lView,e)}};function Cy(){return new Tc(De())}function Sy(){return Hr(dt(),De())}function Hr(t,e){return new Et(Dt(t,e))}var Et=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=Sy;let t=e;return t})();function by(t){return t instanceof Et?t.nativeElement:t}var Ur=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ze(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=ie({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var Rc=class extends Ae{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Rv()&&(this.destroyRef=K(Hf,{optional:!0})??void 0,this.pendingTasks=K(Ur,{optional:!0})??void 0)}emit(e){let n=Ce(null);try{super.next(e)}finally{Ce(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof je&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Te=Rc;function wy(){return this._results[Symbol.iterator]()}var kc=class t{get changes(){return this._changes??=new Te}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=wy)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=tv(e);(this._changesDetected=!ev(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Uf(t){return(t.flags&128)===128}var $f=new Map,Dy=0;function Ey(){return Dy++}function Iy(t){$f.set(t[Ro],t)}function My(t){$f.delete(t[Ro])}var hh="__ngContext__";function Qn(t,e){In(e)?(t[hh]=e[Ro],Iy(e)):t[hh]=e}function Wf(t){return Gf(t[Ei])}function zf(t){return Gf(t[Ot])}function Gf(t){for(;t!==null&&!hn(t);)t=t[Ot];return t}var Oc;function qf(t){Oc=t}function xy(){if(Oc!==void 0)return Oc;if(typeof document<"u")return document;throw new ne(210,!1)}var Al=new oe("",{providedIn:"root",factory:()=>Ay}),Ay="ng",Tl=new oe(""),$r=new oe("",{providedIn:"platform",factory:()=>"unknown"});var Rl=new oe("",{providedIn:"root",factory:()=>xy().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ty="h",Ry="b";var ky=()=>null;function kl(t,e,n=!1){return ky(t,e,n)}var Kf=!1,Oy=new oe("",{providedIn:"root",factory:()=>Kf});var Nc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${O_})`}};function Li(t){return t instanceof Nc?t.changingThisBreaksApplicationSecurity:t}function Zf(t){return t.ownerDocument.defaultView}function Yf(t){return t instanceof Function?t():t}var cn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(cn||{}),Ny;function Ol(t,e){return Ny(t,e)}function Mr(t,e,n,r,i){if(r!=null){let s,o=!1;hn(r)?s=r:In(r)&&(o=!0,r=r[dn]);let a=Gt(r);t===0&&n!==null?i==null?ep(e,n,a):vo(e,n,a,i||null,!0):t===1&&n!==null?vo(e,n,a,i||null,!0):t===2?Yy(e,a,o):t===3&&e.destroyNode(a),s!=null&&Xy(e,t,s,n,i)}}function Ly(t,e){return t.createText(e)}function Py(t,e,n){t.setValue(e,n)}function Qf(t,e,n){return t.createElement(e,n)}function Fy(t,e){Xf(t,e),e[dn]=null,e[Nt]=null}function By(t,e,n,r,i,s){r[dn]=i,r[Nt]=e,Lo(t,r,n,1,i,s)}function Xf(t,e){e[sn].changeDetectionScheduler?.notify(8),Lo(t,e,e[Fe],2,null,null)}function Vy(t){let e=t[Ei];if(!e)return oc(t[ue],t);for(;e;){let n=null;if(In(e))n=e[Ei];else{let r=e[ut];r&&(n=r)}if(!n){for(;e&&!e[Ot]&&e!==t;)In(e)&&oc(e[ue],e),e=e[tt];e===null&&(e=t),In(e)&&oc(e[ue],e),n=e&&e[Ot]}e=n}}function jy(t,e,n,r){let i=ut+r,s=n.length;r>0&&(n[i-1][Ot]=e),r<s-ut?(e[Ot]=n[i],$h(n,ut+r,e)):(n.push(e),e[Ot]=null),e[tt]=n;let o=e[zn];o!==null&&n!==o&&Jf(o,e);let a=e[on];a!==null&&a.insertView(t),Dc(e),e[se]|=128}function Jf(t,e){let n=t[Lr],r=e[tt];if(In(r))t[se]|=ho.HasTransplantedViews;else{let i=r[tt][Wt];e[Wt]!==i&&(t[se]|=ho.HasTransplantedViews)}n===null?t[Lr]=[e]:n.push(e)}function Nl(t,e){let n=t[Lr],r=n.indexOf(e);n.splice(r,1)}function _o(t,e){if(t.length<=ut)return;let n=ut+e,r=t[n];if(r){let i=r[zn];i!==null&&i!==t&&Nl(i,r),e>0&&(t[n-1][Ot]=r[Ot]);let s=oo(t,ut+e);Fy(r[ue],r);let o=s[on];o!==null&&o.detachView(s[ue]),r[tt]=null,r[Ot]=null,r[se]&=-129}return r}function Ll(t,e){if(!(e[se]&256)){let n=e[Fe];n.destroyNode&&Lo(t,e,n,3,null,null),Vy(e)}}function oc(t,e){if(e[se]&256)return;let n=Ce(null);try{e[se]&=-129,e[se]|=256,e[St]&&Na(e[St]),Uy(t,e),Hy(t,e),e[ue].type===1&&e[Fe].destroy();let r=e[zn];if(r!==null&&hn(e[tt])){r!==e[tt]&&Nl(r,e);let i=e[on];i!==null&&i.detachView(t)}My(e)}finally{Ce(n)}}function Hy(t,e){let n=t.cleanup,r=e[lo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[lo]=null);let i=e[En];if(i!==null){e[En]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function Uy(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Zn)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];Ht(4,a,l);try{l.call(a)}finally{Ht(5,a,l)}}else{Ht(4,i,s);try{s.call(i)}finally{Ht(5,i,s)}}}}}function $y(t,e,n){return Wy(t,e.parent,n)}function Wy(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[dn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===$t.None||s===$t.Emulated)return null}return Dt(r,n)}}function vo(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ep(t,e,n){t.appendChild(e,n)}function fh(t,e,n,r,i){r!==null?vo(t,e,n,r,i):ep(t,e,n)}function zy(t,e,n,r){t.removeChild(e,n,r)}function Pl(t,e){return t.parentNode(e)}function Gy(t,e){return t.nextSibling(e)}function qy(t,e,n){return Zy(t,e,n)}function Ky(t,e,n){return t.type&40?Dt(t,n):null}var Zy=Ky,ph;function Fl(t,e,n,r){let i=$y(t,r,e),s=e[Fe],o=r.parent||e[Nt],a=qy(o,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)fh(s,i,n[l],a,!1);else fh(s,i,n,a,!1);ph!==void 0&&ph(s,r,e,n,i)}function no(t,e){if(e!==null){let n=e.type;if(n&3)return Dt(e,t);if(n&4)return Lc(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return no(t,r);{let i=t[e.index];return hn(i)?Lc(-1,i):Gt(i)}}else{if(n&32)return Ol(e,t)()||Gt(t[e.index]);{let r=tp(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=qn(t[Wt]);return no(i,r)}else return no(t,e.next)}}}return null}function tp(t,e){if(e!==null){let r=t[Wt][Nt],i=e.projection;return r.projection[i]}return null}function Lc(t,e){let n=ut+t+1;if(n<e.length){let r=e[n],i=r[ue].firstChild;if(i!==null)return no(r,i)}return e[Gn]}function Yy(t,e,n){let r=Pl(t,e);r&&zy(t,r,e,n)}function Bl(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],l=n.type;if(o&&e===0&&(a&&Qn(Gt(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)Bl(t,e,n.child,r,i,s,!1),Mr(e,t,i,a,s);else if(l&32){let c=Ol(n,r),p;for(;p=c();)Mr(e,t,i,p,s);Mr(e,t,i,a,s)}else l&16?Qy(t,e,r,n,i,s):Mr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Lo(t,e,n,r,i,s){Bl(n,r,t.firstChild,e,i,s,!1)}function Qy(t,e,n,r,i,s){let o=n[Wt],l=o[Nt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let p=l[c];Mr(e,t,i,p,s)}else{let c=l,p=o[tt];Uf(r)&&(c.flags|=128),Bl(t,e,c,p,i,s,!0)}}function Xy(t,e,n,r,i){let s=n[Gn],o=Gt(n);s!==o&&Mr(e,t,r,s,i);for(let a=ut;a<n.length;a++){let l=n[a];Lo(l[ue],l,t,e,r,s)}}function Jy(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:cn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=cn.Important),t.setStyle(n,r,i,s))}}function e0(t,e,n){t.setAttribute(e,"style",n)}function np(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function rp(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&vc(t,e,r),i!==null&&np(t,e,i),s!==null&&e0(t,e,s)}var Lt={};function G(t=1){ip(Qe(),De(),rr()+t,!1)}function ip(t,e,n,r){if(!r)if((e[se]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Js(e,s,n)}else{let s=t.preOrderHooks;s!==null&&eo(e,s,0,n)}Kn(n)}function X(t,e=fe.Default){let n=De();if(n===null)return ye(t,e);let r=dt();return Pf(r,n,it(t),e)}function sp(t,e,n,r,i,s){let o=Ce(null);try{let a=null;i&Mn.SignalBased&&(a=e[r][tn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Mn.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):cf(e,a,r,s)}finally{Ce(o)}}function t0(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Kn(~i);else{let s=i,o=n[++r],a=n[++r];Jv(o,s);let l=e[s];a(2,l)}}}finally{Kn(-1)}}function Po(t,e,n,r,i,s,o,a,l,c,p){let m=e.blueprint.slice();return m[dn]=i,m[se]=r|4|128|8|64,(c!==null||t&&t[se]&2048)&&(m[se]|=2048),ff(m),m[tt]=m[jr]=t,m[wt]=n,m[sn]=o||t&&t[sn],m[Fe]=a||t&&t[Fe],m[Nr]=l||t&&t[Nr]||null,m[Nt]=s,m[Ro]=Ey(),m[co]=p,m[sf]=c,m[Wt]=e.type==2?t[Wt]:m,m}function Fo(t,e,n,r,i){let s=t.data[e];if(s===null)s=n0(t,e,n,r,i),Xv()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=Kv();s.injectorIndex=o===null?-1:o.injectorIndex}return Oi(s,!0),s}function n0(t,e,n,r,i){let s=vf(),o=yf(),a=o?s:s&&s.parent,l=t.data[e]=c0(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function op(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ap(t,e,n,r,i){let s=rr(),o=r&2;try{Kn(-1),o&&e.length>zt&&ip(t,e,zt,!1),Ht(o?2:0,i),n(r,i)}finally{Kn(s),Ht(o?3:1,i)}}function cp(t,e,n){if(af(e)){let r=Ce(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{Ce(r)}}}function lp(t,e,n){_f()&&(p0(t,e,n,Dt(n,e)),(n.flags&64)===64&&pp(t,e,n))}function up(t,e,n=Dt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function dp(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Vl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Vl(t,e,n,r,i,s,o,a,l,c,p){let m=zt+r,y=m+i,g=r0(m,y),u=typeof c=="function"?c():c;return g[ue]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:u,incompleteFirstPass:!1,ssrId:p}}function r0(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Lt);return n}function i0(t,e,n,r){let s=r.get(Oy,Kf)||n===$t.ShadowDom,o=t.selectRootElement(e,s);return s0(o),o}function s0(t){o0(t)}var o0=()=>null;function a0(t,e,n,r){let i=_p(e);i.push(n),t.firstCreatePass&&vp(t).push(r,i.length-1)}function c0(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return zv()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function gh(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,l=Mn.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(i!==null){if(!i.hasOwnProperty(s))continue;c=i[s]}t===0?mh(r,n,c,a,l):mh(r,n,c,a)}return r}function mh(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function l0(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],l=null,c=null;for(let p=r;p<i;p++){let m=s[p],y=n?n.get(m):null,g=y?y.inputs:null,u=y?y.outputs:null;l=gh(0,m.inputs,p,l,g),c=gh(1,m.outputs,p,c,u);let f=l!==null&&o!==null&&!ml(e)?E0(l,p,o):null;a.push(f)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function u0(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function jl(t,e,n,r,i,s,o,a){let l=Dt(e,n),c=e.inputs,p;!a&&c!=null&&(p=c[r])?(Hl(t,n,p,r,i),ko(e)&&d0(n,e.index)):e.type&3?(r=u0(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(l,r,i)):e.type&12}function d0(t,e){let n=Rn(e,t);n[se]&16||(n[se]|=64)}function hp(t,e,n,r){if(_f()){let i=r===null?null:{"":-1},s=m0(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&fp(t,e,n,o,i,a),i&&_0(n,r,i)}n.mergedAttrs=wi(n.mergedAttrs,n.attrs)}function fp(t,e,n,r,i,s){for(let c=0;c<r.length;c++)xc(mo(n,e),t,r[c].type);y0(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let p=r[c];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,l=op(t,e,r.length,null);for(let c=0;c<r.length;c++){let p=r[c];n.mergedAttrs=wi(n.mergedAttrs,p.hostAttrs),C0(t,n,e,l,p),v0(l,p,i),p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let m=p.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}l0(t,n,s)}function h0(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;f0(o)!=a&&o.push(a),o.push(n,r,s)}}function f0(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function p0(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;ko(n)&&S0(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||mo(n,e),Qn(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let l=t.data[a],c=Yn(e,t,a,n);if(Qn(c,e),o!==null&&D0(e,a-i,c,l,n,o),xn(l)){let p=Rn(n.index,e);p[wt]=Yn(e,t,a,n)}}}function pp(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=ey();try{Kn(s);for(let a=r;a<i;a++){let l=t.data[a],c=e[a];Ec(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&g0(l,c)}}finally{Kn(-1),Ec(o)}}function g0(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function m0(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(dv(e,o.selectors,!1))if(r||(r=[]),xn(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let l=a.length;Pc(t,e,l)}else r.unshift(o),Pc(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Pc(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function _0(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new ne(-301,!1);r.push(e[i],s)}}}function v0(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;xn(e)&&(n[""]=t)}}function y0(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function C0(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Tr(i.type,!0)),o=new Zn(s,xn(i),X);t.blueprint[r]=o,n[r]=o,h0(t,e,r,op(t,n,i.hostVars,Lt),i)}function S0(t,e,n){let r=Dt(e,t),i=dp(n),s=t[sn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Bo(t,Po(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function b0(t,e,n,r,i,s){let o=Dt(t,e);w0(e[Fe],o,s,t.value,n,r,i)}function w0(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?hl(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function D0(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],p=o[a++],m=o[a++];sp(r,n,l,c,p,m)}}function E0(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function gp(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function mp(t,e){let n=t.contentQueries;if(n!==null){let r=Ce(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];bl(s),a.contentQueries(2,e[o],o)}}}finally{Ce(r)}}}function Bo(t,e){return t[Ei]?t[ih][Ot]=e:t[Ei]=e,t[ih]=e,e}function Fc(t,e,n){bl(0);let r=Ce(null);try{e(t,n)}finally{Ce(r)}}function _p(t){return t[lo]??=[]}function vp(t){return t.cleanup??=[]}function yp(t,e){let n=t[Nr],r=n?n.get(an,null):null;r&&r.handleError(e)}function Hl(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],l=n[s++],c=e[o],p=t.data[o];sp(p,c,r,a,l,i)}}function I0(t,e,n){let r=hf(e,t);Py(t[Fe],r,n)}function M0(t,e){let n=Rn(e,t),r=n[ue];x0(r,n);let i=n[dn];i!==null&&n[co]===null&&(n[co]=kl(i,n[Nr])),Ul(r,n,n[wt])}function x0(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ul(t,e,n){wl(e);try{let r=t.viewQuery;r!==null&&Fc(1,r,n);let i=t.template;i!==null&&ap(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[on]?.finishViewCreation(t),t.staticContentQueries&&mp(t,e),t.staticViewQueries&&Fc(2,t.viewQuery,n);let s=t.components;s!==null&&A0(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[se]&=-5,Dl()}}function A0(t,e){for(let n=0;n<e.length;n++)M0(t,e[n])}function Cp(t,e,n,r){let i=Ce(null);try{let s=e.tView,a=t[se]&4096?4096:16,l=Po(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];l[zn]=c;let p=t[on];return p!==null&&(l[on]=p.createEmbeddedView(s)),Ul(s,l,n),l}finally{Ce(i)}}function T0(t,e){let n=ut+e;if(n<t.length)return t[n]}function Bc(t,e){return!e||e.firstChild===null||Uf(t)}function Sp(t,e,n,r=!0){let i=e[ue];if(jy(i,e,t,n),r){let o=Lc(n,t),a=e[Fe],l=Pl(a,t[Gn]);l!==null&&By(i,t[Nt],a,e,l,o)}let s=e[co];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function R0(t,e){let n=_o(t,e);return n!==void 0&&Ll(n[ue],n),n}function yo(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Gt(s)),hn(s)&&k0(s,r);let o=n.type;if(o&8)yo(t,e,n.child,r);else if(o&32){let a=Ol(n,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=tp(e,n);if(Array.isArray(a))r.push(...a);else{let l=qn(e[Wt]);yo(l[ue],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function k0(t,e){for(let n=ut;n<t.length;n++){let r=t[n],i=r[ue].firstChild;i!==null&&yo(r[ue],r,i,e)}t[Gn]!==t[dn]&&e.push(t[Gn])}var bp=[];function O0(t){return t[St]??N0(t)}function N0(t){let e=bp.pop()??Object.create(P0);return e.lView=t,e}function L0(t){t.lView[St]!==t&&(t.lView=null,bp.push(t))}var P0=we($({},_i),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Oo(t.lView)},consumerOnSignalRead(){this.lView[St]=this}});function F0(t){let e=t[St]??Object.create(B0);return e.lView=t,e}var B0=we($({},_i),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=qn(t.lView);for(;e&&!wp(e[ue]);)e=qn(e);e&&pf(e)},consumerOnSignalRead(){this.lView[St]=this}});function wp(t){return t.type!==2}var V0=100;function Dp(t,e=!0,n=0){let r=t[sn],i=r.rendererFactory,s=!1;s||i.begin?.();try{j0(t,n)}catch(o){throw e&&yp(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function j0(t,e){let n=Cf();try{oh(!0),Vc(t,e);let r=0;for(;Ii(t);){if(r===V0)throw new ne(103,!1);r++,Vc(t,1)}}finally{oh(n)}}function H0(t,e,n,r){let i=e[se];if((i&256)===256)return;let s=!1,o=!1;!s&&e[sn].inlineEffectRunner?.flush(),wl(e);let a=!0,l=null,c=null;s||(wp(t)?(c=O0(e),l=bs(c)):dd()===null?(a=!1,c=F0(e),l=bs(c)):e[St]&&(Na(e[St]),e[St]=null));try{ff(e),Qv(t.bindingStartIndex),n!==null&&ap(t,e,n,2,r);let p=(i&3)===3;if(!s)if(p){let g=t.preOrderCheckHooks;g!==null&&Js(e,g,null)}else{let g=t.preOrderHooks;g!==null&&eo(e,g,0,null),nc(e,0)}if(o||U0(e),Ep(e,0),t.contentQueries!==null&&mp(t,e),!s)if(p){let g=t.contentCheckHooks;g!==null&&Js(e,g)}else{let g=t.contentHooks;g!==null&&eo(e,g,1),nc(e,1)}t0(t,e);let m=t.components;m!==null&&Mp(e,m,0);let y=t.viewQuery;if(y!==null&&Fc(2,y,r),!s)if(p){let g=t.viewCheckHooks;g!==null&&Js(e,g)}else{let g=t.viewHooks;g!==null&&eo(e,g,2),nc(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[tc]){for(let g of e[tc])g();e[tc]=null}s||(e[se]&=-73)}catch(p){throw s||Oo(e),p}finally{c!==null&&(ka(c,l),a&&L0(c)),Dl()}}function Ep(t,e){for(let n=Wf(t);n!==null;n=zf(n))for(let r=ut;r<n.length;r++){let i=n[r];Ip(i,e)}}function U0(t){for(let e=Wf(t);e!==null;e=zf(e)){if(!(e[se]&ho.HasTransplantedViews))continue;let n=e[Lr];for(let r=0;r<n.length;r++){let i=n[r];pf(i)}}}function $0(t,e,n){let r=Rn(e,t);Ip(r,n)}function Ip(t,e){Sl(t)&&Vc(t,e)}function Vc(t,e){let r=t[ue],i=t[se],s=t[St],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Oa(s)),o||=!1,s&&(s.dirty=!1),t[se]&=-9217,o)H0(r,t,r.template,t[wt]);else if(i&8192){Ep(t,1);let a=r.components;a!==null&&Mp(t,a,1)}}function Mp(t,e,n){for(let r=0;r<e.length;r++)$0(t,e[r],n)}function $l(t,e){let n=Cf()?64:1088;for(t[sn].changeDetectionScheduler?.notify(e);t;){t[se]|=n;let r=qn(t);if(bc(t)&&!r)return t;t=r}return null}var Xn=class{get rootNodes(){let e=this._lView,n=e[ue];return yo(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[wt]}set context(e){this._lView[wt]=e}get destroyed(){return(this._lView[se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[tt];if(hn(e)){let n=e[uo],r=n?n.indexOf(this):-1;r>-1&&(_o(e,r),oo(n,r))}this._attachedToViewContainer=!1}Ll(this._lView[ue],this._lView)}onDestroy(e){gf(this._lView,e)}markForCheck(){$l(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){Dc(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,Dp(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=bc(this._lView),n=this._lView[zn];n!==null&&!e&&Nl(n,this._lView),Xf(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=e;let n=bc(this._lView),r=this._lView[zn];r!==null&&!n&&Jf(r,this._lView),Dc(this._lView)}},Jn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=G0;let t=e;return t})(),W0=Jn,z0=class extends W0{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Cp(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Xn(i)}};function G0(){return Wl(dt(),De())}function Wl(t,e){return t.type&4?new z0(e,t,Hr(t,e)):null}var pT=new RegExp(`^(\\d+)*(${Ry}|${Ty})*(.*)`);var q0=()=>null;function jc(t,e){return q0(t,e)}var Mi=class{},zl=new oe("",{providedIn:"root",factory:()=>!1});var xp=new oe(""),Hc=class{},Co=class{};function K0(t){let e=Error(`No component factory found for ${st(t)}.`);return e[Z0]=t,e}var Z0="ngComponent";var Uc=class{resolveComponentFactory(e){throw K0(e)}},tu=class tu{};tu.NULL=new Uc;var Pr=tu,Fr=class{},On=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>Y0();let t=e;return t})();function Y0(){let t=De(),e=dt(),n=Rn(e.index,t);return(In(n)?n:t)[Fe]}var Q0=(()=>{let e=class e{};e.\u0275prov=ie({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var _h=new Set;function Wr(t){_h.has(t)||(_h.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Ap(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof fc.requestAnimationFrame=="function"&&fc.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function vh(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function yh(...t){}var Ue=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Te(!1),this.onMicrotaskEmpty=new Te(!1),this.onStable=new Te(!1),this.onError=new Te(!1),typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,eC(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ne(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,X0,yh,yh);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},X0={};function Gl(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function J0(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{Ap(()=>{t.callbackScheduled=!1,$c(t),t.isCheckStableRunning=!0,Gl(t),t.isCheckStableRunning=!1})}),$c(t))}function eC(t){let e=()=>{J0(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(tC(a))return n.invokeTask(i,s,o,a);try{return Ch(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Sh(t)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return Ch(t),n.invoke(i,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!nC(a)&&e(),Sh(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,$c(t),Gl(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function $c(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Ch(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Sh(t){t._nesting--,Gl(t)}var Wc=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Te,this.onMicrotaskEmpty=new Te,this.onStable=new Te,this.onError=new Te}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function tC(t){return Tp(t,"__ignore_ng_zone__")}function nC(t){return Tp(t,"__scheduler_tick__")}function Tp(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Rp=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ie({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function zc(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=pc(i,a);else if(s==2){let l=a,c=e[++o];r=pc(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var So=class extends Pr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Wn(e);return new xi(n,this.ngModule)}};function bh(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Mn.None;e?n.push({propName:o,templateName:r,isSignal:(a&Mn.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function rC(t){let e=t.toLowerCase();return e==="svg"?Pv:e==="math"?Fv:null}var xi=class extends Co{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=bh(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return bh(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=gv(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=Ce(null);try{i=i||this.ngModule;let o=i instanceof bt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Ic(e,o):e,l=a.get(Fr,null);if(l===null)throw new ne(407,!1);let c=a.get(Q0,null),p=a.get(Rp,null),m=a.get(Mi,null),y={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:p,changeDetectionScheduler:m},g=l.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",f=r?i0(g,r,this.componentDef.encapsulation,a):Qf(g,u,rC(u)),d=512;this.componentDef.signals?d|=4096:this.componentDef.onPush||(d|=16);let h=null;f!==null&&(h=kl(f,a,!0));let _=Vl(0,null,null,1,0,null,null,null,null,null,null),C=Po(null,_,null,d,null,null,y,g,a,null,h);wl(C);let S,b;try{let v=this.componentDef,w,A=null;v.findHostDirectiveDefs?(w=[],A=new Map,v.findHostDirectiveDefs(v,w,A),w.push(v)):w=[v];let T=iC(C,f),k=sC(T,f,v,w,C,y,g);b=Cl(_,zt),f&&cC(g,v,f,r),n!==void 0&&lC(b,this.ngContentSelectors,n),S=aC(k,v,w,A,C,[uC]),Ul(_,C,null)}finally{Dl()}return new Gc(this.componentType,S,Hr(b,C),C,b)}finally{Ce(s)}}},Gc=class extends Hc{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Xn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Hl(s[ue],s,i,e,n),this.previousInputValues.set(e,n);let o=Rn(this._tNode.index,s);$l(o,1)}}get injector(){return new $n(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function iC(t,e){let n=t[ue],r=zt;return t[r]=e,Fo(n,r,2,"#host",null)}function sC(t,e,n,r,i,s,o){let a=i[ue];oC(r,t,e,o);let l=null;e!==null&&(l=kl(e,i[Nr]));let c=s.rendererFactory.createRenderer(e,n),p=16;n.signals?p=4096:n.onPush&&(p=64);let m=Po(i,dp(n),null,p,i[t.index],t,s,c,null,null,l);return a.firstCreatePass&&Pc(a,t,r.length-1),Bo(i,m),i[t.index]=m}function oC(t,e,n,r){for(let i of t)e.mergedAttrs=wi(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(zc(e,e.mergedAttrs,!0),n!==null&&rp(r,n,e))}function aC(t,e,n,r,i,s){let o=dt(),a=i[ue],l=Dt(o,i);fp(a,i,o,n,null,r);for(let p=0;p<n.length;p++){let m=o.directiveStart+p,y=Yn(i,a,m,o);Qn(y,i)}pp(a,i,o),l&&Qn(l,i);let c=Yn(i,a,o.directiveStart+o.componentOffset,o);if(t[wt]=i[wt]=c,s!==null)for(let p of s)p(c,e);return cp(a,o,i),c}function cC(t,e,n,r){if(r)vc(t,n,["ng-version","18.1.0"]);else{let{attrs:i,classes:s}=mv(e.selectors[0]);i&&vc(t,n,i),s&&s.length>0&&np(t,n,s.join(" "))}}function lC(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function uC(){let t=dt();Ml(De()[ue],t)}var Nn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=dC;let t=e;return t})();function dC(){let t=dt();return Op(t,De())}var hC=Nn,kp=class extends hC{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Hr(this._hostTNode,this._hostLView)}get injector(){return new $n(this._hostTNode,this._hostLView)}get parentInjector(){let e=xl(this._hostTNode,this._hostLView);if(Tf(e)){let n=go(e,this._hostLView),r=po(e),i=n[ue].data[r+8];return new $n(i,n)}else return new $n(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=wh(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ut}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=jc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Bc(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!kv(e),a;if(o)a=n;else{let u=n||{};a=u.index,r=u.injector,i=u.projectableNodes,s=u.environmentInjector||u.ngModuleRef}let l=o?e:new xi(Wn(e)),c=r||this.parentInjector;if(!s&&l.ngModule==null){let f=(o?c:this.parentInjector).get(bt,null);f&&(s=f)}let p=Wn(l.componentType??{}),m=jc(this._lContainer,p?.id??null),y=m?.firstChild??null,g=l.create(c,i,y,s);return this.insertImpl(g.hostView,a,Bc(this._hostTNode,m)),g}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Vv(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[tt],c=new kp(l,l[Nt],l[tt]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Sp(o,i,s,r),e.attachToViewContainerRef(),$h(ac(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=wh(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=_o(this._lContainer,n);r&&(oo(ac(this._lContainer),n),Ll(r[ue],r))}detach(e){let n=this._adjustIndex(e,-1),r=_o(this._lContainer,n);return r&&oo(ac(this._lContainer),n)!=null?new Xn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function wh(t){return t[uo]}function ac(t){return t[uo]||(t[uo]=[])}function Op(t,e){let n,r=e[t.index];return hn(r)?n=r:(n=gp(r,e,null,t),e[t.index]=n,Bo(e,n)),pC(n,e,t,r),new kp(n,t,e)}function fC(t,e){let n=t[Fe],r=n.createComment(""),i=Dt(e,t),s=Pl(n,i);return vo(n,s,r,Gy(n,i),!1),r}var pC=_C,gC=()=>!1;function mC(t,e,n){return gC(t,e,n)}function _C(t,e,n,r){if(t[Gn])return;let i;n.type&8?i=Gt(r):i=fC(e,n),t[Gn]=i}var qc=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Kc=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)ql(e,n).matches!==null&&this.queries[n].setDirty()}},Zc=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=EC(e):this.predicate=e}},Yc=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Qc=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,vC(n,s)),this.matchTNodeWithReadOption(e,n,to(n,e,s,!1,!1))}else r===Jn?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,to(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Et||i===Nn||i===Jn&&n.type&4)this.addMatch(n.index,-2);else{let s=to(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function vC(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function yC(t,e){return t.type&11?Hr(t,e):t.type&4?Wl(t,e):null}function CC(t,e,n,r){return n===-1?yC(e,t):n===-2?SC(t,e,r):Yn(t,t[ue],n,e)}function SC(t,e,n){if(n===Et)return Hr(e,t);if(n===Jn)return Wl(e,t);if(n===Nn)return Op(e,t)}function Np(t,e,n,r){let i=e[on].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let p=s[c];a.push(CC(e,p,o[l+1],n.metadata.read))}}i.matches=a}return i.matches}function Xc(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=Np(t,e,i,n);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)r.push(o[a/2]);else{let c=s[a+1],p=e[-l];for(let m=ut;m<p.length;m++){let y=p[m];y[zn]===y[tt]&&Xc(y[ue],y,c,r)}if(p[Lr]!==null){let m=p[Lr];for(let y=0;y<m.length;y++){let g=m[y];Xc(g[ue],g,c,r)}}}}}return r}function bC(t,e){return t[on].queries[e].queryList}function wC(t,e,n){let r=new kc((n&4)===4);return a0(t,e,r,r.destroy),(e[on]??=new Kc).queries.push(new qc(r))-1}function DC(t,e,n){let r=Qe();return r.firstCreatePass&&(IC(r,new Zc(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),wC(r,De(),e)}function EC(t){return t.split(",").map(e=>e.trim())}function IC(t,e,n){t.queries===null&&(t.queries=new Yc),t.queries.track(new Qc(e,n))}function ql(t,e){return t.queries.getByIndex(e)}function MC(t,e){let n=t[ue],r=ql(n,e);return r.crossesNgTemplate?Xc(n,t,e,[]):Np(n,t,r,e)}function xC(t){return typeof t=="function"&&t[tn]!==void 0}function Pi(t,e){Wr("NgSignals");let n=bd(t),r=n[tn];return e?.equal&&(r.equal=e.equal),n.set=i=>La(r,i),n.update=i=>wd(r,i),n.asReadonly=AC.bind(n),n}function AC(){let t=this[tn];if(t.readonlyFn===void 0){let e=()=>this();e[tn]=t,t.readonlyFn=e}return t.readonlyFn}function Lp(t){return xC(t)&&typeof t.set=="function"}function TC(t){return Object.getPrototypeOf(t.prototype).constructor}function Pt(t){let e=TC(t.type),n=!0,r=[t];for(;e;){let i;if(xn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ne(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Ys(t.inputs),o.inputTransforms=Ys(t.inputTransforms),o.declaredInputs=Ys(t.declaredInputs),o.outputs=Ys(t.outputs);let a=i.hostBindings;a&&LC(t,a);let l=i.viewQuery,c=i.contentQueries;if(l&&OC(t,l),c&&NC(t,c),RC(t,i),L_(t.outputs,i.outputs),xn(i)&&i.data.animation){let p=t.data;p.animation=(p.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Pt&&(n=!1)}}e=Object.getPrototypeOf(e)}kC(r)}function RC(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function kC(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=wi(i.hostAttrs,n=wi(n,i.hostAttrs))}}function Ys(t){return t===Rr?{}:t===lt?[]:t}function OC(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function NC(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function LC(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Tn=class{},Ai=class{};var Jc=class extends Tn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new So(this);let i=Qh(e);this._bootstrapComponents=Yf(i.bootstrap),this._r3Injector=Vf(e,n,[{provide:Tn,useValue:this},{provide:Pr,useValue:this.componentFactoryResolver},...r],st(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},el=class extends Ai{constructor(e){super(),this.moduleType=e}create(e){return new Jc(this.moduleType,e,[])}};var bo=class extends Tn{constructor(e){super(),this.componentFactoryResolver=new So(this),this.instance=null;let n=new Di([...e.providers,{provide:Tn,useValue:this},{provide:Pr,useValue:this.componentFactoryResolver}],e.parent||vl(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Kl(t,e,n=null){return new bo({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function Pp(t){return FC(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function PC(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function FC(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function BC(t,e,n){return t[e]=n}function VC(t,e){return t[e]}function ir(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function jC(t){return(t.flags&32)===32}function HC(t,e,n,r,i,s,o,a,l){let c=e.consts,p=Fo(e,t,4,o||null,a||null);hp(e,n,p,fo(c,l)),Ml(e,p);let m=p.tView=Vl(2,p,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,p),m.queries=e.queries.embeddedTView(p)),p}function UC(t,e,n,r,i,s,o,a,l,c){let p=n+zt,m=e.firstCreatePass?HC(p,e,t,r,i,s,o,a,l):e.data[p];Oi(m,!1);let y=$C(e,t,m,n);El()&&Fl(e,t,y,m),Qn(y,t);let g=gp(y,t,y,m);return t[p]=g,Bo(t,g),mC(g,m,t),yl(m)&&lp(e,t,m),l!=null&&up(t,m,c),m}function Ee(t,e,n,r,i,s,o,a){let l=De(),c=Qe(),p=fo(c.consts,s);return UC(l,c,t,e,n,r,i,p,o,a),Ee}var $C=WC;function WC(t,e,n,r){return Il(!0),e[Fe].createComment("")}function nt(t,e,n,r){let i=De(),s=Ni();if(ir(i,s,e)){let o=Qe(),a=No();b0(a,i,t,e,n,r)}return nt}function Fp(t,e,n,r){return ir(t,Ni(),n)?e+hl(n)+r:Lt}function Qs(t,e){return t<<17|e<<2}function er(t){return t>>17&32767}function zC(t){return(t&2)==2}function GC(t,e){return t&131071|e<<17}function tl(t){return t|2}function Br(t){return(t&131068)>>2}function cc(t,e){return t&-131069|e<<2}function qC(t){return(t&1)===1}function nl(t){return t|1}function KC(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=er(o),l=Br(o);t[r]=n;let c=!1,p;if(Array.isArray(n)){let m=n;p=m[1],(p===null||ki(m,p)>0)&&(c=!0)}else p=n;if(i)if(l!==0){let y=er(t[a+1]);t[r+1]=Qs(y,a),y!==0&&(t[y+1]=cc(t[y+1],r)),t[a+1]=GC(t[a+1],r)}else t[r+1]=Qs(a,0),a!==0&&(t[a+1]=cc(t[a+1],r)),a=r;else t[r+1]=Qs(l,0),a===0?a=r:t[l+1]=cc(t[l+1],r),l=r;c&&(t[r+1]=tl(t[r+1])),Dh(t,p,r,!0),Dh(t,p,r,!1),ZC(e,p,t,r,s),o=Qs(a,l),s?e.classBindings=o:e.styleBindings=o}function ZC(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ki(s,e)>=0&&(n[r+1]=nl(n[r+1]))}function Dh(t,e,n,r){let i=t[n+1],s=e===null,o=r?er(i):Br(i),a=!1;for(;o!==0&&(a===!1||s);){let l=t[o],c=t[o+1];YC(l,e)&&(a=!0,t[o+1]=r?nl(c):tl(c)),o=r?er(c):Br(c)}a&&(t[n+1]=r?tl(i):nl(i))}function YC(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ki(t,e)>=0:!1}var Ge={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Bp(t){return t.substring(Ge.key,Ge.keyEnd)}function QC(t){return t.substring(Ge.value,Ge.valueEnd)}function XC(t){return Hp(t),Vp(t,Vr(t,0,Ge.textEnd))}function Vp(t,e){let n=Ge.textEnd;return n===e?-1:(e=Ge.keyEnd=eS(t,Ge.key=e,n),Vr(t,e,n))}function JC(t){return Hp(t),jp(t,Vr(t,0,Ge.textEnd))}function jp(t,e){let n=Ge.textEnd,r=Ge.key=Vr(t,e,n);return n===r?-1:(r=Ge.keyEnd=tS(t,r,n),r=Eh(t,r,n,58),r=Ge.value=Vr(t,r,n),r=Ge.valueEnd=nS(t,r,n),Eh(t,r,n,59))}function Hp(t){Ge.key=0,Ge.keyEnd=0,Ge.value=0,Ge.valueEnd=0,Ge.textEnd=t.length}function Vr(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function eS(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function tS(t,e,n){let r;for(;e<n&&((r=t.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function Eh(t,e,n,r){return e=Vr(t,e,n),e<n&&e++,e}function nS(t,e,n){let r=-1,i=-1,s=-1,o=e,a=o;for(;o<n;){let l=t.charCodeAt(o++);if(l===59)return a;l===34||l===39?a=o=Ih(t,l,o,n):e===o-4&&s===85&&i===82&&r===76&&l===40?a=o=Ih(t,41,o,n):l>32&&(a=o),s=i,i=r,r=l&-33}return a}function Ih(t,e,n,r){let i=-1,s=n;for(;s<r;){let o=t.charCodeAt(s++);if(o==e&&i!==92)return s;o==92&&i===92?i=0:i=o}throw new Error}function Q(t,e,n){let r=De(),i=Ni();if(ir(r,i,e)){let s=Qe(),o=No();jl(s,o,r,t,e,r[Fe],n,!1)}return Q}function rl(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Hl(t,n,s[o],o,r)}function Vo(t,e){return sS(t,e,null,!0),Vo}function Zl(t){Up(zp,rS,t,!1)}function rS(t,e){for(let n=JC(e);n>=0;n=jp(e,n))zp(t,Bp(e),QC(e))}function Kt(t){Up(dS,iS,t,!0)}function iS(t,e){for(let n=XC(e);n>=0;n=Vp(e,n))xo(t,Bp(e),!0)}function sS(t,e,n,r){let i=De(),s=Qe(),o=Sf(2);if(s.firstUpdatePass&&Wp(s,t,o,r),e!==Lt&&ir(i,o,e)){let a=s.data[rr()];Gp(s,a,i,i[Fe],t,i[o+1]=fS(e,n),r,o)}}function Up(t,e,n,r){let i=Qe(),s=Sf(2);i.firstUpdatePass&&Wp(i,null,s,r);let o=De();if(n!==Lt&&ir(o,s,n)){let a=i.data[rr()];if(qp(a,r)&&!$p(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=pc(l,n||"")),rl(i,a,o,n,r)}else hS(i,a,o,o[Fe],o[s+1],o[s+1]=uS(t,e,n),r,s)}}function $p(t,e){return e>=t.expandoStartIndex}function Wp(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[rr()],o=$p(t,n);qp(s,r)&&e===null&&!o&&(e=!1),e=oS(i,s,e,r),KC(i,s,e,n,o,r)}}function oS(t,e,n,r){let i=ty(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=lc(null,t,e,n,r),n=Ti(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=lc(i,t,e,n,r),s===null){let l=aS(t,e,r);l!==void 0&&Array.isArray(l)&&(l=lc(null,t,e,l[1],r),l=Ti(l,e.attrs,r),cS(t,e,r,l))}else s=lS(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function aS(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Br(r)!==0)return t[er(r)]}function cS(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[er(i)]=r}function lS(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Ti(r,o,n)}return Ti(r,e.attrs,n)}function lc(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ti(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ti(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),xo(t,o,n?!0:e[++s]))}return t===void 0?null:t}function uS(t,e,n){if(n==null||n==="")return lt;let r=[],i=Li(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function zp(t,e,n){xo(t,e,Li(n))}function dS(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&xo(t,r,n)}function hS(t,e,n,r,i,s,o,a){i===Lt&&(i=lt);let l=0,c=0,p=0<i.length?i[0]:null,m=0<s.length?s[0]:null;for(;p!==null||m!==null;){let y=l<i.length?i[l+1]:void 0,g=c<s.length?s[c+1]:void 0,u=null,f;p===m?(l+=2,c+=2,y!==g&&(u=m,f=g)):m===null||p!==null&&p<m?(l+=2,u=p):(c+=2,u=m,f=g),u!==null&&Gp(t,e,n,r,u,f,o,a),p=l<i.length?i[l]:null,m=c<s.length?s[c]:null}}function Gp(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],p=qC(c)?Mh(l,e,n,i,Br(c),o):void 0;if(!wo(p)){wo(s)||zC(c)&&(s=Mh(l,null,n,i,a,o));let m=hf(rr(),n);Jy(r,o,m,i,s)}}function Mh(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let l=t[i],c=Array.isArray(l),p=c?l[1]:l,m=p===null,y=n[i+1];y===Lt&&(y=m?lt:void 0);let g=m?Ja(y,r):p===r?y:void 0;if(c&&!wo(g)&&(g=Ja(l,r)),wo(g)&&(a=g,o))return a;let u=t[i+1];i=o?er(u):Br(u)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=Ja(l,r))}return a}function wo(t){return t!==void 0}function fS(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=st(Li(t)))),t}function qp(t,e){return(t.flags&(e?8:16))!==0}function zr(t,e){Wr("NgControlFlow");let n=De(),r=Ni(),i=n[r]!==Lt?n[r]:-1,s=i!==-1?xh(n,zt+i):void 0,o=0;if(ir(n,r,t)){let a=Ce(null);try{if(s!==void 0&&R0(s,o),t!==-1){let l=zt+t,c=xh(n,l),p=pS(n[ue],l),m=jc(c,p.tView.ssrId),y=Cp(n,p,e,{dehydratedView:m});Sp(c,y,o,Bc(p,m))}}finally{Ce(a)}}else if(s!==void 0){let a=T0(s,o);a!==void 0&&(a[wt]=e)}}function xh(t,e){return t[e]}function pS(t,e){return Cl(t,e)}function gS(t,e,n,r,i,s){let o=e.consts,a=fo(o,i),l=Fo(e,t,2,r,a);return hp(e,n,l,fo(o,s)),l.attrs!==null&&zc(l,l.attrs,!1),l.mergedAttrs!==null&&zc(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function P(t,e,n,r){let i=De(),s=Qe(),o=zt+t,a=i[Fe],l=s.firstCreatePass?gS(o,s,i,e,n,r):s.data[o],c=mS(s,i,l,a,e,t);i[o]=c;let p=yl(l);return Oi(l,!0),rp(a,c,l),!jC(l)&&El()&&Fl(s,i,c,l),Uv()===0&&Qn(c,i),$v(),p&&(lp(s,i,l),cp(s,l,i)),r!==null&&up(i,l),P}function L(){let t=dt();yf()?Zv():(t=t.parent,Oi(t,!1));let e=t;Gv(e)&&qv(),Wv();let n=Qe();return n.firstCreatePass&&(Ml(n,t),af(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&cy(e)&&rl(n,e,De(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ly(e)&&rl(n,e,De(),e.stylesWithoutHost,!1),L}function ee(t,e,n,r){return P(t,e,n,r),L(),ee}var mS=(t,e,n,r,i,s)=>(Il(!0),Qf(r,i,iy()));function Be(){return De()}var Do="en-US";var _S=Do;function vS(t){typeof t=="string"&&(_S=t.toLowerCase().replace(/_/g,"-"))}var yS=(t,e,n)=>{};function de(t,e,n,r){let i=De(),s=Qe(),o=dt();return Kp(s,i,i[Fe],o,t,e,r),de}function CS(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[lo],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function Kp(t,e,n,r,i,s,o){let a=yl(r),c=t.firstCreatePass&&vp(t),p=e[wt],m=_p(e),y=!0;if(r.type&3||o){let f=Dt(r,e),d=o?o(f):f,h=m.length,_=o?S=>o(Gt(S[r.index])):r.index,C=null;if(!o&&a&&(C=CS(t,e,i,r.index)),C!==null){let S=C.__ngLastListenerFn__||C;S.__ngNextListenerFn__=s,C.__ngLastListenerFn__=s,y=!1}else{s=Th(r,e,p,s),yS(f,i,s);let S=n.listen(d,i,s);m.push(s,S),c&&c.push(i,_,h,h+1)}}else s=Th(r,e,p,s);let g=r.outputs,u;if(y&&g!==null&&(u=g[i])){let f=u.length;if(f)for(let d=0;d<f;d+=2){let h=u[d],_=u[d+1],b=e[h][_].subscribe(s),v=m.length;m.push(s,b),c&&c.push(i,r.index,v,-(v+1))}}}function Ah(t,e,n,r){let i=Ce(null);try{return Ht(6,e,n),n(r)!==!1}catch(s){return yp(t,s),!1}finally{Ht(7,e,n),Ce(i)}}function Th(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?Rn(t.index,e):e;$l(o,5);let a=Ah(e,n,r,s),l=i.__ngNextListenerFn__;for(;l;)a=Ah(e,n,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function J(t=1){return ry(t)}function Yl(t,e,n){return Zp(t,"",e,"",n),Yl}function Zp(t,e,n,r,i){let s=De(),o=Fp(s,e,n,r);if(o!==Lt){let a=Qe(),l=No();jl(a,l,s,t,o,s[Fe],i,!1)}return Zp}function Ln(t,e,n){DC(t,e,n)}function fn(t){let e=De(),n=Qe(),r=bf();bl(r+1);let i=ql(n,r);if(t.dirty&&Bv(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=MC(e,r);t.reset(s,by),t.notifyOnChanges()}return!0}return!1}function pn(){return bC(De(),bf())}function Z(t,e=""){let n=De(),r=Qe(),i=t+zt,s=r.firstCreatePass?Fo(r,i,1,e,null):r.data[i],o=SS(r,n,s,e,t);n[i]=o,El()&&Fl(r,n,o,s),Oi(s,!1)}var SS=(t,e,n,r,i)=>(Il(!0),Ly(e[Fe],r));function Pn(t){return Zt("",t,""),Pn}function Zt(t,e,n){let r=De(),i=Fp(r,t,e,n);return i!==Lt&&I0(r,rr(),i),Zt}function Xe(t,e,n){Lp(e)&&(e=e());let r=De(),i=Ni();if(ir(r,i,e)){let s=Qe(),o=No();jl(s,o,r,t,e,r[Fe],n,!1)}return Xe}function rt(t,e){let n=Lp(t);return n&&t.set(e),n}function Je(t,e){let n=De(),r=Qe(),i=dt();return Kp(r,n,n[Fe],i,t,e),Je}function bS(t,e,n){let r=Qe();if(r.firstCreatePass){let i=xn(t);il(n,r.data,r.blueprint,i,!0),il(e,r.data,r.blueprint,i,!1)}}function il(t,e,n,r,i){if(t=it(t),Array.isArray(t))for(let s=0;s<t.length;s++)il(t[s],e,n,r,i);else{let s=Qe(),o=De(),a=dt(),l=Or(t)?t:it(t.provide),c=rf(t),p=a.providerIndexes&1048575,m=a.directiveStart,y=a.providerIndexes>>20;if(Or(t)||!t.multi){let g=new Zn(c,i,X),u=dc(l,e,i?p:p+y,m);u===-1?(xc(mo(a,o),s,l),uc(s,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),o.push(g)):(n[u]=g,o[u]=g)}else{let g=dc(l,e,p+y,m),u=dc(l,e,p,p+y),f=g>=0&&n[g],d=u>=0&&n[u];if(i&&!d||!i&&!f){xc(mo(a,o),s,l);let h=ES(i?DS:wS,n.length,i,r,c);!i&&d&&(n[u].providerFactory=h),uc(s,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),o.push(h)}else{let h=Yp(n[i?u:g],c,!i&&r);uc(s,t,g>-1?g:u,h)}!i&&r&&d&&n[u].componentProviders++}}}function uc(t,e,n,r){let i=Or(e),s=Dv(e);if(i||s){let l=(s?it(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let p=c.indexOf(n);p===-1?c.push(n,[r,l]):c[p+1].push(r,l)}else c.push(n,l)}}}function Yp(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function dc(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function wS(t,e,n,r){return sl(this.multi,[])}function DS(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Yn(n,n[ue],this.providerFactory.index,r);s=a.slice(0,o),sl(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],sl(i,s);return s}function sl(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function ES(t,e,n,r,i){let s=new Zn(t,n,X);return s.multi=[],s.index=e,s.componentProviders=0,Yp(s,i,r&&!n),s}function sr(t,e=[]){return n=>{n.providersResolver=(r,i)=>bS(r,i?i(t):t,e)}}var IS=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=ef(!1,r.type),s=i.length>0?Kl([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ie({token:e,providedIn:"environment",factory:()=>new e(ye(bt))});let t=e;return t})();function Le(t){Wr("NgStandalone"),t.getStandaloneInjector=e=>e.get(IS).getOrCreateStandaloneInjector(t)}function ht(t,e,n){let r=Yv()+t,i=De();return i[r]===Lt?BC(i,r,n?e.call(n):e()):VC(i,r)}var jo=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Qp=new oe("");function or(t){return!!t&&typeof t.then=="function"}function Xp(t){return!!t&&typeof t.subscribe=="function"}var Jp=new oe(""),eg=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=K(Jp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(or(o))r.push(o);else if(Xp(o)){let a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ql=new oe("");function MS(){Sd(()=>{throw new ne(600,!1)})}function xS(t){return t.isBoundToModule}var AS=10;function TS(t,e,n){try{let r=n();return or(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Gr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=K(jf),this.afterRenderEffectManager=K(Rp),this.zonelessEnabled=K(zl),this.externalTestViews=new Set,this.beforeRender=new Ae,this.afterTick=new Ae,this.componentTypes=[],this.components=[],this.isStable=K(Ur).hasPendingTasks.pipe(ge(r=>!r)),this._injector=K(bt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Co;if(!this._injector.get(eg).done){let g=!s&&Yh(r),u=!1;throw new ne(405,u)}let a;s?a=r:a=this._injector.get(Pr).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=xS(a)?void 0:this._injector.get(Tn),c=i||a.selector,p=a.create(An.NULL,[],c,l),m=p.location.nativeElement,y=p.injector.get(Qp,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),hc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),p}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new ne(101,!1);let i=Ce(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,Ce(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(Fr,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<AS;){let a=s===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:l,notifyErrorHandler:c}of this._views)RS(l,c,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:l})=>Ii(l))&&(o.execute(),!this.allViews.some(({_lView:l})=>Ii(l))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;hc(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ql,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>hc(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ne(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function RS(t,e,n,r){if(!n&&!Ii(t))return;Dp(t,e,n&&!r?0:1)}var ol=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Xl=(()=>{let e=class e{compileModuleSync(r){return new el(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=Qh(r),o=Yf(s.declarations).reduce((a,l)=>{let c=Wn(l);return c&&a.push(new xi(c)),a},[]);return new ol(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var kS=(()=>{let e=class e{constructor(){this.zone=K(Ue),this.changeDetectionScheduler=K(Mi),this.applicationRef=K(Gr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),OS=new oe("",{factory:()=>!1});function tg({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new Ue(rg()),[{provide:Ue,useFactory:t},{provide:kr,multi:!0,useFactory:()=>{let n=K(kS,{optional:!0});return()=>n.initialize()}},{provide:kr,multi:!0,useFactory:()=>{let n=K(LS);return()=>{n.initialize()}}},{provide:jf,useFactory:NS},e===!0?{provide:xp,useValue:!0}:[]]}function NS(){let t=K(Ue),e=K(an);return n=>t.runOutsideAngular(()=>e.handleError(n))}function ng(t){let e=t?.ignoreChangesOutsideZone,n=tg({ngZoneFactory:()=>{let r=rg(t);return r.shouldCoalesceEventChangeDetection&&Wr("NgZone_CoalesceEvent"),new Ue(r)},ignoreChangesOutsideZone:e});return Ao([{provide:OS,useValue:!0},{provide:zl,useValue:!1},n])}function rg(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var LS=(()=>{let e=class e{constructor(){this.subscription=new je,this.initialized=!1,this.zone=K(Ue),this.pendingTasks=K(Ur)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ue.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ue.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var PS=(()=>{let e=class e{constructor(){this.appRef=K(Gr),this.taskService=K(Ur),this.ngZone=K(Ue),this.zonelessEnabled=K(zl),this.disableScheduling=K(xp,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new je,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Wc||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?vh:Ap;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Ue.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,vh(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function FS(){return typeof $localize<"u"&&$localize.locale||Do}var Jl=new oe("",{providedIn:"root",factory:()=>K(Jl,fe.Optional|fe.SkipSelf)||FS()});var ig=new oe("");var ro=null;function BS(t=[],e){return An.create({name:e,providers:[{provide:To,useValue:"platform"},{provide:ig,useValue:new Set([()=>ro=null])},...t]})}function VS(t=[]){if(ro)return ro;let e=BS(t);return ro=e,MS(),jS(e),e}function jS(t){t.get(Tl,null)?.forEach(n=>n())}var Ve=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=HS;let t=e;return t})();function HS(t){return US(dt(),De(),(t&16)===16)}function US(t,e,n){if(ko(t)&&!n){let r=Rn(t.index,e);return new Xn(r,r)}else if(t.type&175){let r=e[Wt];return new Xn(r,e)}return null}var al=class{constructor(){}supports(e){return Pp(e)}create(e){return new cl(e)}},$S=(t,e)=>e,cl=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||$S}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<Rh(r,i,s)?n:r,a=Rh(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let c=a-i,p=l-i;if(c!=p){for(let y=0;y<c;y++){let g=y<s.length?s[y]:s[y]=0,u=g+y;p<=u&&u<c&&(s[y]=g+1)}let m=o.previousIndex;s[m]=p-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Pp(e))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,PC(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new ll(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Eo),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Eo),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ll=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},ul=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Eo=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new ul,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Rh(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function kh(){return new eu([new al])}var eu=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||kh()),deps:[[e,new Uh,new pl]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new ne(901,!1)}};e.\u0275prov=ie({token:e,providedIn:"root",factory:kh});let t=e;return t})();function sg(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=VS(r),s=[tg({}),{provide:Mi,useExisting:PS},...n||[]],a=new bo({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Ue);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(an,null),p;l.runOutsideAngular(()=>{p=l.onError.subscribe({next:g=>{c.handleError(g)}})});let m=()=>a.destroy(),y=i.get(ig);return y.add(m),a.onDestroy(()=>{p.unsubscribe(),y.delete(m)}),TS(c,l,()=>{let g=a.get(eg);return g.runInitializers(),g.donePromise.then(()=>{let u=a.get(Jl,Do);vS(u||Do);let f=a.get(Gr);return e!==void 0&&f.bootstrap(e),f})})})}catch(e){return Promise.reject(e)}}var og=new oe("");function Ho(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Fi(t,e){Wr("NgSignals");let n=vd(t);return e?.equal&&(n[tn].equal=e.equal),n}function gn(t){let e=Ce(null);try{return t()}finally{Ce(e)}}var dg=null;function mn(){return dg}function hg(t){dg??=t}var Uo=class{};var mt=new oe(""),fg=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>K(GS),providedIn:"platform"});let t=e;return t})();var GS=(()=>{let e=class e extends fg{constructor(){super(),this._doc=K(mt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mn().getBaseHref(this._doc)}onPopState(r){let i=mn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=mn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function pg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function ag(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function ar(t){return t&&t[0]!=="?"?"?"+t:t}var Wo=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>K(gg),providedIn:"root"});let t=e;return t})(),qS=new oe(""),gg=(()=>{let e=class e extends Wo{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??K(mt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return pg(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+ar(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+ar(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+ar(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(ye(fg),ye(qS,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Bi=(()=>{let e=class e{constructor(r){this._subject=new Te,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=YS(ag(cg(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+ar(i))}normalize(r){return e.stripTrailingSlash(ZS(this._basePath,cg(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ar(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ar(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=ar,e.joinWithSlash=pg,e.stripTrailingSlash=ag,e.\u0275fac=function(i){return new(i||e)(ye(Wo))},e.\u0275prov=ie({token:e,factory:()=>KS(),providedIn:"root"});let t=e;return t})();function KS(){return new Bi(ye(Wo))}function ZS(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function cg(t){return t.replace(/\/index.html$/,"")}function YS(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function mg(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var nu=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qr=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new nu(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,a),lg(l,s)}});for(let s=0,o=i.length;s<o;s++){let l=i.get(s).context;l.index=s,l.count=o,l.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);lg(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(X(Nn),X(Jn),X(eu))},e.\u0275dir=qe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function lg(t,e){t.context.$implicit=e.item}var ft=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new ru,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){ug("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){ug("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(X(Nn),X(Jn))},e.\u0275dir=qe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),ru=class{constructor(){this.$implicit=null,this.ngIf=null}};function ug(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${st(e)}'.`)}var Ke=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=nr({type:e}),e.\u0275inj=tr({});let t=e;return t})(),_g="browser",QS="server";function su(t){return t===QS}var $o=class{};var cu=class extends Uo{constructor(){super(...arguments),this.supportsDOMEvents=!0}},lu=class t extends cu{static makeCurrent(){hg(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=XS();return n==null?null:JS(n)}resetBaseElement(){Vi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return mg(document.cookie,e)}},Vi=null;function XS(){return Vi=Vi||document.querySelector("base"),Vi?Vi.getAttribute("href"):null}function JS(t){return new URL(t,document.baseURI).pathname}var eb=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),zo=new oe(""),Sg=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new ne(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(ye(zo),ye(Ue))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),ji=class{constructor(e){this._doc=e}},ou="ng-app-id",bg=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=su(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${ou}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(ou),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(ou,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(ye(mt),ye(Al),ye(Rl,8),ye($r))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),au={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},du=/%COMP%/g,wg="%COMP%",tb=`_nghost-${wg}`,nb=`_ngcontent-${wg}`,rb=!0,ib=new oe("",{providedIn:"root",factory:()=>rb});function sb(t){return nb.replace(du,t)}function ob(t){return tb.replace(du,t)}function Dg(t,e){return e.map(n=>n.replace(du,t))}var vg=(()=>{let e=class e{constructor(r,i,s,o,a,l,c,p=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=su(l),this.defaultRenderer=new Hi(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===$t.ShadowDom&&(i=we($({},i),{encapsulation:$t.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Go?s.applyToHost(r):s instanceof Ui&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,p=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(i.encapsulation){case $t.Emulated:o=new Go(c,p,i,this.appId,m,a,l,y);break;case $t.ShadowDom:return new uu(c,p,r,i,a,l,this.nonce,y);default:o=new Ui(c,p,i,m,a,l,y);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(ye(Sg),ye(bg),ye(Al),ye(ib),ye(mt),ye($r),ye(Ue),ye(Rl))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),Hi=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(au[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(yg(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(yg(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ne(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=au[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=au[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(cn.DashCase|cn.Important)?e.style.setProperty(n,r,i&cn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&cn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=mn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function yg(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var uu=class extends Hi{constructor(e,n,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Dg(i.id,i.styles);for(let p of c){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ui=class extends Hi{constructor(e,n,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?Dg(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Go=class extends Ui{constructor(e,n,r,i,s,o,a,l){let c=i+"-"+r.id;super(e,n,r,s,o,a,l,c),this.contentAttr=sb(c),this.hostAttr=ob(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},ab=(()=>{let e=class e extends ji{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(ye(mt))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),cb=(()=>{let e=class e extends ji{constructor(r){super(r),this.delegate=K(og,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(ye(mt))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),Cg=["alt","control","meta","shift"],lb={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ub={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},db=(()=>{let e=class e extends ji{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),Cg.forEach(p=>{let m=i.indexOf(p);m>-1&&(i.splice(m,1),a+=p+".")}),a+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let s=lb[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Cg.forEach(a=>{if(a!==s){let l=ub[a];l(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(ye(mt))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})();function Eg(t,e){return sg($({rootComponent:t},hb(e)))}function hb(t){return{appProviders:[..._b,...t?.providers??[]],platformProviders:mb}}function fb(){lu.makeCurrent()}function pb(){return new an}function gb(){return qf(document),document}var mb=[{provide:$r,useValue:_g},{provide:Tl,useValue:fb,multi:!0},{provide:mt,useFactory:gb,deps:[]}];var _b=[{provide:To,useValue:"root"},{provide:an,useFactory:pb,deps:[]},{provide:zo,useClass:ab,multi:!0,deps:[mt,Ue,$r]},{provide:zo,useClass:db,multi:!0,deps:[mt]},{provide:zo,useClass:cb,multi:!0},vg,bg,Sg,{provide:Fr,useExisting:vg},{provide:$o,useClass:eb,deps:[]},[]];var Ig=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(ye(mt))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var he="primary",ss=Symbol("RouteTitle"),mu=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Jr(t){return new mu(t)}function yb(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Cb(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Yt(t[n],e[n]))return!1;return!0}function Yt(t,e){let n=t?_u(t):void 0,r=e?_u(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Ng(t[i],e[i]))return!1;return!0}function _u(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Ng(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function Lg(t){return t.length>0?t[t.length-1]:null}function Bn(t){return za(t)?t:or(t)?Pe(Promise.resolve(t)):le(t)}var Sb={exact:Fg,subset:Bg},Pg={exact:bb,subset:wb,ignored:()=>!0};function Mg(t,e,n){return Sb[n.paths](t.root,e.root,n.matrixParams)&&Pg[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function bb(t,e){return Yt(t,e)}function Fg(t,e,n){if(!lr(t.segments,e.segments)||!Zo(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Fg(t.children[r],e.children[r],n))return!1;return!0}function wb(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ng(t[n],e[n]))}function Bg(t,e,n){return Vg(t,e,e.segments,n)}function Vg(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!lr(i,n)||e.hasChildren()||!Zo(i,n,r))}else if(t.segments.length===n.length){if(!lr(t.segments,n)||!Zo(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Bg(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!lr(t.segments,i)||!Zo(t.segments,i,r)||!t.children[he]?!1:Vg(t.children[he],e,s,r)}}function Zo(t,e,n){return e.every((r,i)=>Pg[n](t[i].parameters,r.parameters))}var vn=class{constructor(e=new Me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Jr(this.queryParams),this._queryParamMap}toString(){return Ib.serialize(this)}},Me=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yo(this)}},cr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Jr(this.parameters),this._parameterMap}toString(){return Hg(this)}};function Db(t,e){return lr(t,e)&&t.every((n,r)=>Yt(n.parameters,e[r].parameters))}function lr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Eb(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===he&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==he&&(n=n.concat(e(i,r)))}),n}var $u=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>new Zi,providedIn:"root"});let t=e;return t})(),Zi=class{parse(e){let n=new yu(e);return new vn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${$i(e.root,!0)}`,r=Ab(e.queryParams),i=typeof e.fragment=="string"?`#${Mb(e.fragment)}`:"";return`${n}${r}${i}`}},Ib=new Zi;function Yo(t){return t.segments.map(e=>Hg(e)).join("/")}function $i(t,e){if(!t.hasChildren())return Yo(t);if(e){let n=t.children[he]?$i(t.children[he],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==he&&r.push(`${i}:${$i(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Eb(t,(r,i)=>i===he?[$i(t.children[he],!1)]:[`${i}:${$i(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[he]!=null?`${Yo(t)}/${n[0]}`:`${Yo(t)}/(${n.join("//")})`}}function jg(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qo(t){return jg(t).replace(/%3B/gi,";")}function Mb(t){return encodeURI(t)}function vu(t){return jg(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qo(t){return decodeURIComponent(t)}function xg(t){return Qo(t.replace(/\+/g,"%20"))}function Hg(t){return`${vu(t.path)}${xb(t.parameters)}`}function xb(t){return Object.entries(t).map(([e,n])=>`;${vu(e)}=${vu(n)}`).join("")}function Ab(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${qo(n)}=${qo(i)}`).join("&"):`${qo(n)}=${qo(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Tb=/^[^\/()?;#]+/;function hu(t){let e=t.match(Tb);return e?e[0]:""}var Rb=/^[^\/()?;=#]+/;function kb(t){let e=t.match(Rb);return e?e[0]:""}var Ob=/^[^=?&#]+/;function Nb(t){let e=t.match(Ob);return e?e[0]:""}var Lb=/^[^&#]+/;function Pb(t){let e=t.match(Lb);return e?e[0]:""}var yu=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[he]=new Me(e,n)),r}parseSegment(){let e=hu(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ne(4009,!1);return this.capture(e),new cr(Qo(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=kb(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=hu(this.remaining);i&&(r=i,this.capture(r))}e[Qo(n)]=Qo(r)}parseQueryParam(e){let n=Nb(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Pb(this.remaining);o&&(r=o,this.capture(r))}let i=xg(n),s=xg(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=hu(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ne(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=he);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[he]:new Me([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ne(4011,!1)}};function Ug(t){return t.segments.length>0?new Me([],{[he]:t}):t}function $g(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=$g(i);if(r===he&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Me(t.segments,e);return Fb(n)}function Fb(t){if(t.numberOfChildren===1&&t.children[he]){let e=t.children[he];return new Me(t.segments.concat(e.segments),e.children)}return t}function Yi(t){return t instanceof vn}function Bb(t,e,n=null,r=null){let i=Wg(t);return zg(i,e,n,r)}function Wg(t){let e;function n(s){let o={};for(let l of s.children){let c=n(l);o[l.outlet]=c}let a=new Me(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=Ug(r);return e??i}function zg(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return fu(i,i,i,n,r);let s=Vb(e);if(s.toRoot())return fu(i,i,new Me([],{}),n,r);let o=jb(s,i,t),a=o.processChildren?Gi(o.segmentGroup,o.index,s.commands):qg(o.segmentGroup,o.index,s.commands);return fu(i,o.segmentGroup,a,n,r)}function Xo(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Qi(t){return typeof t=="object"&&t!=null&&t.outlets}function fu(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(p=>`${p}`):`${c}`});let o;t===e?o=n:o=Gg(t,e,n);let a=Ug($g(o));return new vn(a,s,i)}function Gg(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=Gg(s,e,n)}),new Me(t.segments,r)}var Jo=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Xo(r[0]))throw new ne(4003,!1);let i=r.find(Qi);if(i&&i!==Lg(r))throw new ne(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Vb(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Jo(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Jo(n,e,r)}var Yr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function jb(t,e,n){if(t.isAbsolute)return new Yr(e,!0,0);if(!n)return new Yr(e,!1,NaN);if(n.parent===null)return new Yr(n,!0,0);let r=Xo(t.commands[0])?0:1,i=n.segments.length-1+r;return Hb(n,i,t.numberOfDoubleDots)}function Hb(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ne(4005,!1);i=r.segments.length}return new Yr(r,!1,i-s)}function Ub(t){return Qi(t[0])?t[0].outlets:{[he]:t}}function qg(t,e,n){if(t??=new Me([],{}),t.segments.length===0&&t.hasChildren())return Gi(t,e,n);let r=$b(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Me(t.segments.slice(0,r.pathIndex),{});return s.children[he]=new Me(t.segments.slice(r.pathIndex),t.children),Gi(s,0,i)}else return r.match&&i.length===0?new Me(t.segments,{}):r.match&&!t.hasChildren()?Cu(t,e,n):r.match?Gi(t,0,i):Cu(t,e,n)}function Gi(t,e,n){if(n.length===0)return new Me(t.segments,{});{let r=Ub(n),i={};if(Object.keys(r).some(s=>s!==he)&&t.children[he]&&t.numberOfChildren===1&&t.children[he].segments.length===0){let s=Gi(t.children[he],e,n);return new Me(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=qg(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Me(t.segments,i)}}function $b(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Qi(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Tg(l,c,o))return s;r+=2}else{if(!Tg(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cu(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Qi(s)){let l=Wb(s.outlets);return new Me(r,l)}if(i===0&&Xo(n[0])){let l=t.segments[e];r.push(new cr(l.path,Ag(n[0]))),i++;continue}let o=Qi(s)?s.outlets[he]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Xo(a)?(r.push(new cr(o,Ag(a))),i+=2):(r.push(new cr(o,{})),i++)}return new Me(r,{})}function Wb(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Cu(new Me([],{}),0,r))}),e}function Ag(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Tg(t,e,n){return t==n.path&&Yt(e,n.parameters)}var qi="imperative",et=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(et||{}),It=class{constructor(e,n){this.id=e,this.url=n}},Xi=class extends It{constructor(e,n,r="imperative",i=null){super(e,n),this.type=et.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ur=class extends It{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=et.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(vt||{}),Su=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Su||{}),_n=class extends It{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=et.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},dr=class extends It{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=et.NavigationSkipped}},Ji=class extends It{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=et.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ea=class extends It{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=et.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bu=class extends It{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=et.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wu=class extends It{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=et.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Du=class extends It{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=et.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Eu=class extends It{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=et.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iu=class{constructor(e){this.route=e,this.type=et.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mu=class{constructor(e){this.route=e,this.type=et.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},xu=class{constructor(e){this.snapshot=e,this.type=et.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Au=class{constructor(e){this.snapshot=e,this.type=et.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tu=class{constructor(e){this.snapshot=e,this.type=et.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ru=class{constructor(e){this.snapshot=e,this.type=et.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var es=class{},ei=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function zb(t,e){return t.providers&&!t._injector&&(t._injector=Kl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ft(t){return t.outlet||he}function Gb(t,e){let n=t.filter(r=>Ft(r)===e);return n.push(...t.filter(r=>Ft(r)!==e)),n}function os(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ku=class{get injector(){return os(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new aa(this.rootInjector),this.attachRef=null}},aa=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new ku(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(ye(bt))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ta=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ou(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Ou(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Nu(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Nu(e,this._root).map(n=>n.value)}};function Ou(t,e){if(t===e.value)return e;for(let n of e.children){let r=Ou(t,n);if(r)return r}return null}function Nu(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Nu(t,n);if(r.length)return r.unshift(e),r}return[]}var _t=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Zr(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var na=class extends ta{constructor(e,n){super(e),this.snapshot=n,Wu(this,e)}toString(){return this.snapshot.toString()}};function Kg(t){let e=qb(t),n=new Ze([new cr("",{})]),r=new Ze({}),i=new Ze({}),s=new Ze({}),o=new Ze(""),a=new ti(n,r,s,o,i,he,t,e.root);return a.snapshot=e.root,new na(new _t(a,[]),e)}function qb(t){let e={},n={},r={},i="",s=new Qr([],e,r,i,n,he,t,null,{});return new ia("",new _t(s,[]))}var ti=class{constructor(e,n,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ge(c=>c[ss]))??le(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ge(e=>Jr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ge(e=>Jr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ra(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:$($({},e.params),t.params),data:$($({},e.data),t.data),resolve:$($($($({},t.data),e.data),i?.data),t._resolvedData)}:r={params:$({},t.params),data:$({},t.data),resolve:$($({},t.data),t._resolvedData??{})},i&&Yg(i)&&(r.resolve[ss]=i.title),r}var Qr=class{get title(){return this.data?.[ss]}constructor(e,n,r,i,s,o,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Jr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Jr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ia=class extends ta{constructor(e,n){super(n),this.url=e,Wu(this,n)}toString(){return Zg(this._root)}};function Wu(t,e){e.value._routerState=t,e.children.forEach(n=>Wu(t,n))}function Zg(t){let e=t.children.length>0?` { ${t.children.map(Zg).join(", ")} } `:"";return`${t.value}${e}`}function pu(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Yt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Yt(e.params,n.params)||t.paramsSubject.next(n.params),Cb(e.url,n.url)||t.urlSubject.next(n.url),Yt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Lu(t,e){let n=Yt(t.params,e.params)&&Db(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Lu(t.parent,e.parent))}function Yg(t){return typeof t.title=="string"||t.title===null}var Kb=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=he,this.activateEvents=new Te,this.deactivateEvents=new Te,this.attachEvents=new Te,this.detachEvents=new Te,this.parentContexts=K(aa),this.location=K(Nn),this.changeDetector=K(Ve),this.inputBinder=K(zu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ne(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ne(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new Pu(r,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=qe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[qt]});let t=e;return t})(),Pu=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ti?this.route:e===aa?this.childContexts:this.parent.get(e,n)}},zu=new oe("");function Zb(t,e,n){let r=ts(t,e._root,n?n._root:void 0);return new na(r,e)}function ts(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Yb(t,e,n);return new _t(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ts(t,a)),o}}let r=Qb(e.value),i=e.children.map(s=>ts(t,s));return new _t(r,i)}}function Yb(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ts(t,r,i);return ts(t,r)})}function Qb(t){return new ti(new Ze(t.url),new Ze(t.params),new Ze(t.queryParams),new Ze(t.fragment),new Ze(t.data),t.outlet,t.component,t)}var ns=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Qg="ngNavigationCancelingError";function sa(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Yi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Xg(!1,vt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Xg(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Qg]=!0,n.cancellationCode=e,n}function Xb(t){return Jg(t)&&Yi(t.url)}function Jg(t){return!!t&&t[Qg]}var Jb=(t,e,n,r)=>ge(i=>(new Fu(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Fu=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),pu(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Zr(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Zr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Zr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Zr(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ru(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Au(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(pu(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),pu(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},oa=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Xr=class{constructor(e,n){this.component=e,this.route=n}};function ew(t,e,n){let r=t._root,i=e?e._root:null;return Wi(r,i,n,[r.value])}function tw(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ri(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Lh(t)?t:e.get(t):r}function Wi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Zr(e);return t.children.forEach(o=>{nw(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ki(a,n.getContext(o),i)),i}function nw(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=rw(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new oa(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Wi(t,e,a?a.children:null,r,i):Wi(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Xr(a.outlet.component,o))}else o&&Ki(e,a,i),i.canActivateChecks.push(new oa(r)),s.component?Wi(t,null,a?a.children:null,r,i):Wi(t,null,n,r,i);return i}function rw(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!lr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!lr(t.url,e.url)||!Yt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Lu(t,e)||!Yt(t.queryParams,e.queryParams);case"paramsChange":default:return!Lu(t,e)}}function Ki(t,e,n){let r=Zr(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ki(o,e.children.getContext(s),n):Ki(o,null,n):Ki(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Xr(e.outlet.component,i)):n.canDeactivateChecks.push(new Xr(null,i)):n.canDeactivateChecks.push(new Xr(null,i))}function as(t){return typeof t=="function"}function iw(t){return typeof t=="boolean"}function sw(t){return t&&as(t.canLoad)}function ow(t){return t&&as(t.canActivate)}function aw(t){return t&&as(t.canActivateChild)}function cw(t){return t&&as(t.canDeactivate)}function lw(t){return t&&as(t.canMatch)}function em(t){return t instanceof nn||t?.name==="EmptyError"}var Ko=Symbol("INITIAL_VALUE");function ni(){return Rt(t=>Gs(t.map(e=>e.pipe(rn(1),Qa(Ko)))).pipe(ge(e=>{for(let n of e)if(n!==!0){if(n===Ko)return Ko;if(n===!1||uw(n))return n}return!0}),Tt(e=>e!==Ko),rn(1)))}function uw(t){return Yi(t)||t instanceof ns}function dw(t,e){return ze(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?le(we($({},n),{guardsResult:!0})):hw(o,r,i,t).pipe(ze(a=>a&&iw(a)?fw(r,s,t,e):le(a)),ge(a=>we($({},n),{guardsResult:a})))})}function hw(t,e,n,r){return Pe(t).pipe(ze(i=>vw(i.component,i.route,n,e,r)),jt(i=>i!==!0,!0))}function fw(t,e,n,r){return Pe(e).pipe(wr(i=>br(gw(i.route.parent,r),pw(i.route,r),_w(t,i.path,n),mw(t,i.route,n))),jt(i=>i!==!0,!0))}function pw(t,e){return t!==null&&e&&e(new Tu(t)),le(!0)}function gw(t,e){return t!==null&&e&&e(new xu(t)),le(!0)}function mw(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return le(!0);let i=r.map(s=>qs(()=>{let o=os(e)??n,a=ri(s,o),l=ow(a)?a.canActivate(e,t):un(o,()=>a(e,t));return Bn(l).pipe(jt())}));return le(i).pipe(ni())}function _w(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>tw(o)).filter(o=>o!==null).map(o=>qs(()=>{let a=o.guards.map(l=>{let c=os(o.node)??n,p=ri(l,c),m=aw(p)?p.canActivateChild(r,t):un(c,()=>p(r,t));return Bn(m).pipe(jt())});return le(a).pipe(ni())}));return le(s).pipe(ni())}function vw(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return le(!0);let o=s.map(a=>{let l=os(e)??i,c=ri(a,l),p=cw(c)?c.canDeactivate(t,e,n,r):un(l,()=>c(t,e,n,r));return Bn(p).pipe(jt())});return le(o).pipe(ni())}function yw(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return le(!0);let s=i.map(o=>{let a=ri(o,t),l=sw(a)?a.canLoad(e,n):un(t,()=>a(e,n));return Bn(l)});return le(s).pipe(ni(),tm(r))}function tm(t){return Ha(Ye(e=>{if(typeof e!="boolean")throw sa(t,e)}),ge(e=>e===!0))}function Cw(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return le(!0);let s=i.map(o=>{let a=ri(o,t),l=lw(a)?a.canMatch(e,n):un(t,()=>a(e,n));return Bn(l)});return le(s).pipe(ni(),tm(r))}var rs=class{constructor(e){this.segmentGroup=e||null}},is=class extends Error{constructor(e){super(),this.urlTree=e}};function Kr(t){return Sr(new rs(t))}function Sw(t){return Sr(new ne(4e3,!1))}function bw(t){return Sr(Xg(!1,vt.GuardRejected))}var Bu=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return le(r);if(i.numberOfChildren>1||!i.children[he])return Sw(`${e.redirectTo}`);i=i.children[he]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:l,fragment:c,routeConfig:p,url:m,outlet:y,params:g,data:u,title:f}=i,d=un(s,()=>a({params:g,data:u,queryParams:l,fragment:c,routeConfig:p,url:m,outlet:y,title:f}));if(d instanceof vn)throw new is(d);n=d}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new is(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new vn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new Me(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new ne(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Vu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ww(t,e,n,r,i){let s=Gu(t,e,n);return s.matched?(r=zb(e,r),Cw(r,e,n,i).pipe(ge(o=>o===!0?s:$({},Vu)))):le(s)}function Gu(t,e,n){if(e.path==="**")return Dw(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?$({},Vu):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||yb)(n,t,e);if(!i)return $({},Vu);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?$($({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Dw(t){return{matched:!0,parameters:t.length>0?Lg(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Rg(t,e,n,r){return n.length>0&&Mw(t,n,r)?{segmentGroup:new Me(e,Iw(r,new Me(n,t.children))),slicedSegments:[]}:n.length===0&&xw(t,n,r)?{segmentGroup:new Me(t.segments,Ew(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Me(t.segments,t.children),slicedSegments:n}}function Ew(t,e,n,r){let i={};for(let s of n)if(ca(t,e,s)&&!r[Ft(s)]){let o=new Me([],{});i[Ft(s)]=o}return $($({},r),i)}function Iw(t,e){let n={};n[he]=e;for(let r of t)if(r.path===""&&Ft(r)!==he){let i=new Me([],{});n[Ft(r)]=i}return n}function Mw(t,e,n){return n.some(r=>ca(t,e,r)&&Ft(r)!==he)}function xw(t,e,n){return n.some(r=>ca(t,e,r))}function ca(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Aw(t,e,n,r){return Ft(t)!==r&&(r===he||!ca(e,n,t))?!1:Gu(e,t,n).matched}function Tw(t,e,n){return e.length===0&&!t.children[n]}var ju=class{};function Rw(t,e,n,r,i,s,o="emptyOnly"){return new Hu(t,e,n,r,i,o,s).recognize()}var kw=31,Hu=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Bu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ne(4002,`'${e.segmentGroup}'`)}recognize(){let e=Rg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ge(({children:n,rootSnapshot:r})=>{let i=new _t(r,n),s=new ia("",i),o=Bb(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Qr([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,he,n).pipe(ge(r=>({children:r,rootSnapshot:n})),bn(r=>{if(r instanceof is)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof rs?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(ge(o=>o instanceof _t?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Pe(s).pipe(wr(o=>{let a=r.children[o],l=Gb(n,o);return this.processSegmentGroup(e,l,a,o,i)}),Ya((o,a)=>(o.push(...a),o)),wn(null),Za(),ze(o=>{if(o===null)return Kr(r);let a=nm(o);return Ow(a),le(a)}))}processSegment(e,n,r,i,s,o,a){return Pe(n).pipe(wr(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,r,i,s,o,a).pipe(bn(c=>{if(c instanceof rs)return le(null);throw c}))),jt(l=>!!l),bn(l=>{if(em(l))return Tw(r,i,s)?le(new ju):Kr(r);throw l}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,l){return Aw(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,l):Kr(i):Kr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:l,parameters:c,consumedSegments:p,positionalParamSegments:m,remainingSegments:y}=Gu(n,i,s);if(!l)return Kr(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kw&&(this.allowRedirects=!1));let g=new Qr(s,c,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,kg(i),Ft(i),i.component??i._loadedComponent??null,i,Og(i)),u=ra(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(u.params),g.data=Object.freeze(u.data);let f=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,m,g,e);return this.applyRedirects.lineralizeSegments(i,f).pipe(ze(d=>this.processSegment(e,r,n,d.concat(y),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=ww(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Rt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Rt(({routes:c})=>{let p=r._loadedInjector??e,{parameters:m,consumedSegments:y,remainingSegments:g}=l,u=new Qr(y,m,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,kg(r),Ft(r),r.component??r._loadedComponent??null,r,Og(r)),f=ra(u,o,this.paramsInheritanceStrategy);u.params=Object.freeze(f.params),u.data=Object.freeze(f.data);let{segmentGroup:d,slicedSegments:h}=Rg(n,y,g,c);if(h.length===0&&d.hasChildren())return this.processChildren(p,c,d,u).pipe(ge(C=>new _t(u,C)));if(c.length===0&&h.length===0)return le(new _t(u,[]));let _=Ft(r)===s;return this.processSegment(p,c,d,h,_?he:s,!0,u).pipe(ge(C=>new _t(u,C instanceof _t?[C]:[])))}))):Kr(n)))}getChildConfig(e,n,r){return n.children?le({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?le({routes:n._loadedRoutes,injector:n._loadedInjector}):yw(e,n,r,this.urlSerializer).pipe(ze(i=>i?this.configLoader.loadChildren(e,n).pipe(Ye(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):bw(n))):le({routes:[],injector:e})}};function Ow(t){t.sort((e,n)=>e.value.outlet===he?-1:n.value.outlet===he?1:e.value.outlet.localeCompare(n.value.outlet))}function Nw(t){let e=t.value.routeConfig;return e&&e.path===""}function nm(t){let e=[],n=new Set;for(let r of t){if(!Nw(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=nm(r.children);e.push(new _t(r.value,i))}return e.filter(r=>!n.has(r))}function kg(t){return t.data||{}}function Og(t){return t.resolve||{}}function Lw(t,e,n,r,i,s){return ze(o=>Rw(t,e,n,r,o.extractedUrl,i,s).pipe(ge(({state:a,tree:l})=>we($({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function Pw(t,e){return ze(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return le(n);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of rm(l))o.add(c);let a=0;return Pe(o).pipe(wr(l=>s.has(l)?Fw(l,r,t,e):(l.data=ra(l,l.parent,t).resolve,le(void 0))),Ye(()=>a++),Dr(1),ze(l=>a===o.size?le(n):gt))})}function rm(t){let e=t.children.map(n=>rm(n)).flat();return[t,...e]}function Fw(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!Yg(i)&&(s[ss]=i.title),Bw(s,t,e,r).pipe(ge(o=>(t._resolvedData=o,t.data=ra(t,t.parent,n).resolve,null)))}function Bw(t,e,n,r){let i=_u(t);if(i.length===0)return le({});let s={};return Pe(i).pipe(ze(o=>Vw(t[o],e,n,r).pipe(jt(),Ye(a=>{if(a instanceof ns)throw sa(new Zi,a);s[o]=a}))),Dr(1),Ka(s),bn(o=>em(o)?gt:Sr(o)))}function Vw(t,e,n,r){let i=os(e)??r,s=ri(t,i),o=s.resolve?s.resolve(e,n):un(i,()=>s(e,n));return Bn(o)}function gu(t){return Rt(e=>{let n=t(e);return n?Pe(n).pipe(ge(()=>e)):le(e)})}var im=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===he);return i}getResolvedTitleForRoute(r){return r.data[ss]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>K(jw),providedIn:"root"});let t=e;return t})(),jw=(()=>{let e=class e extends im{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(ye(Ig))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qu=new oe("",{providedIn:"root",factory:()=>({})}),Hw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ne({type:e,selectors:[["ng-component"]],standalone:!0,features:[Le],decls:1,vars:0,template:function(i,s){i&1&&ee(0,"router-outlet")},dependencies:[Kb],encapsulation:2});let t=e;return t})();function Ku(t){let e=t.children&&t.children.map(Ku),n=e?we($({},t),{children:e}):$({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==he&&(n.component=Hw),n}var Zu=new oe(""),Uw=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=K(Xl)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return le(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Bn(r.loadComponent()).pipe(ge(sm),Ye(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Ci(()=>{this.componentLoaders.delete(r)})),s=new Cr(i,()=>new Ae).pipe(yr());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return le({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=$w(i,this.compiler,r,this.onLoadEndListener).pipe(Ci(()=>{this.childrenLoaders.delete(i)})),a=new Cr(o,()=>new Ae).pipe(yr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $w(t,e,n,r){return Bn(t.loadChildren()).pipe(ge(sm),ze(i=>i instanceof Ai||Array.isArray(i)?le(i):Pe(e.compileModuleAsync(i))),ge(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Zu,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ku),injector:s}}))}function Ww(t){return t&&typeof t=="object"&&"default"in t}function sm(t){return Ww(t)?t.default:t}var Yu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>K(zw),providedIn:"root"});let t=e;return t})(),zw=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Gw=new oe("");var qw=new oe(""),Kw=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ae,this.transitionAbortSubject=new Ae,this.configLoader=K(Uw),this.environmentInjector=K(bt),this.urlSerializer=K($u),this.rootContexts=K(aa),this.location=K(Bi),this.inputBindingEnabled=K(zu,{optional:!0})!==null,this.titleStrategy=K(im),this.options=K(qu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=K(Yu),this.createViewTransition=K(Gw,{optional:!0}),this.navigationErrorHandler=K(qw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>le(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Iu(s)),i=s=>this.events.next(new Mu(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(we($($({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Ze({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:qi,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Tt(o=>o.id!==0),ge(o=>we($({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Rt(o=>{let a=!1,l=!1;return le(o).pipe(Rt(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",vt.SupersededByNewNavigation),gt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?we($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!p&&m!=="reload"){let y="";return this.events.next(new dr(c.id,this.urlSerializer.serialize(c.rawUrl),y,Su.IgnoredSameUrlNavigation)),c.resolve(!1),gt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return le(c).pipe(Rt(y=>{let g=this.transitions?.getValue();return this.events.next(new Xi(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),g!==this.transitions?.getValue()?gt:Promise.resolve(y)}),Lw(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ye(y=>{o.targetSnapshot=y.targetSnapshot,o.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation=we($({},this.currentNavigation),{finalUrl:y.urlAfterRedirects});let g=new ea(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(g)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:y,extractedUrl:g,source:u,restoredState:f,extras:d}=c,h=new Xi(y,this.urlSerializer.serialize(g),u,f);this.events.next(h);let _=Kg(this.rootComponentType).snapshot;return this.currentTransition=o=we($({},c),{targetSnapshot:_,urlAfterRedirects:g,extras:we($({},d),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,le(o)}else{let y="";return this.events.next(new dr(c.id,this.urlSerializer.serialize(c.extractedUrl),y,Su.IgnoredByUrlHandlingStrategy)),c.resolve(!1),gt}}),Ye(c=>{let p=new bu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(p)}),ge(c=>(this.currentTransition=o=we($({},c),{guards:ew(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),dw(this.environmentInjector,c=>this.events.next(c)),Ye(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw sa(this.urlSerializer,c.guardsResult);let p=new wu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(p)}),Tt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",vt.GuardRejected),!1)),gu(c=>{if(c.guards.canActivateChecks.length)return le(c).pipe(Ye(p=>{let m=new Du(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}),Rt(p=>{let m=!1;return le(p).pipe(Pw(this.paramsInheritanceStrategy,this.environmentInjector),Ye({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(p,"",vt.NoDataFromResolver)}}))}),Ye(p=>{let m=new Eu(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}))}),gu(c=>{let p=m=>{let y=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(m.routeConfig).pipe(Ye(g=>{m.component=g}),ge(()=>{})));for(let g of m.children)y.push(...p(g));return y};return Gs(p(c.targetSnapshot.root)).pipe(wn(null),rn(1))}),gu(()=>this.afterPreactivation()),Rt(()=>{let{currentSnapshot:c,targetSnapshot:p}=o,m=this.createViewTransition?.(this.environmentInjector,c.root,p.root);return m?Pe(m).pipe(ge(()=>o)):le(o)}),ge(c=>{let p=Zb(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=we($({},c),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,o}),Ye(()=>{this.events.next(new es)}),Jb(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),rn(1),Ye({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ur(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Xa(this.transitionAbortSubject.pipe(Ye(c=>{throw c}))),Ci(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",vt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),bn(c=>{if(l=!0,Jg(c))this.events.next(new _n(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Xb(c)?this.events.next(new ei(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let p=new Ji(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let m=un(this.environmentInjector,()=>this.navigationErrorHandler?.(p));if(m instanceof ns){let{message:y,cancellationCode:g}=sa(this.urlSerializer,m);this.events.next(new _n(o.id,this.urlSerializer.serialize(o.extractedUrl),y,g)),this.events.next(new ei(m.redirectTo,m.navigationBehaviorOptions))}else{this.events.next(p);let y=r.errorHandler(c);o.resolve(!!y)}}catch(m){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(m)}}return gt}))}))}cancelNavigationTransition(r,i,s){let o=new _n(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Zw(t){return t!==qi}var Yw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>K(Qw),providedIn:"root"});let t=e;return t})(),Uu=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Qw=(()=>{let e=class e extends Uu{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=kn(e)))(s||e)}})(),e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),om=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>K(Xw),providedIn:"root"});let t=e;return t})(),Xw=(()=>{let e=class e extends om{constructor(){super(...arguments),this.location=K(Bi),this.urlSerializer=K($u),this.options=K(qu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=K(Yu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new vn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Kg(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Xi)this.stateMemento=this.createStateMemento();else if(r instanceof dr)this.rawUrlTree=i.initialUrl;else if(r instanceof ea){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof es?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof _n&&(r.code===vt.GuardRejected||r.code===vt.NoDataFromResolver)?this.restoreHistory(i):r instanceof Ji?this.restoreHistory(i,!0):r instanceof ur&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof vn?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=$($({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=$($({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=kn(e)))(s||e)}})(),e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),zi=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(zi||{});function Jw(t,e){t.events.pipe(Tt(n=>n instanceof ur||n instanceof _n||n instanceof Ji||n instanceof dr),ge(n=>n instanceof ur||n instanceof dr?zi.COMPLETE:(n instanceof _n?n.code===vt.Redirect||n.code===vt.SupersededByNewNavigation:!1)?zi.REDIRECTING:zi.FAILED),Tt(n=>n!==zi.REDIRECTING),rn(1)).subscribe(()=>{e()})}function eD(t){throw t}var tD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},am=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=K(jo),this.stateManager=K(om),this.options=K(qu,{optional:!0})||{},this.pendingTasks=K(Ur),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=K(Kw),this.urlSerializer=K($u),this.location=K(Bi),this.urlHandlingStrategy=K(Yu),this._events=new Ae,this.errorHandler=this.options.errorHandler||eD,this.navigated=!1,this.routeReuseStrategy=K(Yw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=K(Zu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!K(zu,{optional:!0}),this.eventsSubscription=new je,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof _n&&i.code!==vt.Redirect&&i.code!==vt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ur)this.navigated=!0;else if(i instanceof ei){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c=$({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Zw(s.source)},a);this.scheduleNavigation(l,qi,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}iD(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),qi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=$({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Ku),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,p=c?this.currentUrlTree.fragment:a,m=null;switch(l){case"merge":m=$($({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let y;try{let g=s?s.snapshot:this.routerState.snapshot.root;y=Wg(g)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),y=this.currentUrlTree.root}return zg(y,r,m,p??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Yi(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,qi,null,i)}navigate(r,i={skipLocationChange:!1}){return rD(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=$({},tD):i===!1?s=$({},nD):s=i,Yi(r))return Mg(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Mg(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,p;a?(l=a.resolve,c=a.reject,p=a.promise):p=new Promise((y,g)=>{l=y,c=g});let m=this.pendingTasks.add();return Jw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:l,reject:c,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(y=>Promise.reject(y))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rD(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ne(4008,!1)}function iD(t){return!(t instanceof es)&&!(t instanceof ei)}var sD=new oe("");function cm(t,...e){return Ao([{provide:Zu,multi:!0,useValue:t},[],{provide:ti,useFactory:oD,deps:[am]},{provide:Ql,multi:!0,useFactory:aD},e.map(n=>n.\u0275providers)])}function oD(t){return t.routerState.root}function aD(){let t=K(An);return e=>{let n=t.get(Gr);if(e!==n.components[0])return;let r=t.get(am),i=t.get(cD);t.get(lD)===1&&r.initialNavigation(),t.get(uD,null,fe.Optional)?.setUpPreloading(),t.get(sD,null,fe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var cD=new oe("",{factory:()=>new Ae}),lD=new oe("",{providedIn:"root",factory:()=>1});var uD=new oe("");var lm=[];var um={providers:[ng({eventCoalescing:!0}),cm(lm)]};var ym=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(X(On),X(Et))},e.\u0275dir=qe({type:e});let t=e;return t})(),ma=(()=>{let e=class e extends ym{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=kn(e)))(s||e)}})(),e.\u0275dir=qe({type:e,features:[Pt]});let t=e;return t})(),ps=new oe("");var dD={provide:ps,useExisting:ln(()=>Qt),multi:!0};function hD(){let t=mn()?mn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var fD=new oe(""),Qt=(()=>{let e=class e extends ym{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!hD())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(X(On),X(Et),X(fD,8))},e.\u0275dir=qe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&de("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[sr([dD]),Pt]});let t=e;return t})();var Cm=new oe(""),Sm=new oe("");function bm(t){return t!=null}function wm(t){return or(t)?Pe(t):t}function Dm(t){let e={};return t.forEach(n=>{e=n!=null?$($({},e),n):e}),Object.keys(e).length===0?null:e}function Em(t,e){return e.map(n=>n(t))}function pD(t){return!t.validate}function Im(t){return t.map(e=>pD(e)?e:n=>e.validate(n))}function gD(t){if(!t)return null;let e=t.filter(bm);return e.length==0?null:function(n){return Dm(Em(n,e))}}function Xu(t){return t!=null?gD(Im(t)):null}function mD(t){if(!t)return null;let e=t.filter(bm);return e.length==0?null:function(n){let r=Em(n,e).map(wm);return qa(r).pipe(ge(Dm))}}function Ju(t){return t!=null?mD(Im(t)):null}function dm(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function _D(t){return t._rawValidators}function vD(t){return t._rawAsyncValidators}function Qu(t){return t?Array.isArray(t)?t:[t]:[]}function ua(t,e){return Array.isArray(t)?t.includes(e):t===e}function hm(t,e){let n=Qu(e);return Qu(t).forEach(i=>{ua(n,i)||n.push(i)}),n}function fm(t,e){return Qu(e).filter(n=>!ua(t,n))}var da=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xu(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ju(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},oi=class extends da{get formDirective(){return null}get path(){return null}},fs=class extends da{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ha=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},yD={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ck=we($({},yD),{"[class.ng-submitted]":"isSubmitted"}),Xt=(()=>{let e=class e extends ha{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(X(fs,2))},e.\u0275dir=qe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Vo("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Pt]});let t=e;return t})(),ci=(()=>{let e=class e extends ha{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(X(oi,10))},e.\u0275dir=qe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Vo("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Pt]});let t=e;return t})();var cs="VALID",la="INVALID",ii="PENDING",ls="DISABLED",ai=class{},fa=class extends ai{constructor(e,n){super(),this.value=e,this.source=n}},ds=class extends ai{constructor(e,n){super(),this.pristine=e,this.source=n}},hs=class extends ai{constructor(e,n){super(),this.touched=e,this.source=n}},si=class extends ai{constructor(e,n){super(),this.status=e,this.source=n}};function Mm(t){return(_a(t)?t.validators:t)||null}function CD(t){return Array.isArray(t)?Xu(t):t||null}function xm(t,e){return(_a(e)?e.asyncValidators:t)||null}function SD(t){return Array.isArray(t)?Ju(t):t||null}function _a(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function bD(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new ne(1e3,"");if(!r[n])throw new ne(1001,"")}function wD(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new ne(1002,"")})}var pa=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Fi(()=>this.statusReactive()),this.statusReactive=Pi(void 0),this._pristine=Fi(()=>this.pristineReactive()),this.pristineReactive=Pi(!0),this._touched=Fi(()=>this.touchedReactive()),this.touchedReactive=Pi(!1),this._events=new Ae,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return gn(this.statusReactive)}set status(e){gn(()=>this.statusReactive.set(e))}get valid(){return this.status===cs}get invalid(){return this.status===la}get pending(){return this.status==ii}get disabled(){return this.status===ls}get enabled(){return this.status!==ls}get pristine(){return gn(this.pristineReactive)}set pristine(e){gn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return gn(this.touchedReactive)}set touched(e){gn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(hm(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(hm(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(fm(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(fm(e,this._rawAsyncValidators))}hasValidator(e){return ua(this._rawValidators,e)}hasAsyncValidator(e){return ua(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(we($({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new hs(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new hs(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(we($({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ds(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new ds(!0,r))}markAsPending(e={}){this.status=ii;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new si(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(we($({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ls,this.errors=null,this._forEachChild(i=>{i.disable(we($({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fa(this.value,r)),this._events.next(new si(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(we($({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=cs,this._forEachChild(r=>{r.enable(we($({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(we($({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cs||this.status===ii)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fa(this.value,n)),this._events.next(new si(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(we($({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ls:cs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ii,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=wm(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new si(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Te,this.statusChanges=new Te}_calculateStatus(){return this._allControlsDisabled()?ls:this.errors?la:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ii)?ii:this._anyControlsHaveStatus(la)?la:cs}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new ds(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new hs(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_a(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=CD(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=SD(this._rawAsyncValidators)}},ga=class extends pa{constructor(e,n,r){super(Mm(n),xm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){wD(this,!0,e),Object.keys(e).forEach(r=>{bD(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ed=new oe("CallSetDisabledState",{providedIn:"root",factory:()=>td}),td="always";function DD(t,e){return[...e.path,t]}function Am(t,e,n=td){Tm(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),ID(t,e),xD(t,e),MD(t,e),ED(t,e)}function pm(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function ED(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Tm(t,e){let n=_D(t);e.validator!==null?t.setValidators(dm(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=vD(t);e.asyncValidator!==null?t.setAsyncValidators(dm(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();pm(e._rawValidators,i),pm(e._rawAsyncValidators,i)}function ID(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Rm(t,e)})}function MD(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Rm(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Rm(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function xD(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function AD(t,e){t==null,Tm(t,e)}function TD(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function RD(t){return Object.getPrototypeOf(t.constructor)===ma}function kD(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function OD(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Qt?n=s:RD(s)?r=s:i=s}),i||r||n||null}var ND={provide:oi,useExisting:ln(()=>hr)},us=Promise.resolve(),hr=(()=>{let e=class e extends oi{get submitted(){return gn(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Fi(()=>this.submittedReactive()),this.submittedReactive=Pi(!1),this._directives=new Set,this.ngSubmit=new Te,this.form=new ga({},Xu(r),Ju(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){us.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),Am(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){us.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){us.then(()=>{let i=this._findContainer(r.path),s=new ga({});AD(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){us.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){us.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),kD(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(X(Cm,10),X(Sm,10),X(ed,8))},e.\u0275dir=qe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&de("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sr([ND]),Pt]});let t=e;return t})();function gm(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function mm(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var LD=class extends pa{constructor(e=null,n,r){super(Mm(n),xm(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_a(n)&&(n.nonNullable||n.initialValueIsDefault)&&(mm(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){mm(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var PD={provide:fs,useExisting:ln(()=>Bt)},_m=Promise.resolve(),Bt=(()=>{let e=class e extends fs{constructor(r,i,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new LD,this._registered=!1,this.name="",this.update=new Te,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=OD(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),TD(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Am(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){_m.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Ho(i);_m.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?DD(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(X(oi,9),X(Cm,10),X(Sm,10),X(ps,10),X(Ve,8),X(ed,8))},e.\u0275dir=qe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sr([PD]),Pt,qt]});let t=e;return t})(),li=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=qe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),FD={provide:ps,useExisting:ln(()=>nd),multi:!0},nd=(()=>{let e=class e extends ma{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=kn(e)))(s||e)}})(),e.\u0275dir=qe({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&de("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[sr([FD]),Pt]});let t=e;return t})();var BD={provide:ps,useExisting:ln(()=>ui),multi:!0};function km(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function VD(t){return t.split(":")[0]}var ui=(()=>{let e=class e extends ma{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=km(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=VD(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=kn(e)))(s||e)}})(),e.\u0275dir=qe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&de("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[sr([BD]),Pt]});let t=e;return t})(),va=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(km(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(X(Et),X(On),X(ui,9))},e.\u0275dir=qe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),jD={provide:ps,useExisting:ln(()=>Om),multi:!0};function vm(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function HD(t){return t.split(":")[0]}var Om=(()=>{let e=class e extends ma{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let l=0;l<a.length;l++){let c=a[l],p=this._getOptionValue(c.value);s.push(p)}}else{let a=i.options;for(let l=0;l<a.length;l++){let c=a[l];if(c.selected){let p=this._getOptionValue(c.value);s.push(p)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=HD(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=kn(e)))(s||e)}})(),e.\u0275dir=qe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&de("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[sr([jD]),Pt]});let t=e;return t})(),ya=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(vm(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(vm(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(X(Et),X(On),X(Om,9))},e.\u0275dir=qe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var UD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=nr({type:e}),e.\u0275inj=tr({});let t=e;return t})();var Mt=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:ed,useValue:r.callSetDisabledState??td}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=nr({type:e}),e.\u0275inj=tr({imports:[UD]});let t=e;return t})();var Ca=class{_sessionDataEvent=new Ae;_sessionStateEvent=new Ae;buffer=[];reader=void 0;readStopFlag=!0;name=void 0;serial_port=void 0;opened=!1;command_set_visible=!1;get SessionDataEvent(){return this._sessionDataEvent.asObservable()}get SessionStateEvent(){return this._sessionStateEvent.asObservable()}serial_options={baudRate:115200,dataBits:8,stopBits:1,parity:"none",bufferSize:1e6,rtscts:!1,xon:!1,xoff:!1,xany:!1,line_feed:"LF"};constructor(e,n){this.name=e,this.serial_options=n}clear(){this.buffer.splice(0,this.buffer.length)}open(){return en(this,null,function*(){this.serial_port!=null&&(yield this.serial_port.open(this.serial_options),this.serial_port.readable!=null&&(this.opened=!0,this._sessionStateEvent.next(this.opened),this.reader=this.serial_port.readable.getReader(),this.reader!=null&&this.fetchStream()))})}close(){return en(this,null,function*(){if(this.serial_port!=null){this.readStopFlag=!0;try{this.reader.cancel(),this.reader.releaseLock()}catch{}this.serial_port.close(),this.opened=!1,this._sessionStateEvent.next(this.opened)}})}write(e){if(e.length>0&&this.serial_port!=null&&this.serial_port.writable!=null){let n=this.serial_port.writable.getWriter();n!=null&&(n.write(e),n.releaseLock())}}getNewLineCharacter(){return this.serial_options.line_feed=="CR"?"\r":this.serial_options.line_feed=="LF"?`
`:(this.serial_options.line_feed="CRLF")?`\r
`:""}readBuffer(){return[...this.buffer]}fetchStream(){return en(this,null,function*(){if(this.serial_port!=null)for(this.readStopFlag=!1;this.reader!=null&&!this.readStopFlag;)try{let{value:e,done:n}=yield this.reader.read();if(n){this.reader.releaseLock();break}else this.buffer.push(...e),this._sessionDataEvent.next(e)}catch{yield new Promise(n=>{setTimeout(n,10)}),this.serial_port.readable&&(this.reader=this.serial_port.readable.getReader())}})}};var xt=function(){return xt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xt.apply(this,arguments)},$D=function(){function t(e){this.options=e,this.listeners={}}return t.prototype.on=function(e,n){var r=this.listeners[e]||[];this.listeners[e]=r.concat([n])},t.prototype.triggerEvent=function(e,n){var r=this,i=this.listeners[e]||[];i.forEach(function(s){return s({target:r,event:n})})},t}(),ms=function(t){return t[t.Add=0]="Add",t[t.Remove=1]="Remove",t}(ms||{}),WD=function(){function t(){this.notifications=[]}return t.prototype.push=function(e){this.notifications.push(e),this.updateFn(e,ms.Add,this.notifications)},t.prototype.splice=function(e,n){var r=this.notifications.splice(e,n)[0];return this.updateFn(r,ms.Remove,this.notifications),r},t.prototype.indexOf=function(e){return this.notifications.indexOf(e)},t.prototype.onUpdate=function(e){this.updateFn=e},t}(),fr=function(t){return t.Dismiss="dismiss",t.Click="click",t}(fr||{}),Nm={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!1},zD=function(){function t(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var e=document.createDocumentFragment(),n=this._createHTMLElement({tagName:"div",className:"notyf"});e.appendChild(n),document.body.appendChild(e),this.container=n,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}return t.prototype.on=function(e,n){var r;this.events=xt(xt({},this.events),(r={},r[e]=n,r))},t.prototype.update=function(e,n){n===ms.Add?this.addNotification(e):n===ms.Remove&&this.removeNotification(e)},t.prototype.removeNotification=function(e){var n=this,r=this._popRenderedNotification(e),i;if(r){i=r.node,i.classList.add("notyf__toast--disappear");var s;i.addEventListener(this.animationEndEventName,s=function(o){o.target===i&&(i.removeEventListener(n.animationEndEventName,s),n.container.removeChild(i))})}},t.prototype.addNotification=function(e){var n=this._renderNotification(e);this.notifications.push({notification:e,node:n}),this._announce(e.options.message||"Notification")},t.prototype._renderNotification=function(e){var n,r=this._buildNotificationCard(e),i=e.options.className;return i&&(n=r.classList).add.apply(n,i.split(" ")),this.container.appendChild(r),r},t.prototype._popRenderedNotification=function(e){for(var n=-1,r=0;r<this.notifications.length&&n<0;r++)this.notifications[r].notification===e&&(n=r);if(n!==-1)return this.notifications.splice(n,1)[0]},t.prototype.getXPosition=function(e){var n;return((n=e?.position)===null||n===void 0?void 0:n.x)||"right"},t.prototype.getYPosition=function(e){var n;return((n=e?.position)===null||n===void 0?void 0:n.y)||"bottom"},t.prototype.adjustContainerAlignment=function(e){var n=this.X_POSITION_FLEX_MAP[this.getXPosition(e)],r=this.Y_POSITION_FLEX_MAP[this.getYPosition(e)],i=this.container.style;i.setProperty("justify-content",r),i.setProperty("align-items",n)},t.prototype._buildNotificationCard=function(e){var n=this,r=e.options,i=r.icon;this.adjustContainerAlignment(r);var s=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),o=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),a=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),l=this._createHTMLElement({tagName:"div",className:"notyf__message"});l.innerHTML=r.message||"";var c=r.background||r.backgroundColor;if(i){var p=this._createHTMLElement({tagName:"div",className:"notyf__icon"});if((typeof i=="string"||i instanceof String)&&(p.innerHTML=new String(i).valueOf()),typeof i=="object"){var m=i.tagName,y=m===void 0?"i":m,g=i.className,u=i.text,f=i.color,d=f===void 0?c:f,h=this._createHTMLElement({tagName:y,className:g,text:u});d&&(h.style.color=d),p.appendChild(h)}a.appendChild(p)}if(a.appendChild(l),s.appendChild(a),c&&(r.ripple?(o.style.background=c,s.appendChild(o)):s.style.background=c),r.dismissible){var _=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),C=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"});_.appendChild(C),a.appendChild(_),s.classList.add("notyf__toast--dismissible"),C.addEventListener("click",function(b){var v,w;(w=(v=n.events)[fr.Dismiss])===null||w===void 0||w.call(v,{target:e,event:b}),b.stopPropagation()})}s.addEventListener("click",function(b){var v,w;return(w=(v=n.events)[fr.Click])===null||w===void 0?void 0:w.call(v,{target:e,event:b})});var S=this.getYPosition(r)==="top"?"upper":"lower";return s.classList.add("notyf__toast--"+S),s},t.prototype._createHTMLElement=function(e){var n=e.tagName,r=e.className,i=e.text,s=document.createElement(n);return r&&(s.className=r),s.textContent=i||null,s},t.prototype._createA11yContainer=function(){var e=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),e.style.border="0",e.style.clip="rect(0 0 0 0)",e.style.height="1px",e.style.margin="-1px",e.style.overflow="hidden",e.style.padding="0",e.style.position="absolute",e.style.width="1px",e.style.outline="0",document.body.appendChild(e),this.a11yContainer=e},t.prototype._announce=function(e){var n=this;this.a11yContainer.textContent="",setTimeout(function(){n.a11yContainer.textContent=e},100)},t.prototype._getAnimationEndEventName=function(){var e=document.createElement("_fake"),n={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"},r;for(r in n)if(e.style[r]!==void 0)return n[r];return"animationend"},t}(),Lm=function(){function t(e){var n=this;this.dismiss=this._removeNotification,this.notifications=new WD,this.view=new zD;var r=this.registerTypes(e);this.options=xt(xt({},Nm),e),this.options.types=r,this.notifications.onUpdate(function(i,s){return n.view.update(i,s)}),this.view.on(fr.Dismiss,function(i){var s=i.target,o=i.event;n._removeNotification(s),s.triggerEvent(fr.Dismiss,o)}),this.view.on(fr.Click,function(i){var s=i.target,o=i.event;return s.triggerEvent(fr.Click,o)})}return t.prototype.error=function(e){var n=this.normalizeOptions("error",e);return this.open(n)},t.prototype.success=function(e){var n=this.normalizeOptions("success",e);return this.open(n)},t.prototype.open=function(e){var n=this.options.types.find(function(s){var o=s.type;return o===e.type})||{},r=xt(xt({},n),e);this.assignProps(["ripple","position","dismissible"],r);var i=new $D(r);return this._pushNotification(i),i},t.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},t.prototype.assignProps=function(e,n){var r=this;e.forEach(function(i){n[i]=n[i]==null?r.options[i]:n[i]})},t.prototype._pushNotification=function(e){var n=this;this.notifications.push(e);var r=e.options.duration!==void 0?e.options.duration:this.options.duration;r&&setTimeout(function(){return n._removeNotification(e)},r)},t.prototype._removeNotification=function(e){var n=this.notifications.indexOf(e);n!==-1&&this.notifications.splice(n,1)},t.prototype.normalizeOptions=function(e,n){var r={type:e};return typeof n=="string"?r.message=n:typeof n=="object"&&(r=xt(xt({},r),n)),r},t.prototype.registerTypes=function(e){var n=(e&&e.types||[]).slice(),r=Nm.types.map(function(i){var s=-1;n.forEach(function(a,l){a.type===i.type&&(s=l)});var o=s!==-1?n.splice(s,1)[0]:{};return xt(xt({},i),o)});return r.concat(n)},t}();var $e=(()=>{class t{sessions=[];layout_mode="grid";command_group_admin=!1;active_session=0;notyf=void 0;command_groups=[];constructor(){this.notyf=new Lm,this.loadCommandGroups()}_resizeEvent=new Ae;get ResizeEvent(){return this._resizeEvent.asObservable()}triggerResizeEvent(){this._resizeEvent.next(void 0)}_sessionChangeEvent=new Ae;get SessionChangeEvent(){return this._sessionChangeEvent.asObservable()}_sessionLayoutChangeEvent=new Ae;get SessionLayoutChangeEvent(){return this._sessionLayoutChangeEvent.asObservable()}_commandGroupChangeEvent=new Ae;get CommandGroupChangeEvent(){return this._commandGroupChangeEvent.asObservable()}changeLayout(n){this.layout_mode=n,this._sessionLayoutChangeEvent.next(this.layout_mode)}newSession(){let n=new Ca(`Session${this.sessions.length+1}`,this.getDefaultSerialOptions());this.sessions.push(n),this._sessionChangeEvent.next(n)}removeSession(n){if(this.sessions.includes(n)){n.opened&&n.close();let r=this.sessions.indexOf(n);r>=0&&(this.sessions.splice(this.sessions.indexOf(n),1),r>0&&(this.active_session=r-1)),this._sessionChangeEvent.next(n)}}toggleCommandAdminMode(){this.command_group_admin=!this.command_group_admin,this.TriggerCommandGroupChangeEvent()}TriggerCommandGroupChangeEvent(){this._commandGroupChangeEvent.next(void 0),this.saveCommandGroups()}saveDefaultSerialOptions(n){localStorage.setItem("default_serial_options",JSON.stringify(n))}saveCommandGroups(){localStorage.setItem("command_groups",JSON.stringify(this.command_groups))}loadCommandGroups(){let n;try{let r=localStorage.getItem("command_groups");r!=null&&r.length>0&&(n=JSON.parse(r))}catch{}n!=null&&(this.command_groups=n)}getDefaultSerialOptions(){let n;try{let r=localStorage.getItem("default_serial_options");r!=null&&r.length>0&&(n=JSON.parse(r))}catch{}return n==null&&(n={baudRate:115200,dataBits:8,stopBits:1,parity:"none",bufferSize:1e6,rtscts:!1,xon:!1,xoff:!1,xany:!1,line_feed:"LF"}),n}getCommandGroup(n){for(let r=0;r<this.command_groups.length;r++)if(this.command_groups[r].name==n)return this.command_groups[r]}showInfo(n){this.notyf&&this.notyf.success({message:n,duration:5e3,icon:!1})}showError(n){this.notyf&&this.notyf.error({message:n,duration:5e3,icon:!1})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var GD=["close_btn"];function qD(t,e){if(t&1){let n=Be();P(0,"button",15),de("click",function(){me(n);let i=J();return _e(i.appendUploadedCommandData())}),Z(1,"Append"),L()}}function KD(t,e){if(t&1){let n=Be();P(0,"button",15),de("click",function(){me(n);let i=J();return _e(i.replaceUploadedCommandData())}),Z(1,"Replace"),L()}}var Pm=(()=>{class t{changeDetectorRef;appService;close_btn;dialog_id="";uploaded_command_groups=void 0;constructor(n,r){this.changeDetectorRef=n,this.appService=r}uploadFile(n){let r=n.target.files[0],i=new FileReader;i.readAsText(r,"UTF-8"),i.onload=()=>{let s=i.result;this.uploaded_command_groups=JSON.parse(s),this.changeDetectorRef.markForCheck()},i.onerror=s=>{console.log(s)}}appendUploadedCommandData(){this.uploaded_command_groups!=null&&(this.uploaded_command_groups.forEach(n=>{this.appService.command_groups.push(n)}),this.appService.TriggerCommandGroupChangeEvent(),this.close_btn!=null&&(this.uploaded_command_groups=void 0,this.close_btn.nativeElement.click()))}replaceUploadedCommandData(){this.uploaded_command_groups!=null&&(this.appService.command_groups=this.uploaded_command_groups,this.appService.TriggerCommandGroupChangeEvent(),this.close_btn!=null&&(this.uploaded_command_groups=void 0,this.close_btn.nativeElement.click()))}static \u0275fac=function(r){return new(r||t)(X(Ve),X($e))};static \u0275cmp=Ne({type:t,selectors:[["command-data-upload"]],viewQuery:function(r,i){if(r&1&&Ln(GD,5),r&2){let s;fn(s=pn())&&(i.close_btn=s.first)}},inputs:{dialog_id:"dialog_id"},standalone:!0,features:[Le],decls:20,vars:5,consts:[["close_btn",""],["tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","fs-5",3,"id"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","p-0"],[1,"row","align-items-center","pb-1","px-3"],[1,"mb-1"],["for","serial-data-bits",1,"col-form-label"],["type","file",1,"form-control","form-control-sm",3,"change"],[1,"modal-footer"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(r,i){if(r&1){let s=Be();P(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h1",5),Z(5,"Upload command data"),L(),ee(6,"button",6,0),L(),P(8,"div",7)(9,"div",8)(10,"form")(11,"div",9)(12,"label",10),Z(13,"Upload File:"),L(),P(14,"input",11),de("change",function(a){return me(s),_e(i.uploadFile(a))}),L()()()()(),P(15,"div",12),Ee(16,qD,2,0,"button",13)(17,KD,2,0,"button",13),P(18,"button",14),Z(19,"Cancel"),L()()()()()}r&2&&(Q("id",i.dialog_id),nt("aria-labelledby",i.dialog_id+"_label"),G(4),Q("id",i.dialog_id+"_label"),G(12),Q("ngIf",i.uploaded_command_groups!=null),G(),Q("ngIf",i.uploaded_command_groups!=null))},dependencies:[Ke,ft],changeDetection:0})}return t})();function ZD(t,e){if(t&1){let n=Be();P(0,"i",21),de("click",function(){me(n);let i=J();return _e(i.changeLayout(i.appService.layout_mode!="grid"?"grid":"tab"))}),L()}if(t&2){let n=J();Kt("toggle-sidebar-btn clickable-icon bi "+(n.appService.layout_mode!="grid"?"bi-window-stack":"bi-grid"))}}var Fm=(()=>{class t{changeDetectorRef;appService;constructor(n,r){this.changeDetectorRef=n,this.appService=r,this.appService.SessionChangeEvent.subscribe(()=>{this.changeDetectorRef.detectChanges()})}addSession(){this.appService.newSession()}changeLayout(n){this.appService.changeLayout(n)}dumpCommandData(){if(this.appService.command_groups!=null){let n=new Date,i=`command_data_${`${n.getFullYear()}${n.getMonth()+1}${n.getDate()}${n.getHours()}${n.getMinutes()}${n.getSeconds()}`}.json`,s=new Blob([JSON.stringify(this.appService.command_groups)],{type:"text/html"});new FormData().append("file",s,i);let a=window.URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=i,l.click(),window.URL.revokeObjectURL(a),this.appService.showInfo(`Command data downloaded: ${i}`)}else this.appService.showError("No command data available!")}toggleFullscreen(){let n=window.document;n.fullScreenElement&&n.fullScreenElement!==null||!n.mozFullScreen&&!n.webkitIsFullScreen?n.documentElement.requestFullScreen?n.documentElement.requestFullScreen():n.documentElement.mozRequestFullScreen?n.documentElement.mozRequestFullScreen():n.documentElement.webkitRequestFullScreen?n.documentElement.webkitRequestFullScreen():n.msRequestFullscreen&&n.documentElement.msRequestFullscreen():n.cancelFullScreen?n.cancelFullScreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitCancelFullScreen?n.webkitCancelFullScreen():n.msExitFullscreen&&n.msExitFullscreen()}isFullscreen(){let n=window.document;return n.fullScreenElement&&n.fullScreenElement!==null||!n.mozFullScreen&&!n.webkitIsFullScreen}static \u0275fac=function(r){return new(r||t)(X(Ve),X($e))};static \u0275cmp=Ne({type:t,selectors:[["app-header"]],standalone:!0,features:[Le],decls:31,vars:3,consts:[["id","header",1,"header","fixed-top","d-flex","align-items-center"],[1,"d-flex","align-items-center","justify-content-between"],[1,"logo","d-flex","align-items-center"],["src","img/logo.png","alt",""],[1,"d-none","d-lg-block"],["data-bs-toggle","tooltip","data-bs-placement","top","title","New Session",1,"bi","bi-terminal-plus","toggle-sidebar-btn","clickable-icon",3,"click"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Session Layout",3,"class","click",4,"ngIf"],[1,"d-flex","ms-2","align-items-center","justify-content-between"],[1,"header-nav","ms-auto"],[1,"d-flex","align-items-center"],[1,"nav-item","me-2"],["id","command_group_dropdown","data-bs-toggle","dropdown","data-bs-auto-close","true","aria-expanded","false",1,"bi","bi-bookmarks-fill","dropdown-toggle"],["aria-labelledby","command_group_dropdown",1,"dropdown-menu"],[1,"dropdown-item","px-2","py-1",3,"click"],[1,"bi","bi-gear"],[1,"dropdown-divider"],[1,"bi","bi-bookmarks-fill"],["data-bs-toggle","modal","data-bs-target","#command_data_upload_dialog",1,"dropdown-item","px-2","py-1"],[1,"bi","bi-upload"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Enter Fullscreen",1,"bi","bi-arrows-fullscreen","toggle-sidebar-btn","clickable-icon",3,"click"],[3,"dialog_id"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Session Layout",3,"click"]],template:function(r,i){r&1&&(P(0,"header",0)(1,"div",1)(2,"div",2),ee(3,"img",3),P(4,"span",4),Z(5,"VTerm"),L()(),P(6,"i",5),de("click",function(){return i.addSession()}),L(),Ee(7,ZD,1,2,"i",6),L(),ee(8,"div",7),P(9,"nav",8)(10,"ul",9)(11,"li",10),ee(12,"i",11),P(13,"ul",12)(14,"li")(15,"button",13),de("click",function(){return i.appService.toggleCommandAdminMode()}),ee(16,"i",14),Z(17),L()(),ee(18,"div",15),P(19,"li")(20,"button",13),de("click",function(){return i.dumpCommandData()}),ee(21,"i",16),Z(22,"Dump Command Data"),L()(),ee(23,"div",15),P(24,"li")(25,"button",17),ee(26,"i",18),Z(27,"Upload Command Data"),L()()()(),P(28,"li",10)(29,"i",19),de("click",function(){return i.toggleFullscreen()}),L()()(),ee(30,"command-data-upload",20),L()()),r&2&&(G(7),Q("ngIf",i.appService.sessions.length>1),G(10),Zt("",i.appService.command_group_admin?"Disable":"Enable"," Command Admin"),G(13),Q("dialog_id","command_data_upload_dialog"))},dependencies:[Ke,ft,Pm],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return t})();var Gm=ld(Bm()),qm=ld(jm());var di=()=>({standalone:!0});function YD(t,e){if(t&1){let n=Be();P(0,"div",12)(1,"form")(2,"div",13)(3,"label",14),Z(4,"BaudRate:"),L(),P(5,"select",15),Je("ngModelChange",function(i){me(n);let s=J();return rt(s.session.serial_options.baudRate,i)||(s.session.serial_options.baudRate=i),_e(i)}),P(6,"option",16),Z(7,"110"),L(),P(8,"option",17),Z(9,"300"),L(),P(10,"option",18),Z(11,"1200"),L(),P(12,"option",19),Z(13,"2400"),L(),P(14,"option",20),Z(15,"4800"),L(),P(16,"option",21),Z(17,"9600"),L(),P(18,"option",22),Z(19,"14400"),L(),P(20,"option",23),Z(21,"19200"),L(),P(22,"option",24),Z(23,"38400"),L(),P(24,"option",25),Z(25,"57600"),L(),P(26,"option",26),Z(27,"115200"),L(),P(28,"option",27),Z(29,"230400"),L(),P(30,"option",28),Z(31,"460800"),L(),P(32,"option",29),Z(33,"921600"),L()()(),P(34,"div",13)(35,"label",30),Z(36,"DataBits:"),L(),P(37,"input",31),Je("ngModelChange",function(i){me(n);let s=J();return rt(s.session.serial_options.dataBits,i)||(s.session.serial_options.dataBits=i),_e(i)}),L()(),P(38,"div",13)(39,"label",32),Z(40,"StopBits:"),L(),P(41,"input",33),Je("ngModelChange",function(i){me(n);let s=J();return rt(s.session.serial_options.stopBits,i)||(s.session.serial_options.stopBits=i),_e(i)}),L()(),P(42,"div",13)(43,"label",34),Z(44,"Parity:"),L(),P(45,"select",35),Je("ngModelChange",function(i){me(n);let s=J();return rt(s.session.serial_options.parity,i)||(s.session.serial_options.parity=i),_e(i)}),P(46,"option",36),Z(47,"none"),L(),P(48,"option",37),Z(49,"odd"),L(),P(50,"option",38),Z(51,"even"),L()()(),P(52,"div",13)(53,"label",39),Z(54,"BufferSize:"),L(),P(55,"input",40),Je("ngModelChange",function(i){me(n);let s=J();return rt(s.session.serial_options.bufferSize,i)||(s.session.serial_options.bufferSize=i),_e(i)}),L()(),P(56,"div",13)(57,"label",41),Z(58,"Send New Line:"),L(),P(59,"select",42),Je("ngModelChange",function(i){me(n);let s=J();return rt(s.session.serial_options.line_feed,i)||(s.session.serial_options.line_feed=i),_e(i)}),P(60,"option",43),Z(61,"NONE"),L(),P(62,"option",44),Z(63,"CR"),L(),P(64,"option",45),Z(65,"LF"),L(),P(66,"option",46),Z(67,"CRLF"),L()()()()()}if(t&2){let n=J();G(5),Xe("ngModel",n.session.serial_options.baudRate),Q("ngModelOptions",ht(12,di)),G(32),Xe("ngModel",n.session.serial_options.dataBits),Q("ngModelOptions",ht(13,di)),G(4),Xe("ngModel",n.session.serial_options.stopBits),Q("ngModelOptions",ht(14,di)),G(4),Xe("ngModel",n.session.serial_options.parity),Q("ngModelOptions",ht(15,di)),G(10),Xe("ngModel",n.session.serial_options.bufferSize),Q("ngModelOptions",ht(16,di)),G(4),Xe("ngModel",n.session.serial_options.line_feed),Q("ngModelOptions",ht(17,di))}}var Hm=(()=>{class t{appService;session=void 0;dialog_id="";constructor(n){this.appService=n}saveAsDefault(){if(this.session!=null)try{this.appService.saveDefaultSerialOptions(this.session.serial_options),this.appService.showInfo("Default serial port parameter save successful!")}catch(n){this.appService.showInfo(`Default serial port parameter save failed! ${n.message}`)}}static \u0275fac=function(r){return new(r||t)(X($e))};static \u0275cmp=Ne({type:t,selectors:[["serial-session-config"]],inputs:{session:"session",dialog_id:"dialog_id"},standalone:!0,features:[Le],decls:16,vars:5,consts:[["tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","fs-5",3,"id"],[1,"text-primary"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["class","row align-items-center pb-1 px-3",4,"ngIf"],[1,"modal-footer","d-flex","justify-content-between"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"row","align-items-center","pb-1","px-3"],[1,"mb-1"],["for","serial-baud-rate",1,"col-form-label"],["id","serial-baud-rate",1,"form-select","form-select-sm",3,"ngModelChange","ngModel","ngModelOptions"],["value","110"],["value","300"],["value","1200"],["value","2400"],["value","4800"],["value","9600"],["value","14400"],["value","19200"],["value","38400"],["value","57600"],["value","115200"],["value","230400"],["value","460800"],["value","921600"],["for","serial-data-bits",1,"col-form-label"],["type","number","id","serial-data-bits",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngModelOptions"],["for","serial-stop-bits",1,"col-form-label"],["type","number","id","serial-stop-bits",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngModelOptions"],["for","serial-parity",1,"col-form-label"],["id","serial-parity",1,"form-select","form-select-sm",3,"ngModelChange","ngModel","ngModelOptions"],["value","none"],["value","odd"],["value","even"],["for","serial-buffer-size",1,"col-form-label"],["type","number","id","serial-buffer-size",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngModelOptions"],["for","serial-new-line-character",1,"col-form-label"],["id","serial-new-line-character",1,"form-select","form-select-sm",3,"ngModelChange","ngModel","ngModelOptions"],["value","NONE"],["value","CR"],["value","LF"],["value","CRLF"]],template:function(r,i){r&1&&(P(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),Z(5,"Serial Parameters for "),P(6,"span",5),Z(7),L()(),ee(8,"button",6),L(),P(9,"div",7),Ee(10,YD,68,18,"div",8),L(),P(11,"div",9)(12,"button",10),de("click",function(){return i.saveAsDefault()}),Z(13,"Save as Default"),L(),P(14,"button",11),Z(15,"Close"),L()()()()()),r&2&&(Q("id",i.dialog_id),nt("aria-labelledby",i.dialog_id+"_label"),G(4),Q("id",i.dialog_id+"_label"),G(3),Pn(i.session.name),G(3),Q("ngIf",!i.session.opened))},dependencies:[Ke,ft,Mt,li,va,ya,Qt,nd,ui,Xt,ci,Bt,hr],changeDetection:0})}return t})();var QD=["close_btn"],XD=()=>({standalone:!0});function JD(t,e){if(t&1&&(P(0,"p",16),Z(1),L()),t&2){let n=J();G(),Zt(" ",n.error_message," ")}}var Um=(()=>{class t{appService;close_btn;dialog_id="";command_group_added=new Te;group_name="";error_message="";constructor(n){this.appService=n}addCommandGroup(){this.appService!=null&&(this.appService.getCommandGroup(this.group_name)==null?(this.appService.command_groups.push({name:this.group_name,commands:[]}),this.error_message="",this.command_group_added.emit(this.group_name),this.close_btn!=null&&(this.group_name="",this.close_btn.nativeElement.click())):this.error_message=`error - command group already exist: ${this.group_name}`)}static \u0275fac=function(r){return new(r||t)(X($e))};static \u0275cmp=Ne({type:t,selectors:[["new-command-group"]],viewQuery:function(r,i){if(r&1&&Ln(QD,5),r&2){let s;fn(s=pn())&&(i.close_btn=s.first)}},inputs:{dialog_id:"dialog_id"},outputs:{command_group_added:"command_group_added"},standalone:!0,features:[Le],decls:21,vars:7,consts:[["close_btn",""],["tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","fs-5",3,"id"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","p-0"],[1,"row","align-items-center","pb-1","px-3"],[1,"mb-1"],["for","serial-data-bits",1,"col-form-label"],["type","text","id","serial-data-bits",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngModelOptions"],[1,"modal-footer","d-flex","justify-content-between"],["type","button",1,"btn","btn-primary",3,"click"],["class","text-danger",4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"text-danger"]],template:function(r,i){if(r&1){let s=Be();P(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h1",5),Z(5,"New Command Group"),L(),ee(6,"button",6,0),L(),P(8,"div",7)(9,"div",8)(10,"form")(11,"div",9)(12,"label",10),Z(13,"Group Name:"),L(),P(14,"input",11),Je("ngModelChange",function(a){return me(s),rt(i.group_name,a)||(i.group_name=a),_e(a)}),L()()()()(),P(15,"div",12)(16,"button",13),de("click",function(){return me(s),_e(i.addCommandGroup())}),Z(17,"Add"),L(),Ee(18,JD,2,1,"p",14),P(19,"button",15),Z(20,"Cancel"),L()()()()()}r&2&&(Q("id",i.dialog_id),nt("aria-labelledby",i.dialog_id+"_label"),G(4),Q("id",i.dialog_id+"_label"),G(10),Xe("ngModel",i.group_name),Q("ngModelOptions",ht(6,XD)),G(4),Q("ngIf",i.error_message!=null&&i.error_message.length>0))},dependencies:[Ke,ft,Mt,li,Qt,Xt,ci,Bt,hr],changeDetection:0})}return t})();var eE=["close_btn"],$m=()=>({standalone:!0}),Wm=(()=>{class t{appService;close_btn;dialog_id="";group_name="";command_added=new Te;command="";name="";constructor(n){this.appService=n}addCommand(){if(this.appService!=null){let n=this.appService.getCommandGroup(this.group_name);n!=null&&(n.commands.push({name:this.name,command:this.command}),this.command_added.emit(),this.close_btn!=null&&(this.name="",this.command="",this.close_btn.nativeElement.click()))}}static \u0275fac=function(r){return new(r||t)(X($e))};static \u0275cmp=Ne({type:t,selectors:[["new-command"]],viewQuery:function(r,i){if(r&1&&Ln(eE,5),r&2){let s;fn(s=pn())&&(i.close_btn=s.first)}},inputs:{dialog_id:"dialog_id",group_name:"group_name"},outputs:{command_added:"command_added"},standalone:!0,features:[Le],decls:24,vars:9,consts:[["close_btn",""],["tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","fs-5",3,"id"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","p-0"],[1,"row","align-items-center","pb-1","px-3"],[1,"mb-1"],["for","serial-data-bits",1,"col-form-label"],["type","text","id","serial-data-bits",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngModelOptions"],[1,"modal-footer","d-flex","justify-content-between"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(r,i){if(r&1){let s=Be();P(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h1",5),Z(5,"New Command"),L(),ee(6,"button",6,0),L(),P(8,"div",7)(9,"div",8)(10,"form")(11,"div",9)(12,"label",10),Z(13,"Command:"),L(),P(14,"input",11),Je("ngModelChange",function(a){return me(s),rt(i.command,a)||(i.command=a),_e(a)}),L()(),P(15,"div",9)(16,"label",10),Z(17,"Name:"),L(),P(18,"input",11),Je("ngModelChange",function(a){return me(s),rt(i.name,a)||(i.name=a),_e(a)}),L()()()()(),P(19,"div",12)(20,"button",13),de("click",function(){return me(s),_e(i.addCommand())}),Z(21,"Add"),L(),P(22,"button",14),Z(23,"Cancel"),L()()()()()}r&2&&(Q("id",i.dialog_id),nt("aria-labelledby",i.dialog_id+"_label"),G(4),Q("id",i.dialog_id+"_label"),G(10),Xe("ngModel",i.command),Q("ngModelOptions",ht(7,$m)),G(4),Xe("ngModel",i.name),Q("ngModelOptions",ht(8,$m)))},dependencies:[Ke,Mt,li,Qt,Xt,ci,Bt,hr],changeDetection:0})}return t})();var tE=()=>({standalone:!0});function nE(t,e){if(t&1&&(P(0,"option",10),Z(1),L()),t&2){let n=e.$implicit;Q("value",n.name),G(),Zt(" ",n.name," ")}}function rE(t,e){if(t&1){let n=Be();P(0,"div",11)(1,"button",12),ee(2,"i",13),L(),P(3,"new-command-group",14),de("command_group_added",function(i){me(n);let s=J();return _e(s.changeActiveCommandGroup(i))}),L()()}if(t&2){let n=J();G(),nt("data-bs-target","#"+n.add_command_group_dialog_id),G(2),Q("dialog_id",n.add_command_group_dialog_id)}}function iE(t,e){if(t&1&&(P(0,"div",11)(1,"button",12),ee(2,"i",15),L(),ee(3,"new-command",16),L()),t&2){let n=J();G(),nt("data-bs-target","#"+n.add_command_dialog_id),G(2),Q("dialog_id",n.add_command_dialog_id)("group_name",n.active_command_group)}}function sE(t,e){if(t&1){let n=Be();P(0,"div",17)(1,"button",18),de("click",function(){me(n);let i=J();return _e(i.removeCommandGroup())}),ee(2,"i",19),L()()}}function oE(t,e){if(t&1){let n=Be();P(0,"button",25),de("click",function(){me(n);let i=J().$implicit,s=J(2);return _e(s.sendCommand(i.command))}),ee(1,"i",26),L()}}function aE(t,e){if(t&1){let n=Be();P(0,"button",27),de("click",function(){me(n);let i=J().$implicit,s=J(2);return _e(s.removeCommand(i))}),ee(1,"i",28),L()}}function cE(t,e){if(t&1&&(P(0,"tr")(1,"td"),Z(2),L(),P(3,"td"),Z(4),L(),P(5,"td"),Ee(6,oE,2,0,"button",23)(7,aE,2,0,"button",24),L()()),t&2){let n=e.$implicit,r=J(2);G(2),Pn(n.command),G(2),Pn(n.name),G(2),Q("ngIf",r.session.opened&&!r.appService.command_group_admin),G(),Q("ngIf",r.appService.command_group_admin)}}function lE(t,e){if(t&1&&(P(0,"table",20)(1,"thead")(2,"tr")(3,"th",21),Z(4,"Command"),L(),P(5,"th",21),Z(6,"Name"),L(),ee(7,"th",21),L()(),P(8,"tbody"),Ee(9,cE,8,4,"tr",22),L()()),t&2){let n=J();G(9),Q("ngForOf",n.appService.getCommandGroup(n.active_command_group).commands)}}var zm=(()=>{class t{changeDetectorRef;appService;session=void 0;sessionStateSubscription=void 0;add_command_group_dialog_id="";add_command_dialog_id="";active_command_group="";constructor(n,r){this.changeDetectorRef=n,this.appService=r}ngAfterViewInit(){this.appService.CommandGroupChangeEvent.subscribe(()=>{this.appService.getCommandGroup(this.active_command_group)==null&&this.appService.command_groups!=null&&this.appService.command_groups.length>0&&(this.active_command_group=this.appService.command_groups[0].name),this.changeDetectorRef.markForCheck()}),this.appService.command_groups!=null&&this.appService.command_groups.length>0&&(this.active_command_group=this.appService.command_groups[0].name),this.session!=null&&(this.add_command_group_dialog_id=`${this.session.name}_add_cmd_group_dialog`,this.add_command_dialog_id=`${this.session.name}_add_cmd_dialog`,this.sessionStateSubscription=this.session.SessionStateEvent.subscribe(n=>{this.changeDetectorRef.markForCheck()}))}ngOnChanges(n){n.session!=null&&(this.sessionStateSubscription!=null&&this.sessionStateSubscription.unsubscribe(),this.session!=null&&(this.add_command_group_dialog_id=`${this.session.name}_add_cmd_group_dialog`,this.add_command_dialog_id=`${this.session.name}_add_cmd_dialog`,this.sessionStateSubscription=this.session.SessionStateEvent.subscribe(r=>{this.changeDetectorRef.markForCheck()})))}ngOnDestroy(){this.sessionStateSubscription!=null&&this.sessionStateSubscription.unsubscribe()}changeActiveCommandGroup(n){this.active_command_group=n}removeCommandGroup(){if(this.active_command_group!=null&&this.active_command_group.length>0){let n=this.appService.getCommandGroup(this.active_command_group);if(n!=null){let r=this.appService.command_groups.indexOf(n);this.appService.command_groups.splice(r,1),this.appService.showInfo(`command group removed: ${this.active_command_group}`),this.appService.command_groups.length>0&&(this.active_command_group=this.appService.command_groups[0].name),this.appService.TriggerCommandGroupChangeEvent()}}}sendCommand(n){if(this.session!=null&&this.session.opened){let r=new TextEncoder;this.session.write(r.encode(n+this.session.getNewLineCharacter()))}}removeCommand(n){if(this.active_command_group!=null&&this.active_command_group.length>0){let r=this.appService.getCommandGroup(this.active_command_group);if(r!=null){let i=r.commands.indexOf(n);i>=0&&r.commands.splice(i,1),this.appService.showInfo(`command removed: ${n.name}`),this.appService.TriggerCommandGroupChangeEvent()}}}static \u0275fac=function(r){return new(r||t)(X(Ve),X($e))};static \u0275cmp=Ne({type:t,selectors:[["command-set-view"]],inputs:{session:"session"},standalone:!0,features:[qt,Le],decls:11,vars:8,consts:[[1,"card","border-success","h-100","mb-0"],[1,"card-header","bg-transparent","border-success","p-1"],[1,"row"],[1,"col","pe-1"],["id","serial-parity",1,"form-select","form-select-sm",3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],["class","col-auto ps-0 pe-1",4,"ngIf"],["class","col-auto ps-0",4,"ngIf"],[1,"card-body","text-success","px-2","pb-1",2,"height","10px","overflow-y","auto","overflow-x","auto"],["class","table table-sm table-striped table-hover",4,"ngIf"],[3,"value"],[1,"col-auto","ps-0","pe-1"],["data-bs-toggle","modal",1,"btn","btn-outline-primary","btn-sm"],["data-bs-toggle","tooltip","data-bs-placement","top","title","New Croup",1,"bi","bi-bookmark-plus"],[3,"command_group_added","dialog_id"],["data-bs-toggle","tooltip","data-bs-placement","top","title","New Command",1,"bi","bi-plus-square"],[3,"dialog_id","group_name"],[1,"col-auto","ps-0"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Remove Group",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-bookmark-dash"],[1,"table","table-sm","table-striped","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["class","btn btn-outline-primary btn-sm px-1 py-0","data-bs-toggle","tooltip","data-bs-placement","top","title","Send Command",3,"click",4,"ngIf"],["class","btn btn-outline-danger btn-sm px-1 py-0","data-bs-toggle","tooltip","data-bs-placement","top","title","Remove Command",3,"click",4,"ngIf"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Send Command",1,"btn","btn-outline-primary","btn-sm","px-1","py-0",3,"click"],[1,"bi-send-fill"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Remove Command",1,"btn","btn-outline-danger","btn-sm","px-1","py-0",3,"click"],[1,"bi-dash"]],template:function(r,i){r&1&&(P(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"select",4),Je("ngModelChange",function(o){return rt(i.active_command_group,o)||(i.active_command_group=o),o}),Ee(5,nE,2,2,"option",5),L()(),Ee(6,rE,4,2,"div",6)(7,iE,4,3,"div",6)(8,sE,3,0,"div",7),L()(),P(9,"div",8),Ee(10,lE,10,1,"table",9),L()()),r&2&&(G(4),Xe("ngModel",i.active_command_group),Q("ngModelOptions",ht(7,tE)),G(),Q("ngForOf",i.appService.command_groups),G(),Q("ngIf",i.appService.command_group_admin),G(),Q("ngIf",i.appService.command_group_admin),G(),Q("ngIf",i.appService.command_group_admin),G(2),Q("ngIf",i.active_command_group!=""))},dependencies:[Ke,qr,ft,Mt,va,ya,ui,Xt,Bt,Um,Wm],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:3px;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.5)}"],changeDetection:0})}return t})();var uE=["terminal_container"];function dE(t,e){if(t&1&&ee(0,"command-set-view",30),t&2){let n=J(2);Q("session",n.session)}}function hE(t,e){if(t&1){let n=Be();P(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"button",6),Z(5),L(),P(6,"ul",7)(7,"li")(8,"button",8),ee(9,"i",9),Z(10,"Config"),L()(),ee(11,"div",10),P(12,"li")(13,"button",11),de("click",function(){me(n);let i=J();return _e(i.clearBuffer())}),ee(14,"i",12),Z(15,"Clear Buffer"),L()(),ee(16,"div",10),P(17,"li")(18,"button",11),de("click",function(){me(n);let i=J();return _e(i.saveSessionData())}),ee(19,"i",13),Z(20,"Save Data"),L()(),ee(21,"div",10),P(22,"li")(23,"button",11),de("click",function(){me(n);let i=J();return _e(i.removeSession())}),ee(24,"i",14),Z(25,"Remove"),L()()()()(),P(26,"div",15)(27,"button",16),de("click",function(){me(n);let i=J();return _e(i.selectPort())}),ee(28,"i",17),L()(),P(29,"div",15)(30,"button",18),de("click",function(){me(n);let i=J();return _e(i.toggleConnection())}),ee(31,"i"),L()(),P(32,"div",19)(33,"input",20),Je("ngModelChange",function(i){me(n);let s=J();return rt(s.input_command,i)||(s.input_command=i),_e(i)}),de("keydown.enter",function(){me(n);let i=J();return _e(i.sendCommand())}),L()(),P(34,"div",15)(35,"button",21),de("click",function(){me(n);let i=J();return _e(i.sendCommand())}),ee(36,"i",22),L()(),P(37,"div",23)(38,"button",24),de("click",function(){me(n);let i=J();return _e(i.toggleCommandPanel())}),ee(39,"i",25),L()()(),ee(40,"serial-session-config",26)(41,"hr",27),P(42,"div",28),ee(43,"div",null,0),Ee(45,dE,1,1,"command-set-view",29),L()()}if(t&2){let n=J();G(5),Zt(" ",n.session.name," "),G(3),nt("data-bs-target","#"+n.config_dialog_id),G(19),Q("disabled",n.session.opened),G(3),Yl("title",n.session.opened?"Close Port":"Open Port"),Q("disabled",n.session.serial_port==null),G(),Kt("bi "+(n.session.opened?"bi-pause-fill":"bi-play-fill")),G(2),Xe("ngModel",n.input_command),Q("disabled",!n.session.opened),G(2),Q("disabled",!n.session.opened),G(3),Kt("btn btn-sm"+(n.session.command_set_visible?" btn-primary":" btn-outline-primary")),G(2),Q("dialog_id",n.config_dialog_id)("session",n.session),G(3),Kt("h-100"+(n.session.command_set_visible?" col-8 pe-0":" col-12")),G(2),Q("ngIf",n.session.command_set_visible)}}var wa=(()=>{class t{changeDetectorRef;appService;terminalContainer;session=void 0;sessionSubscription=void 0;resizeSubscription=void 0;terminal=void 0;fitAddon=void 0;input_command="";resizeTimeout=void 0;config_dialog_id="";controlCodeMap=[{key:"@",ctrlKey:!0,mapCode:0},{key:"a",ctrlKey:!0,mapCode:1},{key:"b",ctrlKey:!0,mapCode:2},{key:"c",ctrlKey:!0,mapCode:3},{key:"d",ctrlKey:!0,mapCode:4},{key:"e",ctrlKey:!0,mapCode:5},{key:"f",ctrlKey:!0,mapCode:6},{key:"g",ctrlKey:!0,mapCode:7},{key:"h",ctrlKey:!0,mapCode:8},{key:"i",ctrlKey:!0,mapCode:9},{key:"j",ctrlKey:!0,mapCode:10},{key:"k",ctrlKey:!0,mapCode:11},{key:"l",ctrlKey:!0,mapCode:12},{key:"m",ctrlKey:!0,mapCode:13},{key:"n",ctrlKey:!0,mapCode:14},{key:"o",ctrlKey:!0,mapCode:15},{key:"p",ctrlKey:!0,mapCode:16},{key:"q",ctrlKey:!0,mapCode:17},{key:"r",ctrlKey:!0,mapCode:18},{key:"s",ctrlKey:!0,mapCode:19},{key:"t",ctrlKey:!0,mapCode:20},{key:"u",ctrlKey:!0,mapCode:21},{key:"v",ctrlKey:!0,mapCode:22},{key:"w",ctrlKey:!0,mapCode:23},{key:"x",ctrlKey:!0,mapCode:24},{key:"y",ctrlKey:!0,mapCode:25},{key:"z",ctrlKey:!0,mapCode:26},{key:"[",ctrlKey:!0,mapCode:27},{key:"\\",ctrlKey:!0,mapCode:28},{key:"]",ctrlKey:!0,mapCode:29},{key:"^",ctrlKey:!0,mapCode:30},{key:"_",ctrlKey:!0,mapCode:31},{key:"Backspace",ctrlKey:!1,mapCode:8},{key:"Tab",ctrlKey:!1,mapCode:9},{key:"Escape",ctrlKey:!1,mapCode:27}];constructor(n,r){this.changeDetectorRef=n,this.appService=r,this.resizeSubscription=this.appService.ResizeEvent.subscribe(()=>{this.terminal!=null&&this.fitAddon!=null&&(this.resizeTimeout!=null&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.fitAddon.fit()},200))})}ngAfterViewInit(){this.terminal==null&&this.terminalContainer!=null&&(this.terminal=new qm.Terminal({convertEol:!0,rows:10,cols:50}),this.fitAddon=new Gm.FitAddon,this.terminal.loadAddon(this.fitAddon),this.terminal.open(this.terminalContainer.nativeElement),this.fitAddon.fit(),this.terminal.attachCustomKeyEventHandler(n=>this.processKeyEvent(n))),this.session!=null&&(this.config_dialog_id=`${this.session.name}_config_dialog`,this.terminal!=null&&this.terminal.write(Uint8Array.from(this.session.readBuffer())),this.sessionSubscription=this.session.SessionDataEvent.subscribe(n=>{this.terminal!=null&&this.terminal.write(n)}))}ngOnChanges(n){n.session!=null&&this.terminal!=null&&(this.sessionSubscription!=null&&this.sessionSubscription.unsubscribe(),this.terminal.reset(),this.session!=null&&(this.config_dialog_id=`${this.session.name}_config_dialog`,this.terminal.write(Uint8Array.from(this.session.readBuffer())),this.sessionSubscription=this.session.SessionDataEvent.subscribe(r=>{this.terminal.write(r)})))}ngOnDestroy(){this.sessionSubscription!=null&&this.sessionSubscription.unsubscribe(),this.resizeSubscription!=null&&this.resizeSubscription.unsubscribe()}removeSession(){this.appService.removeSession(this.session)}showCommandSetsPanel(){this.session.command_set_visible=!0}toggleCommandPanel(){this.session.command_set_visible=!this.session.command_set_visible}saveSessionData(){if(this.session!=null){let n=new Date,r=`${n.getFullYear()}${n.getMonth()+1}${n.getDate()}${n.getHours()}${n.getMinutes()}${n.getSeconds()}`,i=`${this.session.name}_${r}.txt`,s=new Blob([Uint8Array.from(this.session.readBuffer())],{type:"text/html"});new FormData().append("file",s,i);let a=window.URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=i,l.click(),window.URL.revokeObjectURL(a),this.appService.showInfo(`Session data downloaded: ${i}`)}else this.appService.showError("No session data available!")}sendCommand(){if(this.input_command.length>0&&this.session!=null){let n=new TextEncoder;this.session.write(n.encode(this.input_command+this.session.getNewLineCharacter()))}}clearBuffer(){this.terminal!=null&&this.terminal.reset(),this.session!=null&&this.session.clear()}selectPort(){return en(this,null,function*(){try{let n=yield navigator.serial.requestPort({});this.session.serial_port=n,this.session.serial_port!=null&&(yield this.session.open()),this.changeDetectorRef.markForCheck()}catch(n){this.appService.showError(n.message)}})}toggleConnection(){return en(this,null,function*(){try{this.session.opened?yield this.session.close():yield this.session.open(),this.changeDetectorRef.markForCheck()}catch(n){this.appService.showError(n.message)}})}processKeyEvent(n){if(this.session!=null&&n.type==="keydown"&&!n.repeat){let r=this.getControlCode(n),i=[];if(r!=null)i.push(r);else{let s=new TextEncoder;n.code=="Enter"?i.push(...s.encode(`
`).values()):n.code=="ArrowUp"?(i.push(27),i.push(...s.encode("[A"))):n.code=="ArrowDown"?(i.push(27),i.push(...s.encode("[B"))):n.code=="ArrowLeft"?(i.push(27),i.push(...s.encode("[D"))):n.code=="ArrowRight"?(i.push(27),i.push(...s.encode("[C"))):n.key.length==1&&i.push(...s.encode(n.key).values())}this.session.write(Uint8Array.from(i))}return!0}getControlCode(n){for(let r=0;r<this.controlCodeMap.length;r++)if(this.controlCodeMap[r].key==n.key&&this.controlCodeMap[r].ctrlKey==n.ctrlKey)return this.controlCodeMap[r].mapCode}static \u0275fac=function(r){return new(r||t)(X(Ve),X($e))};static \u0275cmp=Ne({type:t,selectors:[["serial-session"]],viewQuery:function(r,i){if(r&1&&Ln(uE,5),r&2){let s;fn(s=pn())&&(i.terminalContainer=s.first)}},inputs:{session:"session"},standalone:!0,features:[qt,Le],decls:1,vars:1,consts:[["terminal_container",""],["class","d-flex flex-column p-1 mb-1 bd-highlight border border-primary h-100 overflow-hidden",4,"ngIf"],[1,"d-flex","flex-column","p-1","mb-1","bd-highlight","border","border-primary","h-100","overflow-hidden"],[1,"row","align-items-center","mb-1"],[1,"col-auto","pe-0"],[1,"btn-group","dropend"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-primary","btn-sm","dropdown-toggle"],[1,"dropdown-menu"],["data-bs-toggle","modal",1,"dropdown-item","px-2","py-1"],[1,"bi","bi-gear"],[1,"dropdown-divider"],[1,"dropdown-item","px-2","py-1",3,"click"],[1,"bi","bi-calendar4"],[1,"bi","bi-save2"],[1,"bi","bi-x-circle"],[1,"col-auto","ps-1","pe-0"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Select Port",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"bi","bi-search"],["data-bs-toggle","tooltip","data-bs-placement","top",1,"btn","btn-outline-primary","btn-sm",3,"click","title","disabled"],[1,"col","ps-1","pe-0"],["type","text","placeholder","","tooltip","input command","spellcheck","false",1,"form-control","form-control-sm",3,"ngModelChange","keydown.enter","ngModel","disabled"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Send",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"bi","bi-send-fill"],[1,"col-auto","ps-1"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Show command panel",3,"click"],[1,"bi","bi-bookmark-star-fill"],[3,"dialog_id","session"],[1,"mt-0","mb-1"],[1,"d-flex","align-self-stretch","flex-grow-1","row"],["class","col-4 h-100 ps-0",3,"session",4,"ngIf"],[1,"col-4","h-100","ps-0",3,"session"]],template:function(r,i){r&1&&Ee(0,hE,46,17,"div",1),r&2&&Q("ngIf",i.session!=null)},dependencies:[Ke,ft,Mt,Qt,Xt,Bt,Hm,zm],changeDetection:0})}return t})();function fE(t,e){if(t&1){let n=Be();P(0,"button",5),de("click",function(){let i=me(n).index,s=J();return _e(s.setActiveSession(i))}),Z(1),L()}if(t&2){let n=e.$implicit,r=e.index,i=J();Kt("nav-link"+(i.appService.active_session==r?" active":"")),G(),Pn(n.name)}}function pE(t,e){if(t&1&&(P(0,"div",6),ee(1,"serial-session",7),L()),t&2){let n=J();G(),Q("session",n.appService.sessions[n.appService.active_session])}}var Km=(()=>{class t{changeDetectorRef;appService;constructor(n,r){this.changeDetectorRef=n,this.appService=r,this.appService.SessionChangeEvent.subscribe(()=>{this.changeDetectorRef.markForCheck()})}setActiveSession(n){this.appService.active_session=n}static \u0275fac=function(r){return new(r||t)(X(Ve),X($e))};static \u0275cmp=Ne({type:t,selectors:[["app-tab-view"]],standalone:!0,features:[Le],decls:5,vars:2,consts:[[1,"d-flex","flex-column","w-100","h-100"],[1,"align-items-center"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],[3,"class","click",4,"ngFor","ngForOf"],["class","tab-content flex-grow-1",4,"ngIf"],[3,"click"],[1,"tab-content","flex-grow-1"],[1,"col","h-100",3,"session"]],template:function(r,i){r&1&&(P(0,"div",0)(1,"nav",1)(2,"div",2),Ee(3,fE,2,3,"button",3),L()(),Ee(4,pE,2,1,"div",4),L()),r&2&&(G(3),Q("ngForOf",i.appService.sessions),G(),Q("ngIf",i.appService.sessions.length>0))},dependencies:[Ke,qr,ft,wa],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return t})();function gE(t,e){if(t&1&&ee(0,"serial-session",1),t&2){let n=J();Q("session",n.appService.sessions[0])}}function mE(t,e){if(t&1&&ee(0,"serial-session",6),t&2){let n=J().index,r=J().index,i=J(2);Q("session",i.appService.sessions[r*i.max_col_num+n])}}function _E(t,e){if(t&1&&(P(0,"td",5),Ee(1,mE,1,1,"serial-session",6),L()),t&2){let n=e.index,r=J().index,i=J(2);Zl("width: "+100/i.cols.length+"%;height: "+100/i.rows.length+"%;"),G(),zr(r*i.max_col_num+n<i.appService.sessions.length?1:-1)}}function vE(t,e){if(t&1&&(P(0,"tr"),Ee(1,_E,2,3,"td",4),L()),t&2){let n=J(2);G(),Q("ngForOf",n.cols)}}function yE(t,e){if(t&1&&(P(0,"table",2)(1,"tbody"),Ee(2,vE,2,1,"tr",3),L()()),t&2){let n=J();G(2),Q("ngForOf",n.rows)}}function CE(t,e){if(t&1&&ee(0,"serial-session",6),t&2){let n=J().index,r=J().index,i=J(2);Q("session",i.appService.sessions[r*i.max_col_num+n])}}function SE(t,e){if(t&1&&(P(0,"td",5),Ee(1,CE,1,1,"serial-session",6),L()),t&2){let n=e.index,r=J().index,i=J(2);Zl("width: "+100/i.cols.length+"%;height: "+100/i.rows.length+"%;"),G(),zr(r*i.max_col_num+n<i.appService.sessions.length?1:-1)}}function bE(t,e){if(t&1&&(P(0,"tr"),Ee(1,SE,2,3,"td",4),L()),t&2){let n=J(2);G(),Q("ngForOf",n.cols)}}function wE(t,e){if(t&1&&(P(0,"table",2)(1,"tbody"),Ee(2,bE,2,1,"tr",3),L()()),t&2){let n=J();G(2),Q("ngForOf",n.rows)}}var Zm=(()=>{class t{changeDetectorRef;appService;max_col_num=2;row_num=0;col_num=0;rows=new Array(0);cols=new Array(0);constructor(n,r){this.changeDetectorRef=n,this.appService=r,this.appService.SessionChangeEvent.subscribe(()=>{this.updateLayout(),this.changeDetectorRef.markForCheck()}),this.updateLayout()}updateLayout(){this.row_num=Math.round(this.appService.sessions.length/this.max_col_num),this.rows=new Array(this.row_num),this.cols=new Array(this.max_col_num)}static \u0275fac=function(r){return new(r||t)(X(Ve),X($e))};static \u0275cmp=Ne({type:t,selectors:[["app-grid-view"]],standalone:!0,features:[Le],decls:4,vars:1,consts:[[1,"d-flex","flex-wrap","h-100","mh-100"],[1,"col","mh-100","px-1",3,"session"],[1,"table","table-borderless","table-responsive","overflow-auto","mb-0",2,"height","100%","max-height","100%"],[4,"ngFor","ngForOf"],["class","mh-100 p-1",3,"style",4,"ngFor","ngForOf"],[1,"mh-100","p-1"],[2,"height","100%",3,"session"]],template:function(r,i){r&1&&(P(0,"div",0),Ee(1,gE,1,1,"serial-session",1)(2,yE,3,1,"table",2)(3,wE,3,1,"table",2),L()),r&2&&(G(),zr(i.appService.sessions.length==1?1:i.rows.length%2==0?2:3))},dependencies:[Ke,qr,wa],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return t})();function DE(t,e){t&1&&ee(0,"app-grid-view",2)}function EE(t,e){t&1&&ee(0,"app-tab-view",2)}var Ym=(()=>{class t{changeDetectorRef;appService;title="vterm";constructor(n,r){this.changeDetectorRef=n,this.appService=r,window.onbeforeunload=function(i){i.preventDefault()},this.appService.SessionChangeEvent.subscribe(()=>{this.changeDetectorRef.detectChanges()})}onResize(n){this.appService.triggerResizeEvent()}static \u0275fac=function(r){return new(r||t)(X(Ve),X($e))};static \u0275cmp=Ne({type:t,selectors:[["app-root"]],standalone:!0,features:[Le],decls:5,vars:3,consts:[["id","main",3,"resize"],[1,"container-fluid","h-100"],[1,"col","h-100"]],template:function(r,i){r&1&&(ee(0,"app-header"),P(1,"main",0),de("resize",function(o){return i.onResize(o)},!1,Zf),P(2,"div",1),Ee(3,DE,1,0,"app-grid-view",2)(4,EE,1,0,"app-tab-view",2),L()()),r&2&&(G(),Kt("main px-0"+(i.appService.layout_mode=="grid"&&i.appService.sessions.length>4?" overflow-scroll":"")),G(2),zr(i.appService.layout_mode=="grid"?3:4))},dependencies:[Mt,Fm,Km,Zm]})}return t})();Eg(Ym,um).catch(t=>console.error(t));
